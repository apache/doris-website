(window.webpackJsonp=window.webpackJsonp||[]).push([[327],{715:function(a,t,r){"use strict";r.r(t);var e=r(43),o=Object(e.a)({},(function(){var a=this,t=a.$createElement,r=a._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[r("h1",{attrs:{id:"代码格式化"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#代码格式化"}},[a._v("#")]),a._v(" 代码格式化")]),a._v(" "),r("p",[a._v("为了自动格式化代码，推荐使用clang-format进行代码格式化。")]),a._v(" "),r("h2",{attrs:{id:"代码风格定制"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#代码风格定制"}},[a._v("#")]),a._v(" 代码风格定制")]),a._v(" "),r("p",[a._v("Doris的代码风格在Google Style的基础上稍有改动，定制为.clang-format文件，位于Doris根目录。")]),a._v(" "),r("p",[a._v("目前，.clang-format配置文件适配clang-format-8.0.1以上的版本。")]),a._v(" "),r("h2",{attrs:{id:"环境准备"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#环境准备"}},[a._v("#")]),a._v(" 环境准备")]),a._v(" "),r("p",[a._v("需要下载安装clang-format，也可使用IDE或Editor提供的clang-format插件，下面分别介绍。")]),a._v(" "),r("h3",{attrs:{id:"下载安装clang-format"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#下载安装clang-format"}},[a._v("#")]),a._v(" 下载安装clang-format")]),a._v(" "),r("p",[a._v("Ubuntu: "),r("code",[a._v("apt-get install clang-format")])]),a._v(" "),r("p",[a._v("当前版本为10.0，也可指定旧版本，例如: "),r("code",[a._v("apt-get install clang-format-9")])]),a._v(" "),r("p",[a._v("Centos 7:")]),a._v(" "),r("p",[a._v("centos yum安装的clang-format版本过老，支持的StyleOption太少，建议源码编译10.0版本。")]),a._v(" "),r("h3",{attrs:{id:"clang-format插件"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#clang-format插件"}},[a._v("#")]),a._v(" clang-format插件")]),a._v(" "),r("p",[a._v('Clion IDE可使用插件"ClangFormat"，'),r("code",[a._v("File->Setting->Plugins")]),a._v("搜索下载。但版本无法和\nclang-format程序的版本匹配，从支持的StyleOption上看，应该是低于clang-format-9.0。")]),a._v(" "),r("h2",{attrs:{id:"使用方式"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#使用方式"}},[a._v("#")]),a._v(" 使用方式")]),a._v(" "),r("h3",{attrs:{id:"命令行运行"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#命令行运行"}},[a._v("#")]),a._v(" 命令行运行")]),a._v(" "),r("p",[r("code",[a._v("clang-format --style=file -i $File$")])]),a._v(" "),r("p",[r("code",[a._v("--sytle=file")]),a._v("就会自动找到.clang-format文件，根据文件Option配置来格式化代码。")]),a._v(" "),r("p",[a._v("批量文件clang-format时，需注意过滤不应该格式化的文件。例如，只格式化*.h/*.cpp，并排除某些文件夹：")]),a._v(" "),r("p",[r("code",[a._v('find . -type f -not \\( -wholename ./env/* \\) -regextype posix-egrep -regex ".*\\.(cpp|h)" | xargs clang-format -i -style=file')])]),a._v(" "),r("h3",{attrs:{id:"在ide或editor中使用clang-format"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#在ide或editor中使用clang-format"}},[a._v("#")]),a._v(" 在IDE或Editor中使用clang-format")]),a._v(" "),r("h4",{attrs:{id:"clion"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#clion"}},[a._v("#")]),a._v(" Clion")]),a._v(" "),r("p",[a._v("Clion如果使用插件，点击"),r("code",[a._v("Reformat Code")]),a._v("即可。")]),a._v(" "),r("h4",{attrs:{id:"vs-code"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#vs-code"}},[a._v("#")]),a._v(" VS Code")]),a._v(" "),r("p",[a._v("VS Code需安装扩展程序Clang-Format，但需要自行提供clang-format执行程序的位置。")]),a._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[a._v('"clang-format.executable":  "$clang-format path$",\n"clang-format.style": "file"\n')])])]),r("p",[a._v("然后，点击"),r("code",[a._v("Format Document")]),a._v("即可。")])])}),[],!1,null,null,null);t.default=o.exports}}]);