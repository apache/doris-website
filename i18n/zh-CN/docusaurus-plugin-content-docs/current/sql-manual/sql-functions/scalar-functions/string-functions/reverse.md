---
{
    "title": "REVERSE",
    "language": "zh-CN"
}
---

## 描述

REVERSE 函数用于将输入序列的顺序颠倒。对于字符串参数，返回字符顺序颠倒的字符串；对于数组参数，返回元素顺序颠倒的数组。该函数按字符进行反转，能够正确处理 UTF-8 多字节字符。

## 语法

```sql
REVERSE(<seq>)
```

## 参数

| 参数      | 说明             |
|---------|----------------|
| `<seq>` | 需要反转顺序的字符串或数组。类型：VARCHAR 或 ARRAY |

## 返回值

返回与输入类型相同的反转后序列：
- 字符串输入：返回 VARCHAR 类型，字符顺序颠倒的字符串
- 数组输入：返回 ARRAY 类型，元素顺序颠倒的数组

特殊情况：
- 如果参数为 NULL，返回 NULL
- 如果字符串为空，返回空字符串
- 如果数组为空，返回空数组
- 单字符字符串反转后仍为原字符串

## 示例

1. 基本字符串反转
```sql
SELECT REVERSE('hello');
```
```text
+------------------+
| REVERSE('hello') |
+------------------+
| olleh            |
+------------------+
```

2. 数组元素反转
```sql
SELECT REVERSE(['hello', 'world']);
```
```text
+-----------------------------+
| REVERSE(['hello', 'world']) |
+-----------------------------+
| ["world", "hello"]          |
+-----------------------------+
```

3. NULL 值处理
```sql
SELECT REVERSE(NULL);
```
```text
+---------------+
| REVERSE(NULL) |
+---------------+
| NULL          |
+---------------+
```

4. 空字符串和空数组
```sql
SELECT REVERSE(''), REVERSE([]);
```
```text
+-------------+-------------+
| REVERSE('') | REVERSE([]) |
+-------------+-------------+
|             | []          |
+-------------+-------------+
```

5. 单字符和单元素
```sql
SELECT REVERSE('A'), REVERSE(['single']);
```
```text
+--------------+--------------------+
| REVERSE('A') | REVERSE(['single']) |
+--------------+--------------------+
| A            | ["single"]         |
+--------------+--------------------+
```

6. 数字和特殊字符
```sql
SELECT REVERSE('12345'), REVERSE('!@#$%');
```
```text
+------------------+------------------+
| REVERSE('12345') | REVERSE('!@#$%') |
+------------------+------------------+
| 54321            | %$#@!            |
+------------------+------------------+
```

7. UTF-8 多字节字符
```sql
SELECT REVERSE('ṭṛì ḍḍumai'), REVERSE('ḍḍumannàri');
```
```text
+-----------------------+------------------------+
| REVERSE('ṭṛì ḍḍumai') | REVERSE('ḍḍumannàri') |
+-----------------------+------------------------+
| iamuḍḍ ìṛṭ            | irànnaumuḍḍ            |
+-----------------------+------------------------+
```

8. 混合字符类型
```sql
SELECT REVERSE('Hello123'), REVERSE('test@email.com');
```
```text
+---------------------+--------------------------+
| REVERSE('Hello123') | REVERSE('test@email.com') |
+---------------------+--------------------------+
| 321olleH            | moc.liame@tset           |
+---------------------+--------------------------+
```

9. 多元素数组
```sql
SELECT REVERSE([1, 2, 3, 4, 5]), REVERSE(['a', 'b', 'c']);
```
```text
+---------------------------+------------------------+
| REVERSE([1, 2, 3, 4, 5])  | REVERSE(['a', 'b', 'c']) |
+---------------------------+------------------------+
| [5, 4, 3, 2, 1]           | ["c", "b", "a"]        |
+---------------------------+------------------------+
```

10. 回文测试
```sql
SELECT REVERSE('level'), REVERSE('12321');
```
```text
+------------------+-------------------+
| REVERSE('level') | REVERSE('12321')  |
+------------------+-------------------+
| level            | 12321             |
+------------------+-------------------+
```
