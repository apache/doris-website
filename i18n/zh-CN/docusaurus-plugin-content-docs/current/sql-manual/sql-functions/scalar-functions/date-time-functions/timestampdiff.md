---
{
    "title": "TIMESTAMPDIFF",
    "language": "zh-CN"
}
---

## 描述

`timestampdiff` 函数用于计算两个日期之间的差值，返回两个日期之间的时间间隔。可以计算两者之间的差异，以指定的时间单位（支持秒、分钟、小时、天、月、季度、年）返回结果。

## 语法

`TIMESTAMPDIFF(<unit>, <datetime_expr1>, <datetime_expr2>)`

## 参数

| 参数 | 说明                                                        |
| -- |-----------------------------------------------------------|
| `unit` | 时间单位，指定要返回差异的单位，支持 SECOND、MINUTE、HOUR、DAY、MONTH、QUARTER、YEAR |
|`datetime_expr1`| 第一个日期时间，合法的日期格式                                           |
|`datetime_expr2`| 第二个日期时间，合法的日期格式                                           |

## 返回值

返回 `datetime_expr2` 减去 `datetime_expr1` 的时间差，单位根据 unit 参数确定。

如果输入的参数为 NULL 则返回 NULL。

## 举例

```sql
SELECT TIMESTAMPDIFF(MONTH,'2003-02-01','2003-05-01');
```

```text
+--------------------------------------------------------------------+
| timestampdiff(MONTH, '2003-02-01 00:00:00', '2003-05-01 00:00:00') |
+--------------------------------------------------------------------+
|                                                                  3 |
+--------------------------------------------------------------------+
```

```sql
SELECT TIMESTAMPDIFF(QUARTER,'2002-05-01','2001-01-01');
```

```text
+--------------------------------------------------+
| TIMESTAMPDIFF(QUARTER,'2002-05-01','2001-01-01') |
+--------------------------------------------------+
|                                               -5 |
+--------------------------------------------------+
```

```sql
SELECT TIMESTAMPDIFF(YEAR,'2002-05-01','2001-01-01');
```

```text
+-------------------------------------------------------------------+
| timestampdiff(YEAR, '2002-05-01 00:00:00', '2001-01-01 00:00:00') |
+-------------------------------------------------------------------+
|                                                                -1 |
+-------------------------------------------------------------------+
```

```sql
SELECT TIMESTAMPDIFF(MINUTE,'2003-02-01','2003-05-01 12:05:55');
```

```text
+---------------------------------------------------------------------+
| timestampdiff(MINUTE, '2003-02-01 00:00:00', '2003-05-01 12:05:55') |
+---------------------------------------------------------------------+
|                                                              128885 |
+---------------------------------------------------------------------+
```
```sql
SELECT  TIMESTAMPDIFF(MINUTE,'2003-02-01','1196440219');
```

```text
+-----------------------------------------------------------------------------------+
| timestampdiff(MINUTE, '2003-02-01 00:00:00', CAST('1196440219' AS datetimev2(6))) |
+-----------------------------------------------------------------------------------+
|                                                                              NULL |
+-----------------------------------------------------------------------------------+
```