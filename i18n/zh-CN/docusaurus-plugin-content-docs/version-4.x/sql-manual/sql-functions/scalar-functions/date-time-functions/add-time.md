---
{
    "title": "ADD_TIME",
    "language": "zh-CN",
    "description": "将给定的时间间隔添加到日期时间/时间表达式上。若第二个参数为负数，则等价于从第一个参数中减去该时间间隔。"
}
---

## 描述

将给定的时间间隔添加到日期时间/时间表达式上。若第二个参数为负数，则等价于从第一个参数中减去该时间间隔。


## 语法

```sql
ADD_TIME(`<date_or_time_expr>`, `<time>`)
```

## 参数

| 参数 | 说明 |
| -- | -- |
| `<date_or_time_expr>` | 参数是合法的日期表达式，支持输入 datetime/date/time 类型,date 类型会转换为对应日期的一天起始时间 00:00:00 ,具体 datetime//time 格式请查看  [datetime 的转换](../../../../../current/sql-manual/basic-element/sql-data-types/conversion/datetime-conversion) 和 [time的转换](../../../../../current/sql-manual/basic-element/sql-data-types/conversion/time-conversion) |
|  `<time>`        |  参数为合法的时间表达式，表示增加到`<date_or_time_expr>` 上面的时间值，若为负数，则表示减少，支持输入 time 类型  |

## 返回值

返回 `<date_or_time_expr>` 添加 `<time>` 时间值之后的结果，根据第一个参数类型返回不同的类型
- 若第一个参数为 datetime 类型，则返回 datetime 类型
- 若第一个参数为 time 类型，则返回 time 类型

特殊情况:
- 若输入参数包含 null ,返回 null
- 若第一个参数类型为 time 类型，且计算结果超出 time 类型范围，则返回 time 类型最大（最小值）
- 若第一个参数类型为 datetime 类型，且计算结果超出 datetime 类型，则跑出错误


## 举例

```sql
-- 增加时间当第一个参数为 datetime 类型
SELECT ADD_TIME('2025-09-19 12:00:00', '01:30:00'); 
+---------------------------------------------+
| ADD_TIME('2025-09-19 12:00:00', '01:30:00') |
+---------------------------------------------+
| 2025-09-19 13:30:00                         |
+---------------------------------------------+

-- 增加时间当第一个参数为 time 类型
SELECT ADD_TIME(cast('12:15:20' as time), '00:10:40'); 
+------------------------------------------------+
| ADD_TIME(cast('12:15:20' as time), '00:10:40') |
+------------------------------------------------+
| 12:26:00                                       |
+------------------------------------------------+   
         
-- NULL 参数测试
SELECT ADD_TIME(NULL, '01:00:00');
+----------------------------+
| ADD_TIME(NULL, '01:00:00') |
+----------------------------+
| NULL                       |
+----------------------------+    

SELECT ADD_TIME('2025-09-19 12:00:00', NULL); 
+---------------------------------------+
| ADD_TIME('2025-09-19 12:00:00', NULL) |
+---------------------------------------+
| NULL                                  |
+---------------------------------------+

SELECT ADD_TIME(NULL, NULL);
+----------------------+
| ADD_TIME(NULL, NULL) |
+----------------------+
| NULL                 |
+----------------------+                        

-- time 类型超出范围测试（返回最大/最小值）
SELECT ADD_TIME(cast('835:30:00' as time), '21:00:00'); 
+-------------------------------------------------+
| ADD_TIME(cast('835:30:00' as time), '21:00:00') |
+-------------------------------------------------+
| 838:59:59                                       |
+-------------------------------------------------+


SELECT ADD_TIME(cast('-832:30:00' as time), '-31:00:00');   
+---------------------------------------------------+
| ADD_TIME(cast('-832:30:00' as time), '-31:00:00') |
+---------------------------------------------------+
| -838:59:59                                        |
+---------------------------------------------------+       

-- datetime 类型超出范围测试（抛出错误）
SELECT ADD_TIME('9999-12-31 23:59:59', '00:00:01');  
ERROR 1105 (HY000): errCode = 2, detailMessage = (10.16.10.3)[INVALID_ARGUMENT]datetime value is out of range in function add_time

SELECT ADD_TIME('0000-01-01 00:00:00', '-00:00:01');
ERROR 1105 (HY000): errCode = 2, detailMessage = (10.16.10.3)[INVALID_ARGUMENT]datetime value is out of range in function add_time
```
