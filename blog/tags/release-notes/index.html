<!doctype html><html lang=en-US dir=ltr class="blog-wrapper blog-tags-post-list-page plugin-blog plugin-id-default" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.6.3"><title data-rh=true>49 posts tagged with "Release Notes" - Apache Doris</title><meta data-rh=true name=viewport content="width=device-width,initial-scale=1.0"><meta data-rh=true name=twitter:card content=summary_large_image><meta data-rh=true property=og:url content=https://doris.apache.org/blog/tags/release-notes/><meta data-rh=true property=og:locale content=en_US><meta data-rh=true property=og:locale:alternate content=zh_Hans-CN><meta data-rh=true name=docusaurus_locale content=en><meta data-rh=true name=docsearch:language content=en><meta data-rh=true property=og:title content='49 posts tagged with "Release Notes" - Apache Doris'><meta data-rh=true name=docusaurus_tag content=blog_tags_posts><meta data-rh=true name=docsearch:docusaurus_tag content=blog_tags_posts><link data-rh=true rel=icon href=/images/favicon.ico><link data-rh=true rel=canonical href=https://doris.apache.org/blog/tags/release-notes/><link data-rh=true rel=alternate href=https://doris.apache.org/blog/tags/release-notes/ hreflang=en-US><link data-rh=true rel=alternate href=https://doris.apache.org/zh-CN/blog/tags/release-notes/ hreflang=zh-Hans-CN><link data-rh=true rel=alternate href=https://doris.apache.org/blog/tags/release-notes/ hreflang=x-default><link rel=alternate type=application/rss+xml href=/blog/rss.xml title="Apache Doris RSS Feed"><link rel=alternate type=application/atom+xml href=/blog/atom.xml title="Apache Doris Atom Feed"><link rel=preconnect href=https://analytics.apache.org/><script>var _paq=window._paq=window._paq||[];_paq.push(["setRequestMethod","POST"]),_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),_paq.push(["enableHeartBeatTimer"]),function(){var e="https://analytics.apache.org/";_paq.push(["setRequestMethod","POST"]),_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","43"]);var a=document,t=a.createElement("script"),p=a.getElementsByTagName("script")[0];t.type="text/javascript",t.async=!0,t.src=e+"matomo.js",p.parentNode.insertBefore(t,p)}()</script><link rel=stylesheet href=/css/katex.min.css><script src=/js/custom-script.js></script><script async src=https://widget.kapa.ai/kapa-widget.bundle.js data-website-id=a5fb90df-217a-4097-95c0-80490220314b data-modal-title="Apache Doris AI" data-project-name="Apache Doris Website" data-button-hide=true data-modal-override-open-selector=#navbar-ask-ai-btn data-project-logo=https://cdn.selectdb.com/static/doris_1_3c42247c63.png data-modal-image=https://cdn.selectdb.com/static/doris_logo_cc5a30d886.png data-project-color=#11A679 data-modal-disclaimer="This is a custom LLM with access to all [Doris documentation](https://doris.apache.org/docs/4.x/gettingStarted/what-is-apache-doris)." data-consent-required data-consent-screen-disclaimer="By clicking &amp;quot;I agree, let's chat&amp;quot;, you consent to the use of the AI assistant in accordance with kapa.ai's [Privacy Policy](https://www.kapa.ai/content/privacy-policy). This service uses reCAPTCHA, which requires your consent to Google's [Privacy Policy](https://policies.google.com/privacy) and [Terms of Service](https://policies.google.com/terms). By proceeding, you explicitly agree to both kapa.ai's and Google's privacy policies." data-bot-protection-mechanism=hcaptcha></script><link rel=stylesheet href=/assets/css/styles.f30bdf48.css><script src=/assets/js/runtime~main.1ce3ee98.js defer></script><script src=/assets/js/main.0dd8d846.js defer></script><body class=navigation-with-keyboard><script>!function(){var t,e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t=null!==e?e:"light",document.documentElement.setAttribute("data-theme",t)}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id=__docusaurus><div role=region aria-label="Skip to main content"><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><nav aria-label=Main class="navbar navbar--fixed-top"><div class=navbar__inner><div class=navbar__items><div class=navbar-left><div class="navbar-logo-wrapper flex items-center"><a class=navbar__brand href=/><div class=navbar__logo><img src=/images/logo-doris.svg alt="Apache Doris" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src=/images/logo-doris.svg alt="Apache Doris" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a></div><div class=undefined><a href=/docs/4.x/gettingStarted/what-is-apache-doris/ class="navbar__item navbar__link" target=_blank>Docs</a><a aria-current=page class="navbar__item navbar__link navbar__link--active" href=/blog/>Blog</a><a class="navbar__item navbar__link" href=/users/>Users</a><a href=https://github.com/apache/doris/discussions target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">Discussions</a><a class="navbar__item navbar__link" href=/ecosystem/cluster-management/>Ecosystem</a><a class="navbar__item navbar__link" href=/events/>Events</a><a class="navbar__item navbar__link" href=/community/join-community/>Community</a><a class="navbar__item navbar__link" href=/vendors/>Vendors</a></div></div></div><div class="navbar__items navbar__items--right"><button class="rounded-full flex items-center gap-x-2 px-4 py-[5px] border border-primary bg-[#F0FFF7] text-[1rem]/[1.625rem] font-medium text-[#1D1D1D]" id=navbar-ask-ai-btn><svg width=18 height=18 viewBox="0 0 18 18" fill=none><path d="M7.35457 0.574461C7.42306 0.423027 7.5322 0.292956 7.67018 0.198317C7.80816 0.103677 7.96974 0.04807 8.13742 0.037509C8.30511 0.026948 8.47253 0.0618351 8.62158 0.138397C8.77063 0.21496 8.89564 0.330283 8.98308 0.471896L9.03778 0.574461L9.98672 2.68378C10.8161 4.52515 12.1952 6.07276 13.9397 7.11968L14.2337 7.28972L15.9197 8.2263C16.0536 8.30049 16.1666 8.40653 16.2484 8.53479C16.3302 8.66304 16.3783 8.80945 16.3882 8.96069C16.3981 9.11194 16.3696 9.26323 16.3052 9.40083C16.2408 9.53842 16.1426 9.65796 16.0195 9.74857L15.921 9.81064L14.2337 10.7472C12.454 11.7355 11.0224 13.2365 10.1303 15.0495L9.98672 15.3532L9.03641 17.4625C8.96778 17.6136 8.85866 17.7433 8.72081 17.8377C8.58296 17.9321 8.42162 17.9876 8.25418 17.9982C8.08674 18.0087 7.91956 17.9739 7.77066 17.8976C7.62177 17.8213 7.49681 17.7063 7.40926 17.565L7.35457 17.4625L6.40426 15.3532C5.57484 13.5118 4.19572 11.9643 2.45124 10.9173L2.15726 10.7472L0.471311 9.81064C0.337321 9.73674 0.224189 9.63093 0.142217 9.50285C0.0602439 9.37477 0.0120344 9.22849 0.00197753 9.07732C-0.00807937 8.92615 0.0203358 8.7749 0.0846359 8.63734C0.148936 8.49978 0.247078 8.38028 0.370127 8.28972L0.468577 8.22765L2.15589 7.29107C3.93569 6.30285 5.36732 4.80183 6.25932 2.98877L6.40289 2.68513L7.3532 0.57581L7.35457 0.574461ZM15.6899 0.130465C16.1425 1.14532 16.9145 1.98914 17.8914 2.53668C17.9244 2.55517 17.9518 2.58196 17.9709 2.61432C17.9899 2.64668 18 2.68345 18 2.72089C18 2.75833 17.9899 2.7951 17.9709 2.82745C17.9518 2.85981 17.9244 2.8866 17.8914 2.9051C16.9145 3.45264 16.1425 4.29645 15.6899 5.31131C15.6731 5.3501 15.645 5.38315 15.6093 5.40638C15.5736 5.4296 15.5317 5.44198 15.4889 5.44198C15.4462 5.44198 15.4043 5.4296 15.3686 5.40638C15.3329 5.38315 15.3048 5.3501 15.2879 5.31131C14.8352 4.29695 14.0632 3.45364 13.0865 2.90645C13.0532 2.88805 13.0255 2.86122 13.0062 2.82872C12.9869 2.79622 12.9767 2.75923 12.9767 2.72156C12.9767 2.68389 12.9869 2.6469 13.0062 2.6144C13.0255 2.58191 13.0532 2.55508 13.0865 2.53668C14.0636 1.98879 14.8357 1.14448 15.2879 0.129116C15.305 0.0907214 15.3331 0.0580664 15.3686 0.035138C15.4042 0.0122096 15.4458 0 15.4883 0C15.5308 0 15.5723 0.0122096 15.6079 0.035138C15.6435 0.0580664 15.6715 0.0907214 15.6886 0.129116V0.130465H15.6899Z" fill=#11A679 /></svg>Ask AI</button><a class="navbar__item navbar__link header-right-button-primary navbar-download-mobile" href=/download/>Download</a><a href=https://github.com/apache/doris target=_blank rel="noopener noreferrer" class="github-btn bg-[#F7FAFC] mr-1 group !no-underline ml-4 rounded-sm items-center justify-start desktop h-[2.25rem] w-[6.5rem]"><svg id=github-icon-new class="github-icon-new ml-[0.5rem]" width=22 height=22 viewBox="0 0 22 22" fill=none><path d="M11.0001 0.998095C5.47563 0.998095 1.00024 5.47348 1.00024 10.9979C1.00024 15.4224 3.86293 19.1606 7.83742 20.4851C8.33741 20.5723 8.52468 20.2733 8.52468 20.0105C8.52468 19.7724 8.51286 18.9851 8.51286 18.1478C6.00017 18.6106 5.35018 17.5351 5.15018 16.9733C5.03746 16.6851 4.55019 15.7979 4.12565 15.5606C3.77566 15.3724 3.27476 14.9106 4.11293 14.8979C4.90019 14.8852 5.4629 15.6224 5.65018 15.9233C6.55016 17.4351 7.98741 17.0106 8.56286 16.7479C8.65013 16.0979 8.91285 15.6606 9.20012 15.4106C6.9747 15.1606 4.65019 14.2979 4.65019 10.4725C4.65019 9.38524 5.03746 8.48526 5.67563 7.78527C5.57472 7.53527 5.22473 6.51074 5.77563 5.13531C5.77563 5.13531 6.61289 4.87349 8.52468 6.16074C9.33873 5.93489 10.1798 5.82141 11.0246 5.82348C11.8755 5.82348 12.7255 5.93529 13.5246 6.16074C15.4373 4.86076 16.2746 5.13531 16.2746 5.13531C16.8246 6.51074 16.4755 7.53527 16.3755 7.78527C17.0127 8.48526 17.4 9.37342 17.4 10.4725C17.4 14.3106 15.0628 15.1606 12.8373 15.4106C13.2001 15.7233 13.5128 16.3233 13.5128 17.2606C13.5128 18.5978 13.5001 19.6733 13.5001 20.0105C13.5001 20.2733 13.6873 20.5851 14.1873 20.4851C18.1373 19.1606 20.9999 15.4106 20.9999 10.9979C20.9999 5.47348 16.5255 0.998095 11.0001 0.998095Z" fill=#1D1D1D /></svg><span class="github-text ml-1 text-[1rem]/[137.5%] group-hover:text-primary text-[#252734] font-medium">Star Me</span></a><div class="gh-count text-[1rem]/[1rem]">15<!-- -->k</div><a href=https://doris.apache.org/slack target=_blank rel="noopener noreferrer" class="slack-btn desktop header-right-button-slack"></a><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class="header-right-button-primary navbar-download-desktop font-medium" href=/download/>Download</a></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="main-wrapper mainWrapper_eExm"><div class="mb-[4.875rem] container"><div class="lg:row lg:flex"><main class="col col--9 col--offset-1" itemscope itemtype=http://schema.org/Blog><header class=margin-bottom--xl><h1>49 posts tagged with "Release Notes"</h1><a href=/blog/tags/>View All Tags</a></header><article class=margin-bottom--xl itemprop=blogPost itemscope itemtype=http://schema.org/BlogPosting><div class=markdown itemprop=articleBody><header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href=/blog/>Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class=s-tags><span class=s-tag>Release Notes</span></span></span></div><h2 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop=headline><a itemprop=url href=/blog/release-note-3.0.6/>Apache Doris 3.0.6 Released</a></h2><div class="blog-info text-center flex justify-center text-sm text-black"><span class=authors><span class="s-author text-black">Apache Doris</span></span><time datetime=2025-06-16T00:00:00.000Z itemprop=datePublished class="text-black ml-4">June 16, 2025</time></div></header><div class=markdown itemprop=articleBody><p>Dear community members, the Apache Doris 3.0.6 version was officially released on Jun 16, 2025.</p>
<p><strong>Quick Download:</strong> <a href=https://doris.apache.org/download/ target=_blank rel="noopener noreferrer">https://doris.apache.org/download/</a></p>
<p><strong>GitHub Release:</strong> <a href=https://github.com/apache/doris/releases target=_blank rel="noopener noreferrer">https://github.com/apache/doris/releases</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=behavior-changes>Behavior Changes<a href=#behavior-changes class=hash-link aria-label="Direct link to Behavior Changes" title="Direct link to Behavior Changes">​</a></h2>
<ul>
<li><strong>Prohibited time-series compaction for Unique tables</strong> <a href=https://github.com/apache/doris/pull/49905 target=_blank rel="noopener noreferrer">#49905</a></li>
<li><strong>Adjusted Auto Bucket size to 10GB per bucket in compute-storage separation scenarios</strong> <a href=https://github.com/apache/doris/pull/50566 target=_blank rel="noopener noreferrer">#50566</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=new-features>New Features<a href=#new-features class=hash-link aria-label="Direct link to New Features" title="Direct link to New Features">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=lakehouse>Lakehouse<a href=#lakehouse class=hash-link aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">​</a></h3>
<ul>
<li><strong>Added support for accessing Iceberg table formats in AWS S3 Table Buckets</strong>
<ul>
<li>For detailed information, please refer to documentation: <a href=https://doris.apache.org/docs/dev/lakehouse/catalogs/iceberg-catalog#iceberg-on-s3-tables target=_blank rel="noopener noreferrer">Iceberg on S3 Tables</a></li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=storage>Storage<a href=#storage class=hash-link aria-label="Direct link to Storage" title="Direct link to Storage">​</a></h3>
<ul>
<li><strong>IAM Role authorization support for object storage access</strong> Applies to import/export, backup/restore, and compute-storage separation scenarios <a href=https://github.com/apache/doris/pull/50252 target=_blank rel="noopener noreferrer">#50252</a> <a href=https://github.com/apache/doris/pull/50682 target=_blank rel="noopener noreferrer">#50682</a> <a href=https://github.com/apache/doris/pull/49541 target=_blank rel="noopener noreferrer">#49541</a> <a href=https://github.com/apache/doris/pull/49565 target=_blank rel="noopener noreferrer">#49565</a> <a href=https://github.com/apache/doris/pull/49422 target=_blank rel="noopener noreferrer">#49422</a>
<ul>
<li>For detailed information, please refer to <a href=https://doris.apache.org/docs/3.0/admin-manual/auth/integrations/aws-authentication-and-authorization target=_blank rel="noopener noreferrer">documentation</a></li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=new-functions>New Functions<a href=#new-functions class=hash-link aria-label="Direct link to New Functions" title="Direct link to New Functions">​</a></h3>
<ul>
<li><code>json_extract_no_quotes</code>
<ul>
<li>For detailed information, please refer to <a href=https://doris.apache.org/docs/3.0/sql-manual/sql-functions/scalar-functions/json-functions/json-extract target=_blank rel="noopener noreferrer">documentation</a></li>
</ul>
</li>
<li><code>unhex_null</code>
<ul>
<li>For detailed information, please refer to <a href=https://doris.apache.org/docs/3.0/sql-manual/sql-functions/scalar-functions/string-functions/unhex target=_blank rel="noopener noreferrer">documentation</a></li>
</ul>
</li>
<li><code>xpath_string</code>
<ul>
<li>For detailed information, please refer to <a href=https://doris.apache.org/docs/3.0/sql-manual/sql-functions/scalar-functions/string-functions/xpath-string target=_blank rel="noopener noreferrer">documentation</a></li>
</ul>
</li>
<li><code>str_to_map</code></li>
<li>For detailed information, please refer to <a href=https://doris.apache.org/docs/3.0/sql-manual/sql-functions/scalar-functions/map-functions/str-to-map target=_blank rel="noopener noreferrer">documentation</a></li>
<li><code>months_between</code>
<ul>
<li>For detailed information, please refer to <a href=https://doris.apache.org/docs/3.0/sql-manual/sql-functions/scalar-functions/date-time-functions/months-between target=_blank rel="noopener noreferrer">documentation</a></li>
</ul>
</li>
<li><code>next_day</code>
<ul>
<li>For detailed information, please refer to <a href=https://doris.apache.org/docs/3.0/sql-manual/sql-functions/scalar-functions/date-time-functions/next-day target=_blank rel="noopener noreferrer">documentation</a></li>
</ul>
</li>
<li><code>format_round</code>:
<ul>
<li>For detailed information, please refer to <a href=https://doris.apache.org/docs/3.0/sql-manual/sql-functions/scalar-functions/numeric-functions/format-round target=_blank rel="noopener noreferrer">documentation</a></li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=improvements>Improvements<a href=#improvements class=hash-link aria-label="Direct link to Improvements" title="Direct link to Improvements">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=storage-1>Storage<a href=#storage-1 class=hash-link aria-label="Direct link to Storage" title="Direct link to Storage">​</a></h3>
<ul>
<li>Streamlined Compaction Profile and logs <a href=https://github.com/apache/doris/pull/50950 target=_blank rel="noopener noreferrer">#50950</a></li>
<li>Enhanced scheduling strategy to improve Compaction throughput <a href=https://github.com/apache/doris/pull/49882 target=_blank rel="noopener noreferrer">#49882</a> <a href=https://github.com/apache/doris/pull/48759 target=_blank rel="noopener noreferrer">#48759</a> <a href=https://github.com/apache/doris/pull/51482 target=_blank rel="noopener noreferrer">#51482</a> <a href=https://github.com/apache/doris/pull/50672 target=_blank rel="noopener noreferrer">#50672</a> <a href=https://github.com/apache/doris/pull/49953 target=_blank rel="noopener noreferrer">#49953</a> <a href=https://github.com/apache/doris/pull/50819 target=_blank rel="noopener noreferrer">#50819</a></li>
<li><strong>Reduced redundant log output</strong> <a href=https://github.com/apache/doris/pull/51093 target=_blank rel="noopener noreferrer">#51093</a></li>
<li><strong>Implemented blacklist mechanism</strong> to prevent Routine Load from distributing metadata to unavailable BEs <a href=https://github.com/apache/doris/pull/50587 target=_blank rel="noopener noreferrer">#50587</a></li>
<li><strong>Increased default value</strong> of <code>load_task_high_priority_threshold_second</code> <a href=https://github.com/apache/doris/pull/50478 target=_blank rel="noopener noreferrer">#50478</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=storage-compute-decoupled>Storage-Compute Decoupled<a href=#storage-compute-decoupled class=hash-link aria-label="Direct link to Storage-Compute Decoupled" title="Direct link to Storage-Compute Decoupled">​</a></h3>
<ul>
<li><strong>Startup optimization</strong>: Accelerated File Cache initialization <a href=https://github.com/apache/doris/pull/50726 target=_blank rel="noopener noreferrer">#50726</a></li>
<li><strong>Query acceleration</strong>: Improved File Cache performance <a href=https://github.com/apache/doris/pull/50275 target=_blank rel="noopener noreferrer">#50275</a> <a href=https://github.com/apache/doris/pull/50387 target=_blank rel="noopener noreferrer">#50387</a> <a href=https://github.com/apache/doris/pull/50555 target=_blank rel="noopener noreferrer">#50555</a></li>
<li><strong>Metadata optimization</strong>: Resolved performance bottlenecks caused by <code>get_version</code> <a href=https://github.com/apache/doris/pull/51111 target=_blank rel="noopener noreferrer">#51111</a> <a href=https://github.com/apache/doris/pull/50439 target=_blank rel="noopener noreferrer">#50439</a></li>
<li><strong>Garbage collection acceleration</strong>: Improved object reclamation efficiency <a href=https://github.com/apache/doris/pull/50037 target=_blank rel="noopener noreferrer">#50037</a> <a href=https://github.com/apache/doris/pull/50766 target=_blank rel="noopener noreferrer">#50766</a></li>
<li><strong>Stability enhancement</strong>: Optimized object storage retry strategy <a href=https://github.com/apache/doris/pull/50957 target=_blank rel="noopener noreferrer">#50957</a></li>
<li><strong>Granular profiling</strong>: Added tablet/segment footer dimension metrics <a href=https://github.com/apache/doris/pull/49945 target=_blank rel="noopener noreferrer">#49945</a> <a href=https://github.com/apache/doris/pull/50564 target=_blank rel="noopener noreferrer">#50564</a> <a href=https://github.com/apache/doris/pull/50326 target=_blank rel="noopener noreferrer">#50326</a></li>
<li><strong>Schema Change resilience</strong>: Enabled New Tablet Compaction by default to prevent -230 errors <a href=https://github.com/apache/doris/pull/51070 target=_blank rel="noopener noreferrer">#51070</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=lakehouse-1>Lakehouse<a href=#lakehouse-1 class=hash-link aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=catalog-enhancements>Catalog enhancements<a href=#catalog-enhancements class=hash-link aria-label="Direct link to Catalog enhancements" title="Direct link to Catalog enhancements">​</a></h4>
<ul>
<li>Added partition cache TTL control (<code>partition.cache.ttl-second</code>) for Hive Catalog <a href=https://github.com/apache/doris/pull/50724 target=_blank rel="noopener noreferrer">#50724</a>
<ul>
<li>For detailed information, please refer to documentation: <a href=https://doris.apache.org/docs/dev/lakehouse/meta-cache target=_blank rel="noopener noreferrer">Metadata Cache</a></li>
</ul>
</li>
<li>Supported <code>skip.header.line.count</code> property for Hive tables <a href=https://github.com/apache/doris/pull/49929 target=_blank rel="noopener noreferrer">#49929</a></li>
<li>Added compatibility for Hive tables using <code>org.openx.data.jsonserde.JsonSerDe</code> <a href=https://github.com/apache/doris/pull/49958 target=_blank rel="noopener noreferrer">#49958</a>
<ul>
<li>For detailed information, please refer to documentation: <a href=https://doris.apache.org/docs/dev/lakehouse/file-formats/text target=_blank rel="noopener noreferrer">Text Format</a></li>
</ul>
</li>
<li>Upgraded Paimon to v1.0.1</li>
<li>Upgraded Iceberg to v1.6.1</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=functional-extensions>Functional extensions<a href=#functional-extensions class=hash-link aria-label="Direct link to Functional extensions" title="Direct link to Functional extensions">​</a></h4>
<ul>
<li>Added support for Alibaba Cloud OSS-HDFS Root Policy <a href=https://github.com/apache/doris/pull/50678 target=_blank rel="noopener noreferrer">#50678</a></li>
<li>Dialect compatibility: Returned query results in Hive format <a href=https://github.com/apache/doris/pull/49931 target=_blank rel="noopener noreferrer">#49931</a>
<ul>
<li>For detailed information, please refer to documentation: <a href=https://doris.apache.org/docs/dev/lakehouse/sql-convertor/sql-convertor-overview target=_blank rel="noopener noreferrer">SQL Convertor</a></li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=asynchronous-materialized-views>Asynchronous Materialized Views<a href=#asynchronous-materialized-views class=hash-link aria-label="Direct link to Asynchronous Materialized Views" title="Direct link to Asynchronous Materialized Views">​</a></h3>
<ul>
<li><strong>Memory optimization</strong>: Reduced memory footprint during transparent rewriting <a href=https://github.com/apache/doris/pull/48887 target=_blank rel="noopener noreferrer">#48887</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=query-optimizer>Query Optimizer<a href=#query-optimizer class=hash-link aria-label="Direct link to Query Optimizer" title="Direct link to Query Optimizer">​</a></h3>
<ul>
<li><strong>Improved bucket pruning performance</strong> <a href=https://github.com/apache/doris/pull/49388 target=_blank rel="noopener noreferrer">#49388</a></li>
<li><strong>Enhanced lambda expressions</strong>: Supported external slot references <a href=https://github.com/apache/doris/pull/44365 target=_blank rel="noopener noreferrer">#44365</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=query-execution>Query Execution<a href=#query-execution class=hash-link aria-label="Direct link to Query Execution" title="Direct link to Query Execution">​</a></h3>
<ul>
<li><strong>TopN query acceleration</strong>: Optimized performance in compute-storage separation scenarios <a href=https://github.com/apache/doris/pull/50803 target=_blank rel="noopener noreferrer">#50803</a></li>
<li><strong>Function extension</strong>: Added variable parameter support for <code>substring_index</code> <a href=https://github.com/apache/doris/pull/50149 target=_blank rel="noopener noreferrer">#50149</a></li>
<li><strong>Geospatial functions</strong>: Added <code>ST_CONTAINS</code>, <code>ST_INTERSECTS</code>, <code>ST_TOUCHES</code>, and <code>ST_DISJOINT</code> <a href=https://github.com/apache/doris/pull/49665 target=_blank rel="noopener noreferrer">#49665</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=core-components>Core Components<a href=#core-components class=hash-link aria-label="Direct link to Core Components" title="Direct link to Core Components">​</a></h3>
<ul>
<li><strong>Memory tracker optimization</strong>: ~10% performance gain in high-concurrency scenarios <a href=https://github.com/apache/doris/pull/50462 target=_blank rel="noopener noreferrer">#50462</a></li>
<li><strong>Audit log enhancement</strong>: Added <code>audit_plugin_max_insert_stmt_length</code> to limit INSERT statement length <a href=https://github.com/apache/doris/pull/51314 target=_blank rel="noopener noreferrer">#51314</a>
<ul>
<li>For detailed information, please refer to documentation: <a href=https://doris.apache.org/docs/3.0/admin-manual/audit-plugin target=_blank rel="noopener noreferrer">Audit Plugin</a></li>
</ul>
</li>
<li><strong>SQL converter control</strong>: Introduced session variables <code>sql_convertor_config</code> and <code>enable_sql_convertor_features</code>
<ul>
<li>For detailed information, please refer to documentation: <a href=https://doris.apache.org/docs/dev/lakehouse/sql-convertor/sql-convertor-overview target=_blank rel="noopener noreferrer">SQL Dialect</a></li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=bug-fixes>Bug Fixes<a href=#bug-fixes class=hash-link aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=data-ingestion>Data Ingestion<a href=#data-ingestion class=hash-link aria-label="Direct link to Data Ingestion" title="Direct link to Data Ingestion">​</a></h3>
<ul>
<li>Fixed transaction cleanup failures in BE <a href=https://github.com/apache/doris/pull/50103 target=_blank rel="noopener noreferrer">#50103</a></li>
<li>Improved error reporting accuracy for Routine Load <a href=https://github.com/apache/doris/pull/51078 target=_blank rel="noopener noreferrer">#51078</a></li>
<li>Prevented metadata task distribution to <code>disable_load=true</code> nodes <a href=https://github.com/apache/doris/pull/50421 target=_blank rel="noopener noreferrer">#50421</a></li>
<li>Fixed consumption progress rollback after FE restart <a href=https://github.com/apache/doris/pull/50221 target=_blank rel="noopener noreferrer">#50221</a></li>
<li>Resolved Group Commit and Schema Change conflict causing Core Dump <a href=https://github.com/apache/doris/pull/51144 target=_blank rel="noopener noreferrer">#51144</a></li>
<li>Fixed S3 Load errors when using HTTPS protocol <a href=https://github.com/apache/doris/pull/51246 target=_blank rel="noopener noreferrer">#51246</a> <a href=https://github.com/apache/doris/pull/51529 target=_blank rel="noopener noreferrer">#51529</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=primary-key-model>Primary Key Model<a href=#primary-key-model class=hash-link aria-label="Direct link to Primary Key Model" title="Direct link to Primary Key Model">​</a></h3>
<ul>
<li>Fixed duplicate key issues caused by race conditions <a href=https://github.com/apache/doris/pull/50019 target=_blank rel="noopener noreferrer">#50019</a> <a href=https://github.com/apache/doris/pull/50051 target=_blank rel="noopener noreferrer">#50051</a> <a href=https://github.com/apache/doris/pull/50106 target=_blank rel="noopener noreferrer">#50106</a> <a href=https://github.com/apache/doris/pull/50417 target=_blank rel="noopener noreferrer">#50417</a> <a href=https://github.com/apache/doris/pull/50847 target=_blank rel="noopener noreferrer">#50847</a> <a href=https://github.com/apache/doris/pull/50974 target=_blank rel="noopener noreferrer">#50974</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=storage-2>Storage<a href=#storage-2 class=hash-link aria-label="Direct link to Storage" title="Direct link to Storage">​</a></h3>
<ul>
<li>Fixed CCR and disk balancing race conditions <a href=https://github.com/apache/doris/pull/50663 target=_blank rel="noopener noreferrer">#50663</a></li>
<li>Corrected missing persistence of default partition keys <a href=https://github.com/apache/doris/pull/50489 target=_blank rel="noopener noreferrer">#50489</a></li>
<li>Added Rollup table support for CCR <a href=https://github.com/apache/doris/pull/50337 target=_blank rel="noopener noreferrer">#50337</a></li>
<li>Fixed edge case when <code>cooldown_ttl=0</code> <a href=https://github.com/apache/doris/pull/50830 target=_blank rel="noopener noreferrer">#50830</a></li>
<li>Resolved data loss caused by GC and Publish contention <a href=https://github.com/apache/doris/pull/50343 target=_blank rel="noopener noreferrer">#50343</a></li>
<li>Fixed partition pruning failure in Delete Job <a href=https://github.com/apache/doris/pull/50674 target=_blank rel="noopener noreferrer">#50674</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=storage-compute-decoupled-1>Storage-Compute Decoupled<a href=#storage-compute-decoupled-1 class=hash-link aria-label="Direct link to Storage-Compute Decoupled" title="Direct link to Storage-Compute Decoupled">​</a></h3>
<ul>
<li>Fixed Schema Change blocking Compaction <a href=https://github.com/apache/doris/pull/50908 target=_blank rel="noopener noreferrer">#50908</a></li>
<li>Solved object reclamation failure when <code>storage_vault_prefix</code> is empty <a href=https://github.com/apache/doris/pull/50352 target=_blank rel="noopener noreferrer">#50352</a></li>
<li>Resolved query performance issues caused by Tablet Cache <a href=https://github.com/apache/doris/pull/51193 target=_blank rel="noopener noreferrer">#51193</a> <a href=https://github.com/apache/doris/pull/49420 target=_blank rel="noopener noreferrer">#49420</a></li>
<li>Eliminated performance jitter from residual Tablet Cache <a href=https://github.com/apache/doris/pull/50200 target=_blank rel="noopener noreferrer">#50200</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=lakehouse-2>Lakehouse<a href=#lakehouse-2 class=hash-link aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">​</a></h3>
<ul>
<li><strong>Export fixes</strong>
<ul>
<li>Fixed FE memory leaks <a href=https://github.com/apache/doris/pull/51171 target=_blank rel="noopener noreferrer">#51171</a></li>
<li>Prevented FE deadlocks <a href=https://github.com/apache/doris/pull/50088 target=_blank rel="noopener noreferrer">#50088</a></li>
</ul>
</li>
<li><strong>Catalog fixes</strong>
<ul>
<li>Enabled composite predicate pushdown for JDBC Catalog <a href=https://github.com/apache/doris/pull/50542 target=_blank rel="noopener noreferrer">#50542</a></li>
<li>Fixed Deletion Vector reading for Alibaba Cloud OSS Paimon tables <a href=https://github.com/apache/doris/pull/49645 target=_blank rel="noopener noreferrer">#49645</a></li>
<li>Supported comma-containing Hive partition values <a href=https://github.com/apache/doris/pull/49382 target=_blank rel="noopener noreferrer">#49382</a></li>
<li>Corrected MaxCompute Timestamp column parsing <a href=https://github.com/apache/doris/pull/49600 target=_blank rel="noopener noreferrer">#49600</a></li>
<li>Enabled <code>information_schema</code> system tables for Trino Catalog <a href=https://github.com/apache/doris/pull/49912 target=_blank rel="noopener noreferrer">#49912</a></li>
</ul>
</li>
<li><strong>File formats</strong>
<ul>
<li>Fixed LZO compression reading failures <a href=https://github.com/apache/doris/pull/49538 target=_blank rel="noopener noreferrer">#49538</a></li>
<li>Added legacy ORC file compatibility <a href=https://github.com/apache/doris/pull/50358 target=_blank rel="noopener noreferrer">#50358</a></li>
<li>Corrected complex type parsing in ORC files <a href=https://github.com/apache/doris/pull/50136 target=_blank rel="noopener noreferrer">#50136</a></li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=asynchronous-materialized-views-1>Asynchronous Materialized Views<a href=#asynchronous-materialized-views-1 class=hash-link aria-label="Direct link to Asynchronous Materialized Views" title="Direct link to Asynchronous Materialized Views">​</a></h3>
<ul>
<li>Fixed refresh miss when specifying both <code>start time</code> and immediate trigger modes <a href=https://github.com/apache/doris/pull/50624 target=_blank rel="noopener noreferrer">#50624</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=query-optimizer-1>Query Optimizer<a href=#query-optimizer-1 class=hash-link aria-label="Direct link to Query Optimizer" title="Direct link to Query Optimizer">​</a></h3>
<ul>
<li>Fixed rewriting errors with lambda expressions <a href=https://github.com/apache/doris/pull/49166 target=_blank rel="noopener noreferrer">#49166</a></li>
<li>Resolved planning failures with constant group by keys <a href=https://github.com/apache/doris/pull/49473 target=_blank rel="noopener noreferrer">#49473</a></li>
<li>Corrected constant folding logic <a href=https://github.com/apache/doris/pull/50142 target=_blank rel="noopener noreferrer">#50142</a> <a href=https://github.com/apache/doris/pull/50810 target=_blank rel="noopener noreferrer">#50810</a></li>
<li>Completed system table information retrieval <a href=https://github.com/apache/doris/pull/50721 target=_blank rel="noopener noreferrer">#50721</a></li>
<li>Fixed column type handling when creating views with NULL Literal <a href=https://github.com/apache/doris/pull/49881 target=_blank rel="noopener noreferrer">#49881</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=query-execution-1>Query Execution<a href=#query-execution-1 class=hash-link aria-label="Direct link to Query Execution" title="Direct link to Query Execution">​</a></h3>
<ul>
<li>Fixed BE crashes caused by illegal JSON values during import <a href=https://github.com/apache/doris/pull/50978 target=_blank rel="noopener noreferrer">#50978</a></li>
<li>Corrected Intersect results with NULL constant inputs <a href=https://github.com/apache/doris/pull/50951 target=_blank rel="noopener noreferrer">#50951</a></li>
<li>Fixed predicate mis-execution with Variant types <a href=https://github.com/apache/doris/pull/50934 target=_blank rel="noopener noreferrer">#50934</a></li>
<li>Resolved <code>get_json_string</code> errors with illegal JSON Paths <a href=https://github.com/apache/doris/pull/50859 target=_blank rel="noopener noreferrer">#50859</a></li>
<li>Aligned function behaviors (JSON_REPLACE/INSERT/SET/ARRAY) with MySQL <a href=https://github.com/apache/doris/pull/50308 target=_blank rel="noopener noreferrer">#50308</a></li>
<li>Fixed <code>array_map</code> crashes with empty parameters <a href=https://github.com/apache/doris/pull/50201 target=_blank rel="noopener noreferrer">#50201</a></li>
<li>Prevented core dumps during abnormal Variant-to-JSONB conversion <a href=https://github.com/apache/doris/pull/50180 target=_blank rel="noopener noreferrer">#50180</a></li>
<li>Added missing <code>explode_json_array_json_outer</code> function <a href=https://github.com/apache/doris/pull/50164 target=_blank rel="noopener noreferrer">#50164</a></li>
<li>Aligned results between <code>percentile</code> and <code>percentile_array</code> <a href=https://github.com/apache/doris/pull/49351 target=_blank rel="noopener noreferrer">#49351</a></li>
<li>Optimized UTF8 handling for functions (url_encode/strright/append_trailing_char_if_absent) <a href=https://github.com/apache/doris/pull/49127 target=_blank rel="noopener noreferrer">#49127</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=others>Others<a href=#others class=hash-link aria-label="Direct link to Others" title="Direct link to Others">​</a></h3>
<ul>
<li>Fixed audit log loss in high-concurrency scenarios <a href=https://github.com/apache/doris/pull/50357 target=_blank rel="noopener noreferrer">#50357</a></li>
<li>Prevented metadata replay failures during dynamic partition creation <a href=https://github.com/apache/doris/pull/49569 target=_blank rel="noopener noreferrer">#49569</a></li>
<li>Solved Global UDF loss after restart <a href=https://github.com/apache/doris/pull/50279 target=_blank rel="noopener noreferrer">#50279</a></li>
<li>Aligned View metadata return format with MySQL <a href=https://github.com/apache/doris/pull/51058 target=_blank rel="noopener noreferrer">#51058</a></li>
</ul></div></div></article><article class=margin-bottom--xl itemprop=blogPost itemscope itemtype=http://schema.org/BlogPosting><div class=markdown itemprop=articleBody><header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href=/blog/>Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class=s-tags><span class=s-tag>Release Notes</span></span></span></div><h2 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop=headline><a itemprop=url href=/blog/release-note-2.1.10/>Apache Doris 2.1.10 released</a></h2><div class="blog-info text-center flex justify-center text-sm text-black"><span class=authors><span class="s-author text-black">Apache Doris</span></span><time datetime=2025-05-17T00:00:00.000Z itemprop=datePublished class="text-black ml-4">May 17, 2025</time></div></header><div class=markdown itemprop=articleBody><p>Dear Community, <strong>Apache Doris version 2.1.10 is now available</strong>. This version introduces continuous upgrades and enhancements in Query Execution Engine and Lakehouse. It also resolves critical bugs to improve stability and performance.</p>
<ul>
<li>
<p><a href=https://doris.apache.org/download target=_blank rel="noopener noreferrer">Quick Download</a></p>
</li>
<li>
<p><a href=https://github.com/apache/doris/releases/tag/2.1.10-rc01 target=_blank rel="noopener noreferrer">GitHub Release</a></p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=behavior-changes>Behavior Changes<a href=#behavior-changes class=hash-link aria-label="Direct link to Behavior Changes" title="Direct link to Behavior Changes">​</a></h2>
<ul>
<li>DELETE no longer incorrectly requires the SELECT_PRIV permission on the target table. <a href=https://github.com/apache/doris/pull/49794 target=_blank rel="noopener noreferrer"> #49794</a></li>
<li>Insert Overwrite no longer restricts concurrent operations on the same table to 1. <a href=https://github.com/apache/doris/pull/48673 target=_blank rel="noopener noreferrer"> #48673</a></li>
<li>Merge on write unique tables prohibit the use of time-series compaction. <a href=https://github.com/apache/doris/pull/49905 target=_blank rel="noopener noreferrer"> #49905</a></li>
<li>Building indexes on VARIANT type columns is prohibited. <a href=https://github.com/apache/doris/pull/49159 target=_blank rel="noopener noreferrer"> #49159</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=new-features>New Features<a href=#new-features class=hash-link aria-label="Direct link to New Features" title="Direct link to New Features">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=query-execution-engine>Query Execution Engine<a href=#query-execution-engine class=hash-link aria-label="Direct link to Query Execution Engine" title="Direct link to Query Execution Engine">​</a></h3>
<ul>
<li>Added support for more GEO type computation functions: <code>ST_CONTAINS</code>, <code>ST_INTERSECTS</code>, <code>ST_TOUCHES</code>, <code>GeometryFromText</code>, <code>ST_Intersects</code>, <code>ST_Disjoint</code>, <code>ST_Touches</code>. <a href=https://github.com/apache/doris/pull/49665 target=_blank rel="noopener noreferrer"> #49665</a> <a href=https://github.com/apache/doris/pull/48695 target=_blank rel="noopener noreferrer"> #48695</a></li>
<li>Added support for the <code>years_of_week</code> function. <a href=https://github.com/apache/doris/pull/48870 target=_blank rel="noopener noreferrer"> #48870</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=lakehouse>Lakehouse<a href=#lakehouse class=hash-link aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">​</a></h3>
<ul>
<li>Hive Catalog now supports catalog-level partition cache control. <a href=https://github.com/apache/doris/pull/50724 target=_blank rel="noopener noreferrer"> #50724</a>
<ul>
<li>For more details, refer to the<a href=https://doris.apache.org/docs/dev/lakehouse/meta-cache target=_blank rel="noopener noreferrer"> </a><a href=https://doris.apache.org/docs/dev/lakehouse/meta-cache#disable-hive-catalog-metadata-cache target=_blank rel="noopener noreferrer">documentation</a>.</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=improvements>Improvements<a href=#improvements class=hash-link aria-label="Direct link to Improvements" title="Direct link to Improvements">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=lakehouse-1>Lakehouse<a href=#lakehouse-1 class=hash-link aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">​</a></h3>
<ul>
<li>Upgraded the Paimon dependency version to 1.0.1.</li>
<li>Upgraded the Iceberg dependency version to 1.6.1.</li>
<li>Included the memory overhead of Parquet Footer in the Memory Tracker to avoid potential OOM issues. <a href=https://github.com/apache/doris/pull/49037 target=_blank rel="noopener noreferrer"> #49037</a></li>
<li>Optimized the predicate pushdown logic for JDBC Catalog, supporting pushdown of AND/OR connected predicates. <a href=https://github.com/apache/doris/pull/50542 target=_blank rel="noopener noreferrer"> #50542</a></li>
<li>Precompiled versions now include the Jindofs extension package by default to support Alibaba Cloud oss-hdfs access.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=semi-structured-data-management>Semi-Structured Data Management<a href=#semi-structured-data-management class=hash-link aria-label="Direct link to Semi-Structured Data Management" title="Direct link to Semi-Structured Data Management">​</a></h3>
<ul>
<li>ANY function now supports JSON type. <a href=https://github.com/apache/doris/pull/50311 target=_blank rel="noopener noreferrer"> #50311</a></li>
<li>JSON_REPLACE, JSON_INSERT, JSON_SET, JSON_ARRAY functions now support JSON data type and complex data types. <a href=https://github.com/apache/doris/pull/50308 target=_blank rel="noopener noreferrer"> #50308</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=query-optimizer>Query Optimizer<a href=#query-optimizer class=hash-link aria-label="Direct link to Query Optimizer" title="Direct link to Query Optimizer">​</a></h3>
<ul>
<li>When the number of options in an IN expression exceeds <code>Config.max_distribution_pruner_recursion_depth</code>, bucket pruning is not performed to improve planning speed. <a href=https://github.com/apache/doris/pull/49387 target=_blank rel="noopener noreferrer"> #49387</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=storage-management>Storage Management<a href=#storage-management class=hash-link aria-label="Direct link to Storage Management" title="Direct link to Storage Management">​</a></h3>
<ul>
<li>Reduced logging and improved some log messages. <a href=https://github.com/apache/doris/pull/47647 target=_blank rel="noopener noreferrer"> #47647</a> <a href=https://github.com/apache/doris/pull/48523 target=_blank rel="noopener noreferrer"> #48523</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=other>Other<a href=#other class=hash-link aria-label="Direct link to Other" title="Direct link to Other">​</a></h3>
<ul>
<li>Avoided the thrift rpc END_OF_FILE exception. <a href=https://github.com/apache/doris/pull/49649 target=_blank rel="noopener noreferrer"> #49649</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=bug-fixes>Bug Fixes<a href=#bug-fixes class=hash-link aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=lakehouse-2>Lakehouse<a href=#lakehouse-2 class=hash-link aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">​</a></h3>
<ul>
<li>Fixed the issue where newly created tables in Hive were not immediately visible in Doris. <a href=https://github.com/apache/doris/pull/50188 target=_blank rel="noopener noreferrer"> #50188</a></li>
<li>Fixed the error "Storage schema reading not supported" when accessing certain Text format Hive tables. <a href=https://github.com/apache/doris/pull/50038 target=_blank rel="noopener noreferrer"> #50038</a>
<ul>
<li>Refer to the<a href="https://doris.apache.org/docs/dev/lakehouse/catalogs/hive-catalog?_highlight=get_schema_from_table#syntax" target=_blank rel="noopener noreferrer"> get_schema_from_table documentation</a> for details.</li>
</ul>
</li>
<li>Fixed concurrency issues with metadata submission when writing to Hive/Iceberg tables. <a href=https://github.com/apache/doris/pull/49842 target=_blank rel="noopener noreferrer"> #49842</a></li>
<li>Fixed the issue where writing to Hive tables stored on oss-hdfs failed. <a href=https://github.com/apache/doris/pull/49754 target=_blank rel="noopener noreferrer"> #49754</a></li>
<li>Fixed the issue where accessing Hive tables with partition key values containing commas failed. <a href=https://github.com/apache/doris/pull/49382 target=_blank rel="noopener noreferrer"> #49382</a></li>
<li>Fixed the issue where Split allocation for Paimon tables was uneven in certain cases. <a href=https://github.com/apache/doris/pull/50083 target=_blank rel="noopener noreferrer"> #50083</a></li>
<li>Fixed the issue where Delete files were not correctly handled when reading Paimon tables stored on oss. <a href=https://github.com/apache/doris/pull/49645 target=_blank rel="noopener noreferrer"> #49645</a></li>
<li>Fixed the issue where reading high-precision Timestamp columns in MaxCompute Catalog failed. <a href=https://github.com/apache/doris/pull/49600 target=_blank rel="noopener noreferrer"> #49600</a></li>
<li>Fixed the potential resource leakage when deleting a Catalog in certain cases. <a href=https://github.com/apache/doris/pull/49621 target=_blank rel="noopener noreferrer"> #49621</a></li>
<li>Fixed the issue where reading LZO compressed data failed in certain cases. <a href=https://github.com/apache/doris/pull/49538 target=_blank rel="noopener noreferrer"> #49538</a></li>
<li>Fixed the issue where ORC deferred materialization caused errors when reading complex types. <a href=https://github.com/apache/doris/pull/50136 target=_blank rel="noopener noreferrer"> #50136</a></li>
<li>Fixed the issue where reading ORC files generated by pyorc-0.3 version failed. <a href=https://github.com/apache/doris/pull/50358 target=_blank rel="noopener noreferrer"> #50358</a></li>
<li>Fixed the issue where EXPORT operations caused metadata deadlocks. <a href=https://github.com/apache/doris/pull/50088 target=_blank rel="noopener noreferrer"> #50088</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=indexing>Indexing<a href=#indexing class=hash-link aria-label="Direct link to Indexing" title="Direct link to Indexing">​</a></h3>
<ul>
<li>Fixed errors in building inverted indexes after multiple add, delete, and rename column operations. <a href=https://github.com/apache/doris/pull/50056 target=_blank rel="noopener noreferrer"> #50056</a></li>
<li>Added validation for unique column IDs in index compaction to avoid potential data anomalies and system errors. <a href=https://github.com/apache/doris/pull/47562 target=_blank rel="noopener noreferrer"> #47562</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=semi-structured-data-types>Semi-Structured Data Types<a href=#semi-structured-data-types class=hash-link aria-label="Direct link to Semi-Structured Data Types" title="Direct link to Semi-Structured Data Types">​</a></h3>
<ul>
<li>Fixed the issue where converting VARIANT type to JSON type returned NULL in certain cases. <a href=https://github.com/apache/doris/pull/50180 target=_blank rel="noopener noreferrer"> #50180</a></li>
<li>Fixed the crash caused by JSONB CAST in certain cases. <a href=https://github.com/apache/doris/pull/49810 target=_blank rel="noopener noreferrer"> #49810</a></li>
<li>Prohibited building indexes on VARIANT type columns. <a href=https://github.com/apache/doris/pull/49159 target=_blank rel="noopener noreferrer"> #49159</a></li>
<li>Fixed the precision correctness of decimal type in the named_struct function. <a href=https://github.com/apache/doris/pull/48964 target=_blank rel="noopener noreferrer"> #48964</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=query-optimizer-1>Query Optimizer<a href=#query-optimizer-1 class=hash-link aria-label="Direct link to Query Optimizer" title="Direct link to Query Optimizer">​</a></h3>
<ul>
<li>Fixed several issues in constant folding. <a href=https://github.com/apache/doris/pull/49413 target=_blank rel="noopener noreferrer">#49413</a> <a href=https://github.com/apache/doris/pull/50425 target=_blank rel="noopener noreferrer">#50425</a> <a href=https://github.com/apache/doris/pull/49686 target=_blank rel="noopener noreferrer">#49686</a> <a href=https://github.com/apache/doris/pull/49575 target=_blank rel="noopener noreferrer">#49575</a> <a href=https://github.com/apache/doris/pull/50142 target=_blank rel="noopener noreferrer">#50142</a></li>
<li>Common subexpression extraction may not work properly on lambda expressions. <a href=https://github.com/apache/doris/pull/49166 target=_blank rel="noopener noreferrer">#49166</a></li>
<li>Fixed the issue where eliminating constants in group by keys might not work properly. <a href=https://github.com/apache/doris/pull/49589 target=_blank rel="noopener noreferrer">#49589</a></li>
<li>Fixed the issue where planning failed in extreme scenarios due to incorrect statistics inference. <a href=https://github.com/apache/doris/pull/49415 target=_blank rel="noopener noreferrer">#49415</a></li>
<li>Fixed the issue where some information_schema tables depending on BE metadata could not retrieve complete data. <a href=https://github.com/apache/doris/pull/50721 target=_blank rel="noopener noreferrer">#50721</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=query-execution-engine-1>Query Execution Engine<a href=#query-execution-engine-1 class=hash-link aria-label="Direct link to Query Execution Engine" title="Direct link to Query Execution Engine">​</a></h3>
<ul>
<li>Fixed the issue where the explode_json_array_json_outer function was not found. <a href=https://github.com/apache/doris/pull/50164 target=_blank rel="noopener noreferrer">#50164</a></li>
<li>Fixed the issue where substring_index did not support dynamic parameters. <a href=https://github.com/apache/doris/pull/50149 target=_blank rel="noopener noreferrer">#50149</a></li>
<li>Fixed the issue where the st_contains function returned incorrect results in many cases. <a href=https://github.com/apache/doris/pull/50115 target=_blank rel="noopener noreferrer">#50115</a></li>
<li>Fixed the core dump issue that could be caused by the array_range function. <a href=https://github.com/apache/doris/pull/49993 target=_blank rel="noopener noreferrer">#49993</a></li>
<li>Fixed the issue where the date_diff function returned incorrect results. <a href=https://github.com/apache/doris/pull/49429 target=_blank rel="noopener noreferrer">#49429</a></li>
<li>Fixed a series of issues with string functions causing garbled output or incorrect results in non-ASCII encodings. <a href=https://github.com/apache/doris/pull/49231 target=_blank rel="noopener noreferrer">#49231</a> <a href=https://github.com/apache/doris/pull/49846 target=_blank rel="noopener noreferrer">#49846</a> <a href=https://github.com/apache/doris/pull/49127 target=_blank rel="noopener noreferrer">#49127</a> <a href=https://github.com/apache/doris/pull/40710 target=_blank rel="noopener noreferrer">#40710</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=storage-management-1>Storage Management<a href=#storage-management-1 class=hash-link aria-label="Direct link to Storage Management" title="Direct link to Storage Management">​</a></h3>
<ul>
<li>Fixed the issue where metadata replay for dynamic partition tables failed in certain cases. <a href=https://github.com/apache/doris/pull/49569 target=_blank rel="noopener noreferrer">#49569</a></li>
<li>Fixed the issue where streamload on ARM might lose data due to operation sequence. <a href=https://github.com/apache/doris/pull/48948 target=_blank rel="noopener noreferrer">#48948</a></li>
<li>Fixed the error in full compaction and the potential issue of mow data duplication. <a href=https://github.com/apache/doris/pull/49825 target=_blank rel="noopener noreferrer">#49825</a> <a href=https://github.com/apache/doris/pull/48958 target=_blank rel="noopener noreferrer">#48958</a></li>
<li>Fixed the issue where partition storage policy was not persisted. <a href=https://github.com/apache/doris/pull/49721 target=_blank rel="noopener noreferrer">#49721</a></li>
<li>Fixed the extremely rare issue where imported files did not exist. <a href=https://github.com/apache/doris/pull/50343 target=_blank rel="noopener noreferrer">#50343</a></li>
<li>Fixed the issue where ccr and disk balancing concurrency might cause files to go missing. <a href=https://github.com/apache/doris/pull/50663 target=_blank rel="noopener noreferrer">#50663</a></li>
<li>Fixed the connection reset issue that might occur during backup and restore of large snapshots. <a href=https://github.com/apache/doris/pull/49649 target=_blank rel="noopener noreferrer">#49649</a></li>
<li>Fixed the issue where FE follower lost local backup snapshots. <a href=https://github.com/apache/doris/pull/49550 target=_blank rel="noopener noreferrer">#49550</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=others>Others<a href=#others class=hash-link aria-label="Direct link to Others" title="Direct link to Others">​</a></h3>
<ul>
<li>Fixed the issue where audit logs might be lost in certain scenarios. <a href=https://github.com/apache/doris/pull/50357 target=_blank rel="noopener noreferrer">#50357</a></li>
<li>Fixed the issue where the isQuery flag in audit logs might be incorrect. <a href=https://github.com/apache/doris/pull/49959 target=_blank rel="noopener noreferrer">#49959</a></li>
<li>Fixed the issue where some query sqlHash values in audit logs were incorrect. <a href=https://github.com/apache/doris/pull/49984 target=_blank rel="noopener noreferrer">#49984</a></li>
</ul></div></div></article><article class=margin-bottom--xl itemprop=blogPost itemscope itemtype=http://schema.org/BlogPosting><div class=markdown itemprop=articleBody><header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href=/blog/>Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class=s-tags><span class=s-tag>Release Notes</span></span></span></div><h2 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop=headline><a itemprop=url href=/blog/release-note-3.0.5/>Apache Doris 3.0.5 Released</a></h2><div class="blog-info text-center flex justify-center text-sm text-black"><span class=authors><span class="s-author text-black">Apache Doris</span></span><time datetime=2025-04-28T00:00:00.000Z itemprop=datePublished class="text-black ml-4">April 28, 2025</time></div></header><div class=markdown itemprop=articleBody><p>Dear community members, the Apache Doris 3.0.5 version was officially released on April 28, 2025, this version introduces continuous upgrades and enhancements in several key areas, including Lakehouse, Asynchronous Materialized Views, Semi-structured Data Management and more.</p>
<p><strong>Quick Download:</strong> <a href=https://doris.apache.org/download/ target=_blank rel="noopener noreferrer">https://doris.apache.org/download/</a></p>
<p><strong>GitHub Release:</strong> <a href=https://github.com/apache/doris/releases target=_blank rel="noopener noreferrer">https://github.com/apache/doris/releases</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=new-features>New Features<a href=#new-features class=hash-link aria-label="Direct link to New Features" title="Direct link to New Features">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=lakehouse>Lakehouse<a href=#lakehouse class=hash-link aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">​</a></h3>
<ul>
<li>Added Catalog/Database/Table quantity monitoring metrics to FE Metrics (<a href=https://github.com/apache/doris/pull/47891 target=_blank rel="noopener noreferrer">#47891</a>)</li>
<li>MaxCompute Catalog now supports Timestamp type (<a href=https://github.com/apache/doris/pull/48768 target=_blank rel="noopener noreferrer">#48768</a>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=query-execution>Query Execution<a href=#query-execution class=hash-link aria-label="Direct link to Query Execution" title="Direct link to Query Execution">​</a></h3>
<ul>
<li>Added URL processing functions: <code>top_level_domain</code>, <code>first_significant_subdomain</code>, <code>cut_to_first_significant_subdomain</code> (<a href=https://github.com/apache/doris/pull/42488 target=_blank rel="noopener noreferrer">#42488</a>)</li>
<li>Added <code>year_of_week</code> function with Trino-compatible implementation (<a href=https://github.com/apache/doris/pull/48870 target=_blank rel="noopener noreferrer">#48870</a>)</li>
<li><code>percentile_array</code> function now supports Float and Double data types (<a href=https://github.com/apache/doris/pull/48094 target=_blank rel="noopener noreferrer">#48094</a>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=storage-compute-separation>Storage-Compute Separation<a href=#storage-compute-separation class=hash-link aria-label="Direct link to Storage-Compute Separation" title="Direct link to Storage-Compute Separation">​</a></h3>
<ul>
<li>Added compute group renaming support (<a href=https://github.com/apache/doris/pull/46221 target=_blank rel="noopener noreferrer">#46221</a>)</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=improvements>Improvements<a href=#improvements class=hash-link aria-label="Direct link to Improvements" title="Direct link to Improvements">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=storage>Storage<a href=#storage class=hash-link aria-label="Direct link to Storage" title="Direct link to Storage">​</a></h3>
<ul>
<li>Accelerated Compaction task generation to improve performance (<a href=https://github.com/apache/doris/pull/49547 target=_blank rel="noopener noreferrer">#49547</a>)</li>
<li>Stream Load now supports compressed JSON file ingestion (<a href=https://github.com/apache/doris/pull/49044 target=_blank rel="noopener noreferrer">#49044</a>)</li>
<li>Enhanced error messages for various ingestion scenarios (<a href=https://github.com/apache/doris/pull/48436 target=_blank rel="noopener noreferrer">#48436</a> <a href=https://github.com/apache/doris/pull/47721 target=_blank rel="noopener noreferrer">#47721</a> <a href=https://github.com/apache/doris/pull/47804 target=_blank rel="noopener noreferrer">#47804</a> <a href=https://github.com/apache/doris/pull/48638 target=_blank rel="noopener noreferrer">#48638</a> <a href=https://github.com/apache/doris/pull/48344 target=_blank rel="noopener noreferrer">#48344</a> <a href=https://github.com/apache/doris/pull/49287 target=_blank rel="noopener noreferrer">#49287</a> <a href=https://github.com/apache/doris/pull/48009 target=_blank rel="noopener noreferrer">#48009</a>)</li>
<li>Added multiple metrics for Routine Load (<a href=https://github.com/apache/doris/pull/49045 target=_blank rel="noopener noreferrer">#49045</a> <a href=https://github.com/apache/doris/pull/48764 target=_blank rel="noopener noreferrer">#48764</a>)</li>
<li>Optimized Routine Load scheduling algorithm to prevent single job failure from affecting overall scheduling (<a href=https://github.com/apache/doris/pull/47847 target=_blank rel="noopener noreferrer">#47847</a>)</li>
<li>Added Routine Load system table (<a href=https://github.com/apache/doris/pull/49284 target=_blank rel="noopener noreferrer">#49284</a>)</li>
<li>Improved query performance for Merge-On-Write (MOW) tables under high-frequency ingestion (<a href=https://github.com/apache/doris/pull/48968 target=_blank rel="noopener noreferrer">#48968</a>)</li>
<li>Enhanced Profile information display for Key Range queries (<a href=https://github.com/apache/doris/pull/48191 target=_blank rel="noopener noreferrer">#48191</a>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=compute-storage-decoupled>Compute-Storage Decoupled<a href=#compute-storage-decoupled class=hash-link aria-label="Direct link to Compute-Storage Decoupled" title="Direct link to Compute-Storage Decoupled">​</a></h3>
<ul>
<li>Fixed multiple File Cache stability and performance issues (<a href=https://github.com/apache/doris/pull/48786 target=_blank rel="noopener noreferrer">#48786</a> <a href=https://github.com/apache/doris/pull/48623 target=_blank rel="noopener noreferrer">#48623</a> <a href=https://github.com/apache/doris/pull/48687 target=_blank rel="noopener noreferrer">#48687</a> <a href=https://github.com/apache/doris/pull/49050 target=_blank rel="noopener noreferrer">#49050</a> <a href=https://github.com/apache/doris/pull/48318 target=_blank rel="noopener noreferrer">#48318</a>)</li>
<li>Improved validation logic for Storage Vault creation (<a href=https://github.com/apache/doris/pull/48073 target=_blank rel="noopener noreferrer">#48073</a> <a href=https://github.com/apache/doris/pull/48369 target=_blank rel="noopener noreferrer">#48369</a>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=lakehouse-1>Lakehouse<a href=#lakehouse-1 class=hash-link aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">​</a></h3>
<ul>
<li>Optimized BE Scanner closure logic for Trino Connector Catalog to accelerate memory release (<a href=https://github.com/apache/doris/pull/47857 target=_blank rel="noopener noreferrer">#47857</a>)</li>
<li>ClickHouse JDBC Catalog now auto-adapts to different driver versions (<a href=https://github.com/apache/doris/pull/46026 target=_blank rel="noopener noreferrer">#46026</a>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=asynchronous-materialized-views>Asynchronous Materialized Views<a href=#asynchronous-materialized-views class=hash-link aria-label="Direct link to Asynchronous Materialized Views" title="Direct link to Asynchronous Materialized Views">​</a></h3>
<ul>
<li>Enhanced planning performance for transparent rewrite (<a href=https://github.com/apache/doris/pull/48782 target=_blank rel="noopener noreferrer">#48782</a>)</li>
<li>Optimized <code>tvf mv_infos</code> performance (<a href=https://github.com/apache/doris/pull/47415 target=_blank rel="noopener noreferrer">#47415</a>)</li>
<li>Disabled catalog metadata refresh during external table-based MV construction to reduce memory usage (<a href=https://github.com/apache/doris/pull/48767 target=_blank rel="noopener noreferrer">#48767</a>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=query-optimizer>Query Optimizer<a href=#query-optimizer class=hash-link aria-label="Direct link to Query Optimizer" title="Direct link to Query Optimizer">​</a></h3>
<ul>
<li>Improved statistics collection performance for key columns and partition columns (<a href=https://github.com/apache/doris/pull/46534 target=_blank rel="noopener noreferrer">#46534</a>)</li>
<li>Query result aliases now strictly match user input (<a href=https://github.com/apache/doris/pull/47093 target=_blank rel="noopener noreferrer">#47093</a>)</li>
<li>Enhanced column pruning after common subexpression extraction in aggregation operators (<a href=https://github.com/apache/doris/pull/46627 target=_blank rel="noopener noreferrer">#46627</a>)</li>
<li>Improved error messages for function binding failures and unsupported subqueries (<a href=https://github.com/apache/doris/pull/47919 target=_blank rel="noopener noreferrer">#47919</a> <a href=https://github.com/apache/doris/pull/47985 target=_blank rel="noopener noreferrer">#47985</a>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=semi-structured-data-management>Semi-structured Data Management<a href=#semi-structured-data-management class=hash-link aria-label="Direct link to Semi-structured Data Management" title="Direct link to Semi-structured Data Management">​</a></h3>
<ul>
<li><code>json_object</code> function now supports complex type parameters (<a href=https://github.com/apache/doris/pull/47779 target=_blank rel="noopener noreferrer">#47779</a>)</li>
<li>Added support for writing UInt128 to IPv6 type (<a href=https://github.com/apache/doris/pull/48802 target=_blank rel="noopener noreferrer">#48802</a>)</li>
<li>Enabled inverted index support for ARRAY fields in VARIANT type (<a href=https://github.com/apache/doris/pull/47688 target=_blank rel="noopener noreferrer">#47688</a> <a href=https://github.com/apache/doris/pull/48117 target=_blank rel="noopener noreferrer">#48117</a>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=security>Security<a href=#security class=hash-link aria-label="Direct link to Security" title="Direct link to Security">​</a></h3>
<ul>
<li>Improved Ranger authorization performance (<a href=https://github.com/apache/doris/pull/49352 target=_blank rel="noopener noreferrer">#49352</a>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=others>Others<a href=#others class=hash-link aria-label="Direct link to Others" title="Direct link to Others">​</a></h3>
<ul>
<li>Optimized JVM Metrics interface performance (<a href=https://github.com/apache/doris/pull/49380 target=_blank rel="noopener noreferrer">#49380</a>)</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=bug-fixes>Bug Fixes<a href=#bug-fixes class=hash-link aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=storage-1>Storage<a href=#storage-1 class=hash-link aria-label="Direct link to Storage" title="Direct link to Storage">​</a></h3>
<ul>
<li>Fixed data correctness issues in several edge cases (<a href=https://github.com/apache/doris/pull/48056 target=_blank rel="noopener noreferrer">#48056</a> <a href=https://github.com/apache/doris/pull/48399 target=_blank rel="noopener noreferrer">#48399</a> <a href=https://github.com/apache/doris/pull/48400 target=_blank rel="noopener noreferrer">#48400</a> <a href=https://github.com/apache/doris/pull/48748 target=_blank rel="noopener noreferrer">#48748</a> <a href=https://github.com/apache/doris/pull/48775 target=_blank rel="noopener noreferrer">#48775</a> <a href=https://github.com/apache/doris/pull/48867 target=_blank rel="noopener noreferrer">#48867</a> <a href=https://github.com/apache/doris/pull/49165 target=_blank rel="noopener noreferrer">#49165</a> <a href=https://github.com/apache/doris/pull/49193 target=_blank rel="noopener noreferrer">#49193</a> <a href=https://github.com/apache/doris/pull/49350 target=_blank rel="noopener noreferrer">#49350</a> <a href=https://github.com/apache/doris/pull/49710 target=_blank rel="noopener noreferrer">#49710</a> <a href=https://github.com/apache/doris/pull/49825 target=_blank rel="noopener noreferrer">#49825</a>)</li>
<li>Fixed untimely cleanup of completed transactions (<a href=https://github.com/apache/doris/pull/49564 target=_blank rel="noopener noreferrer">#49564</a>)</li>
<li>Changed JSONB default value to <code>{}</code> for partial column updates (<a href=https://github.com/apache/doris/pull/49066 target=_blank rel="noopener noreferrer">#49066</a>)</li>
<li>Fixed delete bitmap update lock release issue in Storage-Compute Separation model (<a href=https://github.com/apache/doris/pull/47766 target=_blank rel="noopener noreferrer">#47766</a>)</li>
<li>Fixed data loss in Stream Load on ARM architecture (<a href=https://github.com/apache/doris/pull/49666 target=_blank rel="noopener noreferrer">#49666</a>)</li>
<li>Fixed missing error URL return for data quality issues in Insert Into Select (<a href=https://github.com/apache/doris/pull/49687 target=_blank rel="noopener noreferrer">#49687</a>)</li>
<li>Fixed error URL reporting for multi-table Routine Load data quality issues (<a href=https://github.com/apache/doris/pull/49130 target=_blank rel="noopener noreferrer">#49130</a>)</li>
<li>Fixed incorrect results when using Insert Into Values during Schema Change (<a href=https://github.com/apache/doris/pull/49338 target=_blank rel="noopener noreferrer">#49338</a>)</li>
<li>Fixed core dump caused by tablet commit info reporting (<a href=https://github.com/apache/doris/pull/48732 target=_blank rel="noopener noreferrer">#48732</a>)</li>
<li>Added Azure China region support for S3 Load (<a href=https://github.com/apache/doris/pull/48642 target=_blank rel="noopener noreferrer">#48642</a>)</li>
<li>Fixed "get image failed" error in K8s environment (<a href=https://github.com/apache/doris/pull/49072 target=_blank rel="noopener noreferrer">#49072</a>)</li>
<li>Reduced CPU consumption in dynamic partition scheduling (<a href=https://github.com/apache/doris/pull/48577 target=_blank rel="noopener noreferrer">#48577</a>)</li>
<li>Fixed column exception after materialized view renaming (<a href=https://github.com/apache/doris/pull/48328 target=_blank rel="noopener noreferrer">#48328</a>)</li>
<li>Fixed memory and file cache leakage after failed Schema Change (<a href=https://github.com/apache/doris/pull/48426 target=_blank rel="noopener noreferrer">#48426</a>)</li>
<li>Fixed base compaction failure for tables with empty partitions (<a href=https://github.com/apache/doris/pull/49062 target=_blank rel="noopener noreferrer">#49062</a>)</li>
<li>Fixed data correctness issues in complex type modifications (<a href=https://github.com/apache/doris/pull/49452 target=_blank rel="noopener noreferrer">#49452</a>)</li>
<li>Fixed core dump in cold compaction (<a href=https://github.com/apache/doris/pull/48329 target=_blank rel="noopener noreferrer">#48329</a>)</li>
<li>Fixed cumulative point stagnation with delete operations (<a href=https://github.com/apache/doris/pull/47282 target=_blank rel="noopener noreferrer">#47282</a>)</li>
<li>Fixed memory insufficiency in large-scale full compaction (<a href=https://github.com/apache/doris/pull/48958 target=_blank rel="noopener noreferrer">#48958</a>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=compute-storage-decoupled-1>Compute-Storage Decoupled<a href=#compute-storage-decoupled-1 class=hash-link aria-label="Direct link to Compute-Storage Decoupled" title="Direct link to Compute-Storage Decoupled">​</a></h3>
<ul>
<li>Fixed file cache cleanup failure in K8s environment (<a href=https://github.com/apache/doris/pull/49199 target=_blank rel="noopener noreferrer">#49199</a>)</li>
<li>Fixed FE CPU spike caused by read-write locks during high-frequency ingestion (<a href=https://github.com/apache/doris/pull/48564 target=_blank rel="noopener noreferrer">#48564</a>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=lakehouse-2>Lakehouse<a href=#lakehouse-2 class=hash-link aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">​</a></h3>
<p><strong>Data Lakes</strong></p>
<ul>
<li>Fixed BE core dump during concurrent writes to Hive/Iceberg tables (<a href=https://github.com/apache/doris/pull/49842 target=_blank rel="noopener noreferrer">#49842</a>)</li>
<li>Fixed write failures to Hive/Iceberg tables on AWS S3 (<a href=https://github.com/apache/doris/pull/47162 target=_blank rel="noopener noreferrer">#47162</a>)</li>
<li>Fixed incorrect Iceberg Position Deletion reads (<a href=https://github.com/apache/doris/pull/47977 target=_blank rel="noopener noreferrer">#47977</a>)</li>
<li>Added Tencent Cloud COS support for Iceberg table creation (<a href=https://github.com/apache/doris/pull/49885 target=_blank rel="noopener noreferrer">#49885</a>)</li>
<li>Fixed Kerberos authentication for Paimon data on HDFS (<a href=https://github.com/apache/doris/pull/47192 target=_blank rel="noopener noreferrer">#47192</a>)</li>
<li>Fixed memory leak in Hudi Jni Scanner (<a href=https://github.com/apache/doris/pull/48955 target=_blank rel="noopener noreferrer">#48955</a>)</li>
<li>Fixed multi-partition list reading in MaxCompute Catalog (<a href=https://github.com/apache/doris/pull/48325 target=_blank rel="noopener noreferrer">#48325</a>)</li>
</ul>
<p><strong>JDBC</strong></p>
<ul>
<li>Fixed NPE when fetching row count from JDBC Catalog (<a href=https://github.com/apache/doris/pull/49442 target=_blank rel="noopener noreferrer">#49442</a>)</li>
<li>Fixed OceanBase Oracle mode connection test (<a href=https://github.com/apache/doris/pull/49442 target=_blank rel="noopener noreferrer">#49442</a>)</li>
<li>Fixed column type length inconsistency in concurrent JDBC Catalog access (<a href=https://github.com/apache/doris/pull/48541 target=_blank rel="noopener noreferrer">#48541</a>)</li>
<li>Fixed Classloader leak in JDBC Catalog BE (<a href=https://github.com/apache/doris/pull/46912 target=_blank rel="noopener noreferrer">#46912</a>)</li>
<li>Fixed connection thread leak in PostgreSQL JDBC Catalog (<a href=https://github.com/apache/doris/pull/49568 target=_blank rel="noopener noreferrer">#49568</a>)</li>
</ul>
<p><strong>Export</strong></p>
<ul>
<li>Fixed EXPORT job stuck in EXPORTING state (<a href=https://github.com/apache/doris/pull/47974 target=_blank rel="noopener noreferrer">#47974</a>)</li>
<li>Disabled OUTFILE auto-retry to prevent duplicate files (<a href=https://github.com/apache/doris/pull/48095 target=_blank rel="noopener noreferrer">#48095</a>)</li>
</ul>
<p><strong>Others</strong></p>
<ul>
<li>Fixed NPE when executing TVF queries via FE WebUI (<a href=https://github.com/apache/doris/pull/49213 target=_blank rel="noopener noreferrer">#49213</a>)</li>
<li>Fixed Hadoop Libhdfs thread local null pointer exception (<a href=https://github.com/apache/doris/pull/48280 target=_blank rel="noopener noreferrer">#48280</a>)</li>
<li>Fixed "Filesystem already closed" error in FE Hadoop access (<a href=https://github.com/apache/doris/pull/48351 target=_blank rel="noopener noreferrer">#48351</a>)</li>
<li>Fixed Catalog comment persistence issue (<a href=https://github.com/apache/doris/pull/46946 target=_blank rel="noopener noreferrer">#46946</a>)</li>
<li>Fixed Parquet complex type reading errors (<a href=https://github.com/apache/doris/pull/47734 target=_blank rel="noopener noreferrer">#47734</a>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=asynchronous-materialized-views-1>Asynchronous Materialized Views<a href=#asynchronous-materialized-views-1 class=hash-link aria-label="Direct link to Asynchronous Materialized Views" title="Direct link to Asynchronous Materialized Views">​</a></h3>
<ul>
<li>Fixed slow MV construction in extreme scenarios (<a href=https://github.com/apache/doris/pull/48074 target=_blank rel="noopener noreferrer">#48074</a>)</li>
<li>Fixed nested MV transparent rewrite failure (<a href=https://github.com/apache/doris/pull/48222 target=_blank rel="noopener noreferrer">#48222</a>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=query-optimizer-1>Query Optimizer<a href=#query-optimizer-1 class=hash-link aria-label="Direct link to Query Optimizer" title="Direct link to Query Optimizer">​</a></h3>
<ul>
<li>Fixed constant folding calculation errors (<a href=https://github.com/apache/doris/pull/49225 target=_blank rel="noopener noreferrer">#49225</a> <a href=https://github.com/apache/doris/pull/47966 target=_blank rel="noopener noreferrer">#47966</a> <a href=https://github.com/apache/doris/pull/49416 target=_blank rel="noopener noreferrer">#49416</a> <a href=https://github.com/apache/doris/pull/49087 target=_blank rel="noopener noreferrer">#49087</a> <a href=https://github.com/apache/doris/pull/49033 target=_blank rel="noopener noreferrer">#49033</a> <a href=https://github.com/apache/doris/pull/49061 target=_blank rel="noopener noreferrer">#49061</a> <a href=https://github.com/apache/doris/pull/48895 target=_blank rel="noopener noreferrer">#48895</a> <a href=https://github.com/apache/doris/pull/48957 target=_blank rel="noopener noreferrer">#48957</a> <a href=https://github.com/apache/doris/pull/47288 target=_blank rel="noopener noreferrer">#47288</a> <a href=https://github.com/apache/doris/pull/48641 target=_blank rel="noopener noreferrer">#48641</a> <a href=https://github.com/apache/doris/pull/49413 target=_blank rel="noopener noreferrer">#49413</a> <a href=https://github.com/apache/doris/pull/48783 target=_blank rel="noopener noreferrer">#48783</a>)</li>
<li>Fixed unexpected errors with ORDER BY in nested window functions (<a href=https://github.com/apache/doris/pull/48492 target=_blank rel="noopener noreferrer">#48492</a>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=query-execution-1>Query Execution<a href=#query-execution-1 class=hash-link aria-label="Direct link to Query Execution" title="Direct link to Query Execution">​</a></h3>
<ul>
<li>Fixed pipeline task scheduling deadlocks/performance issues (<a href=https://github.com/apache/doris/pull/49976 target=_blank rel="noopener noreferrer">#49976</a> <a href=https://github.com/apache/doris/pull/49007 target=_blank rel="noopener noreferrer">#49007</a>)</li>
<li>Fixed memory corruption on FE connection failure (<a href=https://github.com/apache/doris/pull/48370 target=_blank rel="noopener noreferrer">#48370</a> <a href=https://github.com/apache/doris/pull/48313 target=_blank rel="noopener noreferrer">#48313</a>)</li>
<li>Fixed memory corruption with lambda and array functions (<a href=https://github.com/apache/doris/pull/49140 target=_blank rel="noopener noreferrer">#49140</a>)</li>
<li>Fixed BE core caused by null string-to-JSONB conversion (<a href=https://github.com/apache/doris/pull/49810 target=_blank rel="noopener noreferrer">#49810</a>)</li>
<li>Standardized undefined behaviors in <code>parse_url</code> (<a href=https://github.com/apache/doris/pull/49149 target=_blank rel="noopener noreferrer">#49149</a>)</li>
<li>Fixed <code>array_overlap</code> null handling (<a href=https://github.com/apache/doris/pull/49403 target=_blank rel="noopener noreferrer">#49403</a>)</li>
<li>Fixed case conversion errors for non-ASCII characters (<a href=https://github.com/apache/doris/pull/49763 target=_blank rel="noopener noreferrer">#49763</a>)</li>
<li>Fixed BE core in <code>percentile</code> function (<a href=https://github.com/apache/doris/pull/48563 target=_blank rel="noopener noreferrer">#48563</a>)</li>
<li>Fixed multiple memory corruption issues (<a href=https://github.com/apache/doris/pull/48288 target=_blank rel="noopener noreferrer">#48288</a> <a href=https://github.com/apache/doris/pull/49737 target=_blank rel="noopener noreferrer">#49737</a> <a href=https://github.com/apache/doris/pull/48018 target=_blank rel="noopener noreferrer">#48018</a> <a href=https://github.com/apache/doris/pull/47964 target=_blank rel="noopener noreferrer">#47964</a>)</li>
<li>Fixed incorrect SET operator results (<a href=https://github.com/apache/doris/pull/48001 target=_blank rel="noopener noreferrer">#48001</a>)</li>
<li>Reduced default Arrow Flight thread pool size to prevent FD exhaustion (<a href=https://github.com/apache/doris/pull/48530 target=_blank rel="noopener noreferrer">#48530</a>)</li>
<li>Fixed window function memory corruption (<a href=https://github.com/apache/doris/pull/48458 target=_blank rel="noopener noreferrer">#48458</a>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=semi-structured-data-management-1>Semi-structured Data Management<a href=#semi-structured-data-management-1 class=hash-link aria-label="Direct link to Semi-structured Data Management" title="Direct link to Semi-structured Data Management">​</a></h3>
<ul>
<li>Fixed chunked Stream Load JSON import (<a href=https://github.com/apache/doris/pull/48474 target=_blank rel="noopener noreferrer">#48474</a>)</li>
<li>Enhanced JSONB format validation (<a href=https://github.com/apache/doris/pull/48731 target=_blank rel="noopener noreferrer">#48731</a>)</li>
<li>Fixed crash with large STRUCT fields (<a href=https://github.com/apache/doris/pull/49552 target=_blank rel="noopener noreferrer">#49552</a>)</li>
<li>Extended VARCHAR length support in complex types (<a href=https://github.com/apache/doris/pull/48025 target=_blank rel="noopener noreferrer">#48025</a>)</li>
<li>Fixed <code>array_avg</code> crash with specific parameters (<a href=https://github.com/apache/doris/pull/48691 target=_blank rel="noopener noreferrer">#48691</a>)</li>
<li>Fixed <code>ColumnObject::pop_back</code> crash in VARIANT type (<a href=https://github.com/apache/doris/pull/48935 target=_blank rel="noopener noreferrer">#48935</a> <a href=https://github.com/apache/doris/pull/48978 target=_blank rel="noopener noreferrer">#48978</a>)</li>
<li>Disabled index building on VARIANT type (<a href=https://github.com/apache/doris/pull/49844 target=_blank rel="noopener noreferrer">#49844</a>)</li>
<li>Disabled inverted index v1 format for VARIANT type (<a href=https://github.com/apache/doris/pull/49890 target=_blank rel="noopener noreferrer">#49890</a>)</li>
<li>Fixed multi-layer CAST errors in VARIANT type (<a href=https://github.com/apache/doris/pull/47954 target=_blank rel="noopener noreferrer">#47954</a>)</li>
<li>Optimized inverted index metadata lookup for VARIANT with many subcolumns (<a href=https://github.com/apache/doris/pull/48153 target=_blank rel="noopener noreferrer">#48153</a>)</li>
<li>Reduced VARIANT schema memory consumption in Storage-Compute Separation mode (<a href=https://github.com/apache/doris/pull/47629 target=_blank rel="noopener noreferrer">#47629</a> <a href=https://github.com/apache/doris/pull/48463 target=_blank rel="noopener noreferrer">#48463</a>)</li>
<li>Fixed PreparedStatement ID overflow (<a href=https://github.com/apache/doris/pull/48116 target=_blank rel="noopener noreferrer">#48116</a>)</li>
<li>Fixed row storage with DELETE operations (<a href=https://github.com/apache/doris/pull/49609 target=_blank rel="noopener noreferrer">#49609</a>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=inverted-index>Inverted Index<a href=#inverted-index class=hash-link aria-label="Direct link to Inverted Index" title="Direct link to Inverted Index">​</a></h3>
<ul>
<li>Fixed ARRAY type null bitmap handling (<a href=https://github.com/apache/doris/pull/48052 target=_blank rel="noopener noreferrer">#48052</a>)</li>
<li>Fixed Date/Datetimev1 Bloomfilter comparison (<a href=https://github.com/apache/doris/pull/47005 target=_blank rel="noopener noreferrer">#47005</a>)</li>
<li>Fixed UTF-8 4-byte character truncation (<a href=https://github.com/apache/doris/pull/48792 target=_blank rel="noopener noreferrer">#48792</a>)</li>
<li>Fixed index loss after immediate column addition (<a href=https://github.com/apache/doris/pull/48547 target=_blank rel="noopener noreferrer">#48547</a>)</li>
<li>Fixed empty data handling in ARRAY inverted index (<a href=https://github.com/apache/doris/pull/48264 target=_blank rel="noopener noreferrer">#48264</a>)</li>
<li>Improved FE metadata upgrade compatibility (<a href=https://github.com/apache/doris/pull/49283 target=_blank rel="noopener noreferrer">#49283</a>)</li>
<li>Fixed <code>match_phrase_prefix</code> cache error (<a href=https://github.com/apache/doris/pull/46517 target=_blank rel="noopener noreferrer">#46517</a>)</li>
<li>Fixed file cache cleanup after compaction (<a href=https://github.com/apache/doris/pull/49738 target=_blank rel="noopener noreferrer">#49738</a>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=security-1>Security<a href=#security-1 class=hash-link aria-label="Direct link to Security" title="Direct link to Security">​</a></h3>
<ul>
<li>Removed Select_Priv check for DELETE operations (<a href=https://github.com/apache/doris/pull/49239 target=_blank rel="noopener noreferrer">#49239</a>)</li>
<li>Prevented non-root users from modifying root privileges (<a href=https://github.com/apache/doris/pull/48752 target=_blank rel="noopener noreferrer">#48752</a>)</li>
<li>Fixed intermittent LDAP PartialResultException (<a href=https://github.com/apache/doris/pull/47858 target=_blank rel="noopener noreferrer">#47858</a>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=others-1>Others<a href=#others-1 class=hash-link aria-label="Direct link to Others" title="Direct link to Others">​</a></h3>
<ul>
<li>Fixed JAVA_OPTS_FOR_JDK_17 recognition (<a href=https://github.com/apache/doris/pull/48170 target=_blank rel="noopener noreferrer">#48170</a>)</li>
<li>Fixed BDB metadata write failure caused by InterruptException (<a href=https://github.com/apache/doris/pull/47874 target=_blank rel="noopener noreferrer">#47874</a>)</li>
<li>Improved SQL hash generation for multi-statement requests (<a href=https://github.com/apache/doris/pull/48242 target=_blank rel="noopener noreferrer">#48242</a>)</li>
<li>User attribute variables now override session variables (<a href=https://github.com/apache/doris/pull/48548 target=_blank rel="noopener noreferrer">#48548</a>)</li>
</ul></div></div></article><article class=margin-bottom--xl itemprop=blogPost itemscope itemtype=http://schema.org/BlogPosting><div class=markdown itemprop=articleBody><header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href=/blog/>Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class=s-tags><span class=s-tag>Release Notes</span></span></span></div><h2 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop=headline><a itemprop=url href=/blog/release-note-2.1.9/>Apache Doris 2.1.9 released</a></h2><div class="blog-info text-center flex justify-center text-sm text-black"><span class=authors><span class="s-author text-black">Apache Doris</span></span><time datetime=2025-04-03T00:00:00.000Z itemprop=datePublished class="text-black ml-4">April 3, 2025</time></div></header><div class=markdown itemprop=articleBody><p>Dear Community, <strong>Apache Doris version 2.1.9 is now available</strong>, featuring improved SQLHash calculation, enhanced query results accuracy, and new metrics for better storage management. This update also resolves critical bugs across multiple areas for a more robust data management experience.</p>
<ul>
<li>
<p><a href=https://doris.apache.org/download target=_blank rel="noopener noreferrer">Quick Download</a></p>
</li>
<li>
<p><a href=https://github.com/apache/doris/releases/tag/2.1.9-rc02 target=_blank rel="noopener noreferrer">GitHub Release</a></p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=behavior-changes>Behavior Changes<a href=#behavior-changes class=hash-link aria-label="Direct link to Behavior Changes" title="Direct link to Behavior Changes">​</a></h2>
<ul>
<li>The SQLHash in Audit Log is now accurately calculated per SQL query, resolving the issue of identical hashes in a single request. <a href=https://github.com/apache/doris/pull/48242 target=_blank rel="noopener noreferrer">#48242</a></li>
<li>Query results match ColumnLabelName exactly. <a href=https://github.com/apache/doris/pull/47093 target=_blank rel="noopener noreferrer">#47093</a></li>
<li>User property variables now take precedence over session variables. <a href=https://github.com/apache/doris/pull/47185 target=_blank rel="noopener noreferrer">#47185</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=new-features>New Features<a href=#new-features class=hash-link aria-label="Direct link to New Features" title="Direct link to New Features">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=storage-management>Storage Management<a href=#storage-management class=hash-link aria-label="Direct link to Storage Management" title="Direct link to Storage Management">​</a></h3>
<ul>
<li>Disallow renaming partition columns. <a href=https://github.com/apache/doris/pull/47596 target=_blank rel="noopener noreferrer">#47596</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=others>Others<a href=#others class=hash-link aria-label="Direct link to Others" title="Direct link to Others">​</a></h3>
<ul>
<li>Added FE monitoring metrics for Catalogs, Databases, and Tables counts. <a href=https://github.com/apache/doris/pull/47891 target=_blank rel="noopener noreferrer">#47891</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=improvements>Improvements<a href=#improvements class=hash-link aria-label="Direct link to Improvements" title="Direct link to Improvements">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=inverted-index>Inverted Index<a href=#inverted-index class=hash-link aria-label="Direct link to Inverted Index" title="Direct link to Inverted Index">​</a></h3>
<ul>
<li>Support for ARRAY type in VARIANT inverted indexes. <a href=https://github.com/apache/doris/pull/47688 target=_blank rel="noopener noreferrer">#47688</a></li>
<li>Profile now shows performance metrics for each filter condition. <a href=https://github.com/apache/doris/pull/47504 target=_blank rel="noopener noreferrer">#47504</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=query-optimizer>Query Optimizer<a href=#query-optimizer class=hash-link aria-label="Direct link to Query Optimizer" title="Direct link to Query Optimizer">​</a></h3>
<ul>
<li>Support for using <code>SELECT *</code> in aggregate queries with only aggregation key columns. <a href=https://github.com/apache/doris/pull/48006 target=_blank rel="noopener noreferrer">#48006</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=storage-management-1>Storage Management<a href=#storage-management-1 class=hash-link aria-label="Direct link to Storage Management" title="Direct link to Storage Management">​</a></h3>
<ul>
<li>Enhanced CCR for binlog recycling and small file transfer efficiency, and robustness in chaotic environments. <a href=https://github.com/apache/doris/pull/47547 target=_blank rel="noopener noreferrer">#47547</a> <a href=https://github.com/apache/doris/pull/47313 target=_blank rel="noopener noreferrer">#47313</a> <a href=https://github.com/apache/doris/pull/45061 target=_blank rel="noopener noreferrer">#45061</a></li>
<li>Enhanced import error messages to be more specific. <a href=https://github.com/apache/doris/pull/47918 target=_blank rel="noopener noreferrer">#47918</a> <a href=https://github.com/apache/doris/pull/47470 target=_blank rel="noopener noreferrer">#47470</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=bug-fixes>Bug Fixes<a href=#bug-fixes class=hash-link aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=lakehouse>Lakehouse<a href=#lakehouse class=hash-link aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">​</a></h3>
<ul>
<li>Fixed BE krb5.conf path configuration issue. <a href=https://github.com/apache/doris/pull/47679 target=_blank rel="noopener noreferrer">#47679</a></li>
<li>Prevented <code>SELECT OUTFILE</code> statement retries to avoid duplicate data export. <a href=https://github.com/apache/doris/pull/48095 target=_blank rel="noopener noreferrer">#48095</a></li>
<li>Fixed JAVA API access to Paimon tables. <a href=https://github.com/apache/doris/pull/47192 target=_blank rel="noopener noreferrer">#47192</a></li>
<li>Resolved writing to Hive tables with <code>s3a://</code> storage location. <a href=https://github.com/apache/doris/pull/47162 target=_blank rel="noopener noreferrer">#47162</a></li>
<li>Fixed the issue of Catalog's Comment field not being persisted. <a href=https://github.com/apache/doris/pull/46946 target=_blank rel="noopener noreferrer">#46946</a></li>
<li>Addressed JDBC BE class loading leaks under certain conditions. <a href=https://github.com/apache/doris/pull/46912 target=_blank rel="noopener noreferrer">#46912</a></li>
<li>Resolved high version ClickHouse JDBC Driver compatibility with JDBC Catalog. <a href=https://github.com/apache/doris/pull/46026 target=_blank rel="noopener noreferrer">#46026</a></li>
<li>Fixed BE crash when reading Iceberg Position Delete. <a href=https://github.com/apache/doris/pull/47977 target=_blank rel="noopener noreferrer">#47977</a></li>
<li>Corrected reading MaxCompute table data under multi-partition columns. <a href=https://github.com/apache/doris/pull/48325 target=_blank rel="noopener noreferrer">#48325</a></li>
<li>Fixed reading Parquet complex column types errors. <a href=https://github.com/apache/doris/pull/47734 target=_blank rel="noopener noreferrer">#47734</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=inverted-index-1>Inverted Index<a href=#inverted-index-1 class=hash-link aria-label="Direct link to Inverted Index" title="Direct link to Inverted Index">​</a></h3>
<ul>
<li>Fixed ARRAY type inverted index null value handling. <a href=https://github.com/apache/doris/pull/48231 target=_blank rel="noopener noreferrer">#48231</a></li>
<li>Resolved <code>BUILD INDEX</code> exception for newly added columns. <a href=https://github.com/apache/doris/pull/48389 target=_blank rel="noopener noreferrer">#48389</a></li>
<li>Corrected UTF8 encoding index truncation issues leading to errors. <a href=https://github.com/apache/doris/pull/48657 target=_blank rel="noopener noreferrer">#48657</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=semi-structured-data-types>Semi-structured Data Types<a href=#semi-structured-data-types class=hash-link aria-label="Direct link to Semi-structured Data Types" title="Direct link to Semi-structured Data Types">​</a></h3>
<ul>
<li>Fixed <code>array_agg</code> function crashes under special conditions. <a href=https://github.com/apache/doris/pull/46927 target=_blank rel="noopener noreferrer">#46927</a></li>
<li>Resolved JSON import crashes due to incorrect chunk parameters. <a href=https://github.com/apache/doris/pull/48196 target=_blank rel="noopener noreferrer">#48196</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=query-optimizer-1>Query Optimizer<a href=#query-optimizer-1 class=hash-link aria-label="Direct link to Query Optimizer" title="Direct link to Query Optimizer">​</a></h3>
<ul>
<li>Fixed constant folding issues with nested time functions like <code>current_date</code>. <a href=https://github.com/apache/doris/pull/47288 target=_blank rel="noopener noreferrer">#47288</a></li>
<li>Addressed non-deterministic function result errors. <a href=https://github.com/apache/doris/pull/48321 target=_blank rel="noopener noreferrer">#48321</a></li>
<li>Resolved <code>CREATE TABLE LIKE</code> execution issues with on update column properties. <a href=https://github.com/apache/doris/pull/48007 target=_blank rel="noopener noreferrer">#48007</a></li>
<li>Fixed unexpected planning errors for materialized views of aggregate model tables. <a href=https://github.com/apache/doris/pull/47658 target=_blank rel="noopener noreferrer">#47658</a></li>
<li>Resolved <code>PreparedStatement</code> exceptions due to internal ID overflow. <a href=https://github.com/apache/doris/pull/47950 target=_blank rel="noopener noreferrer">#47950</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=query-execution-engine>Query Execution Engine<a href=#query-execution-engine class=hash-link aria-label="Direct link to Query Execution Engine" title="Direct link to Query Execution Engine">​</a></h3>
<ul>
<li>Resolved query hang or null pointer issues when querying system tables. <a href=https://github.com/apache/doris/pull/48370 target=_blank rel="noopener noreferrer">#48370</a></li>
<li>Added DOUBLE type support for LEAD/LAG functions. <a href=https://github.com/apache/doris/pull/47940 target=_blank rel="noopener noreferrer">#47940</a></li>
<li>Fixed query errors when <code>case when</code> conditions exceed 256. <a href=https://github.com/apache/doris/pull/47179 target=_blank rel="noopener noreferrer">#47179</a></li>
<li>Corrected <code>str_to_date</code> function errors with spaces. <a href=https://github.com/apache/doris/pull/48920 target=_blank rel="noopener noreferrer">#48920</a></li>
<li>Fixed <code>split_part</code> function errors during constant folding with <code>||</code>. <a href=https://github.com/apache/doris/pull/48910 target=_blank rel="noopener noreferrer">#48910</a></li>
<li>Corrected <code>log</code> function result errors. <a href=https://github.com/apache/doris/pull/47228 target=_blank rel="noopener noreferrer">#47228</a></li>
<li>Resolved core dump issues with <code>array</code> / <code>map</code> functions in lambda expressions. <a href=https://github.com/apache/doris/pull/49140 target=_blank rel="noopener noreferrer">#49140</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=storage-management-2>Storage Management<a href=#storage-management-2 class=hash-link aria-label="Direct link to Storage Management" title="Direct link to Storage Management">​</a></h3>
<ul>
<li>Fixed memory corruption issues during import of aggregate tables. <a href=https://github.com/apache/doris/pull/47523 target=_blank rel="noopener noreferrer">#47523</a></li>
<li>Resolved occasional core dump during MoW import under memory pressure. <a href=https://github.com/apache/doris/pull/47715 target=_blank rel="noopener noreferrer">#47715</a></li>
<li>Fixed potential duplicate key issues with MoW during BE restart and schema change. <a href=https://github.com/apache/doris/pull/48056 target=_blank rel="noopener noreferrer">#48056</a> <a href=https://github.com/apache/doris/pull/48775 target=_blank rel="noopener noreferrer">#48775</a></li>
<li>Corrected group commit and global column update issues with memtable promotion. <a href=https://github.com/apache/doris/pull/48120 target=_blank rel="noopener noreferrer">#48120</a> <a href=https://github.com/apache/doris/pull/47968 target=_blank rel="noopener noreferrer">#47968</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=permission-management>Permission Management<a href=#permission-management class=hash-link aria-label="Direct link to Permission Management" title="Direct link to Permission Management">​</a></h3>
<ul>
<li>No longer throws PartialResultException when using LDAP. <a href=https://github.com/apache/doris/pull/47858 target=_blank rel="noopener noreferrer">#47858</a></li>
</ul></div></div></article><article class=margin-bottom--xl itemprop=blogPost itemscope itemtype=http://schema.org/BlogPosting><div class=markdown itemprop=articleBody><header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href=/blog/>Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class=s-tags><span class=s-tag>Release Notes</span></span></span></div><h2 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop=headline><a itemprop=url href=/blog/release-note-3.0.4/>Apache Doris 3.0.4 Released</a></h2><div class="blog-info text-center flex justify-center text-sm text-black"><span class=authors><span class="s-author text-black">Apache Doris</span></span><time datetime=2025-02-28T00:00:00.000Z itemprop=datePublished class="text-black ml-4">February 28, 2025</time></div></header><div class=markdown itemprop=articleBody><p>Dear community members, the Apache Doris 3.0.4 version was officially released on February 02, 2025, this version further enhances the performance and stability of the system.</p>
<ul>
<li>
<p><a href=https://doris.apache.org/download/ target=_blank rel="noopener noreferrer">Quick Download</a></p>
</li>
<li>
<p><a href=https://github.com/apache/doris/releases target=_blank rel="noopener noreferrer">GitHub Release</a></p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=behavior-changes>Behavior Changes<a href=#behavior-changes class=hash-link aria-label="Direct link to Behavior Changes" title="Direct link to Behavior Changes">​</a></h2>
<ul>
<li>
<p>In the Audit log, the <code>force</code> flag is retained for <code>drop table</code> and <code>drop database</code> statements.  <a href=https://github.com/apache/doris/pull/43227 target=_blank rel="noopener noreferrer">#43227</a></p>
</li>
<li>
<p>When exporting data to Parquet/ORC formats, the <code>bitmap</code>, <code>quantile_state</code>, and <code>hll</code> types are exported in Binary format. Additionally, support has been added for exporting <code>jsonb</code> and <code>variant</code> types, which are exported as <code>string</code>. <a href=https://github.com/apache/doris/pull/44041 target=_blank rel="noopener noreferrer">#44041</a></p>
<ul>
<li>For more information, please refer to documentation: <a href=https://doris.apache.org/docs/3.0/data-operate/export/export-overview target=_blank rel="noopener noreferrer">Export Overview - Apache Doris</a></li>
</ul>
</li>
<li>
<p>When querying a data source with case-insensitive table names (such as Hive) through External Catalog, in previous versions, you can use any case to query the table name, but in version 3.0.4, Doris's own table name case sensitivity policy will be strictly followed.</p>
</li>
<li>
<p>The Hudi JNI Scanner has been replaced from Spark API to Hadoop API to enhance compatibility. Users can switch by setting the session variable <code>set hudi_jni_scanner=spark/hadoop</code>. <a href=https://github.com/apache/doris/pull/44396 target=_blank rel="noopener noreferrer">#44396</a></p>
</li>
<li>
<p>The use of <code>auto bucket</code> in Colocate tables is prohibited.  <a href=https://github.com/apache/doris/pull/44396 target=_blank rel="noopener noreferrer">#44396</a></p>
</li>
<li>
<p>Paimon cache has been added to the Catalog, eliminating real-time data queries.  <a href=https://github.com/apache/doris/pull/44911 target=_blank rel="noopener noreferrer">#44911 </a></p>
</li>
<li>
<p>The default value of <code>max_broker_concurrency</code> has been increased to improve performance for large-scale data imports with Broker Load. <a href=https://github.com/apache/doris/pull/44929 target=_blank rel="noopener noreferrer">#44929</a></p>
</li>
<li>
<p>The default value of the <code>storage medium</code> for Auto Partition partitions has been changed to the attribute value of the current table's <code>storage medium</code>, rather than using the system default value. <a href=https://github.com/apache/doris/pull/45955 target=_blank rel="noopener noreferrer">#45955</a></p>
</li>
<li>
<p>Column updates are prohibited during Schema Change execution for Key columns. <a href=https://github.com/apache/doris/pull/46347 target=_blank rel="noopener noreferrer">#46347</a></p>
</li>
<li>
<p>For Key columns containing auto-increment columns, support has been added to allow column updates without providing the auto-increment column.  <a href=https://github.com/apache/doris/pull/44528 target=_blank rel="noopener noreferrer">#44528</a></p>
</li>
<li>
<p>The FE ID generator strategy has been switched to a time-based approach, and IDs no longer start from 10000. <a href=https://github.com/apache/doris/pull/44790 target=_blank rel="noopener noreferrer">#44790</a></p>
</li>
<li>
<p>In the compute-storage separation mode, the default stale rowset recycling delay for Compaction has been reduced to 1800 seconds to decrease the recycling interval. This may cause large queries to fail in extreme scenarios, and adjustments can be made as needed. <a href=https://github.com/apache/doris/pull/45460 target=_blank rel="noopener noreferrer">#45460</a></p>
</li>
<li>
<p>The <code>show cache hotspot</code> statement has been disabled in compute-storage separation mode, and direct access to system tables is required. <a href=https://github.com/apache/doris/pull/47332 target=_blank rel="noopener noreferrer">#47332</a></p>
</li>
<li>
<p>Deleting the system-created <code>admin</code> user is prohibited. <a href=https://github.com/apache/doris/pull/44751 target=_blank rel="noopener noreferrer">#44751</a></p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=improvements>Improvements<a href=#improvements class=hash-link aria-label="Direct link to Improvements" title="Direct link to Improvements">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=storage>Storage<a href=#storage class=hash-link aria-label="Direct link to Storage" title="Direct link to Storage">​</a></h3>
<ul>
<li>Optimized the issue of Routine Load tasks frequently timing out due to a small <code>max_match_interval</code> setting. <a href=https://github.com/apache/doris/pull/46292 target=_blank rel="noopener noreferrer">#46292</a></li>
<li>Improved performance for Broker Load when importing multiple compressed files. <a href=https://github.com/apache/doris/pull/43975 target=_blank rel="noopener noreferrer">#43975</a></li>
<li>Increased the default value of <code>webserver_num_workers</code> to enhance Stream Load performance. <a href=https://github.com/apache/doris/pull/46593 target=_blank rel="noopener noreferrer">#46593</a></li>
<li>Optimized the load imbalance issue for Routine Load import tasks during BE node scaling. <a href=https://github.com/apache/doris/pull/44798 target=_blank rel="noopener noreferrer">#44798</a></li>
<li>Improved the use of Routine Load thread pools to prevent timeouts from affecting queries. <a href=https://github.com/apache/doris/pull/45039 target=_blank rel="noopener noreferrer">#45039</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=compute-storage-separation>Compute-Storage Separation<a href=#compute-storage-separation class=hash-link aria-label="Direct link to Compute-Storage Separation" title="Direct link to Compute-Storage Separation">​</a></h3>
<ul>
<li>Enhanced the stability and observability of the Meta-service. <a href=https://github.com/apache/doris/pull/44036 target=_blank rel="noopener noreferrer">#44036</a>, <a href=https://github.com/apache/doris/pull/45617 target=_blank rel="noopener noreferrer">#45617</a>, <a href=https://github.com/apache/doris/pull/45255 target=_blank rel="noopener noreferrer">#45255</a>, <a href=https://github.com/apache/doris/pull/45068 target=_blank rel="noopener noreferrer">#45068</a></li>
<li>Optimized File Cache by adding an early eviction strategy, reducing lock time, and improving query performance. <a href=https://github.com/apache/doris/pull/47473 target=_blank rel="noopener noreferrer">#47473</a>, <a href=https://github.com/apache/doris/pull/45678 target=_blank rel="noopener noreferrer">#45678</a>, <a href=https://github.com/apache/doris/pull/47472 target=_blank rel="noopener noreferrer">#47472</a></li>
<li>Improved initialization checks and queue transitions for File Cache to enhance stability. <a href=https://github.com/apache/doris/pull/44004 target=_blank rel="noopener noreferrer">#44004</a>, <a href=https://github.com/apache/doris/pull/44429 target=_blank rel="noopener noreferrer">#44429</a>, <a href=https://github.com/apache/doris/pull/45057 target=_blank rel="noopener noreferrer">#45057</a>, <a href=https://github.com/apache/doris/pull/47229 target=_blank rel="noopener noreferrer">#47229</a></li>
<li>Increased the speed of HDFS data recycling. <a href=https://github.com/apache/doris/pull/46393 target=_blank rel="noopener noreferrer">#46393</a></li>
<li>Optimized performance issues when the FE acquires compute groups during ultra-high-frequency imports.  <a href=https://github.com/apache/doris/pull/47203 target=_blank rel="noopener noreferrer">#47203</a></li>
<li>Improved several import-related parameters for primary key tables in compute-storage separation to enhance the stability of real-time high-concurrency imports. <a href=https://github.com/apache/doris/pull/47295 target=_blank rel="noopener noreferrer">#47295</a>, <a href=https://github.com/apache/doris/pull/46750 target=_blank rel="noopener noreferrer">#46750</a>, <a href=https://github.com/apache/doris/pull/46365 target=_blank rel="noopener noreferrer">#46365</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=lakehouse>Lakehouse<a href=#lakehouse class=hash-link aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">​</a></h3>
<ul>
<li>
<p>Supported reading Hive tables in JSON format. <a href=https://github.com/apache/doris/pull/46393 target=_blank rel="noopener noreferrer">#43469</a></p>
<ul>
<li>For more information, please refer to documentation: <a href=https://doris.apache.org/docs/dev/lakehouse/file-formats/text#json target=_blank rel="noopener noreferrer">Text/CSV/JSON - Apache Doris</a></li>
</ul>
</li>
<li>
<p>Introduced the session variable <code>enable_text_validate_utf8</code> to skip UTF-8 encoding checks for CSV formats.  <a href=https://github.com/apache/doris/pull/45537 target=_blank rel="noopener noreferrer">#45537</a></p>
<ul>
<li>For more information, please refer to documentation: <a href=https://doris.apache.org/docs/dev/lakehouse/file-formats/text#character-set target=_blank rel="noopener noreferrer">Text/CSV/JSON - Apache Doris</a></li>
</ul>
</li>
<li>
<p>Updated the Hudi version to 0.15 and optimized query planning performance for Hudi tables.</p>
</li>
<li>
<p>Improved read performance for MaxCompute partitioned tables.  <a href=https://github.com/apache/doris/pull/45148 target=_blank rel="noopener noreferrer">#45148</a></p>
</li>
<li>
<p>Optimized performance for Parquet file delayed materialization under high filter rates.  <a href=https://github.com/apache/doris/pull/46183 target=_blank rel="noopener noreferrer">#46183</a></p>
</li>
<li>
<p>Supported delayed materialization for complex Parquet types. <a href=https://github.com/apache/doris/pull/44098 target=_blank rel="noopener noreferrer">#44098</a></p>
</li>
<li>
<p>Optimized predicate pushdown logic for ORC types, supporting more predicate conditions for index filtering. <a href=https://github.com/apache/doris/pull/43255 target=_blank rel="noopener noreferrer">#43255</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=asynchronous-materialized-views>Asynchronous Materialized Views<a href=#asynchronous-materialized-views class=hash-link aria-label="Direct link to Asynchronous Materialized Views" title="Direct link to Asynchronous Materialized Views">​</a></h3>
<ul>
<li>Supported more scenarios for aggregate roll-up rewriting.  <a href=https://github.com/apache/doris/pull/44412 target=_blank rel="noopener noreferrer">#44412</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=query-optimizer>Query Optimizer<a href=#query-optimizer class=hash-link aria-label="Direct link to Query Optimizer" title="Direct link to Query Optimizer">​</a></h3>
<ul>
<li>Improved partition pruning performance. <a href=https://github.com/apache/doris/pull/46261 target=_blank rel="noopener noreferrer">#46261</a></li>
<li>Added rules to eliminate <code>group by</code> keys based on data characteristics.  <a href=https://github.com/apache/doris/pull/43391 target=_blank rel="noopener noreferrer">#43391</a></li>
<li>Adaptively adjusted the wait time for Runtime Filters based on the target table size. <a href=https://github.com/apache/doris/pull/42640 target=_blank rel="noopener noreferrer">#42640</a></li>
<li>Improved the ability to push down aggregations in joins to fit more scenarios. <a href=https://github.com/apache/doris/pull/43856 target=_blank rel="noopener noreferrer">#43856</a>, <a href=https://github.com/apache/doris/pull/43380 target=_blank rel="noopener noreferrer">#43380</a></li>
<li>Improved Limit pushdown for aggregations to fit more scenarios. <a href=https://github.com/apache/doris/pull/44042 target=_blank rel="noopener noreferrer">#44042</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=others>Others<a href=#others class=hash-link aria-label="Direct link to Others" title="Direct link to Others">​</a></h3>
<ul>
<li>Optimized startup scripts for FE, BE, and MS processes to provide clearer output. <a href=https://github.com/apache/doris/pull/45610 target=_blank rel="noopener noreferrer">#45610</a>, <a href=https://github.com/apache/doris/pull/45490 target=_blank rel="noopener noreferrer">#45490</a>, <a href=https://github.com/apache/doris/pull/45883 target=_blank rel="noopener noreferrer">#45883</a></li>
<li>The case sensitivity of table names in <code>show tables</code> now matches MySQL behavior. <a href=https://github.com/apache/doris/pull/46030 target=_blank rel="noopener noreferrer">#46030</a></li>
<li><code>show index</code> now supports arbitrary target table types. <a href=https://github.com/apache/doris/pull/45861 target=_blank rel="noopener noreferrer">#45861</a></li>
<li><code>information_schema.columns</code> now supports displaying default values. <a href=https://github.com/apache/doris/pull/44849 target=_blank rel="noopener noreferrer">#44849</a></li>
<li><code>information_schema.views</code> now supports displaying view definitions. <a href=https://github.com/apache/doris/pull/45857 target=_blank rel="noopener noreferrer">#45857</a></li>
<li>Supported the MySQL protocol <code>COM_RESET_CONNECTION</code> command. <a href=https://github.com/apache/doris/pull/44747 target=_blank rel="noopener noreferrer">#44747</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=bug-fixes>Bug Fixes<a href=#bug-fixes class=hash-link aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=storage-1>Storage<a href=#storage-1 class=hash-link aria-label="Direct link to Storage" title="Direct link to Storage">​</a></h3>
<ul>
<li>Fixed potential memory errors during the import process for aggregate table models.  <a href=https://github.com/apache/doris/pull/46997 target=_blank rel="noopener noreferrer">#46997</a></li>
<li>Resolved the issue of Routine Load offset loss during FE master node restarts in compute-storage separation mode. <a href=https://github.com/apache/doris/pull/46566 target=_blank rel="noopener noreferrer">#46566</a></li>
<li>Fixed memory leaks in FE Observer nodes during batch import scenarios in compute-storage mode. <a href=https://github.com/apache/doris/pull/47244 target=_blank rel="noopener noreferrer">#47244</a></li>
<li>Resolved the issue of Cumulative Point rollback during Full Compaction with Order Data Compaction. <a href=https://github.com/apache/doris/pull/44359 target=_blank rel="noopener noreferrer">#44359</a></li>
<li>Fixed the issue where Delete operations could temporarily prevent Tablet Compaction scheduling. <a href=https://github.com/apache/doris/pull/43466 target=_blank rel="noopener noreferrer">#43466</a></li>
<li>Resolved incorrect Tablet states after Schema Change in multi-compute-cluster scenarios. <a href=https://github.com/apache/doris/pull/45821 target=_blank rel="noopener noreferrer">#45821</a></li>
<li>Fixed the potential NPE error when performing Column Rename Schema Change on primary key tables with <code>sequence_type</code>. <a href=https://github.com/apache/doris/pull/46906 target=_blank rel="noopener noreferrer">#46906</a></li>
<li><strong>Data Correctness</strong>: Fixed correctness issues for primary key tables when importing partial column updates containing DELETE SIGN columns. <a href=https://github.com/apache/doris/pull/46194 target=_blank rel="noopener noreferrer">#46194</a></li>
<li>Resolved potential memory leaks in FE when Publish tasks for primary key tables were continuously stuck. <a href=https://github.com/apache/doris/pull/44846 target=_blank rel="noopener noreferrer">#44846</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=compute-storage-decoupled>Compute-Storage Decoupled<a href=#compute-storage-decoupled class=hash-link aria-label="Direct link to Compute-Storage Decoupled" title="Direct link to Compute-Storage Decoupled">​</a></h3>
<ul>
<li>Fixed the issue where File Cache size could exceed the table data size. <a href=https://github.com/apache/doris/pull/46561 target=_blank rel="noopener noreferrer">#46561</a>, <a href=https://github.com/apache/doris/pull/46390 target=_blank rel="noopener noreferrer">#46390</a></li>
<li>Resolved upload failures at the 5MB boundary during data uploads.  <a href=https://github.com/apache/doris/pull/47333 target=_blank rel="noopener noreferrer">#47333</a></li>
<li>Enhanced robustness by adding more parameter checks for several <code>alter</code> operations in Storage Vault.  <a href=https://github.com/apache/doris/pull/45155 target=_blank rel="noopener noreferrer">#45155</a>, <a href=https://github.com/apache/doris/pull/45156 target=_blank rel="noopener noreferrer">#45156</a>, <a href=https://github.com/apache/doris/pull/46625 target=_blank rel="noopener noreferrer">#46625</a>, <a href=https://github.com/apache/doris/pull/47078 target=_blank rel="noopener noreferrer">#47078</a>, <a href=https://github.com/apache/doris/pull/45685 target=_blank rel="noopener noreferrer">#45685</a>, <a href=https://github.com/apache/doris/pull/46779 target=_blank rel="noopener noreferrer">#46779</a></li>
<li>Resolved issues with data recycling failures or slow recycling due to improper Storage Vault configurations. <a href=https://github.com/apache/doris/pull/46798 target=_blank rel="noopener noreferrer">#46798</a>, <a href=https://github.com/apache/doris/pull/47536 target=_blank rel="noopener noreferrer">#47536</a>, <a href=https://github.com/apache/doris/pull/47475 target=_blank rel="noopener noreferrer">#47475</a>, <a href=https://github.com/apache/doris/pull/47324 target=_blank rel="noopener noreferrer">#47324</a>, <a href=https://github.com/apache/doris/pull/45072 target=_blank rel="noopener noreferrer">#45072</a></li>
<li>Fixed the issue where data recycling could stall, preventing timely recycling.  <a href=https://github.com/apache/doris/pull/45760 target=_blank rel="noopener noreferrer">#45760</a></li>
<li>Resolved incorrect retries for MTTM-230 errors in compute-storage separation mode.  <a href=https://github.com/apache/doris/pull/47370 target=_blank rel="noopener noreferrer">#47370</a>, <a href=https://github.com/apache/doris/pull/47326 target=_blank rel="noopener noreferrer">#47326</a></li>
<li>Fixed the issue where Group Commit WAL was not fully replayed during BE decommissioning in compute-storage separation mode.  <a href=https://github.com/apache/doris/pull/47187 target=_blank rel="noopener noreferrer">#47187</a></li>
<li>Resolved the issue where Tablet Meta exceeding 2GB rendered MS unavailable.  <a href=https://github.com/apache/doris/pull/44780 target=_blank rel="noopener noreferrer">#44780</a></li>
<li><strong>Data Correctness</strong>: Fixed two duplicate Key issues in primary key tables in compute-storage separation mode. <a href=https://github.com/apache/doris/pull/46039 target=_blank rel="noopener noreferrer">#46039</a>, <a href=https://github.com/apache/doris/pull/44975 target=_blank rel="noopener noreferrer">#44975</a></li>
<li>Resolved the issue where Base Compaction could continuously fail due to large Delete Bitmaps in primary key tables during high-frequency real-time imports.  <a href=https://github.com/apache/doris/pull/46969 target=_blank rel="noopener noreferrer">#46969</a></li>
<li>Modified incorrect retry logic for Schema Change in primary key tables in compute-storage separation mode to enhance robustness. <a href=https://github.com/apache/doris/pull/46748 target=_blank rel="noopener noreferrer">#46748</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=lakehouse-1>Lakehouse<a href=#lakehouse-1 class=hash-link aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=hive>Hive<a href=#hive class=hash-link aria-label="Direct link to Hive" title="Direct link to Hive">​</a></h4>
<ul>
<li>Fixed the issue where Hive views created by Spark could not be queried.  <a href=https://github.com/apache/doris/pull/43553 target=_blank rel="noopener noreferrer">#43553</a></li>
<li>Resolved the issue where certain Hive Transaction tables could not be read correctly. <a href=https://github.com/apache/doris/pull/45753 target=_blank rel="noopener noreferrer">#45753</a></li>
<li>Fixed the issue where partition pruning failed for Hive tables with special characters in partitions.  <a href=https://github.com/apache/doris/pull/42906 target=_blank rel="noopener noreferrer">#42906</a></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=iceberg>Iceberg<a href=#iceberg class=hash-link aria-label="Direct link to Iceberg" title="Direct link to Iceberg">​</a></h4>
<ul>
<li>Fixed the issue where Iceberg tables could not be created in Kerberos authentication environments.  <a href=https://github.com/apache/doris/pull/43445 target=_blank rel="noopener noreferrer">#43445</a></li>
<li>Resolved the issue where <code>count(*)</code> queries were inaccurate for Iceberg tables with dangling deletes. <a href=https://github.com/apache/doris/pull/44039 target=_blank rel="noopener noreferrer">#44039</a></li>
<li>Fixed the issue where query errors occurred due to mismatched column names in Iceberg tables. <a href=https://github.com/apache/doris/pull/44470 target=_blank rel="noopener noreferrer">#44470</a></li>
<li>Resolved the issue where Iceberg tables could not be read after partition modifications. <a href=https://github.com/apache/doris/pull/45367 target=_blank rel="noopener noreferrer">#45367</a></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=paimon>Paimon<a href=#paimon class=hash-link aria-label="Direct link to Paimon" title="Direct link to Paimon">​</a></h4>
<ul>
<li>Fixed the issue where Paimon Catalog could not access Alibaba Cloud OSS-HDFS.  <a href=https://github.com/apache/doris/pull/42585 target=_blank rel="noopener noreferrer">#42585</a></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=hudi>Hudi<a href=#hudi class=hash-link aria-label="Direct link to Hudi" title="Direct link to Hudi">​</a></h4>
<ul>
<li>Fixed the issue where partition pruning failed for Hudi tables in certain scenarios.  <a href=https://github.com/apache/doris/pull/44669 target=_blank rel="noopener noreferrer">#44669</a></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=jdbc>JDBC<a href=#jdbc class=hash-link aria-label="Direct link to JDBC" title="Direct link to JDBC">​</a></h4>
<ul>
<li>Fixed the issue where tables could not be retrieved using JDBC Catalog after enabling case-insensitive table names.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=maxcompute>MaxCompute<a href=#maxcompute class=hash-link aria-label="Direct link to MaxCompute" title="Direct link to MaxCompute">​</a></h4>
<ul>
<li>Fixed the issue where partition pruning failed for MaxCompute tables in certain scenarios. <a href=https://github.com/apache/doris/pull/44508 target=_blank rel="noopener noreferrer">#44508</a></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=others-1>Others<a href=#others-1 class=hash-link aria-label="Direct link to Others" title="Direct link to Others">​</a></h4>
<ul>
<li>Fixed the issue where export tasks caused memory leaks in FE. <a href=https://github.com/apache/doris/pull/44019 target=_blank rel="noopener noreferrer">#44019</a></li>
<li>Resolved the issue where S3 object storage could not be accessed via HTTPS protocol. <a href=https://github.com/apache/doris/pull/44242 target=_blank rel="noopener noreferrer">#44242</a></li>
<li>Fixed the issue where Kerberos authentication tickets could not be automatically refreshed.  <a href=https://github.com/apache/doris/pull/44916 target=_blank rel="noopener noreferrer">#44916</a></li>
<li>Resolved the issue where reading Hadoop Block compressed format files failed. <a href=https://github.com/apache/doris/pull/45289 target=_blank rel="noopener noreferrer">#45289</a></li>
<li>When querying ORC format data, CHAR type predicates are no longer pushed down to avoid potential result errors. <a href=https://github.com/apache/doris/pull/45484 target=_blank rel="noopener noreferrer">#45484</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=asynchronous-materialized-views-1>Asynchronous Materialized Views<a href=#asynchronous-materialized-views-1 class=hash-link aria-label="Direct link to Asynchronous Materialized Views" title="Direct link to Asynchronous Materialized Views">​</a></h3>
<ul>
<li>Fixed the issue where transparent query rewriting could lead to planning or result errors in extreme scenarios.  <a href=https://github.com/apache/doris/pull/44575 target=_blank rel="noopener noreferrer">#44575</a>, <a href=https://github.com/apache/doris/pull/45744 target=_blank rel="noopener noreferrer">#45744</a></li>
<li>Resolved the issue where multiple build tasks could be generated during asynchronous materialized view scheduling in extreme scenarios. <a href=https://github.com/apache/doris/pull/46020 target=_blank rel="noopener noreferrer">#46020</a>, <a href=https://github.com/apache/doris/pull/46280 target=_blank rel="noopener noreferrer">#46280</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=query-optimizer-1>Query Optimizer<a href=#query-optimizer-1 class=hash-link aria-label="Direct link to Query Optimizer" title="Direct link to Query Optimizer">​</a></h3>
<ul>
<li>Fixed the issue where some expression rewrites could produce incorrect expressions. <a href=https://github.com/apache/doris/pull/44770 target=_blank rel="noopener noreferrer">#44770</a>, <a href=https://github.com/apache/doris/pull/44920 target=_blank rel="noopener noreferrer">#44920</a>, <a href=https://github.com/apache/doris/pull/45922 target=_blank rel="noopener noreferrer">#45922</a>, <a href=https://github.com/apache/doris/pull/45596 target=_blank rel="noopener noreferrer">#45596</a></li>
<li>Resolved occasional incorrect results from SQL Cache. <a href=https://github.com/apache/doris/pull/44782 target=_blank rel="noopener noreferrer">#44782</a>, <a href=https://github.com/apache/doris/pull/44631 target=_blank rel="noopener noreferrer">#44631</a>, <a href=https://github.com/apache/doris/pull/46443 target=_blank rel="noopener noreferrer">#46443</a>, <a href=https://github.com/apache/doris/pull/47266 target=_blank rel="noopener noreferrer">#47266</a></li>
<li>Fixed the issue where limit pushdown for aggregation operators could produce incorrect results in some scenarios. <a href=https://github.com/apache/doris/pull/45369 target=_blank rel="noopener noreferrer">#45369</a></li>
<li>Resolved the issue where delayed materialization optimization could produce incorrect execution plans in some scenarios. <a href=https://github.com/apache/doris/pull/45693 target=_blank rel="noopener noreferrer">#45693</a>, <a href=https://github.com/apache/doris/pull/46551 target=_blank rel="noopener noreferrer">#46551</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=query-execution>Query Execution<a href=#query-execution class=hash-link aria-label="Direct link to Query Execution" title="Direct link to Query Execution">​</a></h3>
<ul>
<li>Fixed the issue where regular expressions and <code>like</code> functions produced incorrect results with special characters. <a href=https://github.com/apache/doris/pull/44547 target=_blank rel="noopener noreferrer">#44547</a></li>
<li>Resolved the issue where SQL Cache results could be incorrect when switching databases. <a href=https://github.com/apache/doris/pull/44782 target=_blank rel="noopener noreferrer">#44782</a></li>
<li>Fixed a series of Arrow Flight-related issues. <a href=https://github.com/apache/doris/pull/45023 target=_blank rel="noopener noreferrer">#45023</a>, <a href=https://github.com/apache/doris/pull/43929 target=_blank rel="noopener noreferrer">#43929</a></li>
<li>Resolved the issue where results were incorrect when the Hash table for HashJoin exceeded 4GB in some cases. <a href=https://github.com/apache/doris/pull/46461 target=_blank rel="noopener noreferrer">#46461</a></li>
<li>Fixed the overflow issue of the <code>convert_to</code> function with Chinese characters. <a href=https://github.com/apache/doris/pull/46405 target=_blank rel="noopener noreferrer">#46405</a></li>
<li>Resolved the issue where results could be incorrect in extreme scenarios when <code>group by</code> was used with Limit. <a href=https://github.com/apache/doris/pull/47844 target=_blank rel="noopener noreferrer">#47844</a></li>
<li>Fixed the issue where results could be incorrect when accessing certain system tables. <a href=https://github.com/apache/doris/pull/47498 target=_blank rel="noopener noreferrer">#47498</a></li>
<li>Resolved the issue where the <code>percentile</code> function could cause system crashes. <a href=https://github.com/apache/doris/pull/47068 target=_blank rel="noopener noreferrer">#47068</a></li>
<li>Fixed the performance degradation issue for single-table queries with Limit. <a href=https://github.com/apache/doris/pull/46090 target=_blank rel="noopener noreferrer">#46090</a></li>
<li>Resolved the issue where <code>StDistanceSphere</code> and <code>StAngleSphere</code> functions caused system crashes. <a href=https://github.com/apache/doris/pull/45508 target=_blank rel="noopener noreferrer">#45508</a></li>
<li>Fixed the issue where <code>map_agg</code> results were incorrect. <a href=https://github.com/apache/doris/pull/40454 target=_blank rel="noopener noreferrer">#40454</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=semi-structured-data-management>Semi-structured Data Management<a href=#semi-structured-data-management class=hash-link aria-label="Direct link to Semi-structured Data Management" title="Direct link to Semi-structured Data Management">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=bloomfilter-index>BloomFilter Index<a href=#bloomfilter-index class=hash-link aria-label="Direct link to BloomFilter Index" title="Direct link to BloomFilter Index">​</a></h4>
<ul>
<li>Fixed the exception caused by large parameters in BloomFilter Index. <a href=https://github.com/apache/doris/pull/45780 target=_blank rel="noopener noreferrer">#45780</a></li>
<li>Resolved the issue of high memory usage during BloomFilter Index writes. <a href=https://github.com/apache/doris/pull/45833 target=_blank rel="noopener noreferrer">#45833</a></li>
<li>Fixed the issue where BloomFilter Index was not correctly deleted when columns were dropped. <a href=https://github.com/apache/doris/pull/44361 target=_blank rel="noopener noreferrer">#44361</a>, <a href=https://github.com/apache/doris/pull/43378 target=_blank rel="noopener noreferrer">#43378</a></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=inverted-index>Inverted Index<a href=#inverted-index class=hash-link aria-label="Direct link to Inverted Index" title="Direct link to Inverted Index">​</a></h4>
<ul>
<li>Fixed the occasional crash during inverted index construction. <a href=https://github.com/apache/doris/pull/43246 target=_blank rel="noopener noreferrer">#43246</a></li>
<li>Resolved the issue where words with zero occurrences occupied space during inverted index merging. <a href=https://github.com/apache/doris/pull/43113 target=_blank rel="noopener noreferrer">#43113</a></li>
<li>Prevented abnormal large values in Index Size statistics. <a href=https://github.com/apache/doris/pull/46549 target=_blank rel="noopener noreferrer">#46549</a></li>
<li>Fixed the issue with inverted indexes for VARIANT type fields. <a href=https://github.com/apache/doris/pull/43375 target=_blank rel="noopener noreferrer">#43375</a></li>
<li>Optimized local cache locality for inverted indexes to improve cache hit rates. <a href=https://github.com/apache/doris/pull/46518 target=_blank rel="noopener noreferrer">#46518</a></li>
<li>Added the metric <code>NumInvertedIndexRemoteIOTotal</code> to query profiles for remote storage reads of inverted indexes. <a href=https://github.com/apache/doris/pull/45675 target=_blank rel="noopener noreferrer">#45675</a>, <a href=https://github.com/apache/doris/pull/44863 target=_blank rel="noopener noreferrer">#44863</a></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=others-2>Others<a href=#others-2 class=hash-link aria-label="Direct link to Others" title="Direct link to Others">​</a></h4>
<ul>
<li>Fixed the crash issue of the <code>ipv6_cidr_to_range</code> function with special NULL data. <a href=https://github.com/apache/doris/pull/44700 target=_blank rel="noopener noreferrer">#44700</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=permissions>Permissions<a href=#permissions class=hash-link aria-label="Direct link to Permissions" title="Direct link to Permissions">​</a></h3>
<ul>
<li>When granting <code>CREATE_PRIV</code>, the existence of the corresponding resource is no longer checked. <a href=https://github.com/apache/doris/pull/45125 target=_blank rel="noopener noreferrer">#45125</a></li>
<li>Fixed the issue where queries on views with permissions could fail due to missing permissions for referenced tables in extreme scenarios. <a href=https://github.com/apache/doris/pull/44621 target=_blank rel="noopener noreferrer">#44621</a></li>
<li>Resolved the issue where permission checks for <code>use db</code> did not distinguish between internal and external Catalogs. <a href=https://github.com/apache/doris/pull/45720 target=_blank rel="noopener noreferrer">#45720</a></li>
</ul></div></div></article><article class=margin-bottom--xl itemprop=blogPost itemscope itemtype=http://schema.org/BlogPosting><div class=markdown itemprop=articleBody><header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href=/blog/>Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class=s-tags><span class=s-tag>Release Notes</span></span></span></div><h2 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop=headline><a itemprop=url href=/blog/release-note-2.1.8/>Apache Doris 2.1.8 just released</a></h2><div class="blog-info text-center flex justify-center text-sm text-black"><span class=authors><span class="s-author text-black">Apache Doris</span></span><time datetime=2025-01-24T00:00:00.000Z itemprop=datePublished class="text-black ml-4">January 24, 2025</time></div></header><div class=markdown itemprop=articleBody><p>Dear Community, <strong>Apache Doris version 2.1.8 was officially released on January 24, 2025.</strong> This version introduces continuous upgrades and enhancements in several key areas, including Lakehouse, Asynchronous Materialized Views, Query Optimizer and Execution Engine, Storage Management, and more.</p>
<ul>
<li>
<p><a href=https://doris.apache.org/download target=_blank rel="noopener noreferrer">Quick Download</a></p>
</li>
<li>
<p><a href=https://github.com/apache/doris/releases/tag/2.1.8-rc01 target=_blank rel="noopener noreferrer">GitHub Release</a></p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=behavior-changes>Behavior Changes<a href=#behavior-changes class=hash-link aria-label="Direct link to Behavior Changes" title="Direct link to Behavior Changes">​</a></h2>
<ul>
<li>When querying a data source with case-insensitive table names (such as Hive) through External Catalog, in previous versions, you can use any case to query the table name, but in version 2.1.8, Doris's own table name case sensitivity policy will be strictly followed.</li>
<li>Add the environment variable <code>SKIP_CHECK_ULIMIT</code> to skip the ulimit value verification check within the BE process. This is only available to applications in the Docker quick start scenario. <a href=https://github.com/apache/doris/pull/45267 target=_blank rel="noopener noreferrer">#45267</a></li>
<li>Add the <code>enable_cooldown_replica_affinity</code> session variable to control the selection of replica affinity for queries under cold - hot separation.</li>
<li>In FE, add the configurations <code>restore_job_compressed_serialization</code> and <code>backup_job_compressed_serialization</code> to solve the OOM problem of FE during backup and restore operations when the number of db tablets is extremely large. By default, these configurations are disabled, and once enabled, they cannot be downgraded.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=new-features>New Features<a href=#new-features class=hash-link aria-label="Direct link to New Features" title="Direct link to New Features">​</a></h2>
<ul>
<li>The Arrow flight protocol supports accessing BE through a load - balancing device. <a href=https://github.com/apache/doris/pull/43281 target=_blank rel="noopener noreferrer">#43281</a></li>
<li>Now lambda expressions support capturing external columns (#45186).<a href=https://github.com/apache/doris/pull/45186 target=_blank rel="noopener noreferrer">#45186</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=improvements>Improvements<a href=#improvements class=hash-link aria-label="Direct link to Improvements" title="Direct link to Improvements">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=lakehouse>Lakehouse<a href=#lakehouse class=hash-link aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">​</a></h3>
<ul>
<li>Update the Hudi version to 0.15. And optimize the query planning performance of Hudi tables.</li>
<li>Optimize the read performance of MaxCompute partitioned tables. <a href=https://github.com/apache/doris/pull/45148 target=_blank rel="noopener noreferrer">#45148</a></li>
<li>Support the session variable <code>enable_text_validate_utf8</code>, which can ignore the UTF8 encoding detection in CSV format. <a href=https://github.com/apache/doris/pull/45537 target=_blank rel="noopener noreferrer">#45537</a></li>
<li>Optimize the performance of Parquet file lazy materialization under high - filtering - rate conditions. <a href=https://github.com/apache/doris/pull/46183 target=_blank rel="noopener noreferrer">#46183</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=asynchronous-materialized-views>Asynchronous Materialized Views<a href=#asynchronous-materialized-views class=hash-link aria-label="Direct link to Asynchronous Materialized Views" title="Direct link to Asynchronous Materialized Views">​</a></h3>
<ul>
<li>Now it supports manually refreshing partitions that do not exist in an asynchronous materialized view <a href=https://github.com/apache/doris/pull/45290 target=_blank rel="noopener noreferrer">#45290</a>.</li>
<li>Optimize the performance of transparent rewrite planning <a href=https://github.com/apache/doris/pull/44786 target=_blank rel="noopener noreferrer">#44786</a>.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=query-optimizer>Query Optimizer<a href=#query-optimizer class=hash-link aria-label="Direct link to Query Optimizer" title="Direct link to Query Optimizer">​</a></h3>
<ul>
<li>Improve the adaptive ability of runtime filters <a href=https://github.com/apache/doris/pull/42640 target=_blank rel="noopener noreferrer">#42640</a>.</li>
<li>Add the ability to generate original column filter conditions from filter conditions on <code>max/min</code> aggregate function columns <a href=https://github.com/apache/doris/pull/39252 target=_blank rel="noopener noreferrer">#39252</a></li>
<li>Add the ability to extract single - side filter conditions from join predicates <a href=https://github.com/apache/doris/pull/38479 target=_blank rel="noopener noreferrer">#38479</a>.</li>
<li>Optimize the ability of predicate derivation on set operators to better generate filter predicates <a href=https://github.com/apache/doris/pull/39450 target=_blank rel="noopener noreferrer">#39450</a>.</li>
<li>Optimize the exception handling ability of statistic information collection and usage to avoid generating unexpected execution plans when collection exceptions occur. <a href=https://github.com/apache/doris/pull/43009 target=_blank rel="noopener noreferrer">#43009</a> <a href=https://github.com/apache/doris/pull/43776 target=_blank rel="noopener noreferrer">#43776</a> <a href=https://github.com/apache/doris/pull/43865 target=_blank rel="noopener noreferrer">#43865</a> <a href=https://github.com/apache/doris/pull/42104 target=_blank rel="noopener noreferrer">#42104</a> <a href=https://github.com/apache/doris/pull/42399 target=_blank rel="noopener noreferrer">#42399</a> <a href=https://github.com/apache/doris/pull/41729 target=_blank rel="noopener noreferrer">#41729</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=query-execution-engine>Query Execution Engine<a href=#query-execution-engine class=hash-link aria-label="Direct link to Query Execution Engine" title="Direct link to Query Execution Engine">​</a></h3>
<ul>
<li>Optimize the execution of queries with <code>limit</code> to end faster and avoid unnecessary data scanning <a href=https://github.com/apache/doris/pull/44255 target=_blank rel="noopener noreferrer">#44255</a>.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=storage-management>Storage Management<a href=#storage-management class=hash-link aria-label="Direct link to Storage Management" title="Direct link to Storage Management">​</a></h3>
<ul>
<li>CCR supports more comprehensive operations, such as <code>rename table</code>, <code>rename column</code>, <code>modify comment</code>, <code>drop view</code>, <code>drop rollup</code>, etc.</li>
<li>Improve the accuracy of the broker load import progress and the performance when importing multiple compressed files.</li>
<li>Improve the routine load timeout strategy and thread - pool usage to prevent routine load timeout failures and impacts on queries.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=others>Others<a href=#others class=hash-link aria-label="Direct link to Others" title="Direct link to Others">​</a></h3>
<ul>
<li>The Docker quick - start image supports starting without setting environment parameters. Add the environment variable <code>SKIP_CHECK_ULIMIT</code> to skip the <code>start_be.sh</code> script and the swap, <code>max_map_count</code>, ulimit - related verification checks within the BE process. This is only applicable to applications in the Docker quick - start scenario.  <a href=https://github.com/apache/doris/pull/45269 target=_blank rel="noopener noreferrer">#45269</a></li>
<li>Add the new LDAP configuration <code>ldap_group_filter</code> for custom group filtering. <a href=https://github.com/apache/doris/pull/43292 target=_blank rel="noopener noreferrer">#43292</a></li>
<li>Optimize performance when using ranger. <a href=https://github.com/apache/doris/pull/41207 target=_blank rel="noopener noreferrer">#41207</a></li>
<li>Fix the inaccurate statistics of <code>scan bytes</code> in the audit log. <a href=https://github.com/apache/doris/pull/45167 target=_blank rel="noopener noreferrer">#45167</a></li>
<li>Now, the default values of columns can be correctly displayed in the <code>COLUMNS</code> system table. <a href=https://github.com/apache/doris/pull/44849 target=_blank rel="noopener noreferrer">#44849</a></li>
<li>Now, the definition of views can be correctly displayed in the <code>VIEWS</code> system table. <a href=https://github.com/apache/doris/pull/45857 target=_blank rel="noopener noreferrer">#45857</a></li>
<li>Now, the <code>admin</code> user cannot be deleted. <a href=https://github.com/apache/doris/pull/44751 target=_blank rel="noopener noreferrer">#44751</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=bug-fixes>Bug Fixes<a href=#bug-fixes class=hash-link aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=lakehouse-1>Lakehouse<a href=#lakehouse-1 class=hash-link aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=hive>Hive<a href=#hive class=hash-link aria-label="Direct link to Hive" title="Direct link to Hive">​</a></h4>
<ul>
<li>Fix the problem of being unable to query Hive views created by Spark. <a href=https://github.com/apache/doris/pull/43553 target=_blank rel="noopener noreferrer">#43553</a></li>
<li>Fix the problem of being unable to correctly read some Hive Transaction tables. <a href=https://github.com/apache/doris/pull/45753 target=_blank rel="noopener noreferrer">#45753</a></li>
<li>Fix the problem of incorrect partition pruning when Hive table partitions contain special characters. <a href=https://github.com/apache/doris/pull/42906 target=_blank rel="noopener noreferrer">#42906</a></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=iceberg>Iceberg<a href=#iceberg class=hash-link aria-label="Direct link to Iceberg" title="Direct link to Iceberg">​</a></h4>
<ul>
<li>Fix the problem of being unable to create Iceberg tables in a Kerberos - authenticated environment. <a href=https://github.com/apache/doris/pull/43445 target=_blank rel="noopener noreferrer">#43445</a></li>
<li>Fix the problem of inaccurate <code>count(*)</code> queries when there are dangling deletes in Iceberg tables in some cases. <a href=https://github.com/apache/doris/pull/44039 target=_blank rel="noopener noreferrer">#44039</a></li>
<li>Fix the problem of query errors due to column name mismatches in Iceberg tables in some cases . <a href=https://github.com/apache/doris/pull/44470 target=_blank rel="noopener noreferrer">#44470</a></li>
<li>Fix the problem of being unable to read Iceberg tables when their partitions are modified in some cases .<a href=https://github.com/apache/doris/pull/45367 target=_blank rel="noopener noreferrer">#45367</a></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=paimon>Paimon<a href=#paimon class=hash-link aria-label="Direct link to Paimon" title="Direct link to Paimon">​</a></h4>
<ul>
<li>Fix the problem that the Paimon Catalog cannot access Alibaba Cloud OSS - HDFS. <a href=https://github.com/apache/doris/pull/42585 target=_blank rel="noopener noreferrer">#42585</a></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=hudi>Hudi<a href=#hudi class=hash-link aria-label="Direct link to Hudi" title="Direct link to Hudi">​</a></h4>
<ul>
<li>Fix the problem of ineffective partition pruning in Hudi tables in some cases. <a href=https://github.com/apache/doris/pull/44669 target=_blank rel="noopener noreferrer">#44669</a></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=jdbc>JDBC<a href=#jdbc class=hash-link aria-label="Direct link to JDBC" title="Direct link to JDBC">​</a></h4>
<ul>
<li>Fix the problem of being unable to obtain tables using the JDBC Catalog after enabling the case insensitive table name feature in some cases.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=maxcompute>MaxCompute<a href=#maxcompute class=hash-link aria-label="Direct link to MaxCompute" title="Direct link to MaxCompute">​</a></h4>
<ul>
<li>Fix the problem of ineffective partition pruning in MaxCompute tables in some cases<a href=https://github.com/apache/doris/pull/44508 target=_blank rel="noopener noreferrer">#44508</a>.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=others-1>Others<a href=#others-1 class=hash-link aria-label="Direct link to Others" title="Direct link to Others">​</a></h4>
<ul>
<li>Fix the problem of FE memory leaks caused by EXPORT tasks in some cases.<a href=https://github.com/apache/doris/pull/44019 target=_blank rel="noopener noreferrer">#44019</a></li>
<li>Fix the problem of being unable to access S3 object storage using the https protocol in some cases <a href=https://github.com/apache/doris/pull/44242 target=_blank rel="noopener noreferrer">#44242</a>.</li>
<li>Fix the problem of the inability to automatically refresh Kerberos authentication tickets in some cases  <a href=https://github.com/apache/doris/pull/44916 target=_blank rel="noopener noreferrer">#44916</a></li>
<li>Fix the problem of errors when reading Hadoop Block compressed format files in some cases. <a href=https://github.com/apache/doris/pull/45289 target=_blank rel="noopener noreferrer">#45289</a></li>
<li>When querying ORC - formatted data, no longer push down CHAR - type predicates to avoid possible result errors. <a href=https://github.com/apache/doris/pull/45484 target=_blank rel="noopener noreferrer">#45484</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=asynchronous-materialized-views-1>Asynchronous Materialized Views<a href=#asynchronous-materialized-views-1 class=hash-link aria-label="Direct link to Asynchronous Materialized Views" title="Direct link to Asynchronous Materialized Views">​</a></h3>
<ul>
<li>Fix the problem that when there is a CTE in the materialized view definition, it cannot be refreshed <a href=https://github.com/apache/doris/pull/44857 target=_blank rel="noopener noreferrer">#44857</a>.</li>
<li>Fix the problem that when columns are added to the base table, the asynchronous materialized view cannot hit the transparent rewrite. <a href=https://github.com/apache/doris/pull/44867 target=_blank rel="noopener noreferrer">#44867</a></li>
<li>Fix the problem that when the same filter predicate is included in different positions in a query, the transparent rewrite fails. <a href=https://github.com/apache/doris/pull/44575 target=_blank rel="noopener noreferrer">#44575</a></li>
<li>Fix the problem that when column aliases are used in filter predicates or join predicates, the transparent rewrite cannot be performed. <a href=https://github.com/apache/doris/pull/44779 target=_blank rel="noopener noreferrer">#44779</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=inverted-index>Inverted Index<a href=#inverted-index class=hash-link aria-label="Direct link to Inverted Index" title="Direct link to Inverted Index">​</a></h3>
<ul>
<li>Fix the problem of abnormal handling of inverted index compaction. <a href=https://github.com/apache/doris/pull/45773 target=_blank rel="noopener noreferrer">#45773</a></li>
<li>Fix the problem that inverted index construction fails due to lock - waiting timeout. <a href=https://github.com/apache/doris/pull/43589 target=_blank rel="noopener noreferrer">#43589</a></li>
<li>Fix the problem of inverted index write crashes in abnormal situations. <a href=https://github.com/apache/doris/pull/46075 target=_blank rel="noopener noreferrer">#46075</a></li>
<li>Fix the null - pointer problem of the <code>match</code> function with special parameters. <a href=https://github.com/apache/doris/pull/45774 target=_blank rel="noopener noreferrer">#45774</a></li>
<li>Fix problems related to the variant inverted index and disable the use of the index v1 format for variants <a href=https://github.com/apache/doris/pull/43971 target=_blank rel="noopener noreferrer">#43971</a> <a href=https://github.com/apache/doris/pull/45179/ target=_blank rel="noopener noreferrer">#45179</a></li>
<li>Fix the problem of crashes when setting <code>gram_size = 65535</code> for the ngram bloomfilter index <a href=https://github.com/apache/doris/pull/43654 target=_blank rel="noopener noreferrer">#43654</a></li>
<li>Fix the problem of incorrect calculation of DATE and DATETIME for the bloomfilter index <a href=https://github.com/apache/doris/pull/43622 target=_blank rel="noopener noreferrer">#43622</a></li>
<li>Fix the problem that dropping a column does not automatically drop the bloomfilter index <a href=https://github.com/apache/doris/pull/44478 target=_blank rel="noopener noreferrer">#44478</a></li>
<li>Reduce the memory footprint when writing the bloomfilter index <a href=https://github.com/apache/doris/pull/46047 target=_blank rel="noopener noreferrer">#46047</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=semi-structure-data>Semi-Structure Data<a href=#semi-structure-data class=hash-link aria-label="Direct link to Semi-Structure Data" title="Direct link to Semi-Structure Data">​</a></h3>
<ul>
<li>Optimize memory usage and reduce the memory consumption of the <code>variant</code> data type <a href=https://github.com/apache/doris/pull/43349 target=_blank rel="noopener noreferrer">#43349</a> <a href=https://github.com/apache/doris/pull/44585 target=_blank rel="noopener noreferrer">#44585</a> <a href=https://github.com/apache/doris/pull/45734 target=_blank rel="noopener noreferrer">#45734</a></li>
<li>Optimize the performance of <code>variant</code> schema copy. <a href=https://github.com/apache/doris/pull/45731 target=_blank rel="noopener noreferrer">#45731</a></li>
<li>Do not use <code>variant</code> as a key when automatically inferring tablet keys. <a href=https://github.com/apache/doris/pull/44736 target=_blank rel="noopener noreferrer">#44736</a></li>
<li>Fix the problem of changing <code>variant</code> from <code>NOT NULL</code> to <code>NULL</code> <a href=https://github.com/apache/doris/pull/45734 target=_blank rel="noopener noreferrer">#45734</a></li>
<li>Fix the problem of incorrect type inference of lambda functions. <a href=https://github.com/apache/doris/pull/45798 target=_blank rel="noopener noreferrer">#45798</a></li>
<li>Fix the coredump problem at the boundary conditions of the <code>ipv6_cidr_to_range</code> function <a href=https://github.com/apache/doris/pull/46252 target=_blank rel="noopener noreferrer">#46252</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=query-optimizer-1>Query Optimizer<a href=#query-optimizer-1 class=hash-link aria-label="Direct link to Query Optimizer" title="Direct link to Query Optimizer">​</a></h3>
<ul>
<li>Fix the potential deadlock problem caused by mutual exclusion of table read locks and optimize the lock - using logic <a href=https://github.com/apache/doris/pull/45045 target=_blank rel="noopener noreferrer">#45045</a> <a href=https://github.com/apache/doris/pull/43376 target=_blank rel="noopener noreferrer">#43376</a> <a href=https://github.com/apache/doris/pull/44164 target=_blank rel="noopener noreferrer">#44164</a> <a href=https://github.com/apache/doris/pull/44967 target=_blank rel="noopener noreferrer">#44967</a> <a href=https://github.com/apache/doris/pull/45995 target=_blank rel="noopener noreferrer">#45995</a>.</li>
<li>Fix the problem that the SQL Cache function incorrectly uses constant folding, resulting in incorrect results when using functions containing time formats . <a href=https://github.com/apache/doris/pull/44631 target=_blank rel="noopener noreferrer">#44631</a></li>
<li>Fix the problem of incorrect optimization of comparison expressions in edge cases, which may lead to incorrect results. <a href=https://github.com/apache/doris/pull/44054 target=_blank rel="noopener noreferrer">#44054</a> <a href=https://github.com/apache/doris/pull/44725 target=_blank rel="noopener noreferrer">#44725</a> <a href=https://github.com/apache/doris/pull/44922 target=_blank rel="noopener noreferrer">#44922</a> <a href=https://github.com/apache/doris/pull/45735 target=_blank rel="noopener noreferrer">#45735</a> <a href=https://github.com/apache/doris/pull/45868 target=_blank rel="noopener noreferrer">#45868</a></li>
<li>Fix the problem of incorrect audit logs for high - concurrent point queries <a href=https://github.com/apache/doris/pull/43345 target=_blank rel="noopener noreferrer"> #43345 </a><a href=https://github.com/apache/doris/pull/44588 target=_blank rel="noopener noreferrer">#44588</a></li>
<li>Fix the problem of continuous error reporting after an exception occurs in high - concurrent point queries <a href=https://github.com/apache/doris/pull/44582 target=_blank rel="noopener noreferrer">#44582</a></li>
<li>Fix the problem of incorrectly prepared statements for some fields.<a href=https://github.com/apache/doris/pull/45732 target=_blank rel="noopener noreferrer">#45732 </a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=query-execution-engine-1>Query Execution Engine<a href=#query-execution-engine-1 class=hash-link aria-label="Direct link to Query Execution Engine" title="Direct link to Query Execution Engine">​</a></h3>
<ul>
<li>Fix the problem of incorrect results of regular expressions and <code>like</code> functions for special characters. <a href=https://github.com/apache/doris/pull/44547 target=_blank rel="noopener noreferrer">#44547</a></li>
<li>Fix the problem that the SQL Cache may have incorrect results when switching databases. <a href=https://github.com/apache/doris/pull/44782 target=_blank rel="noopener noreferrer">#44782</a></li>
<li>Fix the problem of incorrect results of the <code>cut_ipv6</code> function. <a href=https://github.com/apache/doris/pull/43921 target=_blank rel="noopener noreferrer">#43921</a></li>
<li>Fix the problem of casting from numeric types to bool types. <a href=https://github.com/apache/doris/pull/46275 target=_blank rel="noopener noreferrer">#46275</a></li>
<li>Fix a series of problems related to arrow flight. <a href=https://github.com/apache/doris/pull/45661 target=_blank rel="noopener noreferrer">#45661</a> <a href=https://github.com/apache/doris/pull/45023 target=_blank rel="noopener noreferrer">#45023</a> <a href=https://github.com/apache/doris/pull/43960 target=_blank rel="noopener noreferrer">#43960</a> <a href=https://github.com/apache/doris/pull/43929 target=_blank rel="noopener noreferrer">#43929</a></li>
<li>Fix the problem of incorrect results in some cases when the hash table of hash join exceeds 4G. <a href=https://github.com/apache/doris/pull/46461/files target=_blank rel="noopener noreferrer">#46461</a></li>
<li>Fix the overflow problem of the <code>convert_to</code> function for Chinese characters. <a href=https://github.com/apache/doris/pull/46405 target=_blank rel="noopener noreferrer">#46505</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=storage-management-1>Storage Management<a href=#storage-management-1 class=hash-link aria-label="Direct link to Storage Management" title="Direct link to Storage Management">​</a></h3>
<ul>
<li>Fix the problem that high - concurrent DDL may cause FE startup failure.</li>
<li>Fix the problem that auto - increment columns may have duplicate values.</li>
<li>Fix the problem that routine load cannot use the newly expanded BE during expansion.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=permission-management>Permission Management<a href=#permission-management class=hash-link aria-label="Direct link to Permission Management" title="Direct link to Permission Management">​</a></h3>
<ul>
<li>Fix the problem of frequent access to the Ranger service when using Ranger as the authentication plugin <a href=https://github.com/apache/doris/pull/45645 target=_blank rel="noopener noreferrer">#45645</a>.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=others-2>Others<a href=#others-2 class=hash-link aria-label="Direct link to Others" title="Direct link to Others">​</a></h3>
<ul>
<li>Fix the potential memory leak problem when <code>enable_jvm_monitor=true</code> is enabled on the BE side <a href=https://github.com/apache/doris/pull/44311 target=_blank rel="noopener noreferrer">#44311</a>.</li>
</ul></div></div></article><article class=margin-bottom--xl itemprop=blogPost itemscope itemtype=http://schema.org/BlogPosting><div class=markdown itemprop=articleBody><header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href=/blog/>Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class=s-tags><span class=s-tag>Release Notes</span></span></span></div><h2 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop=headline><a itemprop=url href=/blog/release-note-3.0.3/>Apache Doris 3.0.3 just released</a></h2><div class="blog-info text-center flex justify-center text-sm text-black"><span class=authors><span class="s-author text-black">Apache Doris</span></span><time datetime=2024-12-02T00:00:00.000Z itemprop=datePublished class="text-black ml-4">December 2, 2024</time></div></header><div class=markdown itemprop=articleBody><p>Dear community members, the Apache Doris 3.0.3 version was officially released on December 02, 2024, this version further enhances the performance and stability of the system.</p>
<p><strong>Quick Download:</strong> <a href=https://doris.apache.org/download/ target=_blank rel="noopener noreferrer">https://doris.apache.org/download/</a></p>
<p><strong>GitHub Release:</strong> <a href=https://github.com/apache/doris/releases target=_blank rel="noopener noreferrer">https://github.com/apache/doris/releases</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=behavioral-changes>Behavioral Changes<a href=#behavioral-changes class=hash-link aria-label="Direct link to Behavioral Changes" title="Direct link to Behavioral Changes">​</a></h2>
<ul>
<li>Prohibited column updates on MOW tables with synchronous materialized views. <a href=https://github.com/apache/doris/pull/40190 target=_blank rel="noopener noreferrer">#40190</a></li>
<li>Adjusted the default parameters of RoutineLoad to improve import efficiency. <a href=https://github.com/apache/doris/pull/42968 target=_blank rel="noopener noreferrer">#42968</a></li>
<li>When StreamLoad fails, the return value of LoadedRows is adjusted to 0. <a href=https://github.com/apache/doris/pull/41946 target=_blank rel="noopener noreferrer">#41946</a> <a href=https://github.com/apache/doris/pull/42291 target=_blank rel="noopener noreferrer">#42291</a></li>
<li>Adjusted the default memory limit of Segment cache to 5%. <a href=https://github.com/apache/doris/pull/42308 target=_blank rel="noopener noreferrer">#42308</a> <a href=https://github.com/apache/doris/pull/42436 target=_blank rel="noopener noreferrer">#42436</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=new-features>New Features<a href=#new-features class=hash-link aria-label="Direct link to New Features" title="Direct link to New Features">​</a></h2>
<ul>
<li>
<p>Introduced the session variable <code>enable_cooldown_replica_affinity</code> to control the affinity of cold and hot tiered replicas. <a href=https://github.com/apache/doris/pull/42677 target=_blank rel="noopener noreferrer">#42677</a></p>
</li>
<li>
<p>Added <code>table$partition</code> syntax for querying partition information of Hive tables. <a href=https://github.com/apache/doris/pull/40774 target=_blank rel="noopener noreferrer">#40774</a></p>
<ul>
<li><a href=https://doris.apache.org/docs/3.0/lakehouse/datalake-analytics/hive target=_blank rel="noopener noreferrer">View Documentation</a></li>
</ul>
</li>
<li>
<p>Supported creation of Hive tables in Text format. <a href=https://github.com/apache/doris/pull/41860 target=_blank rel="noopener noreferrer">#41860</a> <a href=https://github.com/apache/doris/pull/42175 target=_blank rel="noopener noreferrer">#42175</a></p>
<ul>
<li><a href=https://doris.apache.org/zh-CN/docs/3.0/lakehouse/datalake-building/hive-build#table target=_blank rel="noopener noreferrer">View Documentation</a></li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=asynchronous-materialized-views>Asynchronous Materialized Views<a href=#asynchronous-materialized-views class=hash-link aria-label="Direct link to Asynchronous Materialized Views" title="Direct link to Asynchronous Materialized Views">​</a></h3>
<ul>
<li>Introduced new materialized view attribute <code>use_for_rewrite</code>. When <code>use_for_rewrite</code> is set to false, the materialized view does not participate in transparent rewriting. <a href=https://github.com/apache/doris/pull/40332 target=_blank rel="noopener noreferrer">#40332</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=query-optimizer>Query Optimizer<a href=#query-optimizer class=hash-link aria-label="Direct link to Query Optimizer" title="Direct link to Query Optimizer">​</a></h3>
<ul>
<li>Supported correlated non-aggregate subqueries. <a href=https://github.com/apache/doris/pull/42236 target=_blank rel="noopener noreferrer">#42236</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=query-execution>Query Execution<a href=#query-execution class=hash-link aria-label="Direct link to Query Execution" title="Direct link to Query Execution">​</a></h3>
<ul>
<li>Added functions <code>ngram_search</code>, <code>normal_cdf</code>, <code>to_iso8601</code>, <code>from_iso8601_date</code>, <code>SESSION_USER()</code>, <code>last_query_id</code>. <a href=https://github.com/apache/doris/pull/38226 target=_blank rel="noopener noreferrer">#38226</a> <a href=https://github.com/apache/doris/pull/40695 target=_blank rel="noopener noreferrer">#40695</a> <a href=https://github.com/apache/doris/pull/41075 target=_blank rel="noopener noreferrer">#41075</a> <a href=https://github.com/apache/doris/pull/41600 target=_blank rel="noopener noreferrer">#41600</a> <a href=https://github.com/apache/doris/pull/39575 target=_blank rel="noopener noreferrer">#39575</a> <a href=https://github.com/apache/doris/pull/40739 target=_blank rel="noopener noreferrer">#40739</a></li>
<li>The <code>aes_encrypt</code> and <code>aes_decrypt</code> functions support GCM mode. <a href=https://github.com/apache/doris/pull/40004 target=_blank rel="noopener noreferrer">#40004</a></li>
<li>Profile outputs the changed session variable values. <a href=https://github.com/apache/doris/pull/41016 target=_blank rel="noopener noreferrer">#41016</a> <a href=https://github.com/apache/doris/pull/41318 target=_blank rel="noopener noreferrer">#41318</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=semi-structured-data-management>Semi-structured Data Management<a href=#semi-structured-data-management class=hash-link aria-label="Direct link to Semi-structured Data Management" title="Direct link to Semi-structured Data Management">​</a></h3>
<ul>
<li>Added array functions <code>array_match_all</code> and <code>array_match_any</code>. <a href=https://github.com/apache/doris/pull/40605 target=_blank rel="noopener noreferrer">#40605</a> <a href=https://github.com/apache/doris/pull/43514 target=_blank rel="noopener noreferrer">#43514</a></li>
<li>The array function <code>array_agg</code> supports nesting ARRAY/MAP/STRUCT within ARRAY. <a href=https://github.com/apache/doris/pull/42009 target=_blank rel="noopener noreferrer">#42009</a></li>
<li>Added approximate aggregate statistical functions <code>approx_top_k</code> and <code>approx_top_sum</code>. <a href=https://github.com/apache/doris/pull/44082 target=_blank rel="noopener noreferrer">#44082</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=improvements>Improvements<a href=#improvements class=hash-link aria-label="Direct link to Improvements" title="Direct link to Improvements">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=storage>Storage<a href=#storage class=hash-link aria-label="Direct link to Storage" title="Direct link to Storage">​</a></h3>
<ul>
<li>Supported <code>bitmap_empty</code> as the default value. <a href=https://github.com/apache/doris/pull/40364 target=_blank rel="noopener noreferrer">#40364</a></li>
<li>Introduced the session variable <code>insert_timeout</code> to control the timeout of DELETE statements. <a href=https://github.com/apache/doris/pull/41063 target=_blank rel="noopener noreferrer">#41063</a></li>
<li>Improved some error message prompts. <a href=https://github.com/apache/doris/pull/41048 target=_blank rel="noopener noreferrer">#41048</a> <a href=https://github.com/apache/doris/pull/39631 target=_blank rel="noopener noreferrer">#39631</a></li>
<li>Improved the priority scheduling of replica repair. <a href=https://github.com/apache/doris/pull/41076 target=_blank rel="noopener noreferrer">#41076</a></li>
<li>Enhanced the robustness of timezone handling when creating tables. <a href=https://github.com/apache/doris/pull/41926 target=_blank rel="noopener noreferrer">#41926</a> <a href=https://github.com/apache/doris/pull/42389 target=_blank rel="noopener noreferrer">#42389</a></li>
<li>Checked the validity of partition expressions when creating tables. <a href=https://github.com/apache/doris/pull/40158 target=_blank rel="noopener noreferrer">#40158</a></li>
<li>Supported Unicode-encoded column names in DELETE operations. <a href=https://github.com/apache/doris/pull/39381 target=_blank rel="noopener noreferrer">#39381</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=compute-storage-decoupled>Compute-Storage Decoupled<a href=#compute-storage-decoupled class=hash-link aria-label="Direct link to Compute-Storage Decoupled" title="Direct link to Compute-Storage Decoupled">​</a></h3>
<ul>
<li>Supported ARM architecture deployment in storage and compute separation mode. <a href=https://github.com/apache/doris/pull/42467 target=_blank rel="noopener noreferrer">#42467</a> <a href=https://github.com/apache/doris/pull/43377 target=_blank rel="noopener noreferrer">#43377</a></li>
<li>Optimized the eviction strategy and lock competition of file cache, improving hit rate and high concurrency point query performance. <a href=https://github.com/apache/doris/pull/42451 target=_blank rel="noopener noreferrer">#42451</a> <a href=https://github.com/apache/doris/pull/43201 target=_blank rel="noopener noreferrer">#43201</a> <a href=https://github.com/apache/doris/pull/41818 target=_blank rel="noopener noreferrer">#41818</a> <a href=https://github.com/apache/doris/pull/43401 target=_blank rel="noopener noreferrer">#43401</a></li>
<li>S3 storage vault supported <code>use_path_style</code>, solving the problem of using custom domain names for object storage. <a href=https://github.com/apache/doris/pull/43060 target=_blank rel="noopener noreferrer">#43060</a> <a href=https://github.com/apache/doris/pull/43343 target=_blank rel="noopener noreferrer">#43343</a> <a href=https://github.com/apache/doris/pull/43330 target=_blank rel="noopener noreferrer">#43330</a></li>
<li>Optimized storage and compute separation configuration and deployment, preventing misoperations in different modes. <a href=https://github.com/apache/doris/pull/43381 target=_blank rel="noopener noreferrer">#43381</a> <a href=https://github.com/apache/doris/pull/43522 target=_blank rel="noopener noreferrer">#43522</a> <a href=https://github.com/apache/doris/pull/43434 target=_blank rel="noopener noreferrer">#43434</a> <a href=https://github.com/apache/doris/pull/40764 target=_blank rel="noopener noreferrer">#40764</a> <a href=https://github.com/apache/doris/pull/43891 target=_blank rel="noopener noreferrer">#43891</a></li>
<li>Optimized observability and provided an interface for deleting specified segment file cache. <a href=https://github.com/apache/doris/pull/38489 target=_blank rel="noopener noreferrer">#38489</a> <a href=https://github.com/apache/doris/pull/42896 target=_blank rel="noopener noreferrer">#42896</a> <a href=https://github.com/apache/doris/pull/41037 target=_blank rel="noopener noreferrer">#41037</a> <a href=https://github.com/apache/doris/pull/43412 target=_blank rel="noopener noreferrer">#43412</a></li>
<li>Optimized Meta-service operation and maintenance interface: RPC rate limiting and tablet metadata correction. <a href=https://github.com/apache/doris/pull/42413 target=_blank rel="noopener noreferrer">#42413</a> <a href=https://github.com/apache/doris/pull/43884 target=_blank rel="noopener noreferrer">#43884</a> <a href=https://github.com/apache/doris/pull/41782 target=_blank rel="noopener noreferrer">#41782</a> <a href=https://github.com/apache/doris/pull/43460 target=_blank rel="noopener noreferrer">#43460</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=lakehouse>Lakehouse<a href=#lakehouse class=hash-link aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">​</a></h3>
<ul>
<li>
<p>Paimon Catalog supported Alibaba Cloud DLF and OSS-HDFS storage. <a href=https://github.com/apache/doris/pull/41247 target=_blank rel="noopener noreferrer">#41247</a> <a href=https://github.com/apache/doris/pull/42585 target=_blank rel="noopener noreferrer">#42585</a></p>
<ul>
<li>View <a href=https://doris.apache.org/docs/3.0/lakehouse/datalake-analytics/paimon target=_blank rel="noopener noreferrer">Documentation</a></li>
</ul>
</li>
<li>
<p>Supported reading of Hive tables in OpenCSV format. <a href=https://github.com/apache/doris/pull/42257 target=_blank rel="noopener noreferrer">#42257</a> <a href=https://github.com/apache/doris/pull/42942 target=_blank rel="noopener noreferrer">#42942</a></p>
</li>
<li>
<p>Optimized the performance of accessing the <code>information_schema.columns</code> table in External Catalog. <a href=https://github.com/apache/doris/pull/41659 target=_blank rel="noopener noreferrer">#41659</a> <a href=https://github.com/apache/doris/pull/41962 target=_blank rel="noopener noreferrer">#41962</a></p>
</li>
<li>
<p>Used the new MaxCompute open storage API to access MaxCompute data sources. <a href=https://github.com/apache/doris/pull/41614 target=_blank rel="noopener noreferrer">#41614</a></p>
</li>
<li>
<p>Optimized the scheduling policy of the JNI part of Paimon tables, making scan tasks more balanced. <a href=https://github.com/apache/doris/pull/43310 target=_blank rel="noopener noreferrer">#43310</a></p>
</li>
<li>
<p>Optimized the read performance of small ORC files. <a href=https://github.com/apache/doris/pull/42004 target=_blank rel="noopener noreferrer">#42004</a> <a href=https://github.com/apache/doris/pull/43467 target=_blank rel="noopener noreferrer">#43467</a></p>
</li>
<li>
<p>Supported reading of parquet files in brotli compressed format. <a href=https://github.com/apache/doris/pull/42177 target=_blank rel="noopener noreferrer">#42177</a></p>
</li>
<li>
<p>Added <code>file_cache_statistics</code> table under the <code>information_schema</code> library to view metadata cache statistics. <a href=https://github.com/apache/doris/pull/42160 target=_blank rel="noopener noreferrer">#42160</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=query-optimizer-1>Query Optimizer<a href=#query-optimizer-1 class=hash-link aria-label="Direct link to Query Optimizer" title="Direct link to Query Optimizer">​</a></h3>
<ul>
<li>Optimization: When queries only differ in comments, the same SQL Cache can be reused. <a href=https://github.com/apache/doris/pull/40049 target=_blank rel="noopener noreferrer">#40049</a></li>
<li>Optimization: Improved the stability of statistical information when data is frequently updated. <a href=https://github.com/apache/doris/pull/43865 target=_blank rel="noopener noreferrer">#43865</a> <a href=https://github.com/apache/doris/pull/39788 target=_blank rel="noopener noreferrer">#39788</a> <a href=https://github.com/apache/doris/pull/43009 target=_blank rel="noopener noreferrer">#43009</a> <a href=https://github.com/apache/doris/pull/40457 target=_blank rel="noopener noreferrer">#40457</a> <a href=https://github.com/apache/doris/pull/42409 target=_blank rel="noopener noreferrer">#42409</a> <a href=https://github.com/apache/doris/pull/41894 target=_blank rel="noopener noreferrer">#41894</a></li>
<li>Optimization: Enhanced the stability of constant folding. <a href=https://github.com/apache/doris/pull/42910 target=_blank rel="noopener noreferrer">#42910</a> <a href=https://github.com/apache/doris/pull/41164 target=_blank rel="noopener noreferrer">#41164</a> <a href=https://github.com/apache/doris/pull/39723 target=_blank rel="noopener noreferrer">#39723</a> <a href=https://github.com/apache/doris/pull/41394 target=_blank rel="noopener noreferrer">#41394</a> <a href=https://github.com/apache/doris/pull/42256 target=_blank rel="noopener noreferrer">#42256</a> <a href=https://github.com/apache/doris/pull/40441 target=_blank rel="noopener noreferrer">#40441</a></li>
<li>Optimization: Column pruning can generate better execution plans. <a href=https://github.com/apache/doris/pull/41719 target=_blank rel="noopener noreferrer">#41719</a> <a href=https://github.com/apache/doris/pull/41548 target=_blank rel="noopener noreferrer">#41548</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=query-execution-1>Query Execution<a href=#query-execution-1 class=hash-link aria-label="Direct link to Query Execution" title="Direct link to Query Execution">​</a></h3>
<ul>
<li>Optimized the memory usage of the sort operator. <a href=https://github.com/apache/doris/pull/39306 target=_blank rel="noopener noreferrer">#39306</a></li>
<li>Optimized the performance of computations on ARM. <a href=https://github.com/apache/doris/pull/38888 target=_blank rel="noopener noreferrer">#38888</a> <a href=https://github.com/apache/doris/pull/38759 target=_blank rel="noopener noreferrer">#38759</a></li>
<li>Optimized the computational performance of a series of functions. <a href=https://github.com/apache/doris/pull/40366 target=_blank rel="noopener noreferrer">#40366</a> <a href=https://github.com/apache/doris/pull/40821 target=_blank rel="noopener noreferrer">#40821</a> <a href=https://github.com/apache/doris/pull/40670 target=_blank rel="noopener noreferrer">#40670</a> <a href=https://github.com/apache/doris/pull/41206 target=_blank rel="noopener noreferrer">#41206</a> <a href=https://github.com/apache/doris/pull/40162 target=_blank rel="noopener noreferrer">#40162</a></li>
<li>Used SSE instructions to optimize the performance of the <code>match_ipv6_subnet</code> function. <a href=https://github.com/apache/doris/pull/38755 target=_blank rel="noopener noreferrer">#38755</a></li>
<li>Supported automatic creation of new partitions during insert overwrite. <a href=https://github.com/apache/doris/pull/38628 target=_blank rel="noopener noreferrer">#38628</a> <a href=https://github.com/apache/doris/pull/42645 target=_blank rel="noopener noreferrer">#42645</a></li>
<li>Added the status of each PipelineTask in Profile. <a href=https://github.com/apache/doris/pull/42981 target=_blank rel="noopener noreferrer">#42981</a></li>
<li>IP type supported runtime filter. <a href=https://github.com/apache/doris/pull/39985 target=_blank rel="noopener noreferrer">#39985</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=semi-structured-data-management-1>Semi-structured Data Management<a href=#semi-structured-data-management-1 class=hash-link aria-label="Direct link to Semi-structured Data Management" title="Direct link to Semi-structured Data Management">​</a></h3>
<ul>
<li>Output the real SQL of prepared statements in audit logs. <a href=https://github.com/apache/doris/pull/43321 target=_blank rel="noopener noreferrer">#43321</a></li>
<li>The filebeat doris output plugin supports fault tolerance and progress reporting. <a href=https://github.com/apache/doris/pull/36355 target=_blank rel="noopener noreferrer">#36355</a></li>
<li>Optimized the performance of inverted index queries. <a href=https://github.com/apache/doris/pull/41547 target=_blank rel="noopener noreferrer">#41547</a> <a href=https://github.com/apache/doris/pull/41585 target=_blank rel="noopener noreferrer">#41585</a> <a href=https://github.com/apache/doris/pull/41567 target=_blank rel="noopener noreferrer">#41567</a> <a href=https://github.com/apache/doris/pull/41577 target=_blank rel="noopener noreferrer">#41577</a> <a href=https://github.com/apache/doris/pull/42060 target=_blank rel="noopener noreferrer">#42060</a> <a href=https://github.com/apache/doris/pull/42372 target=_blank rel="noopener noreferrer">#42372</a></li>
<li>The array function <code>array overlaps</code> supports acceleration using inverted indexes. <a href=https://github.com/apache/doris/pull/41571 target=_blank rel="noopener noreferrer">#41571</a></li>
<li>The IP function <code>is_ip_address_in_range</code> supports acceleration using inverted indexes. <a href=https://github.com/apache/doris/pull/41571 target=_blank rel="noopener noreferrer">#41571</a></li>
<li>Optimized the CAST performance of the VARIANT data type. <a href=https://github.com/apache/doris/pull/41775 target=_blank rel="noopener noreferrer">#41775</a> <a href=https://github.com/apache/doris/pull/42438 target=_blank rel="noopener noreferrer">#42438</a> <a href=https://github.com/apache/doris/pull/43320 target=_blank rel="noopener noreferrer">#43320</a></li>
<li>Optimized the CPU resource consumption of the Variant data type. <a href=https://github.com/apache/doris/pull/42856 target=_blank rel="noopener noreferrer">#42856</a> <a href=https://github.com/apache/doris/pull/43062 target=_blank rel="noopener noreferrer">#43062</a> <a href=https://github.com/apache/doris/pull/43634 target=_blank rel="noopener noreferrer">#43634</a></li>
<li>Optimized the metadata and execution memory resource consumption of the Variant data type. <a href=https://github.com/apache/doris/pull/42448 target=_blank rel="noopener noreferrer">#42448</a> <a href=https://github.com/apache/doris/pull/43326 target=_blank rel="noopener noreferrer">#43326</a> <a href=https://github.com/apache/doris/pull/41482 target=_blank rel="noopener noreferrer">#41482</a> <a href=https://github.com/apache/doris/pull/43093 target=_blank rel="noopener noreferrer">#43093</a> <a href=https://github.com/apache/doris/pull/43567 target=_blank rel="noopener noreferrer">#43567</a> <a href=https://github.com/apache/doris/pull/43620 target=_blank rel="noopener noreferrer">#43620</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=permissions>Permissions<a href=#permissions class=hash-link aria-label="Direct link to Permissions" title="Direct link to Permissions">​</a></h3>
<ul>
<li>Added a new configuration item <code>ldap_group_filter</code> in LDAP for custom group filtering. <a href=https://github.com/apache/doris/pull/43292 target=_blank rel="noopener noreferrer">#43292</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=other>Other<a href=#other class=hash-link aria-label="Direct link to Other" title="Direct link to Other">​</a></h3>
<ul>
<li>Supported displaying connection count information by user in FE monitoring items. <a href=https://github.com/apache/doris/pull/39200 target=_blank rel="noopener noreferrer">#39200</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=bug-fixes>Bug Fixes<a href=#bug-fixes class=hash-link aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=storage-1>Storage<a href=#storage-1 class=hash-link aria-label="Direct link to Storage" title="Direct link to Storage">​</a></h3>
<ul>
<li>Fixed the issue with using IPv6 hostnames. <a href=https://github.com/apache/doris/pull/40074 target=_blank rel="noopener noreferrer">#40074</a></li>
<li>Fixed the inaccurate display of broker/s3 load progress. <a href=https://github.com/apache/doris/pull/43535 target=_blank rel="noopener noreferrer">#43535</a></li>
<li>Fixed the issue where queries might hang from FE. <a href=https://github.com/apache/doris/pull/41303 target=_blank rel="noopener noreferrer">#41303</a> <a href=https://github.com/apache/doris/pull/42382 target=_blank rel="noopener noreferrer">#42382</a></li>
<li>Fixed the issue of duplicate auto-increment IDs under exceptional circumstances. <a href=https://github.com/apache/doris/pull/43774 target=_blank rel="noopener noreferrer">#43774</a>  <a href=https://github.com/apache/doris/pull/43983 target=_blank rel="noopener noreferrer">#43983</a></li>
<li>Fixed occasional NPE issues with groupcommit. <a href=https://github.com/apache/doris/pull/43635 target=_blank rel="noopener noreferrer">#43635</a></li>
<li>Fixed the inaccurate calculation of auto bucket. <a href=https://github.com/apache/doris/pull/41675 target=_blank rel="noopener noreferrer">#41675</a> <a href=https://github.com/apache/doris/pull/41835 target=_blank rel="noopener noreferrer">#41835</a></li>
<li>Fixed the issue where FE might not correctly plan multi-table flows after restart. <a href=https://github.com/apache/doris/pull/41677 target=_blank rel="noopener noreferrer">#41677</a> <a href=https://github.com/apache/doris/pull/42290 target=_blank rel="noopener noreferrer">#42290</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=compute-storage-decoupled-1>Compute-Storage Decoupled<a href=#compute-storage-decoupled-1 class=hash-link aria-label="Direct link to Compute-Storage Decoupled" title="Direct link to Compute-Storage Decoupled">​</a></h3>
<ul>
<li>Fixed the issue that MOW primary key tables with large delete bitmaps might cause coredump. <a href=https://github.com/apache/doris/pull/43088 target=_blank rel="noopener noreferrer">#43088</a> <a href=https://github.com/apache/doris/pull/43457 target=_blank rel="noopener noreferrer">#43457</a> <a href=https://github.com/apache/doris/pull/43479 target=_blank rel="noopener noreferrer">#43479</a> <a href=https://github.com/apache/doris/pull/43407 target=_blank rel="noopener noreferrer">#43407</a> <a href=https://github.com/apache/doris/pull/43297 target=_blank rel="noopener noreferrer">#43297</a> <a href=https://github.com/apache/doris/pull/43613 target=_blank rel="noopener noreferrer">#43613</a> <a href=https://github.com/apache/doris/pull/43615 target=_blank rel="noopener noreferrer">#43615</a> <a href=https://github.com/apache/doris/pull/43854 target=_blank rel="noopener noreferrer">#43854</a> <a href=https://github.com/apache/doris/pull/43968 target=_blank rel="noopener noreferrer">#43968</a> <a href=https://github.com/apache/doris/pull/44074 target=_blank rel="noopener noreferrer">#44074</a> <a href=https://github.com/apache/doris/pull/41793 target=_blank rel="noopener noreferrer">#41793</a> <a href=https://github.com/apache/doris/pull/42142 target=_blank rel="noopener noreferrer">#42142</a></li>
<li>Fixed the issue that segment files, when being a multiple of 5MB, would fail to upload objects. <a href=https://github.com/apache/doris/pull/43254 target=_blank rel="noopener noreferrer">#43254</a></li>
<li>Fixed the issue that the default retry policy of aws sdk did not take effect. <a href=https://github.com/apache/doris/pull/43575 target=_blank rel="noopener noreferrer">#43575</a> <a href=https://github.com/apache/doris/pull/43648 target=_blank rel="noopener noreferrer">#43648</a></li>
<li>Fixed the issue that altering storage vault could continue execution even when the wrong type was specified. <a href=https://github.com/apache/doris/pull/43489 target=_blank rel="noopener noreferrer">#43489</a> <a href=https://github.com/apache/doris/pull/43352 target=_blank rel="noopener noreferrer">#43352</a> <a href=https://github.com/apache/doris/pull/43495 target=_blank rel="noopener noreferrer">#43495</a></li>
<li>Fixed the issue that tablet_id might be 0 during the delayed commit process of large transactions. <a href=https://github.com/apache/doris/pull/42043 target=_blank rel="noopener noreferrer">#42043</a> <a href=https://github.com/apache/doris/pull/42905 target=_blank rel="noopener noreferrer">#42905</a></li>
<li>Fixed the issue that constant folding RCP and FE forwarding SQL might not be executed in the expected computation group. <a href=https://github.com/apache/doris/pull/43110 target=_blank rel="noopener noreferrer">#43110</a> <a href=https://github.com/apache/doris/pull/41819 target=_blank rel="noopener noreferrer">#41819</a> <a href=https://github.com/apache/doris/pull/41846 target=_blank rel="noopener noreferrer">#41846</a></li>
<li>Fixed the issue that meta-service did not strictly check instance_id upon receiving RPC. <a href=https://github.com/apache/doris/pull/43253 target=_blank rel="noopener noreferrer">#43253</a> <a href=https://github.com/apache/doris/pull/43832 target=_blank rel="noopener noreferrer">#43832</a></li>
<li>Fixed the issue that FE follower information_schema version did not update in time. <a href=https://github.com/apache/doris/pull/43496 target=_blank rel="noopener noreferrer">#43496</a></li>
<li>Fixed the issue of atomicity in file cache rename and inaccurate metrics. <a href=https://github.com/apache/doris/pull/42869 target=_blank rel="noopener noreferrer">#42869</a> <a href=https://github.com/apache/doris/pull/43504 target=_blank rel="noopener noreferrer">#43504</a> <a href=https://github.com/apache/doris/pull/43220 target=_blank rel="noopener noreferrer">#43220</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=lakehouse-1>Lakehouse<a href=#lakehouse-1 class=hash-link aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">​</a></h3>
<ul>
<li>Prohibited implicit conversion predicates from being pushed down to JDBC data sources to avoid inconsistent query results. <a href=https://github.com/apache/doris/pull/42102 target=_blank rel="noopener noreferrer">#42102</a></li>
<li>Fixed some read issues with high-version Hive transactional tables. <a href=https://github.com/apache/doris/pull/42226 target=_blank rel="noopener noreferrer">#42226</a></li>
<li>Fixed the issue that the Export command might cause deadlocks. <a href=https://github.com/apache/doris/pull/43083 target=_blank rel="noopener noreferrer">#43083</a> <a href=https://github.com/apache/doris/pull/43402 target=_blank rel="noopener noreferrer">#43402</a></li>
<li>Fixed the issue of being unable to query Hive views created by Spark. <a href=https://github.com/apache/doris/pull/43552 target=_blank rel="noopener noreferrer">#43552</a></li>
<li>Fixed the issue that Hive partition paths containing special characters led to incorrect partition pruning. <a href=https://github.com/apache/doris/pull/42906 target=_blank rel="noopener noreferrer">#42906</a></li>
<li>Fixed the issue that Iceberg Catalog could not use AWS Glue. <a href=https://github.com/apache/doris/pull/41084 target=_blank rel="noopener noreferrer">#41084</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=asynchronous-materialized-views-1>Asynchronous Materialized Views<a href=#asynchronous-materialized-views-1 class=hash-link aria-label="Direct link to Asynchronous Materialized Views" title="Direct link to Asynchronous Materialized Views">​</a></h3>
<ul>
<li>Fixed the issue that asynchronous materialized views might not refresh after the base table is rebuilt. <a href=https://github.com/apache/doris/pull/41762 target=_blank rel="noopener noreferrer">#41762</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=query-optimizer-2>Query Optimizer<a href=#query-optimizer-2 class=hash-link aria-label="Direct link to Query Optimizer" title="Direct link to Query Optimizer">​</a></h3>
<ul>
<li>Fixed the issue that partition pruning results might be incorrect when using multi-column range partitioning. <a href=https://github.com/apache/doris/pull/43332 target=_blank rel="noopener noreferrer">#43332</a></li>
<li>Fixed the issue of incorrect calculation results in some limit offset scenarios. <a href=https://github.com/apache/doris/pull/42576 target=_blank rel="noopener noreferrer">#42576</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=query-execution-2>Query Execution<a href=#query-execution-2 class=hash-link aria-label="Direct link to Query Execution" title="Direct link to Query Execution">​</a></h3>
<ul>
<li>Fixed the issue that hash join with array types larger than 4G could cause BE Core. <a href=https://github.com/apache/doris/pull/43861 target=_blank rel="noopener noreferrer">#43861</a></li>
<li>Fixed the issue that is null predicate operations might yield incorrect results in some scenarios. <a href=https://github.com/apache/doris/pull/43619 target=_blank rel="noopener noreferrer">#43619</a></li>
<li>Fixed the issue that bitmap types might produce incorrect output results in hash join. <a href=https://github.com/apache/doris/pull/43718 target=_blank rel="noopener noreferrer">#43718</a></li>
<li>Fixed some issues where function results were calculated incorrectly. <a href=https://github.com/apache/doris/pull/40710 target=_blank rel="noopener noreferrer">#40710</a> <a href=https://github.com/apache/doris/pull/39358 target=_blank rel="noopener noreferrer">#39358</a> <a href=https://github.com/apache/doris/pull/40929 target=_blank rel="noopener noreferrer">#40929</a> <a href=https://github.com/apache/doris/pull/40869 target=_blank rel="noopener noreferrer">#40869</a> <a href=https://github.com/apache/doris/pull/40285 target=_blank rel="noopener noreferrer">#40285</a> <a href=https://github.com/apache/doris/pull/39891 target=_blank rel="noopener noreferrer">#39891</a> <a href=https://github.com/apache/doris/pull/40530 target=_blank rel="noopener noreferrer">#40530</a> <a href=https://github.com/apache/doris/pull/41948 target=_blank rel="noopener noreferrer">#41948</a> <a href=https://github.com/apache/doris/pull/43588 target=_blank rel="noopener noreferrer">#43588</a></li>
<li>Fixed some issues with JSON type parsing. <a href=https://github.com/apache/doris/pull/39937 target=_blank rel="noopener noreferrer">#39937</a></li>
<li>Fixed issues with varchar and char types in runtime filter operations. <a href=https://github.com/apache/doris/pull/43758 target=_blank rel="noopener noreferrer">#43758</a> <a href=https://github.com/apache/doris/pull/43919 target=_blank rel="noopener noreferrer">#43919</a></li>
<li>Fixed some issues with the use of decimal256 in scalar and aggregate functions. <a href=https://github.com/apache/doris/pull/42136 target=_blank rel="noopener noreferrer">#42136</a> <a href=https://github.com/apache/doris/pull/42356 target=_blank rel="noopener noreferrer">#42356</a></li>
<li>Fixed the issue that arrow flight reported <code>Reach limit of connections</code> errors upon connection. <a href=https://github.com/apache/doris/pull/39127 target=_blank rel="noopener noreferrer">#39127</a></li>
<li>Fixed the issue of incorrect memory usage statistics for BE in k8s environments. <a href=https://github.com/apache/doris/pull/41123 target=_blank rel="noopener noreferrer">#41123</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=semi-structured-data-management-2>Semi-structured Data Management<a href=#semi-structured-data-management-2 class=hash-link aria-label="Direct link to Semi-structured Data Management" title="Direct link to Semi-structured Data Management">​</a></h3>
<ul>
<li>Adjusted the default values of <code>segment_cache_fd_percentage</code> and <code>inverted_index_fd_number_limit_percent</code>. <a href=https://github.com/apache/doris/pull/42224 target=_blank rel="noopener noreferrer">#42224</a></li>
<li>logstash now supports group_commit. <a href=https://github.com/apache/doris/pull/40450 target=_blank rel="noopener noreferrer">#40450</a></li>
<li>Fixed the issue of coredump when building index. <a href=https://github.com/apache/doris/pull/43246 target=_blank rel="noopener noreferrer">#43246</a> <a href=https://github.com/apache/doris/pull/43298 target=_blank rel="noopener noreferrer">#43298</a></li>
<li>Fixed issues with variant index. <a href=https://github.com/apache/doris/pull/43375 target=_blank rel="noopener noreferrer">#43375</a> <a href=https://github.com/apache/doris/pull/43773 target=_blank rel="noopener noreferrer">#43773</a></li>
<li>Fixed potential fd and memory leaks under abnormal compaction circumstances. <a href=https://github.com/apache/doris/pull/42374 target=_blank rel="noopener noreferrer">#42374</a></li>
<li>Inverted index match null now correctly returns null instead of false. <a href=https://github.com/apache/doris/pull/41786 target=_blank rel="noopener noreferrer">#41786</a></li>
<li>Fixed the issue of coredump when ngram bloomfilter index bf_size is set to 65536. <a href=https://github.com/apache/doris/pull/43645 target=_blank rel="noopener noreferrer">#43645</a></li>
<li>Fixed the issue of potential coredump during complex data type JOINs. <a href=https://github.com/apache/doris/pull/40398 target=_blank rel="noopener noreferrer">#40398</a></li>
<li>Fixed the issue of coredump with TVF JSON data. <a href=https://github.com/apache/doris/pull/43187 target=_blank rel="noopener noreferrer">#43187</a></li>
<li>Fixed the precision issue of bloom filter calculations for dates and times. <a href=https://github.com/apache/doris/pull/43612 target=_blank rel="noopener noreferrer">#43612</a></li>
<li>Fixed the issue of coredump with IPv6 type storage. <a href=https://github.com/apache/doris/pull/43251 target=_blank rel="noopener noreferrer">#43251</a></li>
<li>Fixed the issue of coredump when using VARIANT type with light_schema_change disabled. <a href=https://github.com/apache/doris/pull/40908 target=_blank rel="noopener noreferrer">#40908</a></li>
<li>Improved cache performance for high-concurrency point queries. <a href=https://github.com/apache/doris/pull/44077 target=_blank rel="noopener noreferrer">#44077</a></li>
<li>Fixed the issue that bloom filter indexes were not synchronized when columns were deleted. <a href=https://github.com/apache/doris/pull/43378 target=_blank rel="noopener noreferrer">#43378</a></li>
<li>Fixed instability issues with es catalog under special circumstances such as mixed array and scalar data. <a href=https://github.com/apache/doris/pull/40314 target=_blank rel="noopener noreferrer">#40314</a> <a href=https://github.com/apache/doris/pull/40385 target=_blank rel="noopener noreferrer">#40385</a> <a href=https://github.com/apache/doris/pull/43399 target=_blank rel="noopener noreferrer">#43399</a> <a href=https://github.com/apache/doris/pull/40614 target=_blank rel="noopener noreferrer">#40614</a></li>
<li>Fixed coredump issues caused by abnormal regular pattern matching. <a href=https://github.com/apache/doris/pull/43394 target=_blank rel="noopener noreferrer">#43394</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=permissions-1>Permissions<a href=#permissions-1 class=hash-link aria-label="Direct link to Permissions" title="Direct link to Permissions">​</a></h3>
<ul>
<li>Fixed several issues where permissions were not properly restricted after authorization. <a href=https://github.com/apache/doris/pull/43193 target=_blank rel="noopener noreferrer">#43193</a> <a href=https://github.com/apache/doris/pull/41723 target=_blank rel="noopener noreferrer">#41723</a> <a href=https://github.com/apache/doris/pull/42107 target=_blank rel="noopener noreferrer">#42107</a> <a href=https://github.com/apache/doris/pull/43306 target=_blank rel="noopener noreferrer">#43306</a></li>
<li>Enhanced several permission checks. <a href=https://github.com/apache/doris/pull/40688 target=_blank rel="noopener noreferrer">#40688</a> <a href=https://github.com/apache/doris/pull/40533 target=_blank rel="noopener noreferrer">#40533</a> <a href=https://github.com/apache/doris/pull/41791 target=_blank rel="noopener noreferrer">#41791</a> <a href=https://github.com/apache/doris/pull/42106 target=_blank rel="noopener noreferrer">#42106</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=other-1>Other<a href=#other-1 class=hash-link aria-label="Direct link to Other" title="Direct link to Other">​</a></h3>
<ul>
<li>
<p>Supplemented missing audit log fields in audit log tables and files. <a href=https://github.com/apache/doris/pull/43303 target=_blank rel="noopener noreferrer">#43303</a></p>
<ul>
<li><a href=https://doris.apache.org/docs/3.0/admin-manual/system-tables/internal_schema/audit_log target=_blank rel="noopener noreferrer">View Documentation</a></li>
</ul>
</li>
</ul></div></div></article><article class=margin-bottom--xl itemprop=blogPost itemscope itemtype=http://schema.org/BlogPosting><div class=markdown itemprop=articleBody><header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href=/blog/>Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class=s-tags><span class=s-tag>Release Notes</span></span></span></div><h2 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop=headline><a itemprop=url href=/blog/release-note-2.1.7/>Apache Doris 2.1.7 just released</a></h2><div class="blog-info text-center flex justify-center text-sm text-black"><span class=authors><span class="s-author text-black">Apache Doris</span></span><time datetime=2024-11-10T00:00:00.000Z itemprop=datePublished class="text-black ml-4">November 10, 2024</time></div></header><div class=markdown itemprop=articleBody><p>Dear community, <strong>Apache Doris version 2.1.7 was officially released on November 10, 2024.</strong> This version brings continuous upgrades and improvements. Additionally, several fixes have been implemented in areas such as the  to the Lakehouse, Async Materialized Views, and Semi-Structured Data Management, Query Optimizer and Permission Management.</p>
<p><strong>Quick Download:</strong> <a href=https://doris.apache.org/download/ target=_blank rel="noopener noreferrer">https://doris.apache.org/download/</a></p>
<p><strong>GitHub Release:</strong> <a href=https://github.com/apache/doris/releases target=_blank rel="noopener noreferrer">https://github.com/apache/doris/releases</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=behavior-changes>Behavior changes<a href=#behavior-changes class=hash-link aria-label="Direct link to Behavior changes" title="Direct link to Behavior changes">​</a></h2>
<ul>
<li>The following global variables will be forcibly set to the following default values:
<ul>
<li>enable_nereids_dml: true</li>
<li>enable_nereids_dml_with_pipeline: true</li>
<li>enable_nereids_planner: true</li>
<li>enable_fallback_to_original_planner: true</li>
<li>enable_pipeline_x_engine: true</li>
</ul>
</li>
<li>New columns have been added to the audit log. <a href=https://github.com/apache/doris/pull/42262 target=_blank rel="noopener noreferrer">#42262</a>
<ul>
<li>For more information, please  refer to <a href=https://doris.apache.org/docs/admin-manual/audit-plugin/ target=_blank rel="noopener noreferrer">docs</a></li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=new-features>New features<a href=#new-features class=hash-link aria-label="Direct link to New features" title="Direct link to New features">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=async-materialized-view>Async Materialized View<a href=#async-materialized-view class=hash-link aria-label="Direct link to Async Materialized View" title="Direct link to Async Materialized View">​</a></h3>
<ul>
<li>An asynchronous materialized view has added a property called <code>use_for_rewrite</code> to control whether it participates in transparent rewriting. <a href=https://github.com/apache/doris/pull/40332 target=_blank rel="noopener noreferrer">#40332</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=query-execution>Query Execution<a href=#query-execution class=hash-link aria-label="Direct link to Query Execution" title="Direct link to Query Execution">​</a></h3>
<ul>
<li>The list of changed session variables is now output in the Profile. <a href=https://github.com/apache/doris/pull/41016 target=_blank rel="noopener noreferrer">#41016</a></li>
<li>Support for <code>trim_in</code>, <code>ltrim_in</code>, and <code>rtrim_in</code> functions has been added. <a href=https://github.com/apache/doris/pull/42641 target=_blank rel="noopener noreferrer">#42641</a> (Note: This is a duplicate mention, but I'm including it as per your original list.)</li>
<li>Support for several URL functions (top_level_domain, first_significant_subdomain, cut_to_first_significant_subdomain) has been added. <a href=https://github.com/apache/doris/pull/42916 target=_blank rel="noopener noreferrer">#42916</a></li>
<li>The <code>bit_set</code> function has been added. <a href=https://github.com/apache/doris/pull/42099 target=_blank rel="noopener noreferrer">#42916</a></li>
<li>The <code>count_substrings</code> function has been added. <a href=https://github.com/apache/doris/pull/42055 target=_blank rel="noopener noreferrer">#42055</a></li>
<li>The <code>translate</code> and <code>url_encode</code> functions have been added. <a href=https://github.com/apache/doris/pull/41051 target=_blank rel="noopener noreferrer">#41051</a></li>
<li>The <code>normal_cdf</code>, <code>to_iso8601</code>, and <code>from_iso8601_date</code> functions have been added. <a href=https://github.com/apache/doris/pull/40695 target=_blank rel="noopener noreferrer">#40695</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=storage-management>Storage Management<a href=#storage-management class=hash-link aria-label="Direct link to Storage Management" title="Direct link to Storage Management">​</a></h3>
<ul>
<li>The <code>information_schema.table_options</code> and <code>table_properties</code> system tables have been added, supporting the querying of attributes set during table creation. <a href=https://github.com/apache/doris/pull/34384 target=_blank rel="noopener noreferrer">#34384</a></li>
<li>Support for <code>bitmap_empty</code> as a default value has been implemented. <a href=https://github.com/apache/doris/pull/40364 target=_blank rel="noopener noreferrer">#40364</a></li>
<li>A new session variable <code>require_sequence_in_insert</code> has been introduced to control whether a sequence column must be provided when performing <code>INSERT INTO SELECT</code> writes to a unique key table. <a href=https://github.com/apache/doris/pull/41655 target=_blank rel="noopener noreferrer">#41655</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=others>Others<a href=#others class=hash-link aria-label="Direct link to Others" title="Direct link to Others">​</a></h3>
<ul>
<li>Allow for generating flame graphs on the BE WebUI page.<a href=https://github.com/apache/doris/pull/41044 target=_blank rel="noopener noreferrer">#41044</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=improvements>Improvements<a href=#improvements class=hash-link aria-label="Direct link to Improvements" title="Direct link to Improvements">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=lakehouse>Lakehouse<a href=#lakehouse class=hash-link aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">​</a></h3>
<ul>
<li>Support for writing data to Hive text format tables. <a href=https://github.com/apache/doris/pull/40537 target=_blank rel="noopener noreferrer">#40537</a>
<ul>
<li>For more information, please  refer to <a href=https://doris.apache.org/docs/lakehouse/datalake-building/hive-build target=_blank rel="noopener noreferrer">docs</a></li>
</ul>
</li>
<li>Access MaxCompute data using MaxCompute Open Storage API. <a href=https://github.com/apache/doris/pull/41610 target=_blank rel="noopener noreferrer">#41610</a>
<ul>
<li>For more information, please  refer to <a href=https://doris.apache.org/docs/lakehouse/database/max-compute target=_blank rel="noopener noreferrer">docs</a></li>
</ul>
</li>
<li>Support for Paimon DLF Catalog. <a href=https://github.com/apache/doris/pull/41694 target=_blank rel="noopener noreferrer">#41694</a>
<ul>
<li>For more information, please  refer to <a href=https://doris.apache.org/docs/lakehouse/datalake-analytics/paimon target=_blank rel="noopener noreferrer">docs</a></li>
</ul>
</li>
<li>Added <code>table$partitions</code> syntax to directly query Hive partition information.<a href=https://github.com/apache/doris/pull/41230 target=_blank rel="noopener noreferrer">#41230</a>
<ul>
<li>For more information, please  refer to <a href=https://doris.apache.org/docs/lakehouse/datalake-analytics/hive target=_blank rel="noopener noreferrer">docs</a></li>
</ul>
</li>
<li>Support for reading Parquet files in brotli compression format.<a href=https://github.com/apache/doris/pull/42162 target=_blank rel="noopener noreferrer">#42162</a></li>
<li>Support for reading DECIMAL 256 types in Parquet files. <a href=https://github.com/apache/doris/pull/42241 target=_blank rel="noopener noreferrer">#42241</a></li>
<li>Support for reading Hive tables in OpenCsvSerde format.<a href=https://github.com/apache/doris/pull/42939 target=_blank rel="noopener noreferrer">#42939</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=async-materialized-view-1>Async Materialized View<a href=#async-materialized-view-1 class=hash-link aria-label="Direct link to Async Materialized View" title="Direct link to Async Materialized View">​</a></h3>
<ul>
<li>Refined the granularity of lock holding during the build process for asynchronous materialized views. <a href=https://github.com/apache/doris/pull/40402 target=_blank rel="noopener noreferrer">#40402</a> <a href=https://github.com/apache/doris/pull/41010 target=_blank rel="noopener noreferrer">#41010</a>.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=query-optimizer>Query optimizer<a href=#query-optimizer class=hash-link aria-label="Direct link to Query optimizer" title="Direct link to Query optimizer">​</a></h3>
<ul>
<li>Improved the accuracy of statistic information collection and usage in extreme cases to enhance planning stability. <a href=https://github.com/apache/doris/pull/40457 target=_blank rel="noopener noreferrer">#40457</a></li>
<li>Runtime filters can now be generated in more scenarios to improve query performance. <a href=https://github.com/apache/doris/pull/40815 target=_blank rel="noopener noreferrer">#40815</a></li>
<li>Enhanced constant folding capabilities for numerical, date, and string functions to boost query performance.  <a href=https://github.com/apache/doris/pull/40820 target=_blank rel="noopener noreferrer">#40820</a></li>
<li>Optimized the column pruning algorithm to enhance query performance. <a href=https://github.com/apache/doris/pull/41548 target=_blank rel="noopener noreferrer">#41548</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=query-execution-1>Query Execution<a href=#query-execution-1 class=hash-link aria-label="Direct link to Query Execution" title="Direct link to Query Execution">​</a></h3>
<ul>
<li>Supported parallel preparation to reduce the time consumed by short queries. <a href=https://github.com/apache/doris/pull/40270 target=_blank rel="noopener noreferrer">#40270</a></li>
<li>Corrected the names of some counters in the profile to match the audit logs. <a href=https://github.com/apache/doris/pull/41993 target=_blank rel="noopener noreferrer">#41993</a></li>
<li>Added new local shuffle rules to speed up certain queries. <a href=https://github.com/apache/doris/pull/40637 target=_blank rel="noopener noreferrer">#40637</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=storage-management-1>Storage Management<a href=#storage-management-1 class=hash-link aria-label="Direct link to Storage Management" title="Direct link to Storage Management">​</a></h3>
<ul>
<li>The <code>SHOW PARTITIONS</code> command now supports displaying the commit version. <a href=https://github.com/apache/doris/pull/28274 target=_blank rel="noopener noreferrer">#28274</a></li>
<li>Checked for unreasonable partition expressions when creating tables. <a href=https://github.com/apache/doris/pull/40158 target=_blank rel="noopener noreferrer">#40158</a></li>
<li>Optimized the scheduling logic when encountering EOF in Routine Load. <a href=https://github.com/apache/doris/pull/40509 target=_blank rel="noopener noreferrer">#40509</a></li>
<li>Made Routine Load aware of schema changes. <a href=https://github.com/apache/doris/pull/40508 target=_blank rel="noopener noreferrer">#40508</a></li>
<li>Improved the timeout logic for Routine Load tasks. <a href=https://github.com/apache/doris/pull/41135 target=_blank rel="noopener noreferrer">#41135</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=others-1>Others<a href=#others-1 class=hash-link aria-label="Direct link to Others" title="Direct link to Others">​</a></h3>
<ul>
<li>Allowed closing the built-in service port of BRPC via BE configuration. <a href=https://github.com/apache/doris/pull/41047 target=_blank rel="noopener noreferrer">#41047</a></li>
<li>Fixed issues with missing fields and duplicate records in audit logs. <a href=https://github.com/apache/doris/pull/43015 target=_blank rel="noopener noreferrer">#43015</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=bug-fixes>Bug fixes<a href=#bug-fixes class=hash-link aria-label="Direct link to Bug fixes" title="Direct link to Bug fixes">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=lakehouse-1>Lakehouse<a href=#lakehouse-1 class=hash-link aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">​</a></h3>
<ul>
<li>Fixed the inconsistency in the behavior of INSERT OVERWRITE with Hive. <a href=https://github.com/apache/doris/pull/39840 target=_blank rel="noopener noreferrer">#39840</a></li>
<li>Cleaned up temporarily created folders to address the issue of too many empty folders on HDFS.  <a href=https://github.com/apache/doris/pull/40424 target=_blank rel="noopener noreferrer">#40424</a></li>
<li>Resolved memory leaks in FE caused by using the JDBC Catalog in some cases. <a href=https://github.com/apache/doris/pull/40923 target=_blank rel="noopener noreferrer">#40923</a></li>
<li>Resolved memory leaks in BE caused by using the JDBC Catalog in some cases. <a href=https://github.com/apache/doris/pull/41266 target=_blank rel="noopener noreferrer">#41266</a></li>
<li>Fixed errors in reading Snappy compressed formats in certain scenarios. <a href=https://github.com/apache/doris/pull/40862 target=_blank rel="noopener noreferrer">#40862</a></li>
<li>Addressed potential FileSystem leaks on the FE side in certain scenarios. <a href=https://github.com/apache/doris/pull/41108 target=_blank rel="noopener noreferrer">#41108</a></li>
<li>Resolved issues where using EXPLAIN VERBOSE to view external table execution plans could cause null pointer exceptions in some cases. [#41231] (<a href=https://github.com/apache/doris/pull/41231 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/41231</a>)</li>
<li>Fixed the inability to read tables in Paimon parquet format. <a href=https://github.com/apache/doris/pull/41487 target=_blank rel="noopener noreferrer">#41487</a></li>
<li>Addressed performance issues introduced by compatibility changes in the JDBC Oracle Catalog.  <a href=https://github.com/apache/doris/pull/41407 target=_blank rel="noopener noreferrer">#41407</a></li>
<li>Disabled predicate pushing down after implicit conversion to resolve incorrect query results in some cases with JDBC Catalog. <a href=https://github.com/apache/doris/pull/42242 target=_blank rel="noopener noreferrer">#42242</a></li>
<li>Fixed issues with case-sensitive access to table names in the External Catalog. <a href=https://github.com/apache/doris/pull/42261 target=_blank rel="noopener noreferrer">#42261</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=async-materialized-view-2>Async Materialized View<a href=#async-materialized-view-2 class=hash-link aria-label="Direct link to Async Materialized View" title="Direct link to Async Materialized View">​</a></h3>
<ul>
<li>Fixed the issue where user-specified start times were not effective. <a href=https://github.com/apache/doris/pull/39573 target=_blank rel="noopener noreferrer">#39573</a></li>
<li>Resolved the issue of nested materialized views not refreshing. <a href=https://github.com/apache/doris/pull/40433 target=_blank rel="noopener noreferrer">#40433</a></li>
<li>Fixed the issue where materialized views might not refresh after the base table was deleted and recreated.  <a href=https://github.com/apache/doris/pull/41762 target=_blank rel="noopener noreferrer">#41762</a></li>
<li>Addressed issues where partition compensation rewrites could lead to incorrect results. <a href=https://github.com/apache/doris/pull/40803 target=_blank rel="noopener noreferrer">#40803</a></li>
<li>Fixed potential errors in rewrite results when <code>sql_select_limit</code> was set. <a href=https://github.com/apache/doris/pull/40106 target=_blank rel="noopener noreferrer">#40106</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=semi-structured-data-management>Semi-Structured Data Management<a href=#semi-structured-data-management class=hash-link aria-label="Direct link to Semi-Structured Data Management" title="Direct link to Semi-Structured Data Management">​</a></h3>
<ul>
<li>Fixed the issue of index file handle leaks. <a href=https://github.com/apache/doris/pull/41915 target=_blank rel="noopener noreferrer">#41915</a></li>
<li>Addressed inaccuracies in the <code>count()</code> function of inverted indexes in special cases. (#41127)[<a href=https://github.com/apache/doris/pull/41127 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/41127</a>]</li>
<li>Fixed exceptions with variant when light schema change was not enabled. <a href=https://github.com/apache/doris/pull/40908 target=_blank rel="noopener noreferrer">#40908</a></li>
<li>Resolved memory leaks when variant returns arrays. <a href=https://github.com/apache/doris/pull/41339 target=_blank rel="noopener noreferrer">#41339</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=query-optimizer-1>Query optimizer<a href=#query-optimizer-1 class=hash-link aria-label="Direct link to Query optimizer" title="Direct link to Query optimizer">​</a></h3>
<ul>
<li>Corrected potential errors in nullable calculations for filter conditions during external table queries, leading to execution exceptions. <a href=https://github.com/apache/doris/pull/41014 target=_blank rel="noopener noreferrer">#41014</a></li>
<li>Fixed potential errors in optimizing range comparison expressions. <a href=https://github.com/apache/doris/pull/41356 target=_blank rel="noopener noreferrer">#41356</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=query-execution-2>Query Execution<a href=#query-execution-2 class=hash-link aria-label="Direct link to Query Execution" title="Direct link to Query Execution">​</a></h3>
<ul>
<li>The match_regexp function could not correctly handle empty strings. <a href=https://github.com/apache/doris/pull/39503 target=_blank rel="noopener noreferrer">#39503</a></li>
<li>Resolved issues where the scanner thread pool could become stuck in high-concurrency scenarios. <a href=https://github.com/apache/doris/pull/40495 target=_blank rel="noopener noreferrer">#40495</a></li>
<li>Fixed errors in the results of the <code>data_floor</code> function. <a href=https://github.com/apache/doris/pull/41948 target=_blank rel="noopener noreferrer">#41948</a></li>
<li>Addressed incorrect cancel messages in some scenarios. <a href=https://github.com/apache/doris/pull/41798 target=_blank rel="noopener noreferrer">#41798</a></li>
<li>Fixed issues with excessive warning logs printed by arrow flight. <a href=https://github.com/apache/doris/pull/41770 target=_blank rel="noopener noreferrer">#41770</a></li>
<li>Resolved issues where runtime filters failed to send in some scenarios. <a href=https://github.com/apache/doris/pull/41698 target=_blank rel="noopener noreferrer">#41698</a></li>
<li>Fixed problems where some system table queries could not end normally or became stuck. <a href=https://github.com/apache/doris/pull/41592 target=_blank rel="noopener noreferrer">#41592</a></li>
<li>Addressed incorrect results from window functions. ]<a href=https://github.com/apache/doris/pull/40761 target=_blank rel="noopener noreferrer">#40761</a></li>
<li>Fixed issues where the encrypt and decrypt functions caused BE cores. <a href=https://github.com/apache/doris/pull/40726 target=_blank rel="noopener noreferrer">#40726</a></li>
<li>Resolved errors in the results of the conv function. <a href=https://github.com/apache/doris/pull/40530 target=_blank rel="noopener noreferrer">#40530</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=storage-management-2>Storage Management<a href=#storage-management-2 class=hash-link aria-label="Direct link to Storage Management" title="Direct link to Storage Management">​</a></h3>
<ul>
<li>Fixed import failures when Memtable migration was used in multi-replica scenarios with machine crashes.  <a href=https://github.com/apache/doris/pull/38003 target=_blank rel="noopener noreferrer">#38003</a></li>
<li>Addressed inaccurate memory statistics during the Memtable flush phase during imports. <a href=https://github.com/apache/doris/pull/39536 target=_blank rel="noopener noreferrer">#39536</a></li>
<li>Fixed fault tolerance issues with Memtable migration in multi-replica scenarios. <a href=https://github.com/apache/doris/pull/40477 target=_blank rel="noopener noreferrer">#40477</a></li>
<li>Resolved inaccurate bvar statistics with Memtable migration. <a href=https://github.com/apache/doris/pull/40985 target=_blank rel="noopener noreferrer">#40985</a></li>
<li>Fixed inaccurate progress reporting for S3 loads. <a href=https://github.com/apache/doris/pull/40987 target=_blank rel="noopener noreferrer">#40987</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=permissions>Permissions<a href=#permissions class=hash-link aria-label="Direct link to Permissions" title="Direct link to Permissions">​</a></h3>
<ul>
<li>Fixed permission issues related to show columns, show sync, and show data from db.table. <a href=https://github.com/apache/doris/pull/39726 target=_blank rel="noopener noreferrer">#39726</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=others-2>Others<a href=#others-2 class=hash-link aria-label="Direct link to Others" title="Direct link to Others">​</a></h3>
<ul>
<li>Fixed the issue where the audit log plugin for version 2.0 could not be used in version 2.1. <a href=https://github.com/apache/doris/pull/41400 target=_blank rel="noopener noreferrer">#41400</a></li>
</ul></div></div></article><article class=margin-bottom--xl itemprop=blogPost itemscope itemtype=http://schema.org/BlogPosting><div class=markdown itemprop=articleBody><header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href=/blog/>Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class=s-tags><span class=s-tag>Release Notes</span></span></span></div><h2 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop=headline><a itemprop=url href=/blog/release-note-3.0.0/>New milestone: Apache Doris 3.0 has been released</a></h2><div class="blog-info text-center flex justify-center text-sm text-black"><span class=authors><span class="s-author text-black">Apache Doris</span></span><time datetime=2024-10-15T00:00:00.000Z itemprop=datePublished class="text-black ml-4">October 15, 2024</time></div></header><div class=markdown itemprop=articleBody><p>We are excited to announce the release of Apache Doris 3.0!</p>
<p><strong>Starting from version 3.X, Apache Doris supports a compute-storage decoupled mode in addition to the compute-storage coupled mode for cluster deployment. With the cloud-native architecture that decouples the computation and storage layers, users can achieve physical isolation between query loads across multiple compute clusters, as well as isolation between read and write loads. Additionally, users can take advantage of low-cost shared storage systems such as object storage or HDFS to significantly reduce storage costs.</strong></p>
<p>Version 3.0 marks a milestone in the evolution of Apache Doris towards a unified data lake and data warehouse architecture. This version introduces the ability to write data back to data lakes, allowing users to perform data analysis, sharing, processing, and storage operations across multiple data sources within Apache Doris. With capabilities such as asynchronous materialized views, Apache Doris can serve as a unified data processing engine for enterprises, helping users better manage data across lakes, warehouses, and databases. Also, Apache Doris 3.0 introduces the Trino Connector. It allows users to quickly connect or adapt to more data sources, and leverage the high-performance compute engine of Doris to deliver faster query results than Trino.</p>
<p>Version 3.0 also enhances support for ETL batch processing scenarios, adding explicit transaction support for operations like <code>insert into select</code>, <code>delete</code> and <code>update</code>. The observability of query execution has also been improved.</p>
<p>In terms of performance, we have improved the framework capabilities, infrastructure, and rules of the query optimizer in version 3.0. This provides optimized performance, which has been proven by blind testing in more complex and diverse business scenarios.</p>
<p>The adaptive Runtime Filter computation method now accurately estimates filters based on data size during execution, delivering better performance under large data volumes and high loads. Additionally, asynchronous materialized view has been more stable and user-friendly in query acceleration and data modeling.</p>
<p><strong>During the development of version 3.0, over 200 contributors submitted nearly 5,000 optimizations</strong> and fixes to Apache Doris. Contributors from companies such as VeloDB, Baidu, Meituan, ByteDance, Tencent, Alibaba, Kwai, Huawei, and Tianyi Cloud actively collaborated with the community, contributing test cases from real-world use cases to help us improve Apache Doris. We extend our heartfelt thanks to all the contributors involved in the development, testing, and feedback process for this release.</p>
<ul>
<li>
<p><strong>GitHub</strong>: <a href=https://github.com/apache/doris/releases target=_blank rel="noopener noreferrer">https://github.com/apache/doris/releases</a></p>
</li>
<li>
<p><strong>Website</strong>: <a href=https://doris.apache.org/download target=_blank rel="noopener noreferrer">https://doris.apache.org/download</a></p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=1-compute-storage-decoupled-mode>1. Compute-storage decoupled mode<a href=#1-compute-storage-decoupled-mode class=hash-link aria-label="Direct link to 1. Compute-storage decoupled mode" title="Direct link to 1. Compute-storage decoupled mode">​</a></h2>
<p>Since V3.0, Apache Doris supports the compute-storage decoupled mode. Users can choose between it and the compute-storage coupled mode during cluster deployment.</p>
<p>In the compute-storage decoupled mode, the BE nodes no longer store the data, but instead, a shared storage layer (HDFS and object storage) is introduced as the shared data storage layer. The computing and storage resources can be scaled independently, bringing multiple benefits to users:</p>
<ul>
<li>
<p><strong>Workload isolation</strong>: Multiple compute clusters can share the same data, allowing users to isolate different business workloads or offline loads using separate compute clusters.</p>
</li>
<li>
<p><strong>Reduced storage costs</strong>: The full dataset is stored in the more cost-effective and highly reliable shared storage, with only hot data cached locally. Compared to the compute-storage coupled mode with three data replicas, the storage cost can be reduced by up to 90%.</p>
</li>
<li>
<p><strong>Elastic computing resources</strong>: Since no data is stored on the BE nodes, the computing resources can be scaled flexibly based on the load requirements. Users can scale in or out an individual compute cluster or increase/decrease the number of compute clusters. This also leads to cost savings.</p>
</li>
<li>
<p><strong>Improved system robustness</strong>: By storing the data in shared storage, Doris no longer needs to handle the complex logic of multi-replica consistency, thus simplifying distributed storage complexity and improving the overall system robustness.</p>
</li>
<li>
<p><strong>Flexible data sharing and cloning</strong>: The flexibility of the compute-storage decoupled mode extends beyond a single Doris cluster. Tables from one Doris cluster can be easily cloned to another Doris cluster, with just metadata replication.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=1-1-from-coupled-to-decoupled>1-1. From coupled to decoupled<a href=#1-1-from-coupled-to-decoupled class=hash-link aria-label="Direct link to 1-1. From coupled to decoupled" title="Direct link to 1-1. From coupled to decoupled">​</a></h3>
<p>In the compute-storage coupled mode, the Apache Doris architecture consists of two main process types: Frontend (FE) and Backend (BE). The FE is primarily responsible for user request access, query parsing and planning, metadata management, and node management. The BE is responsible for data storage and query plan execution.</p>
<p>The BE nodes employ an MPP (Massively Parallel Processing) distributed computing architecture, leveraging a multi-replica consistency protocol to ensure high service availability and high data reliability.</p>
<p><img decoding=async loading=lazy alt="From coupled to decoupled" src=/assets/images/storage-compute-decoupled-0c53e0b9a7c24a42e2dd2517680b0f5e.PNG width=1280 height=612 class=img_ev3q></p>
<p>The maturation of emerging cloud computing infrastructure, including public clouds, private clouds, and Kubernetes-based container platforms, has driven the need for cloud-native capabilities. Increasingly, users are seeking deeper integration between Apache Doris and cloud computing infrastructure to provide more elasticity.</p>
<p><strong>To address this need, the VeloDB team has designed and implemented a cloud-native version of Apache Doris that decouples compute and storage, known as VeloDB Cloud.  After extensive production testing and refinement across hundreds of enterprises over a long time, this cloud-native solution has now been contributed to the Apache Doris community, manifesting as the Apache Doris 3.0 in the compute-storage decoupled mode.</strong></p>
<p>In the compute-storage decoupled mode, the Apache Doris architecture consists of three layers:</p>
<ul>
<li><strong>Meta data layer</strong>: A new Meta Service module has been introduced to provide meta data services, such as processing database and table information, schemas, rowset meta, and transactions. The Meta Service is stateless and horizontally scalable. In V3.0, all of the BE's meta data and parts of the FE's meta data have been migrated to the Meta Service. We will finish the migration of the remains in future versions.</li>
<li><strong>Computation layer</strong>: The stateless BE nodes execute query plans and cache a portion of the data and tablet meta data locally to improve query performance. Multiple stateless BE nodes can be organized into a computing resource pool (i.e., compute cluster), and multiple compute clusters can share the same data and metadata service. The compute clusters can be elastically scaled by adding or removing nodes as needed.</li>
<li><strong>Shared storage layer</strong>: Data is persisted to the shared storage layer, which currently supports HDFS as well as various cloud-based object storage systems that are compatible with the S3 protocol, such as S3, OSS, GCS, Azure Blob, COS, BOS, and MinIO.</li>
</ul>
<p><img decoding=async loading=lazy alt="From coupled to decoupled-2" src=/assets/images/storage-compute-decoupled-2-82623382fce78f63315a2a07bb0e327a.JPEG width=1280 height=692 class=img_ev3q></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=1-2-design-highlight>1-2 Design highlight<a href=#1-2-design-highlight class=hash-link aria-label="Direct link to 1-2 Design highlight" title="Direct link to 1-2 Design highlight">​</a></h3>
<p>The design of the compute-storage decoupled mode of Apache Doris highlights the transformation of the FE's in-memory metadata model into a shared metadata service. This approach offers a globally consistent state view, allowing any node to directly submit writes without needing to go through the FE for publishing. During write operations, data is stored in shared storage, while metadata is managed by the metadata service. <strong>This effectively controls the number of small files in shared storage. Meanwhile, the real-time write performance for individual tables is nearly on par with that in the compute-storage coupled mode. The system's overall write capacity is no longer limited by the processing power of a single FE node.</strong></p>
<p><img decoding=async loading=lazy alt="Design highlight" src=/assets/images/design-hightlight-c14acd87500c4ada3740cb8fddfca025.PNG width=1280 height=545 class=img_ev3q></p>
<p>Based on the globally consistent state view, for data garbage collection, we have adopted a design approach for data deletion that is easier to prove correct and more efficient.</p>
<p>Specifically, data in the shared storage is incorporated into the globally consistent view offered by the shared meta data service. Whenever data is generated, we bind it to a separate, independent transaction. Similarly, for a meta data deletion operation, we also bind it to a separate, independent transaction. The purpose of this approach is to ensure that deletion and write operations cannot succeed together. The view records which data needs to be deleted, and the asynchronous deletion process can simply perform a forward deletion of the data based on the transaction records, without the need for reverse garbage collection.</p>
<p>As the tablet-related meta data in the FE is gradually migrated to the shared meta data service, the scalability of the Doris cluster will no longer be constrained by the memory capacity of a single FE node. Building upon the shared meta data service and the forward data deletion technique, we can conveniently expand functionality such as data sharing and lightweight cloning.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=1-3-comparison-with-alternative-solutions>1-3 Comparison with alternative solutions<a href=#1-3-comparison-with-alternative-solutions class=hash-link aria-label="Direct link to 1-3 Comparison with alternative solutions" title="Direct link to 1-3 Comparison with alternative solutions">​</a></h3>
<p>Another design of decoupling compute and storage in the industry is to store the data and BE node meta data in a shared object storage or HDFS. However, this approach brings the following problems:</p>
<ul>
<li>
<p><strong>Inability to support real-time writes</strong>: During data writes, the data is mapped to tablets based on the partitioning and bucketing rules, generating segment files and rowset meta data. During the write process, a two-phase commit (Publish) is performed through the FE. When a BE node receives the Publish request, it then sets the rowset as visible. The Publish operation must not fail. If the rowset meta data is stored in the shared storage, the total small file data during the real-time write process would triple the size of the actual data files - one replica of data files, one for rowset meta data, and another for rowset meta data changes during Publish. The Publish operation is driven by a single FE node, so the write capacity of a single table or even the entire system is limited by the FE node's capabilities.</p>
<p><img decoding=async loading=lazy alt="Comparison with alternative solutions" src=/assets/images/comparison-with-alternative-solutions-0b9bb94e642a30c74325b50b7e4a0856.png width=1280 height=491 class=img_ev3q></p>
<p>We compared the real-time data write performance of Apache Doris 3.0 with the above-described solution. We simulated 500 concurrent tasks writing 10,000 data files with 500 rows each, and 50 concurrent tasks writing 250 data files with 20,000 rows each, using the same computational resources.</p>
<p><strong>The results showed that at 50 concurrent tasks, the micro-batch write performances of Apache Doris in both compute-storage coupled and decoupled modes were almost identical, while the industry solution lagged behind Apache Doris by a factor of 100.</strong></p>
<p>At 500 concurrent tasks, the performance of Apache Doris in the compute-storage decoupled mode showed slight degradation, but it still maintained an 11X advantage over the industry solution. To ensure a fair test, Apache Doris did not enable the Group Commit feature (which the industry solution lacks). Enabling Group Commit would further enhance real-time write performance.</p>
<p><img decoding=async loading=lazy alt="Comparison with alternative solutions" src=/assets/images/real-time-write-performance.-e3ac58a309c1bb48d6e54669cbedb92c.png width=1280 height=734 class=img_ev3q></p>
<p>Additionally, the industry solution also faces stability and cost issues in terms of real-time data ingestion:</p>
<ul>
<li>
<p>Stability concerns: A large number of small files can put pressure on the shared storage, especially HDFS, and introduce stability risks.</p>
</li>
<li>
<p>High object storage request costs: Some public cloud object storage services charge 10 times more for Put and Delete operations compared to Get operations. A large number of small files can lead to a significant increase in object storage request costs, which can even exceed the storage costs.</p>
</li>
</ul>
</li>
<li>
<p><strong>Limited scalability</strong>: Use cases of the compute-storage decoupled model often handles larger data storage sizes, since the FE (Frontend) meta data is entirely in-memory, when the number of tablets reaches a certain high level (e.g. tens of millions), the FE's memory pressure can become a bottleneck that limits the overall write throughput of the system.</p>
</li>
<li>
<p><strong>Potential data deletion logic issues</strong>: In the compute-storage decoupled architecture, data is stored with one single replica. Therefore, the data deletion logic is critical for the system's reliability. The conventional approach of cross-system data deletion by comparing the differences can be challenging. During the write process, there is no way to completely avoid deletion and write from succeeding together, which can lead to data loss. Additionally, when the storage system experiences anomalies, the input used for difference calculation may be incorrect, which potentially leads to unintended data deletion.</p>
</li>
<li>
<p><strong>Data sharing and lightweight cloning</strong>: The flexibility of the decoupled storage-compute architecture can enable future data sharing and lightweight data cloning, reducing the burden of enterprise data management. However, if each cluster has a separate FE, after cloning data across clusters, it becomes difficult to accurately determine which data is no longer referenced and can be safely deleted, as calculating cross-cluster references can easily lead to unintended data deletion.</p>
</li>
</ul>
<p>By evolving the FE's full in-memory meta data model into a shared meta data service, Apache Doris 3.0 avoids all the aforementioned issues.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=1-4-query-performance-comparison>1-4 Query performance comparison<a href=#1-4-query-performance-comparison class=hash-link aria-label="Direct link to 1-4 Query performance comparison" title="Direct link to 1-4 Query performance comparison">​</a></h3>
<p>In the compute-storage decoupled mode, data needs to be read from the remote shared storage system, the main bottleneck has become the network bandwidth instead of the disk I/O in the compute-storage coupled mode.</p>
<p>To accelerate data access, Apache Doris has implemented a high-speed caching mechanism based on local disks, and provides two cache management policies: LRU (Least Recently Used) and TTL (Time-To-Live). The newly imported data is asynchronously written to the cache to accelerate the first-time access to the latest data. If the data required by a query is not in the cache, the system will read the data from the remote storage into memory and synchronously write it to the cache for subsequent queries.</p>
<p>In use cases involving multiple compute clusters, Apache Doris provides a cache preheating function. When a new compute cluster is established, users can choose to preheat specific data (such as tables or partitions) to further improve query efficiency.</p>
<p>In this context, we have conducted performance tests with different caching strategies in both the compute-storage coupled and decoupled modes, using the TPC-DS 1TB test dataset. The results are concluded as follows:</p>
<ul>
<li>
<p>When the cache is fully hit (i.e., all the data required for the query is loaded into the cache), <strong>the query performance of the compute-storage decoupled mode is on par with that of the compute-storage coupled mode</strong>.</p>
</li>
<li>
<p>When the cache is partially hit (i.e., the cache is cleared before the test, and data is gradually loaded into the cache during the test, with performance continuously improving), the query performance of the compute-storage decoupled mode is about 10% lower than that of the compute-storage coupled mode. This test scenario is the most similar to the real-life use cases.</p>
</li>
<li>
<p>When the cache is completely missed (i.e., the cache is cleared before every SQL execution, simulating an extreme case), the performance loss is around 35%. <strong>Even so, Apache Doris in the compute-storage decoupled mode delivers much higher performance than its alternative solutions.</strong></p>
</li>
</ul>
<p><img decoding=async loading=lazy alt="Query performance comparison" src=/assets/images/query-performance-comparison-796eaa4e76522d5b967b4117c8f71963.png width=1280 height=717 class=img_ev3q></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=1-5-write-speed-comparison>1-5 Write speed comparison<a href=#1-5-write-speed-comparison class=hash-link aria-label="Direct link to 1-5 Write speed comparison" title="Direct link to 1-5 Write speed comparison">​</a></h3>
<p>In terms of write performance, we have simulated two test cases under the same computing resources: batch import and high-concurrency real-time import. The comparison of write performance between the compute-storage coupled mode and the compute-storage decoupled mode is as follows:</p>
<ul>
<li>
<p><strong>Batch import</strong>: When importing the 1TB TPC-H and 1TB TPC-DS test datasets, <strong>the write performance of the compute-storage decoupled mode is 20.05% and 27.98% higher than the compute-storage coupled mode</strong>, respectively, under the single-replica configuration. During batch import, the segment file size is generally in the range of tens to hundreds of MB. In the compute-storage decoupled mode, the segment files are split into smaller files and concurrently uploaded to the object storage, which can result in higher throughput compared to writing to local disks. In real-life deployments, the compute-storage coupled mode typically uses three replicas, which means the write speed advantage of the compute-storage decoupled mode will be even more pronounced.</p>
</li>
<li>
<p><strong>High-concurrency real-time import</strong>: as described in the "Comparison with alternative solutions" section.</p>
</li>
</ul>
<p><img decoding=async loading=lazy alt="Write speed comparison" src=/assets/images/write-speed-comparison-e450974dbcba7200a9afc3c7b48b7329.png width=1280 height=772 class=img_ev3q></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=1-6-tips-for-production-environment>1-6 Tips for production environment<a href=#1-6-tips-for-production-environment class=hash-link aria-label="Direct link to 1-6 Tips for production environment" title="Direct link to 1-6 Tips for production environment">​</a></h3>
<ul>
<li>
<p><strong>Performance</strong>: For real-time data analysis, users can achieve query performance comparable to the compute-storage coupled mode by specifying a TTL (Time-To-Live) for the cache and writing newly ingested data into the cache. To prevent query jitter, users can cache the data generated by background tasks such as compaction and schema changes based on how frequently used the data is.</p>
</li>
<li>
<p><strong>Workload isolation</strong>: Users can achieve physical resource isolation for different business using multiple compute clusters. For workload isolation within a single compute cluster, users can utilize the Workload Group mechanism to limit and isolate resources for different queries.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=1-7-notes>1-7 Notes<a href=#1-7-notes class=hash-link aria-label="Direct link to 1-7 Notes" title="Direct link to 1-7 Notes">​</a></h3>
<ul>
<li>
<p>Apache Doris 3.0 does not support the co-existence of the compute-storage coupled mode and the compute-storage decoupled mode. Users need to specify one of them during cluster deployment.</p>
</li>
<li>
<p>If users need the compute-storage coupled mode, following the <a href=https://doris.apache.org/docs/3.0/install/source-install/compilation-with-docker/ target=_blank rel="noopener noreferrer">documentation</a> for its deployment and upgrade. We recommend using Doris Manager for quick deployment and cluster upgrades. However, the compute-storage decoupled mode does not yet support Doris Manager deployment and upgrade. We will continue iteration for better support in future versions.</p>
</li>
<li>
<p>Currently Apache Doris does not support in-place upgrade from V2.1 to the compute-storage decoupled mode of V3.0. For such purpose, users need to perform data migration after deploying the compute-storage decoupled clusters. In the future, we will support migration without service interruption through the CCR (Change Data Capture) capability.</p>
</li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_Gfwi alert alert--info"><div class=admonitionHeading_f1Ed>info</div><div class=admonitionContent_UjKb><p>See doc:
<a href=https://doris.apache.org/docs/3.0/compute-storage-decoupled/overview/ target=_blank rel="noopener noreferrer">https://doris.apache.org/docs/3.0/compute-storage-decoupled/overview/</a></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=2-data-lakehouse>2. Data lakehouse<a href=#2-data-lakehouse class=hash-link aria-label="Direct link to 2. Data lakehouse" title="Direct link to 2. Data lakehouse">​</a></h2>
<p>Apache Doris is positioned as a real-time data warehouse, but it is much more than that. In previous versions, we have consistently pushed beyond the boundaries of traditional data warehouse capabilities, advancing towards a unified data lakehouse. Version 3.0 marks a milestone in this journey, with its capabilities in the lakehouse architecture becoming fully mature. We believe that a unified lakehouse is identified by <strong>boundaryless data</strong> and <strong>lakehouse fusion</strong>:</p>
<p><strong>Boundaryless data: Apache Doris serves as a unified query processing engine, breaking down data barriers across different systems. It provides a consistent and ultra-fast analysis experience across all data sources, including data warehouses, data lakes, data streams, and local data files.</strong></p>
<ul>
<li>
<p><strong>Lakehouse query acceleration</strong>: Without the need to migrate data to Apache Doris, users can leverage Doris’ efficient query engine to directly query data stored in data lakes such as Iceberg, Hudi, Paimon, and offline data warehouses like Hive, thereby accelerating query analysis.</p>
</li>
<li>
<p><strong>Federated analysis</strong>: By extending its catalog and storage plugins, Apache Doris enhances its federated analysis capabilities, allowing users to perform unified analysis across multiple heterogeneous data sources without physically centralizing the data in a single storage system. This enables external table queries and federated joins between internal and external tables, breaking down data silos and providing globally consistent data insights.</p>
</li>
<li>
<p><strong>Data lake construction</strong>: Apache Doris introduces write-back functionality for Hive and Iceberg, allowing users to directly create Hive and Iceberg tables through Doris and write data into them. This allows users to write internal table data back to the offline lakehouse or process offline lakehouse data using Doris and save the results back into the lakehouse, simplifying and streamlining the data lake construction process.</p>
</li>
</ul>
<p><strong>Lakehouse fusion: As data lake architectures become increasingly complex, the costs of technology selection and maintenance rise for users. Achieving consistent fine-grained access control across multiple systems also becomes challenging, and real-time performance suffers. To address this, Apache Doris integrates core features of the data lake, transforming itself into a lightweight, efficient, native real-time lakehouse.</strong></p>
<ul>
<li>
<p><strong>Real-time data updates</strong>: Starting with version 1.2, Apache Doris enhanced the primary key model by introducing Merge-on-Write, supporting real-time updates. This feature allows high-frequency, real-time data updates based on primary key changes from upstream data sources.</p>
</li>
<li>
<p><strong>Data science and</strong> <strong>AI</strong> <strong>computation support</strong>: From version 2.1, Apache Doris, using the efficient Arrow Flight protocol, increased the openness of its storage system and its support for various compute loads, enabling data science and AI computations.</p>
</li>
<li>
<p><strong>Enhancements for semi-structured and unstructured Data</strong>: Apache Doris has introduced support for data types like Array, Map, Struct, JSON, and Variant, with plans to support vector indexing in the future.</p>
</li>
<li>
<p><strong>Improved resource efficiency by decoupling storage and compute</strong>: With version 3.0, Apache Doris supports a decoupled storage and compute mode, further improving resource efficiency and scalability.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=2-1-faster-queries-in-the-data-lakehouse>2-1 Faster queries in the data lakehouse<a href=#2-1-faster-queries-in-the-data-lakehouse class=hash-link aria-label="Direct link to 2-1 Faster queries in the data lakehouse" title="Direct link to 2-1 Faster queries in the data lakehouse">​</a></h3>
<p>TPC-H and TPC-DS benchmarking proves that Apache Doris achieves average query performance that is 3 to 5 times faster than Trino/Presto.</p>
<p>In V3.0, we have focused on optimizing query performance for production environments, including:</p>
<ul>
<li>
<p><strong>More granular task splitting strategy</strong>: By adjusting the consistent hashing algorithm and introducing a task sharding weighting mechanism, we ensure balanced query loads across all nodes.</p>
</li>
<li>
<p><strong>Scheduling optimizations for use cases with numerous partitions and files</strong>: For cases with a large number of files (over 1 million), we have largely reduced query latency (from 100 seconds to 10 seconds) and alleviated memory pressure on the Frontend (FE) by asynchronously and batch-fetching file shards.</p>
</li>
</ul>
<p>We will continue to specifically enhance query acceleration performance in real-world business scenarios, improve the actual user experience, and build an industry-leading lakehouse query acceleration engine.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=2-2-federated-analysis-more-data-connectors>2-2 Federated analysis: more data connectors<a href=#2-2-federated-analysis-more-data-connectors class=hash-link aria-label="Direct link to 2-2 Federated analysis: more data connectors" title="Direct link to 2-2 Federated analysis: more data connectors">​</a></h3>
<p>Previous versions of Apache Doris support connectors for over 10 mainstream data lakehouses, warehouses, and relational databases. In V3.0, we have introduced the Trino Connector compatibility framework, which expands the range of data sources that Apache Doris can connect to. With this framework, users can easily adapt their existing setups to access corresponding data sources using Doris and leverage its high-speed computing engine for data analysis.</p>
<p>Currently, Doris has completed adaptations for Delta Lake, Kudu, BigQuery, Kafka, TPCH, and TPCDS. We also encourage contributions from developers to prolong this list.</p>
<div class="theme-admonition theme-admonition-info admonition_Gfwi alert alert--info"><div class=admonitionHeading_f1Ed>Note</div><div class=admonitionContent_UjKb><p>See doc:<ul>
<li>
<p>Trino Connector: <a href=https://doris.apache.org/community/how-to-contribute/trino-connector-developer-guide/ target=_blank rel="noopener noreferrer">https://doris.apache.org/community/how-to-contribute/trino-connector-developer-guide/</a></p>
</li>
<li>
<p>TPC-H: <a href=https://doris.apache.org/docs/3.0/lakehouse/datalake-analytics/tpch/ target=_blank rel="noopener noreferrer">https://doris.apache.org/docs/3.0/lakehouse/datalake-analytics/tpch/</a></p>
</li>
<li>
<p>TPC-DS: <a href=https://doris.apache.org/docs/3.0/lakehouse/datalake-analytics/tpcds/ target=_blank rel="noopener noreferrer">https://doris.apache.org/docs/3.0/lakehouse/datalake-analytics/tpcds/</a></p>
</li>
<li>
<p>Delta Lake: <a href=https://doris.apache.org/docs/3.0/lakehouse/datalake-analytics/deltalake/ target=_blank rel="noopener noreferrer">https://doris.apache.org/docs/3.0/lakehouse/datalake-analytics/deltalake/</a></p>
</li>
<li>
<p>Kudu: <a href=https://doris.apache.org/docs/3.0/lakehouse/datalake-analytics/kudu/ target=_blank rel="noopener noreferrer">https://doris.apache.org/docs/3.0/lakehouse/datalake-analytics/kudu/</a></p>
</li>
<li>
<p>BigQuery: <a href=https://doris.apache.org/docs/3.0/lakehouse/datalake-analytics/bigquery/ target=_blank rel="noopener noreferrer">https://doris.apache.org/docs/3.0/lakehouse/datalake-analytics/bigquery/</a></p>
</li>
</ul></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=2-3-data-lake-building>2-3 Data lake building<a href=#2-3-data-lake-building class=hash-link aria-label="Direct link to 2-3 Data lake building" title="Direct link to 2-3 Data lake building">​</a></h3>
<p>In V3.0, we have introduced data writeback functionality for Hive and Iceberg. This allows users to create Hive and Iceberg tables directly through Doris and write data into these tables, and enables users to perform data analysis, sharing, processing, and storage operations across multiple data sources within Doris.</p>
<p>In future iterations, Apache Doris will further enhance support for data lake table formats and improve the openness of storage APIs.</p>
<div class="theme-admonition theme-admonition-info admonition_Gfwi alert alert--info"><div class=admonitionHeading_f1Ed>Note</div><div class=admonitionContent_UjKb><p>See doc: <a href=https://doris.apache.org/docs/3.0/lakehouse/datalake-building/hive-build/ target=_blank rel="noopener noreferrer">https://doris.apache.org/docs/3.0/lakehouse/datalake-building/hive-build/</a></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=3-upgraded-semi-structured-data-analysis-capabilities>3. Upgraded semi-structured data analysis capabilities<a href=#3-upgraded-semi-structured-data-analysis-capabilities class=hash-link aria-label="Direct link to 3. Upgraded semi-structured data analysis capabilities" title="Direct link to 3. Upgraded semi-structured data analysis capabilities">​</a></h2>
<p>In versions 2.0 and 2.1, Apache Doris introduced some well-embraced features such as inverted index, NGram Bloom Filter, and Variant data type to support high-performance full-text search and multi-dimensional analysis. With them, the storage and processing of complex semi-structured data have been more flexible and efficient.</p>
<p>In V3.0, we have further enhanced the capabilities in this scenario.</p>
<p>After extensive testing in production environments, the Variant data type has gained sufficient stability and become the preferred choice for JSON data storage and analysis. In V3.0, we have made multiple optimizations to it:</p>
<ul>
<li>
<p>Support for indexing of the Variant data type to accelerate queries, including inverted index, Bloom Filter index, and the built-in ZoneMap index.</p>
</li>
<li>
<p>Support for flexible partial column updates for Unique Key tables containing the Variant data type.</p>
</li>
<li>
<p>Support for the use of the Variant data type in the compute-storage decoupled mode, with optimizations of its metadata storage.</p>
</li>
<li>
<p>Support for exporting the Variant data type to formats such as Parquet and CSV.</p>
</li>
</ul>
<p>The inverted index, introduced since V2.0, has reached a high level of maturity after more than a year of refinement and is now running in production environments of hundreds of enterprises. In V3.0, we have made multiple optimizations to the inverted index:</p>
<ul>
<li>
<p>After performance optimizations, including lock concurrency, Apache Doris outperforms Elasticsearch in key metrics such as query latency and concurrency in real-time reporting analysis.</p>
</li>
<li>
<p>Optimized index file in the compute-storage decoupled mode to reduce remote storage calls and decrease index query latency.</p>
</li>
<li>
<p>Support for the Array data type to accelerate the <code>array_contains</code> queries.</p>
</li>
<li>
<p>Enhanced the <code>match_phrase_*</code> functionality, including support for slop and phrase prefix matching <code>match_phrase_prefix</code>.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=4-enhanced-etl-capabilities>4. Enhanced ETL capabilities<a href=#4-enhanced-etl-capabilities class=hash-link aria-label="Direct link to 4. Enhanced ETL capabilities" title="Direct link to 4. Enhanced ETL capabilities">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=4-1-transaction-improvements>4-1. Transaction improvements<a href=#4-1-transaction-improvements class=hash-link aria-label="Direct link to 4-1. Transaction improvements" title="Direct link to 4-1. Transaction improvements">​</a></h3>
<p>Data processing in data warehouses often involves multiple data changes that need to be handled as a single transaction. V3.0 provides explicit transaction support for <code>insert into select</code>, <code>delete</code>, and <code>update</code> operations. Example cases include:</p>
<ul>
<li>
<p><strong>Transactional requirements</strong>: For example, when updating data within a time range, the typical approach is to first delete the data in that time range, and then insert the new data. Considering that the data might already be in service, there is a need to ensure that queries visit either the old data or the new data. Thus, it can be achieved by executing the <code>delete</code> and <code>insert into select</code> operations in a transaction.</p>
<div class="language-Java language-java codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#F8F8F2;--prism-background-color:#282A36><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-java codeBlock_bY9V thin-scrollbar" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_e6Vv><span class=token-line style=color:#F8F8F2><span class="token constant" style="color:rgb(189, 147, 249)">BEGIN</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token constant" style="color:rgb(189, 147, 249)">DELETE</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">FROM</span><span class="token plain"> table </span><span class="token constant" style="color:rgb(189, 147, 249)">WHERE</span><span class="token plain"> date </span><span class="token operator">>=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"2024-07-01"</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">AND</span><span class="token plain"> date </span><span class="token operator">&lt;=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"2024-07-31"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token constant" style="color:rgb(189, 147, 249)">INSERT</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">INTO</span><span class="token plain"> table </span><span class="token constant" style="color:rgb(189, 147, 249)">SELECT</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><span class="token class-name">FROM</span><span class="token plain"> stage_table</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token constant" style="color:rgb(189, 147, 249)">COMMIT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Simplified the processing of failed tasks</strong>: For example, when two <code>insert into select</code> operations are executed within a single transaction, if any of the operations fail, it can be retried directly.</p>
<div class="language-Java language-java codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#F8F8F2;--prism-background-color:#282A36><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-java codeBlock_bY9V thin-scrollbar" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_e6Vv><span class=token-line style=color:#F8F8F2><span class="token constant" style="color:rgb(189, 147, 249)">BEGIN</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">WITH</span><span class="token plain"> </span><span class="token class-name">LABEL</span><span class="token plain"> label_etl_1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token constant" style="color:rgb(189, 147, 249)">INTO</span><span class="token plain"> table1 </span><span class="token constant" style="color:rgb(189, 147, 249)">SELECT</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><span class="token class-name">FROM</span><span class="token plain"> stage_table1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token constant" style="color:rgb(189, 147, 249)">INSERT</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">INTO</span><span class="token plain"> table </span><span class="token constant" style="color:rgb(189, 147, 249)">SELECT</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><span class="token class-name">FROM</span><span class="token plain"> stage_table</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token constant" style="color:rgb(189, 147, 249)">COMMIT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
</li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_Gfwi alert alert--info"><div class=admonitionHeading_f1Ed>Note</div><div class=admonitionContent_UjKb><p>See doc: <a href=https://doris.apache.org/docs/3.0/data-operate/transaction/ target=_blank rel="noopener noreferrer">https://doris.apache.org/docs/3.0/data-operate/transaction/</a>
Currently, explicit transaction synchronization is not supported in Cross-Cluster Replication (CCR).</div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=4-2-improved-observability>4-2. Improved observability<a href=#4-2-improved-observability class=hash-link aria-label="Direct link to 4-2. Improved observability" title="Direct link to 4-2. Improved observability">​</a></h3>
<ul>
<li>
<p><strong>Real-time profile retrieval</strong>: In previous versions, due to issues with the execution plan or the data, some complex queries might have high computational requirements, so developers can only access the query profile for performance analysis after the completion of the query. This makes it hard to promptly identify issues in query execution to guarantee stability of the production environment. Now, with the ability to retrieve real-time profiles, V3.0 allows users to monitor query execution as the query is running. It also allows them to better monitor the progress of each ETL job.</p>
</li>
<li>
<p><strong><code>backend_active_tasks</code> system table</strong>: The <code>backend_active_tasks</code> system table provides real-time resource consumption information for each query on each BE node. Users can analyze this system table using SQL to obtain the resource usage of each query, which helps identify large queries or abnormal workloads.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=5-asynchronous-materialized-view>5. Asynchronous materialized view<a href=#5-asynchronous-materialized-view class=hash-link aria-label="Direct link to 5. Asynchronous materialized view" title="Direct link to 5. Asynchronous materialized view">​</a></h2>
<p>In V3.0, asynchronous materialized view is faster and more stable. It is also more user-friendly for query acceleration and data modeling scenarios. We have restructured the logic for transparent rewrite and expanded its capabilities, making it 2X faster.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=5-1-refresh>5-1 Refresh<a href=#5-1-refresh class=hash-link aria-label="Direct link to 5-1 Refresh" title="Direct link to 5-1 Refresh">​</a></h3>
<ul>
<li>
<p>Support for incremental update of materialized views by partitions and partition roll-ups on materialized views to allow refreshes at different granularities.</p>
</li>
<li>
<p>Support for nested materialized views, which is useful in data modeling scenarios.</p>
</li>
<li>
<p>Support for index creation and sort key specification in asynchronous materialized views, which will improve query performance after the materialized view is hit.</p>
</li>
<li>
<p>Higher usability of materialized view DDL with support for atomically replacing materialized views, allowing modifications to the materialized view definition SQL while keeping the materialized view available.</p>
</li>
<li>
<p>Support for non-deterministic functions in materialized views to better serve daily materialized view creation.</p>
</li>
<li>
<p>Support for trigger-based materialized view refresh, which ensures data consistency in data modeling with nested materialized views.</p>
</li>
<li>
<p>Support for a broader range of SQL patterns for building partitioned materialized views, making the incremental update capability available to more use cases.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=5-2-refresh-stability>5-2 Refresh stability<a href=#5-2-refresh-stability class=hash-link aria-label="Direct link to 5-2 Refresh stability" title="Direct link to 5-2 Refresh stability">​</a></h3>
<ul>
<li>V3.0 supports specifying a Workload Group for building materialized views. This is to limit the resources used by the materialized view build process and ensure that sufficient resources remain available for ongoing queries.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=5-3-transparent-rewrite>5-3 Transparent rewrite<a href=#5-3-transparent-rewrite class=hash-link aria-label="Direct link to 5-3 Transparent rewrite" title="Direct link to 5-3 Transparent rewrite">​</a></h3>
<ul>
<li>
<p>Support for transparent rewrite of more Join types, including derived Joins. Even when there is a mismatch of Join types between the query and materialized view, transparent rewrite can still be performed by compensating with additional predicates, as long as the materialized view can provide all the data needed for the query.</p>
</li>
<li>
<p>Support for more aggregate functions for roll-up as well as rewrite of multi-dimensional aggregations like GROUPING SETS, ROLLUP, and CUBE; support rewriting queries with aggregations when the materialized view does not contain aggregations, simplifying Join operations and expression computation.</p>
</li>
<li>
<p>Support for transparent rewrite of nested materialized views, enabling higher performance for complex queries.</p>
</li>
<li>
<p>For partially invalid partitioned materialized views, V3.0 supports <code>Union All</code> the base tables for data completion, expanding the applicability of partitioned materialized views.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=5-4-transparent-rewrite-performance>5-4 Transparent rewrite performance<a href=#5-4-transparent-rewrite-performance class=hash-link aria-label="Direct link to 5-4 Transparent rewrite performance" title="Direct link to 5-4 Transparent rewrite performance">​</a></h3>
<ul>
<li>Continuous optimization has been done to improve the transparent rewrite performance, achieving 2X the speed compared to version 2.1.0.</li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_Gfwi alert alert--info"><div class=admonitionHeading_f1Ed>Note</div><div class=admonitionContent_UjKb><p>See doc:<p><a href=https://doris.apache.org/docs/3.0/query/view-materialized-view/query-async-materialized-view target=_blank rel="noopener noreferrer">https://doris.apache.org/docs/3.0/query/view-materialized-view/query-async-materialized-view</a><p><a href=https://doris.apache.org/docs/3.0/query/view-materialized-view/async-materialized-view/ target=_blank rel="noopener noreferrer">https://doris.apache.org/docs/3.0/query/view-materialized-view/async-materialized-view/</a></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=6-performance-improvement>6. Performance improvement<a href=#6-performance-improvement class=hash-link aria-label="Direct link to 6. Performance improvement" title="Direct link to 6. Performance improvement">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=6-1-smarter-optimizer>6-1 Smarter optimizer<a href=#6-1-smarter-optimizer class=hash-link aria-label="Direct link to 6-1 Smarter optimizer" title="Direct link to 6-1 Smarter optimizer">​</a></h3>
<p>In V3.0, the query optimizer has been enhanced in terms of framework capabilities, distributed plan support, optimizer infrastructure, and rule expansion. It provides better optimization capabilities for more complex and diverse business scenarios, with higher blind test performance for complex SQL:</p>
<ul>
<li>
<p><strong>Improved plan enumeration capability</strong>: The key structure Memo for plan enumeration has been restructured and normalized. This improves the efficiency of the Cascades framework in plan enumeration and the possibility of producing better plans. Additionally, it fixes incomplete column pruning during the Join Reorder process in older versions, which led to unnecessary overhead of the Join operator, thus improving the execution performance in the relevant scenarios.</p>
</li>
<li>
<p><strong>Improved distributed plan support</strong>: The distributed query plan has been enhanced to allow aggregation, join, and window function operations to more intelligently identify the data characteristics of intermediate computation results, avoiding ineffective data redistribution operations. Meanwhile, we have optimized the execution under the multi-replica continuous execution mode, making it more data cache-friendly.</p>
</li>
<li>
<p><strong>Improved optimizer infrastructure</strong>: V3 has fixed several issues in cost model and statistics information estimation. The fixes to the cost model are more adaptable to the evolution of the execution engine, making the execution plan more stable compared to previous versions.</p>
</li>
<li>
<p><strong>Enhanced Runtime Filter plan support</strong>: On the basis of Join Runtime Filter, V3.0 has expanded the capability of the TopN Runtime Filter to achieve better performance in use cases that involve a TopN operator.</p>
</li>
<li>
<p><strong>Enriched optimization rule library</strong>: Based on user feedback and internal testing results, we have introduced optimization rules such as Intersect Reorder to enrich the rule set of the optimizer.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=6-2-self-adaptive-runtime-filter>6-2 Self-adaptive Runtime Filter<a href=#6-2-self-adaptive-runtime-filter class=hash-link aria-label="Direct link to 6-2 Self-adaptive Runtime Filter" title="Direct link to 6-2 Self-adaptive Runtime Filter">​</a></h3>
<p>In previous versions, the generation of Runtime Filter relies on manual setting by users based on statistical information. However, inaccurate settings in certain cases could lead to performance instability.</p>
<p>In V3.0, Doris implements a self-adaptive Runtime Filter calculation approach. It can estimate the Runtime Filter at runtime based on the data size with high accuracy, enabling better performance in use cases with large data volumes and high workloads.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=6-3-function-performance-optimization>6-3 Function performance optimization<a href=#6-3-function-performance-optimization class=hash-link aria-label="Direct link to 6-3 Function performance optimization" title="Direct link to 6-3 Function performance optimization">​</a></h3>
<ul>
<li>V3.0 has improved the vectorized implementation of dozens of functions, enabling a performance improvement of over 50% for some commonly used functions.</li>
<li>V3.0 has also made extensive optimizations to the aggregation of nullable data types, enabling a 30% performance improvement.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=6-4-blind-test-performance-improvement>6-4 Blind test performance improvement<a href=#6-4-blind-test-performance-improvement class=hash-link aria-label="Direct link to 6-4 Blind test performance improvement" title="Direct link to 6-4 Blind test performance improvement">​</a></h3>
<p>Our blind tests on V3.0 and V2.1 show that the new version is 7.3% and 6.2% faster in TPC-DS and TPC-H benchmark tests, respectively.</p>
<p><img decoding=async loading=lazy alt="Blind test performance improvement" src=/assets/images/blind-test-performance-improvement-f09420ba8b50be53ab8eb1c410f3f3fd.png width=1280 height=823 class=img_ev3q></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=7-new-features>7. New features<a href=#7-new-features class=hash-link aria-label="Direct link to 7. New features" title="Direct link to 7. New features">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=7-1-java-udtf>7-1 Java UDTF<a href=#7-1-java-udtf class=hash-link aria-label="Direct link to 7-1 Java UDTF" title="Direct link to 7-1 Java UDTF">​</a></h3>
<p>Version 3.0 has added support for Java UDTFs. The key operations are as follows:</p>
<ul>
<li>
<p>Implementing a UDTF: Similar to a UDF, a UDTF requires the user to implement an <code>evaluate</code> method. Note that the return value of a UDTF function must be of the <code>Array</code> data type.</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#F8F8F2;--prism-background-color:#282A36><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_e6Vv><span class=token-line style=color:#F8F8F2><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> class UDTFStringTest {</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> ArrayList</span><span class="token operator">&lt;</span><span class="token plain">String</span><span class="token operator">></span><span class="token plain"> evaluate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">String </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> String separator</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> {</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">value</span><span class="token plain"> </span><span class="token operator">=</span><span class="token operator">=</span><span class="token plain"> </span><span class="token boolean">null</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"> separator </span><span class="token operator">=</span><span class="token operator">=</span><span class="token plain"> </span><span class="token boolean">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> {</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">            </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token boolean">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">        } </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token plain"> {</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">            </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> new ArrayList</span><span class="token operator">&lt;></span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">Arrays</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">asList</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">split</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">separator</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">        }</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    }</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">}</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
</li>
<li>
<p>Creating a UDTF: By default, two corresponding functions will be created - <code>java-utdf</code>and <code>java-utdf_outer</code>. The <code>_outer</code> suffix adds a single row of <code>NULL</code> data when the table function generates 0 rows of output.</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#F8F8F2;--prism-background-color:#282A36><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_e6Vv><span class=token-line style=color:#F8F8F2><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TABLES</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">FUNCTION</span><span class="token plain"> java</span><span class="token operator">-</span><span class="token plain">utdf</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">RETURNS</span><span class="token plain"> array</span><span class="token operator">&lt;</span><span class="token plain">string</span><span class="token operator">></span><span class="token plain"> PROPERTIES </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">"file"</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">"file:///pathTo/java-udaf.jar"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">"symbol"</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">"org.apache.doris.udf.demo.UDTFStringTest"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">"always_nullable"</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">"true"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">"type"</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">"JAVA_UDF"</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
</li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_Gfwi alert alert--info"><div class=admonitionHeading_f1Ed>info</div><div class=admonitionContent_UjKb><p>See doc: <a href=https://doris.apache.org/docs/3.0/query/udf/java-user-defined-function/#udtf-1 target=_blank rel="noopener noreferrer">https://doris.apache.org/docs/3.0/query/udf/java-user-defined-function/#udtf-1</a></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=7-2-generated-column>7-2 Generated column<a href=#7-2-generated-column class=hash-link aria-label="Direct link to 7-2 Generated column" title="Direct link to 7-2 Generated column">​</a></h3>
<p>A generated column is a special column whose value is calculated from the values of other columns rather than directly inserted or updated by the user. It supports pre-computing the results of expressions and storing them in the database, which is suitable for scenarios that require frequent queries or complex calculations.</p>
<p>Results can be automatically calculated based on predefined expressions when data is imported or updated, and then stored persistently. In this way, during subsequent queries, the system can directly access these calculated results without performing complex calculations, thereby improving query performance.</p>
<p>Generated columns are supported since V3.0. When creating a table, you can specify a column as generated column. A generated column automatically calculates values based on the defined expression when data is written. Generated columns allow for more complex expressions to be defined, but the value cannot be explicitly written or set.</p>
<div class="theme-admonition theme-admonition-info admonition_Gfwi alert alert--info"><div class=admonitionHeading_f1Ed>info</div><div class=admonitionContent_UjKb><p>See doc: <a href=https://doris.apache.org/docs/3.0/sql-manual/sql-statements/Data-Definition-Statements/Create/CREATE-TABLE-AND-GENERATED-COLUMN/ target=_blank rel="noopener noreferrer">https://doris.apache.org/docs/3.0/sql-manual/sql-statements/Data-Definition-Statements/Create/CREATE-TABLE-AND-GENERATED-COLUMN/</a></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=8-functional-improvements>8. Functional improvements<a href=#8-functional-improvements class=hash-link aria-label="Direct link to 8. Functional improvements" title="Direct link to 8. Functional improvements">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=8-1-materialized-view>8-1. Materialized view<a href=#8-1-materialized-view class=hash-link aria-label="Direct link to 8-1. Materialized view" title="Direct link to 8-1. Materialized view">​</a></h3>
<p>We have refactored the selection logic for materialized views and migrated it from the rule-based optimizer (RBO) to the cost-based optimizer (CBO). This aligns the selection logic with that of asynchronous materialized views. This functionality is enabled by default. If any issues are encountered, you can revert to the RBO mode using <code>set global enable_sync_mv_cost_based_rewrite = false</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=8-2-routine-load>8-2. Routine Load<a href=#8-2-routine-load class=hash-link aria-label="Direct link to 8-2. Routine Load" title="Direct link to 8-2. Routine Load">​</a></h3>
<p>In previous versions, the Routine Load functionality faced some usability challenges, such as uneven task scheduling across BE nodes, untimely task scheduling, complex configuration requirements (the need to change multiple FE and BE settings for optimization), insufficient overall stability (where restarts or upgrades could frequently pause Routine Load jobs, requiring manual user intervention to resume).</p>
<p>To address these issues, we have made extensive optimizations to the Routine Load feature:</p>
<ul>
<li>
<p><strong>Resource scheduling</strong>: We have improved the scheduling balance to make sure that tasks are more evenly distributed across BE nodes. Jobs that encounter unrepairable errors will be promptly paused to avoid wasting resources on futile scheduling attempts. Additionally, we have improved the timeliness of the scheduling process, which has enhanced the import performance of Routine Load.</p>
</li>
<li>
<p><strong>Parameter configuration</strong>: Users in most environments no longer need to modify FE and BE configurations for optimization. An automatic adjustment mechanism with timeout parameter has been introduced to prevent tasks from constantly retrying when cluster pressure increases.</p>
</li>
<li>
<p><strong>Stability</strong>: We have enhanced the robustness of Doris in various exceptional scenarios, such as FE failovers, BE rolling upgrades, and Kafka cluster anomalies, ensuring continuous stable operation. We have also optimized the Auto Resume mechanism, allowing Routine Load to automatically resume operation after faults are repaired, reducing the need for manual user intervention.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=9-behavior-changed>9. Behavior changed<a href=#9-behavior-changed class=hash-link aria-label="Direct link to 9. Behavior changed" title="Direct link to 9. Behavior changed">​</a></h2>
<ul>
<li>
<p><code>cpu_resource_limit</code> will no longer be supported, and all types of resource isolation will be implemented through Workload Groups.</p>
</li>
<li>
<p>Please use JDK 17 for Apache Doris 3.0 and later versions. The recommended version being <code>jdk-17.0.10_linux-x64_bin.tar.gz</code>.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=try-apache-doris-30-now>Try Apache Doris 3.0 now!<a href=#try-apache-doris-30-now class=hash-link aria-label="Direct link to Try Apache Doris 3.0 now!" title="Direct link to Try Apache Doris 3.0 now!">​</a></h2>
<p>Before the official release of version 3.0, the compute-storage decoupled mode of Apache Doris has undergone nearly two years of extensive testing and optimization in the production environments of hundreds of enterprises. Contributors from many tech giants have collaborated with the community to provide a significant number of test cases based on their real-world business needs. This has rigorously validated the usability and stability of version 3.0.</p>
<p>We highly recommend users with compute-storage decoupling needs to download version 3.0 and experience it firsthand.</p>
<p>Going forward, we will accelerate our release iteration cycle to deliver a more stable version experience for all users. Feel free to join us in the <a href=https://doris.apache.org/slack target=_blank rel="noopener noreferrer">Apache Doris community</a> and engage directly with the core developers.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=credits>Credits<a href=#credits class=hash-link aria-label="Direct link to Credits" title="Direct link to Credits">​</a></h2>
<p>Special thanks to the following contributors who participated in the development, testing, and provided feedback for this version:</p>
<p>@133tosakarin、@390008457、@924060929、@AcKing-Sam、@AshinGau、@BePPPower、@BiteTheDDDDt、@ByteYue、@CSTGluigi、@CalvinKirs、@Ceng23333、@DarvenDuan、@DongLiang-0、@Doris-Extras、@Dragonliu2018、@Emor-nj、@FreeOnePlus、@Gabriel39、@GoGoWen、@HappenLee、@HowardQin、@Hyman-zhao、@INNOCENT-BOY、@JNSimba、@JackDrogon、@Jibing-Li、@KassieZ、@Lchangliang、@LemonLiTree、@LiBinfeng-01、@LompleZ、@M1saka2003、@Mryange、@Nitin-Kashyap、@On-Work-Song、@SWJTU-ZhangLei、@StarryVerse、@TangSiyang2001、@Tech-Circle-48、@Thearas、@Vallishp、@WinkerDu、@XieJiann、@XuJianxu、@XuPengfei-1020、@Yukang-Lian、@Yulei-Yang、@Z-SWEI、@ZhongJinHacker、@adonis0147、@airborne12、@allenhooo、@amorynan、@bingquanzhao、@biohazard4321、@bobhan1、@caiconghui、@cambyzju、@caoliang-web、@catpineapple、@cjj2010、@csun5285、@dataroaring、@deardeng、@dongsilun、@dutyu、@echo-hhj、@eldenmoon、@elvestar、@englefly、@feelshana、@feifeifeimoon、@feiniaofeiafei、@felixwluo、@freemandealer、@gavinchou、@ghkang98、@gnehil、@hechao-ustc、@hello-stephen、@httpshirley、@hubgeter、@hust-hhb、@iszhangpch、@iwanttobepowerful、@ixzc、@jacktengg、@jackwener、@jeffreys-cat、@kaijchen、@kaka11chen、@kindred77、@koarz、@kobe6th、@kylinmac、@larshelge、@liaoxin01、@lide-reed、@liugddx、@liujiwen-up、@liutang123、@lsy3993、@luwei16、@luzhijing、@lxliyou001、@mongo360、@morningman、@morrySnow、@mrhhsg、@my-vegetable-has-exploded、@mymeiyi、@nanfeng1999、@nextdreamblue、@pingchunzhang、@platoneko、@py023、@qidaye、@qzsee、@raboof、@rohitrs1983、@rotkang、@ryanzryu、@seawinde、@shoothzj、@shuke987、@sjyango、@smallhibiscus、@sollhui、@sollhui、@spaces-X、@stalary、@starocean999、@superdiaodiao、@suxiaogang223、@taptao、@vhwzx、@vinlee19、@w41ter、@wangbo、@wangshuo128、@whutpencil、@wsjz、@wuwenchi、@wyxxxcat、@xiaokang、@xiedeyantu、@xiedeyantu、@xingyingone、@xinyiZzz、@xy720、@xzj7019、@yagagagaga、@yiguolei、@yongjinhou、@ytwp、@yuanyuan8983、@yujun777、@yuxuan-luo、@zclllyybb、@zddr、@zfr9527、@zgxme、@zhangbutao、@zhangstar333、@zhannngchen、@zhiqiang-hhhh、@ziyanTOP、@zxealous、@zy-kkk、@zzzxl1993、@zzzzzzzs</div></div></article><article class=margin-bottom--xl itemprop=blogPost itemscope itemtype=http://schema.org/BlogPosting><div class=markdown itemprop=articleBody><header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href=/blog/>Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class=s-tags><span class=s-tag>Release Notes</span></span></span></div><h2 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop=headline><a itemprop=url href=/blog/release-note-3.0.2/>Apache Doris 3.0.2 just released</a></h2><div class="blog-info text-center flex justify-center text-sm text-black"><span class=authors><span class="s-author text-black">Apache Doris</span></span><time datetime=2024-10-15T00:00:00.000Z itemprop=datePublished class="text-black ml-4">October 15, 2024</time></div></header><div class=markdown itemprop=articleBody><p>Dear community members, the Apache Doris 3.0.2 version was officially released on October 15, 2024, featuring updates and improvements in compute-storage decoupling, data storage, lakehouse, query optimizer, query execution and more.</p>
<p><strong>Quick Download:</strong> <a href=https://doris.apache.org/download/ target=_blank rel="noopener noreferrer">https://doris.apache.org/download/</a></p>
<p><strong>GitHub Release:</strong> <a href=https://github.com/apache/doris/releases target=_blank rel="noopener noreferrer">https://github.com/apache/doris/releases</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=behavioral-changes>Behavioral Changes<a href=#behavioral-changes class=hash-link aria-label="Direct link to Behavioral Changes" title="Direct link to Behavioral Changes">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=storage>Storage<a href=#storage class=hash-link aria-label="Direct link to Storage" title="Direct link to Storage">​</a></h3>
<ul>
<li>Limited the number of tablets in a single backup task to prevent FE memory overflow. <a href=https://github.com/apache/doris/pull/40518 target=_blank rel="noopener noreferrer">#40518</a></li>
<li>The <code>SHOW PARTITIONS</code> command now displays the <code>CommittedVersion</code> of partitions. <a href=https://github.com/apache/doris/pull/28274 target=_blank rel="noopener noreferrer">#28274</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=other>Other<a href=#other class=hash-link aria-label="Direct link to Other" title="Direct link to Other">​</a></h3>
<ul>
<li>The default printing mode (asynchronous) of <code>fe.log</code> now includes file line number information. If performance issues are encountered due to line number output, please switch to BRIEF mode. <a href=https://github.com/apache/doris/pull/39419 target=_blank rel="noopener noreferrer">#39419</a></li>
<li>The default value of the session variable <code>ENABLE_PREPARED_STMT_AUDIT_LOG</code> has been changed from <code>true</code> to <code>false</code>, and the audit log of prepare statements will no longer be printed. <a href=https://github.com/apache/doris/pull/38865 target=_blank rel="noopener noreferrer">#38865</a></li>
<li>The default value of the session variable <code>max_allowed_packet</code> has been adjusted from 1MB to 16MB to align with MySQL 8.4. <a href=https://github.com/apache/doris/pull/38697 target=_blank rel="noopener noreferrer">#38697</a></li>
<li>The JVM of FE and BE defaults to using the UTF-8 character set. <a href=https://github.com/apache/doris/pull/39521 target=_blank rel="noopener noreferrer">#39521</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=new-features>New Features<a href=#new-features class=hash-link aria-label="Direct link to New Features" title="Direct link to New Features">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=storage-1>Storage<a href=#storage-1 class=hash-link aria-label="Direct link to Storage" title="Direct link to Storage">​</a></h3>
<ul>
<li>Backup and recovery now support clearing tables or partitions that are not in the backup. <a href=https://github.com/apache/doris/pull/39028 target=_blank rel="noopener noreferrer">#39028</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=compute-storage-decoupled>Compute-Storage Decoupled<a href=#compute-storage-decoupled class=hash-link aria-label="Direct link to Compute-Storage Decoupled" title="Direct link to Compute-Storage Decoupled">​</a></h3>
<ul>
<li>Support for parallel recycling of expired data on multiple tablets. <a href=https://github.com/apache/doris/pull/37630 target=_blank rel="noopener noreferrer">#37630</a></li>
<li>Support for changing storage vaults through <code>ALTER</code> statements. <a href=https://github.com/apache/doris/pull/38685 target=_blank rel="noopener noreferrer">#38685</a>  <a href=https://github.com/apache/doris/pull/37606 target=_blank rel="noopener noreferrer">#37606</a></li>
<li>Support for importing a large number of tablets (5000+) in a single transaction (experimental feature). <a href=https://github.com/apache/doris/pull/38243 target=_blank rel="noopener noreferrer">#38243</a></li>
<li>Support for automatically aborting pending transactions caused by reasons such as node restarts, solving the issue of pending transactions blocking decommission or schema change. <a href=https://github.com/apache/doris/pull/37669 target=_blank rel="noopener noreferrer">#37669</a></li>
<li>A new session variable <code>enable_segment_cache</code> has been added to control whether to use segment cache during queries (default is <code>true</code>). <a href=https://github.com/apache/doris/pull/37141 target=_blank rel="noopener noreferrer">#37141</a></li>
<li>Resolved the issue of not being able to import a large amount of data during schema changes in compute-storage decoupled mode. <a href=https://github.com/apache/doris/pull/39558 target=_blank rel="noopener noreferrer">#39558</a></li>
<li>Support for adding multiple follower roles of FE in compute-storage decoupled mode. <a href=https://github.com/apache/doris/pull/38388 target=_blank rel="noopener noreferrer">#38388</a></li>
<li>Support for using memory as file cache to accelerate queries in environments with no disks or low-performance HDDs. <a href=https://github.com/apache/doris/pull/38811 target=_blank rel="noopener noreferrer">#38811</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=lakehouse>Lakehouse<a href=#lakehouse class=hash-link aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">​</a></h3>
<ul>
<li>New Lakesoul Catalog has been added. <a href=https://doris.apache.org/zh-CN/docs/dev/lakehouse/datalake-analytics/lakesoul target=_blank rel="noopener noreferrer">Apache Doris Docs</a></li>
<li>A new system table <code>catalog_meta_cache_statistics</code> has been added to view the usage of various metadata caches in external catalog. <a href=https://github.com/apache/doris/pull/40155 target=_blank rel="noopener noreferrer">#40155</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=query-optimizer>Query Optimizer<a href=#query-optimizer class=hash-link aria-label="Direct link to Query Optimizer" title="Direct link to Query Optimizer">​</a></h3>
<ul>
<li>Support for <code>is [not] true/false</code> expressions. <a href=https://github.com/apache/doris/pull/38623 target=_blank rel="noopener noreferrer">#38623</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=query-execution>Query Execution<a href=#query-execution class=hash-link aria-label="Direct link to Query Execution" title="Direct link to Query Execution">​</a></h3>
<ul>
<li>A new CRC32 function has been added. <a href=https://github.com/apache/doris/pull/38204 target=_blank rel="noopener noreferrer">#38204</a></li>
<li>New aggregate functions skew and kurt have been added. <a href=https://github.com/apache/doris/pull/41277 target=_blank rel="noopener noreferrer">#41277</a></li>
<li>Profiles are now persisted to the FE's disk to retain more profiles. <a href=https://github.com/apache/doris/pull/33690 target=_blank rel="noopener noreferrer">#33690</a></li>
<li>A new system table <code>workload_group_privileges</code> has been added to view permission information related to workload groups. <a href=https://github.com/apache/doris/pull/38436 target=_blank rel="noopener noreferrer">#38436</a></li>
<li>A new system table <code>workload_group_resource_usage</code> has been added to monitor resource statistics of workload groups. <a href=https://github.com/apache/doris/pull/39177 target=_blank rel="noopener noreferrer">#39177</a></li>
<li>Workload groups now support limiting reads of local IO and remote IO. <a href=https://github.com/apache/doris/pull/39012 target=_blank rel="noopener noreferrer">#39012</a></li>
<li>Workload groups now support cgroupv2 to limit CPU usage. <a href=https://github.com/apache/doris/pull/39374 target=_blank rel="noopener noreferrer">#39374</a></li>
<li>A new system table <code>information_schema.partitions</code> has been added to view some table creation attributes. <a href=https://github.com/apache/doris/pull/40636 target=_blank rel="noopener noreferrer">#40636</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=other-1>Other<a href=#other-1 class=hash-link aria-label="Direct link to Other" title="Direct link to Other">​</a></h3>
<ul>
<li>Support for using the <code>SHOW</code> statement to display BE's configuration information, such as <code>SHOW BACKEND CONFIG LIKE ${pattern}</code>. <a href=https://github.com/apache/doris/pull/36525 target=_blank rel="noopener noreferrer">#36525</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=improvements>Improvements<a href=#improvements class=hash-link aria-label="Direct link to Improvements" title="Direct link to Improvements">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=load>Load<a href=#load class=hash-link aria-label="Direct link to Load" title="Direct link to Load">​</a></h3>
<ul>
<li>Improved the import efficiency of routine load when encountering frequent EOFs from Kafka. <a href=https://github.com/apache/doris/pull/39975 target=_blank rel="noopener noreferrer">#39975</a></li>
<li>The stream load result now includes the time taken to read HTTP data, <code>ReceiveDataTimeMs</code>, which can quickly determine slow stream load issues caused by network reasons. <a href=https://github.com/apache/doris/pull/40735 target=_blank rel="noopener noreferrer">#40735</a></li>
<li>Optimized the routine load timeout logic to avoid frequent timeouts during inverted index and mow writes. <a href=https://github.com/apache/doris/pull/40818 target=_blank rel="noopener noreferrer">#40818</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=storage-2>Storage<a href=#storage-2 class=hash-link aria-label="Direct link to Storage" title="Direct link to Storage">​</a></h3>
<ul>
<li>Support for batch addition of partitions. <a href=https://github.com/apache/doris/pull/37114 target=_blank rel="noopener noreferrer">#37114</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=compute-storage-decoupled-1>Compute-Storage Decoupled<a href=#compute-storage-decoupled-1 class=hash-link aria-label="Direct link to Compute-Storage Decoupled" title="Direct link to Compute-Storage Decoupled">​</a></h3>
<ul>
<li>Added the meta-service HTTP interface <code>/MetaService/http/show_meta_ranges</code> to facilitate the statistics of KV distribution in FDB. <a href=https://github.com/apache/doris/pull/39208 target=_blank rel="noopener noreferrer">#39208</a></li>
<li>The meta-service/recycler stop script ensures that the process fully exits before returning. <a href=https://github.com/apache/doris/pull/40218 target=_blank rel="noopener noreferrer">#40218</a></li>
<li>Support for using the session variable <code>version_comment</code> (Cloud Mode) to display the current deployment mode as compute-storage decoupled. <a href=https://github.com/apache/doris/pull/38269 target=_blank rel="noopener noreferrer">#38269</a></li>
<li>Fixed the detailed message returned when transaction submission fails. <a href=https://github.com/apache/doris/pull/40584 target=_blank rel="noopener noreferrer">#40584</a></li>
<li>Support for using one meta-service process to provide both metadata services and data recycling services. <a href=https://github.com/apache/doris/pull/40223 target=_blank rel="noopener noreferrer">#40223</a></li>
<li>Optimized the default configuration of file_cache to avoid potential issues when not set. <a href=https://github.com/apache/doris/pull/41421 target=_blank rel="noopener noreferrer">#41421</a>  <a href=https://github.com/apache/doris/pull/41507 target=_blank rel="noopener noreferrer">#41507</a></li>
<li>Improved query performance by batch retrieving the version of multiple partitions. <a href=https://github.com/apache/doris/pull/38949 target=_blank rel="noopener noreferrer">#38949</a></li>
<li>Delayed the redistribution of tablets to avoid query performance issues caused by temporary network fluctuations. <a href=https://github.com/apache/doris/pull/40371 target=_blank rel="noopener noreferrer">#40371</a></li>
<li>Optimized the read-write lock logic in the balance. <a href=https://github.com/apache/doris/pull/40633 target=_blank rel="noopener noreferrer">#40633</a></li>
<li>Enhanced the robustness of file cache in handling TTL filenames during restarts/crashes. <a href=https://github.com/apache/doris/pull/40226 target=_blank rel="noopener noreferrer">#40226</a></li>
<li>Added the BE HTTP interface <code>/api/file_cache?op=hash</code> to facilitate the calculation of the hash file names of segment files on disk. <a href=https://github.com/apache/doris/pull/40831 target=_blank rel="noopener noreferrer">#40831</a></li>
<li>Optimized the unified naming to be compatible with using compute group to represent BE groups (original cloud cluster). <a href=https://github.com/apache/doris/pull/40767 target=_blank rel="noopener noreferrer">#40767</a></li>
<li>Optimized the waiting time for obtaining locks when calculating delete bitmaps in primary key tables. <a href=https://github.com/apache/doris/pull/40341 target=_blank rel="noopener noreferrer">#40341</a></li>
<li>When there are many delete bitmaps in primary key tables, optimized the high CPU consumption during queries by pre-merging multiple delete bitmaps. <a href=https://github.com/apache/doris/pull/40204 target=_blank rel="noopener noreferrer">#40204</a></li>
<li>Support for managing FE/BE nodes in compute-storage decoupled mode through SQL statements, hiding the logic of direct interaction with meta-service when deploying in compute-storage decoupled mode. <a href=https://github.com/apache/doris/pull/40264 target=_blank rel="noopener noreferrer">#40264</a></li>
<li>Added a script for rapid deployment of FDB. <a href=https://github.com/apache/doris/pull/39803 target=_blank rel="noopener noreferrer">#39803</a></li>
<li>Optimized the output of <code>SHOW CACHE HOTSPOT</code> to unify the column name style with other <code>SHOW</code> statements. <a href=https://github.com/apache/doris/pull/41322 target=_blank rel="noopener noreferrer">#41322</a></li>
<li>When using a storage vault as the storage backend, disallowed the use of <code>latest_fs()</code> to avoid binding different storage backends to the same table. <a href=https://github.com/apache/doris/pull/40516 target=_blank rel="noopener noreferrer">#40516</a></li>
<li>Optimized the timeout strategy for calculating delete bitmaps when importing mow tables. <a href=https://github.com/apache/doris/pull/40562 target=_blank rel="noopener noreferrer">#40562</a>  <a href=https://github.com/apache/doris/pull/40333 target=_blank rel="noopener noreferrer">#40333</a></li>
<li>The enable_file_cache in be.conf is now enabled by default in compute-storage decoupled mode. <a href=https://github.com/apache/doris/pull/41502 target=_blank rel="noopener noreferrer">#41502</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=lakehouse-1>Lakehouse<a href=#lakehouse-1 class=hash-link aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">​</a></h3>
<ul>
<li>When reading tables in CSV format, support for the session <code>keep_carriage_return</code> setting to control the reading behavior of the <code>\r</code> symbol. <a href=https://github.com/apache/doris/pull/39980 target=_blank rel="noopener noreferrer">#39980</a></li>
<li>The default maximum memory of BE's JVM has been adjusted to 2GB (affecting only new deployments). <a href=https://github.com/apache/doris/pull/41403 target=_blank rel="noopener noreferrer">#41403</a></li>
<li>Hive Catalog has added <code>hive.recursive_directories_table</code> and <code>hive.ignore_absent_partitions</code> properties to specify whether to recursively traverse data directories and whether to ignore missing partitions. <a href=https://github.com/apache/doris/pull/39494 target=_blank rel="noopener noreferrer">#39494</a></li>
<li>Optimized the Catalog refresh logic to avoid generating a large number of connections during refresh. <a href=https://github.com/apache/doris/pull/39205 target=_blank rel="noopener noreferrer">#39205</a></li>
<li><code>SHOW CREATE DATABASE</code> and <code>SHOW CREATE TABLE</code> for external data sources now display location information. <a href=https://github.com/apache/doris/pull/39179 target=_blank rel="noopener noreferrer">#39179</a></li>
<li>The new optimizer supports inserting data into JDBC external tables using the <code>INSERT INTO</code> statement. <a href=https://github.com/apache/doris/pull/41511 target=_blank rel="noopener noreferrer">#41511</a></li>
<li>MaxCompute Catalog now supports complex data types. <a href=https://github.com/apache/doris/pull/39259 target=_blank rel="noopener noreferrer">#39259</a></li>
<li>Optimized the logic for reading and merging data shards of external tables. <a href=https://github.com/apache/doris/pull/38311 target=_blank rel="noopener noreferrer">#38311</a></li>
<li>Optimized some refresh strategies for metadata caches of external tables. <a href=https://github.com/apache/doris/pull/38506 target=_blank rel="noopener noreferrer">#38506</a></li>
<li>Paimon tables now support pushing down <code>IN/NOT IN</code> predicates. <a href=https://github.com/apache/doris/pull/38390 target=_blank rel="noopener noreferrer">#38390</a></li>
<li>Compatible with tables created in Parquet format by Paimon version 0.9. <a href=https://github.com/apache/doris/pull/41020 target=_blank rel="noopener noreferrer">#41020</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=asynchronous-materialized-views>Asynchronous Materialized Views<a href=#asynchronous-materialized-views class=hash-link aria-label="Direct link to Asynchronous Materialized Views" title="Direct link to Asynchronous Materialized Views">​</a></h3>
<ul>
<li>Building asynchronous materialized views now supports the use of both immediate and starttime. <a href=https://github.com/apache/doris/pull/39573 target=_blank rel="noopener noreferrer">#39573</a></li>
<li>Asynchronous materialized views based on external tables will refresh the metadata cache of the external tables before refreshing the materialized views, ensuring construction based on the latest external table data. <a href=https://github.com/apache/doris/pull/38212 target=_blank rel="noopener noreferrer">#38212</a></li>
<li>Partition incremental construction now supports rolling up according to weekly and quarterly granularities. <a href=https://github.com/apache/doris/pull/39286 target=_blank rel="noopener noreferrer">#39286</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=query-optimizer-1>Query Optimizer<a href=#query-optimizer-1 class=hash-link aria-label="Direct link to Query Optimizer" title="Direct link to Query Optimizer">​</a></h3>
<ul>
<li>The aggregate function <code>GROUP_CONCAT</code> now supports the use of both <code>DISTINCT</code> and <code>ORDER BY</code>. <a href=https://github.com/apache/doris/pull/38080 target=_blank rel="noopener noreferrer">#38080</a></li>
<li>Optimized the collection and use of statistical information, as well as the logic for estimating row counts and cost calculations, to generate more efficient and stable execution plans.</li>
<li>Window function partition data pre-filtering now supports cases containing multiple window functions. <a href=https://github.com/apache/doris/pull/38393 target=_blank rel="noopener noreferrer">#38393</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=query-execution-1>Query Execution<a href=#query-execution-1 class=hash-link aria-label="Direct link to Query Execution" title="Direct link to Query Execution">​</a></h3>
<ul>
<li>Reduced query latency by running prepare pipeline tasks in parallel. <a href=https://github.com/apache/doris/pull/40874 target=_blank rel="noopener noreferrer">#40874</a></li>
<li>Display Catalog information in Profile. <a href=https://github.com/apache/doris/pull/38283 target=_blank rel="noopener noreferrer">#38283</a></li>
<li>Optimized the computational performance of <code>IN</code> filtering conditions. <a href=https://github.com/apache/doris/pull/40917 target=_blank rel="noopener noreferrer">#40917</a></li>
<li>Supported cgroupv2 in K8S to limit Doris's memory usage. <a href=https://github.com/apache/doris/pull/39256 target=_blank rel="noopener noreferrer">#39256</a></li>
<li>Optimized the performance of converting strings to datetime types. <a href=https://github.com/apache/doris/pull/38385 target=_blank rel="noopener noreferrer">#38385</a></li>
<li>When a <code>string</code> is a decimal number, support casting it to an <code>int</code>, which will be more compatible with certain behaviors of MySQL. <a href=https://github.com/apache/doris/pull/38847 target=_blank rel="noopener noreferrer">#38847</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=semi-structured-data-management>Semi-Structured Data Management<a href=#semi-structured-data-management class=hash-link aria-label="Direct link to Semi-Structured Data Management" title="Direct link to Semi-Structured Data Management">​</a></h3>
<ul>
<li>Optimized the performance of inverted index matching. <a href=https://github.com/apache/doris/pull/41122 target=_blank rel="noopener noreferrer">#41122</a></li>
<li>Temporarily prohibited the creation of inverted indexes with tokenization on arrays. <a href=https://github.com/apache/doris/pull/39062 target=_blank rel="noopener noreferrer">#39062</a></li>
<li><code>explode_json_array</code> now supports binary JSON types. <a href=https://github.com/apache/doris/pull/37278 target=_blank rel="noopener noreferrer">#37278</a></li>
<li>IP data types now support bloomfilter indexes. <a href=https://github.com/apache/doris/pull/39253 target=_blank rel="noopener noreferrer">#39253</a></li>
<li>IP data types now support row storage. <a href=https://github.com/apache/doris/pull/39258 target=_blank rel="noopener noreferrer">#39258</a></li>
<li>Nested data types such as ARRAY, MAP, and STRUCT now support schema changes. <a href=https://github.com/apache/doris/pull/39210 target=_blank rel="noopener noreferrer">#39210</a></li>
<li>When creating MTMV, automatically truncate KEYs encountered in VARIANT data types. <a href=https://github.com/apache/doris/pull/39988 target=_blank rel="noopener noreferrer">#39988</a></li>
<li>Lazy loading of inverted indexes during queries to improve performance. <a href=https://github.com/apache/doris/pull/38979 target=_blank rel="noopener noreferrer">#38979</a></li>
<li><code>add inverted index file size for open file</code>. <a href=https://github.com/apache/doris/pull/37482 target=_blank rel="noopener noreferrer">#37482</a></li>
<li>Reduced access to object storage interfaces during compaction to improve performance. <a href=https://github.com/apache/doris/pull/41079 target=_blank rel="noopener noreferrer">#41079</a></li>
<li>Added three new query profile metrics related to inverted indexes. <a href=https://github.com/apache/doris/pull/36696 target=_blank rel="noopener noreferrer">#36696</a></li>
<li>Reduced cache overhead for non-PreparedStatement SQL to improve performance. <a href=https://github.com/apache/doris/pull/40910 target=_blank rel="noopener noreferrer">#40910</a></li>
<li>Pre-warming cache now supports inverted indexes. <a href=https://github.com/apache/doris/pull/38986 target=_blank rel="noopener noreferrer">#38986</a></li>
<li>Inverted indexes are now cached immediately after writing. <a href=https://github.com/apache/doris/pull/39076 target=_blank rel="noopener noreferrer">#39076</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=compatibility>Compatibility<a href=#compatibility class=hash-link aria-label="Direct link to Compatibility" title="Direct link to Compatibility">​</a></h3>
<ul>
<li>Fixed the issue of Thrift ID incompatibility on the master with branch-2.1. <a href=https://github.com/apache/doris/pull/41057 target=_blank rel="noopener noreferrer">#41057</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=other-2>Other<a href=#other-2 class=hash-link aria-label="Direct link to Other" title="Direct link to Other">​</a></h3>
<ul>
<li>BE HTTP API now supports authentication; set config::enable_all_http_auth to true (default is false) when authentication is required. <a href=https://github.com/apache/doris/pull/39577 target=_blank rel="noopener noreferrer">#39577</a></li>
<li>Optimized the user permissions required for the REFRESH operation. Permissions have been relaxed from ALTER to SHOW. <a href=https://github.com/apache/doris/pull/39008 target=_blank rel="noopener noreferrer">#39008</a></li>
<li>Reduced the range of nextId when calling advanceNextId(). <a href=https://github.com/apache/doris/pull/40160 target=_blank rel="noopener noreferrer">#40160</a></li>
<li>Optimized the caching mechanism for Java UDFs. <a href=https://github.com/apache/doris/pull/40404 target=_blank rel="noopener noreferrer">#40404</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=bug-fixes>Bug Fixes<a href=#bug-fixes class=hash-link aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=load-1>Load<a href=#load-1 class=hash-link aria-label="Direct link to Load" title="Direct link to Load">​</a></h3>
<ul>
<li>Fixed the issue where <code>abortTransaction</code> did not handle return codes. <a href=https://github.com/apache/doris/pull/41275 target=_blank rel="noopener noreferrer">#41275</a></li>
<li>Fixed the issue where transactions failed to commit or abort in compute-storage decoupled mode without calling <code>afterCommit/afterAbort</code>. <a href=https://github.com/apache/doris/pull/41267 target=_blank rel="noopener noreferrer">#41267</a></li>
<li>Fixed the issue where Routine Load could not work properly when modifying consumer offsets in compute-storage decoupled mode. <a href=https://github.com/apache/doris/pull/39159 target=_blank rel="noopener noreferrer">#39159</a></li>
<li>Fixed the issue of repeatedly closing file handles when obtaining error log file paths. <a href=https://github.com/apache/doris/pull/41320 target=_blank rel="noopener noreferrer">#41320</a></li>
<li>Fixed the issue of incorrect job progress caching for Routine Load in compute-storage decoupled mode. <a href=https://github.com/apache/doris/pull/39313 target=_blank rel="noopener noreferrer">#39313</a></li>
<li>Fixed the issue where Routine Load could get stuck when failing to commit transactions in compute-storage decoupled mode. <a href=https://github.com/apache/doris/pull/40539 target=_blank rel="noopener noreferrer">#40539</a></li>
<li>Fixed the issue where Routine Load kept reporting data quality check errors in compute-storage decoupled mode. <a href=https://github.com/apache/doris/pull/39790 target=_blank rel="noopener noreferrer">#39790</a></li>
<li>Fixed the issue where Routine Load did not check transactions before committing in compute-storage decoupled mode. <a href=https://github.com/apache/doris/pull/39775 target=_blank rel="noopener noreferrer">#39775</a></li>
<li>Fixed the issue where Routine Load did not check transactions before aborting in compute-storage decoupled mode. <a href=https://github.com/apache/doris/pull/40463 target=_blank rel="noopener noreferrer">#40463</a></li>
<li>Fixed the issue where cluster keys did not support certain data types. <a href=https://github.com/apache/doris/pull/38966 target=_blank rel="noopener noreferrer">#38966</a></li>
<li>Fixed the issue of transactions being repeatedly committed. <a href=https://github.com/apache/doris/pull/39786 target=_blank rel="noopener noreferrer">#39786</a></li>
<li>Fixed the issue of use after free with WAL when BE exits. <a href=https://github.com/apache/doris/pull/33131 target=_blank rel="noopener noreferrer">#33131</a></li>
<li>Fixed the issue where WAL playback did not skip completed import transactions in compute-storage decoupled mode. <a href=https://github.com/apache/doris/pull/41262 target=_blank rel="noopener noreferrer">#41262</a></li>
<li>Fixed the logic for selecting BE in group commit in compute-storage decoupled mode. <a href=https://github.com/apache/doris/pull/39986 target=_blank rel="noopener noreferrer">#39986</a>  <a href=https://github.com/apache/doris/pull/38644 target=_blank rel="noopener noreferrer">#38644</a></li>
<li>Fixed the issue where BE might crash when group commit was enabled for insert into. <a href=https://github.com/apache/doris/pull/39339 target=_blank rel="noopener noreferrer">#39339</a></li>
<li>Fixed the issue where insert into with group commit enabled might get stuck. <a href=https://github.com/apache/doris/pull/39391 target=_blank rel="noopener noreferrer">#39391</a></li>
<li>Fixed the issue where not enabling the group commit option during import might result in a table not found error. <a href=https://github.com/apache/doris/pull/39731 target=_blank rel="noopener noreferrer">#39731</a></li>
<li>Fixed the issue of transaction submission timeouts due to too many tablets. <a href=https://github.com/apache/doris/pull/40031 target=_blank rel="noopener noreferrer">#40031</a></li>
<li>Fixed the issue of concurrent opens with Auto Partition. <a href=https://github.com/apache/doris/pull/38605 target=_blank rel="noopener noreferrer">#38605</a></li>
<li>Fixed the issue of import lock granularity being too large. <a href=https://github.com/apache/doris/pull/40134 target=_blank rel="noopener noreferrer">#40134</a></li>
<li>Fixed the issue of coredumps caused by zero-length varchars. <a href=https://github.com/apache/doris/pull/40940 target=_blank rel="noopener noreferrer">#40940</a></li>
<li>Fixed the issue of incorrect index Id values in log prints. <a href=https://github.com/apache/doris/pull/38790 target=_blank rel="noopener noreferrer">#38790</a></li>
<li>Fixed the issue of memtable shifting not closing BRPC streaming. <a href=https://github.com/apache/doris/pull/40105 target=_blank rel="noopener noreferrer">#40105</a></li>
<li>Fixed the issue of inaccurate bvar statistics during memtable shifting. <a href=https://github.com/apache/doris/pull/39075 target=_blank rel="noopener noreferrer">#39075</a></li>
<li>Fixed the issue of multi-replication fault tolerance during memtable shifting. <a href=https://github.com/apache/doris/pull/38003 target=_blank rel="noopener noreferrer">#38003</a></li>
<li>Fixed the issue of incorrect message length calculations for Routine Load with multiple tables in one stream. <a href=https://github.com/apache/doris/pull/40367 target=_blank rel="noopener noreferrer">#40367</a></li>
<li>Fixed the issue of inaccurate progress reporting for Broker Load. <a href=https://github.com/apache/doris/pull/40325 target=_blank rel="noopener noreferrer">#40325</a></li>
<li>Fixed the issue of inaccurate data scan volume reporting for Broker Load. <a href=https://github.com/apache/doris/pull/40694 target=_blank rel="noopener noreferrer">#40694</a></li>
<li>Fixed the issue of concurrency with Routine Load in compute-storage decoupled mode. <a href=https://github.com/apache/doris/pull/39242 target=_blank rel="noopener noreferrer">#39242</a></li>
<li>Fixed the issue of Routine Load jobs being canceled in compute-storage decoupled mode. <a href=https://github.com/apache/doris/pull/39514 target=_blank rel="noopener noreferrer">#39514</a></li>
<li>Fixed the issue of progress not being reset when deleting Kafka topics. <a href=https://github.com/apache/doris/pull/38474 target=_blank rel="noopener noreferrer">#38474</a></li>
<li>Fixed the issue of updating progress during transaction state transitions in Routine Load. <a href=https://github.com/apache/doris/pull/39311 target=_blank rel="noopener noreferrer">#39311</a></li>
<li>Fixed the issue of Routine Load switching from a paused state to a paused state. <a href=https://github.com/apache/doris/pull/40728 target=_blank rel="noopener noreferrer">#40728</a></li>
<li>Fixed the issue of Stream Load records being missed due to database deletion. <a href=https://github.com/apache/doris/pull/39360 target=_blank rel="noopener noreferrer">#39360</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=storage-3>Storage<a href=#storage-3 class=hash-link aria-label="Direct link to Storage" title="Direct link to Storage">​</a></h3>
<ul>
<li>Fixed the issue of missing storage policies. <a href=https://github.com/apache/doris/pull/38700 target=_blank rel="noopener noreferrer">#38700</a></li>
<li>Fixed the issue of errors during cross-version backup and recovery. <a href=https://github.com/apache/doris/pull/38370 target=_blank rel="noopener noreferrer">#38370</a></li>
<li>Fixed the NPE issue with ccr binlog. <a href=https://github.com/apache/doris/pull/39909 target=_blank rel="noopener noreferrer">#39909</a></li>
<li>Fixed potential issues with duplicate keys in mow. <a href=https://github.com/apache/doris/pull/41309 target=_blank rel="noopener noreferrer">#41309</a>  <a href=https://github.com/apache/doris/pull/39791 target=_blank rel="noopener noreferrer">#39791</a>  <a href=https://github.com/apache/doris/pull/39958 target=_blank rel="noopener noreferrer">#39958</a>  <a href=https://github.com/apache/doris/pull/38369 target=_blank rel="noopener noreferrer">#38369</a>  <a href=https://github.com/apache/doris/pull/38331 target=_blank rel="noopener noreferrer">#38331</a></li>
<li>Fixed the issue of not being able to write after backup and recovery in high-frequency write scenarios. <a href=https://github.com/apache/doris/pull/40118 target=_blank rel="noopener noreferrer">#40118</a>  <a href=https://github.com/apache/doris/pull/38321 target=_blank rel="noopener noreferrer">#38321</a></li>
<li>Fixed the issue of data errors potentially triggered by deleting empty strings and schema changes. <a href=https://github.com/apache/doris/pull/41064 target=_blank rel="noopener noreferrer">#41064</a></li>
<li>Fixed the issue of incorrect statistics due to column updates. <a href=https://github.com/apache/doris/pull/40880 target=_blank rel="noopener noreferrer">#40880</a></li>
<li>Limited the size of tablet meta pb to prevent BE crashes due to oversized meta. <a href=https://github.com/apache/doris/pull/39455 target=_blank rel="noopener noreferrer">#39455</a></li>
<li>Fixed the potential column misalignment issue with the new optimizer in <code>begin; insert into values; commit</code>. <a href=https://github.com/apache/doris/pull/39295 target=_blank rel="noopener noreferrer">#39295</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=compute-storage-decoupled-2>Compute-Storage Decoupled<a href=#compute-storage-decoupled-2 class=hash-link aria-label="Direct link to Compute-Storage Decoupled" title="Direct link to Compute-Storage Decoupled">​</a></h3>
<ul>
<li>Fixed the issue where the tablet distribution might be inconsistent across multiple FEs in compute-storage decoupled mode. <a href=https://github.com/apache/doris/pull/41458 target=_blank rel="noopener noreferrer">#41458</a></li>
<li>Fixed the issue where TVF might not work in multi-computing group environments. <a href=https://github.com/apache/doris/pull/39249 target=_blank rel="noopener noreferrer">#39249</a></li>
<li>Fixed the issue where compaction used resources that had already been released when BE exited in compute-storage decoupled mode. <a href=https://github.com/apache/doris/pull/39302 target=_blank rel="noopener noreferrer">#39302</a></li>
<li>Fixed the issue where automatic start-stop might cause FE replay to get stuck. <a href=https://github.com/apache/doris/pull/40027 target=_blank rel="noopener noreferrer">#40027</a></li>
<li>Fixed the issue where the BE status and the stored status in meta-service were inconsistent. <a href=https://github.com/apache/doris/pull/40799 target=_blank rel="noopener noreferrer">#40799</a></li>
<li>Fixed the issue where the FE->meta-service connection pool could not automatically expire and reconnect. <a href=https://github.com/apache/doris/pull/41202 target=_blank rel="noopener noreferrer">#41202</a>  <a href=https://github.com/apache/doris/pull/40661 target=_blank rel="noopener noreferrer">#40661</a></li>
<li>Fixed the issue where some tablets might repeatedly undergo unexpected balance processes during rebalance. <a href=https://github.com/apache/doris/pull/39792 target=_blank rel="noopener noreferrer">#39792</a></li>
<li>Fixed the issue where storage vault permissions were lost after FE restarted. <a href=https://github.com/apache/doris/pull/40260 target=_blank rel="noopener noreferrer">#40260</a></li>
<li>Fixed the issue where tablet row counts and other statistical information might be incomplete due to FDB scan range pagination. <a href=https://github.com/apache/doris/pull/40494 target=_blank rel="noopener noreferrer">#40494</a></li>
<li>Fixed the performance issue caused by a large number of aborted transactions associated with the same label. <a href=https://github.com/apache/doris/pull/40606 target=_blank rel="noopener noreferrer">#40606</a></li>
<li>Fixed the issue where <code>commit_txn</code> did not automatically re-enter, maintaining consistent behavior between compute-storage decoupled and integrated modes. <a href=https://github.com/apache/doris/pull/39615 target=_blank rel="noopener noreferrer">#39615</a></li>
<li>Fixed the issue where the number of projected columns increased when dropping columns. <a href=https://github.com/apache/doris/pull/40187 target=_blank rel="noopener noreferrer">#40187</a></li>
<li>Fixed the issue where delete statements did not correctly handle return values, causing data to still be visible after deletion. <a href=https://github.com/apache/doris/pull/39428 target=_blank rel="noopener noreferrer">#39428</a></li>
<li>Fixed the coredump issue caused by rowset metadata competition during file cache preheating. <a href=https://github.com/apache/doris/pull/39361 target=_blank rel="noopener noreferrer">#39361</a></li>
<li>Fixed the issue where the entire cache space would be used up when TTL cache enabled LRU eviction. <a href=https://github.com/apache/doris/pull/39814 target=_blank rel="noopener noreferrer">#39814</a></li>
<li>Fixed the issue where temporary files could not be recycled when importing commit rowset failed with HDFS storage backend. <a href=https://github.com/apache/doris/pull/40215 target=_blank rel="noopener noreferrer">#40215</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=lakehouse-2>Lakehouse<a href=#lakehouse-2 class=hash-link aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">​</a></h3>
<ul>
<li>Fixed some issues with predicate pushdown in JDBC Catalog. <a href=https://github.com/apache/doris/pull/39064 target=_blank rel="noopener noreferrer">#39064</a></li>
<li>Fixed the issue of not being able to read when <code>S``TRUCT</code> type columns are missing in Parquet format. <a href=https://github.com/apache/doris/pull/38718 target=_blank rel="noopener noreferrer">#38718</a></li>
<li>Fixed the issue of FileSystem leaks on the FE side in some cases. <a href=https://github.com/apache/doris/pull/38610 target=_blank rel="noopener noreferrer">#38610</a></li>
<li>Fixed the issue of metadata cache information being inconsistent when Hive/Iceberg tables write back in some cases. <a href=https://github.com/apache/doris/pull/40729 target=_blank rel="noopener noreferrer">#40729</a></li>
<li>Fixed the issue of unstable partition ID generation for external tables in some cases. <a href=https://github.com/apache/doris/pull/39325 target=_blank rel="noopener noreferrer">#39325</a></li>
<li>Fixed the issue of external table queries selecting BE nodes in the blacklist in some cases. <a href=https://github.com/apache/doris/pull/39451 target=_blank rel="noopener noreferrer">#39451</a></li>
<li>Optimized the timeout time for batch retrieval of external table partition information to avoid long-term thread occupation. <a href=https://github.com/apache/doris/pull/39346 target=_blank rel="noopener noreferrer">#39346</a></li>
<li>Fixed the issue of memory leaks when querying Hudi tables in some cases. <a href=https://github.com/apache/doris/pull/41256 target=_blank rel="noopener noreferrer">#41256</a></li>
<li>Fixed the issue of connection pool connection leaks in JDBC Catalog in some cases. <a href=https://github.com/apache/doris/pull/39582 target=_blank rel="noopener noreferrer">#39582</a></li>
<li>Fixed the issue of BE memory leaks in JDBC Catalog in some cases. <a href=https://github.com/apache/doris/pull/41041 target=_blank rel="noopener noreferrer">#41041</a></li>
<li>Fixed the issue of not being able to query Hudi data on Alibaba Cloud OSS. <a href=https://github.com/apache/doris/pull/41316 target=_blank rel="noopener noreferrer">#41316</a></li>
<li>Fixed the issue of not being able to read empty partitions in MaxCompute. <a href=https://github.com/apache/doris/pull/40046 target=_blank rel="noopener noreferrer">#40046</a></li>
<li>Fixed the issue of poor performance when querying Oracle through JDBC Catalog. <a href=https://github.com/apache/doris/pull/41513 target=_blank rel="noopener noreferrer">#41513</a></li>
<li>Fixed the issue of BE crashes when querying deletion vector of Paimon tables after enabling file cache features. <a href=https://github.com/apache/doris/pull/39877 target=_blank rel="noopener noreferrer">#39877</a></li>
<li>Fixed the issue of not being able to access Paimon tables on HDFS clusters with HA enabled. <a href=https://github.com/apache/doris/pull/39806 target=_blank rel="noopener noreferrer">#39806</a></li>
<li>Temporarily disabled the page index filtering feature of Parquet to avoid potential issues. <a href=https://github.com/apache/doris/pull/38691 target=_blank rel="noopener noreferrer">#38691</a></li>
<li>Fixed the issue of not being able to read unsigned types in Parquet files. <a href=https://github.com/apache/doris/pull/39926 target=_blank rel="noopener noreferrer">#39926</a></li>
<li>Fixed the issue of potential infinite loops when reading Parquet files in some cases. <a href=https://github.com/apache/doris/pull/39523 target=_blank rel="noopener noreferrer">#39523</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=asynchronous-materialized-views-1>Asynchronous Materialized Views<a href=#asynchronous-materialized-views-1 class=hash-link aria-label="Direct link to Asynchronous Materialized Views" title="Direct link to Asynchronous Materialized Views">​</a></h3>
<ul>
<li>Fixed the issue where partition construction might select the wrong table to track partitions if both sides have the same column names. <a href=https://github.com/apache/doris/pull/40810 target=_blank rel="noopener noreferrer">#40810</a></li>
<li>Fixed the issue where transparent rewrite partition compensation might result in incorrect results. <a href=https://github.com/apache/doris/pull/40803 target=_blank rel="noopener noreferrer">#40803</a></li>
<li>Fixed the issue where transparent rewrite did not take effect on external tables. <a href=https://github.com/apache/doris/pull/38909 target=_blank rel="noopener noreferrer">#38909</a></li>
<li>Fixed the issue where nested materialized views might not refresh properly. <a href=https://github.com/apache/doris/pull/40433 target=_blank rel="noopener noreferrer">#40433</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=synchronous-materialized-views>Synchronous Materialized Views<a href=#synchronous-materialized-views class=hash-link aria-label="Direct link to Synchronous Materialized Views" title="Direct link to Synchronous Materialized Views">​</a></h3>
<ul>
<li>Fixed the issue where creating synchronous materialized views on MOW tables might result in incorrect query results. <a href=https://github.com/apache/doris/pull/39171 target=_blank rel="noopener noreferrer">#39171</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=query-optimizer-2>Query Optimizer<a href=#query-optimizer-2 class=hash-link aria-label="Direct link to Query Optimizer" title="Direct link to Query Optimizer">​</a></h3>
<ul>
<li>Fixed the issue where existing synchronous materialized views might not be usable after upgrading. <a href=https://github.com/apache/doris/pull/41283 target=_blank rel="noopener noreferrer">#41283</a></li>
<li>Fixed the issue of not correctly handling milliseconds when comparing datetime literals. <a href=https://github.com/apache/doris/pull/40121 target=_blank rel="noopener noreferrer">#40121</a></li>
<li>Fixed the issue of potential errors in conditional function partition pruning. <a href=https://github.com/apache/doris/pull/39298 target=_blank rel="noopener noreferrer">#39298</a></li>
<li>Fixed the issue where MOW tables with synchronous materialized views could not perform delete operations. <a href=https://github.com/apache/doris/pull/39578 target=_blank rel="noopener noreferrer">#39578</a></li>
<li>Fixed the issue where the nullable of slots in JDBC external table query predicates might be incorrectly planned, causing query errors. <a href=https://github.com/apache/doris/pull/41014 target=_blank rel="noopener noreferrer">#41014</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=query-execution-2>Query Execution<a href=#query-execution-2 class=hash-link aria-label="Direct link to Query Execution" title="Direct link to Query Execution">​</a></h3>
<ul>
<li>Fixed the memory leak issue caused by the use of runtime filters. <a href=https://github.com/apache/doris/pull/39155 target=_blank rel="noopener noreferrer">#39155</a></li>
<li>Fixed the issue of excessive memory usage by window functions. <a href=https://github.com/apache/doris/pull/39581 target=_blank rel="noopener noreferrer">#39581</a></li>
<li>Fixed a series of function compatibility issues during rolling upgrades. <a href=https://github.com/apache/doris/pull/41023 target=_blank rel="noopener noreferrer">#41023</a>  <a href=https://github.com/apache/doris/pull/40438 target=_blank rel="noopener noreferrer">#40438</a>  <a href=https://github.com/apache/doris/pull/39648 target=_blank rel="noopener noreferrer">#39648</a></li>
<li>Fixed the issue of incorrect results with <code>encryption_function</code> when used with constants. <a href=https://github.com/apache/doris/pull/40201 target=_blank rel="noopener noreferrer">#40201</a></li>
<li>Fixed the issue of errors when importing single-table materialized views. <a href=https://github.com/apache/doris/pull/39061 target=_blank rel="noopener noreferrer">#39061</a></li>
<li>Fixed the issue of incorrect partition result calculations for window functions. <a href=https://github.com/apache/doris/pull/39100 target=_blank rel="noopener noreferrer">#39100</a>  <a href=https://github.com/apache/doris/pull/40761 target=_blank rel="noopener noreferrer">#40761</a></li>
<li>Fixed the issue of incorrect calculations for topn when null values are present. <a href=https://github.com/apache/doris/pull/39497 target=_blank rel="noopener noreferrer">#39497</a></li>
<li>Fixed the issue of incorrect results with the <code>map_agg</code> function. <a href=https://github.com/apache/doris/pull/39743 target=_blank rel="noopener noreferrer">#39743</a></li>
<li>Fixed the issue of incorrect messages returned by cancel. <a href=https://github.com/apache/doris/pull/38982 target=_blank rel="noopener noreferrer">#38982</a></li>
<li>Fixed the issue of BE core dumps caused by encrypt and decrypt functions. <a href=https://github.com/apache/doris/pull/40726 target=_blank rel="noopener noreferrer">#40726</a></li>
<li>Fixed the issue of queries getting stuck due to too many scanners in high-concurrency scenarios. <a href=https://github.com/apache/doris/pull/40495 target=_blank rel="noopener noreferrer">#40495</a></li>
<li>Supported time types in runtime filters. <a href=https://github.com/apache/doris/pull/38258 target=_blank rel="noopener noreferrer">#38258</a></li>
<li>Fixed the issue of incorrect results with window funnel functions. <a href=https://github.com/apache/doris/pull/40960 target=_blank rel="noopener noreferrer">#40960</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=semi-structured-data-management-1>Semi-Structured Data Management<a href=#semi-structured-data-management-1 class=hash-link aria-label="Direct link to Semi-Structured Data Management" title="Direct link to Semi-Structured Data Management">​</a></h3>
<ul>
<li>Fixed the issue of match function errors when no indexes were present. <a href=https://github.com/apache/doris/pull/38989 target=_blank rel="noopener noreferrer">#38989</a></li>
<li>Fixed the issue of crashes when ARRAY data types were used as parameters for array_min/array_max functions. <a href=https://github.com/apache/doris/pull/39492 target=_blank rel="noopener noreferrer">#39492</a></li>
<li>Fixed the issue of nullable with the <code>array_enumerate_uniq</code> function. <a href=https://github.com/apache/doris/pull/38384 target=_blank rel="noopener noreferrer">#38384</a></li>
<li>Fixed the issue of bloomfilter indexes not being updated when adding or deleting columns. <a href=https://github.com/apache/doris/pull/38431 target=_blank rel="noopener noreferrer">#38431</a></li>
<li>Fixed the issue of es-catalog parsing exceptions with array data. <a href=https://github.com/apache/doris/pull/39104 target=_blank rel="noopener noreferrer">#39104</a></li>
<li>Fixed the issue of improper predicate push-down in es-catalog. <a href=https://github.com/apache/doris/pull/40111 target=_blank rel="noopener noreferrer">#40111</a></li>
<li>Fixed the issue of exceptions caused by modifying input data with<code>map()</code> and <code>struct()</code> functions. <a href=https://github.com/apache/doris/pull/39699 target=_blank rel="noopener noreferrer">#39699</a></li>
<li>Fixed the issue of index compaction crashes in special cases. <a href=https://github.com/apache/doris/pull/40294 target=_blank rel="noopener noreferrer">#40294</a></li>
<li>Fixed the issue of ARRAY type inverted indexes missing nullbitmaps. <a href=https://github.com/apache/doris/pull/38907 target=_blank rel="noopener noreferrer">#38907</a></li>
<li>Fixed the issue of incorrect results with the <code>count()</code> function on inverted indexes. <a href=https://github.com/apache/doris/pull/41152 target=_blank rel="noopener noreferrer">#41152</a></li>
<li>Fixed the issue of correct results with the <code>explode_map</code> function when using aliases. <a href=https://github.com/apache/doris/pull/39757 target=_blank rel="noopener noreferrer">#39757</a></li>
<li>Fixed the issue of VARIANT type not being able to use row storage for exceptional JSON data. <a href=https://github.com/apache/doris/pull/39394 target=_blank rel="noopener noreferrer">#39394</a></li>
<li>Fixed the issue of memory leaks when returning ARRAY results with VARIANT type. <a href=https://github.com/apache/doris/pull/41358 target=_blank rel="noopener noreferrer">#41358</a></li>
<li>Fixed the issue of changing column names with VARIANT type. <a href=https://github.com/apache/doris/pull/40320 target=_blank rel="noopener noreferrer">#40320</a></li>
<li>Fixed the issue of potential precision loss when converting VARIANT type to DECIMAL type. <a href=https://github.com/apache/doris/pull/39650 target=_blank rel="noopener noreferrer">#39650</a></li>
<li>Fixed the issue of nullable handling with VARIANT type. <a href=https://github.com/apache/doris/pull/39732 target=_blank rel="noopener noreferrer">#39732</a></li>
<li>Fixed the issue of sparse column reading with VARIANT type. <a href=https://github.com/apache/doris/pull/40295 target=_blank rel="noopener noreferrer">#40295</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=other-3>Other<a href=#other-3 class=hash-link aria-label="Direct link to Other" title="Direct link to Other">​</a></h3>
<ul>
<li>Fixed the compatibility issue between new and old audit log plugins. <a href=https://github.com/apache/doris/pull/41401 target=_blank rel="noopener noreferrer">#41401</a></li>
<li>Fixed the issue where users could see processes of others in certain cases. <a href=https://github.com/apache/doris/pull/39747 target=_blank rel="noopener noreferrer">#39747</a></li>
<li>Fixed the issue where users with permissions could not export. <a href=https://github.com/apache/doris/pull/38365 target=_blank rel="noopener noreferrer">#38365</a></li>
<li>Fixed the issue where create table like required create permissions for the existing table. <a href=https://github.com/apache/doris/pull/37879 target=_blank rel="noopener noreferrer">#37879</a></li>
<li>Fixed the issue where some features did not verify permissions. <a href=https://github.com/apache/doris/pull/39726 target=_blank rel="noopener noreferrer">#39726</a></li>
<li>Fixed the issue of not correctly closing connections when using SSL. <a href=https://github.com/apache/doris/pull/38587 target=_blank rel="noopener noreferrer">#38587</a></li>
<li>Fixed the issue where executing ALTER VIEW operations in some cases caused FE to fail to start. <a href=https://github.com/apache/doris/pull/40872 target=_blank rel="noopener noreferrer">#40872</a></li>
</ul></div></div></article><article class=margin-bottom--xl itemprop=blogPost itemscope itemtype=http://schema.org/BlogPosting><div class=markdown itemprop=articleBody><header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href=/blog/>Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class=s-tags><span class=s-tag>Release Notes</span></span></span></div><h2 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop=headline><a itemprop=url href=/blog/release-note-2.0.15/>Apache Doris version 2.0.15 has been released</a></h2><div class="blog-info text-center flex justify-center text-sm text-black"><span class=authors><span class="s-author text-black">Apache Doris</span></span><time datetime=2024-09-30T00:00:00.000Z itemprop=datePublished class="text-black ml-4">September 30, 2024</time></div></header><div class=markdown itemprop=articleBody><p>Thanks to our community users and developers, about 157 improvements and bug fixes have been made in Doris 2.0.15 version</p>
<ul>
<li>
<p>Quick Download: <a href=https://doris.apache.org/download target=_blank rel="noopener noreferrer">https://doris.apache.org/download</a></p>
</li>
<li>
<p>GitHub: <a href=https://github.com/apache/doris/releases/tag/2.0.15 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/releases/tag/2.0.15</a></p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=1-behavior-change>1 Behavior Change<a href=#1-behavior-change class=hash-link aria-label="Direct link to 1 Behavior Change" title="Direct link to 1 Behavior Change">​</a></h2>
<p>NA</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=2-new-features>2 New Features<a href=#2-new-features class=hash-link aria-label="Direct link to 2 New Features" title="Direct link to 2 New Features">​</a></h2>
<ul>
<li>
<p>Restore now supports deleting redundant tablets and partition options. <a href=https://github.com/apache/doris/pull/39028 target=_blank rel="noopener noreferrer">#39028</a></p>
</li>
<li>
<p>Support JSON function <code>json_search</code>.<a href=https://github.com/apache/doris/pull/40948 target=_blank rel="noopener noreferrer">#40948</a></p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=3-improvement-and-optimizations>3 Improvement and Optimizations<a href=#3-improvement-and-optimizations class=hash-link aria-label="Direct link to 3 Improvement and Optimizations" title="Direct link to 3 Improvement and Optimizations">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=stability>Stability<a href=#stability class=hash-link aria-label="Direct link to Stability" title="Direct link to Stability">​</a></h3>
<ul>
<li>
<p>Add a FE configuration <code>abort_txn_after_lost_heartbeat_time_second</code> for transaction abort time. <a href=https://github.com/apache/doris/pull/28662 target=_blank rel="noopener noreferrer">#28662</a></p>
</li>
<li>
<p>Abort transactions after a BE loses heartbeat for over 1 minute instead of 5 seconds, to avoid overly sensitive transaction aborts. <a href=https://github.com/apache/doris/pull/22781 target=_blank rel="noopener noreferrer">#22781</a></p>
</li>
<li>
<p>Delay scheduling EOF tasks of routine load to avoid an excessive number of small transactions. <a href=https://github.com/apache/doris/pull/39975 target=_blank rel="noopener noreferrer">#39975</a></p>
</li>
<li>
<p>Prefer querying from online disk services to be more robust. <a href=https://github.com/apache/doris/pull/39467 target=_blank rel="noopener noreferrer">#39467</a></p>
</li>
<li>
<p>Skip checking newly inserted rows in non-strict mode partial updates if the row's delete sign is marked. <a href=https://github.com/apache/doris/pull/40322 target=_blank rel="noopener noreferrer">#40322</a></p>
</li>
<li>
<p>To prevent FE OOM, limit the number of tablets in backup tasks, with a default value of 300,000. <a href=https://github.com/apache/doris/pull/39987 target=_blank rel="noopener noreferrer">#39987</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=performance>Performance<a href=#performance class=hash-link aria-label="Direct link to Performance" title="Direct link to Performance">​</a></h3>
<ul>
<li>
<p>Optimize slow column updates caused by concurrent column updates and compactions. <a href=https://github.com/apache/doris/pull/38487 target=_blank rel="noopener noreferrer">#38487</a></p>
</li>
<li>
<p>When a NullLiteral exists in a filter condition, it can now be folded into False and further converted to an EmptySet to reduce unnecessary data scanning and computation. <a href=https://github.com/apache/doris/pull/38135 target=_blank rel="noopener noreferrer">#38135</a></p>
</li>
<li>
<p>Improve performance of <code>ORDER BY</code> permutation. <a href=https://github.com/apache/doris/pull/38985 target=_blank rel="noopener noreferrer">#38985</a></p>
</li>
<li>
<p>Improve the performance of string processing in inverted indexes. <a href=https://github.com/apache/doris/pull/37395 target=_blank rel="noopener noreferrer">#37395</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=optimizer-and-statistics>Optimizer and Statistics<a href=#optimizer-and-statistics class=hash-link aria-label="Direct link to Optimizer and Statistics" title="Direct link to Optimizer and Statistics">​</a></h3>
<ul>
<li>
<p>Added support for statements beginning with a semicolon. <a href=https://github.com/apache/doris/pull/39399 target=_blank rel="noopener noreferrer">#39399</a></p>
</li>
<li>
<p>Polish aggregate function signature matching. <a href=https://github.com/apache/doris/pull/39352 target=_blank rel="noopener noreferrer">#39352</a></p>
</li>
<li>
<p>Drop column statistics and trigger auto analysis after schema change. <a href=https://github.com/apache/doris/pull/39101 target=_blank rel="noopener noreferrer">#39101</a></p>
</li>
<li>
<p>Support dropping cached stats using <code>DROP CACHED STATS table_name</code>. <a href=https://github.com/apache/doris/pull/39367 target=_blank rel="noopener noreferrer">#39367</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=multi-catalog-and-others>Multi Catalog and Others<a href=#multi-catalog-and-others class=hash-link aria-label="Direct link to Multi Catalog and Others" title="Direct link to Multi Catalog and Others">​</a></h3>
<ul>
<li>
<p>Optimize JDBC Catalog refresh to reduce the frequency of client creation. <a href=https://github.com/apache/doris/pull/40261 target=_blank rel="noopener noreferrer">#40261</a></p>
</li>
<li>
<p>Fix thread leaks in JDBC Catalog under certain conditions. <a href=https://github.com/apache/doris/pull/39423 target=_blank rel="noopener noreferrer">#39423</a></p>
</li>
<li>
<p>ARRAY MAP STRUCT types now support <code>REPLACE_IF_NOT_NULL</code>. <a href=https://github.com/apache/doris/pull/38304 target=_blank rel="noopener noreferrer">#38304</a></p>
</li>
<li>
<p>Retry delete jobs for failures that are not <code>DELETE_INVALID_XXX</code>. <a href=https://github.com/apache/doris/pull/37834 target=_blank rel="noopener noreferrer">#37834</a></p>
</li>
</ul>
<p><strong>Credits</strong></p>
<p>@924060929, @BePPPower, @BiteTheDDDDt, @CalvinKirs, @GoGoWen, @HappenLee, @Jibing-Li, @Johnnyssc, @LiBinfeng-01, @Mryange, @SWJTU-ZhangLei, @TangSiyang2001, @Toms1999, @Vallishp, @Yukang-Lian, @airborne12, @amorynan, @bobhan1, @cambyzju, @csun5285, @dataroaring, @eldenmoon, @englefly, @feiniaofeiafei, @hello-stephen, @htyoung, @hubgeter, @justfortaste, @liaoxin01, @liugddx, @liutang123, @luwei16, @mongo360, @morrySnow, @qidaye, @smallx, @sollhui, @starocean999, @w41ter, @xiaokang, @xzj7019, @yujun777, @zclllyybb, @zddr, @zhangstar333, @zhannngchen, @zy-kkk, @zzzxl1993</div></div></article><article class=margin-bottom--xl itemprop=blogPost itemscope itemtype=http://schema.org/BlogPosting><div class=markdown itemprop=articleBody><header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href=/blog/>Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class=s-tags><span class=s-tag>Release Notes</span></span></span></div><h2 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop=headline><a itemprop=url href=/blog/release-flink-doris-connector-24.0.0/>Apache Doris Flink Connector 24.0.0  just released!</a></h2><div class="blog-info text-center flex justify-center text-sm text-black"><span class=authors><span class="s-author text-black">Apache Doris</span></span><time datetime=2024-09-25T00:00:00.000Z itemprop=datePublished class="text-black ml-4">September 25, 2024</time></div></header><div class=markdown itemprop=articleBody><p>Dear community, We are excited to announce the official release of Apache Doris Flink Connector version 24.0.0 on September 5th, 2024. This release brings several enhancements and new capabilities, including support for Flink 1.20 and high-speed data retrieval from Doris via Arrow Flight SQL. Additionally, the FlinkCDC version required for full database synchronization has been upgraded to 3.1.x for optimal performance.</p>
<ul>
<li>Download Link: <a href=https://github.com/apache/doris-flink-connector/releases/tag/24.0.0 target=_blank rel="noopener noreferrer">https://github.com/apache/doris-flink-connector/releases/tag/24.0.0</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=behavioral-changes>Behavioral Changes<a href=#behavioral-changes class=hash-link aria-label="Direct link to Behavioral Changes" title="Direct link to Behavioral Changes">​</a></h2>
<ul>
<li>
<p>FlinkCDC Upgrade: To leverage the full potential of this release, the FlinkCDC version used for full database synchronization must be upgraded to 3.1.x. Due to the incompatibility between FlinkCDC 3.1.x and earlier versions (e.g., 2.4), running full database synchronization jobs will require a stateless restart after upgrading FlinkCDC. Please refer to the <a href=https://mp.weixin.qq.com/s/qYW5Bw0IqUHUc8bnfWOIog target=_blank rel="noopener noreferrer">Apache Flink CDC 3.1.0 Release Announcement</a> for details on compatibility.</p>
</li>
<li>
<p>Version Renaming: To maintain consistency with other Connectors (e.g., Spark and Kafka) and account for the aforementioned incompatibilities, the Connector version has been renamed to the 24.x series. See the discussion thread <a href=https://lists.apache.org/thread/8tp215yk0tkgtdfkjdl4svvbljnmxzst target=_blank rel="noopener noreferrer">DISCUSS] About the next version change of Connector</a> for more information.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=new-features>New Features<a href=#new-features class=hash-link aria-label="Direct link to New Features" title="Direct link to New Features">​</a></h2>
<ul>
<li>
<p>Supported Flink v1.20.</p>
</li>
<li>
<p>DB2 Database synchronization is supported.</p>
</li>
<li>
<p>CDC Schema Change enhancement supported the use of the JSQLParser framework for DDL.</p>
</li>
<li>
<p>Supported Stream Load with GZ compression.</p>
</li>
<li>
<p>Enabled Arrow Flight SQL integration for high-speed data retrieval from Doris.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=improvements>Improvements<a href=#improvements class=hash-link aria-label="Direct link to Improvements" title="Direct link to Improvements">​</a></h2>
<ul>
<li>
<p>Upgraded FlinkCDC  to 3.1.1.</p>
</li>
<li>
<p>JDBC parameter configuration for DB2/Postgres/SQLServer synchronization.</p>
</li>
<li>
<p>Optimized batch writing mode.</p>
</li>
<li>
<p>Refined CDC synchronization logic.</p>
</li>
<li>
<p>Supported MySQL full database synchronization with <code>INTEGER</code> type.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=bug-fixes>Bug Fixes<a href=#bug-fixes class=hash-link aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h2>
<ul>
<li>
<p>Resolved serialization issues with <code>MAP</code> subtypes of <code>DATE</code>/ <code>DATETIME</code></p>
</li>
<li>
<p>Fixed FlinkSQL projection pushdown bugs</p>
</li>
<li>
<p>Resolved <code>DECIMAL</code> type sync issues with MongoDB</p>
</li>
<li>
<p>Compatibility update for Doris arrow-based timestamp reading</p>
</li>
<li>
<p>Fixed non-effective delete events in CDC full database synchronization</p>
</li>
<li>
<p>Corrected schema change logic when default values are null</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=credits>Credits<a href=#credits class=hash-link aria-label="Direct link to Credits" title="Direct link to Credits">​</a></h2>
<p>@bingquanzhao、@DongLiang-0、@JasonLeeCoding、@JNSimba@MaoMiMao、@qg-lin@tmc9031、@vinlee19</div></div></article><article class=margin-bottom--xl itemprop=blogPost itemscope itemtype=http://schema.org/BlogPosting><div class=markdown itemprop=articleBody><header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href=/blog/>Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class=s-tags><span class=s-tag>Release Notes</span></span></span></div><h2 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop=headline><a itemprop=url href=/blog/release-note-2.1.6/>Apache Doris 2.1.6 just released</a></h2><div class="blog-info text-center flex justify-center text-sm text-black"><span class=authors><span class="s-author text-black">Apache Doris</span></span><time datetime=2024-09-10T00:00:00.000Z itemprop=datePublished class="text-black ml-4">September 10, 2024</time></div></header><div class=markdown itemprop=articleBody><p>Dear community, <strong>Apache Doris version 2.1.6 was officially released on September 10, 2024.</strong> This version brings continuous upgrades and improvements to the Lakehouse, Async Materialized Views, and Semi-Structured Data Management. Additionally, several fixes have been implemented in areas such as the query optimizer, execution engine, storage management, permission management.</p>
<p><strong>Quick Download:</strong> <a href=https://doris.apache.org/download/ target=_blank rel="noopener noreferrer">https://doris.apache.org/download/</a></p>
<p><strong>GitHub Release:</strong> <a href=https://github.com/apache/doris/releases target=_blank rel="noopener noreferrer">https://github.com/apache/doris/releases</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=behavior-changes>Behavior changes<a href=#behavior-changes class=hash-link aria-label="Direct link to Behavior changes" title="Direct link to Behavior changes">​</a></h2>
<ul>
<li>
<p>Removed the <code>delete_if_exists</code> option from create repository. <a href=https://github.com/apache/doris/pull/38192 target=_blank rel="noopener noreferrer">#38192</a></p>
</li>
<li>
<p>Added the <code>enable_prepared_stmt_audit_log</code> session variable to control whether JDBC prepared statements record audit logs, with the default being no recording. <a href=https://github.com/apache/doris/pull/38624 target=_blank rel="noopener noreferrer">#38624</a> <a href=https://github.com/apache/doris/pull/39009 target=_blank rel="noopener noreferrer">#39009</a></p>
</li>
<li>
<p>Implemented fd limit and memory constraints for segment cache. <a href=https://github.com/apache/doris/pull/39689 target=_blank rel="noopener noreferrer">#39689</a></p>
</li>
<li>
<p>When the FE configuration item <code>sys_log_mode</code> is set to BRIEF, file location information is added to the logs. <a href=https://github.com/apache/doris/pull/39571 target=_blank rel="noopener noreferrer">#39571</a></p>
</li>
<li>
<p>Changed the default value of the session variable <code>max_allowed_packet</code> to 16MB. <a href=https://github.com/apache/doris/pull/38697 target=_blank rel="noopener noreferrer">#38697</a></p>
</li>
<li>
<p>When a single request contains multiple statements, semicolons must be used to separate them. <a href=https://github.com/apache/doris/pull/38670 target=_blank rel="noopener noreferrer">#38670</a></p>
</li>
<li>
<p>Added support for statements to begin with a semicolon. <a href=https://github.com/apache/doris/pull/39399 target=_blank rel="noopener noreferrer">#39399</a></p>
</li>
<li>
<p>Aligned type formatting with MySQL in statements such as <code>show create table</code>. <a href=https://github.com/apache/doris/pull/38012 target=_blank rel="noopener noreferrer">#38012</a></p>
</li>
<li>
<p>When the new optimizer planning times out, it no longer falls back to prevent the old optimizer from using longer planning times. <a href=https://github.com/apache/doris/pull/39499 target=_blank rel="noopener noreferrer">#39499</a></p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=new-features>New features<a href=#new-features class=hash-link aria-label="Direct link to New features" title="Direct link to New features">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=lakehouse>Lakehouse<a href=#lakehouse class=hash-link aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">​</a></h3>
<ul>
<li>
<p>Supported writeback for Iceberg tables.</p>
<ul>
<li>For more information, please refer to the <a href=https://doris.apache.org/docs/lakehouse/datalake-building/iceberg-build target=_blank rel="noopener noreferrer">documentation</a>.</li>
</ul>
</li>
<li>
<p>SQL interception rules now support external tables.</p>
<ul>
<li>For more information, please refer to the <a href=https://doris.apache.org/docs/admin-manual/query-admin/sql-interception target=_blank rel="noopener noreferrer">documentation</a>.</li>
</ul>
</li>
<li>
<p>Added the system table <code>file_cache_statistics</code> to view BE data cache metrics.</p>
<ul>
<li>For more information, please refer to the <a href=https://doris.apache.org/docs/admin-manual/system-tables/file_cache_statistics target=_blank rel="noopener noreferrer">documentation</a>.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=async-materialized-view>Async Materialized View<a href=#async-materialized-view class=hash-link aria-label="Direct link to Async Materialized View" title="Direct link to Async Materialized View">​</a></h3>
<ul>
<li>
<p>Supported transparent rewriting during inserts. <a href=https://github.com/apache/doris/pull/38115 target=_blank rel="noopener noreferrer">#38115</a></p>
</li>
<li>
<p>Supported transparent rewriting when variant types exist in queries.<a href=https://github.com/apache/doris/pull/37929 target=_blank rel="noopener noreferrer"> #37929</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=semi-structured-data-management>Semi-Structured Data Management<a href=#semi-structured-data-management class=hash-link aria-label="Direct link to Semi-Structured Data Management" title="Direct link to Semi-Structured Data Management">​</a></h3>
<ul>
<li>
<p>Supported casting ARRAY MAP to JSON type.<a href=https://github.com/apache/doris/pull/36548 target=_blank rel="noopener noreferrer"> #36548</a></p>
</li>
<li>
<p>Supported the <code>json_keys</code> function.<a href=https://github.com/apache/doris/pull/36411 target=_blank rel="noopener noreferrer"> #36411</a></p>
</li>
<li>
<p>Supported specifying the JSON path $. when importing JSON. <a href=https://github.com/apache/doris/pull/38213 target=_blank rel="noopener noreferrer">#38213</a></p>
</li>
<li>
<p>ARRAY, MAP, STRUCT types now support <code>replace_if_not_null</code><a href=https://github.com/apache/doris/pull/38304 target=_blank rel="noopener noreferrer">#38304</a></p>
</li>
<li>
<p>ARRAY, MAP, STRUCT types now support adjusting column order.<a href=https://github.com/apache/doris/pull/39210 target=_blank rel="noopener noreferrer">#39210</a></p>
</li>
<li>
<p>Added the <code>multi_match</code> function to match keywords across multiple fields, with support for inverted index acceleration. <a href=https://github.com/apache/doris/pull/37722 target=_blank rel="noopener noreferrer">#37722</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=query-optimizer>Query Optimizer<a href=#query-optimizer class=hash-link aria-label="Direct link to Query Optimizer" title="Direct link to Query Optimizer">​</a></h3>
<ul>
<li>
<p>Filled in the original database name, table name, column name, and alias for returned columns in the MySQL protocol. <a href=https://github.com/apache/doris/pull/38126 target=_blank rel="noopener noreferrer"> #38126</a></p>
</li>
<li>
<p>Supported the aggregation function <code>group_concat</code> with both order by and distinct simultaneously. <a href=https://github.com/apache/doris/pull/38080 target=_blank rel="noopener noreferrer">#38080</a></p>
</li>
<li>
<p>SQL cache now supports reusing cached results for queries with different comments. <a href=https://github.com/apache/doris/pull/40049 target=_blank rel="noopener noreferrer">#40049</a></p>
</li>
<li>
<p>In partition pruning, supported including <code>date_trunc</code> and date functions in filter conditions. <a href=https://github.com/apache/doris/pull/38025 target=_blank rel="noopener noreferrer">#38025</a> <a href=https://github.com/apache/doris/pull/38743 target=_blank rel="noopener noreferrer">#38743</a></p>
</li>
<li>
<p>Allowed using the database name where the table resides as a qualifier prefix for table aliases. <a href=https://github.com/apache/doris/pull/38640 target=_blank rel="noopener noreferrer">#38640</a></p>
</li>
<li>
<p>Supported hint-style comments.<a href=https://github.com/apache/doris/pull/39113 target=_blank rel="noopener noreferrer">#39113</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=others>Others<a href=#others class=hash-link aria-label="Direct link to Others" title="Direct link to Others">​</a></h3>
<ul>
<li>
<p>Added the system table <code>table_properties</code> for viewing table properties.</p>
<ul>
<li>For more information, please refer to the <a href=https://doris.apache.org/docs/admin-manual/system-tables/information_schema/table_properties target=_blank rel="noopener noreferrer">documentation</a>.</li>
</ul>
</li>
<li>
<p>Introduced deadlock and slow lock detection in FE.</p>
<ul>
<li>For more information, please refer to the <a href=https://doris.apache.org/docs/admin-manual/maint-monitor/frontend-lock-manager target=_blank rel="noopener noreferrer">documentation</a>.</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=improvements>Improvements<a href=#improvements class=hash-link aria-label="Direct link to Improvements" title="Direct link to Improvements">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=lakehouse-1>Lakehouse<a href=#lakehouse-1 class=hash-link aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">​</a></h3>
<ul>
<li>
<p>Reimplemented the external table metadata caching mechanism.</p>
<ul>
<li>For details, refer to the <a href=https://doris.apache.org/docs/lakehouse/metacache target=_blank rel="noopener noreferrer">documentation</a>.</li>
</ul>
</li>
<li>
<p>Added the session variable <code>keep_carriage_return</code> with a default value of false. By default, reading Hive Text format tables treats both <code>\r\n</code> and <code>\n</code> as newline characters. <a href=https://github.com/apache/doris/pull/38099 target=_blank rel="noopener noreferrer">#38099</a></p>
</li>
<li>
<p>Optimized memory statistics for Parquet/ORC file read/write operations.<a href=https://github.com/apache/doris/pull/37257 target=_blank rel="noopener noreferrer">#37257</a></p>
</li>
<li>
<p>Supported pushing down IN/NOT IN predicates for Paimon tables. <a href=https://github.com/apache/doris/pull/38390 target=_blank rel="noopener noreferrer">#38390</a></p>
</li>
<li>
<p>Enhanced the optimizer to support Time Travel syntax for Hudi tables. <a href=https://github.com/apache/doris/pull/38591 target=_blank rel="noopener noreferrer">#38591</a></p>
</li>
<li>
<p>Optimized Kerberos authentication-related processes. <a href=https://github.com/apache/doris/pull/37301 target=_blank rel="noopener noreferrer"> #37301</a></p>
</li>
<li>
<p>Enabled reading Hive tables after renaming column operations. <a href=https://github.com/apache/doris/pull/38809 target=_blank rel="noopener noreferrer">#38809</a></p>
</li>
<li>
<p>Optimized the reading performance of partition columns for external tables. <a href=https://github.com/apache/doris/pull/38810 target=_blank rel="noopener noreferrer">#38810</a></p>
</li>
<li>
<p>Improved the data shard merging strategy during external table query planning to avoid performance degradation caused by a large number of small shards.<a href=https://github.com/apache/doris/pull/38964 target=_blank rel="noopener noreferrer">#38964</a></p>
</li>
<li>
<p>Added attributes such as location to <code>SHOW CREATE DATABASE/TABLE</code>. <a href=https://github.com/apache/doris/pull/39644 target=_blank rel="noopener noreferrer">#39644</a></p>
</li>
<li>
<p>Supported complex types in MaxCompute Catalog. <a href=https://github.com/apache/doris/pull/39822 target=_blank rel="noopener noreferrer">#39822</a></p>
</li>
<li>
<p>Optimized the file cache loading strategy by using asynchronous loading to avoid long BE startup times. <a href=https://github.com/apache/doris/pull/39036 target=_blank rel="noopener noreferrer">#39036</a></p>
</li>
<li>
<p>Improved the file cache eviction strategy, such as evicting locks held for extended periods. <a href=https://github.com/apache/doris/pull/39721 target=_blank rel="noopener noreferrer">#39721</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=async-materialized-view-1>Async Materialized View<a href=#async-materialized-view-1 class=hash-link aria-label="Direct link to Async Materialized View" title="Direct link to Async Materialized View">​</a></h3>
<ul>
<li>
<p>Supported hourly, weekly, and quarterly partition roll-up construction. <a href=https://github.com/apache/doris/pull/37678 target=_blank rel="noopener noreferrer">#37678</a></p>
</li>
<li>
<p>For materialized views based on Hive external tables, the metadata cache is now updated before refresh to ensure the latest data is obtained during each refresh. <a href=https://github.com/apache/doris/pull/38212 target=_blank rel="noopener noreferrer">#38212</a></p>
</li>
<li>
<p>Improved the performance of transparent rewrite planning in storage-compute decoupled mode by batch fetching metadata. <a href=https://github.com/apache/doris/pull/39301 target=_blank rel="noopener noreferrer">#39301</a></p>
</li>
<li>
<p>Enhanced the performance of transparent rewrite planning by prohibiting duplicate enumerations. <a href=https://github.com/apache/doris/pull/39541 target=_blank rel="noopener noreferrer">#39541</a></p>
</li>
<li>
<p>Improved the performance of transparent rewrite for refreshing materialized views based on Hive external table partitions.<a href=https://github.com/apache/doris/pull/38525 target=_blank rel="noopener noreferrer">#38525</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=semi-structured-data-management-1>Semi-Structured Data Management<a href=#semi-structured-data-management-1 class=hash-link aria-label="Direct link to Semi-Structured Data Management" title="Direct link to Semi-Structured Data Management">​</a></h3>
<ul>
<li>
<p>Optimized memory allocation for TOPN queries to improve performance. <a href=https://github.com/apache/doris/pull/37429 target=_blank rel="noopener noreferrer">#37429</a></p>
</li>
<li>
<p>Enhanced the performance of string processing in inverted indexes.<a href=https://github.com/apache/doris/pull/37395 target=_blank rel="noopener noreferrer">#37395</a></p>
</li>
<li>
<p>Optimized the performance of inverted indexes in MOW tables. <a href=https://github.com/apache/doris/pull/37428 target=_blank rel="noopener noreferrer">#37428</a></p>
</li>
<li>
<p>Supported specifying the row-store <code>page_size</code> during table creation to control compression effectiveness. <a href=https://github.com/apache/doris/pull/37145 target=_blank rel="noopener noreferrer">#37145</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=query-optimizer-1>Query Optimizer<a href=#query-optimizer-1 class=hash-link aria-label="Direct link to Query Optimizer" title="Direct link to Query Optimizer">​</a></h3>
<ul>
<li>
<p>Adjusted the row count estimation algorithm for mark joins, resulting in more accurate cardinality estimates for mark joins. <a href=https://github.com/apache/doris/pull/38270 target=_blank rel="noopener noreferrer">#38270</a></p>
</li>
<li>
<p>Optimized the cost estimation algorithm for semi/anti joins, enabling more accurate selection of semi/anti join orders. <a href=https://github.com/apache/doris/pull/37951 target=_blank rel="noopener noreferrer">#37951</a></p>
</li>
<li>
<p>Adjusted the filter estimation algorithm for cases where some columns have no statistical information, leading to more accurate cardinality estimates. <a href=https://github.com/apache/doris/pull/39592 target=_blank rel="noopener noreferrer">#39592</a></p>
</li>
<li>
<p>Modified the instance calculation logic for set operation operators to prevent insufficient parallelism in extreme cases. <a href=https://github.com/apache/doris/pull/39999 target=_blank rel="noopener noreferrer">#39999</a></p>
</li>
<li>
<p>Adjusted the usage strategy of bucket shuffle, achieving better performance when data is not sufficiently shuffled. <a href=https://github.com/apache/doris/pull/36784 target=_blank rel="noopener noreferrer">#36784</a></p>
</li>
<li>
<p>Enabled early filtering of window function data, supporting multiple window functions in a single projection. <a href=https://github.com/apache/doris/pull/38393 target=_blank rel="noopener noreferrer">#38393</a></p>
</li>
<li>
<p>When a <code>NullLiteral</code> exists in a filter condition, it can now be folded into false, further converted to an <code>EmptySet</code> to reduce unnecessary data scanning and computation. <a href=https://github.com/apache/doris/pull/38135 target=_blank rel="noopener noreferrer">#38135</a></p>
</li>
<li>
<p>Expanded the scope of predicate derivation, reducing data scanning in queries with specific patterns. <a href=https://github.com/apache/doris/pull/37314 target=_blank rel="noopener noreferrer">#37314</a></p>
</li>
<li>
<p>Supported partial short-circuit evaluation logic in partition pruning to improve partition pruning performance, achieving over 100% improvement in specific scenarios. <a href=https://github.com/apache/doris/pull/38191 target=_blank rel="noopener noreferrer">#38191</a></p>
</li>
<li>
<p>Enabled the computation of arbitrary scalar functions within user variables. <a href=https://github.com/apache/doris/pull/39144 target=_blank rel="noopener noreferrer">#39144</a></p>
</li>
<li>
<p>Maintained error messages consistent with MySQL when alias conflicts exist in queries. <a href=https://github.com/apache/doris/pull/38104 target=_blank rel="noopener noreferrer">#38104</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=query-execution>Query Execution<a href=#query-execution class=hash-link aria-label="Direct link to Query Execution" title="Direct link to Query Execution">​</a></h3>
<ul>
<li>
<p>Adapted AggState for compatibility from 2.1 to 3.x and fixed coredump issues. <a href=https://github.com/apache/doris/pull/37104 target=_blank rel="noopener noreferrer">#37104</a></p>
</li>
<li>
<p>Refactored the strategy selection for local shuffle when no joins are involved. <a href=https://github.com/apache/doris/pull/37282 target=_blank rel="noopener noreferrer">#37282</a></p>
</li>
<li>
<p>Modified the scanner for internal table queries to an asynchronous approach to prevent blocking during internal table queries. <a href=https://github.com/apache/doris/pull/38403 target=_blank rel="noopener noreferrer">#38403</a></p>
</li>
<li>
<p>Optimized the block merge process when building hash tables in Join operators. <a href=https://github.com/apache/doris/pull/37471 target=_blank rel="noopener noreferrer">#37471</a></p>
</li>
<li>
<p>Reduced the lock holding time for MultiCast operations. <a href=https://github.com/apache/doris/pull/37462 target=_blank rel="noopener noreferrer">37462</a></p>
</li>
<li>
<p>Optimized gRPC's keepAliveTime and added a connection monitoring mechanism, reducing the probability of query failures due to RPC errors during query execution. <a href=https://github.com/apache/doris/pull/37304 target=_blank rel="noopener noreferrer">#37304</a></p>
</li>
<li>
<p>Cleaned up all dirty pages in jemalloc when memory limits are exceeded. <a href=https://github.com/apache/doris/pull/37164 target=_blank rel="noopener noreferrer">#37164</a></p>
</li>
<li>
<p>Improved the performance of <code>aes_encrypt</code>/<code>decrypt</code> functions when handling constant types. <a href=https://github.com/apache/doris/pull/37194 target=_blank rel="noopener noreferrer">#37194</a></p>
</li>
<li>
<p>Optimized the performance of <code>json_extract</code> functions when processing constant data. <a href=https://github.com/apache/doris/pull/36927 target=_blank rel="noopener noreferrer">#36927</a></p>
</li>
<li>
<p>Optimized the performance of ParseURL functions when processing constant data. <a href=https://github.com/apache/doris/pull/36882 target=_blank rel="noopener noreferrer">#36882</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=backup-recovery--ccr>Backup Recovery / CCR<a href=#backup-recovery--ccr class=hash-link aria-label="Direct link to Backup Recovery / CCR" title="Direct link to Backup Recovery / CCR">​</a></h3>
<ul>
<li>
<p>Restore now supports deleting redundant tablets and partition options. <a href=https://github.com/apache/doris/pull/39363 target=_blank rel="noopener noreferrer">#39363</a></p>
</li>
<li>
<p>Check storage connectivity when creating a repository. <a href=https://github.com/apache/doris/pull/39538 target=_blank rel="noopener noreferrer">#39538</a></p>
</li>
<li>
<p>Enables binlog to support <code>DROP TABLE</code>, allowing CCR to incrementally synchronize <code>DROP TABLE</code> operations. <a href=https://github.com/apache/doris/pull/38541 target=_blank rel="noopener noreferrer">#38541</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=compaction>Compaction<a href=#compaction class=hash-link aria-label="Direct link to Compaction" title="Direct link to Compaction">​</a></h3>
<ul>
<li>
<p>Improves the issue where high-priority compaction tasks were not subject to task concurrency control limits. <a href=https://github.com/apache/doris/pull/38189 target=_blank rel="noopener noreferrer">#38189</a></p>
</li>
<li>
<p>Automatically reduces compaction memory consumption based on data characteristics. <a href=https://github.com/apache/doris/pull/37486 target=_blank rel="noopener noreferrer">#37486</a></p>
</li>
<li>
<p>Fixes an issue where the sequential data optimization strategy could lead to incorrect data in aggregate tables or MOR UNIQUE tables. <a href=https://github.com/apache/doris/pull/38299 target=_blank rel="noopener noreferrer"> #38299</a></p>
</li>
<li>
<p>Optimizes the rowset selection strategy during compaction during replica replenishment to avoid triggering -235 errors. <a href=https://github.com/apache/doris/pull/39262 target=_blank rel="noopener noreferrer">#39262</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=mow-merge-on-write>MOW (Merge-On-Write)<a href=#mow-merge-on-write class=hash-link aria-label="Direct link to MOW (Merge-On-Write)" title="Direct link to MOW (Merge-On-Write)">​</a></h3>
<ul>
<li>
<p>Optimizes slow column updates caused by concurrent column updates and compactions. <a href=https://github.com/apache/doris/pull/38682 target=_blank rel="noopener noreferrer">#38682</a></p>
</li>
<li>
<p>Fixes an issue where segcompaction during bulk data imports could lead to incorrect MOW data. <a href=https://github.com/apache/doris/pull/38992 target=_blank rel="noopener noreferrer">#38992</a> <a href=https://github.com/apache/doris/pull/39707 target=_blank rel="noopener noreferrer">#39707</a></p>
</li>
<li>
<p>Fixes data loss in column updates that may occur after BE restarts. <a href=https://github.com/apache/doris/pull/39035 target=_blank rel="noopener noreferrer">#39035</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=storage-management>Storage Management<a href=#storage-management class=hash-link aria-label="Direct link to Storage Management" title="Direct link to Storage Management">​</a></h3>
<ul>
<li>
<p>Adds FE configuration to control whether queries under hot-cold tiering prefer local data replicas. <a href=https://github.com/apache/doris/pull/38322 target=_blank rel="noopener noreferrer">#38322</a></p>
</li>
<li>
<p>Optimizes expired BE report messages to include newly created tablets. <a href=https://github.com/apache/doris/pull/38839 target=_blank rel="noopener noreferrer">#38839</a> <a href=https://github.com/apache/doris/pull/39605 target=_blank rel="noopener noreferrer">#39605</a></p>
</li>
<li>
<p>Optimizes replica scheduling priority strategy to prioritize replicas with missing data. <a href=https://github.com/apache/doris/pull/38884 target=_blank rel="noopener noreferrer">#38884</a></p>
</li>
<li>
<p>Prevents tablets with unfinished ALTER jobs from being balanced. <a href=https://github.com/apache/doris/pull/39202 target=_blank rel="noopener noreferrer">#39202</a></p>
</li>
<li>
<p>Enables modifying the number of buckets for tables with list partitioning. <a href=https://github.com/apache/doris/pull/39688 target=_blank rel="noopener noreferrer">#39688</a></p>
</li>
<li>
<p>Prefers querying from online disk services. <a href=https://github.com/apache/doris/pull/39654 target=_blank rel="noopener noreferrer">#39654</a></p>
</li>
<li>
<p>Improves error messages for materialized view base tables that do not support deletion during synchronization. <a href=https://github.com/apache/doris/pull/39857 target=_blank rel="noopener noreferrer">#39857</a></p>
</li>
<li>
<p>Improves error messages for single columns exceeding 4GB. <a href=https://github.com/apache/doris/pull/39897 target=_blank rel="noopener noreferrer">#39897</a></p>
</li>
<li>
<p>Fixes an issue where aborted transactions were omitted when plan errors occurred during <code>INSERT</code> statements.<a href=https://github.com/apache/doris/pull/38260 target=_blank rel="noopener noreferrer">#38260</a></p>
</li>
<li>
<p>Fixes exceptions during SSL connection closure.<a href=https://github.com/apache/doris/pull/38677 target=_blank rel="noopener noreferrer">#38677</a></p>
</li>
<li>
<p>Fixes an issue where table locks were not held when aborting transactions using labels. <a href=https://github.com/apache/doris/pull/38842 target=_blank rel="noopener noreferrer">#38842</a></p>
</li>
<li>
<p>Fixes <code>gson pretty</code> causing large image issues. <a href=https://github.com/apache/doris/pull/39135 target=_blank rel="noopener noreferrer">#39135</a></p>
</li>
<li>
<p>Fixes an issue where the new optimizer did not check for bucket values of 0 in <code>CREATE TABLE</code> statements.<a href=https://github.com/apache/doris/pull/38999 target=_blank rel="noopener noreferrer">#38999</a></p>
</li>
<li>
<p>Fixes errors when Chinese column names are included in <code>DELETE</code> condition predicates. <a href=https://github.com/apache/doris/pull/39500 target=_blank rel="noopener noreferrer">#39500</a></p>
</li>
<li>
<p>Fixes frequent tablet balancing issues in partition balancing mode. <a href=https://github.com/apache/doris/pull/39606 target=_blank rel="noopener noreferrer">#39606</a></p>
</li>
<li>
<p>Fixes an issue where partition storage policy attributes were lost. <a href=https://github.com/apache/doris/pull/39677 target=_blank rel="noopener noreferrer">#39677</a></p>
</li>
<li>
<p>Fixes incorrect statistics when importing multiple tables within a transaction. <a href=https://github.com/apache/doris/pull/39548 target=_blank rel="noopener noreferrer">#39548</a></p>
</li>
<li>
<p>Fixes errors when deleting random bucket tables. <a href=https://github.com/apache/doris/pull/39830 target=_blank rel="noopener noreferrer">#39830</a></p>
</li>
<li>
<p>Fixes issues where FE fails to start due to non-existent UDFs. <a href=https://github.com/apache/doris/pull/39868 target=_blank rel="noopener noreferrer">#39868</a></p>
</li>
<li>
<p>Fixes inconsistencies in the last failed version between FE master and slave. <a href=https://github.com/apache/doris/pull/39947 target=_blank rel="noopener noreferrer">#39947</a></p>
</li>
<li>
<p>Fixes an issue where related tablets may still be in schema change state when schema change jobs are canceled. <a href=https://github.com/apache/doris/pull/39327 target=_blank rel="noopener noreferrer"> #39327</a></p>
</li>
<li>
<p>Fixes errors when modifying type and column order in a single statement schema change (SC). <a href=https://github.com/apache/doris/pull/39107 target=_blank rel="noopener noreferrer">#39107</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=data-loading>Data Loading<a href=#data-loading class=hash-link aria-label="Direct link to Data Loading" title="Direct link to Data Loading">​</a></h3>
<ul>
<li>
<p>Improves error messages for -238 errors during imports. <a href=https://github.com/apache/doris/pull/39182 target=_blank rel="noopener noreferrer">#39182</a></p>
</li>
<li>
<p>Allows importing to other partitions while restoring a partition. <a href=https://github.com/apache/doris/pull/39915 target=_blank rel="noopener noreferrer">#39915</a></p>
</li>
<li>
<p>Optimizes the strategy for FE to select BEs during group commit. <a href=https://github.com/apache/doris/pull/37830 target=_blank rel="noopener noreferrer">#37830</a> <a href=https://github.com/apache/doris/pull/39010 target=_blank rel="noopener noreferrer">#39010</a></p>
</li>
<li>
<p>Avoids printing stack traces for some common streamload error messages. <a href=https://github.com/apache/doris/pull/38418 target=_blank rel="noopener noreferrer">#38418</a></p>
</li>
<li>
<p>Improves handling of issues where offline BEs may affect import errors. <a href=https://github.com/apache/doris/pull/38256 target=_blank rel="noopener noreferrer">#38256</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=permissions>Permissions<a href=#permissions class=hash-link aria-label="Direct link to Permissions" title="Direct link to Permissions">​</a></h3>
<ul>
<li>Optimizes access performance after enabling the Ranger authentication plugin. <a href=https://github.com/apache/doris/pull/38575 target=_blank rel="noopener noreferrer">#38575</a></li>
<li>Optimizes permission strategies for Refresh Catalog/Database/Table operations, allowing users to perform these operations with only SHOW permissions. <a href=https://github.com/apache/doris/pull/39008 target=_blank rel="noopener noreferrer">#39008</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=bug-fixes>Bug fixes<a href=#bug-fixes class=hash-link aria-label="Direct link to Bug fixes" title="Direct link to Bug fixes">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=lakehouse-2>Lakehouse<a href=#lakehouse-2 class=hash-link aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">​</a></h3>
<ul>
<li>
<p>Fixes the issue where switching catalogs may result in an error of not finding the database. <a href=https://github.com/apache/doris/pull/38114 target=_blank rel="noopener noreferrer">#38114</a></p>
</li>
<li>
<p>Addresses exceptions caused by attempting to read non-existent data on S3. <a href=https://github.com/apache/doris/pull/38253 target=_blank rel="noopener noreferrer">#38253</a></p>
</li>
<li>
<p>Resolves the issue where specifying an abnormal path during export operations may lead to incorrect export locations. <a href=https://github.com/apache/doris/pull/38602 target=_blank rel="noopener noreferrer">#38602</a></p>
</li>
<li>
<p>Fixes the timezone issue for time columns in Paimon tables. <a href=https://github.com/apache/doris/pull/37716 target=_blank rel="noopener noreferrer">#37716</a></p>
</li>
<li>
<p>Temporarily disables the Parquet PageIndex feature to avoid certain erroneous behaviors.</p>
</li>
<li>
<p>Corrects the selection of Backend nodes in the blacklist during external table queries. <a href=https://github.com/apache/doris/pull/38984 target=_blank rel="noopener noreferrer">#38984</a></p>
</li>
<li>
<p>Resolves errors caused by missing subcolumns in Parquet Struct column types.<a href=https://github.com/apache/doris/pull/39192 target=_blank rel="noopener noreferrer">#39192</a></p>
</li>
<li>
<p>Addresses several issues with predicate pushdown in JDBC Catalog. <a href=https://github.com/apache/doris/pull/39082 target=_blank rel="noopener noreferrer">#39082</a></p>
</li>
<li>
<p>Fixes issues where some historical Parquet formats led to incorrect query results. <a href=https://github.com/apache/doris/pull/39375 target=_blank rel="noopener noreferrer">#39375</a></p>
</li>
<li>
<p>Improves compatibility with ojdbc6 drivers for Oracle JDBC Catalog. <a href=https://github.com/apache/doris/pull/39408 target=_blank rel="noopener noreferrer">#39408</a></p>
</li>
<li>
<p>Resolves potential FE memory leaks caused by Refresh Catalog/Database/Table operations. <a href=https://github.com/apache/doris/pull/39186 target=_blank rel="noopener noreferrer">#39186</a> <a href=https://github.com/apache/doris/pull/39871 target=_blank rel="noopener noreferrer">#39871</a></p>
</li>
<li>
<p>Fixes thread leaks in JDBC Catalog under certain conditions. <a href=https://github.com/apache/doris/pull/39666 target=_blank rel="noopener noreferrer">#39666</a> <a href=https://github.com/apache/doris/pull/39582 target=_blank rel="noopener noreferrer">#39582</a></p>
</li>
<li>
<p>Addresses potential event processing failures after enabling Hive Metastore event subscription. <a href=https://github.com/apache/doris/pull/39239 target=_blank rel="noopener noreferrer">#39239</a></p>
</li>
<li>
<p>Disables reading Hive Text format tables with custom escape characters and null formats to prevent data errors. <a href=https://github.com/apache/doris/pull/39869 target=_blank rel="noopener noreferrer">#39869</a></p>
</li>
<li>
<p>Resolves issues accessing Iceberg tables created via the Iceberg API under certain conditions. <a href=https://github.com/apache/doris/pull/39203 target=_blank rel="noopener noreferrer">#39203</a></p>
</li>
<li>
<p>Fixes the inability to read Paimon tables stored on HDFS clusters with high availability enabled. <a href=https://github.com/apache/doris/pull/39876 target=_blank rel="noopener noreferrer">#39876</a></p>
</li>
<li>
<p>Addresses errors that may occur when reading Paimon table deletion vectors after enabling file caching. <a href=https://github.com/apache/doris/pull/39875 target=_blank rel="noopener noreferrer">#39875</a></p>
</li>
<li>
<p>Resolves potential deadlocks when reading Parquet files under certain conditions. <a href=https://github.com/apache/doris/pull/39945 target=_blank rel="noopener noreferrer">#39945</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=async-materialized-view-2>Async Materialized View<a href=#async-materialized-view-2 class=hash-link aria-label="Direct link to Async Materialized View" title="Direct link to Async Materialized View">​</a></h3>
<ul>
<li>
<p>Fixes the inability to use <code>SHOW CREATE MATERIALIZED VIEW</code> on follower FEs. <a href=https://github.com/apache/doris/pull/38794 target=_blank rel="noopener noreferrer">#38794</a></p>
</li>
<li>
<p>Unifies the object type of asynchronous materialized views in metadata as tables to enable proper display in data tools. <a href=https://github.com/apache/doris/pull/38797 target=_blank rel="noopener noreferrer">#38797</a></p>
</li>
<li>
<p>Resolves the issue where nested asynchronous materialized views always perform full refreshes. <a href=https://github.com/apache/doris/pull/38698 target=_blank rel="noopener noreferrer">#38698</a></p>
</li>
<li>
<p>Fixes the issue where canceled tasks may show as running after restarting FEs. <a href=https://github.com/apache/doris/pull/39424 target=_blank rel="noopener noreferrer"> #39424</a></p>
</li>
<li>
<p>Addresses incorrect use of contexts, which may lead to unexpected failures of materialized view refresh tasks. <a href=https://github.com/apache/doris/pull/39690 target=_blank rel="noopener noreferrer">#39690</a></p>
</li>
<li>
<p>Resolves issues that may cause varchar type write failures due to unreasonable lengths when creating asynchronous materialized views based on external tables.<a href=https://github.com/apache/doris/pull/37668 target=_blank rel="noopener noreferrer">#37668</a></p>
</li>
<li>
<p>Fixes the potential invalidation of asynchronous materialized views based on external tables after FE restarts or catalog rebuilds. <a href=https://github.com/apache/doris/pull/39355 target=_blank rel="noopener noreferrer">#39355</a></p>
</li>
<li>
<p>Prohibits the use of partition rollup for materialized views with list partitions to prevent the generation of incorrect data. <a href=https://github.com/apache/doris/pull/38124 target=_blank rel="noopener noreferrer">#38124</a></p>
</li>
<li>
<p>Fixes incorrect results when literals exist in the select list during transparent rewriting for aggregation rollup. <a href=https://github.com/apache/doris/pull/38958 target=_blank rel="noopener noreferrer">#38958</a></p>
</li>
<li>
<p>Addresses potential errors during transparent rewriting when queries contain filters like <code>a = a</code>. <a href=https://github.com/apache/doris/pull/39629 target=_blank rel="noopener noreferrer">#39629</a></p>
</li>
<li>
<p>Fixes issues where transparent rewriting for direct external table queries fails. <a href=https://github.com/apache/doris/pull/39041 target=_blank rel="noopener noreferrer">#39041</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=semi-structured-data-management-2>Semi-Structured Data Management<a href=#semi-structured-data-management-2 class=hash-link aria-label="Direct link to Semi-Structured Data Management" title="Direct link to Semi-Structured Data Management">​</a></h3>
<ul>
<li>
<p>Removes support for prepared statements in the old optimizer. <a href=https://github.com/apache/doris/pull/39465 target=_blank rel="noopener noreferrer">#39465</a></p>
</li>
<li>
<p>Fixes issues with JSON escape character handling. <a href=https://github.com/apache/doris/pull/37251 target=_blank rel="noopener noreferrer">#37251</a></p>
</li>
<li>
<p>Resolves issues with duplicate processing of JSON fields. <a href=https://github.com/apache/doris/pull/38490 target=_blank rel="noopener noreferrer">#38490</a></p>
</li>
<li>
<p>Fixes issues with some ARRAY and MAP functions. <a href=https://github.com/apache/doris/pull/39307 target=_blank rel="noopener noreferrer">#39307</a> <a href=https://github.com/apache/doris/pull/39699 target=_blank rel="noopener noreferrer">#39699</a> <a href=https://github.com/apache/doris/pull/39757 target=_blank rel="noopener noreferrer">#39757</a></p>
</li>
<li>
<p>Resolves complex combinations of inverted index queries and LIKE queries. <a href=https://github.com/apache/doris/pull/36687 target=_blank rel="noopener noreferrer">#36687</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=query-optimizer-2>Query Optimizer<a href=#query-optimizer-2 class=hash-link aria-label="Direct link to Query Optimizer" title="Direct link to Query Optimizer">​</a></h3>
<ul>
<li>
<p>Fixed the potential partition pruning error issue when the 'OR' condition exists in partition filter conditions. <a href=https://github.com/apache/doris/pull/38897 target=_blank rel="noopener noreferrer">#38897</a></p>
</li>
<li>
<p>Fixed the potential partition pruning error issue when complex expressions are involved. <a href=https://github.com/apache/doris/pull/39298 target=_blank rel="noopener noreferrer">#39298</a></p>
</li>
<li>
<p>Fixed the issue where nullable in <code>agg_state</code> subtypes might be planned incorrectly, leading to execution errors. <a href=https://github.com/apache/doris/pull/37489 target=_blank rel="noopener noreferrer">#37489</a></p>
</li>
<li>
<p>Fixed the issue where nullable in set operation operators might be planned incorrectly, leading to execution errors. <a href=https://github.com/apache/doris/pull/39109 target=_blank rel="noopener noreferrer">#39109</a></p>
</li>
<li>
<p>Fixed the incorrect execution priority issue of intersect operator. <a href=https://github.com/apache/doris/pull/39095 target=_blank rel="noopener noreferrer">#39095</a></p>
</li>
<li>
<p>Fixed the NPE issue that may occur when the maximum valid date literal exists in the query. <a href=https://github.com/apache/doris/pull/39482 target=_blank rel="noopener noreferrer">#39482</a></p>
</li>
<li>
<p>Fixed the occasional planning error that results in an illegal slot error during execution. <a href=https://github.com/apache/doris/pull/39640 target=_blank rel="noopener noreferrer">#39640</a></p>
</li>
<li>
<p>Fixed the issue where repeatedly referencing columns in cte may lead to missing data in some columns in the result. <a href=https://github.com/apache/doris/pull/39850 target=_blank rel="noopener noreferrer">#39850</a></p>
</li>
<li>
<p>Fixed the occasional planning error issue when 'case when' exists in the query. <a href=https://github.com/apache/doris/pull/38491 target=_blank rel="noopener noreferrer">#38491</a></p>
</li>
<li>
<p>Fixed the issue where IP types cannot be implicitly converted to string types. <a href=https://github.com/apache/doris/pull/39318 target=_blank rel="noopener noreferrer">#39318</a></p>
</li>
<li>
<p>Fixed the potential planning error issue when using multi-dimensional aggregation and the same column and its alias exist in the select list. <a href=https://github.com/apache/doris/pull/38166 target=_blank rel="noopener noreferrer"> #38166</a></p>
</li>
<li>
<p>Fixed the issue where boolean types might be handled incorrectly when using BE constant folding. <a href=https://github.com/apache/doris/pull/39019 target=_blank rel="noopener noreferrer">#39019</a></p>
</li>
<li>
<p>Fixed the planning error issue caused by <code>default_cluster</code>: as a prefix for the database name in expressions. <a href=https://github.com/apache/doris/pull/39114 target=_blank rel="noopener noreferrer">#39114</a></p>
</li>
<li>
<p>Fixed the potential deadlock issue caused by<code> insert into</code>. <a href=https://github.com/apache/doris/pull/38660 target=_blank rel="noopener noreferrer">#38660</a></p>
</li>
<li>
<p>Fixed the potential planning error issue caused by not holding table locks throughout the planning process. <a href=https://github.com/apache/doris/pull/38950 target=_blank rel="noopener noreferrer">#38950</a></p>
</li>
<li>
<p>Fixed the issue where CHAR(0), VARCHAR(0) are not handled correctly when creating tables. <a href=https://github.com/apache/doris/pull/38427 target=_blank rel="noopener noreferrer">#38427</a></p>
</li>
<li>
<p>Fixed the issue where <code>show create table</code> may incorrectly display hidden columns. <a href=https://github.com/apache/doris/pull/38796 target=_blank rel="noopener noreferrer">#38796</a></p>
</li>
<li>
<p>Fixed the issue where columns with the same name as hidden columns are not prohibited when creating tables. <a href=https://github.com/apache/doris/pull/38796 target=_blank rel="noopener noreferrer">#38796</a></p>
</li>
<li>
<p>Fixed the occasional planning error issue when executing <code>insert into as select</code> with CTEs. <a href=https://github.com/apache/doris/pull/38526 target=_blank rel="noopener noreferrer">#38526</a></p>
</li>
<li>
<p>Fixed the issue where <code>insert into values</code> cannot automatically fill null default values. <strong>[<a href=/blog/tags/release-notes/Nereids/>fix</a> fix insert into table with null literal default value #39122](<a href=https://github.com/apache/doris/pull/39122 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/39122</a>)</strong></p>
</li>
<li>
<p>Fixed the NPE issue caused by using cte in delete without using it. <a href=https://github.com/apache/doris/pull/39379 target=_blank rel="noopener noreferrer">#39379</a></p>
</li>
<li>
<p>Fixed the issue where deleting from a randomly distributed aggregation model table fails. <a href=https://github.com/apache/doris/pull/37985 target=_blank rel="noopener noreferrer">#37985</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=query-execution-1>Query Execution<a href=#query-execution-1 class=hash-link aria-label="Direct link to Query Execution" title="Direct link to Query Execution">​</a></h3>
<ul>
<li>
<p>Fixed the issue where the pipeline execution engine gets stuck in multiple scenarios, causing queries not to end. <a href=https://github.com/apache/doris/pull/38657 target=_blank rel="noopener noreferrer">#38657</a> <a href=https://github.com/apache/doris/pull/38206 target=_blank rel="noopener noreferrer">#38206</a> <a href=https://github.com/apache/doris/pull/38885 target=_blank rel="noopener noreferrer">#38885</a></p>
</li>
<li>
<p>Fixed the coredump issue caused by null and non-null columns in set difference calculations.<a href=https://github.com/apache/doris/pull/38737 target=_blank rel="noopener noreferrer">#38737</a></p>
</li>
<li>
<p>Fixed the incorrect result issue of the <code>width_bucket</code> function. <a href=https://github.com/apache/doris/pull/37892 target=_blank rel="noopener noreferrer">#37892</a></p>
</li>
<li>
<p>Fixed the query error issue when a single row of data is large and the result set is also large (exceeding 2GB). <a href=https://github.com/apache/doris/pull/37990 target=_blank rel="noopener noreferrer">#37990</a></p>
</li>
<li>
<p>Fixed the incorrect result issue of <code>stddev</code> with DecimalV2 type. <a href=https://github.com/apache/doris/pull/38731 target=_blank rel="noopener noreferrer">#38731</a></p>
</li>
<li>
<p>Fixed the coredump issue caused by the <code>MULTI_MATCH_ANY</code> function. <a href=https://github.com/apache/doris/pull/37959 target=_blank rel="noopener noreferrer">#37959</a></p>
</li>
<li>
<p>Fixed the issue where <code>insert overwrite auto partition</code> causes transaction rollback. <a href=https://github.com/apache/doris/pull/38103 target=_blank rel="noopener noreferrer">#38103</a></p>
</li>
<li>
<p>Fixed the incorrect result issue of the <code>convert_tz</code> function. <a href=https://github.com/apache/doris/pull/37358 target=_blank rel="noopener noreferrer">#37358</a> <a href=https://github.com/apache/doris/pull/38764 target=_blank rel="noopener noreferrer">#38764</a></p>
</li>
<li>
<p>Fixed the coredump issue when using the <code>collect_set</code> function with window functions. <a href=https://github.com/apache/doris/pull/38234 target=_blank rel="noopener noreferrer">#38234</a></p>
</li>
<li>
<p>Fixed the coredump issue caused by the mod function with abnormal input. <a href=https://github.com/apache/doris/pull/37999 target=_blank rel="noopener noreferrer">#37999</a></p>
</li>
<li>
<p>Fixed the issue where executing the same expression in multiple threads may lead to incorrect Java UDF results. <a href=https://github.com/apache/doris/pull/38612 target=_blank rel="noopener noreferrer">#38612</a></p>
</li>
<li>
<p>Fixed the overflow issue caused by the incorrect return type of the <code>conv</code> function. <a href=https://github.com/apache/doris/pull/38001 target=_blank rel="noopener noreferrer">#38001</a></p>
</li>
<li>
<p>Fixed the unstable result issue of the histogram function. <a href=https://github.com/apache/doris/pull/38608 target=_blank rel="noopener noreferrer">#38608</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=backup--recovery--ccr>Backup & Recovery / CCR<a href=#backup--recovery--ccr class=hash-link aria-label="Direct link to Backup & Recovery / CCR" title="Direct link to Backup & Recovery / CCR">​</a></h3>
<ul>
<li>
<p>Fixed the issue where the data version after backup and recovery may be incorrect, leading to unreadability. <a href=https://github.com/apache/doris/pull/38343 target=_blank rel="noopener noreferrer">#38343</a></p>
</li>
<li>
<p>Fixed the issue of using restore version across versions. <a href=https://github.com/apache/doris/pull/38396 target=_blank rel="noopener noreferrer">#38396</a></p>
</li>
<li>
<p>Fixed the issue where the job is not canceled when backup fails. <a href=https://github.com/apache/doris/pull/38993 target=_blank rel="noopener noreferrer">#38993</a></p>
</li>
<li>
<p>Fixed the NPE issue in ccr during the upgrade from 2.1.4 to 2.1.5, causing the FE to fail to start. <a href=https://github.com/apache/doris/pull/39910 target=_blank rel="noopener noreferrer">#39910</a></p>
</li>
<li>
<p>Fixed the issue where views and materialized views cannot be used after restoration. <a href=https://github.com/apache/doris/pull/38072 target=_blank rel="noopener noreferrer">#38072</a> <a href=https://github.com/apache/doris/pull/39848 target=_blank rel="noopener noreferrer">#39848</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=storage-management-1>Storage Management<a href=#storage-management-1 class=hash-link aria-label="Direct link to Storage Management" title="Direct link to Storage Management">​</a></h3>
<ul>
<li>
<p>Fixed possible memory leaks in routine load when loading multiple tables from a single stream. <a href=https://github.com/apache/doris/pull/38824 target=_blank rel="noopener noreferrer">#38824</a></p>
</li>
<li>
<p>Fixed the issue where delimiters and escape characters in routine load were not effective. <a href=https://github.com/apache/doris/pull/38825 target=_blank rel="noopener noreferrer">#38825</a></p>
</li>
<li>
<p>Fixed incorrectly show routine load results when the routine load task name contained uppercase letters. <a href=https://github.com/apache/doris/pull/38826 target=_blank rel="noopener noreferrer">#38826</a></p>
</li>
<li>
<p>Fixed the issue where the offset cache was not reset when changing the routineload topic. <a href=https://github.com/apache/doris/pull/38474 target=_blank rel="noopener noreferrer">#38474</a></p>
</li>
<li>
<p>Fixed the potential exception triggered by show routineload under concurrent scenarios. <a href=https://github.com/apache/doris/pull/39525 target=_blank rel="noopener noreferrer">#39525</a></p>
</li>
<li>
<p>Fixed the issue where routine load might import data repeatedly. <a href=https://github.com/apache/doris/pull/39526 target=_blank rel="noopener noreferrer">#39526</a></p>
</li>
<li>
<p>Fixed the data error caused by <code>setNull</code> when enabling group commit via JDBC. <a href=https://github.com/apache/doris/pull/38276 target=_blank rel="noopener noreferrer">#38276</a></p>
</li>
<li>
<p>Fixed the potential NPE issue when enabling group commit insert to a non-master FE. <a href=https://github.com/apache/doris/pull/38345 target=_blank rel="noopener noreferrer">#38345</a></p>
</li>
<li>
<p>Fixed incorrect error handling during internal data writing in group commit. <a href=https://github.com/apache/doris/pull/38997 target=_blank rel="noopener noreferrer">#38997</a></p>
</li>
<li>
<p>Fixed the coredump that might be triggered when the group commit execution plan failed. <a href=https://github.com/apache/doris/pull/39396 target=_blank rel="noopener noreferrer">#39396</a></p>
</li>
<li>
<p>Fixed the issue where concurrent imports into auto partition tables might report non-existent tablets. <a href=https://github.com/apache/doris/pull/38793 target=_blank rel="noopener noreferrer">#38793</a></p>
</li>
<li>
<p>Fixed potential load stream leakage issues. <a href=https://github.com/apache/doris/pull/39039 target=_blank rel="noopener noreferrer">#39039</a></p>
</li>
<li>
<p>Fixed the issue where transactions were opened for <code>insert into select</code> with no data. <a href=https://github.com/apache/doris/pull/39108 target=_blank rel="noopener noreferrer">#39108</a></p>
</li>
<li>
<p>Ignored the single-replica import configuration when using memtable prefetching. <a href=https://github.com/apache/doris/pull/39154 target=_blank rel="noopener noreferrer">#39154</a></p>
</li>
<li>
<p>Fixed the issue where background imports of stream load records might be abnormally aborted upon encountering db deletion. <a href=https://github.com/apache/doris/pull/39527 target=_blank rel="noopener noreferrer">#39527</a></p>
</li>
<li>
<p>Fixed inaccurate error messages when data errors occurred in strict mode. <a href=https://github.com/apache/doris/pull/39587 target=_blank rel="noopener noreferrer">#39587</a></p>
</li>
<li>
<p>Fixed the issue where streamload did not return an error URL upon encountering erroneous data. <a href=https://github.com/apache/doris/pull/38417 target=_blank rel="noopener noreferrer">#38417</a></p>
</li>
<li>
<p>Fixed the issue with the combined use of insert overwrite and auto partition. <a href=https://github.com/apache/doris/pull/38442 target=_blank rel="noopener noreferrer">#38442</a></p>
</li>
<li>
<p>Fixed parsing errors when CSV encountered data where the line delimiter was enclosed by the enclosing character. <a href=https://github.com/apache/doris/pull/38445 target=_blank rel="noopener noreferrer">#38445</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=data-exporting>Data Exporting<a href=#data-exporting class=hash-link aria-label="Direct link to Data Exporting" title="Direct link to Data Exporting">​</a></h3>
<ul>
<li>Fixed the issue where enabling the delete_existing_files property during export operations might result in duplicate deletion of exported data. <a href=https://github.com/apache/doris/pull/39304 target=_blank rel="noopener noreferrer">#39304</a>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=permissions-1>Permissions<a href=#permissions-1 class=hash-link aria-label="Direct link to Permissions" title="Direct link to Permissions">​</a></h3>
<ul>
<li>
<p>Fixed the incorrect requirement of ALTER TABLE permission when creating a materialized view. <a href=https://github.com/apache/doris/pull/38011 target=_blank rel="noopener noreferrer">#38011</a></p>
</li>
<li>
<p>Fixed the issue where the db was explicitly displayed as empty when showing routine load. <a href=https://github.com/apache/doris/pull/38365 target=_blank rel="noopener noreferrer">#38365</a></p>
</li>
<li>
<p>Fixed the incorrect requirement of CREATE permission on the original table when using CREATE TABLE LIKE. <a href=https://github.com/apache/doris/pull/37879 target=_blank rel="noopener noreferrer">#37879</a></p>
</li>
<li>
<p>Fixed the issue where grant operations did not check if the object existed. <a href=https://github.com/apache/doris/pull/39597 target=_blank rel="noopener noreferrer">#39597</a></p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=upgrade-suggestions>Upgrade suggestions<a href=#upgrade-suggestions class=hash-link aria-label="Direct link to Upgrade suggestions" title="Direct link to Upgrade suggestions">​</a></h2>
<p>When upgrading Doris, please follow the principle of not skipping two minor versions and upgrade sequentially.</p>
<p>For example, if you are upgrading from version 0.15.x to 2.0.x, it is recommended to first upgrade to the latest version of 1.1, then upgrade to the latest version of 1.2, and finally upgrade to the latest version of 2.0.</p>
<p>For more upgrade information, see the documentation: <a href=/blog/admin-manual/cluster-management/upgrade/>Cluster Upgrade</a></div></div></article><article class=margin-bottom--xl itemprop=blogPost itemscope itemtype=http://schema.org/BlogPosting><div class=markdown itemprop=articleBody><header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href=/blog/>Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class=s-tags><span class=s-tag>Release Notes</span></span></span></div><h2 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop=headline><a itemprop=url href=/blog/release-note-3.0.1/>Apache Doris 3.0.1 just released</a></h2><div class="blog-info text-center flex justify-center text-sm text-black"><span class=authors><span class="s-author text-black">Apache Doris</span></span><time datetime=2024-08-23T00:00:00.000Z itemprop=datePublished class="text-black ml-4">August 23, 2024</time></div></header><div class=markdown itemprop=articleBody><p>Dear community members, the Apache Doris 3.0.1 version was officially released on August 23, 2024, featuring updates and improvements in compute-storage decoupling, lakehouse, semi-structured data analysis, asynchronous materialized views, and more.</p>
<p><strong>Quick Download:</strong> <a href=https://doris.apache.org/download/ target=_blank rel="noopener noreferrer">https://doris.apache.org/download/</a></p>
<p><strong>GitHub Release:</strong> <a href=https://github.com/apache/doris/releases target=_blank rel="noopener noreferrer">https://github.com/apache/doris/releases</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=behavior-changes>Behavior Changes<a href=#behavior-changes class=hash-link aria-label="Direct link to Behavior Changes" title="Direct link to Behavior Changes">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=query-optimizer>Query Optimizer<a href=#query-optimizer class=hash-link aria-label="Direct link to Query Optimizer" title="Direct link to Query Optimizer">​</a></h3>
<ul>
<li>
<p>Added the variable <code>use_max_length_of_varchar_in_ctas</code> to control the length behavior of VARCHAR type when executing <code>CREATE TABLE AS SELECT</code> (CTAS) operations.  <a href=https://github.com/apache/doris/pull/37069 target=_blank rel="noopener noreferrer">#37069</a></p>
<ul>
<li>
<p>This variable is set to true by default.</p>
</li>
<li>
<p>When set to true, if the VARCHAR type column originates from a table, the derived length is used; otherwise, the maximum length is used.</p>
</li>
<li>
<p>When set to false, the VARCHAR type will always use the derived length.</p>
</li>
</ul>
</li>
<li>
<p>All data types will now be displayed in lowercase to maintain compatibility with MySQL format. <a href=https://github.com/apache/doris/pull/38012 target=_blank rel="noopener noreferrer">#38012</a></p>
</li>
<li>
<p>Multiple query statements in the same query request must now be separated by semicolons. <a href=https://github.com/apache/doris/pull/38670 target=_blank rel="noopener noreferrer">#38670</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=query-execution>Query Execution<a href=#query-execution class=hash-link aria-label="Direct link to Query Execution" title="Direct link to Query Execution">​</a></h3>
<ul>
<li>The default number of parallel tasks after shuffle operations in the cluster is set to 100, which will improve query stability and concurrent processing capability in large clusters. <a href=https://github.com/apache/doris/pull/38196 target=_blank rel="noopener noreferrer">#38196</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=storage>Storage<a href=#storage class=hash-link aria-label="Direct link to Storage" title="Direct link to Storage">​</a></h3>
<ul>
<li>
<p>The default value of <code>trash_file_expire_time_sec</code> has been changed from 86400 seconds to 0 seconds, which means that if files are deleted by mistake and the FE trash is cleared, the data cannot be recovered.</p>
</li>
<li>
<p>The table attribute <code>enable_mow_delete_on_delete_predicate</code> (introduced in version 3.0.0) has been renamed to <code>enable_mow_light_delete</code>.</p>
</li>
<li>
<p>Explicit transactions are now prohibited from performing delete operations on tables with written data.</p>
</li>
<li>
<p>Heavy schema change operations are prohibited on tables with auto-increment fields.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=new-features>New Features<a href=#new-features class=hash-link aria-label="Direct link to New Features" title="Direct link to New Features">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=job-scheduling>Job Scheduling<a href=#job-scheduling class=hash-link aria-label="Direct link to Job Scheduling" title="Direct link to Job Scheduling">​</a></h3>
<ul>
<li>Optimized the execution logic of internal scheduling jobs, decoupling the strong association between start time and immediate execution parameters. Now, tasks can be created with a specified start time or selected for immediate execution, without conflict, enhancing scheduling flexibility. <a href=https://github.com/apache/doris/pull/36805 target=_blank rel="noopener noreferrer">#36805</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=compute-storage-decoupled>Compute-Storage Decoupled<a href=#compute-storage-decoupled class=hash-link aria-label="Direct link to Compute-Storage Decoupled" title="Direct link to Compute-Storage Decoupled">​</a></h3>
<ul>
<li>
<p>Supports dynamic modification of the upper limit for file cache usage. <a href=https://github.com/apache/doris/pull/37484 target=_blank rel="noopener noreferrer">#37484</a></p>
</li>
<li>
<p>Recycler now supports object storage rate limiting and server-side rate limiting retry functionality. <a href=https://github.com/apache/doris/pull/37663 target=_blank rel="noopener noreferrer">#37663</a> <a href=https://github.com/apache/doris/pull/37680 target=_blank rel="noopener noreferrer">#37680</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=lakehouse>Lakehouse<a href=#lakehouse class=hash-link aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">​</a></h3>
<ul>
<li>
<p>Added the session variable <code>serde_dialect</code> to set the output format for complex types. <a href=https://github.com/apache/doris/pull/37039 target=_blank rel="noopener noreferrer">#37039</a></p>
</li>
<li>
<p>SQL interception now supports external tables.</p>
<ul>
<li>For more information, refer to the documentation on  <a href=https://doris.apache.org/docs/admin-manual/query-admin/sql-interception target=_blank rel="noopener noreferrer">SQL Interception</a>.</li>
</ul>
</li>
<li>
<p>Insert overwrite now supports Iceberg tables. <a href=https://github.com/apache/doris/pull/37191 target=_blank rel="noopener noreferrer">#37191</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=asynchronous-materialized-views>Asynchronous Materialized Views<a href=#asynchronous-materialized-views class=hash-link aria-label="Direct link to Asynchronous Materialized Views" title="Direct link to Asynchronous Materialized Views">​</a></h3>
<ul>
<li>
<p>Supports partition roll-up and build at the hourly level. <a href=https://github.com/apache/doris/pull/37678 target=_blank rel="noopener noreferrer">#37678</a></p>
</li>
<li>
<p>Supports atomic replacement of asynchronous materialized view definition statements. <a href=https://github.com/apache/doris/pull/36749 target=_blank rel="noopener noreferrer">#36749</a></p>
</li>
<li>
<p>Transparent rewriting now supports Insert statements. <a href=https://github.com/apache/doris/pull/38115 target=_blank rel="noopener noreferrer">#38115</a></p>
</li>
<li>
<p>Transparent rewriting now supports the VARIANT type. <a href=https://github.com/apache/doris/pull/37929 target=_blank rel="noopener noreferrer">#37929</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=query-execution-1>Query Execution<a href=#query-execution-1 class=hash-link aria-label="Direct link to Query Execution" title="Direct link to Query Execution">​</a></h3>
<ul>
<li>The group concat function now supports DISTINCT and ORDER BY options. <a href=https://github.com/apache/doris/pull/38744 target=_blank rel="noopener noreferrer">#38744</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=semi-structured-data-management>Semi-Structured Data Management<a href=#semi-structured-data-management class=hash-link aria-label="Direct link to Semi-Structured Data Management" title="Direct link to Semi-Structured Data Management">​</a></h3>
<ul>
<li>
<p>The ES Catalog now maps <code>nested</code> or <code>object</code> types in Elasticsearch to the JSON type in Doris. <a href=https://github.com/apache/doris/pull/37101 target=_blank rel="noopener noreferrer">#37101</a></p>
</li>
<li>
<p>Added the <code>MULTI_MATCH</code> function, which supports matching keywords across multiple fields and can leverage inverted indexes to accelerate searches. <a href=https://github.com/apache/doris/pull/37722 target=_blank rel="noopener noreferrer">#37722</a></p>
</li>
<li>
<p>Added the <code>explode_json_object</code> function, which can unfold objects in JSON data into multiple rows. <a href=https://github.com/apache/doris/pull/36887 target=_blank rel="noopener noreferrer">#36887</a></p>
</li>
<li>
<p>Inverted indexes now support memtable advancement, requiring index construction only once during multi-replica writes, reducing CPU consumption and improving performance. <a href=https://github.com/apache/doris/pull/35891 target=_blank rel="noopener noreferrer">#35891</a></p>
</li>
<li>
<p>Added <code>MATCH_PHRASE</code> support for positive slop, e.g., <code>msg MATCH_PHRASE 'a b 2+'</code> can match instances containing words a and b with a slop of no more than two, and a preceding b; regular slop without the final <code>+</code> does not guarantee this order. <a href=https://github.com/apache/doris/pull/36356 target=_blank rel="noopener noreferrer">#36356</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=other>Other<a href=#other class=hash-link aria-label="Direct link to Other" title="Direct link to Other">​</a></h3>
<ul>
<li>
<p>Added the FE parameter <code>skip_audit_user_list</code>, where user operations specified in this configuration will not be recorded in the audit log. <a href=https://github.com/apache/doris/pull/38310 target=_blank rel="noopener noreferrer">#38310</a></p>
<ul>
<li>For more information, refer to the documentation on <a href=https://doris.apache.org/docs/admin-manual/audit-plugin/ target=_blank rel="noopener noreferrer">Audit Plugin</a>.</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=improvements>Improvements<a href=#improvements class=hash-link aria-label="Direct link to Improvements" title="Direct link to Improvements">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=storage-1>Storage<a href=#storage-1 class=hash-link aria-label="Direct link to Storage" title="Direct link to Storage">​</a></h3>
<ul>
<li>
<p>Reduced the likelihood of write failures caused by disk balancing within a single BE. <a href=https://github.com/apache/doris/pull/38000 target=_blank rel="noopener noreferrer">#38000</a></p>
</li>
<li>
<p>Decreased memory consumption by the memtable limiter. <a href=https://github.com/apache/doris/pull/37511 target=_blank rel="noopener noreferrer">#37511</a></p>
</li>
<li>
<p>Moved old partitions to the FE trash during partition replacement operations. <a href=https://github.com/apache/doris/pull/36361 target=_blank rel="noopener noreferrer">#36361</a></p>
</li>
<li>
<p>Optimized memory consumption during compaction. <a href=https://github.com/apache/doris/pull/37099 target=_blank rel="noopener noreferrer">#37099</a></p>
</li>
<li>
<p>Added a session variable to control audit logs for JDBC PreparedStatement, with default setting to not print. <a href=https://github.com/apache/doris/pull/38419 target=_blank rel="noopener noreferrer">#38419</a></p>
</li>
<li>
<p>Optimized the logic for selecting BEs for group commits. <a href=https://github.com/apache/doris/pull/35558 target=_blank rel="noopener noreferrer">#35558</a></p>
</li>
<li>
<p>Improved the performance of column updates. <a href=https://github.com/apache/doris/pull/38487 target=_blank rel="noopener noreferrer">#38487</a></p>
</li>
<li>
<p>Optimized the use of <code>delete bitmap cache</code>. <a href=https://github.com/apache/doris/pull/38761 target=_blank rel="noopener noreferrer">#38761</a></p>
</li>
<li>
<p>Added a configuration to control query affinity during hot and cold tiering. <a href=https://github.com/apache/doris/pull/37492 target=_blank rel="noopener noreferrer">#37492</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=compute-storage-decoupled-1>Compute-Storage Decoupled<a href=#compute-storage-decoupled-1 class=hash-link aria-label="Direct link to Compute-Storage Decoupled" title="Direct link to Compute-Storage Decoupled">​</a></h3>
<ul>
<li>
<p>Implemented automatic retries when encountering object storage server rate limiting. <a href=https://github.com/apache/doris/pull/37199 target=_blank rel="noopener noreferrer">#37199</a></p>
</li>
<li>
<p>Adapted the number of threads for memtable flush in the compute-storage decoupled mode. <a href=https://github.com/apache/doris/pull/38789 target=_blank rel="noopener noreferrer">#38789</a></p>
</li>
<li>
<p>Added Azure as a compile option to support compilation in environments without Azure support.</p>
</li>
<li>
<p>Optimized the observability of object storage access rate limiting. <a href=https://github.com/apache/doris/pull/38294 target=_blank rel="noopener noreferrer">#38294</a></p>
</li>
<li>
<p>Allowed the file cache TTL queue to perform LRU eviction, enhancing TTL queue usability. <a href=https://github.com/apache/doris/pull/37312 target=_blank rel="noopener noreferrer">#37312</a></p>
</li>
<li>
<p>Optimized the number of balance writeeditlog IO operations in the storage and compute separation mode. <a href=https://github.com/apache/doris/pull/37787 target=_blank rel="noopener noreferrer">#37787</a></p>
</li>
<li>
<p>Improved table creation speed in the storage and compute separation mode by sending tablet creation requests in batches. <a href=https://github.com/apache/doris/pull/36786 target=_blank rel="noopener noreferrer">#36786</a></p>
</li>
<li>
<p>Optimized read failures caused by potential inconsistencies in the local file cache through backoff retries. <a href=https://github.com/apache/doris/pull/38645 target=_blank rel="noopener noreferrer">#38645</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=lakehouse-1>Lakehouse<a href=#lakehouse-1 class=hash-link aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">​</a></h3>
<ul>
<li>
<p>Optimized memory statistics for Parquet/ORC format read and write operations. <a href=https://github.com/apache/doris/pull/37234 target=_blank rel="noopener noreferrer">#37234</a></p>
</li>
<li>
<p>Trino Connector Catalog now supports predicate pushdown. <a href=https://github.com/apache/doris/pull/37874 target=_blank rel="noopener noreferrer">#37874</a></p>
</li>
<li>
<p>Added a session variable <code>enable_count_push_down_for_external_table</code> to control whether to enable <code>count(*)</code> pushdown optimization for external tables. <a href=https://github.com/apache/doris/pull/37046 target=_blank rel="noopener noreferrer">#37046</a></p>
</li>
<li>
<p>Optimized the read logic for Hudi snapshot reads, returning an empty set when the snapshot is empty, consistent with Spark behavior. <a href=https://github.com/apache/doris/pull/37702 target=_blank rel="noopener noreferrer">#37702</a></p>
</li>
<li>
<p>Improved the read performance of partition columns for Hive tables. <a href=https://github.com/apache/doris/pull/37377 target=_blank rel="noopener noreferrer">#37377</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=asynchronous-materialized-views-1>Asynchronous Materialized Views<a href=#asynchronous-materialized-views-1 class=hash-link aria-label="Direct link to Asynchronous Materialized Views" title="Direct link to Asynchronous Materialized Views">​</a></h3>
<ul>
<li>
<p>Improved transparent rewrite plan speed by 20%. <a href=https://github.com/apache/doris/pull/37197 target=_blank rel="noopener noreferrer">#37197</a></p>
</li>
<li>
<p>Eliminated roll-up during transparent rewrite if the group key satisfies data uniqueness for better nested matching. <a href=https://github.com/apache/doris/pull/38387 target=_blank rel="noopener noreferrer">#38387</a></p>
</li>
<li>
<p>Transparent rewrite now performs better aggregation elimination to improve the matching success rate of nested materialized views. <a href=https://github.com/apache/doris/pull/36888 target=_blank rel="noopener noreferrer">#36888</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=mysql-compatibility>MySQL Compatibility<a href=#mysql-compatibility class=hash-link aria-label="Direct link to MySQL Compatibility" title="Direct link to MySQL Compatibility">​</a></h3>
<ul>
<li>
<p>Now correctly populates the database name, table name, and original name in the MySQL protocol result columns. <a href=https://github.com/apache/doris/pull/38126 target=_blank rel="noopener noreferrer">#38126</a></p>
</li>
<li>
<p>Supported the hint format <code>/*+ func(value) */</code>. <a href=https://github.com/apache/doris/pull/37720 target=_blank rel="noopener noreferrer">#37720</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=query-optimizer-1>Query Optimizer<a href=#query-optimizer-1 class=hash-link aria-label="Direct link to Query Optimizer" title="Direct link to Query Optimizer">​</a></h3>
<ul>
<li>
<p>Significantly improved the plan speed for complex queries. <a href=https://github.com/apache/doris/pull/38317 target=_blank rel="noopener noreferrer">#38317</a></p>
</li>
<li>
<p>Adaptively chose whether to perform bucket shuffle based on the number of data buckets to avoid performance degradation in extreme cases. <a href=https://github.com/apache/doris/pull/36784 target=_blank rel="noopener noreferrer">#36784</a></p>
</li>
<li>
<p>Optimized the cost estimation logic for SEMI / ANTI JOIN. <a href=https://github.com/apache/doris/pull/37951 target=_blank rel="noopener noreferrer">#37951</a> <a href=https://github.com/apache/doris/pull/37060 target=_blank rel="noopener noreferrer">#37060</a></p>
</li>
<li>
<p>Supported pushing Limit down to the first stage of aggregation to improve performance. <a href=https://github.com/apache/doris/pull/34853 target=_blank rel="noopener noreferrer">#34853</a></p>
</li>
<li>
<p>Partition pruning now supports filter conditions containing the <code>date_trunc</code> or <code>date</code> function. <a href=https://github.com/apache/doris/pull/38025 target=_blank rel="noopener noreferrer">#38025</a> <a href=https://github.com/apache/doris/pull/38743 target=_blank rel="noopener noreferrer">#38743</a></p>
</li>
<li>
<p>SQL cache now supports query scenarios that include user variables. <a href=https://github.com/apache/doris/pull/37915 target=_blank rel="noopener noreferrer">#37915</a></p>
</li>
<li>
<p>Optimized error messages for invalid aggregation semantics. <a href=https://github.com/apache/doris/pull/38122 target=_blank rel="noopener noreferrer">#38122</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=query-execution-2>Query Execution<a href=#query-execution-2 class=hash-link aria-label="Direct link to Query Execution" title="Direct link to Query Execution">​</a></h3>
<ul>
<li>
<p>Adapted AggState compatibility from 2.1 to 3.x and fixed Coredump issues. <a href=https://github.com/apache/doris/pull/37104 target=_blank rel="noopener noreferrer">#37104</a></p>
</li>
<li>
<p>Refactored the strategy selection for local shuffle without Join. <a href=https://github.com/apache/doris/pull/37282 target=_blank rel="noopener noreferrer">#37282</a></p>
</li>
<li>
<p>Modified the scanner for internal table queries to be asynchronous to prevent stalling during such queries. <a href=https://github.com/apache/doris/pull/38403 target=_blank rel="noopener noreferrer">#38403</a></p>
</li>
<li>
<p>Optimized the block merge process during Hash table construction for Join operators. <a href=https://github.com/apache/doris/pull/37471 target=_blank rel="noopener noreferrer">#37471</a></p>
</li>
<li>
<p>Optimized the duration of lock holding for MultiCast. <a href=https://github.com/apache/doris/pull/37462 target=_blank rel="noopener noreferrer">#37462</a></p>
</li>
<li>
<p>Optimized gRPC keepAliveTime and added link monitoring to reduce the probability of query failure due to RPC errors. <a href=https://github.com/apache/doris/pull/37304 target=_blank rel="noopener noreferrer">#37304</a></p>
</li>
<li>
<p>Cleaned up all dirty pages in jemalloc when memory limits were exceeded. <a href=https://github.com/apache/doris/pull/37164 target=_blank rel="noopener noreferrer">#37164</a></p>
</li>
<li>
<p>Optimized the processing performance of <code>aes_encrypt</code>/<code>decrypt</code> functions for constant types. <a href=https://github.com/apache/doris/pull/37194 target=_blank rel="noopener noreferrer">#37194</a></p>
</li>
<li>
<p>Optimized the processing performance of the <code>json_extract</code> function for constant data. <a href=https://github.com/apache/doris/pull/36927 target=_blank rel="noopener noreferrer">#36927</a></p>
</li>
<li>
<p>Optimized the processing performance of the <code>ParseUrl</code> function for constant data. <a href=https://github.com/apache/doris/pull/36882 target=_blank rel="noopener noreferrer">#36882</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=semi-structured-data-management-1>Semi-Structured Data Management<a href=#semi-structured-data-management-1 class=hash-link aria-label="Direct link to Semi-Structured Data Management" title="Direct link to Semi-Structured Data Management">​</a></h3>
<ul>
<li>
<p>Bitmap indexes now default to using inverted indexes, with <code>enable_create_bitmap_index_as_inverted_index</code> set to true by default. <a href=https://github.com/apache/doris/pull/36692 target=_blank rel="noopener noreferrer">#36692</a></p>
</li>
<li>
<p>In the compute-storage decoupled mode, DESC can now view sub-columns of VARIANT type. <a href=https://github.com/apache/doris/pull/38143 target=_blank rel="noopener noreferrer">#38143</a></p>
</li>
<li>
<p>Removed the step of checking file existence during inverted index queries to reduce access latency to remote storage. <a href=https://github.com/apache/doris/pull/36945 target=_blank rel="noopener noreferrer">#36945</a></p>
</li>
<li>
<p>Complex types ARRAY / MAP / STRUCT now support <code>replace_if_not_null</code> for AGG tables. <a href=https://github.com/apache/doris/pull/38304 target=_blank rel="noopener noreferrer">#38304</a></p>
</li>
<li>
<p>Escape characters for JSON data are now supported. <a href=https://github.com/apache/doris/pull/37176 target=_blank rel="noopener noreferrer">#37176</a> <a href=https://github.com/apache/doris/pull/37251 target=_blank rel="noopener noreferrer">#37251</a></p>
</li>
<li>
<p>Inverted index queries now behave consistently on MOW tables and DUP tables. <a href=https://github.com/apache/doris/pull/37428 target=_blank rel="noopener noreferrer">#37428</a></p>
</li>
<li>
<p>Optimized the performance of inverted index acceleration for IN queries. <a href=https://github.com/apache/doris/pull/37395 target=_blank rel="noopener noreferrer">#37395</a></p>
</li>
<li>
<p>Reduced unnecessary memory allocation during TOPN queries to improve performance. <a href=https://github.com/apache/doris/pull/37429 target=_blank rel="noopener noreferrer">#37429</a></p>
</li>
<li>
<p>When creating an inverted index with tokenization, the <code>support_phrase</code> option is now automatically enabled to accelerate <code>match_phrase</code> series phrase queries. <a href=https://github.com/apache/doris/pull/37949 target=_blank rel="noopener noreferrer">#37949</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=other-1>Other<a href=#other-1 class=hash-link aria-label="Direct link to Other" title="Direct link to Other">​</a></h3>
<ul>
<li>
<p>Audit log now can record SQL types. <a href=https://github.com/apache/doris/pull/37790 target=_blank rel="noopener noreferrer">#37790</a></p>
</li>
<li>
<p>Added support for <code>information_schema.processlist</code> to show all FE. <a href=https://github.com/apache/doris/pull/38701 target=_blank rel="noopener noreferrer">#38701</a></p>
</li>
<li>
<p>Cached ranger's <code>atamask</code> and <code>rowpolicy</code> to accelerate query efficiency. <a href=https://github.com/apache/doris/pull/37723 target=_blank rel="noopener noreferrer">#37723</a></p>
</li>
<li>
<p>Optimized metadata management in job manager to release locks immediately after modifying metadata, reducing lock holding time. <a href=https://github.com/apache/doris/pull/38162 target=_blank rel="noopener noreferrer">#38162</a></p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=bug-fixes>Bug Fixes<a href=#bug-fixes class=hash-link aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=upgrade>Upgrade<a href=#upgrade class=hash-link aria-label="Direct link to Upgrade" title="Direct link to Upgrade">​</a></h3>
<ul>
<li>
<p>Fix the issue where <code>mtmv load</code> fails during upgrade from version 2.1. <a href=https://github.com/apache/doris/pull/38799 target=_blank rel="noopener noreferrer">#38799</a></p>
</li>
<li>
<p>Resolve the issue where <code>null_type</code> cannot be found during the upgrade to version 2.1. <a href=https://github.com/apache/doris/pull/39373 target=_blank rel="noopener noreferrer">#39373</a></p>
</li>
<li>
<p>Address the compatibility issue with permission persistence during the upgrade from version 2.1 to 3.0. <a href=https://github.com/apache/doris/pull/39288 target=_blank rel="noopener noreferrer">#39288</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=load>Load<a href=#load class=hash-link aria-label="Direct link to Load" title="Direct link to Load">​</a></h3>
<ul>
<li>
<p>Fix the issue where parsing fails when the newline character is surrounded by delimiters in CSV format parsing. <a href=https://github.com/apache/doris/pull/38347 target=_blank rel="noopener noreferrer">#38347</a></p>
</li>
<li>
<p>Resolve potential exception issues when FE forwards group commit. <a href=https://github.com/apache/doris/pull/38228 target=_blank rel="noopener noreferrer">#38228</a> <a href=https://github.com/apache/doris/pull/38265 target=_blank rel="noopener noreferrer">#38265</a></p>
</li>
<li>
<p>Group commit now supports the new optimizer. <a href=https://github.com/apache/doris/pull/37002 target=_blank rel="noopener noreferrer">#37002</a></p>
</li>
<li>
<p>Fix the issue where group commit reports data errors when JDBC setNull is used. <a href=https://github.com/apache/doris/pull/38262 target=_blank rel="noopener noreferrer">#38262</a></p>
</li>
<li>
<p>Optimize the retry logic for group commit when encountering <code>delete bitmap lock</code> errors. <a href=https://github.com/apache/doris/pull/37600 target=_blank rel="noopener noreferrer">#37600</a></p>
</li>
<li>
<p>Resolve the issue where routine load cannot use CSV delimiters and escape characters. <a href=https://github.com/apache/doris/pull/38402 target=_blank rel="noopener noreferrer">#38402</a></p>
</li>
<li>
<p>Fix the issue where routine load job names with mixed case cannot be displayed. <a href=https://github.com/apache/doris/pull/38523 target=_blank rel="noopener noreferrer">#38523</a></p>
</li>
<li>
<p>Optimize the logic for actively recovering routine load during FE master-slave switching. <a href=https://github.com/apache/doris/pull/37876 target=_blank rel="noopener noreferrer">#37876</a></p>
</li>
<li>
<p>Resolve the issue where routine load pauses when all data in Kafka is expired. <a href=https://github.com/apache/doris/pull/37288 target=_blank rel="noopener noreferrer">#37288</a></p>
</li>
<li>
<p>Fix the issue where <code>show routine load</code> returns empty results. <a href=https://github.com/apache/doris/pull/38199 target=_blank rel="noopener noreferrer">#38199</a></p>
</li>
<li>
<p>Resolve the memory leak issue during multi-table stream import in routine load. <a href=https://github.com/apache/doris/pull/38255 target=_blank rel="noopener noreferrer">#38255</a></p>
</li>
<li>
<p>Fix the issue where stream load does not return the error URL. <a href=https://github.com/apache/doris/pull/38325 target=_blank rel="noopener noreferrer">#38325</a></p>
</li>
<li>
<p>Resolve potential load channel leak issues. <a href=https://github.com/apache/doris/pull/38031 target=_blank rel="noopener noreferrer">#38031</a> <a href=https://github.com/apache/doris/pull/37500 target=_blank rel="noopener noreferrer">#37500</a></p>
</li>
<li>
<p>Fix the issue where no error may be reported when importing fewer segments than expected. <a href=https://github.com/apache/doris/pull/36753 target=_blank rel="noopener noreferrer">#36753</a></p>
</li>
<li>
<p>Resolve the load stream leak issue. <a href=https://github.com/apache/doris/pull/38912 target=_blank rel="noopener noreferrer">#38912</a></p>
</li>
<li>
<p>Optimize the impact of offline nodes on import operations. <a href=https://github.com/apache/doris/pull/38198 target=_blank rel="noopener noreferrer">#38198</a></p>
</li>
<li>
<p>Fix the issue where transactions do not end when inserting into empty data. <a href=https://github.com/apache/doris/pull/38991 target=_blank rel="noopener noreferrer">#38991</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=storage-2>Storage<a href=#storage-2 class=hash-link aria-label="Direct link to Storage" title="Direct link to Storage">​</a></h3>
<p><strong>01 Backup and Restoration</strong></p>
<ul>
<li>
<p>Fix the issue where tables cannot be written after backup and restoration. <a href=https://github.com/apache/doris/pull/37089 target=_blank rel="noopener noreferrer">#37089</a></p>
</li>
<li>
<p>Resolve the issue where view database names are incorrect after backup and restoration. <a href=https://github.com/apache/doris/pull/37412 target=_blank rel="noopener noreferrer">#37412</a></p>
</li>
</ul>
<p><strong>02 Compaction</strong></p>
<ul>
<li>
<p>Fix the issue where cumu compaction handles delete errors incorrectly during ordered data compression. <a href=https://github.com/apache/doris/pull/38742 target=_blank rel="noopener noreferrer">#38742</a></p>
</li>
<li>
<p>Resolve the issue of duplicate keys in aggregate tables caused by sequential compression optimization. <a href=https://github.com/apache/doris/pull/38224 target=_blank rel="noopener noreferrer">#38224</a></p>
</li>
<li>
<p>Fix the issue where compression operations cause coredump in large wide tables. <a href=https://github.com/apache/doris/pull/37960 target=_blank rel="noopener noreferrer">#37960</a></p>
</li>
<li>
<p>Resolve the compression starvation issue caused by inaccurate concurrent statistics of compression tasks. <a href=https://github.com/apache/doris/pull/37318 target=_blank rel="noopener noreferrer">#37318</a></p>
</li>
</ul>
<p><strong>03 MOW Unique Key</strong></p>
<ul>
<li>
<p>Resolve the issue of inconsistent data between replicas caused by cumulative compression deletion of delete sign. <a href=https://github.com/apache/doris/pull/37950 target=_blank rel="noopener noreferrer">#37950</a></p>
</li>
<li>
<p>MOW delete now uses partial column updates with the new optimizer. <a href=https://github.com/apache/doris/pull/38751 target=_blank rel="noopener noreferrer">#38751</a></p>
</li>
<li>
<p>Fix the potential duplicate key issue in MOW tables under compute-storage decoupled. <a href=https://github.com/apache/doris/pull/39018 target=_blank rel="noopener noreferrer">#39018</a></p>
</li>
<li>
<p>Resolve the issue where MOW unique and duplicate tables cannot modify column order. <a href=https://github.com/apache/doris/pull/37067 target=_blank rel="noopener noreferrer">#37067</a></p>
</li>
<li>
<p>Fix the potential data correctness issue caused by segcompaction. <a href=https://github.com/apache/doris/pull/37760 target=_blank rel="noopener noreferrer">#37760</a></p>
</li>
<li>
<p>Resolve the potential memory leak issue during column updates. <a href=https://github.com/apache/doris/pull/37706 target=_blank rel="noopener noreferrer">#37706</a></p>
</li>
</ul>
<p><strong>04 Other</strong></p>
<ul>
<li>
<p>Fix the small probability of exceptions in TOPN queries. <a href=https://github.com/apache/doris/pull/39119 target=_blank rel="noopener noreferrer">#39119</a> <a href=https://github.com/apache/doris/pull/39199 target=_blank rel="noopener noreferrer">#39199</a></p>
</li>
<li>
<p>Resolve the issue where auto-increment IDs may duplicate during FE restart. <a href=https://github.com/apache/doris/pull/37306 target=_blank rel="noopener noreferrer">#37306</a></p>
</li>
<li>
<p>Fix the potential queuing issue in the delete operation priority queue. <a href=https://github.com/apache/doris/pull/37169 target=_blank rel="noopener noreferrer">#37169</a></p>
</li>
<li>
<p>Optimize the delete retry logic. <a href=https://github.com/apache/doris/pull/37363 target=_blank rel="noopener noreferrer">#37363</a></p>
</li>
<li>
<p>Resolve the issue with <code>bucket = 0</code> in table creation statements under the new optimizer. <a href=https://github.com/apache/doris/pull/38971 target=_blank rel="noopener noreferrer">#38971</a></p>
</li>
<li>
<p>Fix the issue where FE reports success incorrectly when image generation fails. <a href=https://github.com/apache/doris/pull/37508 target=_blank rel="noopener noreferrer">#37508</a></p>
</li>
<li>
<p>Resolve the issue where using the wrong nodename during FE offline nodes may cause inconsistent FE members. <a href=https://github.com/apache/doris/pull/37987 target=_blank rel="noopener noreferrer">#37987</a></p>
</li>
<li>
<p>Fix the issue where CCR partition addition may fail. <a href=https://github.com/apache/doris/pull/37295 target=_blank rel="noopener noreferrer">#37295</a></p>
</li>
<li>
<p>Resolve the <code>int32</code> overflow issue in inverted index files. <a href=https://github.com/apache/doris/pull/38891 target=_blank rel="noopener noreferrer">#38891</a></p>
</li>
<li>
<p>Fix the issue where TRUNCATE TABLE failure may cause BE to fail to go offline. <a href=https://github.com/apache/doris/pull/37334 target=_blank rel="noopener noreferrer">#37334</a></p>
</li>
<li>
<p>Resolve the issue where publish cannot continue due to null pointers. <a href=https://github.com/apache/doris/pull/37724 target=_blank rel="noopener noreferrer">#37724</a> <a href=https://github.com/apache/doris/pull/37531 target=_blank rel="noopener noreferrer">#37531</a></p>
</li>
<li>
<p>Fix the potential coredump issue when manually triggering disk migration. <a href=https://github.com/apache/doris/pull/37712 target=_blank rel="noopener noreferrer">#37712</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=compute-storage-decoupled-2>Compute-Storage Decoupled<a href=#compute-storage-decoupled-2 class=hash-link aria-label="Direct link to Compute-Storage Decoupled" title="Direct link to Compute-Storage Decoupled">​</a></h3>
<ul>
<li>
<p>Fixed the issue where <code>show create table</code> might display the <code>file_cache_ttl_seconds</code> attribute twice. <a href=https://github.com/apache/doris/pull/38052 target=_blank rel="noopener noreferrer">#38052</a></p>
</li>
<li>
<p>Fixed the issue where segment Footer TTL was not set correctly after setting file cache TTL. <a href=https://github.com/apache/doris/pull/37485 target=_blank rel="noopener noreferrer">#37485</a></p>
</li>
<li>
<p>Fixed the issue where file cache might cause coredump due to massive conversion of cache types. <a href=https://github.com/apache/doris/pull/38518 target=_blank rel="noopener noreferrer">#38518</a></p>
</li>
<li>
<p>Fixed the potential file descriptor (fd) leak in file cache. <a href=https://github.com/apache/doris/pull/38051 target=_blank rel="noopener noreferrer">#38051</a></p>
</li>
<li>
<p>Fixed the issue where schema change Job overwriting compaction Job prevented base tablet compaction from completing normally. <a href=https://github.com/apache/doris/pull/38210 target=_blank rel="noopener noreferrer">#38210</a></p>
</li>
<li>
<p>Fixed the potential inaccuracy of base compaction score due to data race. <a href=https://github.com/apache/doris/pull/38006 target=_blank rel="noopener noreferrer">#38006</a></p>
</li>
<li>
<p>Fixed the issue where error messages from imports might not be uploaded correctly to object storage. <a href=https://github.com/apache/doris/pull/38359 target=_blank rel="noopener noreferrer">#38359</a></p>
</li>
<li>
<p>Fixed the inconsistency in return information between compute-storage decoupled mode and storage and compute integration mode for 2PC imports. <a href=https://github.com/apache/doris/pull/38076 target=_blank rel="noopener noreferrer">#38076</a></p>
</li>
<li>
<p>Fix the issue where incorrect file size setting during file cache warm-up leads to coredump. <a href=https://github.com/apache/doris/pull/38939 target=_blank rel="noopener noreferrer">#38939</a></p>
</li>
<li>
<p>Fixed the issue where partial column updates did not correctly dequeue delete operations. <a href=https://github.com/apache/doris/pull/37151 target=_blank rel="noopener noreferrer">#37151</a></p>
</li>
<li>
<p>Fixed compatibility issues with permission persistence in compute-storage decoupled mode. <a href=https://github.com/apache/doris/pull/38136 target=_blank rel="noopener noreferrer">#38136</a> <a href=https://github.com/apache/doris/pull/37708 target=_blank rel="noopener noreferrer">#37708</a></p>
</li>
<li>
<p>Fixed the issue where observer did not retry correctly when encountering a <code>-230</code> error. <a href=https://github.com/apache/doris/pull/37625 target=_blank rel="noopener noreferrer">#37625</a></p>
</li>
<li>
<p>Fixed the issue where <code>show load</code> with conditions did not perform correct analysis. <a href=https://github.com/apache/doris/pull/37656 target=_blank rel="noopener noreferrer">#37656</a></p>
</li>
<li>
<p>Fixed the issue where <code>show streamload</code> in compute-storage decoupled mode caused BE coredump. <a href=https://github.com/apache/doris/pull/37903 target=_blank rel="noopener noreferrer">#37903</a></p>
</li>
<li>
<p>Fixed the issue where <code>copy into</code> did not correctly verify column names in strict mode. <a href=https://github.com/apache/doris/pull/37650 target=_blank rel="noopener noreferrer">#37650</a></p>
</li>
<li>
<p>Fixed the issue where multi-stream imports into a single table lacked permissions. <a href=https://github.com/apache/doris/pull/38878 target=_blank rel="noopener noreferrer">#38878</a></p>
</li>
<li>
<p>Fixed the potential overflow issue in <code>getVersionUpdateTimeMs</code>. <a href=https://github.com/apache/doris/pull/38074 target=_blank rel="noopener noreferrer">#38074</a></p>
</li>
<li>
<p>Fixed the issue where FE azure blob list was not implemented correctly. <a href=https://github.com/apache/doris/pull/37986 target=_blank rel="noopener noreferrer">#37986</a></p>
</li>
<li>
<p>Fixed the issue where inaccurate azure blob recycling time calculation prevented recycling. <a href=https://github.com/apache/doris/pull/37535 target=_blank rel="noopener noreferrer">#37535</a></p>
</li>
<li>
<p>Fixed the issue where inverted index files were not deleted in compute-storage decoupled mode. <a href=https://github.com/apache/doris/pull/38306 target=_blank rel="noopener noreferrer">#38306</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=lakehouse-2>Lakehouse<a href=#lakehouse-2 class=hash-link aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">​</a></h3>
<ul>
<li>
<p>Fixed the issue with reading binary data from Oracle Catalog. <a href=https://github.com/apache/doris/pull/37078 target=_blank rel="noopener noreferrer">#37078</a></p>
</li>
<li>
<p>Fixed the potential deadlock issue when acquiring external table metadata in multi-FE scenarios. <a href=https://github.com/apache/doris/pull/37756 target=_blank rel="noopener noreferrer">#37756</a></p>
</li>
<li>
<p>Fixed the issue where JNI scanner failure caused BE nodes to crash. <a href=https://github.com/apache/doris/pull/37697 target=_blank rel="noopener noreferrer">#37697</a></p>
</li>
<li>
<p>Fixed the issue with slow reading of date types from Trino Connector Catalog. <a href=https://github.com/apache/doris/pull/37266 target=_blank rel="noopener noreferrer">#37266</a></p>
</li>
<li>
<p>Optimized kerberos authentication logic for Hive Catalog. <a href=https://github.com/apache/doris/pull/37301 target=_blank rel="noopener noreferrer">#37301</a></p>
</li>
<li>
<p>Fixed the issue where region attributes might be parsed incorrectly when parsing MinIO properties. <a href=https://github.com/apache/doris/pull/37249 target=_blank rel="noopener noreferrer">#37249</a></p>
</li>
<li>
<p>Fixed the issue where creating too many FileSystems by FE caused memory leaks. <a href=https://github.com/apache/doris/pull/36954 target=_blank rel="noopener noreferrer">#36954</a></p>
</li>
<li>
<p>Fixed the issue with reading incorrect time zone information from Paimon. <a href=https://github.com/apache/doris/pull/37716 target=_blank rel="noopener noreferrer">#37716</a></p>
</li>
<li>
<p>Fixed the potential thread leak issue caused by Hive write-back operations. <a href=https://github.com/apache/doris/pull/36990 target=_blank rel="noopener noreferrer">#36990</a></p>
</li>
<li>
<p>Fixed the null pointer issue caused by enabling Hive metastore event synchronization. <a href=https://github.com/apache/doris/pull/38421 target=_blank rel="noopener noreferrer">#38421</a></p>
</li>
<li>
<p>Fixed the issue where error messages were unclear or caused stalling when creating catalogs. <a href=https://github.com/apache/doris/pull/37551 target=_blank rel="noopener noreferrer">#37551</a></p>
</li>
<li>
<p>Fixed the issue where reading Hive text format tables behaved differently from Hive. <a href=https://github.com/apache/doris/pull/37638 target=_blank rel="noopener noreferrer">#37638</a></p>
</li>
<li>
<p>Fixed the logic error when switching between catalogs and databases. <a href=https://github.com/apache/doris/pull/37828 target=_blank rel="noopener noreferrer">#37828</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=mysql-compatibility-1>MySQL Compatibility<a href=#mysql-compatibility-1 class=hash-link aria-label="Direct link to MySQL Compatibility" title="Direct link to MySQL Compatibility">​</a></h3>
<ul>
<li>Fixed the issue where certain flags in the MySQL protocol were set incorrectly when SSL was enabled. <a href=https://github.com/apache/doris/pull/38086 target=_blank rel="noopener noreferrer">#38086</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=asynchronous-materialized-views-2>Asynchronous Materialized Views<a href=#asynchronous-materialized-views-2 class=hash-link aria-label="Direct link to Asynchronous Materialized Views" title="Direct link to Asynchronous Materialized Views">​</a></h3>
<ul>
<li>
<p>Fixed the issue where construction might fail when the base table had a very large number of partitions. <a href=https://github.com/apache/doris/pull/37589 target=_blank rel="noopener noreferrer">#37589</a></p>
</li>
<li>
<p>Fixed the issue where nested materialized views incorrectly performed full table refreshes even when partition refreshes were possible. <a href=https://github.com/apache/doris/pull/38698 target=_blank rel="noopener noreferrer">#38698</a></p>
</li>
<li>
<p>Fixed the issue where partition refresh could not handle the simultaneous existence of valid and invalid dependencies when analyzing partition dependencies. <a href=https://github.com/apache/doris/pull/38367 target=_blank rel="noopener noreferrer">#38367</a></p>
</li>
<li>
<p>Fixed the issue where the final result containing NULL type might cause asynchronous materialized views to fail. <a href=https://github.com/apache/doris/pull/37019 target=_blank rel="noopener noreferrer">#37019</a></p>
</li>
<li>
<p>Fixed the planning error that might occur during transparent rewriting when both synchronous and asynchronous materialized views with the same name were present. <a href=https://github.com/apache/doris/pull/37311 target=_blank rel="noopener noreferrer">#37311</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=synchronous-materialized-views>Synchronous Materialized Views<a href=#synchronous-materialized-views class=hash-link aria-label="Direct link to Synchronous Materialized Views" title="Direct link to Synchronous Materialized Views">​</a></h3>
<ul>
<li>
<p>The rewritten synchronous materialized views now can correctly perform partition pruning. <a href=https://github.com/apache/doris/pull/38527 target=_blank rel="noopener noreferrer">#38527</a></p>
</li>
<li>
<p>When rewriting synchronous materialized views, those with unready data are no longer selected. <a href=https://github.com/apache/doris/pull/38148 target=_blank rel="noopener noreferrer">#38148</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=query-optimizer-2>Query Optimizer<a href=#query-optimizer-2 class=hash-link aria-label="Direct link to Query Optimizer" title="Direct link to Query Optimizer">​</a></h3>
<ul>
<li>
<p>Fixed the deadlock issue that might occur when queries and delete operations are performed simultaneously. <a href=https://github.com/apache/doris/pull/38660 target=_blank rel="noopener noreferrer">#38660</a></p>
</li>
<li>
<p>Fixed the issue where bucket pruning might incorrectly prune on decimal column buckets. <a href=https://github.com/apache/doris/pull/37889 target=_blank rel="noopener noreferrer">#37889</a></p>
</li>
<li>
<p>Fixed the issue where planning might be incorrect when mark join participates in join reorder. <a href=https://github.com/apache/doris/pull/39152 target=_blank rel="noopener noreferrer">#39152</a></p>
</li>
<li>
<p>Fixed the issue where the result is incorrect when the correlation condition of a correlated subquery is not a simple column. <a href=https://github.com/apache/doris/pull/37644 target=_blank rel="noopener noreferrer">#37644</a></p>
</li>
<li>
<p>Fixed the issue where partition pruning cannot correctly handle or expressions. <a href=https://github.com/apache/doris/pull/38897 target=_blank rel="noopener noreferrer">#38897</a></p>
</li>
<li>
<p>Fixed the planning error that might occur when optimizing the execution order of JOIN and AGG. <a href=https://github.com/apache/doris/pull/37343 target=_blank rel="noopener noreferrer">#37343</a></p>
</li>
<li>
<p>Fixed the issue where <code>str_to_date</code> performs incorrect constant folding calculations on datev1 types. <a href=https://github.com/apache/doris/pull/37360 target=_blank rel="noopener noreferrer">#37360</a></p>
</li>
<li>
<p>Fixed the issue where the ACOS function's constant folding returns non-NaN values. <a href=https://github.com/apache/doris/pull/37932 target=_blank rel="noopener noreferrer">#37932</a></p>
</li>
<li>
<p>Fixed the occasional planning error: "The children format needs to be [WhenClause+, DefaultValue?]". <a href=https://github.com/apache/doris/pull/38491 target=_blank rel="noopener noreferrer">#38491</a></p>
</li>
<li>
<p>Fixed the issue where planning might be incorrect when the projection includes window functions and there is both the original column and its alias. <a href=https://github.com/apache/doris/pull/38166 target=_blank rel="noopener noreferrer">#38166</a></p>
</li>
<li>
<p>Fixed the issue where planning might report an error when the aggregation parameter contains a lambda expression. <a href=https://github.com/apache/doris/pull/37109 target=_blank rel="noopener noreferrer">#37109</a></p>
</li>
<li>
<p>Fixed the insert error that might occur in extreme cases: "MultiCastDataSink cannot be cast to DataStreamSink". <a href=https://github.com/apache/doris/pull/38526 target=_blank rel="noopener noreferrer">#38526</a></p>
</li>
<li>
<p>Fixed the issue where the new optimizer does not correctly handle <code>char(0)/varchar(0)</code> when creating a table. <a href=https://github.com/apache/doris/pull/38427 target=_blank rel="noopener noreferrer">#38427</a></p>
</li>
<li>
<p>Fixed the incorrect behavior of <code>char(255) toSql</code>. <a href=https://github.com/apache/doris/pull/37340 target=_blank rel="noopener noreferrer">#37340</a></p>
</li>
<li>
<p>Fixed the issue where the nullable attribute within the <code>agg_state</code> type might lead to planning errors. <a href=https://github.com/apache/doris/pull/37489 target=_blank rel="noopener noreferrer">#37489</a></p>
</li>
<li>
<p>Fixed the issue where row count statistics are inaccurate during mark Join. <a href=https://github.com/apache/doris/pull/38270 target=_blank rel="noopener noreferrer">#38270</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=query-execution-3>Query Execution<a href=#query-execution-3 class=hash-link aria-label="Direct link to Query Execution" title="Direct link to Query Execution">​</a></h3>
<ul>
<li>
<p>Fixed issues where the Pipeline execution engine was stuck, causing queries to not end, in multiple scenarios. <a href=https://github.com/apache/doris/pull/38657 target=_blank rel="noopener noreferrer">#38657</a>, <a href=https://github.com/apache/doris/pull/38206 target=_blank rel="noopener noreferrer">#38206</a>, <a href=https://github.com/apache/doris/pull/38885 target=_blank rel="noopener noreferrer">#38885</a>, <a href=https://github.com/apache/doris/pull/38151 target=_blank rel="noopener noreferrer">#38151</a>, <a href=https://github.com/apache/doris/pull/37297 target=_blank rel="noopener noreferrer">#37297</a></p>
</li>
<li>
<p>Fixed the coredump issue caused by NULL and non-NULL columns during set difference calculations. <a href=https://github.com/apache/doris/pull/38750 target=_blank rel="noopener noreferrer">#38750</a></p>
</li>
<li>
<p>Fixed the error when using the DECIMAL type with pure decimals in delete statements. <a href=https://github.com/apache/doris/pull/37801 target=_blank rel="noopener noreferrer">#37801</a></p>
</li>
<li>
<p>Fixed the issue where the <code>width_bucket</code> function returned incorrect results. <a href=https://github.com/apache/doris/pull/37892 target=_blank rel="noopener noreferrer">#37892</a></p>
</li>
<li>
<p>Fixed the query error when a single row of data was very large and the result set was also large (exceeding 2GB). <a href=https://github.com/apache/doris/pull/37990 target=_blank rel="noopener noreferrer">#37990</a></p>
</li>
<li>
<p>Fixed the coredump issue caused by incorrect release of rpc connections during single-replica imports. <a href=https://github.com/apache/doris/pull/38087 target=_blank rel="noopener noreferrer">#38087</a></p>
</li>
<li>
<p>Fixed the coredump issue caused by processing NULL values with the <code>foreach</code> function. <a href=https://github.com/apache/doris/pull/37349 target=_blank rel="noopener noreferrer">#37349</a></p>
</li>
<li>
<p>Fixed the issue where stddev returned incorrect results for DECIMALV2 types. <a href=https://github.com/apache/doris/pull/38731 target=_blank rel="noopener noreferrer">#38731</a></p>
</li>
<li>
<p>Fixed the slow performance of <code>bitmap union</code> calculations. <a href=https://github.com/apache/doris/pull/37816 target=_blank rel="noopener noreferrer">#37816</a></p>
</li>
<li>
<p>Fixed the issue where RowsProduced for aggregation operators was not set in the profile. <a href=https://github.com/apache/doris/pull/38271 target=_blank rel="noopener noreferrer">#38271</a></p>
</li>
<li>
<p>Fixed the overflow issue when calculating the number of buckets for the hash table under hash join. <a href=https://github.com/apache/doris/pull/37193 target=_blank rel="noopener noreferrer">#37193</a>, <a href=https://github.com/apache/doris/pull/37493 target=_blank rel="noopener noreferrer">#37493</a></p>
</li>
<li>
<p>Fixed the inaccurate recording of the <code>jemalloc cache memory tracker</code>. <a href=https://github.com/apache/doris/pull/37464 target=_blank rel="noopener noreferrer">#37464</a></p>
</li>
<li>
<p>Added the <code>enable_stacktrace</code> configuration option, allowing users to control whether exception stacks are output in BE logs. <a href=https://github.com/apache/doris/pull/37713 target=_blank rel="noopener noreferrer">#37713</a></p>
</li>
<li>
<p>Fixed the issue where Arrow Flight SQL did not work correctly when <code>enable_parallel_result_sink</code> was set to false. <a href=https://github.com/apache/doris/pull/37779 target=_blank rel="noopener noreferrer">#37779</a></p>
</li>
<li>
<p>Fixed the incorrect use of colocate Join. <a href=https://github.com/apache/doris/pull/37361 target=_blank rel="noopener noreferrer">#37361</a>, <a href=https://github.com/apache/doris/pull/37729 target=_blank rel="noopener noreferrer">#37729</a></p>
</li>
<li>
<p>Fixed the calculation overflow issue of the <code>round</code> function on DECIMAL128 types. <a href=https://github.com/apache/doris/pull/37733 target=_blank rel="noopener noreferrer">#37733</a>, <a href=https://github.com/apache/doris/pull/38106 target=_blank rel="noopener noreferrer">#38106</a></p>
</li>
<li>
<p>Fixed the coredump issue when passing a const string to the <code>sleep</code> function. <a href=https://github.com/apache/doris/pull/37681 target=_blank rel="noopener noreferrer">#37681</a></p>
</li>
<li>
<p>Increased the queue length for audit logs, solving the issue where audit logs could not be recorded normally under high concurrency scenarios with thousands of concurrent connections. <a href=https://github.com/apache/doris/pull/37786 target=_blank rel="noopener noreferrer">#37786</a></p>
</li>
<li>
<p>Fixed the issue where creating a workload group caused too many threads, leading to BE coredump. <a href=https://github.com/apache/doris/pull/38096 target=_blank rel="noopener noreferrer">#38096</a></p>
</li>
<li>
<p>Fixed the coredump issue caused by the <code>MULTI_MATCH_ANY</code> function. <a href=https://github.com/apache/doris/pull/37959 target=_blank rel="noopener noreferrer">#37959</a></p>
</li>
<li>
<p>Fixed the transaction rollback issue caused by <code>insert overwrite auto partition</code>. <a href=https://github.com/apache/doris/pull/38103 target=_blank rel="noopener noreferrer">#38103</a></p>
</li>
<li>
<p>Fixed the issue where the TimeUtils formatter did not use the correct time zone. <a href=https://github.com/apache/doris/pull/37465 target=_blank rel="noopener noreferrer">#37465</a></p>
</li>
<li>
<p>Fixed the issue where results were incorrect under constant folding scenarios for week/yearweek. <a href=https://github.com/apache/doris/pull/37376 target=_blank rel="noopener noreferrer">#37376</a></p>
</li>
<li>
<p>Fixed the issue where the <code>convert_tz</code> function returned incorrect results. <a href=https://github.com/apache/doris/pull/37358 target=_blank rel="noopener noreferrer">#37358</a>, <a href=https://github.com/apache/doris/pull/38764 target=_blank rel="noopener noreferrer">#38764</a></p>
</li>
<li>
<p>Fixed the coredump issue when using the <code>collect_set</code> function with window functions. <a href=https://github.com/apache/doris/pull/38234 target=_blank rel="noopener noreferrer">#38234</a></p>
</li>
<li>
<p>Fixed the coredump issue caused by <code>percentile_approx</code> during rolling upgrades. <a href=https://github.com/apache/doris/pull/39321 target=_blank rel="noopener noreferrer">#39321</a></p>
</li>
<li>
<p>Fixed the coredump issue caused by the <code>mod</code> function when encountering abnormal input. <a href=https://github.com/apache/doris/pull/37999 target=_blank rel="noopener noreferrer">#37999</a></p>
</li>
<li>
<p>Fixed the issue where the hash table was not fully built when the broadcast join probe started running. <a href=https://github.com/apache/doris/pull/37643 target=_blank rel="noopener noreferrer">#37643</a></p>
</li>
<li>
<p>Fixed the issue where executing the same expression in multithreaded environments might lead to incorrect results for Java UDFs. <a href=https://github.com/apache/doris/pull/38612 target=_blank rel="noopener noreferrer">#38612</a></p>
</li>
<li>
<p>Fixed the overflow issue caused by incorrect return types of the <code>conv</code> function. <a href=https://github.com/apache/doris/pull/38001 target=_blank rel="noopener noreferrer">#38001</a></p>
</li>
<li>
<p>Fixed the issue where the <code>json_replace</code> function returned incorrect types. <a href=https://github.com/apache/doris/pull/37014 target=_blank rel="noopener noreferrer">#3701</a></p>
</li>
<li>
<p>Fixed the issue where the nullable attribute setting was unreasonable for the <code>percentile</code> aggregation function. <a href=https://github.com/apache/doris/pull/37330 target=_blank rel="noopener noreferrer">#37330</a></p>
</li>
<li>
<p>Fixed the issue where the results of the <code>histogram</code> function were unstable. <a href=https://github.com/apache/doris/pull/38608 target=_blank rel="noopener noreferrer">#38608</a></p>
</li>
<li>
<p>Fixed the issue where task state was displayed incorrectly in the profile. <a href=https://github.com/apache/doris/pull/38082 target=_blank rel="noopener noreferrer">#38082</a></p>
</li>
<li>
<p>Fixed the issue where some queries were incorrectly canceled when the system just started. <a href=https://github.com/apache/doris/pull/37662 target=_blank rel="noopener noreferrer">#37662</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=semi-structured-data-management-2>Semi-Structured Data Management<a href=#semi-structured-data-management-2 class=hash-link aria-label="Direct link to Semi-Structured Data Management" title="Direct link to Semi-Structured Data Management">​</a></h3>
<ul>
<li>
<p>Fix some issues with time series compression. <a href=https://github.com/apache/doris/pull/39170 target=_blank rel="noopener noreferrer">#39170</a> <a href=https://github.com/apache/doris/pull/39176 target=_blank rel="noopener noreferrer">#39176</a></p>
</li>
<li>
<p>Fix the issue of incorrect index size statistics during compression. <a href=https://github.com/apache/doris/pull/37232 target=_blank rel="noopener noreferrer">#37232</a></p>
</li>
<li>
<p>Fix the potential incorrect matching of ultra-long strings without tokenization in inverted indexes. <a href=https://github.com/apache/doris/pull/37679 target=_blank rel="noopener noreferrer">#37679</a> <a href=https://github.com/apache/doris/pull/38218 target=_blank rel="noopener noreferrer">#38218</a></p>
</li>
<li>
<p>Fix the high memory usage issue of <code>array_range</code> and <code>array_with_const</code> functions when dealing with large data volumes. <a href=https://github.com/apache/doris/pull/38284 target=_blank rel="noopener noreferrer">#38284</a> <a href=https://github.com/apache/doris/pull/37495 target=_blank rel="noopener noreferrer">#37495</a></p>
</li>
<li>
<p>Fix the potential coredump issue when selecting columns of ARRAY / MAP / STRUCT types. <a href=https://github.com/apache/doris/pull/37936 target=_blank rel="noopener noreferrer">#37936</a></p>
</li>
<li>
<p>Fix the import failure issue caused by simdjson parsing errors when specifying jsonpath in Stream Load. <a href=https://github.com/apache/doris/pull/38490 target=_blank rel="noopener noreferrer">#38490</a></p>
</li>
<li>
<p>Fix the exception handling issue when there are duplicate keys in JSON data. <a href=https://github.com/apache/doris/pull/38146 target=_blank rel="noopener noreferrer">#38146</a></p>
</li>
<li>
<p>Fix the potential query error after DROP INDEX. <a href=https://github.com/apache/doris/pull/37646 target=_blank rel="noopener noreferrer">#37646</a></p>
</li>
<li>
<p>Fix the error return issue in row merging checks during index compression. <a href=https://github.com/apache/doris/pull/38732 target=_blank rel="noopener noreferrer">#38732</a></p>
</li>
<li>
<p>Inverted index v2 format now supports renaming columns. <a href=https://github.com/apache/doris/pull/38079 target=_blank rel="noopener noreferrer">#38079</a></p>
</li>
<li>
<p>Fix the coredump issue when the <code>MATCH</code> function matches an empty string without an index. <a href=https://github.com/apache/doris/pull/37947 target=_blank rel="noopener noreferrer">#37947</a></p>
</li>
<li>
<p>Fix the handling of NULL values in inverted indexes. <a href=https://github.com/apache/doris/pull/37921 target=_blank rel="noopener noreferrer">#37921</a> <a href=https://github.com/apache/doris/pull/37842 target=_blank rel="noopener noreferrer">#37842</a> <a href=https://github.com/apache/doris/pull/38741 target=_blank rel="noopener noreferrer">#38741</a></p>
</li>
<li>
<p>Fix the incorrect <code>row_store_page_size</code> after FE restart. <a href=https://github.com/apache/doris/pull/38240 target=_blank rel="noopener noreferrer">#38240</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=other-2>Other<a href=#other-2 class=hash-link aria-label="Direct link to Other" title="Direct link to Other">​</a></h3>
<ul>
<li>
<p>Fix the timezone configuration issue. The default timezone is no longer fixed at UTC+8 and is now obtained from system configuration. <a href=https://github.com/apache/doris/pull/37294 target=_blank rel="noopener noreferrer">#37294</a></p>
</li>
<li>
<p>Fix the class conflict issue when using ranger due to multiple JSR specification implementations. <a href=https://github.com/apache/doris/pull/37575 target=_blank rel="noopener noreferrer">#37575</a></p>
</li>
<li>
<p>Fix the potential uninitialized field issue in some BE code. <a href=https://github.com/apache/doris/pull/37403 target=_blank rel="noopener noreferrer">#37403</a></p>
</li>
<li>
<p>Fix the error in delete statements for random distributed tables. <a href=https://github.com/apache/doris/pull/37985 target=_blank rel="noopener noreferrer">#37985</a></p>
</li>
<li>
<p>Fix the incorrect requirement for <code>alter_priv</code> permission on the base table when creating a synchronized materialized view. <a href=https://github.com/apache/doris/pull/38011 target=_blank rel="noopener noreferrer">#38011</a></p>
</li>
<li>
<p>Fix the issue of not authenticating resources when used in TVF. <a href=https://github.com/apache/doris/pull/36928 target=_blank rel="noopener noreferrer">#36928</a></p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=credits>Credits<a href=#credits class=hash-link aria-label="Direct link to Credits" title="Direct link to Credits">​</a></h2>
<p>Thanks all who contribute to this release:</p>
<p>@133tosakarin, @924060929, @AshinGau, @Baymine, @BePPPower, @BiteTheDDDDt, @ByteYue, @CalvinKirs, @Ceng23333, @DarvenDuan, @FreeOnePlus, @Gabriel39, @HappenLee, @JNSimba, @Jibing-Li, @KassieZ, @Lchangliang, @LiBinfeng-01, @Mryange, @SWJTU-ZhangLei, @TangSiyang2001, @Tech-Circle-48, @Vallishp, @Yukang-Lian, @Yulei-Yang, @airborne12, @amorynan, @bobhan1, @cambyzju, @cjj2010, @csun5285, @dataroaring, @deardeng, @eldenmoon, @englefly, @feiniaofeiafei, @felixwluo, @freemandealer, @gavinchou, @ghkang98, @hello-stephen, @hubgeter, @hust-hhb, @jacktengg, @kaijchen, @kaka11chen, @keanji-x, @liaoxin01, @liutang123, @luwei16, @luzhijing, @lxr599, @morningman, @morrySnow, @mrhhsg, @mymeiyi, @platoneko, @qidaye, @qzsee, @seawinde, @shuke987, @sollhui, @starocean999, @suxiaogang223, @w41ter, @wangbo, @wangshuo128, @whutpencil, @wsjz, @wuwenchi, @wyxxxcat, @xiaokang, @xiedeyantu, @xinyiZzz, @xy720, @xzj7019, @yagagagaga, @yiguolei, @yujun777, @z404289981, @zclllyybb, @zddr, @zfr9527, @zhangbutao, @zhangstar333, @zhannngchen, @zhiqiang-hhhh, @zjj, @zy-kkk, @zzzxl1993</div></div></article><article class=margin-bottom--xl itemprop=blogPost itemscope itemtype=http://schema.org/BlogPosting><div class=markdown itemprop=articleBody><header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href=/blog/>Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class=s-tags><span class=s-tag>Release Notes</span></span></span></div><h2 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop=headline><a itemprop=url href=/blog/release-note-2.0.14/>Apache Doris version 2.0.14 has been released</a></h2><div class="blog-info text-center flex justify-center text-sm text-black"><span class=authors><span class="s-author text-black">Apache Doris</span></span><time datetime=2024-08-07T00:00:00.000Z itemprop=datePublished class="text-black ml-4">August 7, 2024</time></div></header><div class=markdown itemprop=articleBody><p>Thanks to our community users and developers, about 110 improvements and bug fixes have been made in Doris 2.0.14 version</p>
<p><a href=https://doris.apache.org/download/ target=_blank rel="noopener noreferrer">Quick Download</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=1-new-features>1 New features<a href=#1-new-features class=hash-link aria-label="Direct link to 1 New features" title="Direct link to 1 New features">​</a></h2>
<ul>
<li>Adds a REST interface to retrieve the most recent query profile: <code>curl http://user:password@127.0.0.1:8030/api/profile/text</code> <a href=https://github.com/apache/doris/pull/38268 target=_blank rel="noopener noreferrer">#38268</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=2-improvements>2 Improvements<a href=#2-improvements class=hash-link aria-label="Direct link to 2 Improvements" title="Direct link to 2 Improvements">​</a></h2>
<ul>
<li>
<p>Optimizes the primary key point query performance for MOW tables with sequence columns <a href=https://github.com/apache/doris/pull/38287 target=_blank rel="noopener noreferrer">#38287</a></p>
</li>
<li>
<p>Enhances the performance of inverted index queries with many conditions  <a href=https://github.com/apache/doris/pull/35346 target=_blank rel="noopener noreferrer">#35346</a></p>
</li>
<li>
<p>Automatically enables the   <code>support_phrase</code> option when creating a tokenized inverted index to accelerate  <code>match_phrase</code> phrase queries <a href=https://github.com/apache/doris/pull/37949 target=_blank rel="noopener noreferrer">#37949</a></p>
</li>
<li>
<p>Supports simplified SQL hints, for example: <code>SELECT /*+ query_timeout(3000) */ * FROM t;</code> <a href=https://github.com/apache/doris/pull/37720 target=_blank rel="noopener noreferrer">#37720</a></p>
</li>
<li>
<p>Automatically retries reading from object storage when encountering a   <code>429</code> error to improve stability <a href=https://github.com/apache/doris/pull/35396 target=_blank rel="noopener noreferrer">#35396</a></p>
</li>
<li>
<p>LEFT SEMI / ANTI JOIN terminates subsequent matching execution upon matching a qualifying data row to enhance performance. <a href=https://github.com/apache/doris/pull/34703 target=_blank rel="noopener noreferrer">#34703</a></p>
</li>
<li>
<p>Prevents coredump when returning illegal data to MySQL results. <a href=https://github.com/apache/doris/pull/28069 target=_blank rel="noopener noreferrer">#28069</a></p>
</li>
<li>
<p>Unifies the output of type names in lowercase to maintain compatibility with MySQL and be more friendly to BI tools. <a href=https://github.com/apache/doris/pull/38521 target=_blank rel="noopener noreferrer">#38521</a></p>
</li>
</ul>
<p>You can access the full list through the GitHub <a href=https://github.com/apache/doris/compare/2.0.13...2.0.14 target=_blank rel="noopener noreferrer">link</a> , with the key features and improvements highlighted below.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=credits>Credits<a href=#credits class=hash-link aria-label="Direct link to Credits" title="Direct link to Credits">​</a></h2>
<p>Thanks all who contribute to this release:</p>
<p>@ByteYue, @CalvinKirs, @GoGoWen, @HappenLee, @Jibing-Li, @Lchangliang, @LiBinfeng-01, @Mryange, @XieJiann, @Yukang-Lian, @Yulei-Yang, @airborne12, @amorynan, @biohazard4321, @cambyzju, @csun5285, @eldenmoon, @englefly, @freemandealer, @hello-stephen, @hubgeter, @kaijchen, @liaoxin01, @luwei16, @morningman, @morrySnow, @mymeiyi, @qidaye, @sollhui, @starocean999, @w41ter, @wuwenchi, @xiaokang, @xy720, @yujun777, @zclllyybb, @zddr, @zhangstar333, @zhiqiang-hhhh, @zy-kkk, @zzzxl1993</div></div></article><article class=margin-bottom--xl itemprop=blogPost itemscope itemtype=http://schema.org/BlogPosting><div class=markdown itemprop=articleBody><header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href=/blog/>Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class=s-tags><span class=s-tag>Release Notes</span></span></span></div><h2 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop=headline><a itemprop=url href=/blog/release-note-2.0.13/>Apache Doris version 2.0.13 has been released</a></h2><div class="blog-info text-center flex justify-center text-sm text-black"><span class=authors><span class="s-author text-black">Apache Doris</span></span><time datetime=2024-07-17T00:00:00.000Z itemprop=datePublished class="text-black ml-4">July 17, 2024</time></div></header><div class=markdown itemprop=articleBody><p>Thanks to our community users and developers, about 112 improvements and bug fixes have been made in Doris 2.0.13 version</p>
<p><a href=https://doris.apache.org/download/ target=_blank rel="noopener noreferrer">Quick Download</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=behavior-changes>Behavior changes<a href=#behavior-changes class=hash-link aria-label="Direct link to Behavior changes" title="Direct link to Behavior changes">​</a></h2>
<p>SQL input is treated as multiple statements only when the <code>CLIENT_MULTI_STATEMENTS</code> setting is enabled on the client side, enhancing compatibility with MySQL. <a href=https://github.com/apache/doris/pull/36759 target=_blank rel="noopener noreferrer">#36759</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=new-features>New features<a href=#new-features class=hash-link aria-label="Direct link to New features" title="Direct link to New features">​</a></h2>
<ul>
<li>
<p>A new BE configuration <code>allow_zero_date</code> has been added, allowing dates with all zeros. When set to <code>false</code>, <code>0000-00-00</code> is parsed as <code>NULL</code>, and when set to <code>true</code>, it is parsed as <code>0000-01-01</code>. The default value is <code>false</code> to maintain consistency with previous behavior. <a href=https://github.com/apache/doris/pull/34961 target=_blank rel="noopener noreferrer">#34961</a></p>
</li>
<li>
<p><code>LogicalWindow</code> and <code>LogicalPartitionTopN</code> support multi-field predicate pushdown to improve performance. <a href=https://github.com/apache/doris/pull/36828 target=_blank rel="noopener noreferrer">#36828</a></p>
</li>
<li>
<p>The ES Catalog now maps ES <code>nested</code> or <code>object</code> types to Doris <code>JSON</code> types. <a href=https://github.com/apache/doris/pull/37101 target=_blank rel="noopener noreferrer">#37101</a></p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=improvements>Improvements<a href=#improvements class=hash-link aria-label="Direct link to Improvements" title="Direct link to Improvements">​</a></h2>
<ul>
<li>
<p>Queries with <code>LIMIT</code> end reading data earlier to reduce resource consumption and improve performance. <a href=https://github.com/apache/doris/pull/36535 target=_blank rel="noopener noreferrer">#36535</a></p>
</li>
<li>
<p>Special JSON data with empty keys is now supported. <a href=https://github.com/apache/doris/pull/36762 target=_blank rel="noopener noreferrer">#36762</a></p>
</li>
<li>
<p>Stability and usability of routine load have been improved, including load balancing, automatic recovery, exception handling, and more user-friendly error messages. <a href=https://github.com/apache/doris/pull/36450 target=_blank rel="noopener noreferrer">#36450</a> <a href=https://github.com/apache/doris/pull/35376 target=_blank rel="noopener noreferrer">#35376</a> <a href=https://github.com/apache/doris/pull/35266 target=_blank rel="noopener noreferrer">#35266</a> <a href=https://github.com/apache/doris/pull/33372 target=_blank rel="noopener noreferrer"> #33372</a> <a href=https://github.com/apache/doris/pull/32282 target=_blank rel="noopener noreferrer">#32282</a> <a href=https://github.com/apache/doris/pull/32046 target=_blank rel="noopener noreferrer">#32046</a> <a href=https://github.com/apache/doris/pull/32021 target=_blank rel="noopener noreferrer">#32021</a> <a href=https://github.com/apache/doris/pull/31846 target=_blank rel="noopener noreferrer">#31846</a> <a href=https://github.com/apache/doris/pull/31273 target=_blank rel="noopener noreferrer">#31273</a></p>
</li>
<li>
<p>BE load balancing selection of hard disk strategy and speed optimization. <a href=https://github.com/apache/doris/pull/36826 target=_blank rel="noopener noreferrer">#36826</a> <a href=https://github.com/apache/doris/pull/36795 target=_blank rel="noopener noreferrer">#36795</a> <a href=https://github.com/apache/doris/pull/36509 target=_blank rel="noopener noreferrer">#36509</a></p>
</li>
<li>
<p>Stability and usability of the JDBC catalog have been improved, including encryption, thread pool connection count configuration, and more user-friendly error messages. <a href=https://github.com/apache/doris/pull/36940 target=_blank rel="noopener noreferrer">#36940</a> <a href=https://github.com/apache/doris/pull/36720 target=_blank rel="noopener noreferrer">#36720</a> <a href=https://github.com/apache/doris/pull/30880 target=_blank rel="noopener noreferrer">#30880</a> <a href=https://github.com/apache/doris/pull/35692 target=_blank rel="noopener noreferrer">#35692</a></p>
</li>
</ul>
<p>You can access the full list through the GitHub <a href=https://github.com/apache/doris/compare/2.0.12...2.0.13 target=_blank rel="noopener noreferrer">link</a> , with the key features and improvements highlighted below.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=credits>Credits<a href=#credits class=hash-link aria-label="Direct link to Credits" title="Direct link to Credits">​</a></h2>
<p>Thanks to all who contributed to this release:</p>
<p>@Gabriel39, @Jibing-Li, @Johnnyssc, @Lchangliang, @LiBinfeng-01, @SWJTU-ZhangLei, @Thearas, @Yukang-Lian, @Yulei-Yang, @airborne12, @amorynan, @bobhan1, @cambyzju, @csun5285, @dataroaring, @deardeng, @eldenmoon, @englefly, @feiniaofeiafei, @hello-stephen, @jacktengg, @kaijchen, @liutang123, @luwei16, @morningman, @morrySnow, @mrhhsg, @mymeiyi, @platoneko, @qidaye, @sollhui, @starocean999, @w41ter, @xiaokang, @xy720, @yujun777, @zclllyybb, @zddr</div></div></article><article class=margin-bottom--xl itemprop=blogPost itemscope itemtype=http://schema.org/BlogPosting><div class=markdown itemprop=articleBody><header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href=/blog/>Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class=s-tags><span class=s-tag>Release Notes</span></span></span></div><h2 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop=headline><a itemprop=url href=/blog/release-note-2.0.12/>Apache Doris version 2.0.12 has been released</a></h2><div class="blog-info text-center flex justify-center text-sm text-black"><span class=authors><span class="s-author text-black">Apache Doris</span></span><time datetime=2024-06-27T00:00:00.000Z itemprop=datePublished class="text-black ml-4">June 27, 2024</time></div></header><div class=markdown itemprop=articleBody><p>Thanks to our community developers and users for their contributions. Doris version 2.0.12 will bring 99 improvements and bug fixes.</p>
<p><strong>Quick Download:</strong> <a href=https://doris.apache.org/download/ target=_blank rel="noopener noreferrer">https://doris.apache.org/download/</a></p>
<p><strong>GitHub Release:</strong> <a href=https://github.com/apache/doris/releases target=_blank rel="noopener noreferrer">https://github.com/apache/doris/releases</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=behavior-changes>Behavior changes<a href=#behavior-changes class=hash-link aria-label="Direct link to Behavior changes" title="Direct link to Behavior changes">​</a></h2>
<ul>
<li>
<p>No longer set the default table comment to the table type. Instead, set it to be empty by default, for example, change COMMENT 'OLAP' to COMMENT ' '.  This new behavior is more friendly for BI software that relies on table comments. <a href=https://github.com/apache/doris/pull/35855 target=_blank rel="noopener noreferrer">#35855</a></p>
</li>
<li>
<p>Change the type of the <code>@@autocommit</code> variable from <code>BOOLEAN</code> to <code>BIGINT</code> to prevent errors from certain MySQL clients (such as .NET MySQL.Data). <a href=https://github.com/apache/doris/pull/33282 target=_blank rel="noopener noreferrer">#33282</a></p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=improvements>Improvements<a href=#improvements class=hash-link aria-label="Direct link to Improvements" title="Direct link to Improvements">​</a></h2>
<ul>
<li>
<p>Remove the <code>disable_nested_complex_type</code> parameter and allow the creation of nested <code>ARRAY</code>, <code>MAP</code>, and <code>STRUCT</code> types by default. <a href=https://github.com/apache/doris/pull/36255 target=_blank rel="noopener noreferrer">#36255</a></p>
</li>
<li>
<p>The HMS catalog supports the <code>SHOW CREATE DATABASE</code> command. <a href=https://github.com/apache/doris/pull/28145 target=_blank rel="noopener noreferrer">#28145</a></p>
</li>
<li>
<p>Add more inverted index metrics to the query profile. <a href=https://github.com/apache/doris/pull/36545 target=_blank rel="noopener noreferrer">#36545</a></p>
</li>
<li>
<p>Cross-Cluster Replication (CCR) supports inverted indices. <a href=https://github.com/apache/doris/pull/31743 target=_blank rel="noopener noreferrer">#31743</a></p>
</li>
</ul>
<p>You can access the full list through the GitHub <a href=https://github.com/apache/doris/compare/2.0.11...2.0.12 target=_blank rel="noopener noreferrer">link</a> , with the key features and improvements highlighted below.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=credits>Credits<a href=#credits class=hash-link aria-label="Direct link to Credits" title="Direct link to Credits">​</a></h2>
<p>Thanks all who contribute to this release:</p>
<p>@airborne12, D14@amorynan, D14@BiteTheDDDDt, D14@cambyzju, D14@caoliang-web, D14@dataroaring, D14@eldenmoon, D14@feiniaofeiafei, D14@felixwluo, D14@gavinchou, D14@HappenLee, D14@hello-stephen, D14@jacktengg, D14@Jibing-Li, D14@Johnnyssc, D14@liaoxin01, D14@LiBinfeng-01, D14@luwei16, D14@mongo360, D14@morningman, D14@morrySnow, D14@mrhhsg, D14@Mryange, D14@mymeiyi, D14@qidaye, D14@qzsee, D14@starocean999, D14@w41ter, D14@wangbo, D14@wsjz, D14@wuwenchi, D14@xiaokang, D14@XuPengfei-1020, D14@xy720, D14@yongjinhou, D14@yujun777, D14@Yukang-Lian, D14@Yulei-Yang, D14@zclllyybb, D14@zddr, D14@zhannngchen, D14@zhiqiang-hhhh, D14@zy-kkk, D14@zzzxl1993</div></div></article><article class=margin-bottom--xl itemprop=blogPost itemscope itemtype=http://schema.org/BlogPosting><div class=markdown itemprop=articleBody><header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href=/blog/>Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class=s-tags><span class=s-tag>Release Notes</span></span></span></div><h2 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop=headline><a itemprop=url href=/blog/release-note-2.1.4/>Apache Doris 2.1.4 just released</a></h2><div class="blog-info text-center flex justify-center text-sm text-black"><span class=authors><span class="s-author text-black">Apache Doris</span></span><time datetime=2024-06-26T00:00:00.000Z itemprop=datePublished class="text-black ml-4">June 26, 2024</time></div></header><div class=markdown itemprop=articleBody><p>Dear community, Apache Doris version 2.1.4 was released on June 26, 2024. In this update, we have optimized various functional experiences for data lakehouse scenarios, with a focus on resolving the abnormal memory usage issue in the previous version. Additionally, we have implemented several improvemnents and bug fixes to enhance the stability.  Welcome to download and use it.</p>
<p><strong>Quick Download:</strong> <a href=https://doris.apache.org/download/ target=_blank rel="noopener noreferrer">https://doris.apache.org/download/</a></p>
<p><strong>GitHub Release:</strong> <a href=https://github.com/apache/doris/releases target=_blank rel="noopener noreferrer">https://github.com/apache/doris/releases</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=behavior-changes>Behavior changes<a href=#behavior-changes class=hash-link aria-label="Direct link to Behavior changes" title="Direct link to Behavior changes">​</a></h2>
<ul>
<li>
<p>Non-existent files will be ignored when querying external tables such as Hive. <a href=https://github.com/apache/doris/pull/35319 target=_blank rel="noopener noreferrer">#35319</a></p>
<p>The file list is obtained from the meta cache, and it may not be consistent with the actual file list.</p>
<p>Ignoring non-existent files helps to avoid query errors.</p>
</li>
<li>
<p>By default, creating a Bitmap Index will no longer be automatically changed to an Inverted Index. <a href=https://github.com/apache/doris/pull/35521 target=_blank rel="noopener noreferrer">#35521</a></p>
<p>This behavior is controlled by the FE configuration item <code>enable_create_bitmap_index_as_inverted_index</code>, which defaults to false.</p>
</li>
<li>
<p>When starting FE and BE processes using <code>--console</code>, all logs will be output to the standard output and differentiated by prefixes indicating the log type. <a href=https://github.com/apache/doris/pull/35679 target=_blank rel="noopener noreferrer">#35679</a></p>
<p>For more infomation, please see the documentations:</p>
<ul>
<li>
<p><a href=https://doris.apache.org/docs/admin-manual/log-management/fe-log target=_blank rel="noopener noreferrer">Log Management - FE Log</a></p>
</li>
<li>
<p><a href=https://doris.apache.org/docs/admin-manual/log-management/be-log target=_blank rel="noopener noreferrer">Log Management - BE Log</a></p>
</li>
</ul>
</li>
<li>
<p>If no table comment is provided when creating a table, the default comment will be empty instead of using the table type as the default comment. <a href=https://github.com/apache/doris/pull/36025 target=_blank rel="noopener noreferrer">#36025</a></p>
</li>
<li>
<p>The default precision of DECIMALV3 has been adjusted from (9, 0) to (38, 9) to maintain compatibility with the version in which this feature was initially released. <a href=https://github.com/apache/doris/pull/36316 target=_blank rel="noopener noreferrer">#36316</a></p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=new-features>New features<a href=#new-features class=hash-link aria-label="Direct link to New features" title="Direct link to New features">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=query-optimizer>Query Optimizer<a href=#query-optimizer class=hash-link aria-label="Direct link to Query Optimizer" title="Direct link to Query Optimizer">​</a></h3>
<ul>
<li>
<p>Support FE flame graph tool</p>
<p>For more information, see the <a href=https://doris.apache.org/community/developer-guide/fe-profiler target=_blank rel="noopener noreferrer">documentation</a></p>
</li>
<li>
<p>Support <code>SELECT DISTINCT</code> to be used with aggregation.</p>
</li>
<li>
<p>Support single table query rewrite without <code>GROUP BY</code>. This is useful for complex filters or expressions. <a href=https://github.com/apache/doris/pull/35242 target=_blank rel="noopener noreferrer">#35242</a>.</p>
</li>
<li>
<p>The new optimizer fully supports point query functionality <a href=https://github.com/apache/doris/pull/36205 target=_blank rel="noopener noreferrer">#36205</a>.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=lakehouse>Lakehouse<a href=#lakehouse class=hash-link aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">​</a></h3>
<ul>
<li>
<p>Support native reader of Apache Paimon deletion vector  <a href=https://github.com/apache/doris/pull/35241 target=_blank rel="noopener noreferrer">#35241</a></p>
</li>
<li>
<p>Support using Resource in Table Valued Functions <a href=https://github.com/apache/doris/pull/35139 target=_blank rel="noopener noreferrer">#35139</a></p>
</li>
<li>
<p>Access controller with Hive Ranger plugin supports Data Mask</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=asynchronous-materialized-views>Asynchronous Materialized Views<a href=#asynchronous-materialized-views class=hash-link aria-label="Direct link to Asynchronous Materialized Views" title="Direct link to Asynchronous Materialized Views">​</a></h3>
<ul>
<li>
<p>Support partition roll-up during construction. <a href=https://github.com/apache/doris/pull/31812 target=_blank rel="noopener noreferrer">#31812</a></p>
</li>
<li>
<p>Support triggered updates during construction. <a href=https://github.com/apache/doris/pull/34548 target=_blank rel="noopener noreferrer">#34548</a></p>
</li>
<li>
<p>Support specifying the <code>store_row_column</code> and <code>storage_medium</code> attribute during construction. <a href=https://github.com/apache/doris/pull/35860 target=_blank rel="noopener noreferrer">#35860</a></p>
</li>
<li>
<p>Transparent rewrite supports single table asynchronous materialized views. <a href=https://github.com/apache/doris/pull/34646 target=_blank rel="noopener noreferrer">#34646</a></p>
</li>
<li>
<p>Transparent rewrite supports <code>AGG_STATE</code> type aggregation roll-up. <a href=https://github.com/apache/doris/pull/35026 target=_blank rel="noopener noreferrer">#35026</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=others>Others<a href=#others class=hash-link aria-label="Direct link to Others" title="Direct link to Others">​</a></h3>
<ul>
<li>
<p>Added function <code>replace_empty</code>.</p>
<p>For more information, see <a href=https://doris.apache.org/docs/sql-manual/sql-functions/string-functions/replace_empty target=_blank rel="noopener noreferrer">documentation</a>.</p>
</li>
<li>
<p>Support <code>show storage policy using</code> statement.</p>
<p>For more information, see <a href=https://doris.apache.org/docs/sql-manual/sql-statements/Show-Statements/SHOW-STORAGE-POLICY-USING/ target=_blank rel="noopener noreferrer">documentation</a>.</p>
</li>
<li>
<p>Support JVM metrics on the BE side.</p>
<p>By setting <code>enable_jvm_monitor=true</code> in <code>be.conf</code> to enable this feature.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=improvements>Improvements<a href=#improvements class=hash-link aria-label="Direct link to Improvements" title="Direct link to Improvements">​</a></h2>
<ul>
<li>
<p>Supported creating inverted indexes for columns with Chinese names. <a href=https://github.com/apache/doris/pull/36321 target=_blank rel="noopener noreferrer">#36321</a></p>
</li>
<li>
<p>Estimate memory consumed by segment cache more accurately so that unused memory can be released more quickly. <a href=https://github.com/apache/doris/pull/35751 target=_blank rel="noopener noreferrer">#35751</a></p>
</li>
<li>
<p>Filter empty partitions before exporting tables to remote storage. <a href=https://github.com/apache/doris/pull/35542 target=_blank rel="noopener noreferrer">#35542</a></p>
</li>
<li>
<p>Optimize routine load task allocation algorithm to balance the load among Backends. <a href=https://github.com/apache/doris/pull/34778 target=_blank rel="noopener noreferrer">#34778</a></p>
</li>
<li>
<p>Provide hints when a related variable is not found during a set operation. <a href=https://github.com/apache/doris/pull/35775 target=_blank rel="noopener noreferrer">#35775</a></p>
</li>
<li>
<p>Support placing Java UDF jar files in the FE's <code>custom_lib</code> directory for default loading. <a href=https://github.com/apache/doris/pull/35984 target=_blank rel="noopener noreferrer">#35984</a></p>
</li>
<li>
<p>Add a timeout global variable <code>audit_plugin_load_timeout</code> for audit log load jobs.</p>
</li>
<li>
<p>Optimize the performance of transparent rewrite planning for asynchronous materialized views.</p>
</li>
<li>
<p>Optimize the <code>INSERT</code> operation that when the source is empty, the BE will not execute. <a href=https://github.com/apache/doris/pull/34418 target=_blank rel="noopener noreferrer">#34418</a></p>
</li>
<li>
<p>Support fetching file lists of Hive/Hudi tables in batches. <a href=https://github.com/apache/doris/pull/35107 target=_blank rel="noopener noreferrer">#35107</a></p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=bug-fixes>Bug fixes<a href=#bug-fixes class=hash-link aria-label="Direct link to Bug fixes" title="Direct link to Bug fixes">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=query-optimizer-1>Query Optimizer<a href=#query-optimizer-1 class=hash-link aria-label="Direct link to Query Optimizer" title="Direct link to Query Optimizer">​</a></h3>
<ul>
<li>
<p>Fixed the issue where SQL cache returns old results after truncating a partition. <a href=https://github.com/apache/doris/pull/34698 target=_blank rel="noopener noreferrer">#34698</a></p>
</li>
<li>
<p>Fixed the issue where casting from JSON to other types did not correctly handle nullable attributes. <a href=https://github.com/apache/doris/pull/34707 target=_blank rel="noopener noreferrer">#34707</a></p>
</li>
<li>
<p>Fixed occasional DATETIMEV2 literal simplification errors. <a href=https://github.com/apache/doris/pull/35153 target=_blank rel="noopener noreferrer">#35153</a></p>
</li>
<li>
<p>Fixed the issue where <code>COUNT(*)</code> could not be used in window functions. <a href=https://github.com/apache/doris/pull/35220 target=_blank rel="noopener noreferrer">#35220</a></p>
</li>
<li>
<p>Fixed the issue where nullable attributes could be incorrect when all <code>SELECT</code> statements under <code>UNION ALL</code> have no <code>FROM</code> clause. <a href=https://github.com/apache/doris/pull/35074 target=_blank rel="noopener noreferrer">#35074</a></p>
</li>
<li>
<p>Fixed the issue where <code>bitmap in join</code> and subquery unnesting could not be used simultaneously. <a href=https://github.com/apache/doris/pull/35435 target=_blank rel="noopener noreferrer">#35435</a></p>
</li>
<li>
<p>Fixed the performance issue where filter conditions could not be pushed down to the CTE producer in specific situations. <a href=https://github.com/apache/doris/pull/35463 target=_blank rel="noopener noreferrer">#35463</a></p>
</li>
<li>
<p>Fixed the issue where aggregate combinators written in uppercase could not be found. <a href=https://github.com/apache/doris/pull/35540 target=_blank rel="noopener noreferrer">#35540</a></p>
</li>
<li>
<p>Fixed the performance issue where window functions were not properly pruned by column pruning. <a href=https://github.com/apache/doris/pull/35504 target=_blank rel="noopener noreferrer">#35504</a></p>
</li>
<li>
<p>Fixed the issue where queries might parse incorrectly leading to wrong results when multiple tables with the same name but in different databases appeared simultaneously in the query. <a href=https://github.com/apache/doris/pull/35571 target=_blank rel="noopener noreferrer">#35571</a></p>
</li>
<li>
<p>Fixed the query error caused by generating runtime filters during schema table scans. <a href=https://github.com/apache/doris/pull/35655 target=_blank rel="noopener noreferrer">#35655</a></p>
</li>
<li>
<p>Fixed the issue where nested correlated subqueries could not execute because the join condition was folded into a null literal. <a href=https://github.com/apache/doris/pull/35811 target=_blank rel="noopener noreferrer">#35811</a></p>
</li>
<li>
<p>Fixed the occasional issue where decimal literals were set with incorrect precision during planning. <a href=https://github.com/apache/doris/pull/36055 target=_blank rel="noopener noreferrer">#36055</a></p>
</li>
<li>
<p>Fixed the occasional issue where multiple layers of aggregation were merged incorrectly during planning. <a href=https://github.com/apache/doris/pull/36145 target=_blank rel="noopener noreferrer">#36145</a></p>
</li>
<li>
<p>Fixed the occasional issue where the input-output mismatch error occurred after aggregate expansion planning. <a href=https://github.com/apache/doris/pull/36207 target=_blank rel="noopener noreferrer">#36207</a></p>
</li>
<li>
<p>Fixed the occasional issue where <code>&lt;=></code> was incorrectly converted to <code>=</code>. <a href=https://github.com/apache/doris/pull/36521 target=_blank rel="noopener noreferrer">#36521</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=query-execution>Query Execution<a href=#query-execution class=hash-link aria-label="Direct link to Query Execution" title="Direct link to Query Execution">​</a></h3>
<ul>
<li>
<p>Fixed the issue where the query hangs if the limited rows are reached on the pipeline engine and memory is not released. <a href=https://github.com/apache/doris/pull/35746 target=_blank rel="noopener noreferrer">#35746</a></p>
</li>
<li>
<p>Fixed the BE coredump when <code>enable_decimal256</code> is true but falls back to the old planner. <a href=https://github.com/apache/doris/pull/35731 target=_blank rel="noopener noreferrer">#35731</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=asynchronous-materialized-views-1>Asynchronous Materialized Views<a href=#asynchronous-materialized-views-1 class=hash-link aria-label="Direct link to Asynchronous Materialized Views" title="Direct link to Asynchronous Materialized Views">​</a></h3>
<ul>
<li>
<p>Fixed the issue where asynchronous materialized views caused backup and restore exceptions. <a href=https://github.com/apache/doris/pull/35703 target=_blank rel="noopener noreferrer">#35703</a></p>
</li>
<li>
<p>Fixed the issue where partition rewrite could lead to incorrect results. <a href=https://github.com/apache/doris/pull/35236 target=_blank rel="noopener noreferrer">#35236</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=semi-structured>Semi-structured<a href=#semi-structured class=hash-link aria-label="Direct link to Semi-structured" title="Direct link to Semi-structured">​</a></h3>
<ul>
<li>Fixed the core dump problem when a VARIANT with an empty key is used. <a href=https://github.com/apache/doris/pull/35671 target=_blank rel="noopener noreferrer">#35671</a></li>
<li>Bitmap and BloomFilter index should not perform light index changes. <a href=https://github.com/apache/doris/pull/35225 target=_blank rel="noopener noreferrer">#35225</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=primary-key>Primary Key<a href=#primary-key class=hash-link aria-label="Direct link to Primary Key" title="Direct link to Primary Key">​</a></h3>
<ul>
<li>
<p>Fixed the issue where an exception BE restart occurred in the case of partial column updates during import, which could result in duplicate keys. <a href=https://github.com/apache/doris/pull/35678 target=_blank rel="noopener noreferrer">#35678</a></p>
</li>
<li>
<p>Fixed the issue where BE might core dump during clone operations when memory is tight. <a href=https://github.com/apache/doris/pull/34702 target=_blank rel="noopener noreferrer">#34702</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=lakehouse-1>Lakehouse<a href=#lakehouse-1 class=hash-link aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">​</a></h3>
<ul>
<li>
<p>Fixed the issue where a Hive table could not be created with a fully qualified name such as <code>ctl.db.tbl</code> <a href=https://github.com/apache/doris/pull/34984 target=_blank rel="noopener noreferrer">#34984</a></p>
</li>
<li>
<p>Fixed the issue where the Hive metastore connection did not close when refreshing <a href=https://github.com/apache/doris/pull/35426 target=_blank rel="noopener noreferrer">#35426</a></p>
</li>
<li>
<p>Fixed a potential meta replay issue when upgrading from 2.0.x to 2.1.x. <a href=https://github.com/apache/doris/pull/35532 target=_blank rel="noopener noreferrer">#35532</a></p>
</li>
<li>
<p>Fixed the issue where the Table Valued Function could not read an empty snappy compressed file. <a href=https://github.com/apache/doris/pull/34926 target=_blank rel="noopener noreferrer">#34926</a></p>
</li>
<li>
<p>Fixed the issue where unable to read Parquet files with invalid min-max column statistics <a href=https://github.com/apache/doris/pull/35041 target=_blank rel="noopener noreferrer">#35041</a></p>
</li>
<li>
<p>Fixed the issue where unable to handle pushdown predicates with null-aware functions in the Parquet/ORC reader <a href=https://github.com/apache/doris/pull/35335 target=_blank rel="noopener noreferrer">#35335</a></p>
</li>
<li>
<p>Fixed the issue about the order of partition columns when creating a Hive table <a href=https://github.com/apache/doris/pull/35347 target=_blank rel="noopener noreferrer">#35347</a></p>
</li>
<li>
<p>Fixed the issue where writing to a Hive table on S3 failed when partition values contained spaces <a href=https://github.com/apache/doris/pull/35645 target=_blank rel="noopener noreferrer">#35645</a></p>
</li>
<li>
<p>Fixed the issue about incorrect scheme of Aliyun OSS endpoint <a href=https://github.com/apache/doris/pull/34907 target=_blank rel="noopener noreferrer">#34907</a></p>
</li>
<li>
<p>Fixed the issue where the Parquet format Hive table written by Doris could not be read by Hive <a href=https://github.com/apache/doris/pull/34981 target=_blank rel="noopener noreferrer">#34981</a></p>
</li>
<li>
<p>Fixed the issue where unable to read ORC files after the schema change of a Hive table <a href=https://github.com/apache/doris/pull/35583 target=_blank rel="noopener noreferrer">#35583</a></p>
</li>
<li>
<p>Fixed the issue where unable to read Paimon tables via JNI after the schema change of the Paimon table <a href=https://github.com/apache/doris/pull/35309 target=_blank rel="noopener noreferrer">#35309</a></p>
</li>
<li>
<p>Fixed the issue of too small Row Groups in Parquet format files written out. <a href=https://github.com/apache/doris/pull/36042 target=_blank rel="noopener noreferrer">#36042</a> <a href=https://github.com/apache/doris/pull/36143 target=_blank rel="noopener noreferrer">#36143</a></p>
</li>
<li>
<p>Fixed the issue where unable to read Paimon tables after schema changes <a href=https://github.com/apache/doris/pull/36049 target=_blank rel="noopener noreferrer">#36049</a></p>
</li>
<li>
<p>Fixed the issue where unable to read Hive Parquet format tables after schema changes <a href=https://github.com/apache/doris/pull/36182 target=_blank rel="noopener noreferrer">#36182</a></p>
</li>
<li>
<p>Fixed the FE OOM issue caused by Hadoop FS cache <a href=https://github.com/apache/doris/pull/36403 target=_blank rel="noopener noreferrer">#36403</a></p>
</li>
<li>
<p>Fixed the issue where FE could not start after enabling the Hive Metastore Listener <a href=https://github.com/apache/doris/pull/36533 target=_blank rel="noopener noreferrer">#36533</a></p>
</li>
<li>
<p>Fixed the issue of query performance degradation with a large number of files <a href=https://github.com/apache/doris/pull/36431 target=_blank rel="noopener noreferrer">#36431</a></p>
</li>
<li>
<p>Fixed the timezone issue when reading the timestamp column type in Iceberg <a href=https://github.com/apache/doris/pull/36435 target=_blank rel="noopener noreferrer">#36435</a></p>
</li>
<li>
<p>Fixed DATETIME conversion error and data path error on Iceberg Table. <a href=https://github.com/apache/doris/pull/35708 target=_blank rel="noopener noreferrer">#35708</a></p>
</li>
<li>
<p>Support retain and pass the additional user-defined properties fo Table Valued Functions to the S3 SDK. <a href=https://github.com/apache/doris/pull/35515 target=_blank rel="noopener noreferrer">#35515</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=data-import>Data Import<a href=#data-import class=hash-link aria-label="Direct link to Data Import" title="Direct link to Data Import">​</a></h3>
<ul>
<li>
<p>Fixed the issue where <code>CANCEL LOAD</code> did not work <a href=https://github.com/apache/doris/pull/35352 target=_blank rel="noopener noreferrer">#35352</a></p>
</li>
<li>
<p>Fixed the issue where a null pointer error in the Publish phase of load transactions prevented the load from completing <a href=https://github.com/apache/doris/pull/35977 target=_blank rel="noopener noreferrer">#35977</a></p>
</li>
<li>
<p>Fixed the issue with bRPC serializing large data files when sent via HTTP <a href=https://github.com/apache/doris/pull/36169 target=_blank rel="noopener noreferrer">#36169</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=data-management>Data Management<a href=#data-management class=hash-link aria-label="Direct link to Data Management" title="Direct link to Data Management">​</a></h3>
<ul>
<li>
<p>Fixed the isseu that the resource tag in ConnectionContext was not set after forwarding DDL or DML to master FE. <a href=https://github.com/apache/doris/pull/35618 target=_blank rel="noopener noreferrer">#35618</a></p>
</li>
<li>
<p>Fixed the issue where the restored table name was incorrect when <code>lower_case_table_names</code> was enabled <a href=https://github.com/apache/doris/pull/35508 target=_blank rel="noopener noreferrer">#35508</a></p>
</li>
<li>
<p>Fixed the issue where <code>admin clean trash</code> could not work <a href=https://github.com/apache/doris/pull/35271 target=_blank rel="noopener noreferrer">#35271</a></p>
</li>
<li>
<p>Fixed the issue where a storage policy could not be deleted from a partition <a href=https://github.com/apache/doris/pull/35874 target=_blank rel="noopener noreferrer">#35874</a></p>
</li>
<li>
<p>Fixed the issue of data loss when importing into a multi-replica automatic partition table <a href=https://github.com/apache/doris/pull/36586 target=_blank rel="noopener noreferrer">#36586</a></p>
</li>
<li>
<p>Fixed the issue where the partition column of a table changed when querying or inserting into an automatic partition table using the old optimizer <a href=https://github.com/apache/doris/pull/36514 target=_blank rel="noopener noreferrer">#36514</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=memory-management>Memory Management<a href=#memory-management class=hash-link aria-label="Direct link to Memory Management" title="Direct link to Memory Management">​</a></h3>
<ul>
<li>
<p>Fixed the issue of frequent errors in the logs due to failure in obtaining Cgroup meminfo. <a href=https://github.com/apache/doris/pull/35425 target=_blank rel="noopener noreferrer">#35425</a></p>
</li>
<li>
<p>Fixed the issue where the Segment cache size was uncontrolled when using BloomFilter, leading to abnormal process memory growth. <a href=https://github.com/apache/doris/pull/34871 target=_blank rel="noopener noreferrer">#34871</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=permissions>Permissions<a href=#permissions class=hash-link aria-label="Direct link to Permissions" title="Direct link to Permissions">​</a></h3>
<ul>
<li>
<p>Fixed the issue where permission settings were ineffective after enabling case-insensitive table names. <a href=https://github.com/apache/doris/pull/36557 target=_blank rel="noopener noreferrer">#36557</a></p>
</li>
<li>
<p>Fixed the issue where setting LDAP passwords through non-Master FE nodes did not take effect. <a href=https://github.com/apache/doris/pull/36598 target=_blank rel="noopener noreferrer">#36598</a></p>
</li>
<li>
<p>Fixed the issue where authorization could not be checked for the <code>SELECT COUNT(*)</code> statement. <a href=https://github.com/apache/doris/pull/35465 target=_blank rel="noopener noreferrer">#35465</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=others-1>Others<a href=#others-1 class=hash-link aria-label="Direct link to Others" title="Direct link to Others">​</a></h3>
<ul>
<li>
<p>Fixed the issue where the client JDBC program could not close the connection if the MySQL connection was broken. <a href=https://github.com/apache/doris/pull/36616 target=_blank rel="noopener noreferrer">#36616</a></p>
</li>
<li>
<p>Fixed MySQL protocol compatibility issue with the <code>SHOW PROCEDURE STATUS</code> statement. <a href=https://github.com/apache/doris/pull/35350 target=_blank rel="noopener noreferrer">#35350</a></p>
</li>
<li>
<p>The <code>libevent</code> now forces Keepalive to solve the issue of connection leaks in certain situations. <a href=https://github.com/apache/doris/pull/36088 target=_blank rel="noopener noreferrer">#36088</a></p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=credits>Credits<a href=#credits class=hash-link aria-label="Direct link to Credits" title="Direct link to Credits">​</a></h2>
<p>Thanks to every one who contributes to this release.</p>
<p>@airborne12, @amorynan, @AshinGau, @BePPPower, @BiteTheDDDDt, @ByteYue, @caiconghui, @CalvinKirs, @cambyzju, @catpineapple, @cjj2010, @csun5285, @DarvenDuan, @dataroaring, @deardeng, @Doris-Extras, @eldenmoon, @englefly, @feiniaofeiafei, @felixwluo, @freemandealer, @Gabriel39, @gavinchou, @GoGoWen, @HappenLee, @hello-stephen, @hubgeter, @hust-hhb, @jacktengg, @jackwener, @jeffreys-cat, @Jibing-Li, @kaijchen, @kaka11chen, @Lchangliang, @liaoxin01, @LiBinfeng-01, @lide-reed, @luennng, @luwei16, @mongo360, @morningman, @morrySnow, @mrhhsg, @Mryange, @mymeiyi, @nextdreamblue, @platoneko, @qidaye, @qzsee, @seawinde, @shuke987, @sollhui, @starocean999, @suxiaogang223, @TangSiyang2001, @Thearas, @Vallishp, @w41ter, @wangbo, @whutpencil, @wsjz, @wuwenchi, @xiaokang, @xiedeyantu, @XieJiann, @xinyiZzz, @XuPengfei-1020, @xy720, @xzj7019, @yiguolei, @yongjinhou, @yujun777, @Yukang-Lian, @Yulei-Yang, @zclllyybb, @zddr, @zfr9527, @zgxme, @zhangbutao, @zhangstar333, @zhannngchen, @zhiqiang-hhhh, @zy-kkk, @zzzxl1993</div></div></article><article class=margin-bottom--xl itemprop=blogPost itemscope itemtype=http://schema.org/BlogPosting><div class=markdown itemprop=articleBody><header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href=/blog/>Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class=s-tags><span class=s-tag>Release Notes</span></span></span></div><h2 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop=headline><a itemprop=url href=/blog/release-note-2.0.11/>Apache Doris version 2.0.11 has been released</a></h2><div class="blog-info text-center flex justify-center text-sm text-black"><span class=authors><span class="s-author text-black">Apache Doris</span></span><time datetime=2024-06-05T00:00:00.000Z itemprop=datePublished class="text-black ml-4">June 5, 2024</time></div></header><div class=markdown itemprop=articleBody><p>Thanks to our community users and developers, about 123 improvements and bug fixes have been made in Doris 2.0.11 version.</p>
<p><strong>Quick Download:</strong> <a href=https://doris.apache.org/download/ target=_blank rel="noopener noreferrer">https://doris.apache.org/download/</a></p>
<p><strong>GitHub：</strong> <a href=https://github.com/apache/doris/releases target=_blank rel="noopener noreferrer">https://github.com/apache/doris/releases</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=behavior-changes>Behavior changes<a href=#behavior-changes class=hash-link aria-label="Direct link to Behavior changes" title="Direct link to Behavior changes">​</a></h2>
<p>Since the inverted index is now mature and stable, it can replace the old BITMAP INDEX. Therefore, any newly created <code>BITMAP INDEX</code> will automatically switch to an <code>INVERTED INDEX</code>, while existing <code>BITMAP INDEX</code> will remain unchanged. This entire switching process is transparent to the user, with no changes to writing or querying. Additionally, users can disable this automatic switch by setting the FE configuration <code>enable_create_bitmap_index_as_inverted_index</code> to false. <a href=https://github.com/apache/doris/pull/35528 target=_blank rel="noopener noreferrer">#35528</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=improvements>Improvements<a href=#improvements class=hash-link aria-label="Direct link to Improvements" title="Direct link to Improvements">​</a></h2>
<ul>
<li>
<p>Add Trino JDBC Catalog type mapping for JSON and TIME</p>
</li>
<li>
<p>FE exit when failed to transfer to (non) master to prevent unknown state and too many logs</p>
</li>
<li>
<p>Write audit log while doing drop stats table.</p>
</li>
<li>
<p>Ignore min/max column stats if table is partially analyzed to avoid inefficient query plan</p>
</li>
<li>
<p>Support minus operation for set like <code>set1 - set2</code></p>
</li>
<li>
<p>Improve perfmance of LIKE and REGEXP clause with concat (col, pattern_str), eg. <code>col1 LIKE concat('%', col2, '%')</code></p>
</li>
<li>
<p>Add query options for short circuit queries for upgrade compatibility</p>
</li>
</ul>
<p>See the complete list of improvements and bug fixes on <a href=https://github.com/apache/doris/compare/2.0.10...2.0.11 target=_blank rel="noopener noreferrer">github</a> .</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=credits>Credits<a href=#credits class=hash-link aria-label="Direct link to Credits" title="Direct link to Credits">​</a></h2>
<p>Thanks all who contribute to this release:</p>
<p>@AshinGau, @BePPPower, @BiteTheDDDDt, @ByteYue, @CalvinKirs, @cambyzju, @csun5285, @dataroaring, @eldenmoon, @englefly, @feiniaofeiafei, @Gabriel39, @GoGoWen, @HHoflittlefish777, @hubgeter, @jacktengg, @jackwener, @jeffreys-cat, @Jibing-Li, @kaka11chen, @kobe6th, @LiBinfeng-01, @mongo360, @morningman, @morrySnow, @mrhhsg, @Mryange, @nextdreamblue, @qidaye, @sjyango, @starocean999, @SWJTU-ZhangLei, @w41ter, @wangbo, @wsjz, @wuwenchi, @xiaokang, @XieJiann, @xy720, @yujun777, @Yukang-Lian, @Yulei-Yang, @zclllyybb, @zddr, @zhangstar333, @zhiqiang-hhhh, @zy-kkk, @zzzxl1993</div></div></article><article class=margin-bottom--xl itemprop=blogPost itemscope itemtype=http://schema.org/BlogPosting><div class=markdown itemprop=articleBody><header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href=/blog/>Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class=s-tags><span class=s-tag>Release Notes</span></span></span></div><h2 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop=headline><a itemprop=url href=/blog/release-note-2.1.3/>Apache Doris 2.1.3 just released</a></h2><div class="blog-info text-center flex justify-center text-sm text-black"><span class=authors><span class="s-author text-black">Apache Doris</span></span><time datetime=2024-05-21T00:00:00.000Z itemprop=datePublished class="text-black ml-4">May 21, 2024</time></div></header><div class=markdown itemprop=articleBody><p>Apache Doris 2.1.3 was officially released on May 21, 2024. This version has updated several improvements, including writing data back to Hive, materialized view, permission management and bug fixes. It further enhances the performance and stability of the system.</p>
<p><strong>Quick Download:</strong> <a href=https://doris.apache.org/download/ target=_blank rel="noopener noreferrer">https://doris.apache.org/download/</a></p>
<p><strong>GitHub Release:</strong> <a href=https://github.com/apache/doris/releases target=_blank rel="noopener noreferrer">https://github.com/apache/doris/releases</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=new-features>New features<a href=#new-features class=hash-link aria-label="Direct link to New features" title="Direct link to New features">​</a></h2>
<p><strong>1. Support writing back data to hive tables via Hive Catalog</strong></p>
<p>Starting from version 2.1.3, Apache Doris supports DDL and DML operations on Hive. Users can directly create libraries and tables in Hive through Apache Doris and write data to Hive tables by executing <code>INSERT INTO</code> statements. This feature allows users to perform complete data query and write operations on Hive through Apache Doris, further simplifying the integrated lakehouse architecture.</p>
<p>Please refer: <a href=https://doris.apache.org/docs/lakehouse/datalake-building/hive-build/ target=_blank rel="noopener noreferrer">https://doris.apache.org/docs/lakehouse/datalake-building/hive-build/</a></p>
<p><strong>2. Support building new asynchronous materialized views on top of existing ones</strong></p>
<p>Users can create new asynchronous materialized views on top of existing ones, directly reusing pre-computed intermediate results for data processing. This simplifies complex aggregation and computation operations, reducing resource consumption and maintenance costs while further accelerating query performance and improving data availability.</p>
<p><strong>3. Support rewriting through nested materialized views</strong></p>
<p>Materialized View (MV) is a database object used to store query results. Now, Apache Doris supports rewriting through nested materialized views, which helps optimize query performance.</p>
<p><strong>4. New <code>SHOW VIEWS</code> statement</strong></p>
<p>The <code>SHOW VIEWS</code> statement can be used to query views in the database, facilitating better management and understanding of view objects in the database.</p>
<p><strong>5. Workload Group supports binding to specific BE nodes</strong></p>
<p>Workload Group can be bound to specific BE nodes, enabling more refined control over query execution to optimize resource usage and improve performance.</p>
<p><strong>6. Broker Load supports compressed JSON format</strong></p>
<p>Broker Load now supports importing compressed JSON format data, significantly reducing bandwidth requirements for data transmission and accelerating data import performance.</p>
<p><strong>7. TRUNCATE Function can use columns as scale parameters</strong></p>
<p>The TRUNCATE function can now accept columns as scale parameters, providing more flexibility when processing numerical data.</p>
<p><strong>8. Add new functions <code>uuid_to_int</code> and <code>int_to_uuid</code></strong></p>
<p>These two functions allow users to convert between UUID and integer, significantly helping in scenarios that require handling UUID data.</p>
<p><strong>9. Add <code>bypass_workload_group</code> session variable to bypass query queue</strong></p>
<p>The <code>bypass_workload_group</code> session variable allows certain queries to bypass the Workload Group queue and execute directly, which is useful for handling critical queries that require quick responses.</p>
<p><strong>10. Add strcmp function</strong></p>
<p>The strcmp function compares two strings and returns their comparison result, simplifying text data processing.</p>
<p><strong>11. Support HLL functions <code>hll_from_base64</code> and <code>hll_to_base64</code></strong></p>
<p>HyperLogLog (HLL) is an algorithm for cardinality estimation. These two functions allow users to decode HLL data from a Base64-encoded string or encode HLL data as a Base64 string, which is very useful for storing and transmitting HLL data.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=improvements>Improvements<a href=#improvements class=hash-link aria-label="Direct link to Improvements" title="Direct link to Improvements">​</a></h2>
<p><strong>1. Replace SipHash with XXHash to improve shuffle performance</strong></p>
<p>Both SipHash and XXHash are hashing functions, but XXHash may provide faster hashing speeds and better performance in certain scenarios. This optimization aims to improve performance during data shuffling by adopting XXHash.</p>
<p><strong>2. Asynchronous materialized views support NULL partition columns in OLAP tables</strong></p>
<p>This enhancement allows asynchronous materialized views to support NULL partition columns in OLAP tables, enhancing data processing flexibility.</p>
<p><strong>3. Limit maximum string length to 1024 when collecting column statistics to control BE memory usage</strong></p>
<p>Limiting the string length when collecting column statistics prevents excessive data from consuming too much BE memory, helping maintain system stability and performance.</p>
<p><strong>4. Support dynamic deletion of Bitmap cache to improve performance</strong></p>
<p>Dynamically deleting no longer needed Bitmap Cache can free up memory and improve system performance.</p>
<p><strong>5. Reduce memory usage during ALTER operations</strong></p>
<p>Reducing memory usage during ALTER operations improves the efficiency of system resource utilization.</p>
<p><strong>6. Support constant folding for complex types</strong></p>
<p>Supports constant folding for Array/Map/Struct complex types.</p>
<p><strong>7. Add support for Variant type in Aggregate Key Model</strong></p>
<p>The Variant data type can store multiple data types. This optimization allows aggregation operations on Variant type data, enhancing the flexibility of semi-structured data analysis.</p>
<p><strong>8. Support new inverted index format in CCR</strong></p>
<p><strong>9. Optimize rewriting performance for nested materialized views</strong></p>
<p><strong>10. Support decimal256 type in row-based storage format</strong></p>
<p>Supporting the decimal256 type in row-based storage extends the system's ability to handle high-precision numerical data.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=behavior-changes>Behavior changes<a href=#behavior-changes class=hash-link aria-label="Direct link to Behavior changes" title="Direct link to Behavior changes">​</a></h2>
<p><strong>1. Authorization</strong></p>
<ul>
<li>
<p><strong>Grant_priv permission changes</strong>: <code>Grant_priv</code> can no longer be arbitrarily granted. When performing a <code>GRANT</code> operation, the user not only needs to have <code>Grant_priv</code> but also the permissions to be granted. For example, to grant <code>SELECT</code> permission on <code>table1</code>, the user needs both <code>GRANT</code> permission and <code>SELECT</code> permission on <code>table1</code>, enhancing security and consistency in permission management.</p>
</li>
<li>
<p><strong>Workload group and resource usage_priv</strong>: <code>Usage_priv</code> for Workload Group and Resource is no longer global but limited to Resource and Workload Group, making permission granting and usage more specific.</p>
</li>
<li>
<p><strong>Authorization for operations</strong>: Operations that were previously unauthorized now have corresponding authorizations for more detailed and comprehensive operational permission control.</p>
</li>
</ul>
<p><strong>2. LOG directory configuration</strong></p>
<p>The log directory configuration for FE and BE now uniformly uses the <code>LOG_DIR</code> environment variable. All other different types of logs will be stored with <code>LOG_DIR</code> as the root directory. To maintain compatibility between versions, the previous configuration item <code>sys_log_dir</code> can still be used.</p>
<p><strong>3. S3 Table Function (TVF)</strong></p>
<p>Due to issues with correctly recognizing or processing S3 URLs in certain cases, the parsing logic for object storage paths has been refactored. For file paths in S3 table functions, the <code>force_parsing_by_standard_uri</code> parameter needs to be passed to ensure correct parsing.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=upgrade-issues>Upgrade Issues<a href=#upgrade-issues class=hash-link aria-label="Direct link to Upgrade Issues" title="Direct link to Upgrade Issues">​</a></h2>
<p>Since many users use certain keywords as column names or attribute values, the following keywords have been set as non-reserved, allowing users to use them as identifiers.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=bug-fixes>Bug fixes<a href=#bug-fixes class=hash-link aria-label="Direct link to Bug fixes" title="Direct link to Bug fixes">​</a></h2>
<p><strong>1. Fix no data error when reading Hive tables on Tencent Cloud COSN</strong></p>
<p>Resolved the no data error that could occur when reading Hive tables on Tencent Cloud COSN, enhancing compatibility with Tencent Cloud storage services.</p>
<p><strong>2. Fix incorrect results returned by <code>milliseconds_diff</code> function</strong></p>
<p>Fixed an issue where the <code>milliseconds_diff</code> function returned incorrect results in some cases, ensuring the accuracy of time difference calculations.</p>
<p><strong>3. User-defined variables should be rorwarded to the Master node</strong></p>
<p>Ensured that user-defined variables are correctly passed to the Master node for consistency and correct execution logic across the entire system.</p>
<p><strong>4. Fix Schema Change issues when adding complex type columns</strong></p>
<p>Resolved Schema Change issues that could arise when adding complex type columns, ensuring the correctness of Schema Changes.</p>
<p><strong>5. Fix data loss issue in Routine Load when FE Master node changes</strong></p>
<p><code>Routine Load</code> is often used to subscribe to Kafka message queues. This fix addresses potential data loss issues that may occur during FE Master node changes.</p>
<p><strong>6. Fix Routine Load failure when Workload Group cannot be found</strong></p>
<p>Resolved an issue where <code>Routine Load</code> would fail if the specified Workload Group could not be found.</p>
<p><strong>7. Support column string64 to avoid join failures when string size overflows unit32</strong></p>
<p>In some cases, string sizes may exceed the unit32 limit. Supporting the <code>string64</code> type ensures correct execution of string JOIN operations.</p>
<p><strong>8. Allow Hadoop users to create Paimon Catalog</strong></p>
<p>Permitted authorized Hadoop users to create Paimon Catalogs.</p>
<p><strong>9. Fix <code>function_ipxx_cidr</code> function issues with constant parameters</strong></p>
<p>Resolved problems with the <code>function_ipxx_cidr</code> function when handling constant parameters, ensuring the correctness of function execution.</p>
<p><strong>10. Fix file download errors when restoring using HDFS</strong></p>
<p>Resolved "failed to download" errors encountered during data restoration using HDFS, ensuring the accuracy and reliability of data recovery.</p>
<p><strong>11. Fix column permission issues related to hidden columns</strong></p>
<p>In some cases, permission settings for hidden columns may be incorrect. This fix ensures the correctness and security of column permission settings.</p>
<p><strong>12. Fix issue where Arrow Flight cannot obtain the correct IP in K8s deployments</strong></p>
<p>This fix resolves an issue where Arrow Flight cannot correctly obtain the IP address in Kubernetes deployment environments.</div></div></article><article class=margin-bottom--xl itemprop=blogPost itemscope itemtype=http://schema.org/BlogPosting><div class=markdown itemprop=articleBody><header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href=/blog/>Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class=s-tags><span class=s-tag>Release Notes</span></span></span></div><h2 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop=headline><a itemprop=url href=/blog/release-note-2.0.10/>Apache Doris version 2.0.10 has been released</a></h2><div class="blog-info text-center flex justify-center text-sm text-black"><span class=authors><span class="s-author text-black">Apache Doris</span></span><time datetime=2024-05-16T00:00:00.000Z itemprop=datePublished class="text-black ml-4">May 16, 2024</time></div></header><div class=markdown itemprop=articleBody><p>Thanks to our community users and developers, about 83 improvements and bug fixes have been made in Doris 2.0.10 version.</p>
<p><strong>Quick Download:</strong> <a href=https://doris.apache.org/download/ target=_blank rel="noopener noreferrer">https://doris.apache.org/download/</a></p>
<p><strong>GitHub：</strong> <a href=https://github.com/apache/doris/releases target=_blank rel="noopener noreferrer">https://github.com/apache/doris/releases</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=improvements>Improvements<a href=#improvements class=hash-link aria-label="Direct link to Improvements" title="Direct link to Improvements">​</a></h2>
<ul>
<li>
<p>This enhancement introduces the <code>read_only</code> and <code>super_read_only</code> variables to the database system, ensuring compatibility with MySQL's read-only modes.</p>
</li>
<li>
<p>When the check status is not IO_ERROR, the disk path should not be added to the broken list. This ensures that only disks with actual I/O errors are marked as broken.</p>
</li>
<li>
<p>When performing a Create Table As Select (CTAS) operation from an external table, convert the <code>VARCHAR</code> column to <code>STRING</code> type.</p>
</li>
<li>
<p>Support mapping Paimon column type "ROW" to Doris type "STRUCT"</p>
</li>
<li>
<p>Choose disk tolerate with little skew when creating tablet</p>
</li>
<li>
<p>Write editlog to <code>set replica drop</code> to avoid confusing status on follower FE</p>
</li>
<li>
<p>Make the schema change memory space adaptive to avoid memory over limit</p>
</li>
<li>
<p>Inverted index 'unicode' tokenizer supports configuration to exclude stop words</p>
</li>
</ul>
<p>See the complete list of improvements and bug fixes on <a href=https://github.com/apache/doris/compare/2.0.9...2.0.10 target=_blank rel="noopener noreferrer">GitHub</a> .</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=credits>Credits<a href=#credits class=hash-link aria-label="Direct link to Credits" title="Direct link to Credits">​</a></h2>
<p>Thanks to all who contributed to this release</p>
<p>@airborne12, @BePPPower, @ByteYue, @CalvinKirs, @cambyzju, @csun5285, @dataroaring, @deardeng, @DongLiang-0, @eldenmoon, @felixwluo, @HappenLee, @hubgeter, @jackwener, @kaijchen, @kaka11chen, @Lchangliang, @liaoxin01, @LiBinfeng-01, @luennng, @morningman, @morrySnow, @Mryange, @nextdreamblue, @qidaye, @starocean999, @suxiaogang223, @SWJTU-ZhangLei, @w41ter, @xiaokang, @xy720, @yujun777, @Yukang-Lian, @zhangstar333, @zxealous, @zy-kkk, @zzzxl1993</div></div></article><article class=margin-bottom--xl itemprop=blogPost itemscope itemtype=http://schema.org/BlogPosting><div class=markdown itemprop=articleBody><header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href=/blog/>Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class=s-tags><span class=s-tag>Release Notes</span></span></span></div><h2 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop=headline><a itemprop=url href=/blog/release-note-2.0.9/>Apache Doris version 2.0.9 has been released</a></h2><div class="blog-info text-center flex justify-center text-sm text-black"><span class=authors><span class="s-author text-black">Apache Doris</span></span><time datetime=2024-04-23T00:00:00.000Z itemprop=datePublished class="text-black ml-4">April 23, 2024</time></div></header><div class=markdown itemprop=articleBody><p>Thanks to our community users and developers, about 68 improvements and bug fixes have been made in Doris 2.0.9 version.</p>
<ul>
<li>
<p><strong>Quick Download</strong> : <a href=https://doris.apache.org/download/ target=_blank rel="noopener noreferrer">https://doris.apache.org/download/</a></p>
</li>
<li>
<p><strong>GitHub</strong> : <a href=https://github.com/apache/doris/releases target=_blank rel="noopener noreferrer">https://github.com/apache/doris/releases</a></p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=1-behavior-changes>1 Behavior changes<a href=#1-behavior-changes class=hash-link aria-label="Direct link to 1 Behavior changes" title="Direct link to 1 Behavior changes">​</a></h2>
<p>NA</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=2-new-features>2 New features<a href=#2-new-features class=hash-link aria-label="Direct link to 2 New features" title="Direct link to 2 New features">​</a></h2>
<ul>
<li>
<p>Support predicate apprear both on key and value mv column</p>
</li>
<li>
<p>Support mv with <code>bitmap_union(bitmap_from_array())</code></p>
</li>
<li>
<p>Add a FE config to force replicate allocation for OLAP tables in the cluster</p>
</li>
<li>
<p>Support date literal support timezone in new optimizer Nereids</p>
</li>
<li>
<p>Support slop in fulltext search <code>match_phrase</code> to specify word distence</p>
</li>
<li>
<p>Show index id in <code>SHOW PROC INDEXES</code></p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=3-improvements>3 Improvements<a href=#3-improvements class=hash-link aria-label="Direct link to 3 Improvements" title="Direct link to 3 Improvements">​</a></h2>
<ul>
<li>
<p>Sdd a secondary argument in <code>first_value</code> / <code>last_value</code> to ignore NULL values</p>
</li>
<li>
<p>the offset params in <code>LEAD</code>/ <code>LAG</code> function could use 0</p>
</li>
<li>
<p>Adjust priority of materialized view match rule</p>
</li>
<li>
<p>TopN opt reads only limit number of records for better performance</p>
</li>
<li>
<p>Add profile for delete_bitmap get_agg function</p>
</li>
<li>
<p>Refine the Meta cache to get better performance</p>
</li>
<li>
<p>Add FE config <code>autobucket_max_buckets</code></p>
</li>
</ul>
<p>See the complete list of improvements and bug fixes on <a href=https://github.com/apache/doris/compare/2.0.8...2.0.9 target=_blank rel="noopener noreferrer">GitHub</a> .</div></div></article><article class=margin-bottom--xl itemprop=blogPost itemscope itemtype=http://schema.org/BlogPosting><div class=markdown itemprop=articleBody><header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href=/blog/>Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class=s-tags><span class=s-tag>Release Notes</span></span></span></div><h2 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop=headline><a itemprop=url href=/blog/release-note-2.1.2/>Apache Doris 2.1.2 just released</a></h2><div class="blog-info text-center flex justify-center text-sm text-black"><span class=authors><span class="s-author text-black">Apache Doris</span></span><time datetime=2024-04-12T00:00:00.000Z itemprop=datePublished class="text-black ml-4">April 12, 2024</time></div></header><div class=markdown itemprop=articleBody><p>Dear community, Apache Doris 2.1.2 has been officially released on April 12, 2024. This version submits several enhancements and bug fixes to further improve the performance and stability.</p>
<p><strong>Quick Download:</strong> <a href=https://doris.apache.org/download/ target=_blank rel="noopener noreferrer">https://doris.apache.org/download/</a></p>
<p><strong>GitHub Release:</strong> <a href=https://github.com/apache/doris/releases target=_blank rel="noopener noreferrer">https://github.com/apache/doris/releases</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=behavior-changes>Behavior changes<a href=#behavior-changes class=hash-link aria-label="Direct link to Behavior changes" title="Direct link to Behavior changes">​</a></h2>
<ol>
<li>Set the default value of the <code>data_consistence</code> property of EXPORT to partition to make export more stable during load.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/32830 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/32830</a></li>
</ul>
<ol start=2>
<li>
<p>Some of MySQL Connector (eg, dotnet MySQL.Data) rely on variable's column type to make connection.</p>
<p>eg, select @<a href=/blog/tags/release-notes/[@autocommit](https://github.com/autocommit)/>@autocommit</a> should with column type BIGINT, not BIT, otherwise it will throw error. So we change column type of @<a href=https://github.com/autocommit target=_blank rel="noopener noreferrer">@autocommit</a> to BIGINT.</p>
</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/33282 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/33282</a></li>
</ul>
<ol start=3>
<li>Auto Partition syntax changes, see <a href=https://doris.apache.org/zh-CN/docs/table-design/data-partition#%E8%87%AA%E5%8A%A8%E5%88%86%E5%8C%BA target=_blank rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/table-design/data-partition#%E8%87%AA%E5%8A%A8%E5%88%86%E5%8C%BA</a></li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/32737 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/32737</a></li>
</ul>
<ol start=4>
<li>Auto Partition prohibits the simultaneous use of Dynamic Partition on a single table.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/33736 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/33736</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=upgrade-problem>Upgrade problem<a href=#upgrade-problem class=hash-link aria-label="Direct link to Upgrade problem" title="Direct link to Upgrade problem">​</a></h2>
<ol>
<li>Normal workload group is not created when upgrade from 2.0 or other old versions.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/33197 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/33197</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=new-features>New features<a href=#new-features class=hash-link aria-label="Direct link to New features" title="Direct link to New features">​</a></h2>
<ol>
<li>Add processlist table in information_schema database, users could use this table to query active connections.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/32511 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/32511</a></li>
</ul>
<ol start=2>
<li>Add a new table valued function <code>LOCAL</code> to allow access file system like shared storage.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris-website/pull/494 target=_blank rel="noopener noreferrer">https://github.com/apache/doris-website/pull/494</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=improvements>Improvements<a href=#improvements class=hash-link aria-label="Direct link to Improvements" title="Direct link to Improvements">​</a></h2>
<ol>
<li>Skip some useless process to make graceful stop more quickly in K8s env.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/33212 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/33212</a></li>
</ul>
<ol start=2>
<li>Add rollup table name in profile to help find the mv selection problem.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/33137 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/33137</a></li>
</ul>
<ol start=3>
<li>Add test connection function to DB2 database to allow user check the connection when create DB2 Catalog.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/33335 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/33335</a></li>
</ul>
<ol start=4>
<li>Add DNS Cache for FQDN to accelerate the connect process among BEs in K8s env.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/32869 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/32869</a></li>
</ul>
<ol start=5>
<li>Refresh external table's rowcount async to make the query plan more stable.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/32997 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/32997</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=bug-fixes>Bug fixes<a href=#bug-fixes class=hash-link aria-label="Direct link to Bug fixes" title="Direct link to Bug fixes">​</a></h2>
<ol>
<li>Fix Iceberg Catalog of HMS and Hadoop do not support Iceberg properties like "io.manifest.cache-enabled" to enable manifest cache in Iceberg.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/33113 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/33113</a></li>
</ul>
<ol start=2>
<li>The offset params in <code>LEAD</code>/<code>LAG</code> function could use 0 as offset.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/33174 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/33174</a></li>
</ul>
<ol start=3>
<li>Fix some timeout issues with load.</li>
</ol>
<ul>
<li>
<p><a href=https://github.com/apache/doris/pull/33077 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/33077</a></p>
</li>
<li>
<p><a href=https://github.com/apache/doris/pull/33260 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/33260</a></p>
</li>
</ul>
<ol start=4>
<li>Fix core problem related with <code>ARRAY</code>/<code>MAP</code>/<code>STRUCT</code> compaction process.</li>
</ol>
<ul>
<li>
<p><a href=https://github.com/apache/doris/pull/33130 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/33130</a></p>
</li>
<li>
<p><a href=https://github.com/apache/doris/pull/33295 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/33295</a></p>
</li>
</ul>
<ol start=5>
<li>Fix runtime filter wait timeout.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/33369 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/33369</a></li>
</ul>
<ol start=6>
<li>Fix <code>unix_timestamp</code> core for string input in auto partition.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/32871 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/32871</a></li>
</ul></div></div></article><article class=margin-bottom--xl itemprop=blogPost itemscope itemtype=http://schema.org/BlogPosting><div class=markdown itemprop=articleBody><header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href=/blog/>Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class=s-tags><span class=s-tag>Release Notes</span></span></span></div><h2 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop=headline><a itemprop=url href=/blog/release-note-2.0.8/>Apache Doris 2.0.8 just released</a></h2><div class="blog-info text-center flex justify-center text-sm text-black"><span class=authors><span class="s-author text-black">Apache Doris</span></span><time datetime=2024-04-09T00:00:00.000Z itemprop=datePublished class="text-black ml-4">April 9, 2024</time></div></header><div class=markdown itemprop=articleBody><p>Thanks to our community users and developers, about 65 improvements and bug fixes have been made in Doris 2.0.8 version.</p>
<ul>
<li>
<p><strong>Quick Download</strong> : <a href=https://doris.apache.org/download/ target=_blank rel="noopener noreferrer">https://doris.apache.org/download/</a></p>
</li>
<li>
<p><strong>GitHub</strong> : <a href=https://github.com/apache/doris/releases target=_blank rel="noopener noreferrer">https://github.com/apache/doris/releases</a></p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=behavior-changes>Behavior changes<a href=#behavior-changes class=hash-link aria-label="Direct link to Behavior changes" title="Direct link to Behavior changes">​</a></h2>
<p>The <code>ADMIN SHOW</code> statement can not be executed with high version of MySQL 8.x jdbc driver. So rename these statement, remove the <code>ADMIN</code> keywords.</p>
<ul>
<li><a href=https://github.com/apache/doris/pull/29492 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/29492</a></li>
</ul>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#F8F8F2;--prism-background-color:#282A36><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_e6Vv><span class=token-line style=color:#F8F8F2><span class="token plain">ADMIN </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">SHOW</span><span class="token plain"> CONFIG </span><span class="token operator">-</span><span class="token operator">></span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">SHOW</span><span class="token plain"> CONFIG</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">ADMIN </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">SHOW</span><span class="token plain"> REPLICA </span><span class="token operator">-</span><span class="token operator">></span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">SHOW</span><span class="token plain"> REPLICA</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">ADMIN DIAGNOSE TABLET </span><span class="token operator">-</span><span class="token operator">></span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">SHOW</span><span class="token plain"> TABLET DIAGNOSIS</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">ADMIN </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">SHOW</span><span class="token plain"> TABLET </span><span class="token operator">-</span><span class="token operator">></span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">SHOW</span><span class="token plain"> TABLET</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=new-features>New features<a href=#new-features class=hash-link aria-label="Direct link to New features" title="Direct link to New features">​</a></h2>
<p>N/A</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=improvement>Improvement<a href=#improvement class=hash-link aria-label="Direct link to Improvement" title="Direct link to Improvement">​</a></h2>
<ul>
<li>
<p>Make Inverted Index work with TopN opt in Nereids</p>
</li>
<li>
<p>Limit the max string length to 1024 while collecting column stats to control BE memory usage</p>
</li>
<li>
<p>JDBC Catalog close when JDBC client is not empty</p>
</li>
<li>
<p>Accept all Iceberg database and do not check the name format of database</p>
</li>
<li>
<p>Refresh external table's rowcount async to avoid cache miss and unstable query plan</p>
</li>
<li>
<p>Simplify the isSplitable method of hive external table to avoid too many hadoop metrics</p>
</li>
</ul>
<p>See the complete list of improvements and bug fixes on <a href=https://github.com/apache/doris/compare/2.0.7...2.0.8 target=_blank rel="noopener noreferrer">GitHub</a> .</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=credits>Credits<a href=#credits class=hash-link aria-label="Direct link to Credits" title="Direct link to Credits">​</a></h2>
<p>Thanks all who contribute to this release:</p>
<p>924060929,  AcKing-Sam, amorynan, AshinGau, BePPPower, BiteTheDDDDt, ByteYue, cambyzju,  dongsilun, eldenmoon, feiniaofeiafei, gnehil, Jibing-Li, liaoxin01, luwei16,  morningman, morrySnow, mrhhsg, Mryange, nextdreamblue, platoneko,  starocean999, SWJTU-ZhangLei, wuwenchi, xiaokang, xinyiZzz, Yukang-Lian,  Yulei-Yang, zclllyybb, zddr, zhangstar333, zhiqiang-hhhh, ziyanTOP, zy-kkk,  zzzxl1993</div></div></article><article class=margin-bottom--xl itemprop=blogPost itemscope itemtype=http://schema.org/BlogPosting><div class=markdown itemprop=articleBody><header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href=/blog/>Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class=s-tags><span class=s-tag>Release Notes</span></span></span></div><h2 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop=headline><a itemprop=url href=/blog/release-note-2.1.1/>Apache Doris 2.1.1 just released</a></h2><div class="blog-info text-center flex justify-center text-sm text-black"><span class=authors><span class="s-author text-black">Apache Doris</span></span><time datetime=2024-04-03T00:00:00.000Z itemprop=datePublished class="text-black ml-4">April 3, 2024</time></div></header><div class=markdown itemprop=articleBody><p>Dear community members, Apache Doris 2.1.1 has been officially released on April 3, 2024, with several enhancements and bug fixes based on 2.1.0, enabling smoother user experience.</p>
<ul>
<li>
<p><strong>Quick Download:</strong> <a href=https://doris.apache.org/download/ target=_blank rel="noopener noreferrer">https://doris.apache.org/download/</a></p>
</li>
<li>
<p><strong>GitHub：</strong> <a href=https://github.com/apache/doris/releases target=_blank rel="noopener noreferrer">https://github.com/apache/doris/releases</a></p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=behavior-changes>Behavior changes<a href=#behavior-changes class=hash-link aria-label="Direct link to Behavior changes" title="Direct link to Behavior changes">​</a></h2>
<ol>
<li>Change float type output format to improve float type serialization performance.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/32049 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/32049</a></li>
</ul>
<ol start=2>
<li>Change system table value functions active_queries(), workload_groups() to system tables.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/32314 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/32314</a></li>
</ul>
<ol start=3>
<li>Disable show query/load profile stmt because there are not so many developers use it and the pipeline and pipelinex engine not support it.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/32467 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/32467</a></li>
</ul>
<ol start=4>
<li>Upgrade arrow flight version to 15.0.2 to fix some bugs, so that please use ADBC 15.0.2 version to access Doris.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/32827 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/32827</a>.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=upgrade-problem>Upgrade Problem<a href=#upgrade-problem class=hash-link aria-label="Direct link to Upgrade Problem" title="Direct link to Upgrade Problem">​</a></h2>
<ol>
<li>BE will core when rolling pgrade problem from 2.0.x to 2.1.x.</li>
</ol>
<ul>
<li>
<p><a href=https://github.com/apache/doris/pull/32672 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/32672</a></p>
</li>
<li>
<p><a href=https://github.com/apache/doris/pull/32444 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/32444</a></p>
</li>
<li>
<p><a href=https://github.com/apache/doris/pull/32162 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/32162</a></p>
</li>
</ul>
<ol start=2>
<li>JDBC Catalog will have query errors when rolling grade rom 2.0.x to 2.1.x.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/32618 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/32618</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=new-features>New Features<a href=#new-features class=hash-link aria-label="Direct link to New Features" title="Direct link to New Features">​</a></h2>
<ol>
<li>Enable column auth by default.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/32659 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/32659</a></li>
</ul>
<ol start=2>
<li>Get correct cores for pipeline and pipelinex engine when running within docker or k8s.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/32370 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/32370</a></li>
</ul>
<ol start=3>
<li>Support read parquet int96 type.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/32394 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/32394</a></li>
</ul>
<ol start=4>
<li>Enable proxy protocol to support IP transparency. Using this protocol, IP transparency for load balancing can be achieved, so that after load balancing, Doris can still obtain the client's real IP and implement permission control such as whitelisting.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/32338/files target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/32338/files</a></li>
</ul>
<ol start=5>
<li>Add workload group queue related columns for active_queries system table. Uses could use this system to monitor the workload queue usage.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/32259 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/32259</a></li>
</ul>
<ol start=6>
<li>Add new system table backend_active_tasks to monitor the realtime query statics on every BE.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/31945 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/31945</a></li>
</ul>
<ol start=7>
<li>Add ipv4 and ipv6 support for spark-doris connector.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/32240 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/32240</a></li>
</ul>
<ol start=8>
<li>Add inverted index support for CCR.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/32101 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/32101</a></li>
</ul>
<ol start=9>
<li>Support select experimental session variable.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/31837 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/31837</a></li>
</ul>
<ol start=10>
<li>Support materialized view with bitmap_union(bitmap_from_array()) case.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/31962 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/31962</a></li>
</ul>
<ol start=11>
<li>Support partition prune for <code>HIVE_DEFAULT_PARTITION</code>.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/31736 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/31736</a></li>
</ul>
<ol start=12>
<li>Support function in set variable statement.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/32492 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/32492</a></li>
</ul>
<ol start=13>
<li>Support arrow serialization for varint type.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/32809 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/32809</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=improvements>Improvements<a href=#improvements class=hash-link aria-label="Direct link to Improvements" title="Direct link to Improvements">​</a></h2>
<ol>
<li>Auto resume routine load when be restart or during upgrade. And keep the routine load stable.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/32239 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/32239</a></li>
</ul>
<ol start=2>
<li>Routine Load: optimize allocate task to be algorithm for load balance.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/32021 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/32021</a></li>
</ul>
<ol start=3>
<li>Spark Load: update spark version for spark load to resolve cve problem.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/30368 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/30368</a></li>
</ul>
<ol start=4>
<li>Skip cooldown if the tablet is dropped.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/32079 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/32079</a></li>
</ul>
<ol start=5>
<li>Support using workload group to manage routine load.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/31671 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/31671</a></li>
</ul>
<ol start=6>
<li>[MTMV ]Improve the performance for query rewritting by materialized view.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/31886 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/31886</a></li>
</ul>
<ol start=7>
<li>Reduce jvm heap memory consumed by profiles of BrokerLoadJob.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/31985 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/31985</a></li>
</ul>
<ol start=8>
<li>Imporve the high QPS query by speed up PartitionPrunner.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/31970 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/31970</a></li>
</ul>
<ol start=9>
<li>Reduce duplicated memory consumption for column name and column path for schema cache.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/31141 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/31141</a></li>
</ul>
<ol start=10>
<li>Support more join types for query rewriting by materialized view such as INNER JOIN, LEFT OUTER JOIN, RIGHT OUTER JOIN, FULL OUTER JOIN, LEFT SEMI JOIN, RIGHT SEMI JOIN, LEFT ANTI JOIN, RIGHT ANTI JOIN.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/32909 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/32909</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=bug-fixes>Bug fixes<a href=#bug-fixes class=hash-link aria-label="Direct link to Bug fixes" title="Direct link to Bug fixes">​</a></h2>
<ol>
<li>Do not push down topn-filter through right/full outer join if the first orderkey is nulls first.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/32633 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/32633</a></li>
</ul>
<ol start=2>
<li>Fix memory leak in Java UDF.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/32630 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/32630</a></li>
</ul>
<ol start=3>
<li>If some odbc tables use the same resource, and restore not all odbc tables, it will not retain the resource.
and check some conf for backup/restore</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/31989 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/31989</a></li>
</ul>
<ol start=4>
<li>Fold constant will core for variant type.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/32265 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/32265</a></li>
</ul>
<ol start=5>
<li>Routine load will pause when transaction fail in some cases.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/32638 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/32638</a></li>
</ul>
<ol start=6>
<li>the result of left semi join with empty right side should be false instead of null.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/32477 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/32477</a></li>
</ul>
<ol start=7>
<li>Fix core when build inverted index for a new column with no data.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/32669 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/32669</a></li>
</ul>
<ol start=8>
<li>Fix be core caused by null-safe-equal join.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/32623 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/32623</a></li>
</ul>
<ol start=9>
<li>Partial update: fix data correctness risk when load delete sign data into a table with sequence col.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/32574 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/32574</a></li>
</ul>
<ol start=10>
<li>Select outfile: Fix the column type mapping in the orc/parquet file format.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/32281 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/32281</a></li>
</ul>
<ol start=11>
<li>Fix BE core during restore stage.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/32489 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/32489</a></li>
</ul>
<ol start=12>
<li>Use array_agg func after other agg func like count, sum, may make be core.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/32387 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/32387</a></li>
</ul>
<ol start=13>
<li>Variant type should always nullable or there will some bugs.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/32248 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/32248</a></li>
</ul>
<ol start=14>
<li>Fix the bug of handling empty blocks in schema change.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/32396 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/32396</a></li>
</ul>
<ol start=15>
<li>Fix BE will core when use json_length() in some cases.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/32145 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/32145</a></li>
</ul>
<ol start=16>
<li>Fix error when query iceberg table using date cast predicate</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/32194 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/32194</a></li>
</ul>
<ol start=17>
<li>Fix some bugs when build inverted index for variant type.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/31992 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/31992</a></li>
</ul>
<ol start=18>
<li>Wrong result of two or more map_agg functions in query.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/31928 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/31928</a></li>
</ul>
<ol start=19>
<li>Fix wrong result of money_format function.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/31883 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/31883</a></li>
</ul>
<ol start=20>
<li>Fix connection hang after too many connections.</li>
</ol>
<ul>
<li><a href=https://github.com/apache/doris/pull/31594 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/31594</a></li>
</ul></div></div></article><article class=margin-bottom--xl itemprop=blogPost itemscope itemtype=http://schema.org/BlogPosting><div class=markdown itemprop=articleBody><header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href=/blog/>Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class=s-tags><span class=s-tag>Release Notes</span></span></span></div><h2 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop=headline><a itemprop=url href=/blog/release-note-2.0.7/>Apache Doris 2.0.7 just released</a></h2><div class="blog-info text-center flex justify-center text-sm text-black"><span class=authors><span class="s-author text-black">Apache Doris</span></span><time datetime=2024-03-26T00:00:00.000Z itemprop=datePublished class="text-black ml-4">March 26, 2024</time></div></header><div class=markdown itemprop=articleBody><p>Thanks to our community users and developers, about 80 improvements and bug fixes have been made in Doris 2.0.7 version.</p>
<p><strong>Quick Download:</strong> <a href=https://doris.apache.org/download/ target=_blank rel="noopener noreferrer">https://doris.apache.org/download/</a></p>
<p><strong>GitHub：</strong> <a href=https://github.com/apache/doris/releases target=_blank rel="noopener noreferrer">https://github.com/apache/doris/releases</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=behavior-changes>Behavior changes<a href=#behavior-changes class=hash-link aria-label="Direct link to Behavior changes" title="Direct link to Behavior changes">​</a></h2>
<ul>
<li>
<p><code>round</code> function defaults to rounding normally as MySQL, eg. round(5/2) return 3 instead of 2.</p>
<ul>
<li><a href=https://github.com/apache/doris/pull/31583 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/31583</a></li>
</ul>
</li>
<li>
<p><code>round</code> datetime with scale from string literal as MySQL, eg. round '2023-10-12 14:31:49.666' to '2023-10-12 14:31:50' .</p>
<ul>
<li><a href=https://github.com/apache/doris/pull/27965 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/27965</a></li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=new-features>New features<a href=#new-features class=hash-link aria-label="Direct link to New features" title="Direct link to New features">​</a></h2>
<ul>
<li>
<p>Support make miss slot as null alias when converting outer join to anti join to speed up query</p>
<ul>
<li><a href=https://github.com/apache/doris/pull/31854 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/31854</a></li>
</ul>
</li>
<li>
<p>Enable proxy protocol to support IP transparency for Nginx and HAProxy.</p>
<ul>
<li><a href=https://github.com/apache/doris/pull/32338 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/32338</a></li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=improvements>Improvements<a href=#improvements class=hash-link aria-label="Direct link to Improvements" title="Direct link to Improvements">​</a></h2>
<ul>
<li>
<p>Add DEFAULT_ENCRYPTION column in <code>information_schema</code> table and add <code>processlist</code> table for better compatibility for BI tools</p>
</li>
<li>
<p>Automatically test connectivity by default when creating a JDBC Catalog.</p>
</li>
<li>
<p>Enhance auto resume to keep routine load stable</p>
</li>
<li>
<p>Use lowercase by default for Chinese tokenizer in inverted index</p>
</li>
<li>
<p>Add error msg if exceeded maximum default value in repeat function</p>
</li>
<li>
<p>Skip hidden file and dir in Hive table</p>
</li>
<li>
<p>Reduce file meta cache size and disable cache for some cases to avoid OOM</p>
</li>
<li>
<p>Reduce jvm heap memory consumed by profiles of BrokerLoadJob</p>
</li>
<li>
<p>Remove sort which is under table sink to speed up query like <code>INSERT INTO t1 SELECT * FROM t2 ORDER BY k</code>.</p>
</li>
</ul>
<p>See the complete list of improvements and bug fixes on <a href=https://github.com/apache/doris/compare/2.0.6...2.0.7 target=_blank rel="noopener noreferrer">github</a> .</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=4-credits>4 Credits<a href=#4-credits class=hash-link aria-label="Direct link to 4 Credits" title="Direct link to 4 Credits">​</a></h2>
<p>Thanks all who contribute to this release:</p>
<p>924060929,airborne12,amorynan,ByteYue,dataroaring,deardeng,feiniaofeiafei,felixwluo,freemandealer,gavinchou,hello-stephen,HHoflittlefish777,jacktengg,jackwener,jeffreys-cat,Jibing-Li,KassieZ,LiBinfeng-01,luwei16,morningman,mrhhsg,Mryange,nextdreamblue,platoneko,qidaye,rohitrs1983,seawinde,shuke987,starocean999,SWJTU-ZhangLei,w41ter,wsjz,wuwenchi,xiaokang,XieJiann,XuJianxu,yujun777,Yulei-Yang,zhangstar333,zhiqiang-hhhh,zy-kkk,zzzxl1993</div></div></article><article class=margin-bottom--xl itemprop=blogPost itemscope itemtype=http://schema.org/BlogPosting><div class=markdown itemprop=articleBody><header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href=/blog/>Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class=s-tags><span class=s-tag>Release Notes</span></span></span></div><h2 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop=headline><a itemprop=url href=/blog/release-note-2.1.0/>Another big leap: Apache Doris 2.1.0 is released</a></h2><div class="blog-info text-center flex justify-center text-sm text-black"><span class=authors><span class="s-author text-black">Apache Doris</span></span><time datetime=2024-03-12T00:00:00.000Z itemprop=datePublished class="text-black ml-4">March 12, 2024</time></div></header><div class=markdown itemprop=articleBody><p>Dear Apache Doris community, we are thrilled to announce the advent of Apache Doris 2.1.0. In this version, you can expect:</p>
<ul>
<li>
<p><strong>Higher out-of-the-box query performance</strong>: 100% faster speed proven by TPC-DS 1TB benchmark tests.</p>
</li>
<li>
<p><strong>Improved data lake analytics capabilities</strong>: 4~6 times faster than Trino and Spark, compatibility with various SQL dialects for smooth migration, read/write interface based on Arrow Flight for 100 times faster data transfer.</p>
</li>
<li>
<p><strong>Solid support for semi-structured data analysis</strong>: a newly-added Variant data type, support for more IP types, and a more comprehensive suite of analytic functions.</p>
</li>
<li>
<p><strong>Materialized view with multiple tables</strong>: a new feature to accelerate multi-table joins, allowing transparent rewriting, auto refresh, materialized views of external tables, and direct query.</p>
</li>
<li>
<p><strong>Enhanced real-time writing efficiency</strong>: faster data writing at scale powered by AUTO_INCREMENT column, AUTO PARTITION, forward placement of MemTable, and Group Commit.</p>
</li>
<li>
<p><strong>Better workload management</strong>: optimizations of the Workload Group mechanism for higher performance stability and the display of SQL resource consumption in the runtime.</p>
</li>
</ul>
<p>We appreciate the 237 contributors who made nearly 6000 commits in total to the Apache Doris project, and the nearly 100 enterprise users who provided valuable feedback. We will keep aiming for the stars with our agile release planning, and we appreciate your feedback in the <a href=https://doris.apache.org/slack target=_blank rel="noopener noreferrer">Apache Doris developer and user community</a>.</p>
<p><strong>Download from GitHub</strong>: <a href=https://github.com/apache/doris/releases target=_blank rel="noopener noreferrer">https://github.com/apache/doris/releases</a></p>
<p><strong>Download from website</strong>: <a href=https://doris.apache.org/download target=_blank rel="noopener noreferrer">https://doris.apache.org/download</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=higher-performance>Higher performance<a href=#higher-performance class=hash-link aria-label="Direct link to Higher performance" title="Direct link to Higher performance">​</a></h2>
<p>Apache Doris V2.1 makes a big leap in out-of-the-box query performance. It can deliver high performance even for complicated SQL queries without any fine-tuning. TPC-DS 1TB benchmark tests with 1 Frontend and 3 Backends (48C, 192G each) show that:</p>
<ul>
<li>
<p>The total query execution time of V2.1.0 is 245.7s, <strong>up 100%</strong> from the 489.6s of V2.0.5;</p>
</li>
<li>
<p>V2.1 is more than twice as fast as V2.0.5 on one-third of the total 99 SQL queries, and outperforms V2.0.5 on over 80 of the SQL queries;</p>
</li>
<li>
<p>V2.1 delivers better performance in data filtering, sorting, aggregation, multi-table joins, sub-queries, and window function computation.</p>
</li>
</ul>
<p><img decoding=async loading=lazy alt=2.1-Doris-TPC-DS-higher-performance src=/assets/images/2.1-Doris-TPC-DS-best-performance-196cfa22d1783b3e3a367bed4e300dd1.png width=1280 height=675 class=img_ev3q></p>
<p>Meanwhile, we have compared Doris V2.1.0 against many other OLAP systems with the same hardware environment under various data sizes. <strong>Recurring results show that Doris is undoubtedly far ahead</strong>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=smarter-optimizer>Smarter optimizer<a href=#smarter-optimizer class=hash-link aria-label="Direct link to Smarter optimizer" title="Direct link to Smarter optimizer">​</a></h3>
<p>In our last big release, we introduced a new query optimizer that enables fast performance for most use cases without any manual fine-tuning. Now, the V2.1 query optimizer is an upgrade on that basis. It comes with:</p>
<ul>
<li>
<p><strong>More solid infrastructure</strong>: We have improved the statistics-based inference and the cost model that underpin the query optimizer, so it can collect statistical information from a wider range to undertake more complicated optimization tasks.</p>
</li>
<li>
<p><strong>Extended optimization rules</strong>: Absorbing feedback from our many actual use cases, we have improved many frequently used rules (operator pushdown, etc.) and introduced new rules to fit in more scenarios.</p>
</li>
<li>
<p><strong>Enhanced enumeration framework</strong>: Building on Cascades and DPhyper, the V2.1 query optimizer has a clearer enumeration strategy that achieves a better balance between quality and efficiency. For example, we have dialed up the default limit of query plans in the enumeration table from 5 to 8, and then we have sharpened the DPhyper enumeration capabilities to produce better query plans.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=better-heuristic-optimization>Better heuristic optimization<a href=#better-heuristic-optimization class=hash-link aria-label="Direct link to Better heuristic optimization" title="Direct link to Better heuristic optimization">​</a></h3>
<p>In large-scale data analytics or data lake scenarios, it is always challenging and time-consuming to collect statistical information to provide references for query plans. For that, the V2.1 query optimizer, leveraging a combination of heuristic technologies, is able to generate <strong>high-quality query plans without statistical reference</strong>. Meanwhile, the RuntimeFilter is part of the trick. It is now more self-adaptive. It can self-adjust the predicates in expressions during execution, so it can enable higher performance without statistical information.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=parallel-adaptive-scan>Parallel Adaptive Scan<a href=#parallel-adaptive-scan class=hash-link aria-label="Direct link to Parallel Adaptive Scan" title="Direct link to Parallel Adaptive Scan">​</a></h3>
<p>A complex data query will involve large sums of data scanning, during which the scan I/O can be the bottleneck for query execution speed. That's why we have Parallel Scan, which means one scan thread can read multiple tablets (buckets). However, that is highly dependent on the bucket number you set for data partitioning in the first place. If the user has set an inappropriate number of buckets, the scan thread will not be able to work parallelly.</p>
<p>That's why we have adopted Parallel Adaptive Scan in Doris V2.1. What happens is that the tablets are pooled so the scanning process can be divided into a flexible number of threads based on the total number of rows. (The upper limit is 48 threads.) In this way, users no longer have to worry that their query speed might be dragged down by unreasonable bucket numbers.</p>
<p><img decoding=async loading=lazy alt="Parallel Adaptive Scan" src=/assets/images/2.1-doris-parallel-adaptive-scan-ac95c58d6afe58c11121e37ee355685e.png width=1280 height=424 class=img_ev3q></p>
<p>In 2.1 and future versions, we recommend that you set <strong>the number of buckets equal to the total number of disks in the cluster</strong>, in order to fully utilize the I/O resources of the entire cluster.</p>
<div class="theme-admonition theme-admonition-note admonition_Gfwi alert alert--secondary"><div class=admonitionHeading_f1Ed>note</div><div class=admonitionContent_UjKb><p>Parallel Adaptive Scan is currently available for the Duplicate Key model and the Merge-on-Write tables of the Unique Key model. We plan to add it to the Aggregate Key model and the Merge-on-Read tables of the Unique Key model in version 2.1.1.</div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=local-shuffle>Local Shuffle<a href=#local-shuffle class=hash-link aria-label="Direct link to Local Shuffle" title="Direct link to Local Shuffle">​</a></h3>
<p>We have introduced Local Shuffle to prevent uneven data distribution. Benchmark tests show that Local Shuffle in combination with Parallel Adaptive Scan can guarantee fast query performance despite unreasonable bucket number settings upon table creation.</p>
<p>For queries across multiple instances, uneven data distribution can prolong the query execution time. To address data skew across instances on a single backend (BE), we have introduced Local Shuffle in V2.1. It aims to shuffle and distribute data as evenly as possible, thereby accelerating queries. For example, in a typical aggregation query, a Local Shuffle node will redistribute the data evenly across different pipeline tasks, before the data is aggregated.</p>
<p><img decoding=async loading=lazy alt="Local Shuffle" src=/assets/images/2.1-doris-local-shuffle-6f7365d5417f254f369c691827d034eb.png width=1220 height=1280 class=img_ev3q></p>
<p>For a proof of concept, we have simulated unreasonable bucket number settings. Firstly, we use the ClickBench dataset and run flat-table queries with the bucket number being 1 and 16, respectively. Then, we use the TPC-H 100G dataset and run join queries with 1 bucket and 16 buckets in each partition, respectively. Results from the runs show minimal fluctuations, which means the combination of Parallel Adaptive Scan and Local Shuffle is able to guarantee high query performance even with inappropriately sharded or unevenly distributed data.</p>
<p><img decoding=async loading=lazy alt="Clickbench and Local Shuffle" src=/assets/images/2.1-Clickbench-and-Local-shuffle-1b3c08174cf021f9bb10a1b0ea1c3b72.png width=1280 height=701 class=img_ev3q></p>
<div class="theme-admonition theme-admonition-note admonition_Gfwi alert alert--secondary"><div class=admonitionHeading_f1Ed>note</div><div class=admonitionContent_UjKb><p>See the doc: <a href=https://doris.apache.org/docs/query/pipeline/pipeline-x-execution-engine target=_blank rel="noopener noreferrer">https://doris.apache.org/docs/query/pipeline/pipeline-x-execution-engine</a></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=increase-performance-on-arm>Increase performance on ARM<a href=#increase-performance-on-arm class=hash-link aria-label="Direct link to Increase performance on ARM" title="Direct link to Increase performance on ARM">​</a></h2>
<p>V2.1 is specifically adapted to and optimized for ARM architecture. Compared to Doris 2.0.3, it has achieved over 100% performance improvement on multiple test datasets:</p>
<ul>
<li>
<p><strong>ClickBench large flat-table queries</strong>: The execution time of 43 SQL queries for V2.1 adds up to 30.73 seconds, as compared to 102.36 seconds for V2.0.3, representing a <strong>230%</strong> speedup.</p>
</li>
<li>
<p><strong>TPC-H multi-table joins</strong>: The execution time of 22 SQL queries for V2.1 adds up to 90.4 seconds, as compared to 174.8 seconds for V2.0.3, representing a <strong>93%</strong> speedup.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=improved-data-lake-analytics-capabilities>Improved data lake analytics capabilities<a href=#improved-data-lake-analytics-capabilities class=hash-link aria-label="Direct link to Improved data lake analytics capabilities" title="Direct link to Improved data lake analytics capabilities">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=data-lake-analytic-performance>Data lake analytic performance<a href=#data-lake-analytic-performance class=hash-link aria-label="Direct link to Data lake analytic performance" title="Direct link to Data lake analytic performance">​</a></h3>
<p>V2.1 also reaches new heights in data lake analysis. According to TPC-DS benchmark tests (1TB) of Doris V2.1 against Trino V435,</p>
<ul>
<li>
<p>Without caching, Apache Doris is <strong>45% faster than</strong> <strong>Trino</strong>, with their total execution time being 717s and 1296s, respectively. Specifically, Doris outperforms Trino in 80% of the total 99 SQL queries.</p>
</li>
<li>
<p>If you enable file cache, you can expect another 2.2-time speedup from Doris (323s). <strong>That is 4 times the speed of Trino, with a straight win in all 99 SQL queries.</strong></p>
</li>
</ul>
<p>In addition, TPC-DS 10TB benchmark tests show that Apache Doris 2.1 is 4.2 times as fast as Spark 3.5.0 and 6.1 times as Spark 3.3.1.</p>
<p><img decoding=async loading=lazy alt="Data lake analytic performance" src=/assets/images/2.1-doris-TPC-DS-326352a5581f27b587ff6e7d451c0ee4.png width=950 height=550 class=img_ev3q></p>
<p>This is achieved by a series of optimizations in I/O for HDFS and object storage, parquet/ORC file reading, floating-point decompression, predicate pushdown, caching, and scan task scheduling. It is also built upon a more precise cost model in the optimizer and more accurate statistics collection for different data sources.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=sql-dialects-compatibility>SQL dialects compatibility<a href=#sql-dialects-compatibility class=hash-link aria-label="Direct link to SQL dialects compatibility" title="Direct link to SQL dialects compatibility">​</a></h3>
<p>SQL incompatibility used to bother our users when they migrated from their existing OLAP systems (built on Clickhouse, Trino, Presto, Hive, etc.) to Doris, because they had to modify and update a significant amount of business query logic. Also, if they tried to use Doris as a unified data analysis gateway, they would also need to integrate it with their Hive or Spark systems, and incompatible SQLs could make it tough.</p>
<p>To facilitate a smooth migration or integration, we have enabled SQL dialect conversion in V2.1. Users can continue using the SQL dialect they are used to after simply setting the SQL dialect type for the current session in Doris.</p>
<p>So far, the ClickHouse, Presto, Trino, Hive, and Spark SQL dialects have been supported in this experimental feature. For example,  by <code>set sql_dialect = "trino"</code>, you can perform queries using Trino SQL syntax, without any modifications. Tests in user production environment show that Doris V2.1 is compatible with 99% of Trino SQL.</p>
<div class="theme-admonition theme-admonition-note admonition_Gfwi alert alert--secondary"><div class=admonitionHeading_f1Ed>note</div><div class=admonitionContent_UjKb><p>See Doc: <a href=https://doris.apache.org/docs/lakehouse/sql-dialect/ target=_blank rel="noopener noreferrer">https://doris.apache.org/docs/lakehouse/sql-dialect/</a></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=high-speed-data-interface-for-100-fold-performance>High-speed data interface for 100-fold performance<a href=#high-speed-data-interface-for-100-fold-performance class=hash-link aria-label="Direct link to High-speed data interface for 100-fold performance" title="Direct link to High-speed data interface for 100-fold performance">​</a></h3>
<p>Most big data systems today adopt columnar in-memory data formats and interact with other database systems using MySQL/JDBC/ODBC protocols. That means during data transfer, there is a need to covert the data from columnar format to row-based format to fit in with the MySQL/JDBC/ODBC protocols, and then vice versa. This serialization and deserialization process slows down the data transfer speed, which becomes more noticeable when the data size is huge, like in data science scenarios.</p>
<p>Apache Arrow is a columnar in-memory format designed for large-scale data processing. It has efficient data structures that facilitate faster data transfer across different systems. If both the source database and target client support Arrow Flight SQL protocol, data transfer between them will entail no data serialization and deserialization. That can cut down a huge chunk of overheads. Moreover, Arrow Flight can give full play to the multi-node and multi-core architecture to parallelize operations and thus increase throughputs.</p>
<p><img decoding=async loading=lazy alt="High-speed data interface for 100-fold performance" src=/assets/images/2.1-doris-arrow-flight-3585c9cac786689f50ad42c8b76d3b8e.png width=1280 height=436 class=img_ev3q></p>
<p>Reading data from Apache Doris using Python used to be a complex process. Firslty, data blocks in Doris had to be converted from its columnar format into row-based bytes. Then, in the Python client, the data had to be deserialized into a Pandas data structure. These steps largely slow down data transfer.</p>
<p>Now this is revolutionized in Doris V2.1, where we provide a high-throughput data read/write interface based on Arrow Flight: HTTP Data API. Using Arrow Flight SQL, Doris converts the columnar data blocks into Arrow RecordBatch, which is also in columnar format. Then, in the Python client, Arrow RecordBatch is converted into column-oriented Pandas DataFrame. Both conversions are highly efficient and involve no serialization and deserialization.</p>
<p>This allows fast data access to Apache Doris by data science tools like Pandas and Numpy, which means Apache Doris can be seamlessly integrated with the entire AI and data science ecosystem. This unveils a future of endless possibilities.</p>
<div class="language-C++ language-c++ codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#F8F8F2;--prism-background-color:#282A36><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_e6Vv><span class=token-line style=color:#F8F8F2><span class="token plain">conn = flight_sql.connect(uri="grpc://{FE_HOST}:{fe.conf:arrow_flight_sql_port}", db_kwargs={</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">            adbc_driver_manager.DatabaseOptions.USERNAME.value: "user",</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">            adbc_driver_manager.DatabaseOptions.PASSWORD.value: "pass",</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">        })</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">cursor = conn.cursor()</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">cursor.execute("select * from arrow_flight_sql_test order by k0;")</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">print(cursor.fetchallarrow().to_pandas())</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>According to our comparative tests using different MySQL clients for the common data types, the Arrow Flight SQL protocol delivers almost 100 times faster performance than the MySQL protocol in data transfer.</p>
<p><img decoding=async loading=lazy alt="MySQL protocol" src=/assets/images/2.1-doris-arrow-flight-sql-f8707eb6a387ed03a83fd20c373e810a.png width=1280 height=502 class=img_ev3q></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=other-improvements>Other improvements<a href=#other-improvements class=hash-link aria-label="Direct link to Other improvements" title="Direct link to Other improvements">​</a></h3>
<ul>
<li>
<p>Paimon Catalog: upgrade to Paimon 0.6.0, optimized reading of Read Optimized tables, able to bring 10-fold speeds when Paimon data is fully merged</p>
</li>
<li>
<p>Iceberg Catalog: upgrade to Iceberg 1.4.3, fixed compatibility issues in AWS S3 authentication</p>
</li>
<li>
<p>Hudi Catalog: upgrade to Hudi 0.14.1, fixed compatibility issues in Hudi Flink Catalog</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=materialized-view-with-multiple-tables>Materialized view with multiple tables<a href=#materialized-view-with-multiple-tables class=hash-link aria-label="Direct link to Materialized view with multiple tables" title="Direct link to Materialized view with multiple tables">​</a></h2>
<p>As a typical "trade disk space for time" strategy, materialized views pre-compute and store SQL query results so that when the same queries are requested, the materialized view table can directly provide the results. This increases query performance and reduces resource consumption by avoiding repetitive computation.</p>
<p>Previous versions of Doris offer strong consistency for single-table materialized views, ensuring atomicity between the base table and the materialized view table. They also support smart routing for query statements on materialized views, allowing for efficient query execution.</p>
<p><strong>What's more exciting is that, in V2.1, we have introduced materialized views with multiple tables (also known as<a href=https://doris.apache.org/docs/query/view-materialized-view/async-materialized-view target=_blank rel="noopener noreferrer">asynchronous materialized view</a>).</strong> As the name implies, you can build a materialized view across tables. It can be based on full data or incremental data, and it can be refreshed manually or periodically. For multi-table joins or large data scale scenarios, the optimizer transparently rewrites queries based on the cost model and automatically searches for the right materialized view for <strong>optimal query performance</strong>. You can build asynchronous materialized views for external tables, and you can perform queries on these views directly. In other words, <strong>this can be a game changer for</strong> <strong>data warehouse</strong> <strong>layering, data modeling, job scheduling, and data processing</strong>.</p>
<p>Now let's get started:</p>
<p><strong>1. Create the tables:</strong></p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#F8F8F2;--prism-background-color:#282A36><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_e6Vv><span class=token-line style=color:#F8F8F2><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">use</span><span class="token plain"> tpch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TABLE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">IF</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">EXISTS</span><span class="token plain"> orders  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    o_orderkey       </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">integer</span><span class="token plain"> </span><span class="token operator">not</span><span class="token plain"> </span><span class="token boolean">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    o_custkey        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">integer</span><span class="token plain"> </span><span class="token operator">not</span><span class="token plain"> </span><span class="token boolean">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    o_orderstatus    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">char</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">not</span><span class="token plain"> </span><span class="token boolean">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    o_totalprice     decimalv3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">15</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">not</span><span class="token plain"> </span><span class="token boolean">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    o_orderdate      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">date</span><span class="token plain"> </span><span class="token operator">not</span><span class="token plain"> </span><span class="token boolean">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    o_orderpriority  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">char</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">15</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">not</span><span class="token plain"> </span><span class="token boolean">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    o_clerk          </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">char</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">15</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">not</span><span class="token plain"> </span><span class="token boolean">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    o_shippriority   </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">integer</span><span class="token plain"> </span><span class="token operator">not</span><span class="token plain"> </span><span class="token boolean">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    o_comment        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">varchar</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">79</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">not</span><span class="token plain"> </span><span class="token boolean">null</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DUPLICATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">KEY</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">o_orderkey</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> o_custkey</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">PARTITION</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">BY</span><span class="token plain"> RANGE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">o_orderdate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">FROM</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">'2023-10-17'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TO</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">'2023-10-20'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">INTERVAL</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DAY</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DISTRIBUTED</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">BY</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">HASH</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">o_orderkey</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> BUCKETS </span><span class="token number">3</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    PROPERTIES </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"replication_num"</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"1"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">insert</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">into</span><span class="token plain"> orders </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">values</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">   </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'ok'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">99.5</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'2023-10-17'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'a'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'b'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'yy'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">   </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'ok'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">109.2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'2023-10-18'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'c'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token string" style="color:rgb(255, 121, 198)">'d'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'mm'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">   </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'ok'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">99.5</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'2023-10-19'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'a'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'b'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'yy'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TABLE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">IF</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">EXISTS</span><span class="token plain"> lineitem </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    l_orderkey    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">integer</span><span class="token plain"> </span><span class="token operator">not</span><span class="token plain"> </span><span class="token boolean">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    l_partkey     </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">integer</span><span class="token plain"> </span><span class="token operator">not</span><span class="token plain"> </span><span class="token boolean">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    l_suppkey     </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">integer</span><span class="token plain"> </span><span class="token operator">not</span><span class="token plain"> </span><span class="token boolean">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    l_linenumber  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">integer</span><span class="token plain"> </span><span class="token operator">not</span><span class="token plain"> </span><span class="token boolean">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    l_quantity    decimalv3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">15</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">not</span><span class="token plain"> </span><span class="token boolean">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    l_extendedprice  decimalv3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">15</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">not</span><span class="token plain"> </span><span class="token boolean">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    l_discount    decimalv3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">15</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">not</span><span class="token plain"> </span><span class="token boolean">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    l_tax         decimalv3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">15</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">not</span><span class="token plain"> </span><span class="token boolean">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    l_returnflag  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">char</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">not</span><span class="token plain"> </span><span class="token boolean">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    l_linestatus  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">char</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">not</span><span class="token plain"> </span><span class="token boolean">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    l_shipdate    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">date</span><span class="token plain"> </span><span class="token operator">not</span><span class="token plain"> </span><span class="token boolean">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    l_commitdate  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">date</span><span class="token plain"> </span><span class="token operator">not</span><span class="token plain"> </span><span class="token boolean">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    l_receiptdate </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">date</span><span class="token plain"> </span><span class="token operator">not</span><span class="token plain"> </span><span class="token boolean">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    l_shipinstruct </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">char</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">25</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">not</span><span class="token plain"> </span><span class="token boolean">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    l_shipmode     </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">char</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">not</span><span class="token plain"> </span><span class="token boolean">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    l_comment      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">varchar</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">44</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">not</span><span class="token plain"> </span><span class="token boolean">null</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DUPLICATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">KEY</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">l_orderkey</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> l_partkey</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> l_suppkey</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> l_linenumber</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">PARTITION</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">BY</span><span class="token plain"> RANGE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">l_shipdate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">FROM</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">'2023-10-17'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TO</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">'2023-10-20'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">INTERVAL</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DAY</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DISTRIBUTED</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">BY</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">HASH</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">l_orderkey</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> BUCKETS </span><span class="token number">3</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    PROPERTIES </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"replication_num"</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"1"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">insert</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">into</span><span class="token plain"> lineitem </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">values</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">5.5</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">6.5</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">7.5</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">8.5</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'o'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'k'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'2023-10-17'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'2023-10-17'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'2023-10-17'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'a'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'b'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'yyyyyyyyy'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">5.5</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">6.5</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">7.5</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">8.5</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'o'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'k'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'2023-10-18'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'2023-10-18'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'2023-10-18'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'a'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'b'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'yyyyyyyyy'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">6</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">7.5</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">8.5</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">9.5</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">10.5</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'k'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'o'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'2023-10-19'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'2023-10-19'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'2023-10-19'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'c'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'d'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'xxxxxxxxx'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"> </span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"> </span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TABLE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">IF</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">EXISTS</span><span class="token plain"> partsupp </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">  ps_partkey     </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">INTEGER</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">  ps_suppkey     </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">INTEGER</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">  ps_availqty    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">INTEGER</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">  ps_supplycost  DECIMALV3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">15</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">  </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">  ps_comment     </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">VARCHAR</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">199</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DUPLICATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">KEY</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">ps_partkey</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> ps_suppkey</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DISTRIBUTED</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">BY</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">HASH</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">ps_partkey</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> BUCKETS </span><span class="token number">3</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">PROPERTIES </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">  </span><span class="token string" style="color:rgb(255, 121, 198)">"replication_num"</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"1"</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p><strong>2. Create materialized view:</strong></p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#F8F8F2;--prism-background-color:#282A36><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_e6Vv><span class=token-line style=color:#F8F8F2><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">CREATE</span><span class="token plain"> MATERIALIZED </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">VIEW</span><span class="token plain"> mv1 </span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">        BUILD DEFERRED REFRESH AUTO </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">ON</span><span class="token plain"> MANUAL</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">partition</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">by</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">l_shipdate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DISTRIBUTED</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">BY</span><span class="token plain"> RANDOM BUCKETS </span><span class="token number">2</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">        PROPERTIES </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">'replication_num'</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'1'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">AS</span><span class="token plain"> </span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">select</span><span class="token plain"> l_shipdate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> o_orderdate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> l_partkey</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">            l_suppkey</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">sum</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">o_totalprice</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> sum_total</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">            </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> lineitem</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">            </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">left</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">join</span><span class="token plain"> orders </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">on</span><span class="token plain"> lineitem</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">l_orderkey </span><span class="token operator">=</span><span class="token plain"> orders</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">o_orderkey </span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">                             </span><span class="token operator">and</span><span class="token plain"> l_shipdate </span><span class="token operator">=</span><span class="token plain"> o_orderdate</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">            </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">group</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">by</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">            l_shipdate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">            o_orderdate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">            l_partkey</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">            l_suppkey</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>To sum up, asynchronous materialized view in V2.1 supports:</p>
<ul>
<li>
<p><strong>Transparent rewriting</strong>: transparently rewrites common operators including Select, Where, Join, Group By, and Aggregation, for faster query speed. For example, in BI reporting, you can create materialized views for some particularly slow queries.</p>
</li>
<li>
<p><strong>Auto refresh</strong>: periodic refresh, manual refresh, full refresh, (partition-based) incremental refresh.</p>
</li>
<li>
<p><strong>Materialized view of external tables</strong>: You can build materialized views based on external data such as Hive, Hudi, and Iceberg tables. You can also synchronize data from data lakes into Doris internal tables via materialized views.</p>
</li>
<li>
<p><strong>Direct query on materialized views</strong>: If you regard the making of materialized views as an ETL process, then the materialized views will be the result set of ETL. In this sense, materialized views can be seen as data tables, so users can conduct queries on them directly.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=enhanced-storage>Enhanced storage<a href=#enhanced-storage class=hash-link aria-label="Direct link to Enhanced storage" title="Direct link to Enhanced storage">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=auto_increment-column>AUTO_INCREMENT column<a href=#auto_increment-column class=hash-link aria-label="Direct link to AUTO_INCREMENT column" title="Direct link to AUTO_INCREMENT column">​</a></h3>
<p>AUTO_INCREMENT column is a common feature in OLTP databases. It provides an efficient way to automatically assign unique identifiers to newly inserted data rows. However, it is less commonly found in distributed OLAP databases because the value allocation for AUTO_INCREMENT columns involves global transactions.</p>
<p>As an MPP-based OLAP system, Apache Doris V2.1 implements AUTO_INCREMENT column with an innovative pre-allocation strategy. Leveraging the uniqueness guarantee provided by AUTO_INCREMENT, users can achieve efficient dictionary encoding and query pagination.</p>
<p><strong>Dictionary encoding</strong>: AUTO_INCREMENT column is helpful for queries that require accurate deduplication, such as PV/UV calculation or user segmentation. Utilizing AUTO_INCREMENT column, you can create a dictionary table for string values like UserID or OrderID. Simply writing user data in batches or in real time to the dictionary table can generate a dictionary. Then, by applying various dimensional conditions, the corresponding bitmaps can be aggregated.</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#F8F8F2;--prism-background-color:#282A36><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_e6Vv><span class=token-line style=color:#F8F8F2><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TABLE</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">demo</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">dictionary_tbl</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">user_id</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">varchar</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">50</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">aid</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">BIGINT</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">AUTO_INCREMENT</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">ENGINE</span><span class="token operator">=</span><span class="token plain">OLAP</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">UNIQUE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">KEY</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">user_id</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DISTRIBUTED</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">BY</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">HASH</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">user_id</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> BUCKETS </span><span class="token number">32</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">PROPERTIES </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token string" style="color:rgb(255, 121, 198)">"replication_allocation"</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"tag.location.default: 3"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token string" style="color:rgb(255, 121, 198)">"enable_unique_key_merge_on_write"</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"true"</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p><strong>Query pagination</strong>: Pagination is often necessary when displaying data on a webpage. Traditional pagination typically involves using <code>limit</code>, <code>offset</code> + <code>order by</code> in SQL queries. However, this can be inefficient in deep pagination queries, because even if only a small portion of the data is being requested, the database still needs to read and sort the entire dataset. This is addressed by AUTO_INCREMENT column. It generates a unique identifier for each row, remembers the maximum one from the previous page and uses it as a reference for retrieving the next page.</p>
<p>The following is an example, where <code>unique_value</code> is an AUTO INCREMENT column.</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#F8F8F2;--prism-background-color:#282A36><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_e6Vv><span class=token-line style=color:#F8F8F2><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TABLE</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">demo</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">records_tbl2</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">key</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">int</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">11</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">""</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">name</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">varchar</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">26</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">""</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">address</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">varchar</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">41</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">""</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">city</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">varchar</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">11</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">""</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">nation</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">varchar</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">16</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">""</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">region</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">varchar</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">13</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">""</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">phone</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">varchar</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">16</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">""</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">mktsegment</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">varchar</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">11</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">""</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">unique_value</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">BIGINT</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">AUTO_INCREMENT</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DUPLICATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">KEY</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">key</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">name</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DISTRIBUTED</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">BY</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">HASH</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">key</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> BUCKETS </span><span class="token number">10</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">PROPERTIES </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">"replication_num"</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"3"</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>In pagination display, where each page displays 100 records, this is how you can fetch the data of the first page:</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#F8F8F2;--prism-background-color:#282A36><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_e6Vv><span class=token-line style=color:#F8F8F2><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">select</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> records_tbl2 </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">order</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">by</span><span class="token plain"> unique_value </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">limit</span><span class="token plain"> </span><span class="token number">100</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>The program marks down the maximum of <code>unique_value</code> in the returned result (assuming it is 99). This is how you can fetch the data of the second page:</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#F8F8F2;--prism-background-color:#282A36><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_e6Vv><span class=token-line style=color:#F8F8F2><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">select</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> records_tbl2 </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">where</span><span class="token plain"> unique_value </span><span class="token operator">></span><span class="token plain"> </span><span class="token number">99</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">order</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">by</span><span class="token plain"> unique_value </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">limit</span><span class="token plain"> </span><span class="token number">100</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>If you need data from the latter pages, for example, page 101, it will be difficult to retrieve the maximum <code>unique_value</code> of page 100, so this is how you can perform the query:</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#F8F8F2;--prism-background-color:#282A36><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_e6Vv><span class=token-line style=color:#F8F8F2><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">select</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">key</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> address</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> city</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> nation</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> region</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> phone</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> mktsegment</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> records_tbl2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">select</span><span class="token plain"> unique_value </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> max_value </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> records_tbl2 </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">order</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">by</span><span class="token plain"> uniuqe_value </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">limit</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">offset</span><span class="token plain"> </span><span class="token number">9999</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> previous_data</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">where</span><span class="token plain"> records_tbl2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">uniuqe_value </span><span class="token operator">></span><span class="token plain"> previous_data</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">max_value</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">order</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">by</span><span class="token plain"> unique_value </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">limit</span><span class="token plain"> </span><span class="token number">100</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-note admonition_Gfwi alert alert--secondary"><div class=admonitionHeading_f1Ed>note</div><div class=admonitionContent_UjKb><p>See doc: <a href=https://doris.apache.org/docs/table-design/auto-increment target=_blank rel="noopener noreferrer">https://doris.apache.org/docs/table-design/auto-increment</a></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=auto-partition>AUTO PARTITION<a href=#auto-partition class=hash-link aria-label="Direct link to AUTO PARTITION" title="Direct link to AUTO PARTITION">​</a></h3>
<p>Before V2.1, Doris requires users to manually create data partitions before data ingestion, otherwise data loading will just fail. Now, to release burden on operation and maintenance, V2.1 allows AUTO PARTITION. Upon data ingestion, it detects whether a partition exists for the data based on the partitioning column. If not, it automatically creates one and starts data ingestion.</p>
<p>To apply AUTO PARTITION in Doris:</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#F8F8F2;--prism-background-color:#282A36><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_e6Vv><span class=token-line style=color:#F8F8F2><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TABLE</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">DAILY_TRADE_VALUE</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">TRADE_DATE</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain">              datev2 </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'Trade Date'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">TRADE_ID</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain">                </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">varchar</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">40</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'Trade ID'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">UNIQUE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">KEY</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">TRADE_DATE</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">TRADE_ID</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">AUTO </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">PARTITION</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">BY</span><span class="token plain"> RANGE date_trunc</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">TRADE_DATE</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'year'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DISTRIBUTED</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">BY</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">HASH</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">TRADE_DATE</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> BUCKETS </span><span class="token number">10</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">PROPERTIES </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">  </span><span class="token string" style="color:rgb(255, 121, 198)">"replication_num"</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"1"</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-tip admonition_Gfwi alert alert--success"><div class=admonitionHeading_f1Ed>tip</div><div class=admonitionContent_UjKb><ol>
<li>
<p>Currently, you can only specify one partitioning column for AUTO PARTITION, and it has to be NOT NULL.</p>
</li>
<li>
<p>It supports AUTO PARTITION by Range or by List. For the former, it supports <code>date_trunc</code> as the partitioning function, and <code>DATE</code> or <code>DATETIME</code> format for the partitioning column. For the latter, it does not support function calling, it supports <code>BOOLEAN</code>, <code>TINYINT</code>, <code>SMALLINT</code>, <code>INT</code>, <code>BIGINT</code>, <code>LARGEINT</code>, <code>DATE</code>, <code>DATETIME</code>, <code>CHAR</code>, and <code>VARCHAR</code> for the partitioning column, and the values are enumeration values.</p>
</li>
<li>
<p>For AUTO PARTITION by List, if there is no partition for a value in the partitioning column, Doris will create one for it.</p>
</li>
</ol></div></div>
<div class="theme-admonition theme-admonition-note admonition_Gfwi alert alert--secondary"><div class=admonitionHeading_f1Ed>note</div><div class=admonitionContent_UjKb><p>See doc: <a href=https://doris.apache.org/zh-CN/docs/table-design/data-partition#%E8%87%AA%E5%8A%A8%E5%88%86%E5%8C%BA target=_blank rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/table-design/data-partition#%E8%87%AA%E5%8A%A8%E5%88%86%E5%8C%BA</a></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=100-faster-insert-into-select>100% faster INSERT INTO SELECT<a href=#100-faster-insert-into-select class=hash-link aria-label="Direct link to 100% faster INSERT INTO SELECT" title="Direct link to 100% faster INSERT INTO SELECT">​</a></h3>
<p><code>INSERT INTO…SELECT</code> is one of the most frequently used statements in ETL. It enables fast data migration, transformation, cleaning, and aggregation. That's why we've been optimizing its performance. In V2.0, we introduced Single Replica Load to reduce repetitive data writing and data compaction.</p>
<p>For further improvement, in V2.1, we have moved forward the execution of MemTable to reduce data ingestion overheads. Tests show that this can <strong>double the data ingestion speed in most cases compared to V2.0</strong>.</p>
<p><img decoding=async loading=lazy alt="100% faster INSERT INTO SELECT" src=/assets/images/2.1-INSERT-INTO-SELECT-EN-381ebcb56119c8c3020120fde276cfc3.png width=1280 height=751 class=img_ev3q></p>
<p>The process comparison before and after moving forward the execution of MemTable is illustrated above. The Sink node no longer sends encoded data blocks but instead processes MemTable locally and sends the generated segments to downstream nodes. This reduces the overheads caused by multiple data encoding and improves the speed and accuracy of memory backpressure. In addition, we have replaced Ping-Pong RPC with Streaming RPC so there will be less waiting during data transfer.</p>
<p>We've done tests to see how moving forward MemTable impacts data ingestion performance.</p>
<p><strong>Test environment</strong>: 1 Frontend + 3 Backend, 16C 64G each node, 3 high-performance cloud disks (to make sure that disk I/O is not a bottleneck)</p>
<p><strong>Test results</strong>:</p>
<p>In single-replica ingestion, the execution time of V2.1 is only 36% of what takes V2.0 to finish. In three-replica ingestion, that figure is 54%. This means, V2.1 has sped up the performance of <code>INSERT INTO…SELECT</code> by more than 100% in general.</p>
<p><img decoding=async loading=lazy alt="Insert into table" src=/assets/images/2.1-insert-into-select-0a877bdc14d4fabffc7e0f5da6c1c4d3.png width=3501 height=1031 class=img_ev3q></p>
<div class="theme-admonition theme-admonition-note admonition_Gfwi alert alert--secondary"><div class=admonitionHeading_f1Ed>note</div><div class=admonitionContent_UjKb><p>V2.1 moves forward the execution of MemTable by default, so you don't have to modify the data ingestion command. You can return to the old ingestion method by setting <code>enable_memtable_on_sink_node=false</code> in MySQL connection.</div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=high-concurrency-real-time-data-ingestion--group-commit>High-concurrency real-time data ingestion / Group Commit<a href=#high-concurrency-real-time-data-ingestion--group-commit class=hash-link aria-label="Direct link to High-concurrency real-time data ingestion / Group Commit" title="Direct link to High-concurrency real-time data ingestion / Group Commit">​</a></h3>
<p>For data writing, V2.1 has a back pressure mechanism to avoid excessive data versions, so as to reduce resource consumption caused by data version merging.</p>
<p>During data ingestion, data batches are written to an in-memory table and then written to disk as individual RowSet files. Each RowSet file corresponds to a specific data import version. The background compaction process automatically merges the RowSets, combining the small ones into a big one in order to increase query speed and reduce storage consumption. However, each compaction process consumes CPU, memory, and disk IO resources. The more frequently that data is written, the more RowSets are generated, and the more resources the compaction process consumes. The backpressure mechanism is a solution to this. It will throw a -235 error when there are too many data versions.</p>
<p><img decoding=async loading=lazy alt="High-concurrency real-time data ingestion " src=/assets/images/2.1-doris-group-commit-d6b8b226770cf1fdb5836854ed595e49.png width=1280 height=912 class=img_ev3q></p>
<p>In addition, V2.1 supports Group Commit, which means to accumulate multiple data writings in the backend and commit them as one batch. In this way, users don't have to keep their writing frequency at a low level because Doris will merge multiple writings into one.</p>
<p><img decoding=async loading=lazy alt="Group Comit" src=/assets/images/2.1-doris-group-commit-2-4bc76d5f1b65ab702ea7156c1eab24a4.png width=1280 height=757 class=img_ev3q></p>
<p>Group Commit so far supports two modes: <code>sync_mode</code> and <code>async_mode</code>. The <code>sync_mode</code> commits multiple imports within a single transaction, and then the data becomes immediately visible. While in the <code>async_mode</code>, data is first written to the Write-Ahead Log (WAL). Then Doris, based on the system load and the value of <code>group_commit_interval</code>, asynchronously commits the data, after which the data becomes visible. When a single import is huge, the system automatically switches to the <code>sync_mode</code> to prevent the WAL from occupying too much disk space.</p>
<p>Benchmark tests on Group Commit (<code>async_mode</code>) with JDBC ingestion and the Stream Load method present great results.</p>
<ul>
<li>
<p><strong>JDBC ingestion:</strong></p>
<ul>
<li>
<p>A 1 Frontend + 1 Backend cluster, TPC-H SF10 Lineitem table (22GB, 180 million rows);</p>
</li>
<li>
<p>At a concurrency level of 20, with each Insert involving less than 100 rows, Doris V2.1 reaches a writing speed of 106,900 row/s and a throughput of 11.46 MB/s. CPU usage of the Backend remains at 10%~20%.</p>
</li>
</ul>
</li>
<li>
<p><strong>Stream Load:</strong></p>
<ul>
<li>
<p>A 1 Frontend + 3 Backends cluster, httplogs (31GB, 247 million rows);</p>
</li>
<li>
<p>At a concurrency level of 10, with each writing involving less than 1MB, Doris returns a -235 error when disabling Group Commit. With Group Commit enabled, it delivers stable performance and reaches a writing speed of 810,000 row/s and a throughput of 104 MB/s.</p>
</li>
<li>
<p>At a concurrency level of 10, with each writing involving less than 10MB, enabling Group Commit increases the writing speed by 45% and the writing throughput by 79%.</p>
</li>
</ul>
</li>
</ul>
<div class="theme-admonition theme-admonition-note admonition_Gfwi alert alert--secondary"><div class=admonitionHeading_f1Ed>note</div><div class=admonitionContent_UjKb><p>See doc and full test results: <a href=https://doris.apache.org/docs/data-operate/import/group-commit-manual target=_blank rel="noopener noreferrer">https://doris.apache.org/docs/data-operate/import/group-commit-manual</a></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=semi-structured-data-analysis>Semi-structured data analysis<a href=#semi-structured-data-analysis class=hash-link aria-label="Direct link to Semi-structured data analysis" title="Direct link to Semi-structured data analysis">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=a-new-data-type-variant>A new data type: Variant<a href=#a-new-data-type-variant class=hash-link aria-label="Direct link to A new data type: Variant" title="Direct link to A new data type: Variant">​</a></h3>
<p>Before V2.1, Doris processes semi-structured data in two ways:</p>
<ol>
<li>
<p>It requires users to pre-define table schema, make a flat table, and parse the data before it is loaded into Doris. This method ensures fast data writing and avoids parsing upon query execution. The downside is the lack of flexibility. Any change to the table schema will require a lot of maintenance efforts.</p>
</li>
<li>
<p>It accommodates semi-structured data with JSON or stores it as JSON strings. Raw JSON data is ingested into Doris without any pre-processing and is parsed by functions upon query execution. This option requires no extra effort from the users, but you might need to put up with inefficient data parsing and reading.</p>
</li>
</ol>
<p>V2.1 supports a new data type named Variant. It can accommodate semi-structured data such as JSON as well as compound data structures that contain various data types such as integers, strings, and booleans. Users don't have to pre-define the exact data types for a Variant column in the table schema.</p>
<p>The Variant type is handy when processing nested data structures, where the structure can change dynamically. During data writing, it is capable of auto-inference for columns based on what is given, after which it merges them into the existing table schema, and stores the JSON keys and their corresponding values as dynamic sub-columns.</p>
<p>You can include both Variant columns and static columns with pre-defined data types in the same table. This provides greater flexibility in storage and queries. Additionally, the Variant type is empowered by the columnar storage, vectorized execution engine, and query optimizer for high efficiency in queries and storage.</p>
<p>Use Variant in Doris:</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#F8F8F2;--prism-background-color:#282A36><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_e6Vv><span class=token-line style=color:#F8F8F2><span class="token comment" style="color:rgb(98, 114, 164)">-- No index</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TABLE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">IF</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">EXISTS</span><span class="token plain"> ${table_name} </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    k </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">BIGINT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    v VARIANT</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">table_properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">-- Create index for the v column, specify the parser</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TABLE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">IF</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">EXISTS</span><span class="token plain"> ${table_name} </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    k </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">BIGINT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    v VARIANT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">INDEX</span><span class="token plain"> idx_var</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">v</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">USING</span><span class="token plain"> INVERTED </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">PROPERTIES</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"parser"</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"english|unicode|chinese"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'your comment'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">table_properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">-- Perform queries, access sub-columns using`[]`</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">SELECT</span><span class="token plain"> v</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">"properties"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">"title"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> ${table_name}</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p><strong>Variant VS JSON</strong></p>
<p>In Apache Doris, JSON data is stored in a binary JSONB format, and the entire JSON row is stored in segments in a row-oriented way. However, with the Variant type, it automatically infers the data type upon data writing and stores the JSON data in a columnar method. Thus, no parsing is needed during queries.</p>
<p>Furthermore, the Variant type is optimized for sparse JSON scenarios. It only extracts frequently occurring columns. The sparse columns are stored in a separate format.</p>
<p>Tests  prove that <strong>data in Variant columns takes up the same storage space as data in static columns, which is only 35% of that in JSON format</strong>. The Variant type should be a more cost-effective choice in low-cardinality scenarios.</p>
<p><img decoding=async loading=lazy alt="Variant vs JSON" src=/assets/images/2.1-variant-vs-json-e0a280dc9f81543c22cb53f85170ac38.png width=2585 height=962 class=img_ev3q></p>
<p>In terms of query performance, <strong>the Variant type enables 8 times higher query speed than JSON</strong> in hot runs and even more in cold runs.</p>
<p><img decoding=async loading=lazy alt="Variant vs JSON" src=/assets/images/2.1-variant-vs-json-2-c897e07d34381c7ce54e53284d6e04bf.png width=3556 height=1095 class=img_ev3q></p>
<div class="theme-admonition theme-admonition-tip admonition_Gfwi alert alert--success"><div class=admonitionHeading_f1Ed>tip</div><div class=admonitionContent_UjKb><ul>
<li>
<p>Currently, the Variant type is not supported in the Aggregate Key model of Doris. It can not be the primary key or sorting key in a Unique Key model table or Duplicate model table;</p>
</li>
<li>
<p>It is recommended to go with the RANDOM mode or Group Commit for higher writing performance;</p>
</li>
<li>
<p>It is recommended to extract non-standard JSON types such as date or decimal as static fields to enable higher performance;</p>
</li>
<li>
<p>In columnar format, arrays of two or more dimensions, as well as arrays with nested objects, will be stored as JSONB encoding, resulting in lower performance than native arrays;</p>
</li>
<li>
<p>Queries involving filtering or aggregation require the use of Cast, where the storage layer will provide hints for the storage engine for predicate pushdown based on the storage type and the Cast type and thus accelerate queries.</p>
</li>
</ul></div></div>
<div class="theme-admonition theme-admonition-note admonition_Gfwi alert alert--secondary"><div class=admonitionHeading_f1Ed>note</div><div class=admonitionContent_UjKb><p>See doc: <a href=https://doris.apache.org/docs/sql-manual/sql-types/Data-Types/VARIANT target=_blank rel="noopener noreferrer">https://doris.apache.org/docs/sql-manual/sql-types/Data-Types/VARIANT</a></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=ip-types>IP types<a href=#ip-types class=hash-link aria-label="Direct link to IP types" title="Direct link to IP types">​</a></h3>
<p>IP address is a widely used field in statistical analysis for network traffic monitoring. Doris V2.1 provides native support for IPv4 and IPv6. It stores IP data in binary format, which cuts down storage space usage by 60% compared to IP string in plain texts. Along with these IP types, we have added over 20 functions for IP data processing, including:</p>
<ul>
<li>
<p>IPV4_NUM_TO_STRING: It converts a big-endian representation of an IPv4 address of Int16, Int32, or Int64 into its corresponding string representation;</p>
</li>
<li>
<p>IPV4_CIDR_TO_RANGE: It receives an IPv4 address and a CIDR-containing Int16 value, and returns a structure containing two IPv4 fields, representing the lower range (min) and upper range (max) of the subnet, respectively;</p>
</li>
<li>
<p>INET_ATON: It retrieves a string containing an IPv4 address in the format of A.B.C.D, where A, B, C, and D are decimal numbers separated by periods.</p>
</li>
</ul>
<div class="theme-admonition theme-admonition-note admonition_Gfwi alert alert--secondary"><div class=admonitionHeading_f1Ed>note</div><div class=admonitionContent_UjKb><p>See <a href=https://doris.apache.org/docs/sql-manual/sql-types/Data-Types/IPV6 target=_blank rel="noopener noreferrer">IPV6</a> for more information.</div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=more-powerful-functions-for-compound-data-types>More powerful functions for compound data types<a href=#more-powerful-functions-for-compound-data-types class=hash-link aria-label="Direct link to More powerful functions for compound data types" title="Direct link to More powerful functions for compound data types">​</a></h3>
<p>V2.1 provides more supported data types:</p>
<ul>
<li><code>explode_map</code>: supports exploding rows into columns for the Map data type (only with the new optimizer)</li>
</ul>
<p>Each key-value pair in the Map field is expanded into a separate row, with the Map field replaced by two separate fields representing the key and value. The <code>explode_map</code> function should be used in conjunction with Lateral View. You can apply multiple Lateral Views. The result is a Cartesian product.</p>
<p>This is how it is used:</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#F8F8F2;--prism-background-color:#282A36><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_e6Vv><span class=token-line style=color:#F8F8F2><span class="token comment" style="color:rgb(98, 114, 164)">-- Create table</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TABLE</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">sdu</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">  </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">id</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">INT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">  </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">name</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TEXT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">  </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">score</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> MAP</span><span class="token operator">&lt;</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TEXT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">INT</span><span class="token operator">></span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">ENGINE</span><span class="token operator">=</span><span class="token plain">OLAP</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DUPLICATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">KEY</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">id</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'OLAP'</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DISTRIBUTED</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">BY</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">HASH</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">id</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> BUCKETS </span><span class="token number">1</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">PROPERTIES </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token string" style="color:rgb(255, 121, 198)">"replication_allocation"</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"tag.location.default: 1"</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">-- Insert data</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">insert</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">into</span><span class="token plain"> sdu </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">values</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"zhangsan"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> {</span><span class="token string" style="color:rgb(255, 121, 198)">"Chinese"</span><span class="token plain">:</span><span class="token string" style="color:rgb(255, 121, 198)">"80"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token string" style="color:rgb(255, 121, 198)">"Math"</span><span class="token plain">:</span><span class="token string" style="color:rgb(255, 121, 198)">"60"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token string" style="color:rgb(255, 121, 198)">"English"</span><span class="token plain">:</span><span class="token string" style="color:rgb(255, 121, 198)">"90"</span><span class="token plain">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">insert</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">into</span><span class="token plain"> sdu </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">values</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"lisi"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> {</span><span class="token string" style="color:rgb(255, 121, 198)">"null"</span><span class="token plain">:</span><span class="token boolean">null</span><span class="token plain">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">insert</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">into</span><span class="token plain"> sdu </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">values</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"wangwu"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> {</span><span class="token string" style="color:rgb(255, 121, 198)">"Chinese"</span><span class="token plain">:</span><span class="token string" style="color:rgb(255, 121, 198)">"88"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token string" style="color:rgb(255, 121, 198)">"Math"</span><span class="token plain">:</span><span class="token string" style="color:rgb(255, 121, 198)">"90"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token string" style="color:rgb(255, 121, 198)">"English"</span><span class="token plain">:</span><span class="token string" style="color:rgb(255, 121, 198)">"96"</span><span class="token plain">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">insert</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">into</span><span class="token plain"> sdu </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">values</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"lisi2"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> {</span><span class="token boolean">null</span><span class="token plain">:</span><span class="token boolean">null</span><span class="token plain">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">insert</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">into</span><span class="token plain"> sdu </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">values</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"amory"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">mysql</span><span class="token operator">></span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">select</span><span class="token plain"> name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> course_0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> score_0 </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> sdu lateral </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">view</span><span class="token plain"> explode_map</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">score</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> tmp </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> course_0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">score_0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">----------+----------+---------+</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> name     </span><span class="token operator">|</span><span class="token plain"> course_0 </span><span class="token operator">|</span><span class="token plain"> score_0 </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">----------+----------+---------+</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> zhangsan </span><span class="token operator">|</span><span class="token plain"> Chinese  </span><span class="token operator">|</span><span class="token plain">      </span><span class="token number">80</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> zhangsan </span><span class="token operator">|</span><span class="token plain"> Math     </span><span class="token operator">|</span><span class="token plain">      </span><span class="token number">60</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> zhangsan </span><span class="token operator">|</span><span class="token plain"> English  </span><span class="token operator">|</span><span class="token plain">      </span><span class="token number">90</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> lisi     </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">null</span><span class="token plain">     </span><span class="token operator">|</span><span class="token plain">    </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> wangwu   </span><span class="token operator">|</span><span class="token plain"> Chinese  </span><span class="token operator">|</span><span class="token plain">      </span><span class="token number">88</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> wangwu   </span><span class="token operator">|</span><span class="token plain"> Math     </span><span class="token operator">|</span><span class="token plain">      </span><span class="token number">90</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> wangwu   </span><span class="token operator">|</span><span class="token plain"> English  </span><span class="token operator">|</span><span class="token plain">      </span><span class="token number">96</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> lisi2    </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain">     </span><span class="token operator">|</span><span class="token plain">    </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">----------+----------+---------+</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">mysql</span><span class="token operator">></span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">select</span><span class="token plain"> name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> course_0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> score_0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> course_1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> score_1 </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> sdu lateral </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">view</span><span class="token plain"> explode_map</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">score</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> tmp </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> course_0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">score_0 lateral </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">view</span><span class="token plain"> explode_map</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">score</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> tmp1 </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> course_1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">score_1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">----------+----------+---------+----------+---------+</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> name     </span><span class="token operator">|</span><span class="token plain"> course_0 </span><span class="token operator">|</span><span class="token plain"> score_0 </span><span class="token operator">|</span><span class="token plain"> course_1 </span><span class="token operator">|</span><span class="token plain"> score_1 </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">----------+----------+---------+----------+---------+</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> zhangsan </span><span class="token operator">|</span><span class="token plain"> Chinese  </span><span class="token operator">|</span><span class="token plain">      </span><span class="token number">80</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> Chinese  </span><span class="token operator">|</span><span class="token plain">      </span><span class="token number">80</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> zhangsan </span><span class="token operator">|</span><span class="token plain"> Chinese  </span><span class="token operator">|</span><span class="token plain">      </span><span class="token number">80</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> Math     </span><span class="token operator">|</span><span class="token plain">      </span><span class="token number">60</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> zhangsan </span><span class="token operator">|</span><span class="token plain"> Chinese  </span><span class="token operator">|</span><span class="token plain">      </span><span class="token number">80</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> English  </span><span class="token operator">|</span><span class="token plain">      </span><span class="token number">90</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> zhangsan </span><span class="token operator">|</span><span class="token plain"> Math     </span><span class="token operator">|</span><span class="token plain">      </span><span class="token number">60</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> Chinese  </span><span class="token operator">|</span><span class="token plain">      </span><span class="token number">80</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> zhangsan </span><span class="token operator">|</span><span class="token plain"> Math     </span><span class="token operator">|</span><span class="token plain">      </span><span class="token number">60</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> Math     </span><span class="token operator">|</span><span class="token plain">      </span><span class="token number">60</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> zhangsan </span><span class="token operator">|</span><span class="token plain"> Math     </span><span class="token operator">|</span><span class="token plain">      </span><span class="token number">60</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> English  </span><span class="token operator">|</span><span class="token plain">      </span><span class="token number">90</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> zhangsan </span><span class="token operator">|</span><span class="token plain"> English  </span><span class="token operator">|</span><span class="token plain">      </span><span class="token number">90</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> Chinese  </span><span class="token operator">|</span><span class="token plain">      </span><span class="token number">80</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> zhangsan </span><span class="token operator">|</span><span class="token plain"> English  </span><span class="token operator">|</span><span class="token plain">      </span><span class="token number">90</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> Math     </span><span class="token operator">|</span><span class="token plain">      </span><span class="token number">60</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> zhangsan </span><span class="token operator">|</span><span class="token plain"> English  </span><span class="token operator">|</span><span class="token plain">      </span><span class="token number">90</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> English  </span><span class="token operator">|</span><span class="token plain">      </span><span class="token number">90</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> lisi     </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">null</span><span class="token plain">     </span><span class="token operator">|</span><span class="token plain">    </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">null</span><span class="token plain">     </span><span class="token operator">|</span><span class="token plain">    </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> wangwu   </span><span class="token operator">|</span><span class="token plain"> Chinese  </span><span class="token operator">|</span><span class="token plain">      </span><span class="token number">88</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> Chinese  </span><span class="token operator">|</span><span class="token plain">      </span><span class="token number">88</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> wangwu   </span><span class="token operator">|</span><span class="token plain"> Chinese  </span><span class="token operator">|</span><span class="token plain">      </span><span class="token number">88</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> Math     </span><span class="token operator">|</span><span class="token plain">      </span><span class="token number">90</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> wangwu   </span><span class="token operator">|</span><span class="token plain"> Chinese  </span><span class="token operator">|</span><span class="token plain">      </span><span class="token number">88</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> English  </span><span class="token operator">|</span><span class="token plain">      </span><span class="token number">96</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> wangwu   </span><span class="token operator">|</span><span class="token plain"> Math     </span><span class="token operator">|</span><span class="token plain">      </span><span class="token number">90</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> Chinese  </span><span class="token operator">|</span><span class="token plain">      </span><span class="token number">88</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> wangwu   </span><span class="token operator">|</span><span class="token plain"> Math     </span><span class="token operator">|</span><span class="token plain">      </span><span class="token number">90</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> Math     </span><span class="token operator">|</span><span class="token plain">      </span><span class="token number">90</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> wangwu   </span><span class="token operator">|</span><span class="token plain"> Math     </span><span class="token operator">|</span><span class="token plain">      </span><span class="token number">90</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> English  </span><span class="token operator">|</span><span class="token plain">      </span><span class="token number">96</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> wangwu   </span><span class="token operator">|</span><span class="token plain"> English  </span><span class="token operator">|</span><span class="token plain">      </span><span class="token number">96</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> Chinese  </span><span class="token operator">|</span><span class="token plain">      </span><span class="token number">88</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> wangwu   </span><span class="token operator">|</span><span class="token plain"> English  </span><span class="token operator">|</span><span class="token plain">      </span><span class="token number">96</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> Math     </span><span class="token operator">|</span><span class="token plain">      </span><span class="token number">90</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> wangwu   </span><span class="token operator">|</span><span class="token plain"> English  </span><span class="token operator">|</span><span class="token plain">      </span><span class="token number">96</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> English  </span><span class="token operator">|</span><span class="token plain">      </span><span class="token number">96</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> lisi2    </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain">     </span><span class="token operator">|</span><span class="token plain">    </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain">     </span><span class="token operator">|</span><span class="token plain">    </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">----------+----------+---------+----------+---------+</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p><code>explode_map_outer</code> and <code>explode_outer</code> serve the same purpose. They display rows with NULL values in the Map-type columns.</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#F8F8F2;--prism-background-color:#282A36><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_e6Vv><span class=token-line style=color:#F8F8F2><span class="token plain">mysql</span><span class="token operator">></span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">select</span><span class="token plain"> name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> course_0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> score_0 </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> sdu lateral </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">view</span><span class="token plain"> explode_map_outer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">score</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> tmp </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> course_0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">score_0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">----------+----------+---------+</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> name     </span><span class="token operator">|</span><span class="token plain"> course_0 </span><span class="token operator">|</span><span class="token plain"> score_0 </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">----------+----------+---------+</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> zhangsan </span><span class="token operator">|</span><span class="token plain"> Chinese  </span><span class="token operator">|</span><span class="token plain">      </span><span class="token number">80</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> zhangsan </span><span class="token operator">|</span><span class="token plain"> Math     </span><span class="token operator">|</span><span class="token plain">      </span><span class="token number">60</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> zhangsan </span><span class="token operator">|</span><span class="token plain"> English  </span><span class="token operator">|</span><span class="token plain">      </span><span class="token number">90</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> lisi     </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">null</span><span class="token plain">     </span><span class="token operator">|</span><span class="token plain">    </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> wangwu   </span><span class="token operator">|</span><span class="token plain"> Chinese  </span><span class="token operator">|</span><span class="token plain">      </span><span class="token number">88</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> wangwu   </span><span class="token operator">|</span><span class="token plain"> Math     </span><span class="token operator">|</span><span class="token plain">      </span><span class="token number">90</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> wangwu   </span><span class="token operator">|</span><span class="token plain"> English  </span><span class="token operator">|</span><span class="token plain">      </span><span class="token number">96</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> lisi2    </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain">     </span><span class="token operator">|</span><span class="token plain">    </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> amory    </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain">     </span><span class="token operator">|</span><span class="token plain">    </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">----------+----------+---------+</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<ul>
<li><code>IN</code>: supports the <code>STRUCT</code> data type (only with the new optimizer)</li>
</ul>
<p>The <code>IN</code> predicate supports Struct type data constructed using the <code>struct()</code>function as the left parameter. It also allows selecting a column that contains Struct type data from a table. It supports a Struct-type array constructed using the <code>struct()</code> function as the right parameter.</p>
<p>It is an efficient alternative to WHERE clauses with many OR conditions. For example, instead of using expressions like <code>(a = 1 and b = '2') or (a = 1 and b = '3') or (...)</code>, you can use <code>struct(a,b) in (struct(1, '2'), struct(1, '3'), ...)</code>.</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#F8F8F2;--prism-background-color:#282A36><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_e6Vv><span class=token-line style=color:#F8F8F2><span class="token plain">mysql</span><span class="token operator">></span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">select</span><span class="token plain"> struct</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token string" style="color:rgb(255, 121, 198)">"2"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">  </span><span class="token operator">in</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">struct</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> struct</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token string" style="color:rgb(255, 121, 198)">"2"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> struct</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token boolean">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> cast</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">struct</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'2'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> STRUCT</span><span class="token operator">&lt;</span><span class="token plain">col1:</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TINYINT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">col2:</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TEXT</span><span class="token operator">></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">IN</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token boolean">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> cast</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">struct</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'2'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> STRUCT</span><span class="token operator">&lt;</span><span class="token plain">col1:</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TINYINT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">col2:</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TEXT</span><span class="token operator">></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> cast</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">struct</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> STRUCT</span><span class="token operator">&lt;</span><span class="token plain">col1:</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TINYINT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">col2:</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TEXT</span><span class="token operator">></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> cast</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">struct</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> STRUCT</span><span class="token operator">&lt;</span><span class="token plain">col1:</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TINYINT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">col2:</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TEXT</span><span class="token operator">></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain">                                                                                                                                                                                                                                    </span><span class="token number">1</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">mysql</span><span class="token operator">></span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">select</span><span class="token plain"> struct</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token string" style="color:rgb(255, 121, 198)">"2"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">not</span><span class="token plain"> </span><span class="token operator">in</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">struct</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> struct</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token string" style="color:rgb(255, 121, 198)">"2"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> struct</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token boolean">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"> </span><span class="token operator">not</span><span class="token plain"> cast</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">struct</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'2'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> STRUCT</span><span class="token operator">&lt;</span><span class="token plain">col1:</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TINYINT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">col2:</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TEXT</span><span class="token operator">></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">IN</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token boolean">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> cast</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">struct</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'2'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> STRUCT</span><span class="token operator">&lt;</span><span class="token plain">col1:</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TINYINT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">col2:</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TEXT</span><span class="token operator">></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> cast</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">struct</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> STRUCT</span><span class="token operator">&lt;</span><span class="token plain">col1:</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TINYINT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">col2:</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TEXT</span><span class="token operator">></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> cast</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">struct</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> STRUCT</span><span class="token operator">&lt;</span><span class="token plain">col1:</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TINYINT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">col2:</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TEXT</span><span class="token operator">></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain">                                                                                                                                                                                                                                           </span><span class="token number">0</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<ul>
<li><code>MAP_AGG</code>: It receives expr1 as the key, expr2 as the corresponding value, and returns a MAP.</li>
</ul>
<div class="theme-admonition theme-admonition-note admonition_Gfwi alert alert--secondary"><div class=admonitionHeading_f1Ed>note</div><div class=admonitionContent_UjKb><p>See doc: <a href=https://doris.apache.org/docs/sql-manual/sql-functions/aggregate-functions/map-agg/ target=_blank rel="noopener noreferrer">https://doris.apache.org/docs/sql-manual/sql-functions/aggregate-functions/map-agg/</a></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=workload-management>Workload management<a href=#workload-management class=hash-link aria-label="Direct link to Workload management" title="Direct link to Workload management">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=hard-isolation-of-resources>Hard isolation of resources<a href=#hard-isolation-of-resources class=hash-link aria-label="Direct link to Hard isolation of resources" title="Direct link to Hard isolation of resources">​</a></h3>
<p>On the basis of the Workload Group mechanism, which imposes a soft limit on the resources that a workload group can use, Doris 2.1 introduces a hard limit on CPU resource consumption for workload groups as a way to ensure <strong>higher stability in query performance</strong>. This means that regardless of the overall CPU availability on the physical machine, workload groups configured with hard limits cannot exceed the maximum CPU usage specified in the configuration. In this way, as long as there is no significant change in user query workload, there will be stable query performance. A caveat is that, in addition to CPU usage, memory, I/O, and resource contention at the software level will all impact query execution. Thus, when the cluster switches between idle and heavy load, even with CPU hard limits configured, there might still be fluctuations in query performance. However, you can still expect better performance from the hard limits than the soft limits.</p>
<div class="theme-admonition theme-admonition-tip admonition_Gfwi alert alert--success"><div class=admonitionHeading_f1Ed>tip</div><div class=admonitionContent_UjKb><p><strong>Note</strong><ol>
<li>
<p>In Doris V2.0, CPU resource isolation was implemented based on a priority queue. In V2.1, this relies on the CGroup mechanism. Therefore, please note that you should configure the CGroups in advance after upgrading from V2.0 to V2.1.</p>
</li>
<li>
<p>Currently, the Workload Group mechanism supports query-query workload isolation and ingestion-query isolation. Note that if you need to impose hard limits on import workloads, you should enable <code>memtable_on_sink_node</code>.</p>
</li>
<li>
<p>Users need to specify either soft limits or hard limits for the current cluster using a switch. Currently, it is not supported to run both modes on the same cluster. In the future, we will consider bringing in simultaneous support for both modes based on user feedback.</p>
</li>
</ol></div></div>
<div class="theme-admonition theme-admonition-note admonition_Gfwi alert alert--secondary"><div class=admonitionHeading_f1Ed>note</div><div class=admonitionContent_UjKb><p>See <a href=https://doris.apache.org/docs/admin-manual/resource-admin/workload-group target=_blank rel="noopener noreferrer">Workload Group</a>.</div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=topsql>TopSQL<a href=#topsql class=hash-link aria-label="Direct link to TopSQL" title="Direct link to TopSQL">​</a></h3>
<p>V2.1 allows users to check the most resource-consuming SQL queries in the runtime. This can be a big help when handling cluster load spikes caused by unexpected large queries.</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#F8F8F2;--prism-background-color:#282A36><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_e6Vv><span class=token-line style=color:#F8F8F2><span class="token plain">mysql </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">none</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token operator">></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">desc</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> active_queries</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">------------------------+--------+------+-------+---------+-------+</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> Field                  </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">Type</span><span class="token plain">   </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">Null</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">Key</span><span class="token plain">   </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">Default</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> Extra </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">------------------------+--------+------+-------+---------+-------+</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> BeHost                 </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TEXT</span><span class="token plain">   </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">No</span><span class="token plain">   </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain">    </span><span class="token operator">|</span><span class="token plain"> NONE  </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> BePort                 </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">BIGINT</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">No</span><span class="token plain">   </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain">    </span><span class="token operator">|</span><span class="token plain"> NONE  </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> QueryId                </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TEXT</span><span class="token plain">   </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">No</span><span class="token plain">   </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain">    </span><span class="token operator">|</span><span class="token plain"> NONE  </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> StartTime              </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TEXT</span><span class="token plain">   </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">No</span><span class="token plain">   </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain">    </span><span class="token operator">|</span><span class="token plain"> NONE  </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> QueryTimeMs            </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">BIGINT</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">No</span><span class="token plain">   </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain">    </span><span class="token operator">|</span><span class="token plain"> NONE  </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> WorkloadGroupId        </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">BIGINT</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">No</span><span class="token plain">   </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain">    </span><span class="token operator">|</span><span class="token plain"> NONE  </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> QueryCpuTimeMs         </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">BIGINT</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">No</span><span class="token plain">   </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain">    </span><span class="token operator">|</span><span class="token plain"> NONE  </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> ScanRows               </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">BIGINT</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">No</span><span class="token plain">   </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain">    </span><span class="token operator">|</span><span class="token plain"> NONE  </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> ScanBytes              </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">BIGINT</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">No</span><span class="token plain">   </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain">    </span><span class="token operator">|</span><span class="token plain"> NONE  </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> BePeakMemoryBytes      </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">BIGINT</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">No</span><span class="token plain">   </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain">    </span><span class="token operator">|</span><span class="token plain"> NONE  </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> CurrentUsedMemoryBytes </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">BIGINT</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">No</span><span class="token plain">   </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain">    </span><span class="token operator">|</span><span class="token plain"> NONE  </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> ShuffleSendBytes       </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">BIGINT</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">No</span><span class="token plain">   </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain">    </span><span class="token operator">|</span><span class="token plain"> NONE  </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> ShuffleSendRows        </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">BIGINT</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">No</span><span class="token plain">   </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain">    </span><span class="token operator">|</span><span class="token plain"> NONE  </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">Database</span><span class="token plain">               </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TEXT</span><span class="token plain">   </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">No</span><span class="token plain">   </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain">    </span><span class="token operator">|</span><span class="token plain"> NONE  </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> FrontendInstance       </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TEXT</span><span class="token plain">   </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">No</span><span class="token plain">   </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain">    </span><span class="token operator">|</span><span class="token plain"> NONE  </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">Sql</span><span class="token plain">                    </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TEXT</span><span class="token plain">   </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">No</span><span class="token plain">   </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain">    </span><span class="token operator">|</span><span class="token plain"> NONE  </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">------------------------+--------+------+-------+---------+-------+</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>The <code>active_queries()</code> function records the audit information of queries running on various Backends in Doris. You can query <code>active_queries()</code> like querying a regular table. It supports operations including querying, filtering with predicates, sorting, and joining. Common metrics captured by this function include the SQL execution time, CPU time, peak memory usage on a single Backend, data volume scanned, and data volume shuffled during the query execution. It also allows rolling up to the Backend level to examine the global resource consumption of SQL queries.</p>
<p>Note that only the SQL in the runtime will be displayed. The SQLs that finish execution will be written into the audit logs (fe.audit.log, mostly) instead. A few frequently used SQLs are as follows:</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#F8F8F2;--prism-background-color:#282A36><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_e6Vv><span class=token-line style=color:#F8F8F2><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">Check</span><span class="token plain"> the </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">top</span><span class="token plain"> N longest</span><span class="token operator">-</span><span class="token plain">running SQLs </span><span class="token operator">in</span><span class="token plain"> the cluster</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">select</span><span class="token plain"> QueryId</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token function" style="color:rgb(80, 250, 123)">max</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">QueryTimeMs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> query_time </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> active_queries</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">group</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">by</span><span class="token plain"> QueryId </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">order</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">by</span><span class="token plain"> query_time </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">desc</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">limit</span><span class="token plain"> </span><span class="token number">10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">Check</span><span class="token plain"> the </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">top</span><span class="token plain"> N most CPU</span><span class="token operator">-</span><span class="token plain">consuming SQLs </span><span class="token operator">in</span><span class="token plain"> the cluster</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">select</span><span class="token plain"> QueryId</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">sum</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">QueryCpuTimeMs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> cpu_time </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> active_queries</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">group</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">by</span><span class="token plain"> QueryId </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">order</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">by</span><span class="token plain"> cpu_time </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">desc</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">limit</span><span class="token plain"> </span><span class="token number">10</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">Check</span><span class="token plain"> the </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">top</span><span class="token plain"> N SQLs </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">with</span><span class="token plain"> the most scan </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">rows</span><span class="token plain"> </span><span class="token operator">and</span><span class="token plain"> their execution </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">time</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">select</span><span class="token plain"> t1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">QueryId</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">t1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">scan_rows</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> t2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">query_time </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">select</span><span class="token plain"> QueryId</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">sum</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">ScanRows</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> scan_rows </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> active_queries</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">group</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">by</span><span class="token plain"> QueryId </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">order</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">by</span><span class="token plain"> scan_rows </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">desc</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">limit</span><span class="token plain"> </span><span class="token number">10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> t1 </span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">left</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">join</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">select</span><span class="token plain"> QueryId</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token function" style="color:rgb(80, 250, 123)">max</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">QueryTimeMs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> query_time </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> active_queries</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">group</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">by</span><span class="token plain"> QueryId</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> t2 </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">on</span><span class="token plain"> t1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">QueryId </span><span class="token operator">=</span><span class="token plain"> t2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">QueryId</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    </span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">Check</span><span class="token plain"> the </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">load</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">of</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">all</span><span class="token plain"> Backends </span><span class="token operator">and</span><span class="token plain"> sort them </span><span class="token operator">in</span><span class="token plain"> descending </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">order</span><span class="token plain"> based </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">on</span><span class="token plain"> CPU </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">time</span><span class="token operator">/</span><span class="token plain">scan </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">rows</span><span class="token operator">/</span><span class="token plain">shuffle bytes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">select</span><span class="token plain"> BeHost</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token function" style="color:rgb(80, 250, 123)">sum</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">QueryCpuTimeMs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> query_cpu_time</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">sum</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">ScanRows</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> scan_rows</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token function" style="color:rgb(80, 250, 123)">sum</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">ShuffleSendBytes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> shuffle_bytes </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> active_queries</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">group</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">by</span><span class="token plain"> BeHost </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">order</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">by</span><span class="token plain"> query_cpu_time </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">desc</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">scan_rows </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">desc</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">shuffle_bytes </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">desc</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">limit</span><span class="token plain"> </span><span class="token number">10</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">Check</span><span class="token plain"> the </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">top</span><span class="token plain"> N </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">SQL</span><span class="token plain"> queries </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">with</span><span class="token plain"> the highest peak memory </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">usage</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">on</span><span class="token plain"> a single Backend</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">select</span><span class="token plain"> QueryId</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token function" style="color:rgb(80, 250, 123)">max</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">BePeakMemoryBytes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> be_peak_mem </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> active_queries</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">group</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">by</span><span class="token plain"> QueryId </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">order</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">by</span><span class="token plain"> be_peak_mem </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">desc</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">limit</span><span class="token plain"> </span><span class="token number">10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>Currently, the main displayed workload types include <code>Select</code> and <code>Insert Into...Select</code>. The iterative versions of V2.1 are expected to support displaying the resource usage of Stream Load and Broker Load.</p>
<div class="theme-admonition theme-admonition-note admonition_Gfwi alert alert--secondary"><div class=admonitionHeading_f1Ed>note</div><div class=admonitionContent_UjKb><p>See doc: <a href=https://doris.apache.org/docs/sql-manual/sql-functions/table-functions/active_queries/ target=_blank rel="noopener noreferrer">https://doris.apache.org/docs/sql-manual/sql-functions/table-functions/active_queries/</a></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=others>Others<a href=#others class=hash-link aria-label="Direct link to Others" title="Direct link to Others">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=decimal-256>Decimal 256<a href=#decimal-256 class=hash-link aria-label="Direct link to Decimal 256" title="Direct link to Decimal 256">​</a></h3>
<p>For users in the financial sector or high-end manufacturing, V2.1 supports a high-precision data type: Decimal, which supports up to 76 significant digits (To enable this experimental feature, please set <code>enable_decimal256=true</code>.)</p>
<p>Example:</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#F8F8F2;--prism-background-color:#282A36><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_e6Vv><span class=token-line style=color:#F8F8F2><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TABLE</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">test_arithmetic_expressions_256</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">      k1 </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">decimal</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">76</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">30</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">      k2 </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">decimal</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">76</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">30</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DISTRIBUTED</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">BY</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">HASH</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">k1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    PROPERTIES </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">"replication_num"</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"1"</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">insert</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">into</span><span class="token plain"> test_arithmetic_expressions_256 </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">values</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1.000000000000000000000000000001</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">9999999999999999999999999999999999999999999998.999999999999999999999999999998</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">2.100000000000000000000000000001</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">4999999999999999999999999999999999999999999999.899999999999999999999999999998</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">3.666666666666666666666666666666</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">3333333333333333333333333333333333333333333333.333333333333333333333333333333</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>Query and result:</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#F8F8F2;--prism-background-color:#282A36><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_e6Vv><span class=token-line style=color:#F8F8F2><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">select</span><span class="token plain"> k1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> k2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> k1 </span><span class="token operator">+</span><span class="token plain"> k2 a </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> test_arithmetic_expressions_256 </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">order</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">by</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">----------------------------------+-------------------------------------------------------------------------------+-------------------------------------------------------------------------------+</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> k1                               </span><span class="token operator">|</span><span class="token plain"> k2                                                                            </span><span class="token operator">|</span><span class="token plain"> a                                                                             </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">----------------------------------+-------------------------------------------------------------------------------+-------------------------------------------------------------------------------+</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">1.000000000000000000000000000001</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">9999999999999999999999999999999999999999999998.999999999999999999999999999998</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">9999999999999999999999999999999999999999999999.999999999999999999999999999999</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">2.100000000000000000000000000001</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">4999999999999999999999999999999999999999999999.899999999999999999999999999998</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">5000000000000000000000000000000000000000000001.999999999999999999999999999999</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">3.666666666666666666666666666666</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">3333333333333333333333333333333333333333333333.333333333333333333333333333333</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">3333333333333333333333333333333333333333333336.999999999999999999999999999999</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">----------------------------------+-------------------------------------------------------------------------------+-------------------------------------------------------------------------------+</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token number">3</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">rows</span><span class="token plain"> </span><span class="token operator">in</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">set</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0.09</span><span class="token plain"> sec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-note admonition_Gfwi alert alert--secondary"><div class=admonitionHeading_f1Ed>note</div><div class=admonitionContent_UjKb><p>The Decimal256 type consumes more CPU resources so the queries might not be as fast compared to other data types.</div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=job-scheduler>Job scheduler<a href=#job-scheduler class=hash-link aria-label="Direct link to Job scheduler" title="Direct link to Job scheduler">​</a></h3>
<p>According to user feedback, there is a recurring need for scheduled job execution, such as:</p>
<ul>
<li>
<p>Periodic backup;</p>
</li>
<li>
<p>Scheduled data expiration;</p>
</li>
<li>
<p>Periodic import jobs: scheduling incremental or full data synchronization jobs using the Catalog feature;</p>
</li>
<li>
<p>Regular ETL: such as loading data from a flat table into a specified table on a scheduled basis, pulling data from detailed tables and storing it in aggregate tables at specific intervals, and performing scheduled denormalization for tables in the ODS layer and updates to the existing flat table.</p>
</li>
</ul>
<p>Despite the availability of various external scheduling systems such as Airflow and DolphinScheduler, there still exists a consistency challenge. When an external scheduling system triggers an import job in Doris and successfully executes it, but unexpectedly experiences a crash. In this case, since the external scheduling system fails to retrieve the execution result, it assumes the schedule has failed. Then it will trigger its fault tolerance mechanism. Either retries or a direct failure will result in:</p>
<ul>
<li>
<p><strong>Waste of resources</strong>: Since the scheduling system can mistakenly consider a job as failed, it might reschedule the execution of a job that has already succeeded, resulting in unnecessary resource consumption.</p>
</li>
<li>
<p><strong>Data duplication or loss</strong>: On the one hand, retrying the import job might lead to duplicate data imports, resulting in data redundancy or inconsistency. On the other hand, if the job is marked as failed, it can result in the neglect or loss of data that has actually been successfully imported.</p>
</li>
<li>
<p><strong>Time delay</strong>: After the fault tolerance mechanism is triggered, extra time is needed for job scheduling and retries, prolonging the overall data processing time.</p>
</li>
<li>
<p><strong>Compromised system stability</strong>: Frequent retries or immediate failures can increase the load on both the scheduling system and Doris, thereby undermining the stability and performance of the system.</p>
</li>
</ul>
<p>V2.1 provides a good option for regular job scheduling: Doris Job Scheduler. It can trigger the pre-defined operations on schedule or at fixed intervals. The Doris Job Scheduler is accurate to the second. In addition to consistency guarantee for data writing, it provides:</p>
<ol>
<li>
<p><strong>Efficiency</strong>: The Doris Job Scheduler can schedule jobs and events at specified time intervals to ensure efficient data processing. By employing the time wheel algorithm, it guarantees precise triggering of events at a granularity of seconds.</p>
</li>
<li>
<p><strong>Flexibility</strong>: It offers multiple scheduling options, such as scheduling at intervals of minutes, hours, days, or weeks. It supports both one-time scheduling and recurring (cyclic) event scheduling. For the latter, you can specify the start and end times for the scheduling period.</p>
</li>
<li>
<p><strong>Event pool and high-performance processing queues</strong>: It utilizes Disruptor for a high-performance producer-consumer model to minimize job overload.</p>
</li>
<li>
<p><strong>Traceable scheduling records</strong>: It stores the latest job execution records (configurable), which users can view via a simple command.</p>
</li>
<li>
<p><strong>High availability</strong>: On the basis of the Doris high availability mechanism, the jobs are easily self-recoverable.</p>
</li>
</ol>
<p>An example of creating a scheduled job:</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#F8F8F2;--prism-background-color:#282A36><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_e6Vv><span class=token-line style=color:#F8F8F2><span class="token comment" style="color:rgb(98, 114, 164)">// Execute an insert statement every day from 2023-11-17 to 2038</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">CREATE</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">JOB e_daily</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">ON</span><span class="token plain"> SCHEDULE</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">      EVERY </span><span class="token number">1</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DAY</span><span class="token plain"> </span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">      STARTS </span><span class="token string" style="color:rgb(255, 121, 198)">'2023-11-17 23:59:00'</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">      ENDS </span><span class="token string" style="color:rgb(255, 121, 198)">'2038-01-19 03:14:07'</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'Saves total number of sessions'</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DO</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">INSERT</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">INTO</span><span class="token plain"> site_activity</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">totals </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">time</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> total</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">SELECT</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">CURRENT_TIMESTAMP</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">COUNT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token operator">*</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">FROM</span><span class="token plain"> site_activity</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">sessions </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">where</span><span class="token plain"> create_time </span><span class="token operator">>=</span><span class="token plain">  days_add</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token function" style="color:rgb(80, 250, 123)">now</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-note admonition_Gfwi alert alert--secondary"><div class=admonitionHeading_f1Ed>note</div><div class=admonitionContent_UjKb><p>Doris Job Scheduler only supports Insert operations on internal tables currently. See <a href=https://doris.apache.org/docs/sql-manual/sql-statements/Data-Definition-Statements/Create/CREATE-JOB target=_blank rel="noopener noreferrer">CREATE-JOB</a>.</div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=behavior-changed>Behavior changed<a href=#behavior-changed class=hash-link aria-label="Direct link to Behavior changed" title="Direct link to Behavior changed">​</a></h2>
<ul>
<li>
<p>The Unique Key model enables Merge-on-Write by default, which means <code>enable_unique_key_merge_on_write=true</code> will be included as a default setting when a table is created in the Unique Key model.</p>
</li>
<li>
<p>Since inverted index has proven to be more performant than bitmap index, V2.1 and future versions stop supporting bitmap index. Existing bitmap indexes will remain effective but new creation is not allowed. We will remove bitmap index-related code in the future.</p>
</li>
<li>
<p><code>cpu_resource_limit</code> is no longer supported. It is to put a limit on the number of scanner threads on Doris Backend. Since the Workload Group mechanism also supports such settings, the already configured <code>cpu_resource_limit</code> will be invalid.</p>
</li>
<li>
<p>Segment compaction is enabled by default. This means Doris supports compaction of multiple segments in the same rowset, which is useful in single-batch ingestion of large datasets.</p>
</li>
<li>
<p>Audit log plug-in</p>
<ul>
<li>
<p>Since V2.1.0, Doris has a built-in audit log plug-in. Users can simply enable or disable it by setting the <code>enable_audit_plugin</code> parameter.</p>
</li>
<li>
<p>If you have already installed your own audit log plug-in, you can either continue using it after upgrading to Doris V2.1, or uninstall it and use the one in Doris. Please note that the audit log table will be relocated after switching plug-in.</p>
</li>
<li>
<p>For more details, please see doc: <a href=https://doris.apache.org/docs/admin-manual/audit-plugin target=_blank rel="noopener noreferrer">https://doris.apache.org/docs/admin-manual/audit-plugin</a></p>
</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=credits>Credits<a href=#credits class=hash-link aria-label="Direct link to Credits" title="Direct link to Credits">​</a></h2>
<p>Special thanks to the following contributors for making this happen:</p>
<p>morrySnow, Gabriel39, BiteTheDDDDt, kaijchen, starocean999, morningman, jackwener, zy-kkk, englefly, Jibing-Li, XieJiann, yujun777, Mryange, HHoflittlefish777, LiDongyangLi, HappenLee, zhangstar333, lihangyu, zclllyybb, amory, bobhan1, AKIRA, zhangdong, ZouXinyiZou, HuJerryHu, yiguolei, airborne12, wangbo, jacktengg, jacktengg, TangSiyang2001, BePPPower, Yukang-Lian, mymeiyi, liugddx, kaka11chen, AshinGau, DrogonJackDrogon, wsjz, seuhezhiqiang, zhannngchen, shuke987, KassieZ, huanghaibin, zzzxl1993, Nitin-Kashyap, AlexYue, dataroaring, seawinde, walter, xzj7019, xiaokang, SWJTU-ZhangLei, liaoxin01, dutyu, wuwenchihdu, LiBinfeng-01, daidai, qidaye, mch_ucchi, zhangguoqiang, zhengyu, plat1ko, LemonLiTree, ixzc, deardeng, yiguolei, catpineapple, LingAdonisLing, DongLiang-0, whuxingying, Tanya-W, Yulei-Yang, zzzzzzzs, caoliang-web, xueweizhang, yangshijie, Luwei, lsy3993, xy720, HowardQin, DeadlineFen, Petrichor, caiconghui, KirsCalvinKirs, SunChenyangSun, ChouGavinChou, Luzhijing, gnehil, wudi, zhiqqqq, zfr95, zxealous, kkop, yagagagaga, Chester, LuGuangmingLu, Lightman, Xiaocc, taoxutao, yuanyuan8983, KirsCalvinKirs, DuRipeng, GoGoWen, JingDas, camby, camby, Euporia, rohitrs1983, felixwluo, wudongliang, FreeOnePlus, PaiVallishPai, XuJianxu, seuhezhiqiang, luozenglin, 924060929, HB, LiuLijiaLiu, Ma1oneZhang, bingquanzhao, chunping, echo-dundun, feiniaofeiafei, walter, yongjinhou, zgxme, zhangy5, httpshirley, ChenyangSunChenyang, ZenoYang, ZhangYu0123, hechao, herry2038, jayhua, koarz, nanfeng, LiChuangLi, LiuGuangdongLiu, Jeffrey, liuJiwenliu, Stalary, DuanXujianDuan, HuZhiyuHu, jiafeng.zhang, nanfeng, py023, xiongjx, yuxuan-luo, zhaoshuo, XiaoChangmingXiao, ElvinWei, LiuHongLiu, QiHouliangQi, Hyman-zhao, HelgeLarsHelge, Uniqueyou, YangYAN, acnot, amory, feifeifeimoon, flynn, gohalo, htyoung, realize096, shee, wangqt, xyfsjq, zzwwhh, songguangfan, 467887319, BirdAmosBird, ZhuArmandoZhu, CanGuan, ChengDaqi2023, ChinaYiGuan, gitccl, colagy, DeadlineFen, Doris-Extras, HonestManXin, q763562998, guardcrystal, Dragonliu2018, ZhaoLongZhao, LuoMetaLuo, Miaohongkai, YinShaowenYin, Centurybbx, hongkun-Shao, Wanghuan, Xinxing, XueYuhai, Yoko, HeZhangJianHe, ZhongJinHacker, alan_rodriguez, allenhooo, beat4ocean, bigben0204, chen, czzmmc, dalong, deadlinefen, didiaode18, dong-shuai, feelshana, fornaix, hammer, xuke-hat, hqx871, i78086, irenesrl, julic20s, kindred77, lihuigang, wenluowen, lxliyou001, CSTGluigi, ranxiang327, shysnow, sunny, vhwzIs, wangtao, wangtianyi2004, wyx123654, xuefengze, xiangran0327, xy, yimeng, ytwp, yujian, zhangstar333, figurant, sdhzwc, LHG41278, zlw5307</div></div></article><article class=margin-bottom--xl itemprop=blogPost itemscope itemtype=http://schema.org/BlogPosting><div class=markdown itemprop=articleBody><header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href=/blog/>Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class=s-tags><span class=s-tag>Release Notes</span></span></span></div><h2 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop=headline><a itemprop=url href=/blog/release-note-2.0.5/>Apache Doris 2.0.5 just released</a></h2><div class="blog-info text-center flex justify-center text-sm text-black"><span class=authors><span class="s-author text-black">Apache Doris</span></span><time datetime=2024-02-28T00:00:00.000Z itemprop=datePublished class="text-black ml-4">February 28, 2024</time></div></header><div class=markdown itemprop=articleBody><p>Thanks to our community users and developers, about 217 improvements and bug fixes have been made in Doris 2.0.5 version.</p>
<p><strong>Quick Download:</strong> <a href=https://doris.apache.org/download/ target=_blank rel="noopener noreferrer">https://doris.apache.org/download/</a></p>
<p><strong>GitHub：</strong> <a href=https://github.com/apache/doris/releases target=_blank rel="noopener noreferrer">https://github.com/apache/doris/releases</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=behavior-changes>Behavior changes<a href=#behavior-changes class=hash-link aria-label="Direct link to Behavior changes" title="Direct link to Behavior changes">​</a></h2>
<ul>
<li>change char function behaviour: select char(0) = '\0' return true as MySQL
<ul>
<li><a href=https://github.com/apache/doris/pull/30034 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/30034</a></li>
</ul>
</li>
<li>Allow exporting empty data
<ul>
<li><a href=https://github.com/apache/doris/pull/30703 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/30703</a></li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=new-features>New features<a href=#new-features class=hash-link aria-label="Direct link to New features" title="Direct link to New features">​</a></h2>
<ul>
<li>Eliminate left outer join with is null condition</li>
<li>Add show-tablets-belong stmt for analyzing a batch of tablet-ids</li>
<li>InferPredicates support In, such as a = b & a in [1, 2] -> b in [1, 2]</li>
<li>Optimize plan when column stats are unavailable</li>
<li>Optimize plan using rollup column stats</li>
<li>Support analyze materialized view</li>
<li>Support ShowProcessStmt Show all Fe connection</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=improvements>Improvements<a href=#improvements class=hash-link aria-label="Direct link to Improvements" title="Direct link to Improvements">​</a></h2>
<ul>
<li>Optimize query plan when column stats are unaviable</li>
<li>Optimize query plan using rollup column stats</li>
<li>Stop analyze quickly after user close auto analyze</li>
<li>Catch load column stats exception, avoid print too much stack info to fe.out</li>
<li>Select materialized view by specify the view name in sql</li>
<li>Change auto analyze max table width default value to 100</li>
<li>Escape characters for columns in recovery predicate pushdown in jdbc catalog</li>
<li>Fix jdbc mysql catalog to_date fun pushdown</li>
<li>Optimize the close logic of JDBC client</li>
<li>Optimize jdbc connection pool parameter settings</li>
<li>Obtain hudi partition information through HMS's API</li>
<li>Optimize routine load job error msg and memory</li>
<li>Skip all backup/restore jobs if max allowd option is set to 0</li>
</ul>
<p>See the complete list of improvements and bug fixes on <a href=https://github.com/apache/doris/compare/2.0.4-rc06...2.0.5-rc02 target=_blank rel="noopener noreferrer">github</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=credits>Credits<a href=#credits class=hash-link aria-label="Direct link to Credits" title="Direct link to Credits">​</a></h2>
<p>Thanks all who contribute to this release:</p>
<p>airborne12, alexxing662, amorynan, AshinGau, BePPPower, bingquanzhao, BiteTheDDDDt, ByteYue, caiconghui, cambyzju, catpineapple, dataroaring, eldenmoon, Emor-nj, englefly, felixwluo, GoGoWen, HappenLee, hello-stephen, HHoflittlefish777, HowardQin, JackDrogon, jacktengg, jackwener, Jibing-Li, KassieZ, LemonLiTree, liaoxin01, liugddx, LuGuangming, morningman, morrySnow, mrhhsg, Mryange, mymeiyi, nextdreamblue, qidaye, ryanzryu, seawinde,starocean999, TangSiyang2001, vinlee19, w41ter, wangbo, wsjz, wuwenchi, xiaokang, XieJiann, xingyingone, xy720,xzj7019, yujun777, zclllyybb, zhangstar333, zhannngchen, zhiqiang-hhhh, zxealous, zy-kkk, zzzxl1993</div></div></article><article class=margin-bottom--xl itemprop=blogPost itemscope itemtype=http://schema.org/BlogPosting><div class=markdown itemprop=articleBody><header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href=/blog/>Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class=s-tags><span class=s-tag>Release Notes</span></span></span></div><h2 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop=headline><a itemprop=url href=/blog/release-note-2.0.4/>Apache Doris 2.0.4 just released</a></h2><div class="blog-info text-center flex justify-center text-sm text-black"><span class=authors><span class="s-author text-black">Apache Doris</span></span><time datetime=2024-01-26T00:00:00.000Z itemprop=datePublished class="text-black ml-4">January 26, 2024</time></div></header><div class=markdown itemprop=articleBody><p>Thanks to our community users and developers, about 333 improvements and bug fixes have been made in Doris 2.0.4 version.</p>
<p><strong>Quick Download</strong> : <a href=https://doris.apache.org/download/ target=_blank rel="noopener noreferrer">https://doris.apache.org/download/</a></p>
<p><strong>GitHub</strong> : <a href=https://github.com/apache/doris/releases target=_blank rel="noopener noreferrer">https://github.com/apache/doris/releases</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=behavior-changes>Behavior changes<a href=#behavior-changes class=hash-link aria-label="Direct link to Behavior changes" title="Direct link to Behavior changes">​</a></h2>
<ul>
<li>
<p>More reasonable and accurate precision and scale inference for decimal data type</p>
<ul>
<li>[<a href=/blog/tags/release-notes/decimal/>improvement</a> use new way for decimal arithmetic precision promotion](<a href=https://github.com/apache/doris/pull/28034 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/28034</a>)</li>
</ul>
</li>
<li>
<p>Support drop policy for user or role</p>
<ul>
<li>[<a href=/blog/tags/release-notes/polixy/>fix</a>support drop policy for user or role](<a href=https://github.com/apache/doris/pull/29488 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/29488</a>)</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=new-features>New features<a href=#new-features class=hash-link aria-label="Direct link to New features" title="Direct link to New features">​</a></h2>
<ul>
<li>Support datev1, datetimev1 and decimalv2 datatypes in new optimizer Nereids.</li>
<li>Support ODBC table for new optimizer Nereids.</li>
<li>Add <code>lower_case</code> and <code>ignore_above</code> option for inverted index</li>
<li>Support <code>match_regexp</code> and <code>match_phrase_prefix</code> optimization by inverted index</li>
<li>Support paimon native reader in datalake</li>
<li>Support audit-log for <code>insert into</code> SQL</li>
<li>Support reading parquet file in lzo compressed format</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=improvements>Improvements<a href=#improvements class=hash-link aria-label="Direct link to Improvements" title="Direct link to Improvements">​</a></h2>
<ul>
<li>Improve storage management including balance, migration, publish and others.</li>
<li>Improve storage cooldown policy to use save disk space.</li>
<li>Performance optimization for substr with ascii string.</li>
<li>Improve partition prune when date function is used.</li>
<li>Improve auto analyze visibility and performance.</li>
</ul>
<p>See the complete list of improvements and bug fixes on github <a href="https://github.com/apache/doris/issues?q=label%3Adev%2F2.0.4-merged+is%3Aclosed" target=_blank rel="noopener noreferrer">dev/2.0.4-merged</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=credits>Credits<a href=#credits class=hash-link aria-label="Direct link to Credits" title="Direct link to Credits">​</a></h2>
<p>Last but not least, this release would not have been possible without the following contributors:</p>
<p>airborne12, amorynan, AshinGau, BePPPower, bingquanzhao, BiteTheDDDDt, bobhan1, ByteYue, caiconghui,CalvinKirs, cambyzju, caoliang-web, catpineapple, csun5285, dataroaring, deardeng, dutyu, eldenmoon, englefly, feifeifeimoon, fornaix, Gabriel39, gnehil, HappenLee, hello-stephen, HHoflittlefish777,hubgeter, hust-hhb, ixzc, jacktengg, jackwener, Jibing-Li, kaka11chen, KassieZ, LemonLiTree,liaoxin01, LiBinfeng-01, lihuigang, liugddx, luwei16, morningman, morrySnow, mrhhsg, Mryange, nextdreamblue, Nitin-Kashyap, platoneko, py023, qidaye, shuke987, starocean999, SWJTU-ZhangLei, w41ter, wangbo, wsjz, wuwenchi, Xiaoccer, xiaokang, XieJiann, xingyingone, xinyiZzz, xuwei0912, xy720, xzj7019, yujun777, zclllyybb, zddr, zhangguoqiang666, zhangstar333, zhannngchen, zhiqiang-hhhh, zy-kkk, zzzxl1993</div></div></article><article class=margin-bottom--xl itemprop=blogPost itemscope itemtype=http://schema.org/BlogPosting><div class=markdown itemprop=articleBody><header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href=/blog/>Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class=s-tags><span class=s-tag>Release Notes</span></span></span></div><h2 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop=headline><a itemprop=url href=/blog/release-note-2.0.3/>Apache Doris 2.0.3 just released</a></h2><div class="blog-info text-center flex justify-center text-sm text-black"><span class=authors><span class="s-author text-black">Apache Doris</span></span><time datetime=2023-12-14T00:00:00.000Z itemprop=datePublished class="text-black ml-4">December 14, 2023</time></div></header><div class=markdown itemprop=articleBody><p>Thanks to our community users and developers, about 1000 improvements and bug fixes have been made in Doris 2.0.3 version, including optimizer statistics, inverted index, complex datatypes, data lake, replica management.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=behavior-changes>Behavior changes<a href=#behavior-changes class=hash-link aria-label="Direct link to Behavior changes" title="Direct link to Behavior changes">​</a></h2>
<ul>
<li>The output format of the complex data type array/map/struct has been changed to be consistent to the input format and JSON specification. The main changes from the previous version are that DATE/DATETIME and STRING/VARCHAR are enclosed in double quotes and null values inside ARRAY/MAP are displayed as <code>null</code> instead of <code>NULL</code>.
<ul>
<li><a href=https://github.com/apache/doris/pull/25946 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/25946</a></li>
</ul>
</li>
<li>SHOW_VIEW permission is supported. Users with SELECT or LOAD permission will no longer be able to execute the 'SHOW CREATE VIEW' statement and must be granted the SHOW_VIEW permission separately.
<ul>
<li><a href=https://github.com/apache/doris/pull/25370 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/25370</a></li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=new-features>New features<a href=#new-features class=hash-link aria-label="Direct link to New features" title="Direct link to New features">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=1-support-collecting-statistics-for-optimizer-automatically>1. Support collecting statistics for optimizer automatically<a href=#1-support-collecting-statistics-for-optimizer-automatically class=hash-link aria-label="Direct link to 1. Support collecting statistics for optimizer automatically" title="Direct link to 1. Support collecting statistics for optimizer automatically">​</a></h3>
<p>Collecting statistics helps the optimizer understand the data distribution characteristics and choose a better plan to greatly improve query performance. It is officially supported starting from version 2.0.3 and is enabled all day by default.</p>
<p>see more: <a href=https://doris.apache.org/docs/2.0/query/nereids/statistics target=_blank rel="noopener noreferrer">https://doris.apache.org/docs/2.0/query/nereids/statistics</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=2-support-complex-datatypes-for-more-datalake-source>2. Support complex datatypes for more datalake source<a href=#2-support-complex-datatypes-for-more-datalake-source class=hash-link aria-label="Direct link to 2. Support complex datatypes for more datalake source" title="Direct link to 2. Support complex datatypes for more datalake source">​</a></h3>
<ul>
<li>Support complex datatypes for JAVA UDF, JDBC and Hudi MOR
<ul>
<li><a href=https://github.com/apache/doris/pull/24810 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/24810</a></li>
<li><a href=https://github.com/apache/doris/pull/26236 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/26236</a></li>
</ul>
</li>
<li>Support complex datatypes for Paimon
<ul>
<li><a href=https://github.com/apache/doris/pull/25364 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/25364</a></li>
</ul>
</li>
<li>Suport Paimon version 0.5
<ul>
<li><a href=https://github.com/apache/doris/pull/24985 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/24985</a></li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=3-add-more-builtin-functions>3. Add more builtin functions<a href=#3-add-more-builtin-functions class=hash-link aria-label="Direct link to 3. Add more builtin functions" title="Direct link to 3. Add more builtin functions">​</a></h3>
<ul>
<li>Support the BitmapAgg function in new optimizer
<ul>
<li><a href=https://github.com/apache/doris/pull/25508 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/25508</a></li>
</ul>
</li>
<li>Supports SHA series digest functions
<ul>
<li><a href=https://github.com/apache/doris/pull/24342 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/24342</a></li>
</ul>
</li>
<li>Support the BITMAP datatype in the aggregate functions min_by and max_by
<ul>
<li><a href=https://github.com/apache/doris/pull/25430 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/25430</a></li>
</ul>
</li>
<li>Add milliseconds/microseconds_add/sub/diff functions
<ul>
<li><a href=https://github.com/apache/doris/pull/24114 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/24114</a></li>
</ul>
</li>
<li>Add some json functions: json_insert, json_replace, json_set
<ul>
<li><a href=https://github.com/apache/doris/pull/24384 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/24384</a></li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=improvements>Improvements<a href=#improvements class=hash-link aria-label="Direct link to Improvements" title="Direct link to Improvements">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=performance-optimizations>Performance optimizations<a href=#performance-optimizations class=hash-link aria-label="Direct link to Performance optimizations" title="Direct link to Performance optimizations">​</a></h3>
<ul>
<li>When the inverted index MATCH WHERE condition with a high filter rate is combined with the common WHERE condition with a low filter rate, the I/O of the index column is greatly reduced.</li>
<li>Optimize the efficiency of random data access after the where filter.</li>
<li>Optimizes the performance of the old get_json_xx function on JSON data types by 2~4x.</li>
<li>Supports the configuration to reduce the priority of the data read thread, ensuring the CPU resources for real-time writing.</li>
<li>Adds <code>uuid-numeric</code> function that returns largeint, which is 20 times faster than <code>uuid</code> function that returns string.</li>
<li>Optimized the performance of case when by 3x.</li>
<li>Cut out unnecessary predicate calculations in storage engine execution.</li>
<li>Accelerate count performance by pushing down count operator to storage tier.</li>
<li>Optimizes the computation performance of the nullable type in and or expressions.</li>
<li>Supports rewriting the limit operator before <code>join</code> in more scenarios to improve query performance.</li>
<li>Eliminate useless <code>order by</code> operators from inline view to improve query performance.</li>
<li>Optimizes the accuracy of cardinality estimates and cost models in some cases.</li>
<li>Optimized jdbc catalog predicate pushdown logic.</li>
<li>Optimized the read efficiency of the file cache when it's enable for the first time.</li>
<li>Optimizes the hive table sql cache policy and uses the partition update time stored in HMS to improve the cache hit ratio.</li>
<li>Optimize mow compaction efficiency.</li>
<li>Optimized thread allocation logic for external table query to reduce memory usage</li>
<li>Optimize memory usage for column reader.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=distributed-replica-management-improvements>Distributed replica management improvements<a href=#distributed-replica-management-improvements class=hash-link aria-label="Direct link to Distributed replica management improvements" title="Direct link to Distributed replica management improvements">​</a></h3>
<p>Distributed replica management improvements include skipping partition deletion, colocate group deletion, balance failure due to continuous write, and hot and cold seperation table balance.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=security-enhancement>Security enhancement<a href=#security-enhancement class=hash-link aria-label="Direct link to Security enhancement" title="Direct link to Security enhancement">​</a></h3>
<ul>
<li>The audit log plug-in uses a token instead of a plaintext password to enhance security
<ul>
<li><a href=https://github.com/apache/doris/pull/26278 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/26278</a></li>
</ul>
</li>
<li>log4j configures security enhancement
<ul>
<li><a href=https://github.com/apache/doris/pull/24861 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/24861</a></li>
</ul>
</li>
<li>Sensitive user information is not displayed in logs
<ul>
<li><a href=https://github.com/apache/doris/pull/26912 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/26912</a></li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=bug-fixes>Bug fixes<a href=#bug-fixes class=hash-link aria-label="Direct link to Bug fixes" title="Direct link to Bug fixes">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=complex-datatypes>Complex datatypes<a href=#complex-datatypes class=hash-link aria-label="Direct link to Complex datatypes" title="Direct link to Complex datatypes">​</a></h3>
<ul>
<li>Fix issues that fixed-length CHAR(n) was not truncated correctly in map/struct.
<ul>
<li><a href=https://github.com/apache/doris/pull/25725 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/25725</a></li>
</ul>
</li>
<li>Fix write failure for struct datatype nested for map/array
<ul>
<li><a href=https://github.com/apache/doris/pull/26973 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/26973</a></li>
</ul>
</li>
<li>Fix the issue that count distinct did not support array/map/struct
<ul>
<li><a href=https://github.com/apache/doris/pull/25483 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/25483</a></li>
</ul>
</li>
<li>Fix be crash in updating to 2.0.3 after the delete complex type appeared in query
<ul>
<li><a href=https://github.com/apache/doris/pull/26006 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/26006</a></li>
</ul>
</li>
<li>Fix be crash when JSON datatype is in WHERE clause.
<ul>
<li><a href=https://github.com/apache/doris/pull/27325 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/27325</a></li>
</ul>
</li>
<li>Fix be crash when ARRAY datatype is in OUTER JOIN clause.
<ul>
<li><a href=https://github.com/apache/doris/pull/25669 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/25669</a></li>
</ul>
</li>
<li>Fix reading incorrect result for DECIMAL datatype in ORC format.
<ul>
<li><a href=https://github.com/apache/doris/pull/26548 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/26548</a></li>
<li><a href=https://github.com/apache/doris/pull/25977 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/25977</a></li>
<li><a href=https://github.com/apache/doris/pull/26633 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/26633</a></li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=inverted-index>Inverted index<a href=#inverted-index class=hash-link aria-label="Direct link to Inverted index" title="Direct link to Inverted index">​</a></h3>
<ul>
<li>Fix incorrect result for OR NOT combination in WHERE clause were incorrect when disable inverted index query.
<ul>
<li><a href=https://github.com/apache/doris/pull/26327 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/26327</a></li>
</ul>
</li>
<li>Fix be crash when write a empty with inverted index
<ul>
<li><a href=https://github.com/apache/doris/pull/25984 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/25984</a></li>
</ul>
</li>
<li>Fix be crash in index compaction when the output of compaction is empty.
<ul>
<li><a href=https://github.com/apache/doris/pull/25486 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/25486</a></li>
</ul>
</li>
<li>Fixed the problem of adding an inverted index to be crashed when no data is written to the newly added column.</li>
<li>Fix be crash when BUILD INDEX after ADD COLUMN without new data written.
<ul>
<li><a href=https://github.com/apache/doris/pull/27276 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/27276</a></li>
</ul>
</li>
<li>Fix missing and leak problem of hardlink for inverted index file.
<ul>
<li><a href=https://github.com/apache/doris/pull/26903 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/26903</a></li>
</ul>
</li>
<li>Fix index file corrupt when disk is full temporarily
<ul>
<li><a href=https://github.com/apache/doris/pull/28191 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/28191</a></li>
</ul>
</li>
<li>Fix incorrect result due to optimization for skip reading index column
<ul>
<li><a href=https://github.com/apache/doris/pull/28104 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/28104</a></li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=materialized-view>Materialized View<a href=#materialized-view class=hash-link aria-label="Direct link to Materialized View" title="Direct link to Materialized View">​</a></h3>
<ul>
<li>Fix the problem of BE crash caused by repeated expressions in the group by statement</li>
<li>Fix be crash when there are duplicate expressions in <code>group by</code> statements.
<ul>
<li><a href=https://github.com/apache/doris/pull/27523 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/27523</a></li>
</ul>
</li>
<li>Disables the float/doubld type in the <code>group by</code> clause when a view is created.
<ul>
<li><a href=https://github.com/apache/doris/pull/25823 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/25823</a></li>
</ul>
</li>
<li>Improve the function of select query matching materialized view
<ul>
<li><a href=https://github.com/apache/doris/pull/24691 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/24691</a></li>
</ul>
</li>
<li>Fix an issue that materialized views could not be matched when a table alias was used
<ul>
<li><a href=https://github.com/apache/doris/pull/25321 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/25321</a></li>
</ul>
</li>
<li>Fix the problem using percentile_approx when creating materialized views
<ul>
<li><a href=https://github.com/apache/doris/pull/26528 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/26528</a></li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=table-sample>Table sample<a href=#table-sample class=hash-link aria-label="Direct link to Table sample" title="Direct link to Table sample">​</a></h3>
<ul>
<li>Fix the problem that table sample query can not work on table with partitions.
<ul>
<li><a href=https://github.com/apache/doris/pull/25912 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/25912</a></li>
</ul>
</li>
<li>Fix the problem that table sample query can not work when specify tablet.
<ul>
<li><a href=https://github.com/apache/doris/pull/25378 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/25378</a></li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=unique-with-merge-on-write>Unique with merge on write<a href=#unique-with-merge-on-write class=hash-link aria-label="Direct link to Unique with merge on write" title="Direct link to Unique with merge on write">​</a></h3>
<ul>
<li>Fix null pointer exception in conditional update based on primary key
<ul>
<li><a href=https://github.com/apache/doris/pull/26881 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/26881</a></li>
</ul>
</li>
<li>Fix field name capitalization issues in partial update
<ul>
<li><a href=https://github.com/apache/doris/pull/27223 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/27223</a></li>
</ul>
</li>
<li>Fix duplicate keys occur in mow during schema change repairement.
<ul>
<li><a href=https://github.com/apache/doris/pull/25705 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/25705</a></li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=load-and-compaction>Load and compaction<a href=#load-and-compaction class=hash-link aria-label="Direct link to Load and compaction" title="Direct link to Load and compaction">​</a></h3>
<ul>
<li>Fix unknown slot descriptor error in routineload for running multiple tables
<ul>
<li><a href=https://github.com/apache/doris/pull/25762 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/25762</a></li>
</ul>
</li>
<li>Fix be crash due to concurrent memory access when caculating memory
<ul>
<li><a href=https://github.com/apache/doris/pull/27101 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/27101</a></li>
</ul>
</li>
<li>Fix be crash on duplicate cancel for load.
<ul>
<li><a href=https://github.com/apache/doris/pull/27111 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/27111</a></li>
</ul>
</li>
<li>Fix broker connection error during broker load
<ul>
<li><a href=https://github.com/apache/doris/pull/26050 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/26050</a></li>
</ul>
</li>
<li>Fix incorrect result delete predicates in concurrent case of compation and scan.
<ul>
<li><a href=https://github.com/apache/doris/pull/24638 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/24638</a></li>
</ul>
</li>
<li>Fix the problem tha compaction task would print too many stacktrace logs
<ul>
<li><a href=https://github.com/apache/doris/pull/25597 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/25597</a></li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=data-lake-compatibility>Data Lake compatibility<a href=#data-lake-compatibility class=hash-link aria-label="Direct link to Data Lake compatibility" title="Direct link to Data Lake compatibility">​</a></h3>
<ul>
<li>Solve the problem that the iceberg table contains special characters that cause query failure
<ul>
<li><a href=https://github.com/apache/doris/pull/27108 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/27108</a></li>
</ul>
</li>
<li>Fix compatibility issues of different hive metastore versions
<ul>
<li><a href=https://github.com/apache/doris/pull/27327 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/27327</a></li>
</ul>
</li>
<li>Fix an error reading MaxCompute partition table
<ul>
<li><a href=https://github.com/apache/doris/pull/24911 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/24911</a></li>
</ul>
</li>
<li>Fix the issue that backup to object storage failed
<ul>
<li><a href=https://github.com/apache/doris/pull/25496 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/25496</a></li>
<li><a href=https://github.com/apache/doris/pull/25803 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/25803</a></li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=jdbc-external-table-compatibility>JDBC external table compatibility<a href=#jdbc-external-table-compatibility class=hash-link aria-label="Direct link to JDBC external table compatibility" title="Direct link to JDBC external table compatibility">​</a></h3>
<ul>
<li>Fix Oracle date type format error in jdbc catalog
<ul>
<li><a href=https://github.com/apache/doris/pull/25487 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/25487</a></li>
</ul>
</li>
<li>Fix MySQL 0000-00-00 date exception in jdbc catalog
<ul>
<li><a href=https://github.com/apache/doris/pull/26569 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/26569</a></li>
</ul>
</li>
<li>Fix an exception in reading data from Mariadb where the default value of the time type is current_timestamp
<ul>
<li><a href=https://github.com/apache/doris/pull/25016 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/25016</a></li>
</ul>
</li>
<li>Fix be crash when processing BITMAP datatype in jdbc catalog
<ul>
<li><a href=https://github.com/apache/doris/pull/25034 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/25034</a></li>
<li><a href=https://github.com/apache/doris/pull/26933 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/26933</a></li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=sql-planner-and-optimizer>SQL Planner and Optimizer<a href=#sql-planner-and-optimizer class=hash-link aria-label="Direct link to SQL Planner and Optimizer" title="Direct link to SQL Planner and Optimizer">​</a></h3>
<ul>
<li>
<p>Fix partition prune error in some scenes</p>
<ul>
<li><a href=https://github.com/apache/doris/pull/27047 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/27047</a></li>
<li><a href=https://github.com/apache/doris/pull/26873 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/26873</a></li>
<li><a href=https://github.com/apache/doris/pull/25769 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/25769</a></li>
<li><a href=https://github.com/apache/doris/pull/27636 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/27636</a></li>
</ul>
</li>
<li>
<p>Fix incorrect sub-query processing in some scenarios</p>
<ul>
<li><a href=https://github.com/apache/doris/pull/26034 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/26034</a></li>
<li><a href=https://github.com/apache/doris/pull/25492 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/25492</a></li>
<li><a href=https://github.com/apache/doris/pull/25955 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/25955</a></li>
<li><a href=https://github.com/apache/doris/pull/27177 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/27177</a></li>
</ul>
</li>
<li>
<p>Fix some semantic parsing errors</p>
<ul>
<li><a href=https://github.com/apache/doris/pull/24928 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/24928</a></li>
<li><a href=https://github.com/apache/doris/pull/25627 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/25627</a></li>
</ul>
</li>
<li>
<p>Fix data loss during right outer/anti join</p>
<ul>
<li><a href=https://github.com/apache/doris/pull/26529 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/26529</a></li>
</ul>
</li>
<li>
<p>Fix incorrect pushing down of predicate pass aggregation operators.</p>
<ul>
<li><a href=https://github.com/apache/doris/pull/25525 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/25525</a></li>
</ul>
</li>
<li>
<p>Fix incorrect result header in some cases</p>
<ul>
<li><a href=https://github.com/apache/doris/pull/25372 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/25372</a></li>
</ul>
</li>
<li>
<p>Fix incorrect plan when the nullsafeEquals expression (&lt;=>) is used as the join condition</p>
<ul>
<li><a href=https://github.com/apache/doris/pull/27127 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/27127</a></li>
</ul>
</li>
<li>
<p>Fix correct column prune in set operation operator.</p>
<ul>
<li><a href=https://github.com/apache/doris/pull/26884 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/26884</a></li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=others>Others<a href=#others class=hash-link aria-label="Direct link to Others" title="Direct link to Others">​</a></h3>
<ul>
<li>Fix BE crash when the order of columns in a table is changed and then upgraded to 2.0.3.
<ul>
<li><a href=https://github.com/apache/doris/pull/28205 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/28205</a></li>
</ul>
</li>
</ul>
<p>See the complete list of improvements and bug fixes on <a href="https://github.com/apache/doris/issues?q=label%3Adev%2F2.0.3-merged+is%3Aclosed" target=_blank rel="noopener noreferrer">github dev/2.0.3-merged</a> .</div></div></article><article class=margin-bottom--xl itemprop=blogPost itemscope itemtype=http://schema.org/BlogPosting><div class=markdown itemprop=articleBody><header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href=/blog/>Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class=s-tags><span class=s-tag>Release Notes</span></span></span></div><h2 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop=headline><a itemprop=url href=/blog/release-2.0.2/>Apache Doris announced the official release of version 2.0.2</a></h2><div class="blog-info text-center flex justify-center text-sm text-black"><span class=authors><span class="s-author text-black">Apache Doris</span></span><time datetime=2023-10-13T00:00:00.000Z itemprop=datePublished class="text-black ml-4">October 13, 2023</time></div></header><div class=markdown itemprop=articleBody><p>Thanks to our community users and developers, 489 improvements and bug fixes have been made in Doris 2.0.2.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=behavior-changes>Behavior Changes<a href=#behavior-changes class=hash-link aria-label="Direct link to Behavior Changes" title="Direct link to Behavior Changes">​</a></h2>
<ul>
<li>
<p><a href=https://github.com/apache/doris/pull/24679 target=_blank rel="noopener noreferrer">Remove json -> operator convert to json_extract #24679</a></p>
<p>Remove json '->' operator since it is conflicted with lambda function syntax. It's a syntax sugar for function json_extract and can be replaced with the former.</p>
</li>
<li>
<p><a href=https://github.com/apache/doris/pull/24308 target=_blank rel="noopener noreferrer">Start the script to set metadata_failure_recovery #24308</a></p>
<p>Move metadata_failure_recovery from fe.conf to start_fe.sh argument to prevent being used unexpectedly.</p>
</li>
<li>
<p><a href=https://github.com/apache/doris/pull/24207 target=_blank rel="noopener noreferrer">Change ordinary type null value is \N,complex type null value is null #24207</a></p>
</li>
<li>
<p><a href=https://github.com/apache/doris/pull/23795 target=_blank rel="noopener noreferrer">Optimize priority_ network matching logic for be #23795</a></p>
</li>
<li>
<p><a href=https://github.com/apache/doris/pull/17730 target=_blank rel="noopener noreferrer">Fix cancel load failed because Job could not be cancelled… #17730</a></p>
<p>Allow cancel a retrying load job.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=improvements>Improvements<a href=#improvements class=hash-link aria-label="Direct link to Improvements" title="Direct link to Improvements">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=easier-to-use>Easier to use<a href=#easier-to-use class=hash-link aria-label="Direct link to Easier to use" title="Direct link to Easier to use">​</a></h3>
<ul>
<li>
<p><a href=https://github.com/apache/doris/pull/23887 target=_blank rel="noopener noreferrer">Support custom lib dir to save custom libs #23887</a></p>
<p>Add a custom_lib dir to allow users place custom lib files and custom_lib will not be replaced.</p>
</li>
<li>
<p><a href=https://github.com/apache/doris/pull/23784 target=_blank rel="noopener noreferrer">Optimize priority_ network matching logic #23784</a></p>
<p>Optimize priority_network logic to avoid error when this config is wrong or not configured.</p>
</li>
<li>
<p><a href=https://github.com/apache/doris/pull/23022 target=_blank rel="noopener noreferrer">Row policy support role #23022</a></p>
<p>Support role based auth for row policy.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=new-optimizer-nereids-statistics-collection-improvement>New optimizer Nereids statistics collection improvement<a href=#new-optimizer-nereids-statistics-collection-improvement class=hash-link aria-label="Direct link to New optimizer Nereids statistics collection improvement" title="Direct link to New optimizer Nereids statistics collection improvement">​</a></h3>
<ul>
<li><a href=https://github.com/apache/doris/pull/23663 target=_blank rel="noopener noreferrer">Disable file cache while running analysis tasks. #23663</a></li>
<li><a href=https://github.com/apache/doris/pull/23703 target=_blank rel="noopener noreferrer">Show column stats even when error occurred. #23703</a></li>
<li><a href=https://github.com/apache/doris/pull/23965 target=_blank rel="noopener noreferrer">Support basic jdbc external table stats collection. #23965</a></li>
<li><a href=https://github.com/apache/doris/pull/24625 target=_blank rel="noopener noreferrer">Skip unknown col stats check on __internal_scheam and information_schema #24625</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=better-support-for-jdbc-hdfs-hive-mysql-maxcompute-multi-catalog>Better support for JDBC, HDFS, Hive, MySQL, MaxCompute, Multi-Catalog<a href=#better-support-for-jdbc-hdfs-hive-mysql-maxcompute-multi-catalog class=hash-link aria-label="Direct link to Better support for JDBC, HDFS, Hive, MySQL, MaxCompute, Multi-Catalog" title="Direct link to Better support for JDBC, HDFS, Hive, MySQL, MaxCompute, Multi-Catalog">​</a></h3>
<ul>
<li>
<p><a href=https://github.com/apache/doris/pull/24168 target=_blank rel="noopener noreferrer">Support hadoop viewfs. #24168</a></p>
</li>
<li>
<p><a href=https://github.com/apache/doris/pull/22369 target=_blank rel="noopener noreferrer">Avoid calling checksum when replaying creating jdbc catalog and fix ranger issue #22369</a></p>
</li>
<li>
<p><a href=https://github.com/apache/doris/pull/23868 target=_blank rel="noopener noreferrer">Optimize the JDBC Catalog connection error message #23868</a></p>
<p>Improve property check and error message for JDBC catalog</p>
</li>
<li>
<p><a href=https://github.com/apache/doris/pull/24242 target=_blank rel="noopener noreferrer">Fix mc decimal type parse, fix wrong obj location #24242</a></p>
<p>Fix some issues for MaxCompute catalog</p>
</li>
<li>
<p><a href=https://github.com/apache/doris/pull/23391 target=_blank rel="noopener noreferrer">Support sql cache for hms catalog #23391</a></p>
<p>SQL cache for Hive catalog</p>
</li>
<li>
<p><a href=https://github.com/apache/doris/pull/22869 target=_blank rel="noopener noreferrer">Merge hms partition events. #22869</a></p>
<p>Improve performance for Hive metadata sync</p>
</li>
<li>
<p><a href=https://github.com/apache/doris/pull/22702 target=_blank rel="noopener noreferrer">Add metadata_name_ids for quickly get catlogs,db,table and add profiling table in order to Compatible with mysql #22702</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=performance-for-inverted-index-query>Performance for inverted index query<a href=#performance-for-inverted-index-query class=hash-link aria-label="Direct link to Performance for inverted index query" title="Direct link to Performance for inverted index query">​</a></h3>
<ul>
<li><a href=https://github.com/apache/doris/pull/23952 target=_blank rel="noopener noreferrer">Add bkd index query cache to improve perf #23952</a></li>
<li><a href=https://github.com/apache/doris/pull/24678 target=_blank rel="noopener noreferrer">Improve performance for count on index other than match #24678</a></li>
<li><a href=https://github.com/apache/doris/pull/24751 target=_blank rel="noopener noreferrer">Improve match performance without index #24751</a></li>
<li><a href=https://github.com/apache/doris/pull/23871 target=_blank rel="noopener noreferrer">Optimize multiple terms conjunction query #23871</a>
Improve performance of MATCH_ALL</li>
<li><a href=https://github.com/apache/doris/pull/24389 target=_blank rel="noopener noreferrer">Optimize unnecessary conversions #24389</a>
Improve performance of MATCH</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=improve-array-functions>Improve Array functions<a href=#improve-array-functions class=hash-link aria-label="Direct link to Improve Array functions" title="Direct link to Improve Array functions">​</a></h3>
<ul>
<li>[<a href=https://github.com/apache/doris/pull/23630 target=_blank rel="noopener noreferrer">Fix old optimizer with some array literal functions #23630</a></li>
<li><a href=https://github.com/apache/doris/pull/24327 target=_blank rel="noopener noreferrer">Improve array union support multi params #24327</a></li>
<li><a href=https://github.com/apache/doris/pull/24455 target=_blank rel="noopener noreferrer">Improve explode func with array nested complex type #24455</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=important-bug-fixes>Important Bug fixes<a href=#important-bug-fixes class=hash-link aria-label="Direct link to Important Bug fixes" title="Direct link to Important Bug fixes">​</a></h2>
<ul>
<li><a href=https://github.com/apache/doris/pull/23601 target=_blank rel="noopener noreferrer">The parameter positions of timestamp diff function to sql are reversed #23601</a></li>
<li><a href=https://github.com/apache/doris/pull/23630 target=_blank rel="noopener noreferrer">Fix old optimizer with some array literal functions #23630</a></li>
<li><a href=https://github.com/apache/doris/pull/23555 target=_blank rel="noopener noreferrer">Fix query cache returns wrong result after deleting partitions. #23555</a></li>
<li><a href=https://github.com/apache/doris/pull/17644 target=_blank rel="noopener noreferrer">Fix potential data loss when clone task's dst tablet is cooldown replica #17644</a></li>
<li><a href=https://github.com/apache/doris/pull/23779 target=_blank rel="noopener noreferrer">Fix array map batch append data with right next_array_item_rowid #23779</a></li>
<li><a href=https://github.com/apache/doris/pull/23940 target=_blank rel="noopener noreferrer">Fix or to in rule #23940</a></li>
<li><a href=https://github.com/apache/doris/pull/23860 target=_blank rel="noopener noreferrer">Fix 'char' function's toSql implementation is wrong #23860</a></li>
<li><a href=https://github.com/apache/doris/pull/23973 target=_blank rel="noopener noreferrer">Record wrong best plan properties #23973</a></li>
<li><a href=https://github.com/apache/doris/pull/24020 target=_blank rel="noopener noreferrer">Make TVF's distribution spec always be RANDOM #24020</a></li>
<li><a href=https://github.com/apache/doris/pull/24039 target=_blank rel="noopener noreferrer">External scan use STORAGE_ANY instead of ANY as distibution #24039</a></li>
<li><a href=https://github.com/apache/doris/pull/23958 target=_blank rel="noopener noreferrer">Runtimefilter target is not SlotReference #23958</a></li>
<li><a href=https://github.com/apache/doris/pull/24104 target=_blank rel="noopener noreferrer">mv in select materialized_view should disable show table #24104</a></li>
<li><a href=https://github.com/apache/doris/pull/24097 target=_blank rel="noopener noreferrer">Fail over to remote file reader if local cache failed #24097</a></li>
<li><a href=https://github.com/apache/doris/pull/23852 target=_blank rel="noopener noreferrer">Fix revoke role operation cause fe down #23852</a></li>
<li><a href=https://github.com/apache/doris/pull/24139 target=_blank rel="noopener noreferrer">Handle status code correctly and add a new error code <code>ENTRY_NOT_FOUND</code> #24139</a></li>
<li><a href=https://github.com/apache/doris/pull/24165 target=_blank rel="noopener noreferrer">Fix leaky abstraction and shield the status code <code>END_OF_FILE</code> from upper layers #24165</a></li>
<li><a href=https://github.com/apache/doris/pull/24164 target=_blank rel="noopener noreferrer">Fix bug that Read garbled files caused be crash. #24164</a></li>
<li><a href=https://github.com/apache/doris/pull/24369 target=_blank rel="noopener noreferrer">Fix be core when user sepcified empty <code>column_separator</code> using hdfs tvf #24369</a></li>
<li><a href=https://github.com/apache/doris/pull/24372 target=_blank rel="noopener noreferrer">Fix need to restart BE after replacing the jar package in java-udf #24372</a></li>
<li><a href=https://github.com/apache/doris/pull/24381 target=_blank rel="noopener noreferrer">Need to call 'set_version' in nested functions #24381</a></li>
<li><a href=https://github.com/apache/doris/pull/24385 target=_blank rel="noopener noreferrer">windown_funnel compatibility issue with multi backends #24385</a></li>
<li><a href=https://github.com/apache/doris/pull/24290 target=_blank rel="noopener noreferrer">correlated anti join shouldn't be translated to null aware anti join #24290</a></li>
<li><a href=https://github.com/apache/doris/pull/24207 target=_blank rel="noopener noreferrer">Change ordinary type null value is \N,complex type null value is null #24207</a></li>
<li><a href=https://github.com/apache/doris/pull/24521 target=_blank rel="noopener noreferrer">Fix analyze failed when there are thousands of partitions. #24521</a></li>
<li><a href=https://github.com/apache/doris/pull/24460 target=_blank rel="noopener noreferrer">Do not use enum as the data type for JavaUdfDataType. #24460</a></li>
<li><a href=https://github.com/apache/doris/pull/24568 target=_blank rel="noopener noreferrer">Fix multi window projection issue temporarily #24568</a></li>
<li><a href=https://github.com/apache/doris/pull/24610 target=_blank rel="noopener noreferrer">Make metadata compatible with 2.0.3 #24610</a></li>
<li><a href=https://github.com/apache/doris/pull/24595 target=_blank rel="noopener noreferrer">Select outfile column order is wrong #24595</a></li>
<li><a href=https://github.com/apache/doris/pull/24616 target=_blank rel="noopener noreferrer">Incorrect result of semi/anti mark join #24616</a></li>
<li><a href=https://github.com/apache/doris/pull/24635 target=_blank rel="noopener noreferrer">Fix broker read issue #24635</a></li>
<li><a href=https://github.com/apache/doris/pull/24625 target=_blank rel="noopener noreferrer">Skip unknown col stats check on __internal_scheam and information_schema #24625</a></li>
<li><a href=https://github.com/apache/doris/pull/24572 target=_blank rel="noopener noreferrer">Fixed bug when parsing multi-character delimiters. #24572</a></li>
<li><a href=https://github.com/apache/doris/pull/24578 target=_blank rel="noopener noreferrer">Fix timezone parse when there is no tzfile #24578</a></li>
<li><a href=https://github.com/apache/doris/pull/23943 target=_blank rel="noopener noreferrer">We need to issue an error when starting FE without setting the Java home environment #23943</a></li>
<li><a href=https://github.com/apache/doris/pull/24697 target=_blank rel="noopener noreferrer">Enable_unique_key_partial_update should be forwarded to master #24697</a></li>
<li><a href=https://github.com/apache/doris/pull/24681 target=_blank rel="noopener noreferrer">Fix paimon file catalog meta issue and replication num analysis issue #24681</a></li>
<li><a href=https://github.com/apache/doris/pull/24617 target=_blank rel="noopener noreferrer">Add more log for ingest_binlog && Fix ingest_binlog not rewrite rowset_meta tablet_uid #24617</a></li>
<li><a href=https://github.com/apache/doris/pull/24692 target=_blank rel="noopener noreferrer">Do not abort when a disk is broken #24692</a></li>
<li><a href=https://github.com/apache/doris/pull/24700 target=_blank rel="noopener noreferrer">colocate join could not work well on full outer join #24700</a></li>
<li><a href=https://github.com/apache/doris/pull/24389 target=_blank rel="noopener noreferrer">Optimize unnecessary conversions #24389</a></li>
<li><a href=https://github.com/apache/doris/pull/24698 target=_blank rel="noopener noreferrer">Optimize the reading efficiency of nullable (string) columns. #24698</a></li>
<li><a href=https://github.com/apache/doris/pull/24778 target=_blank rel="noopener noreferrer">Fix segment cache core when output rowset is nullptr #24778</a></li>
<li><a href=https://github.com/apache/doris/pull/24782 target=_blank rel="noopener noreferrer">Fix duplicate key in schema change #24782</a></li>
<li><a href=https://github.com/apache/doris/pull/24800 target=_blank rel="noopener noreferrer">Make metadata compatible for future version after 2.0.2 #24800</a></li>
<li><a href=https://github.com/apache/doris/pull/24808 target=_blank rel="noopener noreferrer">Fix map/array deserialize string with quote pair #24808</a></li>
<li><a href=https://github.com/apache/doris/pull/24636 target=_blank rel="noopener noreferrer">Failed on arm platform, with clang compiler and pch on, close #24633 #24636</a></li>
<li><a href=https://github.com/apache/doris/pull/24981 target=_blank rel="noopener noreferrer">Table column order is changed if add a column and do truncate #24981</a></li>
<li><a href=https://github.com/apache/doris/pull/24949 target=_blank rel="noopener noreferrer">Make parser mode coarse grained by default #24949</a></li>
</ul>
<p>See the complete list of improvements and bug fixes on <a href="https://github.com/apache/doris/issues?q=label%3Adev%2F2.0.2-merged+is%3Aclosed" target=_blank rel="noopener noreferrer">github</a> .</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=big-thanks>Big Thanks<a href=#big-thanks class=hash-link aria-label="Direct link to Big Thanks" title="Direct link to Big Thanks">​</a></h2>
<p>Thanks all who contribute to this release:</p>
<p><a href=https://github.com/adonis0147 target=_blank rel="noopener noreferrer">@adonis0147</a> <a href=https://github.com/airborne12 target=_blank rel="noopener noreferrer">@airborne12</a> <a href=https://github.com/amorynan target=_blank rel="noopener noreferrer">@amorynan</a> <a href=https://github.com/AshinGau target=_blank rel="noopener noreferrer">@AshinGau</a> <a href=https://github.com/BePPPower target=_blank rel="noopener noreferrer">@BePPPower</a> <a href=https://github.com/BiteTheDDDDt target=_blank rel="noopener noreferrer">@BiteTheDDDDt</a> <a href=https://github.com/bobhan1 target=_blank rel="noopener noreferrer">@bobhan1</a> <a href=https://github.com/ByteYue target=_blank rel="noopener noreferrer">@ByteYue</a> <a href=https://github.com/caiconghui target=_blank rel="noopener noreferrer">@caiconghui</a> <a href=https://github.com/CalvinKirs target=_blank rel="noopener noreferrer">@CalvinKirs</a> <a href=https://github.com/cambyzju target=_blank rel="noopener noreferrer">@cambyzju</a> <a href=https://github.com/ChengDaqi2023 target=_blank rel="noopener noreferrer">@ChengDaqi2023</a> <a href=https://github.com/ChinaYiGuan target=_blank rel="noopener noreferrer">@ChinaYiGuan</a> <a href=https://github.com/CodeCooker17 target=_blank rel="noopener noreferrer">@CodeCooker17</a> <a href=https://github.com/csun5285 target=_blank rel="noopener noreferrer">@csun5285</a> <a href=https://github.com/dataroaring target=_blank rel="noopener noreferrer">@dataroaring</a> <a href=https://github.com/deadlinefen target=_blank rel="noopener noreferrer">@deadlinefen</a> <a href=https://github.com/DongLiang-0 target=_blank rel="noopener noreferrer">@DongLiang-0</a> <a href=https://github.com/Doris-Extras target=_blank rel="noopener noreferrer">@Doris-Extras</a> <a href=https://github.com/dutyu target=_blank rel="noopener noreferrer">@dutyu</a> <a href=https://github.com/eldenmoon target=_blank rel="noopener noreferrer">@eldenmoon</a> <a href=https://github.com/englefly target=_blank rel="noopener noreferrer">@englefly</a> <a href=https://github.com/freemandealer target=_blank rel="noopener noreferrer">@freemandealer</a> <a href=https://github.com/Gabriel39 target=_blank rel="noopener noreferrer">@Gabriel39</a> <a href=https://github.com/gnehil target=_blank rel="noopener noreferrer">@gnehil</a> <a href=https://github.com/GoGoWen target=_blank rel="noopener noreferrer">@GoGoWen</a> <a href=https://github.com/gohalo target=_blank rel="noopener noreferrer">@gohalo</a> <a href=https://github.com/HappenLee target=_blank rel="noopener noreferrer">@HappenLee</a> <a href=https://github.com/hello-stephen target=_blank rel="noopener noreferrer">@hello-stephen</a> <a href=https://github.com/HHoflittlefish777 target=_blank rel="noopener noreferrer">@HHoflittlefish777</a> <a href=https://github.com/hubgeter target=_blank rel="noopener noreferrer">@hubgeter</a> <a href=https://github.com/hust-hhb target=_blank rel="noopener noreferrer">@hust-hhb</a> <a href=https://github.com/ixzc target=_blank rel="noopener noreferrer">@ixzc</a> <a href=https://github.com/JackDrogon target=_blank rel="noopener noreferrer">@JackDrogon</a> <a href=https://github.com/jacktengg target=_blank rel="noopener noreferrer">@jacktengg</a> <a href=https://github.com/jackwener target=_blank rel="noopener noreferrer">@jackwener</a> <a href=https://github.com/Jibing-Li target=_blank rel="noopener noreferrer">@Jibing-Li</a> <a href=https://github.com/JNSimba target=_blank rel="noopener noreferrer">@JNSimba</a> <a href=https://github.com/kaijchen target=_blank rel="noopener noreferrer">@kaijchen</a> <a href=https://github.com/kaka11chen target=_blank rel="noopener noreferrer">@kaka11chen</a> <a href=https://github.com/Kikyou1997 target=_blank rel="noopener noreferrer">@Kikyou1997</a> <a href=https://github.com/Lchangliang target=_blank rel="noopener noreferrer">@Lchangliang</a> <a href=https://github.com/LemonLiTree target=_blank rel="noopener noreferrer">@LemonLiTree</a> <a href=https://github.com/liaoxin01 target=_blank rel="noopener noreferrer">@liaoxin01</a> <a href=https://github.com/LiBinfeng-01 target=_blank rel="noopener noreferrer">@LiBinfeng-01</a> <a href=https://github.com/liugddx target=_blank rel="noopener noreferrer">@liugddx</a> <a href=https://github.com/luwei16 target=_blank rel="noopener noreferrer">@luwei16</a> <a href=https://github.com/mongo360 target=_blank rel="noopener noreferrer">@mongo360</a> <a href=https://github.com/morningman target=_blank rel="noopener noreferrer">@morningman</a> <a href=https://github.com/morrySnow target=_blank rel="noopener noreferrer">@morrySnow</a> @mrhhsg @Mryange @mymeiyi @neuyilan @pingchunzhang @platoneko @qidaye @realize096 @RYH61 @shuke987 @sohardforaname @starocean999 @SWJTU-ZhangLei @TangSiyang2001 @Tech-Circle-48 @w41ter @wangbo @wsjz @wuwenchi @wyx123654 @xiaokang @XieJiann @xinyiZzz @XuJianxu @xutaoustc @xy720 @xyfsjq @xzj7019 @yiguolei @yujun777 @Yukang-Lian @Yulei-Yang @zclllyybb @zddr @zhangguoqiang666 @zhangstar333 @ZhangYu0123 @zhannngchen @zxealous @zy-kkk @zzzxl1993 @zzzzzzzs</div></div></article><article class=margin-bottom--xl itemprop=blogPost itemscope itemtype=http://schema.org/BlogPosting><div class=markdown itemprop=articleBody><header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href=/blog/>Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class=s-tags><span class=s-tag>Release Notes</span></span></span></div><h2 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop=headline><a itemprop=url href=/blog/release-note-1.2.7/>Apache Doris announced the official release of version 1.2.7</a></h2><div class="blog-info text-center flex justify-center text-sm text-black"><span class=authors><span class="s-author text-black">Apache Doris</span></span><time datetime=2023-09-04T00:00:00.000Z itemprop=datePublished class="text-black ml-4">September 4, 2023</time></div></header><div class=markdown itemprop=articleBody><h2 class="anchor anchorWithStickyNavbar_LWe7" id=bug-fixes>Bug Fixes<a href=#bug-fixes class=hash-link aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h2>
<ul>
<li>Fixed some query issues.</li>
<li>Fix some storage issues.</li>
<li>Fix some decimal precision issues.</li>
<li>Fix query error caused by invalid <code>sql_select_limit</code> session variable's value.</li>
<li>Fix the problem that hdfs short-circuit read cannot be used.</li>
<li>Fix the problem that Tencent Cloud cosn cannot be accessed.</li>
<li>Fix several issues with hive catalog kerberos access.</li>
<li>Fix the problem that stream load profile cannot be used.</li>
<li>Fix promethus monitoring parameter format problem.</li>
<li>Fix the table creation timeout issue when creating a large number of tablets.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=new-features>New Features<a href=#new-features class=hash-link aria-label="Direct link to New Features" title="Direct link to New Features">​</a></h2>
<ul>
<li>Unique Key model supports array type as value column</li>
<li>Added <code>have_query_cache</code> variable for compatibility with MySQL ecosystem.</li>
<li>Added <code>enable_strong_consistency_read</code> to support strong consistent read between sessions</li>
<li>FE metrics supports user-level query counter</li>
</ul></div></div></article><article class=margin-bottom--xl itemprop=blogPost itemscope itemtype=http://schema.org/BlogPosting><div class=markdown itemprop=articleBody><header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href=/blog/>Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class=s-tags><span class=s-tag>Release Notes</span></span></span></div><h2 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop=headline><a itemprop=url href=/blog/release-note-2.0.1/>Apache Doris announced the official release of version 2.0.1</a></h2><div class="blog-info text-center flex justify-center text-sm text-black"><span class=authors><span class="s-author text-black">Apache Doris</span></span><time datetime=2023-09-04T00:00:00.000Z itemprop=datePublished class="text-black ml-4">September 4, 2023</time></div></header><div class=markdown itemprop=articleBody><p>Thanks to our community users and developers, 383 improvements and bug fixes have been made in Doris 2.0.1.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=behavior-changes>Behavior changes<a href=#behavior-changes class=hash-link aria-label="Direct link to Behavior changes" title="Direct link to Behavior changes">​</a></h2>
<ul>
<li><a href=https://github.com/apache/doris/pull/21302 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/21302</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=improvements>Improvements<a href=#improvements class=hash-link aria-label="Direct link to Improvements" title="Direct link to Improvements">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=functionality-and-stability-of-array-and-map-datatypes>Functionality and stability of array and map datatypes<a href=#functionality-and-stability-of-array-and-map-datatypes class=hash-link aria-label="Direct link to Functionality and stability of array and map datatypes" title="Direct link to Functionality and stability of array and map datatypes">​</a></h3>
<ul>
<li><a href=https://github.com/apache/doris/pull/22793 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/22793</a></li>
<li><a href=https://github.com/apache/doris/pull/22927 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/22927</a></li>
<li><a href=https://github.com/apache/doris/pull/22738 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/22738</a></li>
<li><a href=https://github.com/apache/doris/pull/22347 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/22347</a></li>
<li><a href=https://github.com/apache/doris/pull/23250 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/23250</a></li>
<li><a href=https://github.com/apache/doris/pull/22300 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/22300</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=performance-for-inverted-index-query>Performance for inverted index query<a href=#performance-for-inverted-index-query class=hash-link aria-label="Direct link to Performance for inverted index query" title="Direct link to Performance for inverted index query">​</a></h3>
<ul>
<li><a href=https://github.com/apache/doris/pull/22836 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/22836</a></li>
<li><a href=https://github.com/apache/doris/pull/23381 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/23381</a></li>
<li><a href=https://github.com/apache/doris/pull/23389 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/23389</a></li>
<li><a href=https://github.com/apache/doris/pull/22570 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/22570</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=performance-for-bitmap-like-scan-agg-functions>Performance for bitmap, like, scan, agg functions<a href=#performance-for-bitmap-like-scan-agg-functions class=hash-link aria-label="Direct link to Performance for bitmap, like, scan, agg functions" title="Direct link to Performance for bitmap, like, scan, agg functions">​</a></h3>
<ul>
<li><a href=https://github.com/apache/doris/pull/23172 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/23172</a></li>
<li><a href=https://github.com/apache/doris/pull/23495 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/23495</a></li>
<li><a href=https://github.com/apache/doris/pull/23476 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/23476</a></li>
<li><a href=https://github.com/apache/doris/pull/23396 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/23396</a></li>
<li><a href=https://github.com/apache/doris/pull/23182 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/23182</a></li>
<li><a href=https://github.com/apache/doris/pull/22216 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/22216</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=functionality-and-stability-of-ccr>Functionality and stability of CCR<a href=#functionality-and-stability-of-ccr class=hash-link aria-label="Direct link to Functionality and stability of CCR" title="Direct link to Functionality and stability of CCR">​</a></h3>
<ul>
<li><a href=https://github.com/apache/doris/pull/22447 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/22447</a></li>
<li><a href=https://github.com/apache/doris/pull/22559 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/22559</a></li>
<li><a href=https://github.com/apache/doris/pull/22173 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/22173</a></li>
<li><a href=https://github.com/apache/doris/pull/22678 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/22678</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=merge-on-write-unique-table>Merge on write unique table<a href=#merge-on-write-unique-table class=hash-link aria-label="Direct link to Merge on write unique table" title="Direct link to Merge on write unique table">​</a></h3>
<ul>
<li><a href=https://github.com/apache/doris/pull/22282 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/22282</a></li>
<li><a href=https://github.com/apache/doris/pull/22984 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/22984</a></li>
<li><a href=https://github.com/apache/doris/pull/21933 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/21933</a></li>
<li><a href=https://github.com/apache/doris/pull/22874 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/22874</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=optimizer-table-stats-and-analyze>Optimizer table stats and analyze<a href=#optimizer-table-stats-and-analyze class=hash-link aria-label="Direct link to Optimizer table stats and analyze" title="Direct link to Optimizer table stats and analyze">​</a></h3>
<ul>
<li><a href=https://github.com/apache/doris/pull/22658 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/22658</a></li>
<li><a href=https://github.com/apache/doris/pull/22211 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/22211</a></li>
<li><a href=https://github.com/apache/doris/pull/22775 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/22775</a></li>
<li><a href=https://github.com/apache/doris/pull/22896 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/22896</a></li>
<li><a href=https://github.com/apache/doris/pull/22788 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/22788</a></li>
<li><a href=https://github.com/apache/doris/pull/22882 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/22882</a></li>
<li></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=functionality-and-performance-of-multi-catalog>Functionality and performance of multi catalog<a href=#functionality-and-performance-of-multi-catalog class=hash-link aria-label="Direct link to Functionality and performance of multi catalog" title="Direct link to Functionality and performance of multi catalog">​</a></h3>
<ul>
<li><a href=https://github.com/apache/doris/pull/22949 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/22949</a></li>
<li><a href=https://github.com/apache/doris/pull/22923 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/22923</a></li>
<li><a href=https://github.com/apache/doris/pull/22336 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/22336</a></li>
<li><a href=https://github.com/apache/doris/pull/22915 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/22915</a></li>
<li><a href=https://github.com/apache/doris/pull/23056 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/23056</a></li>
<li><a href=https://github.com/apache/doris/pull/23297 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/23297</a></li>
<li><a href=https://github.com/apache/doris/pull/23279 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/23279</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=bug-fixes>Bug fixes<a href=#bug-fixes class=hash-link aria-label="Direct link to Bug fixes" title="Direct link to Bug fixes">​</a></h2>
<ul>
<li><a href=https://github.com/apache/doris/pull/22673 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/22673</a></li>
<li><a href=https://github.com/apache/doris/pull/22656 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/22656</a></li>
<li><a href=https://github.com/apache/doris/pull/22892 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/22892</a></li>
<li><a href=https://github.com/apache/doris/pull/22959 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/22959</a></li>
<li><a href=https://github.com/apache/doris/pull/22902 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/22902</a></li>
<li><a href=https://github.com/apache/doris/pull/22976 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/22976</a></li>
<li><a href=https://github.com/apache/doris/pull/22734 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/22734</a></li>
<li><a href=https://github.com/apache/doris/pull/22840 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/22840</a></li>
<li><a href=https://github.com/apache/doris/pull/23008 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/23008</a></li>
<li><a href=https://github.com/apache/doris/pull/23003 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/23003</a></li>
<li><a href=https://github.com/apache/doris/pull/22966 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/22966</a></li>
<li><a href=https://github.com/apache/doris/pull/22965 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/22965</a></li>
<li><a href=https://github.com/apache/doris/pull/22784 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/22784</a></li>
<li><a href=https://github.com/apache/doris/pull/23049 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/23049</a></li>
<li><a href=https://github.com/apache/doris/pull/23084 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/23084</a></li>
<li><a href=https://github.com/apache/doris/pull/22947 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/22947</a></li>
<li><a href=https://github.com/apache/doris/pull/22919 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/22919</a></li>
<li><a href=https://github.com/apache/doris/pull/22979 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/22979</a></li>
<li><a href=https://github.com/apache/doris/pull/23096 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/23096</a></li>
<li><a href=https://github.com/apache/doris/pull/23113 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/23113</a></li>
<li><a href=https://github.com/apache/doris/pull/23062 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/23062</a></li>
<li><a href=https://github.com/apache/doris/pull/22918 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/22918</a></li>
<li><a href=https://github.com/apache/doris/pull/23026 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/23026</a></li>
<li><a href=https://github.com/apache/doris/pull/23175 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/23175</a></li>
<li><a href=https://github.com/apache/doris/pull/23167 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/23167</a></li>
<li><a href=https://github.com/apache/doris/pull/23015 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/23015</a></li>
<li><a href=https://github.com/apache/doris/pull/23165 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/23165</a></li>
<li><a href=https://github.com/apache/doris/pull/23264 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/23264</a></li>
<li><a href=https://github.com/apache/doris/pull/23246 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/23246</a></li>
<li><a href=https://github.com/apache/doris/pull/23198 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/23198</a></li>
<li><a href=https://github.com/apache/doris/pull/23221 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/23221</a></li>
<li><a href=https://github.com/apache/doris/pull/23277 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/23277</a></li>
<li><a href=https://github.com/apache/doris/pull/23249 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/23249</a></li>
<li><a href=https://github.com/apache/doris/pull/23272 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/23272</a></li>
<li><a href=https://github.com/apache/doris/pull/23383 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/23383</a></li>
<li><a href=https://github.com/apache/doris/pull/23372 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/23372</a></li>
<li><a href=https://github.com/apache/doris/pull/23399 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/23399</a></li>
<li><a href=https://github.com/apache/doris/pull/23295 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/23295</a></li>
<li><a href=https://github.com/apache/doris/pull/23446 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/23446</a></li>
<li><a href=https://github.com/apache/doris/pull/23406 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/23406</a></li>
<li><a href=https://github.com/apache/doris/pull/23387 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/23387</a></li>
<li><a href=https://github.com/apache/doris/pull/23421 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/23421</a></li>
<li><a href=https://github.com/apache/doris/pull/23456 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/23456</a></li>
<li><a href=https://github.com/apache/doris/pull/23361 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/23361</a></li>
<li><a href=https://github.com/apache/doris/pull/23402 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/23402</a></li>
<li><a href=https://github.com/apache/doris/pull/23369 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/23369</a></li>
<li><a href=https://github.com/apache/doris/pull/23245 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/23245</a></li>
<li><a href=https://github.com/apache/doris/pull/23532 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/23532</a></li>
<li><a href=https://github.com/apache/doris/pull/23529 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/23529</a></li>
<li><a href=https://github.com/apache/doris/pull/23601 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/23601</a></li>
</ul>
<p>See the complete list of improvements and bug fixes on <a href="https://github.com/apache/doris/issues?q=label%3Adev%2F2.0.1-merged+is%3Aclosed" target=_blank rel="noopener noreferrer">github</a> .</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=credits>Credits<a href=#credits class=hash-link aria-label="Direct link to Credits" title="Direct link to Credits">​</a></h2>
<p>Thanks all who contribute to this release:</p>
<p>@adonis0147
@airborne12
@amorynan
@AshinGau
@BePPPower
@BiteTheDDDDt
@bobhan1
@ByteYue
@caiconghui
@CalvinKirs
@csun5285
@DarvenDuan
@deadlinefen
@DongLiang-0
@Doris-Extras
@dutyu
@englefly
@freemandealer
@Gabriel39
@GoGoWen
@HappenLee
@hello-stephen
@HHoflittlefish777
@hubgeter
@hust-hhb
@JackDrogon
@jacktengg
@jackwener
@Jibing-Li
@kaijchen
@kaka11chen
@Kikyou1997
@Lchangliang
@LemonLiTree
@liaoxin01
@LiBinfeng-01
@lsy3993
@luozenglin
@morningman
@morrySnow
@mrhhsg
@Mryange
@mymeiyi
@shuke987
@sohardforaname
@starocean999
@TangSiyang2001
@Tanya-W
@ucasfl
@vinlee19
@wangbo
@wsjz
@wuwenchi
@xiaokang
@XieJiann
@xinyiZzz
@yujun777
@Yukang-Lian
@Yulei-Yang
@zclllyybb
@zddr
@zenoyang
@zgxme
@zhangguoqiang666
@zhangstar333
@zhannngchen
@zhiqiang-hhhh
@zxealous
@zy-kkk
@zzzxl1993
@zzzzzzzs</div></div></article><article class=margin-bottom--xl itemprop=blogPost itemscope itemtype=http://schema.org/BlogPosting><div class=markdown itemprop=articleBody><header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href=/blog/>Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class=s-tags><span class=s-tag>Release Notes</span></span></span></div><h2 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop=headline><a itemprop=url href=/blog/release-note-2.0.0/>New milestone: Apache Doris 2.0.0 just released</a></h2><div class="blog-info text-center flex justify-center text-sm text-black"><span class=authors><span class="s-author text-black">Apache Doris</span></span><time datetime=2023-08-16T00:00:00.000Z itemprop=datePublished class="text-black ml-4">August 16, 2023</time></div></header><div class=markdown itemprop=articleBody><p>We are more than excited to announce that, after six months of coding, testing, and fine-tuning, Apache Doris 2.0.0 is now production-ready. Special thanks to the 275 committers who altogether contributed over 4100 optimizations and fixes to the project.</p>
<p>This new version highlights:</p>
<ul>
<li>10 times faster data queries</li>
<li>Enhanced log analytic and federated query capabilities</li>
<li>More efficient data writing and updates</li>
<li>Improved multi-tenant and resource isolation mechanisms</li>
<li>Progresses in elastic scaling of resources and storage-compute separation</li>
<li>Enterprise-facing features for higher usability</li>
</ul>
<blockquote>
<p>Download: <a href=https://doris.apache.org/download target=_blank rel="noopener noreferrer">https://doris.apache.org/download</a></p>
<p>GitHub source code: <a href=https://github.com/apache/doris/releases/tag/2.0.0-rc04 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/releases/tag/2.0.0-rc04</a></p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=a-10-times-performance-increase><strong>A 10 Times Performance Increase</strong><a href=#a-10-times-performance-increase class=hash-link aria-label="Direct link to a-10-times-performance-increase" title="Direct link to a-10-times-performance-increase">​</a></h2>
<p>In SSB-Flat and TPC-H benchmarking, Apache Doris 2.0.0 delivered <strong>over 10-time faster query performance</strong> compared to an early version of Apache Doris.</p>
<p><img decoding=async loading=lazy alt=TPCH-benchmark-SSB-Flat-benchmark src=/assets/images/release-note-2.0.0-1-876d7d5b2307bad4190500815eca710a.png width=1724 height=744 class=img_ev3q></p>
<p>This is realized by the introduction of a smarter query optimizer, inverted index, a parallel execution model, and a series of new functionalities to support high-concurrency point queries.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=a-smarter-query-optimizer>A smarter query optimizer<a href=#a-smarter-query-optimizer class=hash-link aria-label="Direct link to A smarter query optimizer" title="Direct link to A smarter query optimizer">​</a></h3>
<p>The brand new query optimizer, Nereids, has a richer statistical base and adopts the Cascades framework. It is capable of self-tuning in most query scenarios and supports all 99 SQLs in TPC-DS, so users can expect high performance without any fine-tuning or SQL rewriting.</p>
<p>TPC-H tests showed that Nereids, with no human intervention, outperformed the old query optimizer by a wide margin. Over 100 users have tried Apache Doris 2.0.0 in their production environment and the vast majority of them reported huge speedups in query execution.</p>
<p><img decoding=async loading=lazy alt=Nereids-optimizer-TPCH src=/assets/images/release-note-2.0.0-2-01156d489e9907a7bc6c424d0bcd41c9.png width=1280 height=631 class=img_ev3q></p>
<p><strong>Doc</strong>: <a href=https://doris.apache.org/docs/dev/query-acceleration/nereids/ target=_blank rel="noopener noreferrer">https://doris.apache.org/docs/dev/query-acceleration/nereids/</a></p>
<p>Nereids is enabled by default in Apache Doris 2.0.0: <code>SET enable_nereids_planner=true</code>. Nereids collects statistical data by calling the Analyze command.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=inverted-index>Inverted Index<a href=#inverted-index class=hash-link aria-label="Direct link to Inverted Index" title="Direct link to Inverted Index">​</a></h3>
<p>In Apache Doris 2.0.0, we introduced <a href="https://doris.apache.org/docs/dev/data-table/index/inverted-index?_highlight=inverted" target=_blank rel="noopener noreferrer">inverted index</a> to better support fuzzy keyword search, equivalence queries, and range queries.</p>
<p>A smartphone manufacturer tested Apache Doris 2.0.0 in their user behavior analysis scenarios. With inverted index enabled, v2.0.0 was able to finish the queries within milliseconds and maintain stable performance as the query concurrency level went up. In this case, it is 5 to 90 times faster than its old version.</p>
<p><img decoding=async loading=lazy alt=inverted-index-performance src=/assets/images/release-note-2.0.0-3-9abcfa6e282014f53bb04009b1d2623d.png width=1718 height=736 class=img_ev3q></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=20-times-higher-concurrency-capability>20 times higher concurrency capability<a href=#20-times-higher-concurrency-capability class=hash-link aria-label="Direct link to 20 times higher concurrency capability" title="Direct link to 20 times higher concurrency capability">​</a></h3>
<p>In scenarios like e-commerce order queries and express tracking, a huge number of end data users search for a certain data record simultaneously. These are what we call high-concurrency point queries, which can bring huge pressure on the system. A traditional solution is to introduce Key-Value stores like Apache HBase for such queries, and Redis as a cache layer to ease the burden, but that means redundant storage and higher maintenance costs.</p>
<p>For a column-oriented DBMS like Apache Doris, the I/O usage of point queries will be multiplied. We need neater execution. Thus, on the basis of columnar storage, we added row storage format and row cache to increase row reading efficiency, short-circuit plans to speed up data retrieval, and prepared statements to reduce frontend overheads.</p>
<p>After these optimizations, Apache Doris 2.0 reached a concurrency level of <strong>30,000 QPS per node</strong> on YCSB on a 16 Core 64G cloud server with 4×1T hard drives, representing an improvement of <strong>20 times</strong> compared to its older version. This makes Apache Doris a good alternative to HBase in high-concurrency scenarios, so that users don't need to endure extra maintenance costs and redundant storage brought by complicated tech stacks.</p>
<p>Read more: <a href=https://doris.apache.org/blog/How-We-Increased-Database-Query-Concurrency-by-20-Times target=_blank rel="noopener noreferrer">https://doris.apache.org/blog/How-We-Increased-Database-Query-Concurrency-by-20-Times</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=a-self-adaptive-parallel-execution-model>A self-adaptive parallel execution model<a href=#a-self-adaptive-parallel-execution-model class=hash-link aria-label="Direct link to A self-adaptive parallel execution model" title="Direct link to A self-adaptive parallel execution model">​</a></h3>
<p>Apache 2.0 brought in a Pipeline execution model for higher efficiency and stability in hybrid analytic workloads. In this model, the execution of queries is driven by data. The blocking operators in all query execution processes are split into pipelines. Whether a pipeline gets an execution thread depends on whether its relevant data is ready. This enables asynchronous blocking operations and more flexible system resource management. Also, this improves CPU efficiency as the system doesn't have to create and destroy threads that much.</p>
<p>Doc: <a href=https://doris.apache.org/docs/dev/query-acceleration/pipeline-execution-engine/ target=_blank rel="noopener noreferrer">https://doris.apache.org/docs/dev/query-acceleration/pipeline-execution-engine/</a></p>
<p><strong>How to enable the Pipeline execution model</strong></p>
<ul>
<li>The Pipeline execution engine is enabled by default in Apache Doris 2.0: <code>Set enable_pipeline_engine = true</code>.</li>
<li><code>parallel_pipeline_task_num</code> represents the number of pipeline tasks that are parallelly executed in SQL queries. The default value of it is <code>0</code>, which means Apache Doris will automatically set the concurrency level to half the number of CPUs in each backend node. Users can change this value as they need it.</li>
<li>For those who are upgrading to Apache Doris 2.0 from an older version, it is recommended to set the value of <code>parallel_pipeline_task_num</code> to that of <code>parallel_fragment_exec_instance_num</code> in the old version.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=a-unified-platform-for-multiple-analytic-workloads>A Unified Platform for Multiple Analytic Workloads<a href=#a-unified-platform-for-multiple-analytic-workloads class=hash-link aria-label="Direct link to A Unified Platform for Multiple Analytic Workloads" title="Direct link to A Unified Platform for Multiple Analytic Workloads">​</a></h2>
<p>Apache Doris has been pushing its boundaries. Starting as an OLAP engine for reporting, it is now a data warehouse capable of ETL/ELT and more. Version 2.0 is making advancements in its log analysis and data lakehousing capabilities.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=a-10-times-more-cost-effective-log-analysis-solution>A 10 times more cost-effective log analysis solution<a href=#a-10-times-more-cost-effective-log-analysis-solution class=hash-link aria-label="Direct link to A 10 times more cost-effective log analysis solution" title="Direct link to A 10 times more cost-effective log analysis solution">​</a></h3>
<p>Apache Doris 2.0.0 provides native support for semi-structured data. In addition to JSON and Array, it now supports a complex data type: Map. Based on Light Schema Change, it also supports Schema Evolution, which means you can adjust the schema as your business changes. You can add or delete fields and indexes, and change the data types for fields. As we introduced inverted index and a high-performance text analysis algorithm into it, it can execute full-text search and dimensional analysis of logs more efficiently. With faster data writing and query speed and lower storage cost, it is 10 times more cost-effective than the common log analytic solution within the industry.</p>
<p><img decoding=async loading=lazy alt=Apache-Doris-VS-Elasticsearch src=/assets/images/release-note-2.0.0-4-1e3ed90c197a9f3a5e853cb854f8f56e.png width=1280 height=725 class=img_ev3q></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=enhanced-data-lakehousing-capabilities>Enhanced data lakehousing capabilities<a href=#enhanced-data-lakehousing-capabilities class=hash-link aria-label="Direct link to Enhanced data lakehousing capabilities" title="Direct link to Enhanced data lakehousing capabilities">​</a></h3>
<p>In Apache Doris 1.2, we introduced Multi-Catalog to allow for auto-mapping and auto-synchronization of data from heterogeneous sources. In version 2.0.0, we extended the list of data sources supported and optimized Doris for based on users' needs in production environment.</p>
<p><img decoding=async loading=lazy alt=Apache-Doris-data-lakehouse src=/assets/images/release-note-2.0.0-5-f438663781fa9c4da57e1b08cd360d7a.png width=1708 height=724 class=img_ev3q></p>
<p>Apache Doris 2.0.0 supports dozens of data sources including Hive, Hudi, Iceberg, Paimon, MaxCompute, Elasticsearch, Trino, ClickHouse, and almost all open lakehouse formats. It also supports snapshot queries on Hudi Copy-on-Write tables and read optimized queries on Hudi Merge-on-Read tables. It allows for authorization of Hive Catalog using Apache Ranger, so users can reuse their existing privilege control system. Besides, it supports extensible authorization plug-ins to enable user-defined authorization methods for any catalog.</p>
<p>TPC-H benchmark tests showed that Apache Doris 2.0.0 is 3~5 times faster than Presto/Trino in queries on Hive tables. This is realized by all-around optimizations (in small file reading, flat table reading, local file cache, ORC/Parquet file reading, Compute Nodes, and information collection of external tables) finished in this development cycle and the distributed execution framework, vectorized execution engine, and query optimizer of Apache Doris.</p>
<p><img decoding=async loading=lazy alt=Apache-Doris-VS-Trino src=/assets/images/release-note-2.0.0-6-e12c23ddbbd23aa017fe3cecf1847f48.png width=1722 height=728 class=img_ev3q></p>
<p>All this gives Apache Doris 2.0.0 an edge in data lakehousing scenarios. With Doris, you can do incremental or overall synchronization of multiple upstream data sources in one place, and expect much higher data query performance than other query engines. The processed data can be written back to the sources or provided for downstream systems. In this way, you can make Apache Doris your unified data analytic gateway.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=efficient-data-update>Efficient Data Update<a href=#efficient-data-update class=hash-link aria-label="Direct link to Efficient Data Update" title="Direct link to Efficient Data Update">​</a></h2>
<p>Data update is important in real-time analysis, since users want to always be accessible to the latest data, and be able to update data flexibly, such as updating a row or just a few columns, batching updating or deleting their specified data, or even overwriting a whole data partition.</p>
<p>Efficient data updating has been another hill to climb in data analysis. Apache Hive only supports updates on the partition level, while Hudi and Iceberg do better in low-frequency batch updates instead of real-time updates due to their Merge-on-Read and Copy-on-Write implementations.</p>
<p>As for data updating, Apache Doris 2.0.0 is capable of:</p>
<ul>
<li><strong>Faster data writing</strong>: In the pressure tests with an online payment platform, under 20 concurrent data writing tasks, Doris reached a writing throughput of 300,000 records per second and maintained stability throughout the over 10-hour continuous writing process.</li>
<li><strong>Partial column update</strong>: Older versions of Doris implements partial column update by <code>replace_if_not_null</code> in the Aggregate Key model. In 2.0.0, we enable partial column updates in the Unique Key model. That means you can directly write data from multiple source tables into a flat table, without having to concatenate them into one output stream using Flink before writing. This method avoids a complicated processing pipeline and the extra resource consumption. You can simply specify the columns you need to update.</li>
<li><strong>Conditional update and deletion</strong>: In addition to the simple Update and Delete operations, we realize complicated conditional updates and deletes operations on the basis of Merge-on-Write.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=faster-stabler-and-smarter-data-writing>Faster, Stabler, and Smarter Data Writing<a href=#faster-stabler-and-smarter-data-writing class=hash-link aria-label="Direct link to Faster, Stabler, and Smarter Data Writing" title="Direct link to Faster, Stabler, and Smarter Data Writing">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=higher-speed-in-data-writing>Higher speed in data writing<a href=#higher-speed-in-data-writing class=hash-link aria-label="Direct link to Higher speed in data writing" title="Direct link to Higher speed in data writing">​</a></h3>
<p>As part of our continuing effort to strengthen the real-time analytic capability of Apache Doris, we have improved the end-to-end real-time data writing capability of version 2.0.0. Benchmark tests reported higher throughput in various writing methods:</p>
<ul>
<li>Stream Load, TPC-H 144G lineitem table, 48-bucket Duplicate table, triple-replica writing: throughput increased by 100%</li>
<li>Stream Load, TPC-H 144G lineitem table, 48-bucket Unique Key table, triple-replica writing: throughput increased by 200%</li>
<li>Insert Into Select, TPC-H 144G lineitem table, 48-bucket Duplicate table: throughput increased by 50%</li>
<li>Insert Into Select, TPC-H 144G lineitem table, 48-bucket Unique Key table: throughput increased by 150%</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=greater-stability-in-high-concurrency-data-writing>Greater stability in high-concurrency data writing<a href=#greater-stability-in-high-concurrency-data-writing class=hash-link aria-label="Direct link to Greater stability in high-concurrency data writing" title="Direct link to Greater stability in high-concurrency data writing">​</a></h3>
<p>The sources of system instability often includes small file merging, write amplification, and the consequential disk I/O and CPU overheads. Hence, we introduced Vertical Compaction and Segment Compaction in version 2.0.0 to eliminate OOM errors in compaction and avoid the generation of too many segment files during data writing. After such improvements, Apache Doris can write data 50% faster while <strong>using only 10% of the memory that it previously used</strong>.</p>
<p>Read more: <a href=https://doris.apache.org/blog/Understanding-Data-Compaction-in-3-Minutes/ target=_blank rel="noopener noreferrer">https://doris.apache.org/blog/Understanding-Data-Compaction-in-3-Minutes/</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=auto-synchronization-of-table-schema>Auto-synchronization of table schema<a href=#auto-synchronization-of-table-schema class=hash-link aria-label="Direct link to Auto-synchronization of table schema" title="Direct link to Auto-synchronization of table schema">​</a></h3>
<p>The latest Flink-Doris-Connector allows users to synchronize an entire database (such as MySQL and Oracle) to Apache Doris by one simple step. According to our test results, one single synchronization task can support the real-time concurrent writing of thousands of tables. Users no longer need to go through a complicated synchronization procedure because Apache Doris has automated the process. Changes in the upstream data schema will be automatically captured and dynamically updated to Apache Doris in a seamless manner.</p>
<p>Read more: <a href=https://doris.apache.org/blog/Auto-Synchronization-of-an-Entire-MySQL-Database-for-Data-Analysis target=_blank rel="noopener noreferrer">https://doris.apache.org/blog/Auto-Synchronization-of-an-Entire-MySQL-Database-for-Data-Analysis</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=a-new-multi-tenant-resource-isolation-solution>A New Multi-Tenant Resource Isolation Solution<a href=#a-new-multi-tenant-resource-isolation-solution class=hash-link aria-label="Direct link to A New Multi-Tenant Resource Isolation Solution" title="Direct link to A New Multi-Tenant Resource Isolation Solution">​</a></h2>
<p>The purpose of multi-tenant resource isolation is to avoid resource preemption in the case of heavy loads. For that sake, older versions of Apache Doris adopted a hard isolation plan featured by Resource Group: Backend nodes of the same Doris cluster would be tagged, and those of the same tag formed a Resource Group. As data was ingested into the database, different data replicas would be written into different Resource Groups, which will be responsible for different workloads. For example, data reading and writing will be conducted on different data tablets, so as to realize read-write separation. Similarly, you can also put online and offline business on different Resource Groups.</p>
<p><img decoding=async loading=lazy alt=resource-isolation src=/assets/images/release-note-2.0.0-7-55f4a01b41924f345f92ce1f8315dca9.png width=1823 height=977 class=img_ev3q></p>
<p>This is an effective solution, but in practice, it happens that some Resource Groups are heavily occupied while others are idle. We want a more flexible way to reduce vacancy rate of resources. Thus, in 2.0.0, we introduce Workload Group resource soft limit.</p>
<p><img decoding=async loading=lazy alt=workload-group src=/assets/images/release-note-2.0.0-8-786bcb555e7791f51a591291ed105021.png width=1166 height=362 class=img_ev3q></p>
<p>The idea is to divide workloads into groups to allow for flexible management of CPU and memory resources. Apache Doris associates a query with a Workload Group, and limits the percentage of CPU and memory that a single query can use on a backend node. The memory soft limit can be configured and enabled by the user.</p>
<p>When there is a cluster resource shortage, the system will kill the largest memory-consuming query tasks; when there are sufficient cluster resources, once a Workload Group uses more resources than expected, the idle cluster resources will be shared among all the Workload Groups to give full play to the system memory and ensure stable execution of queries. You can also prioritize the Workload Groups in terms of resource allocation. In other words, you can decide which tasks can be assigned with adequate resources and which not.</p>
<p>Meanwhile, we introduced Query Queue in 2.0.0. Upon Workload Group creation, you can set a maximum query number for a query queue. Queries beyond that limit will wait for execution in the queue. This is to reduce system burden under heavy workloads.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=elastic-scaling-and-storage-compute-separation>Elastic Scaling and Storage-Compute Separation<a href=#elastic-scaling-and-storage-compute-separation class=hash-link aria-label="Direct link to Elastic Scaling and Storage-Compute Separation" title="Direct link to Elastic Scaling and Storage-Compute Separation">​</a></h2>
<p>When it comes to computation and storage resources, what do users want?</p>
<ul>
<li><strong>Elastic scaling of computation resources</strong>: Scale up resources quickly in peak times to increase efficiency and scale down in valley times to reduce costs.</li>
<li><strong>Lower storage costs</strong>: Use low-cost storage media and separate storage from computation.</li>
<li><strong>Separation of workloads</strong>: Isolate the computation resources of different workloads to avoid preemption.</li>
<li><strong>Unified management of data</strong>: Simply manage catalogs and data in one place.</li>
</ul>
<p>To separate storage and computation is a way to realize elastic scaling of resources, but it demands more efforts in maintaining storage stability, which determines the stability and continuity of OLAP services. To ensure storage stability, we introduced mechanisms including cache management, computation resource management, and garbage collection.</p>
<p>In this respect, we divide our users into three groups after investigation:</p>
<ol>
<li>Users with no need for resource scaling</li>
<li>Users requiring resource scaling, low storage costs, and workload separation from Apache Doris</li>
<li>Users who already have a stable large-scale storage system and thus require an advanced compute-storage-separated architecture for efficient resource scaling</li>
</ol>
<p>Apache Doris 2.0 provides two solutions to address the needs of the first two types of users.</p>
<ol>
<li><strong>Compute nodes</strong>. We introduced stateless compute nodes in version 2.0. Unlike the mix nodes, the compute nodes do not save any data and are not involved in workload balancing of data tablets during cluster scaling. Thus, they are able to quickly join the cluster and share the computing pressure during peak times. In addition, in data lakehouse analysis, these nodes will be the first ones to execute queries on remote storage (HDFS/S3) so there will be no resource competition between internal tables and external tables.
<ol>
<li><a href=https://doris.apache.org/docs/2.0/admin-manual/resource-admin/compute-node/ target=_blank rel="noopener noreferrer">Read more in Docs</a></li>
</ol>
</li>
<li><strong>Hot-cold data separation</strong>. Hot/cold data refers to data that is frequently/seldom accessed, respectively. Generally, it makes more sense to store cold data in low-cost storage. Older versions of Apache Doris support lifecycle management of table partitions: As hot data cooled down, it would be moved from SSD to HDD. However, data was stored with multiple replicas on HDD, which was still a waste. Now, in Apache Doris 2.0, cold data can be stored in object storage, which is even cheaper and allows single-copy storage. That reduces the storage costs by 70% and cuts down the computation and network overheads that come with storage.
<ol>
<li><a href=https://doris.apache.org/blog/Tiered-Storage-for-Hot-and-Cold-Data-What-Why-and-How target=_blank rel="noopener noreferrer">Read more in Docs</a></li>
</ol>
</li>
</ol>
<p>For neater separate of computation and storage, the VeloDB team is going to contribute the Cloud Compute-Storage-Separation solution to the Apache Doris project. The performance and stability of it has stood the test of hundreds of companies in their production environment. The merging of code will be finished by October this year, and all Apache Doris users will be able to get an early taste of it in September.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=enhanced-usability>Enhanced Usability<a href=#enhanced-usability class=hash-link aria-label="Direct link to Enhanced Usability" title="Direct link to Enhanced Usability">​</a></h2>
<p>Apache Doris 2.0.0 also highlights some enterprise-facing functionalities.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=support-for-kubernetes-deployment>Support for Kubernetes Deployment<a href=#support-for-kubernetes-deployment class=hash-link aria-label="Direct link to Support for Kubernetes Deployment" title="Direct link to Support for Kubernetes Deployment">​</a></h3>
<p>Older versions of Apache Doris communicate based on IP, so any host failure in Kubernetes deployment that causes a POD IP drift will lead to cluster unavailability. Now, version 2.0 supports FQDN. That means the failed Doris nodes can recover automatically without human intervention, which lays the foundation for Kubernetes deployment and elastic scaling.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=support-for-cross-cluster-replication-ccr>Support for Cross-Cluster Replication (CCR)<a href=#support-for-cross-cluster-replication-ccr class=hash-link aria-label="Direct link to Support for Cross-Cluster Replication (CCR)" title="Direct link to Support for Cross-Cluster Replication (CCR)">​</a></h3>
<p>Apache Doris 2.0.0 supports cross-cluster replication (CCR). Data changes at the database/table level in the source cluster will be synchronized to the target cluster. You can choose to replicate the incremental data or the overall data.</p>
<p>It also supports synchronization of DDL, which means DDL statements executed by the source cluster can also by automatically replicated to the target cluster.</p>
<p>It is simple to configure and use CCR in Doris. Leveraging this functionality, you can implement read-write separation and multi-datacenter replication</p>
<p>This feature allows for higher availability of data, read/write workload separation, and cross-data-center replication more efficiently.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=behavior-change>Behavior Change<a href=#behavior-change class=hash-link aria-label="Direct link to Behavior Change" title="Direct link to Behavior Change">​</a></h2>
<ul>
<li>Use rolling upgrade from 1.2-ITS to 2.0.0, and restart upgrade from preview versions of 2.0 to 2.0.0;</li>
<li>The new query optimizer (Nereids) is enabled by default: <code>enable_nereids_planner=true</code>;</li>
<li>All non-vectorized code has been removed from the system, so the <code>enable_vectorized_engine</code> parameter no long works;</li>
<li>A new parameter <code>enable_single_replica_compaction</code> has been added;</li>
<li>datev2, datetimev2, and decimalv3 are the default data types in table creation; datav1, datetimev1, and decimalv2 are not supported in table creation;</li>
<li>decimalv3 is the default data type for JDBC and Iceberg Catalog;</li>
<li>A new data type <code>AGG_STATE</code> has been added;</li>
<li>The cluster column has been removed from backend tables;</li>
<li>For better compatibility with BI tools, datev2 and datetimev2 are displayed as date and datetime when <code>show create table</code>;</li>
<li>max_openfiles and swaps checks are added to the backend startup script so inappropriate system configuration might lead to backend failure;</li>
<li>Password-free login is not allowed when accessing frontend on localhost;</li>
<li>If there is a Multi-Catalog in the system, by default, only data of the internal catalog will be displayed when querying information schema;</li>
<li>A limit has been imposed on the depth of the expression tree. The default value is 200;</li>
<li>The single quote in the return value of array string has been changed to double quote;</li>
<li>The Doris processes are renamed to DorisFE and DorisBE.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=embarking-on-the-200-journey>Embarking on the 2.0.0 Journey<a href=#embarking-on-the-200-journey class=hash-link aria-label="Direct link to Embarking on the 2.0.0 Journey" title="Direct link to Embarking on the 2.0.0 Journey">​</a></h2>
<p>To make Apache Doris 2.0.0 production-ready, we invited hundreds of enterprise users to engage in the testing and optimized it for better performance, stability, and usability. In the next phase, we will continue responding to user needs with agile release planning. We plan to launch 2.0.1 in late August and 2.0.2 in September, as we keep fixing bugs and adding new features. We also plan to release an early version of 2.1 in September to bring a few long-requested capabilities to you. For example, in Doris 2.1, the Variant data type will better serve the schema-free analytic needs of semi-structured data; the multi-table materialized views will be able to simplify the data scheduling and processing link while speeding up queries; more and neater data ingestion methods will be added and nested composite data types will be realized.</p>
<p>If you have any questions or ideas when investigating, testing, and deploying Apache Doris, please find us on <a href=https://doris.apache.org/slack target=_blank rel="noopener noreferrer">Slack</a>. Our developers will be happy to hear them and provide targeted support.</div></div></article><article class=margin-bottom--xl itemprop=blogPost itemscope itemtype=http://schema.org/BlogPosting><div class=markdown itemprop=articleBody><header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href=/blog/>Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class=s-tags><span class=s-tag>Release Notes</span></span></span></div><h2 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop=headline><a itemprop=url href=/blog/release-note-1.2.6/>Apache Doris announced the official release of version 1.2.6</a></h2><div class="blog-info text-center flex justify-center text-sm text-black"><span class=authors><span class="s-author text-black">Apache Doris</span></span><time datetime=2023-07-17T00:00:00.000Z itemprop=datePublished class="text-black ml-4">July 17, 2023</time></div></header><div class=markdown itemprop=articleBody><h2 class="anchor anchorWithStickyNavbar_LWe7" id=behavior-change>Behavior Change<a href=#behavior-change class=hash-link aria-label="Direct link to Behavior Change" title="Direct link to Behavior Change">​</a></h2>
<ul>
<li>Add a BE configuration item <code>allow_invalid_decimalv2_literal</code> to control whether can import data that exceeding the decimal's precision, for compatibility with previous logic.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=query>Query<a href=#query class=hash-link aria-label="Direct link to Query" title="Direct link to Query">​</a></h2>
<ul>
<li>Fix several query planning issues.</li>
<li>Support <code>sql_select_limit</code> session variable.</li>
<li>Optimize query cold run performance.</li>
<li>Fix expr context memory leak.</li>
<li>Fix the issue that the <code>explode_split</code> function was executed incorrectly in some cases.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=multi-catalog>Multi Catalog<a href=#multi-catalog class=hash-link aria-label="Direct link to Multi Catalog" title="Direct link to Multi Catalog">​</a></h3>
<ul>
<li>Fix the issue that synchronizing hive metadata caused FE replay edit log to fail.</li>
<li>Fix <code>refresh catalog</code> operation causing FE OOM.</li>
<li>Fix the issue that jdbc catalog cannot handle <code>0000-00-00</code> correctly.</li>
<li>Fixed the issue that the kerberos ticket cannot be refreshed automatically.</li>
<li>Optimize the partition pruning performance of hive.</li>
<li>Fix the inconsistent behavior of trino and presto in jdbc catalog.</li>
<li>Fix the issue that hdfs short-circuit read could not be used to improve query efficiency in some environments.</li>
<li>Fix the issue that the iceberg table on CHDFS could not be read.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=storage>Storage<a href=#storage class=hash-link aria-label="Direct link to Storage" title="Direct link to Storage">​</a></h2>
<ul>
<li>Fix the wrong calculation of delete bitmap in MOW table.</li>
<li>Fix several BE memory issues.</li>
<li>Fix snappy compression issue.</li>
<li>Fix the issue that jemalloc may cause BE to crash in some cases.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=others>Others<a href=#others class=hash-link aria-label="Direct link to Others" title="Direct link to Others">​</a></h2>
<ul>
<li>Fix several java udf related issues.</li>
<li>Fix the issue that the <code>recover table</code> operation incorrectly triggered the creation of dynamic partitions.</li>
<li>Fix timezone when importing orc files via broker load.</li>
<li>Fix the issue that the newly added <code>PERCENT</code> keyword caused the replay metadata of the routine load job to fail.</li>
<li>Fix the issue that the <code>truncate</code> operation failed to acts on a non-partitioned table.</li>
<li>Fix the issue that the mysql connection was lost due to the <code>show snapshot</code> operation.</li>
<li>Optimize the lock logic to reduce the probability of lock timeout errors when creating tables.</li>
<li>Add session variable <code>have_query_cache</code> to be compatible with some old mysql clients.</li>
<li>Optimize the error message when encountering an error of loading.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=big-thanks>Big Thanks<a href=#big-thanks class=hash-link aria-label="Direct link to Big Thanks" title="Direct link to Big Thanks">​</a></h2>
<p>Thanks all who contribute to this release:</p>
<p>@amorynan</p>
<p>@BiteTheDDDDt</p>
<p>@caoliang-web</p>
<p>@dataroaring</p>
<p>@Doris-Extras</p>
<p>@dutyu</p>
<p>@Gabriel39</p>
<p>@HHoflittlefish777</p>
<p>@htyoung</p>
<p>@jacktengg</p>
<p>@jeffreys-cat</p>
<p>@kaijchen</p>
<p>@kaka11chen</p>
<p>@Kikyou1997</p>
<p>@KnightLiJunLong</p>
<p>@liaoxin01</p>
<p>@LiBinfeng-01</p>
<p>@morningman</p>
<p>@mrhhsg</p>
<p>@sohardforaname</p>
<p>@starocean999</p>
<p>@vinlee19</p>
<p>@wangbo</p>
<p>@wsjz</p>
<p>@xiaokang</p>
<p>@xinyiZzz</p>
<p>@yiguolei</p>
<p>@yujun777</p>
<p>@Yulei-Yang</p>
<p>@zhangstar333</p>
<p>@zy-kkk</div></div></article><article class=margin-bottom--xl itemprop=blogPost itemscope itemtype=http://schema.org/BlogPosting><div class=markdown itemprop=articleBody><header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href=/blog/>Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class=s-tags><span class=s-tag>Release Notes</span></span></span></div><h2 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop=headline><a itemprop=url href=/blog/release-note-1.2.5/>Apache Doris announced the official release of version 1.2.5</a></h2><div class="blog-info text-center flex justify-center text-sm text-black"><span class=authors><span class="s-author text-black">Apache Doris</span></span><time datetime=2023-06-18T00:00:00.000Z itemprop=datePublished class="text-black ml-4">June 18, 2023</time></div></header><div class=markdown itemprop=articleBody><p>In version 1.2.5, the Doris team has fixed nearly 210 issues or performance improvements since the release of version 1.2.4. At the same time, version 1.2.5 is also an iterative version of version 1.2.4, which has higher stability. It is recommended that all users upgrade to this version.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=behavior-changed>Behavior Changed<a href=#behavior-changed class=hash-link aria-label="Direct link to Behavior Changed" title="Direct link to Behavior Changed">​</a></h2>
<ul>
<li>
<p>The <code>start_be.sh</code> script will check that the maximum number of file handles in the system must be greater than or equal to 65536, otherwise the startup will fail.</p>
</li>
<li>
<p>The BE configuration item <code>enable_quick_compaction</code> is set to true by default. The Quick Compaction is enabled by default. This feature is used to optimize the problem of small files in the case of large batch import.</p>
</li>
<li>
<p>After modifying the dynamic partition attribute of the table, it will no longer take effect immediately, but wait for the next task scheduling of the dynamic partition table to avoid some deadlock problems.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=improvements>Improvements<a href=#improvements class=hash-link aria-label="Direct link to Improvements" title="Direct link to Improvements">​</a></h2>
<ul>
<li>
<p>Optimize the use of bthread and pthread to reduce the RPC blocking problem during the query process.</p>
</li>
<li>
<p>A button to download Profile is added to the Profile page of the FE web UI.</p>
</li>
<li>
<p>Added FE configuration <code>recover_with_skip_missing_version</code>, which is used to query to skip the problematic replica under certain failure conditions.</p>
</li>
<li>
<p>The row-level permission function supports external Catalog.</p>
</li>
<li>
<p>Hive Catalog supports automatic refreshing of kerberos tickets on the BE side without manual refreshing.</p>
</li>
<li>
<p>JDBC Catalog supports tables under the MySQL/ClickHouse system database (<code>information_schema</code>).</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=bug-fixes>Bug Fixes<a href=#bug-fixes class=hash-link aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h2>
<ul>
<li>
<p>Fixed the problem of incorrect query results caused by low-cardinality column optimization</p>
</li>
<li>
<p>Fixed several authentication and compatibility issues accessing HDFS.</p>
</li>
<li>
<p>Fixed several issues with float/double and decimal types.</p>
</li>
<li>
<p>Fixed several issues with date/datetimev2 types.</p>
</li>
<li>
<p>Fixed several query execution and planning issues.</p>
</li>
<li>
<p>Fixed several issues with JDBC Catalog.</p>
</li>
<li>
<p>Fixed several query-related issues with Hive Catalog, and Hive Metastore metadata synchronization issues.</p>
</li>
<li>
<p>Fix the problem that the result of <code>SHOW LOAD PROFILE</code> statement is incorrect.</p>
</li>
<li>
<p>Fixed several memory related issues.</p>
</li>
<li>
<p>Fixed several issues with <code>CREATE TABLE AS SELECT</code> functionality.</p>
</li>
<li>
<p>Fix the problem that the jsonb type causes BE to crash on CPU that do not support avx2.</p>
</li>
<li>
<p>Fixed several issues with dynamic partitions.</p>
</li>
<li>
<p>Fixed several issues with TOPN query optimization.</p>
</li>
<li>
<p>Fixed several issues with the Unique Key Merge-on-Write table model.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=big-thanks>Big Thanks<a href=#big-thanks class=hash-link aria-label="Direct link to Big Thanks" title="Direct link to Big Thanks">​</a></h2>
<p>58 contributors participated in the improvement and release of 1.2.5, and thank them for their hard work and dedication:</p>
<p>@adonis0147</p>
<p>@airborne12</p>
<p>@AshinGau</p>
<p>@BePPPower</p>
<p>@BiteTheDDDDt</p>
<p>@caiconghui</p>
<p>@CalvinKirs</p>
<p>@cambyzju</p>
<p>@caoliang-web</p>
<p>@dataroaring</p>
<p>@Doris-Extras</p>
<p>@dujl</p>
<p>@dutyu</p>
<p>@fsilent</p>
<p>@Gabriel39</p>
<p>@gitccl</p>
<p>@gnehil</p>
<p>@GoGoWen</p>
<p>@gongzexin</p>
<p>@HappenLee</p>
<p>@herry2038</p>
<p>@jacktengg</p>
<p>@Jibing-Li</p>
<p>@kaka11chen</p>
<p>@Kikyou1997</p>
<p>@LemonLiTree</p>
<p>@liaoxin01</p>
<p>@LiBinfeng-01</p>
<p>@luwei16</p>
<p>@Moonm3n</p>
<p>@morningman</p>
<p>@mrhhsg</p>
<p>@Mryange</p>
<p>@nextdreamblue</p>
<p>@nsnhuang</p>
<p>@qidaye</p>
<p>@Shoothzj</p>
<p>@sohardforaname</p>
<p>@stalary</p>
<p>@starocean999</p>
<p>@SWJTU-ZhangLei</p>
<p>@wsjz</p>
<p>@xiaokang</p>
<p>@xinyiZzz</p>
<p>@yangzhg</p>
<p>@yiguolei</p>
<p>@yixiutt</p>
<p>@yujun777</p>
<p>@Yulei-Yang</p>
<p>@yuxuan-luo</p>
<p>@zclllyybb</p>
<p>@zddr</p>
<p>@zenoyang</p>
<p>@zhangstar333</p>
<p>@zhannngchen</p>
<p>@zxealous</p>
<p>@zy-kkk</p>
<p>@zzzzzzzs</div></div></article><article class=margin-bottom--xl itemprop=blogPost itemscope itemtype=http://schema.org/BlogPosting><div class=markdown itemprop=articleBody><header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href=/blog/>Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class=s-tags><span class=s-tag>Release Notes</span></span></span></div><h2 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop=headline><a itemprop=url href=/blog/release-note-1.2.4/>Apache Doris announced the official release of version 1.2.4</a></h2><div class="blog-info text-center flex justify-center text-sm text-black"><span class=authors><span class="s-author text-black">Apache Doris</span></span><time datetime=2023-06-05T00:00:00.000Z itemprop=datePublished class="text-black ml-4">June 5, 2023</time></div></header><div class=markdown itemprop=articleBody><h2 class="anchor anchorWithStickyNavbar_LWe7" id=behavior-changed>Behavior Changed<a href=#behavior-changed class=hash-link aria-label="Direct link to Behavior Changed" title="Direct link to Behavior Changed">​</a></h2>
<ul>
<li>
<p>For <code>DateV2</code>/<code>DatetimeV2</code> and <code>DecimalV3</code> type, in the results of <code>DESCRIBLE</code> and <code>SHOW CREATE TABLE</code> statements, they will no longer be displayed as <code>DateV2</code>/<code>DatetimeV2</code> or <code>DecimalV3</code>, but directly displayed as <code>Date</code>/<code>Datetime</code> or <code>Decimal</code>.</p>
<ul>
<li>This change is for compatibility with some BI tools. If you want to see the actual type of the column, you can check it with the <code>DESCRIBE ALL</code> statement.</li>
</ul>
</li>
<li>
<p>When querying tables in the <code>information_schema</code> database, the meta information(database, table, column, etc.) in the external catalog is no longer returned by default.</p>
<ul>
<li>This change avoids the problem that the <code>information_schema</code> database cannot be queried due to the connection problem of some external catalog, so as to solve the problem of using some BI tools with Doris. It can be controlled by the FE configuration  <code>infodb_support_ext_catalog</code>, and the default value is <code>false</code>, that is, the meta information of external catalog will not be returned.</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=improvements>Improvements<a href=#improvements class=hash-link aria-label="Direct link to Improvements" title="Direct link to Improvements">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=jdbc-catalog>JDBC Catalog<a href=#jdbc-catalog class=hash-link aria-label="Direct link to JDBC Catalog" title="Direct link to JDBC Catalog">​</a></h3>
<ul>
<li>Supports connecting to Trino/Presto via JDBC Catalog</li>
</ul>
<p>​        Refer to: <a href=https://doris.apache.org/docs/dev/lakehouse/multi-catalog/jdbc#trino target=_blank rel="noopener noreferrer">https://doris.apache.org/docs/dev/lakehouse/multi-catalog/jdbc#trino</a></p>
<ul>
<li>JDBC Catalog connects to Clickhouse data source and supports Array type mapping</li>
</ul>
<p>​        Refer to: <a href=https://doris.apache.org/docs/dev/lakehouse/multi-catalog/jdbc#clickhouse target=_blank rel="noopener noreferrer">https://doris.apache.org/docs/dev/lakehouse/multi-catalog/jdbc#clickhouse</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=spark-load>Spark Load<a href=#spark-load class=hash-link aria-label="Direct link to Spark Load" title="Direct link to Spark Load">​</a></h3>
<ul>
<li>Spark Load supports Resource Manager HA related configuration</li>
</ul>
<p>​        Refer to: <a href=https://github.com/apache/doris/pull/15000 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/15000</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=bug-fixes>Bug Fixes<a href=#bug-fixes class=hash-link aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h2>
<ul>
<li>
<p>Fixed several connectivity issues with Hive Catalog.</p>
</li>
<li>
<p>Fixed ClassNotFound issues with Hudi Catalog.</p>
</li>
<li>
<p>Optimize the connection pool of JDBC Catalog to avoid too many connections.</p>
</li>
<li>
<p>Fix the problem that OOM will occur when importing data from another Doris cluster through JDBC Catalog.</p>
</li>
<li>
<p>Fixed serveral queries and imports planning issues.</p>
</li>
<li>
<p>Fixed several issues with Unique Key Merge-On-Write data model.</p>
</li>
<li>
<p>Fix several BDBJE issues and solve the problem of abnormal FE metadata in some cases.</p>
</li>
<li>
<p>Fix the problem that the <code>CREATE VIEW</code> statement does not support Table Valued Function.</p>
</li>
<li>
<p>Fixed several memory statistics issues.</p>
</li>
<li>
<p>Fixed several issues reading Parquet/ORC format.</p>
</li>
<li>
<p>Fixed several issues with DecimalV3.</p>
</li>
<li>
<p>Fixed several issues with SHOW QUERY/LOAD PROFILE.</p>
</li>
</ul></div></div></article><article class=margin-bottom--xl itemprop=blogPost itemscope itemtype=http://schema.org/BlogPosting><div class=markdown itemprop=articleBody><header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href=/blog/>Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class=s-tags><span class=s-tag>Release Notes</span></span></span></div><h2 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop=headline><a itemprop=url href=/blog/release-note-1.2.3/>Apache Doris announced the official release of version 1.2.3</a></h2><div class="blog-info text-center flex justify-center text-sm text-black"><span class=authors><span class="s-author text-black">Apache Doris</span></span><time datetime=2023-03-19T00:00:00.000Z itemprop=datePublished class="text-black ml-4">March 19, 2023</time></div></header><div class=markdown itemprop=articleBody><h2 class="anchor anchorWithStickyNavbar_LWe7" id=improvements>Improvements<a href=#improvements class=hash-link aria-label="Direct link to Improvements" title="Direct link to Improvements">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=jdbc-catalog>JDBC Catalog<a href=#jdbc-catalog class=hash-link aria-label="Direct link to JDBC Catalog" title="Direct link to JDBC Catalog">​</a></h3>
<ul>
<li>Support connecting to Doris clusters through JDBC Catalog.</li>
</ul>
<p>Currently, Jdbc Catalog only support to use 5.x version of JDBC jar package to connect another Doris database. If you use 8.x version of JDBC jar package, the data type of column may not be matched.</p>
<p>Reference: <a href=https://doris.apache.org/docs/dev/lakehouse/multi-catalog/jdbc/#doris target=_blank rel="noopener noreferrer">https://doris.apache.org/docs/dev/lakehouse/multi-catalog/jdbc/#doris</a></p>
<ul>
<li>
<p>Support to synchronize only the specified database through the <code>only_specified_database</code> attribute.</p>
</li>
<li>
<p>Support synchronizing table names in the form of lowercase through <code>lower_case_table_names</code> to solve the problem of case sensitivity of table names.</p>
</li>
</ul>
<p>Reference: <a href=https://doris.apache.org/docs/dev/lakehouse/multi-catalog/jdbc target=_blank rel="noopener noreferrer">https://doris.apache.org/docs/dev/lakehouse/multi-catalog/jdbc</a></p>
<ul>
<li>Optimize the read performance of JDBC Catalog.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=elasticsearch-catalog>Elasticsearch Catalog<a href=#elasticsearch-catalog class=hash-link aria-label="Direct link to Elasticsearch Catalog" title="Direct link to Elasticsearch Catalog">​</a></h3>
<ul>
<li>
<p>Support Array type mapping.</p>
</li>
<li>
<p>Support whether to push down the like expression through the <code>like_push_down</code> attribute to control the CPU overhead of the ES cluster.</p>
</li>
</ul>
<p>Reference: <a href=https://doris.apache.org/docs/dev/lakehouse/multi-catalog/es target=_blank rel="noopener noreferrer">https://doris.apache.org/docs/dev/lakehouse/multi-catalog/es</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=hive-catalog>Hive Catalog<a href=#hive-catalog class=hash-link aria-label="Direct link to Hive Catalog" title="Direct link to Hive Catalog">​</a></h3>
<ul>
<li>
<p>Support Hive table default partition <code>_HIVE_DEFAULT_PARTITION_</code>.</p>
</li>
<li>
<p>Hive Metastore metadata automatic synchronization supports notification event in compressed format.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=dynamic-partition-improvement>Dynamic Partition Improvement<a href=#dynamic-partition-improvement class=hash-link aria-label="Direct link to Dynamic Partition Improvement" title="Direct link to Dynamic Partition Improvement">​</a></h3>
<ul>
<li>Dynamic partition supports specifying the <code>storage_medium</code> parameter to control the storage medium of the newly added partition.</li>
</ul>
<p>Reference: <a href=https://doris.apache.org/docs/dev/advanced/partition/dynamic-partition target=_blank rel="noopener noreferrer">https://doris.apache.org/docs/dev/advanced/partition/dynamic-partition</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=optimize-bes-threading-model>Optimize BE's Threading Model<a href=#optimize-bes-threading-model class=hash-link aria-label="Direct link to Optimize BE's Threading Model" title="Direct link to Optimize BE's Threading Model">​</a></h3>
<ul>
<li>Optimize BE's threading model to avoid stability problems caused by frequent thread creation and destroy.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=bug-fixes>Bug Fixes<a href=#bug-fixes class=hash-link aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h2>
<ul>
<li>
<p>Fixed issues with Merge-On-Write Unique Key tables.</p>
</li>
<li>
<p>Fixed compaction related issues.</p>
</li>
<li>
<p>Fixed some delete statement issues causing data errors.</p>
</li>
<li>
<p>Fixed several query execution errors.</p>
</li>
<li>
<p>Fixed the problem of using JDBC catalog to cause BE crash on some operating system.</p>
</li>
<li>
<p>Fixed Multi-Catalog issues.</p>
</li>
<li>
<p>Fixed memory statistics and optimization issues.</p>
</li>
<li>
<p>Fixed decimalV3 and date/datetimev2 related issues.</p>
</li>
<li>
<p>Fixed load transaction stability issues.</p>
</li>
<li>
<p>Fixed light-weight schema change issues.</p>
</li>
<li>
<p>Fixed the issue of using <code>datetime</code> type for batch partition creation.</p>
</li>
<li>
<p>Fixed the problem that a large number of failed broker loads would cause the FE memory usage to be too high.</p>
</li>
<li>
<p>Fixed the problem that stream load cannot be canceled after dropping the table.</p>
</li>
<li>
<p>Fixed querying <code>information_schema</code> timeout in some cases.</p>
</li>
<li>
<p>Fixed the problem of BE crash caused by concurrent data export using <code>select outfile</code>.</p>
</li>
<li>
<p>Fixed transactional insert operation memory leak.</p>
</li>
<li>
<p>Fixed several query/load profile issues, and supports direct download of profiles through FE web ui.</p>
</li>
<li>
<p>Fixed the problem that the BE tablet GC thread caused the IO util to be too high.</p>
</li>
<li>
<p>Fixed the problem that the commit offset is inaccurate in Kafka routine load.</p>
</li>
</ul></div></div></article><article class=margin-bottom--xl itemprop=blogPost itemscope itemtype=http://schema.org/BlogPosting><div class=markdown itemprop=articleBody><header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href=/blog/>Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class=s-tags><span class=s-tag>Release Notes</span></span></span></div><h2 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop=headline><a itemprop=url href=/blog/release-note-1.2.2/>Apache Doris announced the official release of version 1.2.2</a></h2><div class="blog-info text-center flex justify-center text-sm text-black"><span class=authors><span class="s-author text-black">Apache Doris</span></span><time datetime=2023-02-15T00:00:00.000Z itemprop=datePublished class="text-black ml-4">February 15, 2023</time></div></header><div class=markdown itemprop=articleBody><h2 class="anchor anchorWithStickyNavbar_LWe7" id=new-features>New Features<a href=#new-features class=hash-link aria-label="Direct link to New Features" title="Direct link to New Features">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=lakehouse>Lakehouse<a href=#lakehouse class=hash-link aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">​</a></h3>
<ul>
<li>
<p>Support automatic synchronization of Hive metastore.</p>
</li>
<li>
<p>Support reading the Iceberg Snapshot, and viewing the Snapshot history.</p>
</li>
<li>
<p>JDBC Catalog supports PostgreSQL, Clickhouse, Oracle, SQLServer</p>
</li>
<li>
<p>JDBC Catalog supports Insert operation</p>
</li>
</ul>
<p>Reference: <a href=https://doris.apache.org/docs/dev/lakehouse/multi-catalog/ target=_blank rel="noopener noreferrer">https://doris.apache.org/docs/dev/lakehouse/multi-catalog/</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=auto-bucket>Auto Bucket<a href=#auto-bucket class=hash-link aria-label="Direct link to Auto Bucket" title="Direct link to Auto Bucket">​</a></h3>
<p>Set and scale the number of buckets for different partitions to keep the number of tablet in a relatively appropriate range.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=new-functions>New Functions<a href=#new-functions class=hash-link aria-label="Direct link to New Functions" title="Direct link to New Functions">​</a></h3>
<p>Add the new function <code>width_bucket</code>.</p>
<p>Reference: <a href=https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-functions/width-bucket/#description target=_blank rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-functions/width-bucket/#description</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=behavior-changes>Behavior Changes<a href=#behavior-changes class=hash-link aria-label="Direct link to Behavior Changes" title="Direct link to Behavior Changes">​</a></h2>
<ul>
<li>Disable BE's page cache by default: <code>disable_storage_page_cache=true</code></li>
</ul>
<p>Turn off this configuration to optimize memory usage and reduce the risk of memory OOM.
But it will reduce the query latency of some small queries.
If you are sensitive to query latency, or have high concurrency and small query scenarios, you can configure <em>disable_storage_page_cache=false</em> to enable page cache again.</p>
<ul>
<li>Add new session variable <code>group_by_and_having_use_alias_first</code>, used to control whether the group and having clauses use alias.</li>
</ul>
<p>Reference: <a href=https://doris.apache.org/docs/dev/advanced/variables target=_blank rel="noopener noreferrer">https://doris.apache.org/docs/dev/advanced/variables</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=improvements>Improvements<a href=#improvements class=hash-link aria-label="Direct link to Improvements" title="Direct link to Improvements">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=compaction>Compaction<a href=#compaction class=hash-link aria-label="Direct link to Compaction" title="Direct link to Compaction">​</a></h3>
<ul>
<li>
<p>Support <code>Vertical Compaction</code>. To optimize the compaction overhead and efficiency of wide tables.</p>
</li>
<li>
<p>Support <code>Segment ompaction</code>. Fix -238 and -235 issues with high frequency imports.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=lakehouse-1>Lakehouse<a href=#lakehouse-1 class=hash-link aria-label="Direct link to Lakehouse" title="Direct link to Lakehouse">​</a></h3>
<ul>
<li>
<p>Hive Catalog can be compatible with Hive version 1/2/3</p>
</li>
<li>
<p>Hive Catalog can access JuiceFS based HDFS with Broker.</p>
</li>
<li>
<p>Iceberg Catalog Support Hive Metastore and Rest Catalog type.</p>
</li>
<li>
<p>ES Catalog support _id column mapping。</p>
</li>
<li>
<p>Optimize Iceberg V2 read performance with large number of delete rows.</p>
</li>
<li>
<p>Support for reading Iceberg tables after Schema Evolution</p>
</li>
<li>
<p>Parquet Reader handles column name case correctly.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=other>Other<a href=#other class=hash-link aria-label="Direct link to Other" title="Direct link to Other">​</a></h3>
<ul>
<li>
<p>Support for accessing Hadoop KMS-encrypted HDFS.</p>
</li>
<li>
<p>Support to cancel the Export export task in progress.</p>
</li>
<li>
<p>Optimize the performance of <code>explode_split</code> with 1x.</p>
</li>
<li>
<p>Optimize the read performance of nullable columns with 3x.</p>
</li>
<li>
<p>Optimize some problems of Memtracker, improve memory management accuracy, and optimize memory application.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=bug-fixes>Bug Fixes<a href=#bug-fixes class=hash-link aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h2>
<ul>
<li>
<p>Fixed memory leak when loading data with Doris Flink Connector.</p>
</li>
<li>
<p>Fixed the possible thread scheduling problem of BE and reduce the <code>Fragment sent timeout</code> error caused by BE thread exhaustion.</p>
</li>
<li>
<p>Fixed various correctness and precision issues of column type datetimev2/decimalv3.</p>
</li>
<li>
<p>Fixed the problem data correctness issue with Unique Key Merge-on-Read table.</p>
</li>
<li>
<p>Fixed various known issues with the Light Schema Change feature.</p>
</li>
<li>
<p>Fixed various data correctness issues of bitmap type Runtime Filter.</p>
</li>
<li>
<p>Fixed the problem of poor reading performance of csv reader introduced in version 1.2.1.</p>
</li>
<li>
<p>Fixed the problem of BE OOM caused by Spark Load data download phase.</p>
</li>
<li>
<p>Fixed possible metadata compatibility issues when upgrading from version 1.1 to version 1.2.</p>
</li>
<li>
<p>Fixed the metadata problem when creating JDBC Catalog with Resource.</p>
</li>
<li>
<p>Fixed the problem of high CPU usage caused by load operation.</p>
</li>
<li>
<p>Fixed the problem of FE OOM caused by a large number of failed Broker Load jobs.</p>
</li>
<li>
<p>Fixed the problem of precision loss when loading floating-point types.</p>
</li>
<li>
<p>Fixed the problem of memory leak when useing 2PC stream load</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=other-1>Other<a href=#other-1 class=hash-link aria-label="Direct link to Other" title="Direct link to Other">​</a></h2>
<p>Add metrics to view the total rowset and segment numbers on BE</p>
<ul>
<li>doris_be_all_rowsets_num and doris_be_all_segments_num</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=big-thanks>Big Thanks<a href=#big-thanks class=hash-link aria-label="Direct link to Big Thanks" title="Direct link to Big Thanks">​</a></h2>
<p>Thanks to ALL who contributed to this release!</p>
<p>@adonis0147</p>
<p>@AshinGau</p>
<p>@BePPPower</p>
<p>@BiteTheDDDDt</p>
<p>@ByteYue</p>
<p>@caiconghui</p>
<p>@cambyzju</p>
<p>@chenlinzhong</p>
<p>@DarvenDuan</p>
<p>@dataroaring</p>
<p>@Doris-Extras</p>
<p>@dutyu</p>
<p>@englefly</p>
<p>@freemandealer</p>
<p>@Gabriel39</p>
<p>@HappenLee</p>
<p>@Henry2SS</p>
<p>@htyoung</p>
<p>@isHuangXin</p>
<p>@JackDrogon</p>
<p>@jacktengg</p>
<p>@Jibing-Li</p>
<p>@kaka11chen</p>
<p>@Kikyou1997</p>
<p>@Lchangliang</p>
<p>@LemonLiTree</p>
<p>@liaoxin01</p>
<p>@liqing-coder</p>
<p>@luozenglin</p>
<p>@morningman</p>
<p>@morrySnow</p>
<p>@mrhhsg</p>
<p>@nextdreamblue</p>
<p>@qidaye</p>
<p>@qzsee</p>
<p>@spaces-X</p>
<p>@stalary</p>
<p>@starocean999</p>
<p>@weizuo93</p>
<p>@wsjz</p>
<p>@xiaokang</p>
<p>@xinyiZzz</p>
<p>@xy720</p>
<p>@yangzhg</p>
<p>@yiguolei</p>
<p>@yixiutt</p>
<p>@Yukang-Lian</p>
<p>@Yulei-Yang</p>
<p>@zclllyybb</p>
<p>@zddr</p>
<p>@zhangstar333</p>
<p>@zhannngchen</p>
<p>@zy-kkk</div></div></article><article class=margin-bottom--xl itemprop=blogPost itemscope itemtype=http://schema.org/BlogPosting><div class=markdown itemprop=articleBody><header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href=/blog/>Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class=s-tags><span class=s-tag>Release Notes</span></span></span></div><h2 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop=headline><a itemprop=url href=/blog/release-note-1.2.1/>Apache Doris announced the official release of version 1.2.1</a></h2><div class="blog-info text-center flex justify-center text-sm text-black"><span class=authors><span class="s-author text-black">Apache Doris</span></span><time datetime=2023-01-04T00:00:00.000Z itemprop=datePublished class="text-black ml-4">January 4, 2023</time></div></header><div class=markdown itemprop=articleBody><h2 class="anchor anchorWithStickyNavbar_LWe7" id=improvements>Improvements<a href=#improvements class=hash-link aria-label="Direct link to Improvements" title="Direct link to Improvements">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=supports-new-type-decimalv3>Supports new type DecimalV3<a href=#supports-new-type-decimalv3 class=hash-link aria-label="Direct link to Supports new type DecimalV3" title="Direct link to Supports new type DecimalV3">​</a></h3>
<p>DecimalV3, which supports higher precision and better performance, has the following advantages over past versions.</p>
<ul>
<li>
<p>Larger representable range, the range of values are significantly expanded, and the valid number range [1,38].</p>
</li>
<li>
<p>Higher performance, adaptive adjustment of the storage space occupied according to different precision.</p>
</li>
<li>
<p>More complete precision derivation support, for different expressions, different precision derivation rules are applied to the accuracy of the result.</p>
</li>
</ul>
<p><a href=https://doris.apache.org/docs/2.0/sql-manual/sql-reference/Data-Types/DECIMAL target=_blank rel="noopener noreferrer">DecimalV3</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=support-iceberg-v2>Support Iceberg V2<a href=#support-iceberg-v2 class=hash-link aria-label="Direct link to Support Iceberg V2" title="Direct link to Support Iceberg V2">​</a></h3>
<p>Support Iceberg V2 (only Position Delete is supported, Equality Delete will be supported in subsequent versions).</p>
<p>Tables in Iceberg V2 format can be accessed through the Multi-Catalog feature.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=support-or-condition-to-in>Support OR condition to IN<a href=#support-or-condition-to-in class=hash-link aria-label="Direct link to Support OR condition to IN" title="Direct link to Support OR condition to IN">​</a></h3>
<p>Support converting  OR condition to IN condition, which can improve the execution efficiency in some scenarios.<a href=https://github.com/apache/doris/pull/15437 target=_blank rel="noopener noreferrer">#15437</a> <a href=https://github.com/apache/doris/pull/12872 target=_blank rel="noopener noreferrer">#12872</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=optimize-the-import-and-query-performance-of-jsonb-type>Optimize the import and query performance of JSONB type<a href=#optimize-the-import-and-query-performance-of-jsonb-type class=hash-link aria-label="Direct link to Optimize the import and query performance of JSONB type" title="Direct link to Optimize the import and query performance of JSONB type">​</a></h3>
<p>Optimize the import and query performance of JSONB type. <a href=https://github.com/apache/doris/pull/15219 target=_blank rel="noopener noreferrer">#15219</a>  <a href=https://github.com/apache/doris/pull/15219 target=_blank rel="noopener noreferrer">#15219</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=stream-load-supports-quoted-csv-data>Stream load supports quoted csv data<a href=#stream-load-supports-quoted-csv-data class=hash-link aria-label="Direct link to Stream load supports quoted csv data" title="Direct link to Stream load supports quoted csv data">​</a></h3>
<p>Search trim_double_quotes in Document:<a href=https://doris.apache.org/docs/dev/sql-manual/sql-reference/Data-Manipulation-Statements/Load/STREAM-LOAD target=_blank rel="noopener noreferrer">https://doris.apache.org/docs/dev/sql-manual/sql-reference/Data-Manipulation-Statements/Load/STREAM-LOAD</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=broker-supports-tencent-cloud-chdfs-and-baidu-cloud-bos-afs>Broker supports Tencent Cloud CHDFS and Baidu Cloud BOS, AFS<a href=#broker-supports-tencent-cloud-chdfs-and-baidu-cloud-bos-afs class=hash-link aria-label="Direct link to Broker supports Tencent Cloud CHDFS and Baidu Cloud BOS, AFS" title="Direct link to Broker supports Tencent Cloud CHDFS and Baidu Cloud BOS, AFS">​</a></h3>
<p>Data on CHDFS, BOS, and AFS can be accessed through Broker. <a href=https://github.com/apache/doris/pull/15297 target=_blank rel="noopener noreferrer">#15297</a> <a href=https://github.com/apache/doris/pull/15448 target=_blank rel="noopener noreferrer">#15448</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=new-function>New function<a href=#new-function class=hash-link aria-label="Direct link to New function" title="Direct link to New function">​</a></h3>
<p>Add function <code>substring_index</code>. <a href=https://github.com/apache/doris/pull/15373 target=_blank rel="noopener noreferrer">#15373</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=bug-fixes>Bug Fixes<a href=#bug-fixes class=hash-link aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h2>
<ul>
<li>
<p>In some cases, after upgrading from version 1.1 to version 1.2, the user permission information will be lost. <a href=https://github.com/apache/doris/pull/15144 target=_blank rel="noopener noreferrer">#15144</a></p>
</li>
<li>
<p>Fix the problem that the partition value is wrong when using datev2/datetimev2 type for partitioning. <a href=https://github.com/apache/doris/pull/15094 target=_blank rel="noopener noreferrer">#15094</a></p>
</li>
<li>
<p>Bug fixes for a large number of released features. For a complete list see: <a href="https://github.com/apache/doris/pulls?q=is%3Apr+label%3Adev%2F1.2.1-merged+is%3Aclosed" target=_blank rel="noopener noreferrer">PR List</a></p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=upgrade-notices>Upgrade Notices<a href=#upgrade-notices class=hash-link aria-label="Direct link to Upgrade Notices" title="Direct link to Upgrade Notices">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=known-issues>Known Issues<a href=#known-issues class=hash-link aria-label="Direct link to Known Issues" title="Direct link to Known Issues">​</a></h3>
<ul>
<li>Do not use JDK11 as the runtime JDK of BE, it will cause BE Crash.</li>
<li>The reading performance of the csv format in this version has declined, which will affect the import and reading efficiency of the csv format. We will fix it as soon as possible in the next three-digit version</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=behavior-changed>Behavior Changed<a href=#behavior-changed class=hash-link aria-label="Direct link to Behavior Changed" title="Direct link to Behavior Changed">​</a></h3>
<ul>
<li>
<p>The default value of the BE configuration item <code>high_priority_flush_thread_num_per_store</code> is changed from 1 to 6, to improve the write efficiency of Routine Load. (<a href=https://github.com/apache/doris/pull/14775 target=_blank rel="noopener noreferrer">https://github.com/apache/doris/pull/14775</a>)</p>
</li>
<li>
<p>The default value of the FE configuration item <code>enable_new_load_scan_node</code> is changed to true. Import tasks will be performed using the new File Scan Node. No impact on users.<a href=https://github.com/apache/doris/pull/14808 target=_blank rel="noopener noreferrer">#14808</a></p>
</li>
<li>
<p>Delete the FE configuration item <code>enable_multi_catalog</code>. The Multi-Catalog function is enabled by default.</p>
</li>
<li>
<p>The vectorized execution engine is forced to be enabled by default.<a href=https://github.com/apache/doris/pull/15213 target=_blank rel="noopener noreferrer">#15213</a></p>
</li>
</ul>
<p>The session variable enable_vectorized_engine will no longer take effect. Enabled by default.</p>
<p>To make it valid again, set the FE configuration item <code>disable_enable_vectorized_engine</code> to false, and restart FE to make <code>enable_vectorized_engine</code> valid again.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=big-thanks>Big Thanks<a href=#big-thanks class=hash-link aria-label="Direct link to Big Thanks" title="Direct link to Big Thanks">​</a></h2>
<p>Thanks to ALL who contributed to this release!</p>
<p>@adonis0147</p>
<p>@AshinGau</p>
<p>@BePPPower</p>
<p>@BiteTheDDDDt</p>
<p>@ByteYue</p>
<p>@caiconghui</p>
<p>@cambyzju</p>
<p>@chenlinzhong</p>
<p>@dataroaring</p>
<p>@Doris-Extras</p>
<p>@dutyu</p>
<p>@eldenmoon</p>
<p>@englefly</p>
<p>@freemandealer</p>
<p>@Gabriel39</p>
<p>@HappenLee</p>
<p>@Henry2SS</p>
<p>@hf200012</p>
<p>@jacktengg</p>
<p>@Jibing-Li</p>
<p>@Kikyou1997</p>
<p>@liaoxin01</p>
<p>@luozenglin</p>
<p>@morningman</p>
<p>@morrySnow</p>
<p>@mrhhsg</p>
<p>@nextdreamblue</p>
<p>@qidaye</p>
<p>@spaces-X</p>
<p>@starocean999</p>
<p>@wangshuo128</p>
<p>@weizuo93</p>
<p>@wsjz</p>
<p>@xiaokang</p>
<p>@xinyiZzz</p>
<p>@xutaoustc</p>
<p>@yangzhg</p>
<p>@yiguolei</p>
<p>@yixiutt</p>
<p>@Yulei-Yang</p>
<p>@yuxuan-luo</p>
<p>@zenoyang</p>
<p>@zhangstar333</p>
<p>@zhannngchen</p>
<p>@zhengshengjun</div></div></article><article class=margin-bottom--xl itemprop=blogPost itemscope itemtype=http://schema.org/BlogPosting><div class=markdown itemprop=articleBody><header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href=/blog/>Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class=s-tags><span class=s-tag>Release Notes</span></span></span></div><h2 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop=headline><a itemprop=url href=/blog/release-note-1.1.5/>Apache Doris announced the official release of version 1.1.5</a></h2><div class="blog-info text-center flex justify-center text-sm text-black"><span class=authors><span class="s-author text-black">Apache Doris</span></span><time datetime=2022-12-19T00:00:00.000Z itemprop=datePublished class="text-black ml-4">December 19, 2022</time></div></header><div class=markdown itemprop=articleBody><p>In this release, Doris Team has fixed about 36 issues or performance improvement since 1.1.4. This release is a bugfix release on 1.1 and all users are encouraged to upgrade to this release.</p>
<p>When alias name is same as the original column name like "select year(birthday) as birthday" and use it in group by, order by , having clause, doris's behavior is different from MySQL in the past. In this release, we make it follow MySQL's behavior. Group by and having clause will use original column at first and order by will use alias first. It maybe a litter confuse here so there is a simple advice here, you'd better not use an alias the same as original column name.</p>
<h1>Features</h1>
<p>Add support of murmur_hash3_64. <a href=https://github.com/apache/doris/pull/14636 target=_blank rel="noopener noreferrer">#14636</a></p>
<h1>Improvements</h1>
<p>Add timezone cache for convert_tz to improve performance. <a href=https://github.com/apache/doris/pull/14616 target=_blank rel="noopener noreferrer">#14616</a></p>
<p>Sort result by tablename when call show clause. <a href=https://github.com/apache/doris/pull/14492 target=_blank rel="noopener noreferrer">#14492</a></p>
<h1>Bug Fix</h1>
<p>Fix coredump when there is a if constant expr in select clause.  <a href=https://github.com/apache/doris/pull/14858 target=_blank rel="noopener noreferrer">#14858</a></p>
<p>ColumnVector::insert_date_column may crashed. <a href=https://github.com/apache/doris/pull/14839 target=_blank rel="noopener noreferrer">#14839</a></p>
<p>Update high_priority_flush_thread_num_per_store default value to 6 and it will improve the load performance. <a href=https://github.com/apache/doris/pull/14775 target=_blank rel="noopener noreferrer">#14775</a></p>
<p>Fix quick compaction core.  <a href=https://github.com/apache/doris/pull/14731 target=_blank rel="noopener noreferrer">#14731</a></p>
<p>Partition column is not duplicate key, spark load will throw IndexOutOfBounds error. <a href=https://github.com/apache/doris/pull/14661 target=_blank rel="noopener noreferrer">#14661</a></p>
<p>Fix a memory leak problem in VCollectorIterator. <a href=https://github.com/apache/doris/pull/14549 target=_blank rel="noopener noreferrer">#14549</a></p>
<p>Fix create table like when having sequence column. <a href=https://github.com/apache/doris/pull/14511 target=_blank rel="noopener noreferrer">#14511</a></p>
<p>Using avg rowset to calculate batch size instead of using total_bytes since it costs a lot of cpu. <a href=https://github.com/apache/doris/pull/14273 target=_blank rel="noopener noreferrer">#14273</a></p>
<p>Fix right outer join core with conjunct. <a href=https://github.com/apache/doris/pull/14821 target=_blank rel="noopener noreferrer">#14821</a></p>
<p>Optimize policy of tcmalloc gc.  <a href=https://github.com/apache/doris/pull/14777 target=_blank rel="noopener noreferrer">#14777</a> <a href=https://github.com/apache/doris/pull/14738 target=_blank rel="noopener noreferrer">#14738</a> <a href=https://github.com/apache/doris/pull/14374 target=_blank rel="noopener noreferrer">#14374</a></div></div></article><article class=margin-bottom--xl itemprop=blogPost itemscope itemtype=http://schema.org/BlogPosting><div class=markdown itemprop=articleBody><header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href=/blog/>Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class=s-tags><span class=s-tag>Release Notes</span></span></span></div><h2 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop=headline><a itemprop=url href=/blog/release-note-1.2.0/>Apache Doris announced the official release of version 1.2.0</a></h2><div class="blog-info text-center flex justify-center text-sm text-black"><span class=authors><span class="s-author text-black">Apache Doris</span></span><time datetime=2022-12-07T00:00:00.000Z itemprop=datePublished class="text-black ml-4">December 7, 2022</time></div></header><div class=markdown itemprop=articleBody><p>Dear Community, after months of polishing, we are pleased to announce the release of Apache Doris 1.2.0 on December 07, 2022!</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=highlights>Highlights<a href=#highlights class=hash-link aria-label="Direct link to Highlights" title="Direct link to Highlights">​</a></h2>
<ol>
<li>
<p>Full Vectorizied-Engine support, greatly improved performance</p>
<p>In the standard ssb-100-flat benchmark, the performance of 1.2 is 2 times faster than that of 1.1; in complex TPCH 100 benchmark, the performance of 1.2 is 3 times faster than that of 1.1.</p>
</li>
<li>
<p>Merge-on-Write Unique Key</p>
<p>Support Merge-On-Write on Unique Key Model. This mode marks the data that needs to be deleted or updated when the data is written, thereby avoiding the overhead of Merge-On-Read when querying, and greatly improving the reading efficiency on the updateable data model.</p>
</li>
<li>
<p>Multi Catalog</p>
<p>The multi-catalog feature provides Doris with the ability to quickly access external data sources for access. Users can connect to external data sources through the <code>CREATE CATALOG</code> command. Doris will automatically map the library and table information of external data sources. After that, users can access the data in these external data sources just like accessing ordinary tables. It avoids the complicated operation that the user needs to manually establish external mapping for each table.</p>
<p>Currently this feature supports the following data sources:</p>
<ol>
<li>Hive Metastore: You can access data tables including Hive, Iceberg, and Hudi. It can also be connected to data sources compatible with Hive Metastore, such as Alibaba Cloud's DataLake Formation. Supports data access on both HDFS and object storage.</li>
<li>Elasticsearch: Access ES data sources.</li>
<li>JDBC: Access MySQL through the JDBC protocol.</li>
</ol>
<p>Documentation: <a href=https://doris.apache.org/zh-CN/docs/dev/ecosystem/external-table/multi-catalog target=_blank rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/ecosystem/external-table/multi-catalog</a>)</p>
<blockquote>
<p>Note: The corresponding permission level will also be changed automatically, see the "Upgrade Notes" section for details.</p>
</blockquote>
</li>
<li>
<p>Light table structure changes</p>
</li>
</ol>
<p>In the new version, it is no longer necessary to change the data file synchronously for the operation of adding and subtracting columns to the data table, and only need to update the metadata in FE, thus realizing the millisecond-level Schema Change operation. Through this function, the DDL synchronization capability of upstream CDC data can be realized. For example, users can use Flink CDC to realize DML and DDL synchronization from upstream database to Doris.</p>
<p>Documentation: <a href=https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Definition-Statements/Create/CREATE-TABLE target=_blank rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Definition-Statements/Create/CREATE-TABLE</a></p>
<p>When creating a table, set <code>"light_schema_change"="true"</code> in properties.</p>
<ol start=5>
<li>
<p>JDBC facade</p>
<p>Users can connect to external data sources through JDBC. Currently supported:</p>
<ul>
<li>MySQL</li>
<li>PostgreSQL</li>
<li>Oracle</li>
<li>SQL Server</li>
<li>Clickhouse</li>
</ul>
<p>Documentation: <a href=https://doris.apache.org/zh-CN/docs/dev/ecosystem/external-table/jdbc-of-doris/ target=_blank rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/ecosystem/external-table/jdbc-of-doris/</a></p>
<blockquote>
<p>Note: The ODBC feature will be removed in a later version, please try to switch to the JDBC.</p>
</blockquote>
</li>
<li>
<p>JAVA UDF</p>
<p>Supports writing UDF/UDAF in Java, which is convenient for users to use custom functions in the Java ecosystem. At the same time, through technologies such as off-heap memory and Zero Copy, the efficiency of cross-language data access has been greatly improved.</p>
<p>Document: <a href=https://doris.apache.org/zh-CN/docs/dev/ecosystem/udf/java-user-defined-function target=_blank rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/ecosystem/udf/java-user-defined-function</a></p>
<p>Example: <a href=https://github.com/apache/doris/tree/master/samples/doris-demo target=_blank rel="noopener noreferrer">https://github.com/apache/doris/tree/master/samples/doris-demo</a></p>
</li>
<li>
<p>Remote UDF</p>
<p>Supports accessing remote user-defined function services through RPC, thus completely eliminating language restrictions for users to write UDFs. Users can use any programming language to implement custom functions to complete complex data analysis work.</p>
<p>Documentation: <a href=https://doris.apache.org/zh-CN/docs/ecosystem/udf/remote-user-defined-function target=_blank rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/ecosystem/udf/remote-user-defined-function</a></p>
<p>Example: <a href=https://github.com/apache/doris/tree/master/samples/doris-demo target=_blank rel="noopener noreferrer">https://github.com/apache/doris/tree/master/samples/doris-demo</a></p>
</li>
<li>
<p>More data types support</p>
<ul>
<li>
<p>Array type</p>
<p>Array types are supported. It also supports nested array types. In some scenarios such as user portraits and tags, the Array type can be used to better adapt to business scenarios. At the same time, in the new version, we have also implemented a large number of data-related functions to better support the application of data types in actual scenarios.</p>
</li>
</ul>
<p>Documentation: <a href=https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Types/ARRAY target=_blank rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Types/ARRAY</a></p>
<p>Related functions: <a href=https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-functions/array-functions/array_max target=_blank rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-functions/array-functions/array_max</a></p>
<ul>
<li>
<p>Jsonb type</p>
<p>Support binary Json data type: Jsonb. This type provides a more compact json encoding format, and at the same time provides data access in the encoding format. Compared with json data stored in strings, it is several times newer and can be improved.</p>
</li>
</ul>
<p>Documentation: <a href=https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Types/JSONB target=_blank rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Types/JSONB</a></p>
<p>Related functions: <a href=https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-functions/json-functions/jsonb_parse target=_blank rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-functions/json-functions/jsonb_parse</a></p>
<ul>
<li>
<p>Date V2</p>
<p>Sphere of influence:</p>
<ol>
<li>The user needs to specify datev2 and datetimev2 when creating the table, and the date and datetime of the original table will not be affected.</li>
<li>When datev2 and datetimev2 are calculated with the original date and datetime (for example, equivalent connection), the original type will be cast into a new type for calculation</li>
<li>The example is in the documentation</li>
</ol>
<p>Documentation: <a href=https://doris.apache.org/docs/dev/sql-manual/sql-reference/Data-Types/DATEV2 target=_blank rel="noopener noreferrer">https://doris.apache.org/docs/dev/sql-manual/sql-reference/Data-Types/DATEV2</a></p>
</li>
</ul>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=more>More<a href=#more class=hash-link aria-label="Direct link to More" title="Direct link to More">​</a></h2>
<ol>
<li>
<p>A new memory management framework</p>
<p>Documentation: <a href=https://doris.apache.org/zh-CN/docs/dev/admin-manual/maint-monitor/memory-management/memory-tracker target=_blank rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/admin-manual/maint-monitor/memory-management/memory-tracker</a></p>
</li>
<li>
<p>Table Valued Function</p>
<p>Doris implements a set of Table Valued Function (TVF). TVF can be regarded as an ordinary table, which can appear in all places where "table" can appear in SQL.</p>
<p>For example, we can use S3 TVF to implement data import on object storage:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#F8F8F2;--prism-background-color:#282A36><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_e6Vv><span class=token-line style=color:#F8F8F2><span class="token plain">insert into tbl select * from s3("s3://bucket/file.*", "ak" = "xx", "sk" = "xxx") where c1 > 2;</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>Or directly query data files on HDFS:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#F8F8F2;--prism-background-color:#282A36><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_e6Vv><span class=token-line style=color:#F8F8F2><span class="token plain">insert into tbl select * from hdfs("hdfs://bucket/file.*") where c1 > 2;</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>TVF can help users make full use of the rich expressiveness of SQL and flexibly process various data.</p>
<p>Documentation:</p>
<p><a href=https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-functions/table-functions/s3 target=_blank rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-functions/table-functions/s3</a></p>
<p><a href=https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-functions/table-functions/hdfs target=_blank rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-functions/table-functions/hdfs</a></p>
</li>
<li>
<p>A more convenient way to create partitions</p>
<p>Support for creating multiple partitions within a time range via the <code>FROM TO</code> command.</p>
</li>
<li>
<p>Column renaming</p>
<p>For tables with Light Schema Change enabled, column renaming is supported.</p>
<p>Documentation: <a href=https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Definition-Statements/Alter/ALTER-TABLE-RENAME target=_blank rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Definition-Statements/Alter/ALTER-TABLE-RENAME</a></p>
</li>
<li>
<p>Richer permission management</p>
<ul>
<li>
<p>Support row-level permissions</p>
<p>Row-level permissions can be created with the <code>CREATE ROW POLICY</code> command.</p>
<p>Documentation: <a href=https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Definition-Statements/Create/CREATE-POLICY target=_blank rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Definition-Statements/Create/CREATE-POLICY</a></p>
</li>
<li>
<p>Support specifying password strength, expiration time, etc.</p>
</li>
<li>
<p>Support for locking accounts after multiple failed logins.</p>
<p>Documentation: <a href=https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Account-Management-Statements/ALTER-USER target=_blank rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Account-Management-Statements/ALTER-USER</a></p>
</li>
</ul>
</li>
<li>
<p>Import</p>
<ul>
<li>
<p>CSV import supports csv files with header.</p>
<p>Search for <code>csv_with_names</code> in the documentation: <a href=https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Manipulation-Statements/Load/STREAM-LOAD/ target=_blank rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Manipulation-Statements/Load/STREAM-LOAD/</a></p>
</li>
<li>
<p>Stream Load adds <code>hidden_columns</code>, which can explicitly specify the delete flag column and sequence column.</p>
<p>Search for <code>hidden_columns</code> in the documentation: <a href=https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Manipulation-Statements/Load/STREAM-LOAD target=_blank rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Manipulation-Statements/Load/STREAM-LOAD</a></p>
</li>
<li>
<p>Spark Load supports Parquet and ORC file import.</p>
</li>
<li>
<p>Support for cleaning completed imported Labels</p>
<p>Documentation: <a href=https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Manipulation-Statements/Load/CLEAN-LABEL target=_blank rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Manipulation-Statements/Load/CLEAN-LABEL</a></p>
</li>
<li>
<p>Support batch cancellation of import jobs by status</p>
<p>Documentation: <a href=https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Manipulation-Statements/Load/CANCEL-LOAD target=_blank rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Manipulation-Statements/Load/CANCEL-LOAD</a></p>
</li>
<li>
<p>Added support for Alibaba Cloud oss, Tencent Cloud cos/chdfs and Huawei Cloud obs in broker load.</p>
<p>Documentation: <a href=https://doris.apache.org/zh-CN/docs/dev/advanced/broker target=_blank rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/advanced/broker</a></p>
</li>
<li>
<p>Support access to hdfs through hive-site.xml file configuration.</p>
<p>Documentation: <a href=https://doris.apache.org/zh-CN/docs/dev/admin-manual/config/config-dir target=_blank rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/admin-manual/config/config-dir</a></p>
</li>
</ul>
</li>
<li>
<p>Support viewing the contents of the catalog recycle bin through <code>SHOW CATALOG RECYCLE BIN</code> function.</p>
<p>Documentation: <a href=https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Show-Statements/SHOW-CATALOG-RECYCLE-BIN target=_blank rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Show-Statements/SHOW-CATALOG-RECYCLE-BIN</a></p>
</li>
<li>
<p>Support <code>SELECT * EXCEPT</code> syntax.</p>
<p>Documentation: <a href=https://doris.apache.org/zh-CN/docs/dev/data-table/basic-usage target=_blank rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/data-table/basic-usage</a></p>
</li>
<li>
<p>OUTFILE supports ORC format export. And supports multi-byte delimiters.</p>
<p>Documentation: <a href=https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Manipulation-Statements/OUTFILE target=_blank rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Manipulation-Statements/OUTFILE</a></p>
</li>
<li>
<p>Support to modify the number of Query Profiles that can be saved through configuration.</p>
<p>Document search FE configuration item: max_query_profile_num</p>
</li>
<li>
<p>The DELETE statement supports IN predicate conditions. And it supports partition pruning.</p>
<p>Documentation: <a href=https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Manipulation-Statements/Manipulation/DELETE target=_blank rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Manipulation-Statements/Manipulation/DELETE</a></p>
</li>
<li>
<p>The default value of the time column supports using <code>CURRENT_TIMESTAMP</code></p>
<p>Search for "CURRENT_TIMESTAMP" in the documentation: <a href=https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Definition-Statements/Create/CREATE-TABLE target=_blank rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Definition-Statements/Create/CREATE-TABLE</a></p>
</li>
<li>
<p>Add two system tables: backends, rowsets</p>
<p>Documentation:</p>
<p><a href=https://doris.apache.org/zh-CN/docs/dev/admin-manual/system-table/backends target=_blank rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/admin-manual/system-table/backends</a></p>
<p><a href=https://doris.apache.org/zh-CN/docs/dev/admin-manual/system-table/rowsets target=_blank rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/admin-manual/system-table/rowsets</a></p>
</li>
<li>
<p>Backup and restore</p>
<ul>
<li>
<p>The Restore job supports the <code>reserve_replica</code> parameter, so that the number of replicas of the restored table is the same as that of the backup.</p>
</li>
<li>
<p>The Restore job supports <code>reserve_dynamic_partition_enable</code> parameter, so that the restored table keeps the dynamic partition enabled.</p>
</li>
</ul>
<p>Documentation: <a href=https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Definition-Statements/Backup-and-Restore/RESTORE target=_blank rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Definition-Statements/Backup-and-Restore/RESTORE</a></p>
<ul>
<li>Support backup and restore operations through the built-in libhdfs, no longer rely on broker.</li>
</ul>
<p>Documentation: <a href=https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Definition-Statements/Backup-and-Restore/CREATE-REPOSITORY target=_blank rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Definition-Statements/Backup-and-Restore/CREATE-REPOSITORY</a></p>
</li>
<li>
<p>Support data balance between multiple disks on the same machine</p>
<p>Documentation:</p>
<p><a href=https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Database-Administration-Statements/ADMIN-REBALANCE-DISK target=_blank rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Database-Administration-Statements/ADMIN-REBALANCE-DISK</a></p>
<p><a href=https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Database-Administration-Statements/ADMIN-CANCEL-REBALANCE-DISK target=_blank rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Database-Administration-Statements/ADMIN-CANCEL-REBALANCE-DISK</a></p>
</li>
<li>
<p>Routine Load supports subscribing to Kerberos-authenticated Kafka services.</p>
<p>Search for kerberos in the documentation: <a href=https://doris.apache.org/zh-CN/docs/dev/data-operate/import/import-way/routine-load-manual target=_blank rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/data-operate/import/import-way/routine-load-manual</a></p>
</li>
<li>
<p>New built-in-function</p>
<p>Added the following built-in functions:</p>
<ul>
<li><code>cbrt</code></li>
<li><code>sequence_match/sequence_count</code></li>
<li><code>mask/mask_first_n/mask_last_n</code></li>
<li><code>elt</code></li>
<li><code>any/any_value</code></li>
<li><code>group_bitmap_xor</code></li>
<li><code>ntile</code></li>
<li><code>nvl</code></li>
<li><code>uuid</code></li>
<li><code>initcap</code></li>
<li><code>regexp_replace_one/regexp_extract_all</code></li>
<li><code>multi_search_all_positions/multi_match_any</code></li>
<li><code>domain/domain_without_www/protocol</code></li>
<li><code>running_difference</code></li>
<li><code>bitmap_hash64</code></li>
<li><code>murmur_hash3_64</code></li>
<li><code>to_monday</code></li>
<li><code>not_null_or_empty</code></li>
<li><code>window_funnel</code></li>
<li><code>group_bit_and/group_bit_or/group_bit_xor</code></li>
<li><code>outer combine</code></li>
<li>and all array functions</li>
</ul>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=upgrade-notices>Upgrade Notices<a href=#upgrade-notices class=hash-link aria-label="Direct link to Upgrade Notices" title="Direct link to Upgrade Notices">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=known-issues>Known Issues<a href=#known-issues class=hash-link aria-label="Direct link to Known Issues" title="Direct link to Known Issues">​</a></h3>
<ul>
<li>Use JDK11 will cause BE crash, please use JDK8 instead.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=behavior-changes>Behavior Changes<a href=#behavior-changes class=hash-link aria-label="Direct link to Behavior Changes" title="Direct link to Behavior Changes">​</a></h3>
<ul>
<li>
<p>Permission level changes</p>
<p>Because the catalog level is introduced, the corresponding user permission level will also be changed automatically. The rules are as follows:</p>
<ul>
<li>GlobalPrivs and ResourcePrivs remain unchanged</li>
<li>Added CatalogPrivs level.</li>
<li>The original DatabasePrivs level is added with the internal prefix (indicating the db in the internal catalog)</li>
<li>Add the internal prefix to the original TablePrivs level (representing tbl in the internal catalog)</li>
</ul>
</li>
<li>
<p>In GroupBy and Having clauses, match on column names in preference to aliases. (#14408)</p>
</li>
<li>
<p>Creating columns starting with <code>mv_</code> is no longer supported. <code>mv_</code> is a reserved keyword in materialized views (#14361)</p>
</li>
<li>
<p>Removed the default limit of 65535 rows added by the order by statement, and added the session variable <code>default_order_by_limit</code> to configure this limit. (#12478)</p>
</li>
<li>
<p>In the table generated by "Create Table As Select", all string columns use the string type uniformly, and no longer distinguish varchar/char/string (#14382)</p>
</li>
<li>
<p>In the audit log, remove the word <code>default_cluster</code> before the db and user names. (#13499) (#11408)</p>
</li>
<li>
<p>Add sql digest field in audit log (#8919)</p>
</li>
<li>
<p>The union clause always changes the order by logic. In the new version, the order by clause will be executed after the union is executed, unless explicitly associated by parentheses. (#9745)</p>
</li>
<li>
<p>During the decommission operation, the tablet in the recycle bin will be ignored to ensure that the decomission can be completed. (#14028)</p>
</li>
<li>
<p>The returned result of Decimal will be displayed according to the precision declared in the original column, or according to the precision specified in the cast function. (#13437)</p>
</li>
<li>
<p>Changed column name length limit from 64 to 256 (#14671)</p>
</li>
<li>
<p>Changes to FE configuration items</p>
<ul>
<li>
<p>The <code>enable_vectorized_load</code> parameter is enabled by default. (#11833)</p>
</li>
<li>
<p>Increased <code>create_table_timeout</code> value. The default timeout for table creation operations will be increased. (#13520)</p>
</li>
<li>
<p>Modify <code>stream_load_default_timeout_second</code> default value to 3 days.</p>
</li>
<li>
<p>Modify the default value of <code>alter_table_timeout_second</code> to one month.</p>
</li>
<li>
<p>Increase the parameter <code>max_replica_count_when_schema_change</code> to limit the number of replicas involved in the alter job, the default is 100000. (#12850)</p>
</li>
<li>
<p>Add <code>disable_iceberg_hudi_table</code>. The iceberg and hudi appearances are disabled by default, and the multi catalog function is recommended. (#13932)</p>
</li>
</ul>
</li>
<li>
<p>Changes to BE configuration items</p>
<ul>
<li>
<p>Removed <code>disable_stream_load_2pc</code> parameter. 2PC's stream load can be used directly. (#13520)</p>
</li>
<li>
<p>Modify <code>tablet_rowset_stale_sweep_time_sec</code> from 1800 seconds to 300 seconds.</p>
</li>
<li>
<p>Redesigned configuration item name about compaction (#13495)</p>
</li>
<li>
<p>Revisited parameter about memory optimization (#13781)</p>
</li>
</ul>
</li>
<li>
<p>Session variable changes</p>
<ul>
<li>
<p>Modify the variable <code>enable_insert_strict</code> to true by default. This will cause some insert operations that could be executed before, but inserted illegal values, to no longer be executed. (11866)</p>
</li>
<li>
<p>Modified variable <code>enable_local_exchange</code> to default to true (#13292)</p>
</li>
<li>
<p>Default data transmission via lz4 compression, controlled by variable <code>fragment_transmission_compression_codec</code> (#11955)</p>
</li>
<li>
<p>Add <code>skip_storage_engine_merge</code> variable for debugging unique or agg model data (#11952)</p>
<p>Documentation: <a href=https://doris.apache.org/zh-CN/docs/dev/advanced/variables target=_blank rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/advanced/variables</a></p>
</li>
</ul>
</li>
<li>
<p>The BE startup script will check whether the value is greater than 200W through <code>/proc/sys/vm/max_map_count</code>. Otherwise, the startup fails. (#11052)</p>
</li>
<li>
<p>Removed mini load interface (#10520)</p>
</li>
<li>
<p>FE Metadata Version</p>
<p>FE Meta Version changed from 107 to 114, and cannot be rolled back after upgrading.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=during-upgrade>During Upgrade<a href=#during-upgrade class=hash-link aria-label="Direct link to During Upgrade" title="Direct link to During Upgrade">​</a></h3>
<ol>
<li>
<p>Upgrade preparation</p>
<ul>
<li>
<p>Need to replace: lib, bin directory (start/stop scripts have been modified)</p>
</li>
<li>
<p>BE also needs to configure JAVA_HOME, and already supports JDBC Table and Java UDF.</p>
</li>
<li>
<p>The default JVM Xmx parameter in fe.conf is changed to 8GB.</p>
</li>
</ul>
</li>
<li>
<p>Possible errors during the upgrade process</p>
<ul>
<li>
<p>The repeat function cannot be used and an error is reported: <code>vectorized repeat function cannot be executed</code>, you can turn off the vectorized execution engine before upgrading. (#13868)</p>
</li>
<li>
<p>schema change fails with error: <code>desc_tbl is not set. Maybe the FE version is not equal to the BE</code> (#13822)</p>
</li>
<li>
<p>Vectorized hash join cannot be used and an error will be reported. <code>vectorized hash join cannot be executed</code>. You can turn off the vectorized execution engine before upgrading. (#13753)</p>
</li>
</ul>
<p>The above errors will return to normal after a full upgrade.</p>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=performance-impact>Performance Impact<a href=#performance-impact class=hash-link aria-label="Direct link to Performance Impact" title="Direct link to Performance Impact">​</a></h3>
<ul>
<li>
<p>By default, JeMalloc is used as the memory allocator of the new version BE, replacing TcMalloc (#13367)</p>
</li>
<li>
<p>The batch size in the tablet sink is modified to be at least 8K. (#13912)</p>
</li>
<li>
<p>Disable chunk allocator by default (#13285)</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=api-changes>API Changes<a href=#api-changes class=hash-link aria-label="Direct link to API Changes" title="Direct link to API Changes">​</a></h3>
<ul>
<li>
<p>BE's http api error return information changed from <code>{"status": "Fail", "msg": "xxx"}</code> to more specific <code>{"status": "Not found", "msg": "Tablet not found. tablet_id=1202"}</code>(#9771)</p>
</li>
<li>
<p>In <code>SHOW CREATE TABLE</code>, the content of comment is changed from double quotes to single quotes (#10327)</p>
</li>
<li>
<p>Support ordinary users to obtain query profile through http command. (#14016)
Documentation: <a href=https://doris.apache.org/zh-CN/docs/dev/admin-manual/http-actions/fe/manager/query-profile-action target=_blank rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/admin-manual/http-actions/fe/manager/query-profile-action</a></p>
</li>
<li>
<p>Optimized the way to specify the sequence column, you can directly specify the column name. (#13872)
Documentation: <a href=https://doris.apache.org/zh-CN/docs/dev/data-operate/update-delete/sequence-column-manual target=_blank rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/data-operate/update-delete/sequence-column-manual</a></p>
</li>
<li>
<p>Increase the space usage of remote storage in the results returned by <code>show backends</code> and <code>show tablets</code> (#11450)</p>
</li>
<li>
<p>Removed Num-Based Compaction related code (#13409)</p>
</li>
<li>
<p>Refactored BE's error code mechanism, some returned error messages will change (#8855)
other</p>
</li>
<li>
<p>Support Docker official image.</p>
</li>
<li>
<p>Support compiling Doris on MacOS(x86/M1) and ubuntu-22.04
Documentation: <a href=https://doris.apache.org/zh-CN/docs/dev/install/source-install/compilation-mac/ target=_blank rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/install/source-install/compilation-mac/</a></p>
</li>
<li>
<p>Support for image file verification.</p>
<p>Documentation: <a href=https://doris.apache.org/zh-CN/docs/dev/admin-manual/maint-monitor/metadata-operation/ target=_blank rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/admin-manual/maint-monitor/metadata-operation/</a></p>
</li>
<li>
<p>script related</p>
<ul>
<li>
<p>The stop scripts of FE and BE support exiting FE and BE via the <code>--grace</code> parameter (use kill -15 signal instead of kill -9)</p>
</li>
<li>
<p>FE start script supports checking the current FE version via --version (#11563)</p>
</li>
</ul>
</li>
<li>
<p>Support to get the data and related table creation statement of a tablet through the <code>ADMIN COPY TABLET</code> command, for local problem debugging (#12176)</p>
<p>Documentation: <a href=https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Database-Administration-Statements/ADMIN-COPY-TABLET target=_blank rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Database-Administration-Statements/ADMIN-COPY-TABLET</a></p>
</li>
<li>
<p>Support to obtain a table creation statement related to a SQL statement through the http api for local problem reproduction (#11979)</p>
<p>Documentation: <a href=https://doris.apache.org/zh-CN/docs/dev/admin-manual/http-actions/fe/query-schema-action target=_blank rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/admin-manual/http-actions/fe/query-schema-action</a></p>
</li>
<li>
<p>Support to close the compaction function of this table when creating a table, for testing (#11743)</p>
<p>Search for "disble_auto_compaction" in the documentation: <a href=https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Definition-Statements/Create/CREATE-TABLE target=_blank rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-reference/Data-Definition-Statements/Create/CREATE-TABLE</a></p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=big-thanks>Big Thanks<a href=#big-thanks class=hash-link aria-label="Direct link to Big Thanks" title="Direct link to Big Thanks">​</a></h2>
<p>Thanks to ALL who contributed to this release! (alphabetically)</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#F8F8F2;--prism-background-color:#282A36><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_e6Vv><span class=token-line style=color:#F8F8F2><span class="token plain">@924060929</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@a19920714liou</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@adonis0147</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@Aiden-Dong</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@aiwenmo</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@AshinGau</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@b19mud</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@BePPPower</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@BiteTheDDDDt</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@bridgeDream</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@ByteYue</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@caiconghui</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@CalvinKirs</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@cambyzju</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@caoliang-web</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@carlvinhust2012</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@catpineapple</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@ccoffline</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@chenlinzhong</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@chovy-3012</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@coderjiang</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@cxzl25</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@dataalive</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@dataroaring</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@dependabot[bot]</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@dinggege1024</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@DongLiang-0</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@Doris-Extras</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@eldenmoon</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@EmmyMiao87</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@englefly</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@FreeOnePlus</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@Gabriel39</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@gaodayue</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@geniusjoe</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@gj-zhang</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@gnehil</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@GoGoWen</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@HappenLee</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@hello-stephen</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@Henry2SS</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@hf200012</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@huyuanfeng2018</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@jacktengg</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@jackwener</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@jeffreys-cat</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@Jibing-Li</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@JNSimba</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@Kikyou1997</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@Lchangliang</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@LemonLiTree</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@lexoning</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@liaoxin01</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@lide-reed</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@link3280</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@liutang123</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@liuyaolin</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@LOVEGISER</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@lsy3993</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@luozenglin</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@luzhijing</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@madongz</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@morningman</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@morningman-cmy</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@morrySnow</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@mrhhsg</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@Myasuka</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@myfjdthink</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@nextdreamblue</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@pan3793</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@pangzhili</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@pengxiangyu</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@platoneko</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@qidaye</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@qzsee</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@SaintBacchus</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@SeekingYang</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@smallhibiscus</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@sohardforaname</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@song7788q</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@spaces-X</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@ssusieee</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@stalary</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@starocean999</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@SWJTU-ZhangLei</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@TaoZex</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@timelxy</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@Wahno</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@wangbo</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@wangshuo128</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@wangyf0555</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@weizhengte</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@weizuo93</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@wsjz</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@wunan1210</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@xhmz</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@xiaokang</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@xiaokangguo</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@xinyiZzz</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@xy720</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@yangzhg</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@Yankee24</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@yeyudefeng</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@yiguolei</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@yinzhijian</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@yixiutt</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@yuanyuan8983</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@zbtzbtzbt</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@zenoyang</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@zhangboya1</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@zhangstar333</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@zhannngchen</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@ZHbamboo</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@zhengshiJ</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@zhenhb</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@zhqu1148980644</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@zuochunwei</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@zy-kkk</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div></div></div></article><article class=margin-bottom--xl itemprop=blogPost itemscope itemtype=http://schema.org/BlogPosting><div class=markdown itemprop=articleBody><header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href=/blog/>Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class=s-tags><span class=s-tag>Release Notes</span></span></span></div><h2 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop=headline><a itemprop=url href=/blog/release-note-1.1.4/>Apache Doris announced the official release of version 1.1.4</a></h2><div class="blog-info text-center flex justify-center text-sm text-black"><span class=authors><span class="s-author text-black">Apache Doris</span></span><time datetime=2022-11-11T00:00:00.000Z itemprop=datePublished class="text-black ml-4">November 11, 2022</time></div></header><div class=markdown itemprop=articleBody><p>In this release, Doris Team has fixed about 60 issues or performance improvement since 1.1.3. This release is a bugfix release on 1.1 and all users are encouraged to upgrade to this release.</p>
<ul>
<li>
<p>Support obs broker load for Huawei Cloud. <a href=https://github.com/apache/doris/pull/13523 target=_blank rel="noopener noreferrer">#13523</a></p>
</li>
<li>
<p>SparkLoad support parquet and orc file.<a href=https://github.com/apache/doris/pull/13438 target=_blank rel="noopener noreferrer">#13438</a></p>
</li>
</ul>
<h1>Improvements</h1>
<ul>
<li>Do not acquire mutex in metric hook since it will affect query performance during heavy load.<a href=https://github.com/apache/doris/pull/10941 target=_blank rel="noopener noreferrer">#10941</a></li>
</ul>
<h1>BugFix</h1>
<ul>
<li>
<p>The where condition does not take effect when spark load loads the file. <a href=https://github.com/apache/doris/pull/13804 target=_blank rel="noopener noreferrer">#13804</a></p>
</li>
<li>
<p>If function return error result when there is nullable column in vectorized mode. <a href=https://github.com/apache/doris/pull/13779 target=_blank rel="noopener noreferrer">#13779</a></p>
</li>
<li>
<p>Fix incorrect result when using anti join with other join predicates. <a href=https://github.com/apache/doris/pull/13743 target=_blank rel="noopener noreferrer">#13743</a></p>
</li>
<li>
<p>BE crash when call function concat(ifnull). <a href=https://github.com/apache/doris/pull/13693 target=_blank rel="noopener noreferrer">#13693</a></p>
</li>
<li>
<p>Fix planner bug when there is a function in group by clause. <a href=https://github.com/apache/doris/pull/13613 target=_blank rel="noopener noreferrer">#13613</a></p>
</li>
<li>
<p>Table name and column name is not recognized correctly in lateral view clause. <a href=https://github.com/apache/doris/pull/13600 target=_blank rel="noopener noreferrer">#13600</a></p>
</li>
<li>
<p>Unknown column when use MV and table alias. <a href=https://github.com/apache/doris/pull/13605 target=_blank rel="noopener noreferrer">#13605</a></p>
</li>
<li>
<p>JSONReader release memory of both value and parse allocator. <a href=https://github.com/apache/doris/pull/13513 target=_blank rel="noopener noreferrer">#13513</a></p>
</li>
<li>
<p>Fix allow create mv using to_bitmap() on negative value columns when enable_vectorized_alter_table is true. <a href=https://github.com/apache/doris/pull/13448 target=_blank rel="noopener noreferrer">#13448</a></p>
</li>
<li>
<p>Microsecond in function from_date_format_str is lost. <a href=https://github.com/apache/doris/pull/13446 target=_blank rel="noopener noreferrer">#13446</a></p>
</li>
<li>
<p>Sort exprs nullability property may not be right after subsitute using child's smap info. <a href=https://github.com/apache/doris/pull/13328 target=_blank rel="noopener noreferrer">#13328</a></p>
</li>
<li>
<p>Fix core dump on case when have 1000 condition. <a href=https://github.com/apache/doris/pull/13315 target=_blank rel="noopener noreferrer">#13315</a></p>
</li>
<li>
<p>Fix bug that last line of data lost for stream load. <a href=https://github.com/apache/doris/pull/13066 target=_blank rel="noopener noreferrer">#13066</a></p>
</li>
<li>
<p>Restore table or partition with the same replication num as before the backup. <a href=https://github.com/apache/doris/pull/11942 target=_blank rel="noopener noreferrer">#11942</a></p>
</li>
</ul></div></div></article><article class=margin-bottom--xl itemprop=blogPost itemscope itemtype=http://schema.org/BlogPosting><div class=markdown itemprop=articleBody><header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href=/blog/>Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class=s-tags><span class=s-tag>Release Notes</span></span></span></div><h2 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop=headline><a itemprop=url href=/blog/release-note-1.1.3/>Apache Doris announced the official release of version 1.1.3</a></h2><div class="blog-info text-center flex justify-center text-sm text-black"><span class=authors><span class="s-author text-black">Apache Doris</span></span><time datetime=2022-10-17T00:00:00.000Z itemprop=datePublished class="text-black ml-4">October 17, 2022</time></div></header><div class=markdown itemprop=articleBody><p>In this release, Doris Team has fixed more than 80 issues or performance improvement since 1.1.2. This release is a bugfix release on 1.1 and all users are encouraged to upgrade to this release.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=features>Features<a href=#features class=hash-link aria-label="Direct link to Features" title="Direct link to Features">​</a></h2>
<ul>
<li>
<p>Support escape identifiers for sqlserver and postgresql in ODBC table.</p>
</li>
<li>
<p>Could use Parquet as output file format.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=improvements>Improvements<a href=#improvements class=hash-link aria-label="Direct link to Improvements" title="Direct link to Improvements">​</a></h2>
<ul>
<li>
<p>Optimize flush policy to avoid small segments. <a href=https://github.com/apache/doris/pull/12706 target=_blank rel="noopener noreferrer">#12706</a> <a href=https://github.com/apache/doris/pull/12716 target=_blank rel="noopener noreferrer">#12716</a></p>
</li>
<li>
<p>Refactor runtime filter to reduce the prepare time. <a href=https://github.com/apache/doris/pull/13127 target=_blank rel="noopener noreferrer">#13127</a></p>
</li>
<li>
<p>Lots of memory control related issues during query or load process. <a href=https://github.com/apache/doris/pull/12682 target=_blank rel="noopener noreferrer">#12682</a> <a href=https://github.com/apache/doris/pull/12688 target=_blank rel="noopener noreferrer">#12688</a> <a href=https://github.com/apache/doris/pull/12708 target=_blank rel="noopener noreferrer">#12708</a> <a href=https://github.com/apache/doris/pull/12776 target=_blank rel="noopener noreferrer">#12776</a> <a href=https://github.com/apache/doris/pull/12782 target=_blank rel="noopener noreferrer">#12782</a> <a href=https://github.com/apache/doris/pull/12791 target=_blank rel="noopener noreferrer">#12791</a> <a href=https://github.com/apache/doris/pull/12794 target=_blank rel="noopener noreferrer">#12794</a> <a href=https://github.com/apache/doris/pull/12820 target=_blank rel="noopener noreferrer">#12820</a> <a href=https://github.com/apache/doris/pull/12932 target=_blank rel="noopener noreferrer">#12932</a> <a href=https://github.com/apache/doris/pull/12954 target=_blank rel="noopener noreferrer">#12954</a> <a href=https://github.com/apache/doris/pull/12951 target=_blank rel="noopener noreferrer">#12951</a></p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=bug-fixes>Bug Fixes<a href=#bug-fixes class=hash-link aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h2>
<ul>
<li>
<p>Core dump on compaction with largeint. <a href=https://github.com/apache/doris/pull/10094 target=_blank rel="noopener noreferrer">#10094</a></p>
</li>
<li>
<p>Grouping sets cause be core or return wrong results. <a href=https://github.com/apache/doris/pull/12313 target=_blank rel="noopener noreferrer">#12313</a></p>
</li>
<li>
<p>PREAGGREGATION flag in orthogonal_bitmap_union_count operator is wrong. <a href=https://github.com/apache/doris/pull/12581 target=_blank rel="noopener noreferrer">#12581</a></p>
</li>
<li>
<p>Level1Iterator should release iterators in heap and it may cause memory leak. <a href=https://github.com/apache/doris/pull/12592 target=_blank rel="noopener noreferrer">#12592</a></p>
</li>
<li>
<p>Fix decommission failure with 2 BEs and existing colocation table. <a href=https://github.com/apache/doris/pull/12644 target=_blank rel="noopener noreferrer">#12644</a></p>
</li>
<li>
<p>BE may core dump because of stack-buffer-overflow when TBrokerOpenReaderResponse too large. <a href=https://github.com/apache/doris/pull/12658 target=_blank rel="noopener noreferrer">#12658</a></p>
</li>
<li>
<p>BE may OOM during load when error code -238 occurs. <a href=https://github.com/apache/doris/pull/12666 target=_blank rel="noopener noreferrer">#12666</a></p>
</li>
<li>
<p>Fix wrong child expression of lead function. <a href=https://github.com/apache/doris/pull/12587 target=_blank rel="noopener noreferrer">#12587</a></p>
</li>
<li>
<p>Fix intersect query failed in row storage code. <a href=https://github.com/apache/doris/pull/12712 target=_blank rel="noopener noreferrer">#12712</a></p>
</li>
<li>
<p>Fix wrong result produced by curdate()/current_date() function. <a href=https://github.com/apache/doris/pull/12720 target=_blank rel="noopener noreferrer">#12720</a></p>
</li>
<li>
<p>Fix lateral view explode_split with temp table bug. <a href=https://github.com/apache/doris/pull/13643 target=_blank rel="noopener noreferrer">#13643</a></p>
</li>
<li>
<p>Bucket shuffle join plan is wrong in two same table. <a href=https://github.com/apache/doris/pull/12930 target=_blank rel="noopener noreferrer">#12930</a></p>
</li>
<li>
<p>Fix bug that tablet version may be wrong when doing alter and load. <a href=https://github.com/apache/doris/pull/13070 target=_blank rel="noopener noreferrer">#13070</a></p>
</li>
<li>
<p>BE core when load data using broker with md5sum()/sm3sum(). <a href=https://github.com/apache/doris/pull/13009 target=_blank rel="noopener noreferrer">#13009</a></p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=upgrade-notes>Upgrade Notes<a href=#upgrade-notes class=hash-link aria-label="Direct link to Upgrade Notes" title="Direct link to Upgrade Notes">​</a></h2>
<p>PageCache and ChunkAllocator are disabled by default to reduce memory usage and can be re-enabled by modifying the configuration items <code>disable_storage_page_cache</code> and <code>chunk_reserved_bytes_limit</code>.</p>
<p>Storage Page Cache and Chunk Allocator cache user data chunks and memory preallocation, respectively.</p>
<p>These two functions take up a certain percentage of memory and are not freed. This part of memory cannot be flexibly allocated, which may lead to insufficient memory for other tasks in some scenarios, affecting system stability and availability. Therefore, we disabled these two features by default in version 1.1.3.</p>
<p>However, in some latency-sensitive reporting scenarios, turning off this feature may lead to increased query latency. If you are worried about the impact of this feature on your business after upgrade, you can add the following parameters to be.conf to keep the same behavior as the previous version.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#F8F8F2;--prism-background-color:#282A36><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_e6Vv><span class=token-line style=color:#F8F8F2><span class="token plain">disable_storage_page_cache=false</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">chunk_reserved_bytes_limit=10%</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<ul>
<li><code>disable_storage_page_cache</code>: Whether to disable Storage Page Cache. version 1.1.2 (inclusive), the default is false, i.e., on. version 1.1.3 defaults to true, i.e., off.</li>
<li><code>chunk_reserved_bytes_limit</code>: Chunk allocator reserved memory size. 1.1.2 (and earlier), the default is 10% of the overall memory. 1.1.3 version default is 209715200 (200MB).</li>
</ul></div></div></article><article class=margin-bottom--xl itemprop=blogPost itemscope itemtype=http://schema.org/BlogPosting><div class=markdown itemprop=articleBody><header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href=/blog/>Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class=s-tags><span class=s-tag>Release Notes</span></span></span></div><h2 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop=headline><a itemprop=url href=/blog/release-note-1.1.1/>Apache Doris announced the official release of version 1.1.1</a></h2><div class="blog-info text-center flex justify-center text-sm text-black"><span class=authors><span class="s-author text-black">Apache Doris</span></span><time datetime=2022-09-13T00:00:00.000Z itemprop=datePublished class="text-black ml-4">September 13, 2022</time></div></header><div class=markdown itemprop=articleBody><h2 class="anchor anchorWithStickyNavbar_LWe7" id=features>Features<a href=#features class=hash-link aria-label="Direct link to Features" title="Direct link to Features">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=support-odbc-sink-in-vectorized-engine>Support ODBC Sink in Vectorized Engine.<a href=#support-odbc-sink-in-vectorized-engine class=hash-link aria-label="Direct link to Support ODBC Sink in Vectorized Engine." title="Direct link to Support ODBC Sink in Vectorized Engine.">​</a></h3>
<p>This feature is enabled in non-vectorized engine but it is missed in vectorized engine in 1.1. So that we add back this feature in 1.1.1.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=simple-memtracker-for-vectorized-engine>Simple Memtracker for Vectorized Engine.<a href=#simple-memtracker-for-vectorized-engine class=hash-link aria-label="Direct link to Simple Memtracker for Vectorized Engine." title="Direct link to Simple Memtracker for Vectorized Engine.">​</a></h3>
<p>There is no memtracker in BE for vectorized engine in 1.1, so that the memory is out of control and cause OOM. In 1.1.1, a simple memtracker is added to BE and could control the memory and cancel the query when memory exceeded.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=improvements>Improvements<a href=#improvements class=hash-link aria-label="Direct link to Improvements" title="Direct link to Improvements">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=cache-decompressed-data-in-page-cache>Cache decompressed data in page cache.<a href=#cache-decompressed-data-in-page-cache class=hash-link aria-label="Direct link to Cache decompressed data in page cache." title="Direct link to Cache decompressed data in page cache.">​</a></h3>
<p>Some data is compressed using bitshuffle and it costs a lot of time to decompress it during query. In 1.1.1, doris will decompress the data that encoded by bitshuffle to accelerate query and we find it could reduce 30% latency for some query in ssb-flat.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=bug-fixes>Bug Fixes<a href=#bug-fixes class=hash-link aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=fix-the-problem-that-could-not-do-rolling-upgrade-from-10serious>Fix the problem that could not do rolling upgrade from 1.0.(Serious)<a href=#fix-the-problem-that-could-not-do-rolling-upgrade-from-10serious class=hash-link aria-label="Direct link to Fix the problem that could not do rolling upgrade from 1.0.(Serious)" title="Direct link to Fix the problem that could not do rolling upgrade from 1.0.(Serious)">​</a></h3>
<p>This issue was introduced in version 1.1 and may cause BE core when upgrade BE but not upgrade FE.</p>
<p>If you encounter this problem, you can try to fix it with <a href=https://github.com/apache/doris/pull/10833 target=_blank rel="noopener noreferrer">#10833</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=fix-the-problem-that-some-query-not-fall-back-to-non-vectorized-engine-and-be-will-core>Fix the problem that some query not fall back to non-vectorized engine, and BE will core.<a href=#fix-the-problem-that-some-query-not-fall-back-to-non-vectorized-engine-and-be-will-core class=hash-link aria-label="Direct link to Fix the problem that some query not fall back to non-vectorized engine, and BE will core." title="Direct link to Fix the problem that some query not fall back to non-vectorized engine, and BE will core.">​</a></h3>
<p>Currently, vectorized engine could not deal with all sql queries and some queries (like left outer join) will use non-vectorized engine to run. But there are some cases not covered in 1.1. And it will cause be crash.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=compaction-not-work-correctly-and-cause--235-error>Compaction not work correctly and cause -235 Error.<a href=#compaction-not-work-correctly-and-cause--235-error class=hash-link aria-label="Direct link to Compaction not work correctly and cause -235 Error." title="Direct link to Compaction not work correctly and cause -235 Error.">​</a></h3>
<p>One rowset multi segments in uniq key compaction, segments rows will be merged in generic_iterator but merged_rows not increased. Compaction will failed in check_correctness, and make a tablet with too much versions which lead to -235 load error.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=some-segment-fault-cases-during-query>Some segment fault cases during query.<a href=#some-segment-fault-cases-during-query class=hash-link aria-label="Direct link to Some segment fault cases during query." title="Direct link to Some segment fault cases during query.">​</a></h3>
<p><a href=https://github.com/apache/doris/pull/10961 target=_blank rel="noopener noreferrer">#10961</a>
<a href=https://github.com/apache/doris/pull/10954 target=_blank rel="noopener noreferrer">#10954</a>
<a href=https://github.com/apache/doris/pull/10962 target=_blank rel="noopener noreferrer">#10962</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=thanks>Thanks<a href=#thanks class=hash-link aria-label="Direct link to Thanks" title="Direct link to Thanks">​</a></h2>
<p>Thanks to everyone who has contributed to this release:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#F8F8F2;--prism-background-color:#282A36><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_e6Vv><span class=token-line style=color:#F8F8F2><span class="token plain">@jacktengg</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@mrhhsg</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@xinyiZzz</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@yixiutt</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@starocean999</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@morrySnow</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@morningman</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@HappenLee</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div></div></div></article><article class=margin-bottom--xl itemprop=blogPost itemscope itemtype=http://schema.org/BlogPosting><div class=markdown itemprop=articleBody><header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href=/blog/>Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class=s-tags><span class=s-tag>Release Notes</span></span></span></div><h2 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop=headline><a itemprop=url href=/blog/release-note-1.1.2/>Apache Doris announced the official release of version 1.1.2</a></h2><div class="blog-info text-center flex justify-center text-sm text-black"><span class=authors><span class="s-author text-black">Apache Doris</span></span><time datetime=2022-09-13T00:00:00.000Z itemprop=datePublished class="text-black ml-4">September 13, 2022</time></div></header><div class=markdown itemprop=articleBody><p>In this release, Doris Team has fixed more than 170 issues or performance improvement since 1.1.1. This release is a bugfix release on 1.1 and all users are encouraged to upgrade to this release.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=features>Features<a href=#features class=hash-link aria-label="Direct link to Features" title="Direct link to Features">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=new-memtracker>New MemTracker<a href=#new-memtracker class=hash-link aria-label="Direct link to New MemTracker" title="Direct link to New MemTracker">​</a></h3>
<p>Introduced new MemTracker for both vectorized engine and non-vectorized engine which is more accurate.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=add-api-for-showing-current-queries-and-kill-query>Add API for showing current queries and kill query<a href=#add-api-for-showing-current-queries-and-kill-query class=hash-link aria-label="Direct link to Add API for showing current queries and kill query" title="Direct link to Add API for showing current queries and kill query">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=support-readwrite-emoji-of-utf16-via-odbc-table>Support read/write emoji of UTF16 via ODBC Table<a href=#support-readwrite-emoji-of-utf16-via-odbc-table class=hash-link aria-label="Direct link to Support read/write emoji of UTF16 via ODBC Table" title="Direct link to Support read/write emoji of UTF16 via ODBC Table">​</a></h3>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=improvements>Improvements<a href=#improvements class=hash-link aria-label="Direct link to Improvements" title="Direct link to Improvements">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=data-lake-related-improvements>Data Lake related improvements<a href=#data-lake-related-improvements class=hash-link aria-label="Direct link to Data Lake related improvements" title="Direct link to Data Lake related improvements">​</a></h3>
<ul>
<li>
<p>Improved HDFS ORC File scan performance about 300%. <a href=https://github.com/apache/doris/pull/11501 target=_blank rel="noopener noreferrer">#11501</a></p>
</li>
<li>
<p>Support HDFS HA mode when query Iceberg table.</p>
</li>
<li>
<p>Support query Hive data created by <a href=https://tez.apache.org/ target=_blank rel="noopener noreferrer">Apache Tez</a></p>
</li>
<li>
<p>Add Ali OSS as Hive external support.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=add-support-for-string-and-text-type-in-spark-load>Add support for string and text type in Spark Load<a href=#add-support-for-string-and-text-type-in-spark-load class=hash-link aria-label="Direct link to Add support for string and text type in Spark Load" title="Direct link to Add support for string and text type in Spark Load">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=add-reuse-block-in-non-vectorized-engine-and-have-50-performance-improvement-in-some-cases-11392>Add reuse block in non-vectorized engine and have 50% performance improvement in some cases. <a href=https://github.com/apache/doris/pull/11392 target=_blank rel="noopener noreferrer">#11392</a><a href=#add-reuse-block-in-non-vectorized-engine-and-have-50-performance-improvement-in-some-cases-11392 class=hash-link aria-label="Direct link to add-reuse-block-in-non-vectorized-engine-and-have-50-performance-improvement-in-some-cases-11392" title="Direct link to add-reuse-block-in-non-vectorized-engine-and-have-50-performance-improvement-in-some-cases-11392">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=improve-like-or-regex-performance>Improve like or regex performance<a href=#improve-like-or-regex-performance class=hash-link aria-label="Direct link to Improve like or regex performance" title="Direct link to Improve like or regex performance">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=disable-tcmallocs-aggressive_memory_decommit>Disable tcmalloc's aggressive_memory_decommit<a href=#disable-tcmallocs-aggressive_memory_decommit class=hash-link aria-label="Direct link to Disable tcmalloc's aggressive_memory_decommit" title="Direct link to Disable tcmalloc's aggressive_memory_decommit">​</a></h3>
<p>It will have 40% performance gains in load or query.</p>
<p>Currently it is a config, you can change it by set config <code>tc_enable_aggressive_memory_decommit</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=bug-fixes>Bug Fixes<a href=#bug-fixes class=hash-link aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=some-issues-about-fe-that-will-cause-fe-failure-or-data-corrupt>Some issues about FE that will cause FE failure or data corrupt.<a href=#some-issues-about-fe-that-will-cause-fe-failure-or-data-corrupt class=hash-link aria-label="Direct link to Some issues about FE that will cause FE failure or data corrupt." title="Direct link to Some issues about FE that will cause FE failure or data corrupt.">​</a></h3>
<ul>
<li>
<p>Add reserved disk config to avoid too many reserved BDB-JE files.<strong>(Serious)</strong>   In an HA environment, BDB JE will retains as many reserved files. The BDB-je log doesn't delete until approaching a disk limit.</p>
</li>
<li>
<p>Fix fatal bug in BDB-JE which will cause FE replica could not start correctly or data corrupted.** (Serious)**</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=fe-will-hang-on-waitfor_rpc-during-query-and-be-will-hang-in-high-concurrent-scenarios>Fe will hang on waitFor_rpc during query and BE will hang in high concurrent scenarios.<a href=#fe-will-hang-on-waitfor_rpc-during-query-and-be-will-hang-in-high-concurrent-scenarios class=hash-link aria-label="Direct link to Fe will hang on waitFor_rpc during query and BE will hang in high concurrent scenarios." title="Direct link to Fe will hang on waitFor_rpc during query and BE will hang in high concurrent scenarios.">​</a></h3>
<p><a href=https://github.com/apache/doris/pull/12459 target=_blank rel="noopener noreferrer">#12459</a> <a href=https://github.com/apache/doris/pull/12458 target=_blank rel="noopener noreferrer">#12458</a> <a href=https://github.com/apache/doris/pull/12392 target=_blank rel="noopener noreferrer">#12392</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=a-fatal-issue-in-vectorized-storage-engine-which-will-cause-wrong-result-serious>A fatal issue in vectorized storage engine which will cause wrong result. <strong>(Serious)</strong><a href=#a-fatal-issue-in-vectorized-storage-engine-which-will-cause-wrong-result-serious class=hash-link aria-label="Direct link to a-fatal-issue-in-vectorized-storage-engine-which-will-cause-wrong-result-serious" title="Direct link to a-fatal-issue-in-vectorized-storage-engine-which-will-cause-wrong-result-serious">​</a></h3>
<p><a href=https://github.com/apache/doris/pull/11754 target=_blank rel="noopener noreferrer">#11754</a> <a href=https://github.com/apache/doris/pull/11694 target=_blank rel="noopener noreferrer">#11694</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=lots-of-planner-related-issues-that-will-cause-be-core-or-in-abnormal-state>Lots of planner related issues that will cause BE core or in abnormal state.<a href=#lots-of-planner-related-issues-that-will-cause-be-core-or-in-abnormal-state class=hash-link aria-label="Direct link to Lots of planner related issues that will cause BE core or in abnormal state." title="Direct link to Lots of planner related issues that will cause BE core or in abnormal state.">​</a></h3>
<p><a href=https://github.com/apache/doris/pull/12080 target=_blank rel="noopener noreferrer">#12080</a> <a href=https://github.com/apache/doris/pull/12075 target=_blank rel="noopener noreferrer">#12075</a> <a href=https://github.com/apache/doris/pull/12040 target=_blank rel="noopener noreferrer">#12040</a> <a href=https://github.com/apache/doris/pull/12003 target=_blank rel="noopener noreferrer">#12003</a> <a href=https://github.com/apache/doris/pull/12007 target=_blank rel="noopener noreferrer">#12007</a> <a href=https://github.com/apache/doris/pull/11971 target=_blank rel="noopener noreferrer">#11971</a> <a href=https://github.com/apache/doris/pull/11933 target=_blank rel="noopener noreferrer">#11933</a> <a href=https://github.com/apache/doris/pull/11861 target=_blank rel="noopener noreferrer">#11861</a> <a href=https://github.com/apache/doris/pull/11859 target=_blank rel="noopener noreferrer">#11859</a> <a href=https://github.com/apache/doris/pull/11855 target=_blank rel="noopener noreferrer">#11855</a> <a href=https://github.com/apache/doris/pull/11837 target=_blank rel="noopener noreferrer">#11837</a> <a href=https://github.com/apache/doris/pull/11834 target=_blank rel="noopener noreferrer">#11834</a> <a href=https://github.com/apache/doris/pull/11821 target=_blank rel="noopener noreferrer">#11821</a> <a href=https://github.com/apache/doris/pull/11782 target=_blank rel="noopener noreferrer">#11782</a> <a href=https://github.com/apache/doris/pull/11723 target=_blank rel="noopener noreferrer">#11723</a> <a href=https://github.com/apache/doris/pull/11569 target=_blank rel="noopener noreferrer">#11569</a></div></div></article><article class=margin-bottom--xl itemprop=blogPost itemscope itemtype=http://schema.org/BlogPosting><div class=markdown itemprop=articleBody><header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href=/blog/>Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class=s-tags><span class=s-tag>Release Notes</span></span></span></div><h2 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop=headline><a itemprop=url href=/blog/release-note-1.1.0/>Apache Doris announced the official release of version 1.1.0</a></h2><div class="blog-info text-center flex justify-center text-sm text-black"><span class=authors><span class="s-author text-black">Apache Doris</span></span><time datetime=2022-07-14T00:00:00.000Z itemprop=datePublished class="text-black ml-4">July 14, 2022</time></div></header><div class=markdown itemprop=articleBody><p>Dear community, we are pleased to announce that we have officially released Apache Doris 1.1 on July 14, 2022! This is the first release version after Apache Doris graduated from the Apache incubator and became an Apache Top-Level Project.</p>
<p>In version 1.1, we realized the full vectorization of the computing layer and storage layer, and officially enabled the vectorized execution engine as a stable function. All queries are executed by the vectorized execution engine by default, and the performance is 3-5 times higher than the previous version. It increases the ability to access the external tables of Apache Iceberg and supports federated query of data in Doris and Iceberg, and expands the analysis capabilities of Apache Doris on the data lake; on the basis of the original LZ4, the ZSTD compression algorithm is added , further improves the data compression rate; fixed many performance and stability problems in previous versions, greatly improving system stability. Downloading and using is recommended.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=upgrade-notes>Upgrade Notes<a href=#upgrade-notes class=hash-link aria-label="Direct link to Upgrade Notes" title="Direct link to Upgrade Notes">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=the-vectorized-execution-engine-is-enabled-by-default>The vectorized execution engine is enabled by default<a href=#the-vectorized-execution-engine-is-enabled-by-default class=hash-link aria-label="Direct link to The vectorized execution engine is enabled by default" title="Direct link to The vectorized execution engine is enabled by default">​</a></h3>
<p>In version 1.0, we introduced the vectorized execution engine as an experimental feature and Users need to manually enable it when executing queries by configuring the session variables through <code>set batch_size = 4096</code> and <code>set enable_vectorized_engine = true</code> .</p>
<p>In version 1.1, we officially fully enabled the vectorized execution engine as a stable function. The session variable <code>enable_vectorized_engine</code> is set to true by default. All queries are executed by default through the vectorized execution engine.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=be-binary-file-renaming>BE Binary File Renaming<a href=#be-binary-file-renaming class=hash-link aria-label="Direct link to BE Binary File Renaming" title="Direct link to BE Binary File Renaming">​</a></h3>
<p>BE binary file has been renamed from palo_be to doris_be . Please pay attention to modifying the relevant scripts if you used to rely on process names for cluster management and other operations.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=segment-storage-format-upgrade>Segment storage format upgrade<a href=#segment-storage-format-upgrade class=hash-link aria-label="Direct link to Segment storage format upgrade" title="Direct link to Segment storage format upgrade">​</a></h3>
<p>The storage format of earlier versions of Apache Doris was Segment V1. In version 0.12, we had implemented Segment V2 as a new storage format, which introduced Bitmap indexes, memory tables, page cache, dictionary compression, delayed materialization and many other features. Starting from version 0.13, the default storage format for newly created tables is Segment V2, while maintaining compatibility with the Segment V1 format.</p>
<p>In order to ensure the maintainability of the code structure and reduce the additional learning and development costs caused by redundant historical codes, we have decided to no longer support the Segment v1 storage format from the next version. It is expected that this part of the code will be deleted in the Apache Doris 1.2 version, and all users who are still using the Segment V1 storage format must complete the data format conversion in version 1.1. Please refer to the following link for the operation manual:</p>
<p><a href=https://doris.apache.org/zh-CN/docs/1.0/administrator-guide/segment-v2-usage target=_blank rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/1.0/administrator-guide/segment-v2-usage</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=normal-upgrade>Normal Upgrade<a href=#normal-upgrade class=hash-link aria-label="Direct link to Normal Upgrade" title="Direct link to Normal Upgrade">​</a></h3>
<p>For normal upgrade operations, you can perform rolling upgrades according to the cluster upgrade documentation on the official website.</p>
<p><a href=https://doris.apache.org/zh-CN/docs/admin-manual/cluster-management/upgrade target=_blank rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/admin-manual/cluster-management/upgrade</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=features>Features<a href=#features class=hash-link aria-label="Direct link to Features" title="Direct link to Features">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=support-random-distribution-of-data-experimental>Support random distribution of data [experimental]<a href=#support-random-distribution-of-data-experimental class=hash-link aria-label="Direct link to Support random distribution of data [experimental]" title="Direct link to Support random distribution of data [experimental]">​</a></h3>
<p>In some scenarios (such as log data analysis), users may not be able to find a suitable bucket key to avoid data skew, so the system needs to provide additional distribution methods to solve the problem.</p>
<p>Therefore, when creating a table you can set <code>DISTRIBUTED BY random BUCKET number</code>to use random distribution, the data will be randomly written to a single tablet when importing to reduce the data fanout during the loading process. And reduce resource overhead and improve system stability.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=support-for-creating-iceberg-external-tablesexperimental>Support for creating Iceberg external tables[experimental]<a href=#support-for-creating-iceberg-external-tablesexperimental class=hash-link aria-label="Direct link to Support for creating Iceberg external tables[experimental]" title="Direct link to Support for creating Iceberg external tables[experimental]">​</a></h3>
<p>Iceberg external tables provide Apache Doris with direct access to data stored in Iceberg. Through Iceberg external tables, federated queries on data stored in local storage and Iceberg can be implemented, which saves tedious data loading work, simplifies the system architecture for data analysis, and performs more complex analysis operations.</p>
<p>In version 1.1, Apache Doris supports creating Iceberg external tables and querying data, and supports automatic synchronization of all table schemas in the Iceberg database through the REFRESH command.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=added-zstd-compression-algorithm>Added ZSTD compression algorithm<a href=#added-zstd-compression-algorithm class=hash-link aria-label="Direct link to Added ZSTD compression algorithm" title="Direct link to Added ZSTD compression algorithm">​</a></h3>
<p>At present, the data compression method in Apache Doris is uniformly specified by the system, and the default is LZ4. For some scenarios that are sensitive to data storage costs, the original data compression ratio requirements cannot be met.</p>
<p>In version 1.1, users can set "compression"="zstd" in the table properties to specify the compression method as ZSTD when creating a table. In the 25GB 110 million lines of text log test data, the highest compression rate is nearly 10 times, which is 53% higher than the original compression rate, and the speed of reading data from disk and decompressing it is increased by 30%.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=improvements>Improvements<a href=#improvements class=hash-link aria-label="Direct link to Improvements" title="Direct link to Improvements">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=more-comprehensive-vectorization-support>More comprehensive vectorization support<a href=#more-comprehensive-vectorization-support class=hash-link aria-label="Direct link to More comprehensive vectorization support" title="Direct link to More comprehensive vectorization support">​</a></h3>
<p>In version 1.1, we implemented full vectorization of the compute and storage layers, including:</p>
<p>Implemented vectorization of all built-in functions</p>
<p>The storage layer implements vectorization and supports dictionary optimization for low-cardinality string columns</p>
<p>Optimized and resolved numerous performance and stability issues with the vectorization engine.</p>
<p>We tested the performance of Apache Doris version 1.1 and version 0.15 on the SSB and TPC-H standard test datasets:</p>
<p>On all 13 SQLs in the SSB test data set, version 1.1 is better than version 0.15, and the overall performance is improved by about 3 times, which solves the problem of performance degradation in some scenarios in version 1.0;</p>
<p>On all 22 SQLs in the TPC-H test data set, version 1.1 is better than version 0.15, the overall performance is improved by about 4.5 times, and the performance of some scenarios is improved by more than ten times;</p>
<p><img decoding=async loading=lazy src=/assets/images/release-note-1.1.0-SSB-6067d10e7f8b966be8da2b64950622fb.png width=1280 height=554 class=img_ev3q></p>
<p align=center>SSB Benchmark</p>
<p><img decoding=async loading=lazy src=/assets/images/release-note-1.1.0-TPC-H-7d6975b410de89a004c7f058226a02da.png width=1280 height=596 class=img_ev3q></p>
<p align=center>TPC-H Benchmark</p>
<p><strong>Performance test report</strong></p>
<p><a href=https://doris.apache.org/zh-CN/docs/benchmark/ssb target=_blank rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/benchmark/ssb</a></p>
<p><a href=https://doris.apache.org/zh-CN/docs/benchmark/tpch target=_blank rel="noopener noreferrer">https://doris.apache.org/zh-CN/docs/benchmark/tpch</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=compaction-logic-optimization-and-real-time-guarantee>Compaction logic optimization and real-time guarantee<a href=#compaction-logic-optimization-and-real-time-guarantee class=hash-link aria-label="Direct link to Compaction logic optimization and real-time guarantee" title="Direct link to Compaction logic optimization and real-time guarantee">​</a></h3>
<p>In Apache Doris, each commit will generate a data version. In high concurrent write scenarios, -235 errors are prone to occur due to too many data versions and untimely compaction, and query performance will also decrease accordingly.</p>
<p>In version 1.1, we introduced QuickCompaction, which will actively trigger compaction when the data version increases. At the same time, by improving the ability to scan fragment metadata, it can quickly find fragments with too many data versions and trigger compaction. Through active triggering and passive scanning, the real-time problem of data merging is completely solved.</p>
<p>At the same time, for high-frequency small file cumulative compaction, the scheduling and isolation of compaction tasks is implemented to prevent the heavyweight base compaction from affecting the merging of new data.</p>
<p>Finally, for the merging of small files, the strategy of merging small files is optimized, and the method of gradient merging is adopted. Each time the files participating in the merging belong to the same data magnitude, it prevents versions with large differences in size from merging, and gradually merges hierarchically. , reducing the number of times a single file participates in merging, which can greatly save the CPU consumption of the system.</p>
<p>When the data upstream maintains a write frequency of 10w per second (20 concurrent write tasks, 5000 rows per job, and checkpoint interval of 1s), version 1.1 behaves as follows:</p>
<ul>
<li>
<p>Quick data consolidation: Tablet version remains below 50 and compaction score is stable. Compared with the -235 problem that frequently occurred during high concurrent writing in the previous version, the compaction merge efficiency has been improved by more than 10 times.</p>
</li>
<li>
<p>Significantly reduced CPU resource consumption: The strategy has been optimized for small file Compaction. In the above scenario of high concurrent writing, CPU resource consumption is reduced by 25%;</p>
</li>
<li>
<p>Stable query time consumption: The overall orderliness of data is improved, and the fluctuation of query time consumption is greatly reduced. The query time consumption during high concurrent writing is the same as that of only querying, and the query performance is improved by 3-4 times compared with the previous version.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=read-efficiency-optimization-for-parquet-and-orc-files>Read efficiency optimization for Parquet and ORC files<a href=#read-efficiency-optimization-for-parquet-and-orc-files class=hash-link aria-label="Direct link to Read efficiency optimization for Parquet and ORC files" title="Direct link to Read efficiency optimization for Parquet and ORC files">​</a></h3>
<p>By adjusting arrow parameters, arrow's multi-threaded read capability is used to speed up Arrow's reading of each row_group, and it is modified to SPSC model to reduce the cost of waiting for the network through prefetching. After optimization, the performance of Parquet file import is improved by 4 to 5 times.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=safer-metadata-checkpoint>Safer metadata Checkpoint<a href=#safer-metadata-checkpoint class=hash-link aria-label="Direct link to Safer metadata Checkpoint" title="Direct link to Safer metadata Checkpoint">​</a></h3>
<p>By double-checking the image files generated after the metadata checkpoint and retaining the function of historical image files, the problem of metadata corruption caused by image file errors is solved.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=bugfix>Bugfix<a href=#bugfix class=hash-link aria-label="Direct link to Bugfix" title="Direct link to Bugfix">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=fix-the-problem-that-the-data-cannot-be-queried-due-to-the-missing-data-versionserious>Fix the problem that the data cannot be queried due to the missing data version.(Serious)<a href=#fix-the-problem-that-the-data-cannot-be-queried-due-to-the-missing-data-versionserious class=hash-link aria-label="Direct link to Fix the problem that the data cannot be queried due to the missing data version.(Serious)" title="Direct link to Fix the problem that the data cannot be queried due to the missing data version.(Serious)">​</a></h3>
<p>This issue was introduced in version 1.0 and may result in the loss of data versions for multiple replicas.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=fix-the-problem-that-the-resource-isolation-is-invalid-for-the-resource-usage-limit-of-loading-tasks-moderate>Fix the problem that the resource isolation is invalid for the resource usage limit of loading tasks (Moderate)<a href=#fix-the-problem-that-the-resource-isolation-is-invalid-for-the-resource-usage-limit-of-loading-tasks-moderate class=hash-link aria-label="Direct link to Fix the problem that the resource isolation is invalid for the resource usage limit of loading tasks (Moderate)" title="Direct link to Fix the problem that the resource isolation is invalid for the resource usage limit of loading tasks (Moderate)">​</a></h3>
<p>In 1.1, the broker load and routine load will use Backends with specified resource tags to do the load.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=use-http-brpc-to-transfer-network-data-packets-over-2gb-moderate>Use HTTP BRPC to transfer network data packets over 2GB (Moderate)<a href=#use-http-brpc-to-transfer-network-data-packets-over-2gb-moderate class=hash-link aria-label="Direct link to Use HTTP BRPC to transfer network data packets over 2GB (Moderate)" title="Direct link to Use HTTP BRPC to transfer network data packets over 2GB (Moderate)">​</a></h3>
<p>In the previous version, when the data transmitted between Backends through BRPC exceeded 2GB,
it may cause data transmission errors.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=others>Others<a href=#others class=hash-link aria-label="Direct link to Others" title="Direct link to Others">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=disabling-mini-load>Disabling Mini Load<a href=#disabling-mini-load class=hash-link aria-label="Direct link to Disabling Mini Load" title="Direct link to Disabling Mini Load">​</a></h3>
<p>The <code>/_load</code> interface is disabled by default, please use <code>the /_stream_load</code> interface uniformly.
Of course, you can re-enable it by turning off the FE configuration item <code>disable_mini_load</code>.</p>
<p>The Mini Load interface will be completely removed in version 1.2.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=completely-disable-the-segmentv1-storage-format>Completely disable the SegmentV1 storage format<a href=#completely-disable-the-segmentv1-storage-format class=hash-link aria-label="Direct link to Completely disable the SegmentV1 storage format" title="Direct link to Completely disable the SegmentV1 storage format">​</a></h3>
<p>Data in SegmentV1 format is no longer allowed to be created. Existing data can continue to be accessed normally.
You can use the <code>ADMIN SHOW TABLET STORAGE FORMAT</code> statement to check whether the data in SegmentV1 format
still exists in the cluster. And convert to SegmentV2 through the data conversion command</p>
<p>Access to SegmentV1 data will no longer be supported in version 1.2.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=limit-the-maximum-length-of-string-type>Limit the maximum length of String type<a href=#limit-the-maximum-length-of-string-type class=hash-link aria-label="Direct link to Limit the maximum length of String type" title="Direct link to Limit the maximum length of String type">​</a></h3>
<p>In previous versions, String types were allowed a maximum length of 2GB.
In version 1.1, we will limit the maximum length of the string type to 1MB. Strings longer than this length cannot be written anymore.
At the same time, using the String type as a partitioning or bucketing column of a table is no longer supported.</p>
<p>The String type that has been written can be accessed normally.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=fix-fastjson-related-vulnerabilities>Fix fastjson related vulnerabilities<a href=#fix-fastjson-related-vulnerabilities class=hash-link aria-label="Direct link to Fix fastjson related vulnerabilities" title="Direct link to Fix fastjson related vulnerabilities">​</a></h3>
<p>Update to Canal version to fix fastjson security vulnerability.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=added-admin-diagnose-tablet-command>Added <code>ADMIN DIAGNOSE TABLET</code> command<a href=#added-admin-diagnose-tablet-command class=hash-link aria-label="Direct link to added-admin-diagnose-tablet-command" title="Direct link to added-admin-diagnose-tablet-command">​</a></h3>
<p>Used to quickly diagnose problems with the specified tablet.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=download-to-use>Download to Use<a href=#download-to-use class=hash-link aria-label="Direct link to Download to Use" title="Direct link to Download to Use">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=download-link>Download Link<a href=#download-link class=hash-link aria-label="Direct link to Download Link" title="Direct link to Download Link">​</a></h3>
<p><a href=https://doris.apache.org/download target=_blank rel="noopener noreferrer">hhttps://doris.apache.org/download</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=feedback>Feedback<a href=#feedback class=hash-link aria-label="Direct link to Feedback" title="Direct link to Feedback">​</a></h3>
<p>If you encounter any problems with use, please feel free to contact us through GitHub discussion forum or Dev e-mail group anytime.</p>
<p>GitHub Forum: <a href=https://github.com/apache/doris/discussions target=_blank rel="noopener noreferrer">https://github.com/apache/doris/discussions</a></p>
<p>Mailing list: <a href=/blog/tags/release-notes/dev@doris.apache.org/>dev@doris.apache.org</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=thanks>Thanks<a href=#thanks class=hash-link aria-label="Direct link to Thanks" title="Direct link to Thanks">​</a></h2>
<p>Thanks to everyone who has contributed to this release:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#F8F8F2;--prism-background-color:#282A36><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_e6Vv><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@adonis0147</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@airborne12</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@amosbird</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@aopangzi</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@arthuryangcs</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@awakeljw</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@BePPPower</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@BiteTheDDDDt</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@bridgeDream</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@caiconghui</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@cambyzju</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@ccoffline</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@chenlinzhong</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@daikon12</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@DarvenDuan</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@dataalive</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@dataroaring</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@deardeng</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@Doris-Extras</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@emerkfu</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@EmmyMiao87</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@englefly</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@Gabriel39</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@GoGoWen</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@gtchaos</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@HappenLee</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@hello-stephen</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@Henry2SS</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@hewei-nju</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@hf200012</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@jacktengg</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@jackwener</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@Jibing-Li</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@JNSimba</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@kangshisen</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@Kikyou1997</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@kylinmac</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@Lchangliang</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@leo65535</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@liaoxin01</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@liutang123</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@lovingfeel</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@luozenglin</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@luwei16</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@luzhijing</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@mklzl</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@morningman</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@morrySnow</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@nextdreamblue</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@Nivane</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@pengxiangyu</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@qidaye</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@qzsee</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@SaintBacchus</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@SleepyBear96</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@smallhibiscus</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@spaces-X</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@stalary</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@starocean999</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@steadyBoy</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@SWJTU-ZhangLei</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@Tanya-W</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@tarepanda1024</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@tianhui5</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@Userwhite</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@wangbo</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@wangyf0555</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@weizuo93</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@whutpencil</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@wsjz</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@wunan1210</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@xiaokang</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@xinyiZzz</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@xlwh</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@xy720</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@yangzhg</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@Yankee24</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@yiguolei</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@yinzhijian</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@yixiutt</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@zbtzbtzbt</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@zenoyang</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@zhangstar333</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@zhangyifan27</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@zhannngchen</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@zhengshengjun</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@zhengshiJ</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@zingdle</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@zuochunwei</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@zy-kkk</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div></div></div></article><article class=margin-bottom--xl itemprop=blogPost itemscope itemtype=http://schema.org/BlogPosting><div class=markdown itemprop=articleBody><header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href=/blog/>Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class=s-tags><span class=s-tag>Release Notes</span></span></span></div><h2 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop=headline><a itemprop=url href=/blog/release-note-1.0.0/>Apache Doris(Incubating) announced 1.0.0 release</a></h2><div class="blog-info text-center flex justify-center text-sm text-black"><span class=authors><span class="s-author text-black">Apache Doris</span></span><time datetime=2022-04-18T00:00:00.000Z itemprop=datePublished class="text-black ml-4">April 18, 2022</time></div></header><div class=markdown itemprop=articleBody><p>Dear community friends, after several months, we are happy to announce that Apache Doris (incubating) has officially released the 1.0 Release version on April 18, 2022! <strong>This is the first 1-bit version of Apache Doris since it was incubated by the Apache Foundation, and it is also the version with the largest refactoring of the core code of Apache Doris so far</strong>**! **With <strong>114 Contributors</strong> committing <strong>over 660 optimizations and fixes</strong> for Apache Doris, thank you to everyone who makes Apache Doris even better!</p>
<p>In version 1.0, we introduced important functions such as vectorized execution engine, Hive external table, Lateral View syntax and Table Function table function, Z-Order data index, Apache SeaTunnel plug-in, etc., and added support for synchronous update and deletion of data in Flink CDC. Support, optimize many problems in the process of data import and query, and comprehensively enhance the query performance, ease of use, stability and other special effects of Apache Doris. Welcome to download and use! Click "<strong>Read the original text</strong>" at the end of the article to go directly to the download address.</p>
<p>Every day that has not been published, there are countless contributors behind it, who dare not stop for half a minute. Here we would like to especially thank the small partners from SIG (Special Interest Group) such as <strong>vectorized execution engine, query optimizer, and visual operation and maintenance platform</strong>. Since the establishment of the Apache Doris Community SIG group in August 2021, data from more than ten companies including Baidu, Meituan, Xiaomi, JD, Shuhai, ByteDance, Tencent, NetEase, Alibaba, PingCAP, Nebula Graph, etc. Ten contributors** joined the SIG as the first members, and for the first time completed the development of such major functions as the vectorized execution engine, query optimizer, and Doris Manager visual monitoring operation and maintenance platform in the form of open source collaboration of special groups. <strong>During more than half a year, conducting technical research and sharing dozens of times, holding nearly 100 remote meetings, accumulatively submitting hundreds of Commits, involving more than 100,000 lines of code</strong>, it is precisely because of their contributions , only the 1.0 version came out, let us once again express our most sincere thanks for their hard work!</p>
<p>At the same time, the number of Apache Doris contributors has exceeded 300, the number of monthly active contributors has exceeded 60, and the average weekly number of Commits submitted in recent weeks has also exceeded 80. The scale and activity of developers gathered by the community There has been a huge improvement. We are very much looking forward to having more small partners participate in the community contribution, and work with us to build Apache Doris into the world's top analytical database. We also hope that all small partners can reap valuable growth with us. If you would like to participate in the community, please contact us via the developer email <a href=mailto:dev@doris.apache.org target=_blank rel="noopener noreferrer">dev@doris.apache.org</a>.</p>
<p>We welcome you to contact us with any questions during the use process through GitHub Discussion or Dev mail group, and we look forward to your participation in community discussions and construction.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=important-update>Important update<a href=#important-update class=hash-link aria-label="Direct link to Important update" title="Direct link to Important update">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=vectorized-execution-engine-experimental>Vectorized Execution Engine [Experimental]<a href=#vectorized-execution-engine-experimental class=hash-link aria-label="Direct link to Vectorized Execution Engine [Experimental]" title="Direct link to Vectorized Execution Engine [Experimental]">​</a></h3>
<p>In the past, the SQL execution engine of Apache Doris was designed based on the row-based memory format and the traditional volcano model. There was unnecessary overhead in performing SQL operator and function operations, which led to the limited efficiency of the Apache Doris execution engine, which did not Adapt to the architecture of modern CPUs. The goal of the vectorized execution engine is to replace the current row-based SQL execution engine of Apache Doris, fully release the computing power of modern CPUs, break through the performance limitations on the SQL execution engine, and exert extreme performance.</p>
<p>Based on the characteristics of modern CPUs and the execution characteristics of the volcano model, the vectorized execution engine redesigned the SQL execution engine in the columnar storage system:</p>
<ul>
<li>Reorganized the data structure of memory, replaced Tuple with Column, improved Cache affinity, branch prediction and prefetch memory friendliness during calculation</li>
<li>Type judgment is performed in batches. In this batch, the type determined during type judgment is used, and the virtual function cost of type judgment of each line is allocated to the batch level.</li>
<li>Through batch-level type judgment, virtual function calls are eliminated, allowing the compiler to have the opportunity for function inlining and SIMD optimization</li>
</ul>
<p>This greatly improves the efficiency of the CPU when executing SQL and improves the performance of SQL queries.</p>
<p>In Apache Doris version 1.0, enabling the vectorized execution engine with set batch_size = 4096 and set enable_vectorized_engine = true can significantly improve query performance in most cases. Under the SSB and OnTime standard test datasets, the overall performance of the two scenarios of multi-table association and wide-column query is improved by 3 times and 2.6 times respectively.</p>
<p><img decoding=async loading=lazy src=/assets/images/1.0.0-1-e7888e124fefa8bd38215dd9d4be4794.png width=1080 height=697 class=img_ev3q></p>
<p><img decoding=async loading=lazy src=/assets/images/1.0.0-2-d9e8be01f5ff99dd6e15fc33af4518fc.png width=1080 height=819 class=img_ev3q></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=lateral-view-grammar-experimental>Lateral View Grammar [Experimental]<a href=#lateral-view-grammar-experimental class=hash-link aria-label="Direct link to Lateral View Grammar [Experimental]" title="Direct link to Lateral View Grammar [Experimental]">​</a></h3>
<p>Through Lateral View syntax, we can use Table Function table functions such as explode_bitmap, explode_split, explode_jaon_array, etc., to expand bitmap, String or Json Array from one column into multiple rows, so that the expanded data can be further processed (such as Filter, Join, etc.) .</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=hive-external-table-experimental>Hive External Table [Experimental]<a href=#hive-external-table-experimental class=hash-link aria-label="Direct link to Hive External Table [Experimental]" title="Direct link to Hive External Table [Experimental]">​</a></h3>
<p>Hive External Table provides users with the ability to directly access Hive tables through Doris. External tables save the tedious data import work, and can use Doris's own OLAP capabilities to solve data analysis problems of Hive tables. The current version supports connecting Hive data sources to Doris, and supports federated queries through data in Doris and Hive data sources for more complex analysis operations.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=support-z-order-data-sorting-format>Support Z-Order data sorting format<a href=#support-z-order-data-sorting-format class=hash-link aria-label="Direct link to Support Z-Order data sorting format" title="Direct link to Support Z-Order data sorting format">​</a></h3>
<p>Apache Doris data is sorted and stored according to the prefix column, so when the prefix query condition is included, fast data search can be performed on the sorted data, but if the query condition is not a prefix column, the data sorting feature cannot be used for fast data search. The above problems can be solved by Z-Order Indexing. In version 1.0, we have added the Z-Order data sorting format, which can play a good filtering effect in the scenario of kanban multi-column query and accelerate the filtering performance of non-prefix column conditions. .</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=support-for-apache-seatunnel-incubating-plugin>Support for Apache SeaTunnel (Incubating) plugin<a href=#support-for-apache-seatunnel-incubating-plugin class=hash-link aria-label="Direct link to Support for Apache SeaTunnel (Incubating) plugin" title="Direct link to Support for Apache SeaTunnel (Incubating) plugin">​</a></h3>
<p>Apache SeaTunnel is a high-performance distributed data integration framework built on Apache Spark and Apache Flink. In the 1.0 version of Apache Doris, we have added the SaeTunnel plugin, users can use Apache SeaTunnel for synchronization and ETL between multiple data sources.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=new-function>New Function<a href=#new-function class=hash-link aria-label="Direct link to New Function" title="Direct link to New Function">​</a></h3>
<p>More bitmap functions are supported, see the function manual for details:</p>
<ul>
<li>bitmap_max</li>
<li>bitmap_and_not</li>
<li>bitmap_and_not_count</li>
<li>bitmap_has_all</li>
<li>bitmap_and_count</li>
<li>bitmap_or_count</li>
<li>bitmap_xor_count</li>
<li>bitmap_subset_limit</li>
<li>sub_bitmap</li>
</ul>
<p>Support national secret algorithm SM3/SM4;</p>
<blockquote>
<p><strong>Note</strong>: The functions marked [Experimental] above are experimental functions. We will continue to optimize and iterate on the above functions in subsequent versions, and further improve them in subsequent versions. If you have any questions or comments during use, please feel free to contact us</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=important-optimization>Important Optimization<a href=#important-optimization class=hash-link aria-label="Direct link to Important Optimization" title="Direct link to Important Optimization">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=features-optimization>Features Optimization<a href=#features-optimization class=hash-link aria-label="Direct link to Features Optimization" title="Direct link to Features Optimization">​</a></h3>
<ul>
<li>Reduced the number of segment files generated when importing in large batches to reduce Compaction pressure.</li>
<li>Transfer data through BRPC's attachment function to reduce serialization and deserialization overhead during query.</li>
<li>Support to directly return binary data of HLL/BITMAP type for external analysis of business.</li>
<li>Optimize and reduce the probability of OVERCROWDED and NOT_CONNECTED errors in BRPC, and enhance system stability.</li>
<li>Enhance the fault tolerance of import.</li>
<li>Support to update and delete data synchronously through Flink CDC.</li>
<li>Support adaptive Runtime Filter.</li>
<li>Significantly reduce the memory footprint of insert into operations</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=usability-improvements>Usability Improvements<a href=#usability-improvements class=hash-link aria-label="Direct link to Usability Improvements" title="Direct link to Usability Improvements">​</a></h3>
<ul>
<li>Routine Load supports displaying the current offset delay number and other status.</li>
<li>Added statistics on peak memory usage of queries in FE audit log.</li>
<li>Added missing version information to Compaction URL results to facilitate troubleshooting.</li>
<li>Support marking BE as non-queryable or non-importable to quickly screen problem nodes.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=important-bug-fixes>Important Bug Fixes<a href=#important-bug-fixes class=hash-link aria-label="Direct link to Important Bug Fixes" title="Direct link to Important Bug Fixes">​</a></h3>
<ul>
<li>Fixed several query errors.</li>
<li>Fixed some scheduling logic issues in Broker Load.</li>
<li>Fix the problem that the metadata cannot be loaded due to the STREAM keyword.</li>
<li>Fixed Decommission not executing correctly.</li>
<li>Fix the problem that -102 error may occur when operating Schema Change operation in some cases.</li>
<li>Fix the problem that using String type may cause BE to crash in some cases.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=other>Other<a href=#other class=hash-link aria-label="Direct link to Other" title="Direct link to Other">​</a></h3>
<ul>
<li>Added Minidump function; easy to locate when problems occur</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=changelog>Changelog<a href=#changelog class=hash-link aria-label="Direct link to Changelog" title="Direct link to Changelog">​</a></h2>
<p>For detailed Release Note, please check the link:</p>
<p><a href=https://github.com/apache/incubator-doris/issues/8549 target=_blank rel="noopener noreferrer">https://github.com/apache/incubator-doris/issues/8549</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=thanks>Thanks<a href=#thanks class=hash-link aria-label="Direct link to Thanks" title="Direct link to Thanks">​</a></h2>
<p>The release of Apache Doris(incubating) 1.0 Release version is inseparable from the support of all community users. I would like to express my gratitude to all community contributors who participated in version design, development, testing and discussion. They are:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#F8F8F2;--prism-background-color:#282A36><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_e6Vv><span class=token-line style=color:#F8F8F2><span class="token plain">@924060929</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@adonis0147</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@Aiden-Dong</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@aihai</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@airborne12</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@Alibaba-HZY</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@amosbird</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@arthuryangcs</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@awakeljw</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@bingzxy</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@BiteTheDDDDt</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@blackstar-baba</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@caiconghui</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@CalvinKirs</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@cambyzju</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@caoliang-web</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@ccoffline</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@chaplinthink</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@chovy-3012</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@ChPi</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@DarvenDuan</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@dataalive</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@dataroaring</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@dh-cloud</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@dohongdayi</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@dongweizhao</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@drgnchan</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@e0c9</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@EmmyMiao87</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@englefly</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@eyesmoons</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@freemandealer</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@Gabriel39</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@gaodayue</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@GoGoWen</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@Gongruixiao</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@gwdgithubnom</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@HappenLee</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@Henry2SS</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@hf200012</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@htyoung</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@jacktengg</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@jackwener</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@JNSimba</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@Keysluomo</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@kezhenxu94</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@killxdcj</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@lihuigang</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@littleeleventhwolf</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@liutang123</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@liuzhuang2017</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@lonre</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@lovingfeel</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@luozenglin</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@luzhijing</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@MeiontheTop</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@mh-boy</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@morningman</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@mrhhsg</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@Myasuka</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@nimuyuhan</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@obobj</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@pengxiangyu</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@qidaye</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@qzsee</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@renzhimin7</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@Royce33</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@SleepyBear96</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@smallhibiscus</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@sodamnsure</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@spaces-X</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@sparklezzz</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@stalary</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@steadyBoy</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@tarepanda1024</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@THUMarkLau</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@tianhui5</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@tinkerrrr</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@ucasfl</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@Userwhite</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@vinson0526</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@wangbo</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@wangshuo128</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@wangyf0555</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@weajun</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@weizuo93</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@whutpencil</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@WindyGao</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@wunan1210</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@xiaokang</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@xiaokangguo</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@xiedeyantu</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@xinghuayu007</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@xingtanzjr</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@xinyiZzz</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@xtr1993</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@xu20160924</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@xuliuzhe</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@xuzifu666</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@xy720</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@yangzhg</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@yiguolei</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@yinzhijian</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@yjant</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@zbtzbtzbt</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@zenoyang</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@zh0122</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@zhangstar333</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@zhannngchen</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@zhengshengjun</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@zhengshiJ</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@ZhikaiZuo</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@ztgoto</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">@zuochunwei</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div></div></div></article><article class=margin-bottom--xl itemprop=blogPost itemscope itemtype=http://schema.org/BlogPosting><div class=markdown itemprop=articleBody><header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href=/blog/>Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class=s-tags><span class=s-tag>Release Notes</span></span></span></div><h2 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop=headline><a itemprop=url href=/blog/release-note-0.15.0/>Apache Doris(Incubating) annoucned 0.15.0 release</a></h2><div class="blog-info text-center flex justify-center text-sm text-black"><span class=authors><span class="s-author text-black">Apache Doris</span></span><time datetime=2021-11-29T00:00:00.000Z itemprop=datePublished class="text-black ml-4">November 29, 2021</time></div></header><div class=markdown itemprop=articleBody><p>Dear Community, After months of polishing, we are pleased to announce the release of Apache Doris(Incubating) on November 29, 2021! Nearly 700 optimizations and fixes have been submitted by 99 contributors to Apache Doris, and we'd like to express our sincere gratitude to all of them!</p>
<p>In the 0.15.0 Release, we have added many new features to optimize Apache Doris's query performance, ease of use, and stability: a new resource division and isolation feature that allows users to divide BE nodes in a cluster into resource groups by means of resource tags, enabling unified management of online and offline services and resource isolation; the addition of Runtime Filter and Join Reorder functions have been added to significantly improve the query efficiency of multi-table Join scenarios, with a 2-10 times performance improvement under the Star Schema Benchmark test data set; new import method Binlog Load enables Doris to incrementally synchronize the CDC of data update operations in MySQL; support for String column type The new import method, Binlog Load, allows Doris to incrementally synchronize the CDC of MySQL for data update operations; supports String column type with a maximum length of 2GB; supports List partitioning to create partitions by enumerating values; supports Update statements on the Unique Key model; Spark-Doris-Connector supports data writing to Doris ... ...and many more important features, welcome to download and use.</p>
<p>We welcome you to contact us via GitHub Discussion or the Dev email group if you have any questions during use, and we look forward to your participation in community discussions and building.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=high-lights>High Lights<a href=#high-lights class=hash-link aria-label="Direct link to High Lights" title="Direct link to High Lights">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=resource-segregation-and-isolation>Resource Segregation and Isolation<a href=#resource-segregation-and-isolation class=hash-link aria-label="Direct link to Resource Segregation and Isolation" title="Direct link to Resource Segregation and Isolation">​</a></h3>
<p>You can divide BE nodes in a Doris cluster into resource groups by using resource tags, allowing you to manage online and offline operations and isolate resources at the node level.
You can also control the resource overhead of individual queries by limiting the CPU and memory overhead and complexity of individual query tasks, thus reducing the resource hogging problem between different queries.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=performance-optimization>Performance Optimization<a href=#performance-optimization class=hash-link aria-label="Direct link to Performance Optimization" title="Direct link to Performance Optimization">​</a></h3>
<ul>
<li>
<p>The Runtime Filter feature can significantly improve query efficiency in most Join scenarios by using the Join Key column condition of the right table in the Join algorithm to filter the data in the left table. For example, you can get 2-10 times performance improvement under Star Schema Benchmark (TPCH's streamlined test set).</p>
</li>
<li>
<p>The Join Reorder feature can automatically help adjust the order of joins in SQL by using a cost model to help achieve optimal join efficiency.
It can be enabled via the session variable <code>set enable_cost_based_join_reorder=true</code>.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=new-features>New features<a href=#new-features class=hash-link aria-label="Direct link to New features" title="Direct link to New features">​</a></h3>
<ul>
<li>Support synchronizing MySQL binlog data directly to Canal Server.</li>
<li>Support String column type, support up to 2GB.</li>
<li>Support List partitioning, you can create partitions for enumerated values.</li>
<li>Support transactional Insert statement function. You can import data in bulk by begin ; insert ; insert;, ... You can import data in bulk by begin ; insert ; insert ;, ... ;.</li>
<li>Support Update statement function on Unique Key model. You can execute Update Set where statement on Unique Key model table.</li>
<li>Support SQL blocking list function. You can block some SQL execution by regular, hash value matching, etc.</li>
<li>Support LDAP login authentication.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=extended-features>Extended Features<a href=#extended-features class=hash-link aria-label="Direct link to Extended Features" title="Direct link to Extended Features">​</a></h3>
<ul>
<li>Support Flink-Doris-Connector.</li>
<li>Support for DataX doriswriter plugin.</li>
<li>Spark-Doris-Connector support for data writing to Doris.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=feature-optimization>Feature Optimization<a href=#feature-optimization class=hash-link aria-label="Direct link to Feature Optimization" title="Direct link to Feature Optimization">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=query>Query<a href=#query class=hash-link aria-label="Direct link to Query" title="Direct link to Query">​</a></h3>
<ul>
<li>Support for computing all constant expressions in the SQL query planning phase using BE's functional computing power.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=import>Import<a href=#import class=hash-link aria-label="Direct link to Import" title="Direct link to Import">​</a></h3>
<ul>
<li>Support for specifying multi-byte row separators or invisible separators when importing text format files.</li>
<li>Supports importing compressed format files via Stream Load.</li>
<li>Stream Load supports importing Json data in multi-line format.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=export>Export<a href=#export class=hash-link aria-label="Direct link to Export" title="Direct link to Export">​</a></h3>
<ul>
<li>Support Export export function to specify where filter. Supports exporting files with multi-byte row separators. Support export to local files.</li>
<li>Export export function supports exporting only specified columns.</li>
<li>Supports exporting the result set to local disk via outfile statement and writing the exported marker file after exporting.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=ease-of-use>Ease of use<a href=#ease-of-use class=hash-link aria-label="Direct link to Ease of use" title="Direct link to Ease of use">​</a></h3>
<ul>
<li>Dynamic partitioning function supports creating and keeping specified historical partitions, and supports automatic hot and cold data migration settings.</li>
<li>Supports displaying queries, imported schedules and Profiles using a visual tree structure at the command line.</li>
<li>Support to record and view Stream Load operation logs.</li>
<li>When consuming Kafka data via Routine Load, you can specify the time point for consumption.</li>
<li>Supports exporting Routine Load creation statements by show create routine load function.</li>
<li>Support to start and stop all Routine Load jobs with one click by pause/resume all routine load command.</li>
<li>Supports modifying the Broker List and Topic of Routine Load by alter routine load statement.</li>
<li>Support create table as select function.</li>
<li>Support modify column comments and table comments by alter table command.</li>
<li>show tablet status to add table creation time and data update time.</li>
<li>Support show data skew command to check the data volume distribution of a table to troubleshoot data skewing problems.</li>
<li>Support show/clean trash command to check the disk occupation of BE file recycle bin and clear it actively.</li>
<li>Support show view statement to show which views a table is referenced by.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=new-functions>New functions<a href=#new-functions class=hash-link aria-label="Direct link to New functions" title="Direct link to New functions">​</a></h3>
<ul>
<li><code>bitmap_min</code>, <code>bit_length</code></li>
<li><code>yearweek</code>, <code>week</code>, <code>makedate</code></li>
<li><code>percentile</code> exact percentile function</li>
<li><code>json_array</code>, <code>json_object</code>, <code>json_quote</code></li>
<li>Support for creating custom public keys for the <code>AES_ENCRYPT</code> and <code>AES_DECRYPT</code> functions.</li>
<li>Support for creating function aliases to combine multiple functions by <code>create alias function</code>.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=other>Other<a href=#other class=hash-link aria-label="Direct link to Other" title="Direct link to Other">​</a></h3>
<ul>
<li>Support for accessing the ES exterior of the SSL connection protocol.</li>
<li>Support specifying the number of hotspot partitions in the dynamic partition property, which will be stored in SSD disks.</li>
<li>Support importing Json format data via Broker Load.</li>
<li>Supports accessing HDFS directly through libhdfs3 library for data import and export without the Broker process.</li>
<li>select into outfile function supports exporting Parquet file format and parallel export.</li>
<li>ODBC external table support for SQLServer.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=致谢>致谢<a href=#致谢 class=hash-link aria-label="Direct link to 致谢" title="Direct link to 致谢">​</a></h2>
<p>The release of Apache Doris (incubating) 0.15.0 Release is made possible by the support of all community users. We would like to thank all the community contributors who participated in the design, development, testing, and discussion of the release, namely.</p>
<ul>
<li><a href=https://github.com/924060929 target=_blank rel="noopener noreferrer">@924060929</a></li>
<li><a href=https://github.com/acelyc111 target=_blank rel="noopener noreferrer">@acelyc111</a></li>
<li><a href=https://github.com/Aimiyoo target=_blank rel="noopener noreferrer">@Aimiyoo</a></li>
<li><a href=https://github.com/amosbird target=_blank rel="noopener noreferrer">@amosbird</a></li>
<li><a href=https://github.com/arthur-zhang target=_blank rel="noopener noreferrer">@arthur-zhang</a></li>
<li><a href=https://github.com/azurenake target=_blank rel="noopener noreferrer">@azurenake</a></li>
<li><a href=https://github.com/BiteTheDDDDt target=_blank rel="noopener noreferrer">@BiteTheDDDDt</a></li>
<li><a href=https://github.com/caiconghui target=_blank rel="noopener noreferrer">@caiconghui</a></li>
<li><a href=https://github.com/caneGuy target=_blank rel="noopener noreferrer">@caneGuy</a></li>
<li><a href=https://github.com/caoliang-web target=_blank rel="noopener noreferrer">@caoliang-web</a></li>
<li><a href=https://github.com/ccoffline target=_blank rel="noopener noreferrer">@ccoffline</a></li>
<li><a href=https://github.com/chaplinthink target=_blank rel="noopener noreferrer">@chaplinthink</a></li>
<li><a href=https://github.com/chovy-3012 target=_blank rel="noopener noreferrer">@chovy-3012</a></li>
<li><a href=https://github.com/ChPi target=_blank rel="noopener noreferrer">@ChPi</a></li>
<li><a href=https://github.com/copperybean target=_blank rel="noopener noreferrer">@copperybean</a></li>
<li><a href=https://github.com/crazyleeyang target=_blank rel="noopener noreferrer">@crazyleeyang</a></li>
<li><a href=https://github.com/dh-cloud target=_blank rel="noopener noreferrer">@dh-cloud</a></li>
<li><a href=https://github.com/DinoZhang target=_blank rel="noopener noreferrer">@DinoZhang</a></li>
<li><a href=https://github.com/dixingxing0 target=_blank rel="noopener noreferrer">@dixingxing0</a></li>
<li><a href=https://github.com/dohongdayi target=_blank rel="noopener noreferrer">@dohongdayi</a></li>
<li><a href=https://github.com/e0c9 target=_blank rel="noopener noreferrer">@e0c9</a></li>
<li><a href=https://github.com/EmmyMiao87 target=_blank rel="noopener noreferrer">@EmmyMiao87</a></li>
<li><a href=https://github.com/eyesmoons target=_blank rel="noopener noreferrer">@eyesmoons</a></li>
<li><a href=https://github.com/francisoliverlee target=_blank rel="noopener noreferrer">@francisoliverlee</a></li>
<li><a href=https://github.com/Gabriel39 target=_blank rel="noopener noreferrer">@Gabriel39</a></li>
<li><a href=https://github.com/gaodayue target=_blank rel="noopener noreferrer">@gaodayue</a></li>
<li><a href=https://github.com/GoGoWen target=_blank rel="noopener noreferrer">@GoGoWen</a></li>
<li><a href=https://github.com/HappenLee target=_blank rel="noopener noreferrer">@HappenLee</a></li>
<li><a href=https://github.com/harveyyue target=_blank rel="noopener noreferrer">@harveyyue</a></li>
<li><a href=https://github.com/Henry2SS target=_blank rel="noopener noreferrer">@Henry2SS</a></li>
<li><a href=https://github.com/hf200012 target=_blank rel="noopener noreferrer">@hf200012</a></li>
<li><a href=https://github.com/huangmengbin target=_blank rel="noopener noreferrer">@huangmengbin</a></li>
<li><a href=https://github.com/huozhanfeng target=_blank rel="noopener noreferrer">@huozhanfeng</a></li>
<li><a href=https://github.com/huzk8 target=_blank rel="noopener noreferrer">@huzk8</a></li>
<li><a href=https://github.com/hxianshun target=_blank rel="noopener noreferrer">@hxianshun</a></li>
<li><a href=https://github.com/ikaruga4600 target=_blank rel="noopener noreferrer">@ikaruga4600</a></li>
<li><a href=https://github.com/JameyWoo target=_blank rel="noopener noreferrer">@JameyWoo</a></li>
<li><a href=https://github.com/Jennifer88huang target=_blank rel="noopener noreferrer">@Jennifer88huang</a></li>
<li><a href=https://github.com/JinLiOnline target=_blank rel="noopener noreferrer">@JinLiOnline</a></li>
<li><a href=https://github.com/jinyuanlu target=_blank rel="noopener noreferrer">@jinyuanlu</a></li>
<li><a href=https://github.com/JNSimba target=_blank rel="noopener noreferrer">@JNSimba</a></li>
<li><a href=https://github.com/killxdcj target=_blank rel="noopener noreferrer">@killxdcj</a></li>
<li><a href=https://github.com/kuncle target=_blank rel="noopener noreferrer">@kuncle</a></li>
<li><a href=https://github.com/liutang123 target=_blank rel="noopener noreferrer">@liutang123</a></li>
<li><a href=https://github.com/luozenglin target=_blank rel="noopener noreferrer">@luozenglin</a></li>
<li><a href=https://github.com/luzhijing target=_blank rel="noopener noreferrer">@luzhijing</a></li>
<li><a href=https://github.com/MarsXDM target=_blank rel="noopener noreferrer">@MarsXDM</a></li>
<li><a href=https://github.com/mh-boy target=_blank rel="noopener noreferrer">@mh-boy</a></li>
<li><a href=https://github.com/mk8310 target=_blank rel="noopener noreferrer">@mk8310</a></li>
<li><a href=https://github.com/morningman target=_blank rel="noopener noreferrer">@morningman</a></li>
<li><a href=https://github.com/Myasuka target=_blank rel="noopener noreferrer">@Myasuka</a></li>
<li><a href=https://github.com/nimuyuhan target=_blank rel="noopener noreferrer">@nimuyuhan</a></li>
<li><a href=https://github.com/pan3793 target=_blank rel="noopener noreferrer">@pan3793</a></li>
<li><a href=https://github.com/PatrickNicholas target=_blank rel="noopener noreferrer">@PatrickNicholas</a></li>
<li><a href=https://github.com/pengxiangyu target=_blank rel="noopener noreferrer">@pengxiangyu</a></li>
<li><a href=https://github.com/pierre94 target=_blank rel="noopener noreferrer">@pierre94</a></li>
<li><a href=https://github.com/qidaye target=_blank rel="noopener noreferrer">@qidaye</a></li>
<li><a href=https://github.com/qzsee target=_blank rel="noopener noreferrer">@qzsee</a></li>
<li><a href=https://github.com/shiyi23 target=_blank rel="noopener noreferrer">@shiyi23</a></li>
<li><a href=https://github.com/smallhibiscus target=_blank rel="noopener noreferrer">@smallhibiscus</a></li>
<li><a href=https://github.com/songenjie target=_blank rel="noopener noreferrer">@songenjie</a></li>
<li><a href=https://github.com/spaces-X target=_blank rel="noopener noreferrer">@spaces-X</a></li>
<li><a href=https://github.com/stalary target=_blank rel="noopener noreferrer">@stalary</a></li>
<li><a href=https://github.com/stdpain target=_blank rel="noopener noreferrer">@stdpain</a></li>
<li><a href=https://github.com/Stephen-Robin target=_blank rel="noopener noreferrer">@Stephen-Robin</a></li>
<li><a href=https://github.com/Sunt-ing target=_blank rel="noopener noreferrer">@Sunt-ing</a></li>
<li><a href=https://github.com/Taaang target=_blank rel="noopener noreferrer">@Taaang</a></li>
<li><a href=https://github.com/tarepanda1024 target=_blank rel="noopener noreferrer">@tarepanda1024</a></li>
<li><a href=https://github.com/tianhui5 target=_blank rel="noopener noreferrer">@tianhui5</a></li>
<li><a href=https://github.com/tinkerrrr target=_blank rel="noopener noreferrer">@tinkerrrr</a></li>
<li><a href=https://github.com/TobKed target=_blank rel="noopener noreferrer">@TobKed</a></li>
<li><a href=https://github.com/ucasfl target=_blank rel="noopener noreferrer">@ucasfl</a></li>
<li><a href=https://github.com/Userwhite target=_blank rel="noopener noreferrer">@Userwhite</a></li>
<li><a href=https://github.com/vinson0526 target=_blank rel="noopener noreferrer">@vinson0526</a></li>
<li><a href=https://github.com/wangbo target=_blank rel="noopener noreferrer">@wangbo</a></li>
<li><a href=https://github.com/wangliansong target=_blank rel="noopener noreferrer">@wangliansong</a></li>
<li><a href=https://github.com/wangshuo128 target=_blank rel="noopener noreferrer">@wangshuo128</a></li>
<li><a href=https://github.com/weajun target=_blank rel="noopener noreferrer">@weajun</a></li>
<li><a href=https://github.com/weihongkai2008 target=_blank rel="noopener noreferrer">@weihongkai2008</a></li>
<li><a href=https://github.com/weizuo93 target=_blank rel="noopener noreferrer">@weizuo93</a></li>
<li><a href=https://github.com/WindyGao target=_blank rel="noopener noreferrer">@WindyGao</a></li>
<li><a href=https://github.com/wunan1210 target=_blank rel="noopener noreferrer">@wunan1210</a></li>
<li><a href=https://github.com/wuyunfeng target=_blank rel="noopener noreferrer">@wuyunfeng</a></li>
<li><a href=https://github.com/xhmz target=_blank rel="noopener noreferrer">@xhmz</a></li>
<li><a href=https://github.com/xiaokangguo target=_blank rel="noopener noreferrer">@xiaokangguo</a></li>
<li><a href=https://github.com/xiaoxiaopan118 target=_blank rel="noopener noreferrer">@xiaoxiaopan118</a></li>
<li><a href=https://github.com/xinghuayu007 target=_blank rel="noopener noreferrer">@xinghuayu007</a></li>
<li><a href=https://github.com/xinyiZzz target=_blank rel="noopener noreferrer">@xinyiZzz</a></li>
<li><a href=https://github.com/xuliuzhe target=_blank rel="noopener noreferrer">@xuliuzhe</a></li>
<li><a href=https://github.com/xxiao2018 target=_blank rel="noopener noreferrer">@xxiao2018</a></li>
<li><a href=https://github.com/xy720 target=_blank rel="noopener noreferrer">@xy720</a></li>
<li><a href=https://github.com/yangzhg target=_blank rel="noopener noreferrer">@yangzhg</a></li>
<li><a href=https://github.com/yx91490 target=_blank rel="noopener noreferrer">@yx91490</a></li>
<li><a href=https://github.com/zbtzbtzbt target=_blank rel="noopener noreferrer">@zbtzbtzbt</a></li>
<li><a href=https://github.com/zenoyang target=_blank rel="noopener noreferrer">@zenoyang</a></li>
<li><a href=https://github.com/zh0122 target=_blank rel="noopener noreferrer">@zh0122</a></li>
<li><a href=https://github.com/zhangboya1 target=_blank rel="noopener noreferrer">@zhangboya1</a></li>
<li><a href=https://github.com/zhangstar333 target=_blank rel="noopener noreferrer">@zhangstar333</a></li>
<li><a href=https://github.com/zuochunwei target=_blank rel="noopener noreferrer">@zuochunwei</a></li>
</ul></div></div></article><nav class=pagination-nav aria-label="Blog list page navigation"></nav></main></div></div></div><div class="footer pt-16 pb-10"><div class=container><div class=footer-box><div class=left><img src=/images/asf_logo_apache.svg alt="" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE"><img src=/images/asf_logo_apache.svg alt="" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU"><div class="row footer__links"><div class="col footer__col"><div class=footer__title>ASF</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://www.apache.org/ target=_blank rel="noopener noreferrer" class=footer__link-item>Foundation<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><li class=footer__item><a href=https://www.apache.org/licenses/ target=_blank rel="noopener noreferrer" class=footer__link-item>License<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><li class=footer__item><a href=https://www.apache.org/events/current-event target=_blank rel="noopener noreferrer" class=footer__link-item>Events<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><li class=footer__item><a href=https://www.apache.org/foundation/sponsorship.html target=_blank rel="noopener noreferrer" class=footer__link-item>Sponsorship<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><li class=footer__item><a href=https://privacy.apache.org/policies/privacy-policy-public.html target=_blank rel="noopener noreferrer" class=footer__link-item>Privacy<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><li class=footer__item><a href=https://www.apache.org/security/ target=_blank rel="noopener noreferrer" class=footer__link-item>Security<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><li class=footer__item><a href=https://www.apache.org/foundation/thanks.html target=_blank rel="noopener noreferrer" class=footer__link-item>Thanks<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a></ul></div><div class="col footer__col"><div class=footer__title>Resources</div><ul class="footer__items clean-list"><li class=footer__item><a class=footer__link-item href=/download/>Download</a><li class=footer__item><a class=footer__link-item href=/blog/>Blog</a><li class=footer__item><a class=footer__link-item href=/ecosystem/cluster-management/>Ecosystem</a><li class=footer__item><a class=footer__link-item href=/users/>Users</a><li class=footer__item><a href=https://github.com/apache/doris/discussions target=_blank rel="noopener noreferrer" class=footer__link-item>Discussions<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a></ul></div><div class="col footer__col"><div class=footer__title>Community</div><ul class="footer__items clean-list"><li class=footer__item><a class=footer__link-item href=/community/how-to-contribute/contribute-to-doris/>How to contribute</a><li class=footer__item><a href=https://github.com/apache/doris/ target=_blank rel="noopener noreferrer" class=footer__link-item>Source code<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><li class=footer__item><a class=footer__link-item href=/community/team/>Doris team</a><li class=footer__item><a href=https://github.com/apache/doris/issues/30669 target=_blank rel="noopener noreferrer" class=footer__link-item>Roadmap<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><li class=footer__item><a href=https://cwiki.apache.org/confluence/display/DORIS/Doris+Improvement+Proposals target=_blank rel="noopener noreferrer" class=footer__link-item>Improvement proposal<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a></ul></div></div></div><div class=right><div class=footer__title>Join the community</div><div class=social-list><div class=social><a href=mailto:dev@doris.apache.org target=_blank title=mail class=item><svg width=2em height=2em viewBox="0 0 32 32" fill=none><path d="M5.6003 6H26.3997C27.8186 6 28.982 7.10964 29 8.46946L16.0045 15.454L3.01202 8.47829C3.02405 7.11258 4.1784 6 5.6003 6ZM3.01202 11.1508L3 23.5011C3 24.8756 4.16938 26 5.6003 26H26.3997C27.8306 26 29 24.8756 29 23.5011V11.145L16.3111 17.8028C16.1157 17.9058 15.8813 17.9058 15.6889 17.8028L3.01202 11.1508Z" fill=currentColor /></svg></a><a href=https://github.com/apache/doris target=_blank title=github class=item><svg width=2em height=2em viewBox="0 0 32 32" fill=none><path d="M16.0001 2.66675C8.63342 2.66675 2.66675 8.63341 2.66675 16.0001C2.66524 18.7991 3.54517 21.5276 5.1817 23.7983C6.81824 26.0691 9.12828 27.7668 11.7841 28.6508C12.4508 28.7668 12.7001 28.3668 12.7001 28.0161C12.7001 27.7001 12.6828 26.6508 12.6828 25.5334C9.33342 26.1508 8.46675 24.7174 8.20008 23.9668C8.04942 23.5828 7.40008 22.4001 6.83342 22.0828C6.36675 21.8334 5.70008 21.2161 6.81608 21.2001C7.86675 21.1828 8.61608 22.1668 8.86675 22.5668C10.0668 24.5828 11.9841 24.0161 12.7494 23.6668C12.8668 22.8001 13.2161 22.2174 13.6001 21.8841C10.6334 21.5508 7.53342 20.4001 7.53342 15.3001C7.53342 13.8494 8.04942 12.6507 8.90008 11.7161C8.76675 11.3827 8.30008 10.0161 9.03342 8.18275C9.03342 8.18275 10.1494 7.83342 12.7001 9.55075C13.7855 9.2495 14.907 9.09787 16.0334 9.10008C17.1668 9.10008 18.3001 9.24942 19.3668 9.54942C21.9161 7.81608 23.0334 8.18408 23.0334 8.18408C23.7668 10.0174 23.3001 11.3841 23.1668 11.7174C24.0161 12.6507 24.5334 13.8334 24.5334 15.3001C24.5334 20.4174 21.4174 21.5508 18.4508 21.8841C18.9334 22.3001 19.3508 23.1001 19.3508 24.3508C19.3508 26.1334 19.3334 27.5668 19.3334 28.0174C19.3334 28.3668 19.5841 28.7828 20.2508 28.6494C22.8975 27.7558 25.1973 26.0547 26.8266 23.7856C28.4559 21.5165 29.3327 18.7936 29.3334 16.0001C29.3334 8.63341 23.3668 2.66675 16.0001 2.66675V2.66675Z" fill=currentColor /></svg></a><a href=https://twitter.com/doris_apache target=_blank title=twitter class=item><svg width=2em height=2em viewBox="0 0 32 32" fill=none><path d="M4.625 4.625H11.2809L27.375 27.375H20.7191L4.625 4.625ZM7.52549 6.10639L21.5236 25.8936H24.4746L10.4764 6.10639H7.52549Z" fill=currentColor /><path d="M14.4268 18.4803L6.53447 27.375H4.625L13.5581 17.2525L14.4268 18.4803ZM18.1299 14.3066L26.7203 4.625H24.7017L17.2525 13.0662L18.1299 14.3066Z" fill=currentColor /></svg></a><a href=https://doris.apache.org/slack title=slack target=_blank class=item><svg width=2em height=2em viewBox="0 0 32 32" fill=none><g clip-path=url(#clip0_125_278)><path d="M12.5875 16.6906C11.0844 16.6906 9.86562 17.9094 9.86562 19.4125V26.2375C9.86562 26.9594 10.1524 27.6517 10.6628 28.1622C11.1733 28.6726 11.8656 28.9594 12.5875 28.9594C13.3094 28.9594 14.0017 28.6726 14.5122 28.1622C15.0226 27.6517 15.3094 26.9594 15.3094 26.2375V19.4531C15.3094 17.9094 14.0906 16.6906 12.5875 16.6906ZM3 19.4531C3 20.175 3.28677 20.8673 3.79722 21.3778C4.30767 21.8882 4.99999 22.175 5.72187 22.175C6.44376 22.175 7.13608 21.8882 7.64653 21.3778C8.15698 20.8673 8.44375 20.175 8.44375 19.4531V16.7312H5.7625C4.25938 16.6906 3 17.9094 3 19.4531ZM12.5875 3C11.8656 3 11.1733 3.28677 10.6628 3.79722C10.1524 4.30767 9.86562 4.99999 9.86562 5.72187C9.86562 6.44376 10.1524 7.13608 10.6628 7.64653C11.1733 8.15698 11.8656 8.44375 12.5875 8.44375H15.3094V5.72187C15.3094 4.21875 14.0906 3 12.5875 3ZM5.72187 15.3094H12.5469C13.2688 15.3094 13.9611 15.0226 14.4715 14.5122C14.982 14.0017 15.2688 13.3094 15.2688 12.5875C15.2688 11.8656 14.982 11.1733 14.4715 10.6628C13.9611 10.1524 13.2688 9.86562 12.5469 9.86562H5.72187C4.99999 9.86562 4.30767 10.1524 3.79722 10.6628C3.28677 11.1733 3 11.8656 3 12.5875C3 13.3094 3.28677 14.0017 3.79722 14.5122C4.30767 15.0226 4.99999 15.3094 5.72187 15.3094ZM26.2375 9.86562C24.7344 9.86562 23.5156 11.0844 23.5156 12.5875V15.3094H26.2375C26.9594 15.3094 27.6517 15.0226 28.1622 14.5122C28.6726 14.0017 28.9594 13.3094 28.9594 12.5875C28.9594 11.8656 28.6726 11.1733 28.1622 10.6628C27.6517 10.1524 26.9594 9.86562 26.2375 9.86562ZM16.6906 5.72187V12.5875C16.6906 13.3094 16.9774 14.0017 17.4878 14.5122C17.9983 15.0226 18.6906 15.3094 19.4125 15.3094C20.1344 15.3094 20.8267 15.0226 21.3372 14.5122C21.8476 14.0017 22.1344 13.3094 22.1344 12.5875V5.72187C22.1344 4.99999 21.8476 4.30767 21.3372 3.79722C20.8267 3.28677 20.1344 3 19.4125 3C18.6906 3 17.9983 3.28677 17.4878 3.79722C16.9774 4.30767 16.6906 4.99999 16.6906 5.72187ZM22.1344 26.2781C22.1344 24.775 20.9156 23.5562 19.4125 23.5562H16.6906V26.2781C16.6906 27 16.9774 27.6923 17.4878 28.2028C17.9983 28.7132 18.6906 29 19.4125 29C20.1344 29 20.8267 28.7132 21.3372 28.2028C21.8476 27.6923 22.1344 27 22.1344 26.2781ZM26.2781 16.6906H19.4125C18.6906 16.6906 17.9983 16.9774 17.4878 17.4878C16.9774 17.9983 16.6906 18.6906 16.6906 19.4125C16.6906 20.1344 16.9774 20.8267 17.4878 21.3372C17.9983 21.8476 18.6906 22.1344 19.4125 22.1344H26.2375C27.7406 22.1344 28.9594 20.9156 28.9594 19.4125C29 17.9094 27.7812 16.6906 26.2781 16.6906Z" fill=currentColor /></g><defs><clipPath id=clip0_125_278><rect width=26 height=26 fill=currentColor transform="translate(3 3)"/></clipPath></defs></svg></a></div><div class=social><a href=https://www.youtube.com/hashtag/apachedoris title=youtube target=_blank class=item><svg width=2em height=2em viewBox="0 0 32 32" fill=none><path d="M28.5167 7.83429C28.9436 8.25423 29.2532 8.77539 29.4154 9.34742C29.8205 11.5462 30.0159 13.7775 29.999 16.0121C30.0144 18.2382 29.819 20.4609 29.4154 22.6515C29.2532 23.2235 28.9436 23.7446 28.5167 24.1645C28.0898 24.5845 27.5601 24.889 26.9785 25.0486C24.7728 25.625 16.0124 25.625 16.0124 25.625C16.0124 25.625 7.22652 25.625 5.04638 25.0486C4.46489 24.889 3.9351 24.5845 3.5082 24.1645C3.08132 23.7446 2.77176 23.2235 2.60948 22.6515C2.19736 20.4617 1.9934 18.239 2.00025 16.0121C1.9918 13.7767 2.19577 11.5455 2.60948 9.34742C2.77176 8.77539 3.08132 8.25423 3.5082 7.83429C3.9351 7.41436 4.46489 7.10985 5.04638 6.95021C7.25103 6.36354 16.0124 6.37502 16.0124 6.37502C16.0124 6.37502 24.796 6.37502 26.9785 6.95021C27.5601 7.10985 28.0898 7.41436 28.5167 7.83429ZM12.5 21.25L21.25 16.008L12.5 10.75V21.25Z" fill=currentColor /></svg></a><a href=https://www.linkedin.com/company/doris-apache/ title=linkedin target=_blank class=item><svg width=2rem height=2rem viewBox="0 0 32 32" fill=none><path d="M4.29925 26.9996H9.66738V11.6781H4.29925V26.9996ZM22.1628 11.1949C19.9409 11.1949 18.7157 11.9388 17.3054 13.7407V11.6777H11.9459V26.9996H17.305V18.6738C17.305 16.9168 18.145 15.1982 20.1535 15.1982C22.162 15.1982 22.6559 16.9164 22.6559 18.632V27H28V18.2902C28 12.2386 24.3854 11.1949 22.1628 11.1949ZM6.99325 4C5.3395 4 4 5.21047 4 6.7046C4 8.19759 5.3395 9.40617 6.99325 9.40617C8.6455 9.40617 9.985 8.19722 9.985 6.7046C9.985 5.21047 8.6455 4 6.99325 4Z" fill=white /></svg></a><a href=https://medium.com/@ApacheDoris title=medium target=_blank class=item><svg width=2em height=2em viewBox="0 0 32 32" fill=none><g id=Frame><path id=Vector d="M17.7967 16.5385C17.8029 18.53 16.9746 20.4425 15.4937 21.8559C14.0128 23.2693 12.0004 24.0681 9.89836 24.0769C7.79633 24.0681 5.78391 23.2693 4.30302 21.8559C2.82212 20.4425 1.99383 18.53 2.00003 16.5385C1.99383 14.5469 2.82212 12.6344 4.30302 11.221C5.78391 9.80759 7.79633 9.00878 9.89836 9C12.0004 9.00878 14.0128 9.80759 15.4937 11.221C16.9746 12.6344 17.8029 14.5469 17.7967 16.5385ZM26.4533 16.5385C26.4533 20.4514 24.6917 23.6348 22.51 23.6348C20.3283 23.6348 18.555 20.4514 18.555 16.5385C18.555 12.6255 20.3283 9.44214 22.51 9.44214C24.6917 9.44214 26.4533 12.6255 26.4533 16.5385ZM30 16.5385C30 20.0424 29.3817 22.8942 28.6117 22.8942C27.8417 22.8942 27.2233 20.0424 27.2233 16.5385C27.2233 13.0345 27.8417 10.1827 28.6117 10.1827C29.3817 10.1827 30 13.0345 30 16.5385Z" fill=currentColor /></g></svg></a></div></div></div></div><div class=footer__copyright>Copyright © 2026 The Apache Software Foundation,Licensed under the <a href=https://www.apache.org/licenses/LICENSE-2.0 target=_blank>Apache License, Version 2.0</a>. Apache, Doris, Apache Doris, the Apache feather logo and the Apache Doris logo are trademarks of The Apache Software Foundation.</div></div></div></div>