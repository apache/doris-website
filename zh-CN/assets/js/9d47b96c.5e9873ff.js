"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["945927"],{203603:function(e,n,i){i.r(n),i.d(n,{default:()=>o,frontMatter:()=>l,metadata:()=>s,assets:()=>c,toc:()=>h,contentTitle:()=>t});var s=JSON.parse('{"id":"lakehouse/catalogs/hudi-catalog","title":"Hudi Catalog","description":"Hudi Catalog \u590D\u7528\u4E86 Hive Catalog\u3002\u901A\u8FC7\u8FDE\u63A5 Hive Metastore\uFF0C\u6216\u8005\u517C\u5BB9 Hive Metatore \u7684\u5143\u6570\u636E\u670D\u52A1\uFF0CDoris \u53EF\u4EE5\u81EA\u52A8\u83B7\u53D6 Hudi \u7684\u5E93\u8868\u4FE1\u606F\uFF0C\u5E76\u8FDB\u884C\u6570\u636E\u67E5\u8BE2\u3002","source":"@site/i18n/zh-CN/docusaurus-plugin-content-docs/version-3.x/lakehouse/catalogs/hudi-catalog.md","sourceDirName":"lakehouse/catalogs","slug":"/lakehouse/catalogs/hudi-catalog","permalink":"/zh-CN/docs/3.x/lakehouse/catalogs/hudi-catalog","draft":false,"unlisted":false,"tags":[],"version":"3.x","frontMatter":{"title":"Hudi Catalog","language":"zh-CN"},"sidebar":"docs","previous":{"title":"Iceberg Catalog","permalink":"/zh-CN/docs/3.x/lakehouse/catalogs/iceberg-catalog"},"next":{"title":"Paimon Catalog","permalink":"/zh-CN/docs/3.x/lakehouse/catalogs/paimon-catalog"}}'),d=i("785893"),r=i("250065");let l={title:"Hudi Catalog",language:"zh-CN"},t=void 0,c={},h=[{value:"\u9002\u7528\u573A\u666F",id:"\u9002\u7528\u573A\u666F",level:2},{value:"\u914D\u7F6E Catalog",id:"\u914D\u7F6E-catalog",level:2},{value:"\u8BED\u6CD5",id:"\u8BED\u6CD5",level:3},{value:"\u652F\u6301\u7684 Hudi \u7248\u672C",id:"\u652F\u6301\u7684-hudi-\u7248\u672C",level:3},{value:"\u652F\u6301\u7684\u67E5\u8BE2\u7C7B\u578B",id:"\u652F\u6301\u7684\u67E5\u8BE2\u7C7B\u578B",level:3},{value:"\u652F\u6301\u7684\u5143\u6570\u636E\u670D\u52A1",id:"\u652F\u6301\u7684\u5143\u6570\u636E\u670D\u52A1",level:3},{value:"\u652F\u6301\u7684\u5B58\u50A8\u7CFB\u7EDF",id:"\u652F\u6301\u7684\u5B58\u50A8\u7CFB\u7EDF",level:3},{value:"\u652F\u6301\u7684\u6570\u636E\u683C\u5F0F",id:"\u652F\u6301\u7684\u6570\u636E\u683C\u5F0F",level:3},{value:"\u5217\u7C7B\u578B\u6620\u5C04",id:"\u5217\u7C7B\u578B\u6620\u5C04",level:2},{value:"\u57FA\u7840\u793A\u4F8B",id:"\u57FA\u7840\u793A\u4F8B",level:2},{value:"\u67E5\u8BE2\u64CD\u4F5C",id:"\u67E5\u8BE2\u64CD\u4F5C",level:2},{value:"\u57FA\u7840\u67E5\u8BE2",id:"\u57FA\u7840\u67E5\u8BE2",level:3},{value:"\u65F6\u95F4\u65C5\u884C",id:"\u65F6\u95F4\u65C5\u884C",level:3},{value:"\u589E\u91CF\u67E5\u8BE2",id:"\u589E\u91CF\u67E5\u8BE2",level:3},{value:"FAQ",id:"faq",level:2},{value:"\u9644\u5F55",id:"\u9644\u5F55",level:2},{value:"\u7248\u672C\u66F4\u65B0\u8BB0\u5F55",id:"\u7248\u672C\u66F4\u65B0\u8BB0\u5F55",level:3}];function a(e){let n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.a)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.p,{children:"Hudi Catalog \u590D\u7528\u4E86 Hive Catalog\u3002\u901A\u8FC7\u8FDE\u63A5 Hive Metastore\uFF0C\u6216\u8005\u517C\u5BB9 Hive Metatore \u7684\u5143\u6570\u636E\u670D\u52A1\uFF0CDoris \u53EF\u4EE5\u81EA\u52A8\u83B7\u53D6 Hudi \u7684\u5E93\u8868\u4FE1\u606F\uFF0C\u5E76\u8FDB\u884C\u6570\u636E\u67E5\u8BE2\u3002"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.a,{href:"/zh-CN/docs/3.x/lakehouse/best-practices/doris-hudi",children:"\u4F7F\u7528 Docker \u5FEB\u901F\u4F53\u9A8C Apache Doris & Hudi"})}),"\n",(0,d.jsx)(n.h2,{id:"\u9002\u7528\u573A\u666F",children:"\u9002\u7528\u573A\u666F"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"\u573A\u666F"}),(0,d.jsx)(n.th,{children:"\u8BF4\u660E"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"\u67E5\u8BE2\u52A0\u901F"}),(0,d.jsx)(n.td,{children:"\u5229\u7528 Doris \u5206\u5E03\u5F0F\u8BA1\u7B97\u5F15\u64CE\uFF0C\u76F4\u63A5\u8BBF\u95EE Hudi \u6570\u636E\u8FDB\u884C\u67E5\u8BE2\u52A0\u901F\u3002"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"\u6570\u636E\u96C6\u6210"}),(0,d.jsx)(n.td,{children:"\u8BFB\u53D6 Hudi \u6570\u636E\u5E76\u5199\u5165\u5230 Doris \u5185\u8868\u3002\u6216\u901A\u8FC7 Doris \u8BA1\u7B97\u5F15\u64CE\u8FDB\u884C ZeroETL \u64CD\u4F5C\u3002"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"\u6570\u636E\u5199\u56DE"}),(0,d.jsx)(n.td,{children:"\u4E0D\u652F\u6301\u3002"})]})]})]}),"\n",(0,d.jsx)(n.h2,{id:"\u914D\u7F6E-catalog",children:"\u914D\u7F6E Catalog"}),"\n",(0,d.jsx)(n.h3,{id:"\u8BED\u6CD5",children:"\u8BED\u6CD5"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-sql",children:"CREATE CATALOG [IF NOT EXISTS] catalog_name PROPERTIES (\n    'type' = 'hms', -- required\n    'hive.metastore.uris' = '<metastore_thrift_url>', -- required\n    {MetaStoreProperties},\n    {StorageProperties},\n    {HudiProperties},\n    {CommonProperties}\n);\n"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"[MetaStoreProperties]"})}),"\n",(0,d.jsx)(n.p,{children:"MetaStoreProperties \u90E8\u5206\u7528\u4E8E\u586B\u5199 Metastore \u5143\u6570\u636E\u670D\u52A1\u8FDE\u63A5\u548C\u8BA4\u8BC1\u4FE1\u606F\u3002\u5177\u4F53\u53EF\u53C2\u9605\u3010\u652F\u6301\u7684\u5143\u6570\u636E\u670D\u52A1\u3011\u90E8\u5206\u3002"}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"[StorageProperties]"})}),"\n",(0,d.jsx)(n.p,{children:"StorageProperties \u90E8\u5206\u7528\u4E8E\u586B\u5199\u5B58\u50A8\u7CFB\u7EDF\u76F8\u5173\u7684\u8FDE\u63A5\u548C\u8BA4\u8BC1\u4FE1\u606F\u3002\u5177\u4F53\u53EF\u53C2\u9605\u3010\u652F\u6301\u7684\u5B58\u50A8\u7CFB\u7EDF\u3011\u90E8\u5206\u3002"}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"[CommonProperties]"})}),"\n",(0,d.jsxs)(n.p,{children:["CommonProperties \u90E8\u5206\u7528\u4E8E\u586B\u5199\u901A\u7528\u5C5E\u6027\u3002\u8BF7\u53C2\u9605",(0,d.jsx)(n.a,{href:"/zh-CN/docs/3.x/lakehouse/catalog-overview",children:" \u6570\u636E\u76EE\u5F55\u6982\u8FF0 "}),"\u4E2D\u3010\u901A\u7528\u5C5E\u6027\u3011\u90E8\u5206\u3002"]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"{HudiProperties}"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"\u53C2\u6570\u540D\u79F0"}),(0,d.jsx)(n.th,{children:"\u66FE\u7528\u540D"}),(0,d.jsx)(n.th,{children:"\u8BF4\u660E"}),(0,d.jsx)(n.th,{children:"\u9ED8\u8BA4\u503C"})]})}),(0,d.jsx)(n.tbody,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"hudi.use_hive_sync_partition"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"use_hive_sync_partition"})}),(0,d.jsx)(n.td,{children:"\u662F\u5426\u4F7F\u7528 Hive Metastore \u5DF2\u540C\u6B65\u7684\u5206\u533A\u4FE1\u606F\u3002\u5982\u679C\u4E3A true\uFF0C\u5219\u4F1A\u76F4\u63A5\u4ECE Hive Metastore \u4E2D\u83B7\u53D6\u5206\u533A\u4FE1\u606F\u3002\u5426\u5219\uFF0C\u4F1A\u4ECE\u6587\u4EF6\u7CFB\u7EDF\u7684\u5143\u6570\u636E\u6587\u4EF6\u4E2D\u83B7\u53D6\u5206\u533A\u4FE1\u606F\u3002\u901A\u8FC7 Hive Metastore \u83B7\u53D6\u4FE1\u606F\u6027\u80FD\u66F4\u597D\uFF0C\u4F46\u9700\u8981\u7528\u6237\u4FDD\u8BC1\u6700\u65B0\u7684\u5143\u6570\u636E\u5DF2\u7ECF\u540C\u6B65\u5230\u4E86 Hive Metastore\u3002"}),(0,d.jsx)(n.td,{children:"false"})]})})]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"\u652F\u6301\u7684-hudi-\u7248\u672C",children:"\u652F\u6301\u7684 Hudi \u7248\u672C"}),"\n",(0,d.jsx)(n.p,{children:"\u5F53\u524D\u4F9D\u8D56\u7684 Hudi \u7248\u672C\u4E3A 0.15\u3002\u63A8\u8350\u8BBF\u95EE 0.14 \u7248\u672C\u4EE5\u4E0A\u7684 Hudi \u6570\u636E\u3002"}),"\n",(0,d.jsx)(n.h3,{id:"\u652F\u6301\u7684\u67E5\u8BE2\u7C7B\u578B",children:"\u652F\u6301\u7684\u67E5\u8BE2\u7C7B\u578B"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"\u8868\u7C7B\u578B"}),(0,d.jsx)(n.th,{children:"\u652F\u6301\u7684\u67E5\u8BE2\u7C7B\u578B"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Copy On Write"}),(0,d.jsx)(n.td,{children:"Snapshot Query, Time Travel, Incremental Read"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Merge On Read"}),(0,d.jsx)(n.td,{children:"Snapshot Queries, Read Optimized Queries, Time Travel, Incremental Read"})]})]})]}),"\n",(0,d.jsx)(n.h3,{id:"\u652F\u6301\u7684\u5143\u6570\u636E\u670D\u52A1",children:"\u652F\u6301\u7684\u5143\u6570\u636E\u670D\u52A1"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.a,{href:"/zh-CN/docs/3.x/lakehouse/metastores/hive-metastore",children:" Hive Metastore"})}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"\u652F\u6301\u7684\u5B58\u50A8\u7CFB\u7EDF",children:"\u652F\u6301\u7684\u5B58\u50A8\u7CFB\u7EDF"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.a,{href:"/zh-CN/docs/3.x/lakehouse/storages/hdfs",children:" HDFS"})}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.a,{href:"/zh-CN/docs/3.x/lakehouse/storages/s3",children:" AWS S3"})}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.a,{href:"/zh-CN/docs/3.x/lakehouse/storages/gcs",children:" Google Cloud Storage"})}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.a,{href:"/zh-CN/docs/3.x/lakehouse/storages/aliyun-oss",children:" \u963F\u91CC\u4E91 OSS"})}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.a,{href:"/zh-CN/docs/3.x/lakehouse/storages/tencent-cos",children:" \u817E\u8BAF\u4E91 COS"})}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.a,{href:"/zh-CN/docs/3.x/lakehouse/storages/huawei-obs",children:" \u534E\u4E3A\u4E91 OBS"})}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.a,{href:"/zh-CN/docs/3.x/lakehouse/storages/minio",children:" MINIO"})}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"\u652F\u6301\u7684\u6570\u636E\u683C\u5F0F",children:"\u652F\u6301\u7684\u6570\u636E\u683C\u5F0F"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.a,{href:"/zh-CN/docs/3.x/lakehouse/file-formats/parquet",children:" Parquet"})}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.a,{href:"/zh-CN/docs/3.x/lakehouse/file-formats/orc",children:" ORC"})}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"\u5217\u7C7B\u578B\u6620\u5C04",children:"\u5217\u7C7B\u578B\u6620\u5C04"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Hudi Type"}),(0,d.jsx)(n.th,{children:"Doris Type"}),(0,d.jsx)(n.th,{children:"Comment"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"boolean"}),(0,d.jsx)(n.td,{children:"boolean"}),(0,d.jsx)(n.td,{})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"int"}),(0,d.jsx)(n.td,{children:"int"}),(0,d.jsx)(n.td,{})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"long"}),(0,d.jsx)(n.td,{children:"bigint"}),(0,d.jsx)(n.td,{})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"float"}),(0,d.jsx)(n.td,{children:"float"}),(0,d.jsx)(n.td,{})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"double"}),(0,d.jsx)(n.td,{children:"double"}),(0,d.jsx)(n.td,{})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"decimal(P, S)"}),(0,d.jsx)(n.td,{children:"decimal(P, S)"}),(0,d.jsx)(n.td,{})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"bytes"}),(0,d.jsx)(n.td,{children:"string"}),(0,d.jsx)(n.td,{})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"string"}),(0,d.jsx)(n.td,{children:"string"}),(0,d.jsx)(n.td,{})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"date"}),(0,d.jsx)(n.td,{children:"date"}),(0,d.jsx)(n.td,{})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"timestamp"}),(0,d.jsx)(n.td,{children:"datetime(N)"}),(0,d.jsx)(n.td,{children:"\u6839\u636E\u7CBE\u5EA6\uFF0C\u81EA\u52A8\u6620\u5C04\u5230 datetime(3) \u6216 datetime(6)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"array"}),(0,d.jsx)(n.td,{children:"array"}),(0,d.jsx)(n.td,{})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"map"}),(0,d.jsx)(n.td,{children:"map"}),(0,d.jsx)(n.td,{})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"struct"}),(0,d.jsx)(n.td,{children:"struct"}),(0,d.jsx)(n.td,{})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"other"}),(0,d.jsx)(n.td,{children:"UNSUPPORTED"}),(0,d.jsx)(n.td,{})]})]})]}),"\n",(0,d.jsx)(n.h2,{id:"\u57FA\u7840\u793A\u4F8B",children:"\u57FA\u7840\u793A\u4F8B"}),"\n",(0,d.jsxs)(n.p,{children:["Hudi Catalog \u7684\u521B\u5EFA\u65B9\u5F0F\u548C Hive Catalog \u4E00\u81F4\u3002\u66F4\u591A\u793A\u4F8B\u53EF\u53C2\u9605",(0,d.jsx)(n.a,{href:"./hive-catalog.md",children:" Hive Catalog"})]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-sql",children:"CREATE CATALOG hudi_hms PROPERTIES (\n    'type'='hms',\n    'hive.metastore.uris' = 'thrift://172.21.0.1:7004',\n    'hadoop.username' = 'hive',\n    'dfs.nameservices'='your-nameservice',\n    'dfs.ha.namenodes.your-nameservice'='nn1,nn2',\n    'dfs.namenode.rpc-address.your-nameservice.nn1'='172.21.0.2:4007',\n    'dfs.namenode.rpc-address.your-nameservice.nn2'='172.21.0.3:4007',\n    'dfs.client.failover.proxy.provider.your-nameservice'='org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider'\n);\n"})}),"\n",(0,d.jsx)(n.h2,{id:"\u67E5\u8BE2\u64CD\u4F5C",children:"\u67E5\u8BE2\u64CD\u4F5C"}),"\n",(0,d.jsx)(n.h3,{id:"\u57FA\u7840\u67E5\u8BE2",children:"\u57FA\u7840\u67E5\u8BE2"}),"\n",(0,d.jsx)(n.p,{children:"\u914D\u7F6E\u597D Catalog \u540E\uFF0C\u53EF\u4EE5\u901A\u8FC7\u4EE5\u4E0B\u65B9\u5F0F\u67E5\u8BE2 Catalog \u4E2D\u7684\u8868\u6570\u636E\uFF1A"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-sql",children:"-- 1. switch to catalog, use database and query\nSWITCH hudi_ctl;\nUSE hudi_db;\nSELECT * FROM hudi_tbl LIMIT 10;\n\n-- 2. use hudi database directly\nUSE hudi_ctl.hudi_db;\nSELECT * FROM hudi_tbl LIMIT 10;\n\n-- 3. use full qualified name to query\nSELECT * FROM hudi_ctl.hudi_db.hudi_tbl LIMIT 10;\n"})}),"\n",(0,d.jsx)(n.h3,{id:"\u65F6\u95F4\u65C5\u884C",children:"\u65F6\u95F4\u65C5\u884C"}),"\n",(0,d.jsx)(n.p,{children:"\u6BCF\u4E00\u6B21\u5BF9 Hudi \u8868\u7684\u5199\u64CD\u4F5C\u90FD\u4F1A\u4EA7\u751F\u4E00\u4E2A\u65B0\u7684\u5FEB\u7167\uFF0CDoris \u652F\u6301\u8BFB\u53D6 Hudi \u8868\u6307\u5B9A\u7684 Snapshot\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u67E5\u8BE2\u8BF7\u6C42\u53EA\u4F1A\u8BFB\u53D6\u6700\u65B0\u7248\u672C\u7684\u5FEB\u7167\u3002"}),"\n",(0,d.jsxs)(n.p,{children:["\u53EF\u4EE5\u901A\u8FC7 ",(0,d.jsx)(n.code,{children:"hudi_meta()"})," \u8868\u51FD\u6570\u67E5\u8BE2\u67E5\u8BE2\u6307\u5B9A Hudi \u8868\u7684 Timeline\uFF1A"]}),"\n",(0,d.jsx)(n.p,{children:"\u8BE5\u51FD\u6570\u81EA 3.1.0 \u7248\u672C\u652F\u6301\u3002"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-sql",children:"SELECT * FROM hudi_meta(\n    'table' = 'hudi_ctl.hudi_db.hudi_tbl',\n    'query_type' = 'timeline'\n);\n\n+-------------------+--------+--------------------------+-----------+-----------------------+\n| timestamp         | action | file_name                | state     | state_transition_time |\n+-------------------+--------+--------------------------+-----------+-----------------------+\n| 20241202171214902 | commit | 20241202171214902.commit | COMPLETED | 20241202171215756     |\n| 20241202171217258 | commit | 20241202171217258.commit | COMPLETED | 20241202171218127     |\n| 20241202171219557 | commit | 20241202171219557.commit | COMPLETED | 20241202171220308     |\n| 20241202171221769 | commit | 20241202171221769.commit | COMPLETED | 20241202171222541     |\n| 20241202171224269 | commit | 20241202171224269.commit | COMPLETED | 20241202171224995     |\n| 20241202171226401 | commit | 20241202171226401.commit | COMPLETED | 20241202171227155     |\n| 20241202171228827 | commit | 20241202171228827.commit | COMPLETED | 20241202171229570     |\n| 20241202171230907 | commit | 20241202171230907.commit | COMPLETED | 20241202171231686     |\n| 20241202171233356 | commit | 20241202171233356.commit | COMPLETED | 20241202171234288     |\n| 20241202171235940 | commit | 20241202171235940.commit | COMPLETED | 20241202171236757     |\n+-------------------+--------+--------------------------+-----------+-----------------------+\n"})}),"\n",(0,d.jsxs)(n.p,{children:["\u53EF\u4EE5\u4F7F\u7528 ",(0,d.jsx)(n.code,{children:"FOR TIME AS OF"})," \u8BED\u53E5\uFF0C\u6839\u636E\u5FEB\u7167\u7684\u65F6\u95F4 (",(0,d.jsx)(n.a,{href:"https://hudi.apache.org/docs/0.14.0/quick-start-guide/#timetravel",children:"\u65F6\u95F4\u683C\u5F0F"}),"\u548C Hudi \u5B98\u7F51\u4FDD\u6301\u4E00\u81F4) \u8BFB\u53D6\u5386\u53F2\u7248\u672C\u7684\u6570\u636E\u3002\u793A\u4F8B\u5982\u4E0B\uFF1A"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-sql",children:'SELECT * FROM hudi_tbl FOR TIME AS OF "2022-10-07 17:20:37";\nSELECT * FROM hudi_tbl FOR TIME AS OF "20221007172037";\nSELECT * FROM hudi_tbl FOR TIME AS OF "2022-10-07";\n'})}),"\n",(0,d.jsxs)(n.p,{children:["Hudi \u8868\u4E0D\u652F\u6301 ",(0,d.jsx)(n.code,{children:"FOR VERSION AS OF"})," \u8BED\u53E5\uFF0C\u4F7F\u7528\u8BE5\u8BED\u6CD5\u67E5\u8BE2 Hudi \u8868\u5C06\u62A5\u9519\u3002"]}),"\n",(0,d.jsx)(n.h3,{id:"\u589E\u91CF\u67E5\u8BE2",children:"\u589E\u91CF\u67E5\u8BE2"}),"\n",(0,d.jsx)(n.p,{children:"Incremental Read \u53EF\u4EE5\u67E5\u8BE2\u5728\u6307\u5B9A\u65F6\u95F4\u6BB5\u4E4B\u95F4\u53D8\u5316\u7684\u6570\u636E\uFF0C\u8FD4\u56DE\u7684\u7ED3\u679C\u96C6\u662F\u6570\u636E\u5728\u6307\u5B9A\u65F6\u95F4\u6BB5\u7ED3\u675F\u65F6\u7684\u6700\u7EC8\u72B6\u6001\u3002"}),"\n",(0,d.jsxs)(n.p,{children:["Doris \u63D0\u4F9B\u4E86 ",(0,d.jsx)(n.code,{children:"@incr"})," \u8BED\u6CD5\u652F\u6301 Incremental Read:"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-sql",children:"SELECT * from hudi_table@incr('beginTime'='xxx', ['endTime'='xxx'], ['hoodie.read.timeline.holes.resolution.policy'='FAIL'], ...);\n"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"beginTime"})}),"\n",(0,d.jsxs)(n.p,{children:["\u5FC5\u586B\u9879\u3002\u65F6\u95F4\u683C\u5F0F\u548C Hudi \u5B98\u7F51 ",(0,d.jsx)(n.a,{href:"https://hudi.apache.org/docs/0.14.0/quick-start-guide/#incremental-query",children:"hudi_table_changes"}),' \u4FDD\u6301\u4E00\u81F4\uFF0C\u652F\u6301 "earliest"\u3002']}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"endTime"})}),"\n",(0,d.jsx)(n.p,{children:"\u9009\u586B\uFF0C\u9ED8\u8BA4\u6700\u65B0 commitTime\u3002"}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(n.p,{children:["\u53EF\u4EE5\u5728 ",(0,d.jsx)(n.code,{children:"@incr"}),"\u51FD\u6570\u4E2D\u6DFB\u52A0\u66F4\u591A\u9009\u9879\uFF0C\u517C\u5BB9 ",(0,d.jsx)(n.a,{href:"https://hudi.apache.org/docs/0.14.0/configurations#Read-Options",children:"Spark Read Options"}),"\u3002"]}),"\n",(0,d.jsxs)(n.p,{children:["\u901A\u8FC7 ",(0,d.jsx)(n.code,{children:"desc"})," \u67E5\u770B\u6267\u884C\u8BA1\u5212\uFF0C\u53EF\u4EE5\u53D1\u73B0 Doris \u5C06 ",(0,d.jsx)(n.code,{children:"@incr"})," \u8F6C\u5316\u4E3A ",(0,d.jsx)(n.code,{children:"predicates"})," \u4E0B\u63A8\u7ED9 ",(0,d.jsx)(n.code,{children:"VHUDI_SCAN_NODE"}),":"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-text",children:"|   0:VHUDI_SCAN_NODE(113)                                                                                            |\n|      table: lineitem_mor                                                                                            |\n|      predicates: (_hoodie_commit_time[#0] > '20240311151019723'), (_hoodie_commit_time[#0] <= '20240311151606605') |\n|      inputSplitNum=1, totalFileSize=13099711, scanRanges=1              \n"})}),"\n",(0,d.jsx)(n.h2,{id:"faq",children:"FAQ"}),"\n",(0,d.jsxs)(n.ol,{children:["\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"\u901A\u8FC7 JNI \u8C03\u7528 Java SDK \u8BFB\u53D6 Hudi \u589E\u91CF\u6570\u636E\u5076\u53D1\u5361\u6B7B"}),"\n",(0,d.jsxs)(n.p,{children:["\u8BF7\u5728 ",(0,d.jsx)(n.code,{children:"be.conf"})," \u7684 ",(0,d.jsx)(n.code,{children:"JAVA_OPTS_FOR_JDK_17"})," \u6216 ",(0,d.jsx)(n.code,{children:"JAVA_OPTS"})," \u4E2D\u6DFB\u52A0 ",(0,d.jsx)(n.code,{children:"-Djol.skipHotspotSAAttach=true"}),"."]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"\u9644\u5F55",children:"\u9644\u5F55"}),"\n",(0,d.jsx)(n.h3,{id:"\u7248\u672C\u66F4\u65B0\u8BB0\u5F55",children:"\u7248\u672C\u66F4\u65B0\u8BB0\u5F55"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Doris \u7248\u672C"}),(0,d.jsx)(n.th,{children:"\u529F\u80FD\u652F\u6301"})]})}),(0,d.jsx)(n.tbody,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"2.1.8/3.0.4"}),(0,d.jsx)(n.td,{children:"Hudi \u4F9D\u8D56\u5347\u7EA7\u5230 0.15\u3002\u65B0\u589E Hadoop Hudi JNI Scanner\u3002"})]})})]})]})}function o(e={}){let{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(a,{...e})}):a(e)}},250065:function(e,n,i){i.d(n,{Z:function(){return t},a:function(){return l}});var s=i(667294);let d={},r=s.createContext(d);function l(e){let n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:l(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);