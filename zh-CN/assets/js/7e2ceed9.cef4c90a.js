"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["468649"],{741092:function(e,n,r){r.r(n),r.d(n,{default:()=>p,frontMatter:()=>c,metadata:()=>s,assets:()=>a,toc:()=>t,contentTitle:()=>l});var s=JSON.parse('{"id":"admin-manual/open-api/fe-http/query-profile-action","title":"Query Profile Action","description":"Request","source":"@site/i18n/zh-CN/docusaurus-plugin-content-docs/current/admin-manual/open-api/fe-http/query-profile-action.md","sourceDirName":"admin-manual/open-api/fe-http","slug":"/admin-manual/open-api/fe-http/query-profile-action","permalink":"/zh-CN/docs/dev/admin-manual/open-api/fe-http/query-profile-action","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Query Profile Action","language":"zh-CN"},"sidebar":"docs","previous":{"title":"Node Action","permalink":"/zh-CN/docs/dev/admin-manual/open-api/fe-http/node-action"},"next":{"title":"Backends Action","permalink":"/zh-CN/docs/dev/admin-manual/open-api/fe-http/backends-action"}}'),i=r("785893"),d=r("250065");let c={title:"Query Profile Action",language:"zh-CN"},l=void 0,a={},t=[{value:"Request",id:"request",level:2},{value:"\u83B7\u53D6\u67E5\u8BE2\u4FE1\u606F",id:"\u83B7\u53D6\u67E5\u8BE2\u4FE1\u606F",level:2},{value:"Description",id:"description",level:3},{value:"Query parameters",id:"query-parameters",level:3},{value:"Response",id:"response",level:3},{value:"Examples",id:"examples",level:3},{value:"\u901A\u8FC7 Trace Id \u83B7\u53D6 Query Id",id:"\u901A\u8FC7-trace-id-\u83B7\u53D6-query-id",level:2},{value:"Description",id:"description-1",level:3},{value:"Path parameters",id:"path-parameters",level:3},{value:"Query parameters",id:"query-parameters-1",level:3},{value:"Response",id:"response-1",level:3},{value:"\u83B7\u53D6\u6307\u5B9A\u67E5\u8BE2\u7684 sql \u548C\u6587\u672C profile",id:"\u83B7\u53D6\u6307\u5B9A\u67E5\u8BE2\u7684-sql-\u548C\u6587\u672C-profile",level:2},{value:"Description",id:"description-2",level:3},{value:"Path parameters",id:"path-parameters-1",level:3},{value:"Query parameters",id:"query-parameters-2",level:3},{value:"Response",id:"response-2",level:3},{value:"Examples",id:"examples-1",level:3},{value:"\u83B7\u53D6\u6307\u5B9A\u67E5\u8BE2 fragment \u548C instance \u4FE1\u606F",id:"\u83B7\u53D6\u6307\u5B9A\u67E5\u8BE2-fragment-\u548C-instance-\u4FE1\u606F",level:2},{value:"Description",id:"description-3",level:3},{value:"Path parameters",id:"path-parameters-2",level:3},{value:"Query parameters",id:"query-parameters-3",level:3},{value:"Response",id:"response-3",level:3},{value:"Examples",id:"examples-2",level:3},{value:"\u83B7\u53D6\u6307\u5B9A query id \u6811\u72B6 profile \u4FE1\u606F",id:"\u83B7\u53D6\u6307\u5B9A-query-id-\u6811\u72B6-profile-\u4FE1\u606F",level:2},{value:"Description",id:"description-4",level:3},{value:"Path parameters",id:"path-parameters-3",level:3},{value:"Query parameters",id:"query-parameters-4",level:3},{value:"Response",id:"response-4",level:3},{value:"\u6B63\u5728\u6267\u884C\u7684 query",id:"\u6B63\u5728\u6267\u884C\u7684-query",level:2},{value:"Description",id:"description-5",level:3},{value:"Path parameters",id:"path-parameters-4",level:3},{value:"Query parameters",id:"query-parameters-5",level:3},{value:"Response",id:"response-5",level:3},{value:"\u53D6\u6D88 query",id:"\u53D6\u6D88-query",level:2},{value:"Description",id:"description-6",level:3},{value:"Path parameters",id:"path-parameters-5",level:3},{value:"Query parameters",id:"query-parameters-6",level:3},{value:"Response",id:"response-6",level:3},{value:"\u901A\u8FC7 Trace ID \u83B7\u53D6\u67E5\u8BE2\u8FDB\u5EA6",id:"\u901A\u8FC7-trace-id-\u83B7\u53D6\u67E5\u8BE2\u8FDB\u5EA6",level:2},{value:"Description",id:"description-7",level:3},{value:"Path parameters",id:"path-parameters-6",level:3},{value:"Response",id:"response-7",level:3}];function o(e){let n={admonition:"admonition",br:"br",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,d.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"request",children:"Request"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"GET /rest/v2/manager/query/query_info"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"GET /rest/v2/manager/query/trace/{trace_id}"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"GET /rest/v2/manager/query/sql/{query_id}"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"GET /rest/v2/manager/query/profile/text/{query_id}"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"GET /rest/v2/manager/query/profile/graph/{query_id}"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"GET /rest/v2/manager/query/profile/json/{query_id}"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"GET /rest/v2/manager/query/profile/fragments/{query_id}"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"GET /rest/v2/manager/query/current_queries"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"GET /rest/v2/manager/query/kill/{query_id}"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"GET /rest/v2/manager/query/statistics/{trace_id}"})," (4.0.0+)"]}),"\n",(0,i.jsx)(n.h2,{id:"\u83B7\u53D6\u67E5\u8BE2\u4FE1\u606F",children:"\u83B7\u53D6\u67E5\u8BE2\u4FE1\u606F"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"GET /rest/v2/manager/query/query_info"})}),"\n",(0,i.jsx)(n.h3,{id:"description",children:"Description"}),"\n",(0,i.jsx)(n.p,{children:"\u53EF\u83B7\u53D6\u96C6\u7FA4\u6240\u6709 fe \u8282\u70B9 select \u67E5\u8BE2\u4FE1\u606F\u3002"}),"\n",(0,i.jsx)(n.h3,{id:"query-parameters",children:"Query parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"query_id"})}),"\n",(0,i.jsx)(n.p,{children:"\u53EF\u9009\uFF0C\u6307\u5B9A\u8FD4\u56DE\u67E5\u8BE2\u7684 queryID\uFF0C\u9ED8\u8BA4\u8FD4\u56DE\u6240\u6709\u67E5\u8BE2\u7684\u4FE1\u606F\u3002"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"search"})}),"\n",(0,i.jsx)(n.p,{children:"\u53EF\u9009\uFF0C\u6307\u5B9A\u8FD4\u56DE\u5305\u542B\u5B57\u7B26\u4E32\u7684\u67E5\u8BE2\u4FE1\u606F\uFF0C\u76EE\u524D\u4EC5\u8FDB\u884C\u5B57\u7B26\u4E32\u5339\u914D\u3002"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"is_all_node"})}),"\n",(0,i.jsx)(n.p,{children:"\u53EF\u9009\uFF0C\u82E5\u4E3A true \u5219\u8FD4\u56DE\u6240\u6709 fe \u8282\u70B9\u7684\u67E5\u8BE2\u4FE1\u606F\uFF0C\u82E5\u4E3A false \u5219\u8FD4\u56DE\u5F53\u524D fe \u8282\u70B9\u7684\u67E5\u8BE2\u4FE1\u606F\u3002\u9ED8\u8BA4\u4E3A true\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"response",children:"Response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n    "msg": "success",\n    "code": 0,\n    "data": {\n        "column_names": [\n            "Query ID",\n            "FE \u8282\u70B9",\n            "\u67E5\u8BE2\u7528\u6237",\n            "\u6267\u884C\u6570\u636E\u5E93",\n            "Sql",\n            "\u67E5\u8BE2\u7C7B\u578B",\n            "\u5F00\u59CB\u65F6\u95F4",\n            "\u7ED3\u675F\u65F6\u95F4",\n            "\u6267\u884C\u65F6\u957F",\n            "\u72B6\u6001"\n        ],\n        "rows": [\n            [\n                ...\n            ]\n        ]\n    },\n    "count": 0\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"Admin \u548C Root \u7528\u6237\u53EF\u4EE5\u67E5\u770B\u6240\u6709 Query\u3002\u666E\u901A\u7528\u6237\u4EC5\u80FD\u67E5\u770B\u81EA\u5DF1\u53D1\u9001\u7684 Query\u3002"}),"\n",(0,i.jsx)(n.h3,{id:"examples",children:"Examples"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'GET /rest/v2/manager/query/query_info\n\n{\n    "msg": "success",\n    "code": 0,\n    "data": {\n        "column_names": [\n            "Query ID",\n            "FE \u8282\u70B9",\n            "\u67E5\u8BE2\u7528\u6237",\n            "\u6267\u884C\u6570\u636E\u5E93",\n            "Sql",\n            "\u67E5\u8BE2\u7C7B\u578B",\n            "\u5F00\u59CB\u65F6\u95F4",\n            "\u7ED3\u675F\u65F6\u95F4",\n            "\u6267\u884C\u65F6\u957F",\n            "\u72B6\u6001"\n        ],\n        "rows": [\n            [\n                "d7c93d9275334c35-9e6ac5f295a7134b",\n                "127.0.0.1:8030",\n                "root",\n                "default_cluster:testdb",\n                "select c.id, c.name, p.age, p.phone, c.date, c.cost from cost c join people p on c.id = p.id where p.age > 20 order by c.id",\n                "Query",\n                "2021-07-29 16:59:12",\n                "2021-07-29 16:59:12",\n                "109ms",\n                "EOF"\n            ]\n        ]\n    },\n    "count": 0\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"\u901A\u8FC7-trace-id-\u83B7\u53D6-query-id",children:"\u901A\u8FC7 Trace Id \u83B7\u53D6 Query Id"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"GET /rest/v2/manager/query/trace_id/{trace_id}"})}),"\n",(0,i.jsx)(n.h3,{id:"description-1",children:"Description"}),"\n",(0,i.jsx)(n.p,{children:"\u901A\u8FC7 Trace Id \u83B7\u53D6 Query Id."}),"\n",(0,i.jsx)(n.p,{children:"\u5728\u6267\u884C\u4E00\u4E2A Query \u524D\uFF0C\u5148\u8BBE\u7F6E\u4E00\u4E2A\u552F\u4E00\u7684 trace id:"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:'set session_context="trace_id:your_trace_id"'}),";"]}),"\n",(0,i.jsx)(n.p,{children:"\u5728\u540C\u4E00\u4E2A Session \u94FE\u63A5\u5185\u6267\u884C Query \u540E\uFF0C\u53EF\u4EE5\u901A\u8FC7 trace id \u83B7\u53D6 query id\u3002"}),"\n",(0,i.jsx)(n.h3,{id:"path-parameters",children:"Path parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"{trace_id}"})}),"\n",(0,i.jsx)(n.p,{children:"\u7528\u6237\u8BBE\u7F6E\u7684 trace id."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"query-parameters-1",children:"Query parameters"}),"\n",(0,i.jsx)(n.h3,{id:"response-1",children:"Response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n    "msg": "success", \n    "code": 0, \n    "data": "fb1d9737de914af1-a498d5c5dec638d3", \n    "count": 0\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"Admin \u548C Root \u7528\u6237\u53EF\u4EE5\u67E5\u770B\u6240\u6709 Query\u3002\u666E\u901A\u7528\u6237\u4EC5\u80FD\u67E5\u770B\u81EA\u5DF1\u53D1\u9001\u7684 Query\u3002\u82E5\u6307\u5B9A trace id \u4E0D\u5B58\u5728\u6216\u65E0\u6743\u9650\uFF0C\u5219\u8FD4\u56DE Bad Request\uFF1A"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n    "msg": "Bad Request", \n    "code": 403, \n    "data": "error messages",\n    "count": 0\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"\u83B7\u53D6\u6307\u5B9A\u67E5\u8BE2\u7684-sql-\u548C\u6587\u672C-profile",children:"\u83B7\u53D6\u6307\u5B9A\u67E5\u8BE2\u7684 sql \u548C\u6587\u672C profile"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"GET /rest/v2/manager/query/sql/{query_id}"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"GET /rest/v2/manager/query/profile/text/{query_id}"})}),"\n",(0,i.jsx)(n.h3,{id:"description-2",children:"Description"}),"\n",(0,i.jsx)(n.p,{children:"\u7528\u4E8E\u83B7\u53D6\u6307\u5B9A Query ID \u7684 SQL \u548C profile \u6587\u672C\u3002"}),"\n",(0,i.jsx)(n.h3,{id:"path-parameters-1",children:"Path parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"query_id"})}),"\n",(0,i.jsx)(n.p,{children:"query id."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"query-parameters-2",children:"Query parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"is_all_node"})}),"\n",(0,i.jsx)(n.p,{children:"\u53EF\u9009\uFF0C\u82E5\u4E3A true \u5219\u5728\u6240\u6709 FE \u8282\u70B9\u4E2D\u67E5\u8BE2\u6307\u5B9A query id \u7684\u4FE1\u606F\uFF0C\u82E5\u4E3A false \u5219\u5728\u5F53\u524D\u8FDE\u63A5\u7684 FE \u8282\u70B9\u4E2D\u67E5\u8BE2\u6307\u5B9A query id \u7684\u4FE1\u606F\u3002\u9ED8\u8BA4\u4E3A true\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"response-2",children:"Response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'{\n    "msg": "success",\n    "code": 0,\n    "data": {\n        "sql": ""\n    },\n    "count": 0\n}\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'{\n    "msg": "success",\n    "code": 0,\n    "data": {\n        "profile": ""\n    },\n    "count": 0\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"Admin \u548C Root \u7528\u6237\u53EF\u4EE5\u67E5\u770B\u6240\u6709 Query\u3002\u666E\u901A\u7528\u6237\u4EC5\u80FD\u67E5\u770B\u81EA\u5DF1\u53D1\u9001\u7684 Query\u3002\u82E5\u6307\u5B9A query id \u4E0D\u5B58\u5728\u6216\u65E0\u6743\u9650\uFF0C\u5219\u8FD4\u56DE Bad Request\uFF1A"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'{\n    "msg": "Bad Request", \n    "code": 403, \n    "data": "error messages",\n    "count": 0\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"examples-1",children:"Examples"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u83B7\u53D6 sql\uFF1A"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'GET /rest/v2/manager/query/sql/d7c93d9275334c35-9e6ac5f295a7134b\n\nResponse:\n{\n    "msg": "success",\n    "code": 0,\n    "data": {\n        "sql": "select c.id, c.name, p.age, p.phone, c.date, c.cost from cost c join people p on c.id   = p.id where p.age > 20 order by c.id"\n    },\n    "count": 0\n}\n'})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"\u83B7\u53D6\u6307\u5B9A\u67E5\u8BE2-fragment-\u548C-instance-\u4FE1\u606F",children:"\u83B7\u53D6\u6307\u5B9A\u67E5\u8BE2 fragment \u548C instance \u4FE1\u606F"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"GET /rest/v2/manager/query/profile/fragments/{query_id}"})}),"\n",(0,i.jsx)(n.admonition,{type:"caution",children:(0,i.jsx)(n.p,{children:"\u81EA 2.1.1 \u8D77\uFF0C\u6B64\u63A5\u53E3\u88AB\u5F03\u7528\u3002\u4F60\u4ECD\u7136\u53EF\u4EE5\u4ECE http://<fe_ip>:<fe_http_port>/QueryProfile \u4E0A\u4E0B\u8F7D profile \u6587\u4EF6\u3002"})}),"\n",(0,i.jsx)(n.h3,{id:"description-3",children:"Description"}),"\n",(0,i.jsx)(n.p,{children:"\u7528\u4E8E\u83B7\u53D6\u6307\u5B9A query id \u7684 fragment \u540D\u79F0\uFF0Cinstance id\u3001\u4E3B\u673A IP \u53CA\u7AEF\u53E3\u548C\u6267\u884C\u65F6\u957F\u3002"}),"\n",(0,i.jsx)(n.h3,{id:"path-parameters-2",children:"Path parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"query_id"})}),"\n",(0,i.jsx)(n.p,{children:"query id."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"query-parameters-3",children:"Query parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"is_all_node"})}),"\n",(0,i.jsx)(n.p,{children:"\u53EF\u9009\uFF0C\u82E5\u4E3A true \u5219\u5728\u6240\u6709 fe \u8282\u70B9\u4E2D\u67E5\u8BE2\u6307\u5B9A query id \u7684\u4FE1\u606F\uFF0C\u82E5\u4E3A false \u5219\u5728\u5F53\u524D\u8FDE\u63A5\u7684 fe \u8282\u70B9\u4E2D\u67E5\u8BE2\u6307\u5B9A query id \u7684\u4FE1\u606F\u3002\u9ED8\u8BA4\u4E3A true\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"response-3",children:"Response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'{\n    "msg": "success",\n    "code": 0,\n    "data": [\n        {\n            "fragment_id": "",\n            "time": "",\n            "instance_id": {\n                "": {\n                  "host": "",\n                  "active_time": ""\n                }\n            }\n        }\n    ],\n    "count": 0\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"Admin \u548C Root \u7528\u6237\u53EF\u4EE5\u67E5\u770B\u6240\u6709 Query\u3002\u666E\u901A\u7528\u6237\u4EC5\u80FD\u67E5\u770B\u81EA\u5DF1\u53D1\u9001\u7684 Query\u3002\u82E5\u6307\u5B9A query id \u4E0D\u5B58\u5728\u6216\u65E0\u6743\u9650\uFF0C\u5219\u8FD4\u56DE Bad Request\uFF1A"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'{\n    "msg": "Bad Request", \n    "code": 403, \n    "data": "error messages",\n    "count": 0\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"examples-2",children:"Examples"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'GET /rest/v2/manager/query/profile/fragments/d7c93d9275334c35-9e6ac5f295a7134b\n\nResponse:\n{\n    "msg": "success",\n    "code": 0,\n    "data": [\n        {\n            "fragment_id": "0",\n            "time": "36.169ms",\n            "instance_id": {\n                "d7c93d9275334c35-9e6ac5f295a7134e": {\n                    "host": "172.19.0.4:9060",\n                    "active_time": "36.169ms"\n                }\n            }\n        },\n        {\n            "fragment_id": "1",\n            "time": "20.710ms",\n            "instance_id": {\n                "d7c93d9275334c35-9e6ac5f295a7134c": {\n                    "host": "172.19.0.5:9060",\n                    "active_time": "20.710ms"\n                }\n            }\n        },\n        {\n            "fragment_id": "2",\n            "time": "7.83ms",\n            "instance_id": {\n                "d7c93d9275334c35-9e6ac5f295a7134d": {\n                    "host": "172.19.0.6:9060",\n                    "active_time": "7.83ms"\n                },\n                "d7c93d9275334c35-9e6ac5f295a7134f": {\n                    "host": "172.19.0.7:9060",\n                    "active_time": "10.873ms"\n                }\n            }\n        }\n    ],\n    "count": 0\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"\u83B7\u53D6\u6307\u5B9A-query-id-\u6811\u72B6-profile-\u4FE1\u606F",children:"\u83B7\u53D6\u6307\u5B9A query id \u6811\u72B6 profile \u4FE1\u606F"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"GET /rest/v2/manager/query/profile/graph/{query_id}"})}),"\n",(0,i.jsx)(n.h3,{id:"description-4",children:"Description"}),"\n",(0,i.jsxs)(n.p,{children:["\u83B7\u53D6\u6307\u5B9A query id \u6811\u72B6 profile \u4FE1\u606F\uFF0C\u540C ",(0,i.jsx)(n.code,{children:"show query profile"})," \u6307\u4EE4\u3002"]}),"\n",(0,i.jsx)(n.h3,{id:"path-parameters-3",children:"Path parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"query_id"})}),"\n",(0,i.jsx)(n.p,{children:"query id."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"query-parameters-4",children:"Query parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"fragment_id"})," \u548C ",(0,i.jsx)(n.code,{children:"instance_id"})]}),"\n",(0,i.jsxs)(n.p,{children:["\u53EF\u9009\uFF0C\u8FD9\u4E24\u4E2A\u53C2\u6570\u9700\u540C\u65F6\u6307\u5B9A\u6216\u540C\u65F6\u4E0D\u6307\u5B9A\u3002",(0,i.jsx)(n.br,{}),"\n\u540C\u65F6\u4E0D\u6307\u5B9A\u5219\u8FD4\u56DE profile \u7B80\u6613\u6811\u5F62\u56FE\uFF0C\u76F8\u5F53\u4E8E",(0,i.jsx)(n.code,{children:"show query profile '/query_id'"}),";",(0,i.jsx)(n.br,{}),"\n\u540C\u65F6\u6307\u5B9A\u5219\u8FD4\u56DE\u6307\u5B9A instance \u8BE6\u7EC6 profile \u6811\u5F62\u56FE\uFF0C\u76F8\u5F53\u4E8E",(0,i.jsx)(n.code,{children:"show query profile '/query_id/fragment_id/instance_id'"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"is_all_node"})}),"\n",(0,i.jsx)(n.p,{children:"\u53EF\u9009\uFF0C\u82E5\u4E3A true \u5219\u5728\u6240\u6709 fe \u8282\u70B9\u4E2D\u67E5\u8BE2\u6307\u5B9A query id \u7684\u4FE1\u606F\uFF0C\u82E5\u4E3A false \u5219\u5728\u5F53\u524D\u8FDE\u63A5\u7684 fe \u8282\u70B9\u4E2D\u67E5\u8BE2\u6307\u5B9A query id \u7684\u4FE1\u606F\u3002\u9ED8\u8BA4\u4E3A true\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"response-4",children:"Response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'{\n    "msg": "success",\n    "code": 0,\n    "data": {\n        "graph":""\n    },\n    "count": 0\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"Admin \u548C Root \u7528\u6237\u53EF\u4EE5\u67E5\u770B\u6240\u6709 Query\u3002\u666E\u901A\u7528\u6237\u4EC5\u80FD\u67E5\u770B\u81EA\u5DF1\u53D1\u9001\u7684 Query\u3002\u82E5\u6307\u5B9A query id \u4E0D\u5B58\u5728\u6216\u65E0\u6743\u9650\uFF0C\u5219\u8FD4\u56DE Bad Request\uFF1A"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'{\n    "msg": "Bad Request", \n    "code": 403, \n    "data": "error messages",\n    "count": 0\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"\u6B63\u5728\u6267\u884C\u7684-query",children:"\u6B63\u5728\u6267\u884C\u7684 query"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"GET /rest/v2/manager/query/current_queries"})}),"\n",(0,i.jsx)(n.h3,{id:"description-5",children:"Description"}),"\n",(0,i.jsxs)(n.p,{children:["\u540C ",(0,i.jsx)(n.code,{children:'show proc "/current_query_stmts"'}),"\uFF0C\u8FD4\u56DE\u5F53\u524D\u6B63\u5728\u6267\u884C\u7684 query"]}),"\n",(0,i.jsx)(n.h3,{id:"path-parameters-4",children:"Path parameters"}),"\n",(0,i.jsx)(n.h3,{id:"query-parameters-5",children:"Query parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"is_all_node"})}),"\n",(0,i.jsx)(n.p,{children:"\u53EF\u9009\uFF0C\u82E5\u4E3A true \u5219\u8FD4\u56DE\u6240\u6709 FE \u8282\u70B9\u5F53\u524D\u6B63\u5728\u6267\u884C\u7684 query \u4FE1\u606F\u3002\u9ED8\u8BA4\u4E3A true\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"response-5",children:"Response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n	"msg": "success",\n	"code": 0,\n	"data": {\n		"columnNames": ["Frontend", "QueryId", "ConnectionId", "Database", "User", "ExecTime", "SqlHash", "Statement"],\n		"rows": [\n			["172.19.0.3", "108e47ab438a4560-ab1651d16c036491", "2", "", "root", "6074", "1a35f62f4b14b9d7961b057b77c3102f", "select sleep(60)"],\n			["172.19.0.11", "3606cad4e34b49c6-867bf6862cacc645", "3", "", "root", "9306", "1a35f62f4b14b9d7961b057b77c3102f", "select sleep(60)"]\n		]\n	},\n	"count": 0\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"\u53D6\u6D88-query",children:"\u53D6\u6D88 query"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"POST /rest/v2/manager/query/kill/{query_id}"})}),"\n",(0,i.jsx)(n.h3,{id:"description-6",children:"Description"}),"\n",(0,i.jsx)(n.p,{children:"\u53D6\u6D88\u6267\u884C\u8FDE\u63A5\u4E2D\u6B63\u5728\u6267\u884C\u7684 query"}),"\n",(0,i.jsx)(n.h3,{id:"path-parameters-5",children:"Path parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"{query_id}"})}),"\n",(0,i.jsx)(n.p,{children:"query id. \u4F60\u53EF\u4EE5\u901A\u8FC7 trace_id \u63A5\u53E3\uFF0C\u83B7\u53D6 query id\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"query-parameters-6",children:"Query parameters"}),"\n",(0,i.jsx)(n.h3,{id:"response-6",children:"Response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n    "msg": "success",\n    "code": 0,\n    "data": null,\n    "count": 0\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"\u901A\u8FC7-trace-id-\u83B7\u53D6\u67E5\u8BE2\u8FDB\u5EA6",children:"\u901A\u8FC7 Trace ID \u83B7\u53D6\u67E5\u8BE2\u8FDB\u5EA6"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"GET /rest/v2/manager/query/statistics/{trace_id}"})," (4.0.0+)"]}),"\n",(0,i.jsx)(n.h3,{id:"description-7",children:"Description"}),"\n",(0,i.jsx)(n.p,{children:"\u901A\u8FC7 Trace ID\uFF0C\u83B7\u53D6\u6307\u5B9A\u7684\u5F53\u524D\u6B63\u5728\u8FD0\u884C\u7684\u67E5\u8BE2\u7684\u7EDF\u8BA1\u4FE1\u606F\u3002\u53EF\u4EE5\u901A\u8FC7\u95F4\u9694\u8C03\u7528\u8FD9\u4E2A\u63A5\u53E3\u6765\u83B7\u53D6\u67E5\u8BE2\u7684\u8FDB\u5EA6\u3002"}),"\n",(0,i.jsx)(n.h3,{id:"path-parameters-6",children:"Path parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"{trace_id}"})}),"\n",(0,i.jsxs)(n.p,{children:["Trace ID\u3002\u901A\u8FC7 ",(0,i.jsx)(n.code,{children:'SET session_context="trace_id:xxxx"'})," \u8BBE\u7F6E\u7684\u7528\u6237\u81EA\u5B9A\u4E49 Trace ID\u3002"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"response-7",children:"Response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n    "msg": "success",\n    "code": 0,\n    "data": {\n        "scanRows": 1234567,\n        "scanBytes": 987654321,\n        "returnedRows": 12345,\n        "cpuMs": 15600,\n        "maxPeakMemoryBytes": 536870912,\n        "currentUsedMemoryBytes": 268435456,\n        "shuffleSendBytes": 104857600,\n        "shuffleSendRows": 50000,\n        "scanBytesFromLocalStorage": 734003200,\n        "scanBytesFromRemoteStorage": 253651121,\n        "spillWriteBytesToLocalStorage": 0,\n        "spillReadBytesFromLocalStorage": 0\n    },\n    "count": 0\n}\n'})})]})}function p(e={}){let{wrapper:n}={...(0,d.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},250065:function(e,n,r){r.d(n,{Z:function(){return l},a:function(){return c}});var s=r(667294);let i={},d=s.createContext(i);function c(e){let n=s.useContext(d);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),s.createElement(d.Provider,{value:n},e.children)}}}]);