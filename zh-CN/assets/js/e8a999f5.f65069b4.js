"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["185241"],{328041:function(n,e,s){s.r(e),s.d(e,{default:()=>u,frontMatter:()=>l,metadata:()=>r,assets:()=>o,toc:()=>c,contentTitle:()=>i});var r=JSON.parse('{"id":"sql-manual/sql-functions/window-functions/percent-rank","title":"PERCENT_RANK","description":"PERCENTRANK() \u662F\u4E00\u4E2A\u7A97\u53E3\u51FD\u6570\uFF0C\u7528\u4E8E\u8BA1\u7B97\u5206\u533A\u6216\u7ED3\u679C\u96C6\u4E2D\u884C\u7684\u76F8\u5BF9\u6392\u540D\uFF0C\u8FD4\u56DE\u503C\u8303\u56F4\u4ECE 0.0 \u5230 1.0\u3002\u5BF9\u4E8E\u7ED9\u5B9A\u7684\u884C\uFF0C\u5176\u8BA1\u7B97\u516C\u5F0F\u4E3A\uFF1A(rank - 1) / (totalrows - 1)\uFF0C\u5176\u4E2D rank \u662F\u5F53\u524D\u884C\u7684\u6392\u540D\uFF0Ctotalrows \u662F\u5206\u533A\u4E2D\u7684\u603B\u884C\u6570\u3002 \u5982\u679C\u672A\u663E\u793A\u6307\u5B9A\u7A97\u53E3\uFF0C","source":"@site/i18n/zh-CN/docusaurus-plugin-content-docs/version-4.x/sql-manual/sql-functions/window-functions/percent-rank.md","sourceDirName":"sql-manual/sql-functions/window-functions","slug":"/sql-manual/sql-functions/window-functions/percent-rank","permalink":"/zh-CN/docs/4.x/sql-manual/sql-functions/window-functions/percent-rank","draft":false,"unlisted":false,"tags":[],"version":"4.x","lastUpdatedAt":1770477659000,"frontMatter":{"title":"PERCENT_RANK","language":"zh-CN","description":"PERCENTRANK() \u662F\u4E00\u4E2A\u7A97\u53E3\u51FD\u6570\uFF0C\u7528\u4E8E\u8BA1\u7B97\u5206\u533A\u6216\u7ED3\u679C\u96C6\u4E2D\u884C\u7684\u76F8\u5BF9\u6392\u540D\uFF0C\u8FD4\u56DE\u503C\u8303\u56F4\u4ECE 0.0 \u5230 1.0\u3002\u5BF9\u4E8E\u7ED9\u5B9A\u7684\u884C\uFF0C\u5176\u8BA1\u7B97\u516C\u5F0F\u4E3A\uFF1A(rank - 1) / (totalrows - 1)\uFF0C\u5176\u4E2D rank \u662F\u5F53\u524D\u884C\u7684\u6392\u540D\uFF0Ctotalrows \u662F\u5206\u533A\u4E2D\u7684\u603B\u884C\u6570\u3002 \u5982\u679C\u672A\u663E\u793A\u6307\u5B9A\u7A97\u53E3\uFF0C"},"sidebar":"docs","previous":{"title":"NTILE","permalink":"/zh-CN/docs/4.x/sql-manual/sql-functions/window-functions/ntile"},"next":{"title":"RANK","permalink":"/zh-CN/docs/4.x/sql-manual/sql-functions/window-functions/rank"}}'),a=s("785893"),t=s("250065");let l={title:"PERCENT_RANK",language:"zh-CN",description:"PERCENTRANK() \u662F\u4E00\u4E2A\u7A97\u53E3\u51FD\u6570\uFF0C\u7528\u4E8E\u8BA1\u7B97\u5206\u533A\u6216\u7ED3\u679C\u96C6\u4E2D\u884C\u7684\u76F8\u5BF9\u6392\u540D\uFF0C\u8FD4\u56DE\u503C\u8303\u56F4\u4ECE 0.0 \u5230 1.0\u3002\u5BF9\u4E8E\u7ED9\u5B9A\u7684\u884C\uFF0C\u5176\u8BA1\u7B97\u516C\u5F0F\u4E3A\uFF1A(rank - 1) / (totalrows - 1)\uFF0C\u5176\u4E2D rank \u662F\u5F53\u524D\u884C\u7684\u6392\u540D\uFF0Ctotalrows \u662F\u5206\u533A\u4E2D\u7684\u603B\u884C\u6570\u3002 \u5982\u679C\u672A\u663E\u793A\u6307\u5B9A\u7A97\u53E3\uFF0C"},i=void 0,o={},c=[{value:"\u63CF\u8FF0",id:"\u63CF\u8FF0",level:2},{value:"\u8BED\u6CD5",id:"\u8BED\u6CD5",level:2},{value:"\u8FD4\u56DE\u503C",id:"\u8FD4\u56DE\u503C",level:2},{value:"\u4E3E\u4F8B",id:"\u4E3E\u4F8B",level:2}];function d(n){let e={code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.a)(),...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.h2,{id:"\u63CF\u8FF0",children:"\u63CF\u8FF0"}),"\n",(0,a.jsxs)(e.p,{children:["PERCENT_RANK() \u662F\u4E00\u4E2A\u7A97\u53E3\u51FD\u6570\uFF0C\u7528\u4E8E\u8BA1\u7B97\u5206\u533A\u6216\u7ED3\u679C\u96C6\u4E2D\u884C\u7684\u76F8\u5BF9\u6392\u540D\uFF0C\u8FD4\u56DE\u503C\u8303\u56F4\u4ECE 0.0 \u5230 1.0\u3002\u5BF9\u4E8E\u7ED9\u5B9A\u7684\u884C\uFF0C\u5176\u8BA1\u7B97\u516C\u5F0F\u4E3A\uFF1A(rank - 1) / (total_rows - 1)\uFF0C\u5176\u4E2D rank \u662F\u5F53\u524D\u884C\u7684\u6392\u540D\uFF0Ctotal_rows \u662F\u5206\u533A\u4E2D\u7684\u603B\u884C\u6570\u3002\n\u5982\u679C\u672A\u663E\u793A\u6307\u5B9A\u7A97\u53E3\uFF0C\u4F1A\u9690\u5F0F\u751F\u6210",(0,a.jsx)(e.code,{children:"RANGE BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW"})," \u7C7B\u578B\uFF0C\u4E14\u5F53\u524D\u4EC5\u652F\u6301\u6B64\u7C7B\u3002"]}),"\n",(0,a.jsx)(e.h2,{id:"\u8BED\u6CD5",children:"\u8BED\u6CD5"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-sql",children:"PERCENT_RANK()\n"})}),"\n",(0,a.jsx)(e.h2,{id:"\u8FD4\u56DE\u503C",children:"\u8FD4\u56DE\u503C"}),"\n",(0,a.jsx)(e.p,{children:"\u8FD4\u56DE DOUBLE \u7C7B\u578B\u7684\u6570\u503C\uFF0C\u8303\u56F4\u4ECE 0.0 \u5230 1.0\uFF1A"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"\u5BF9\u4E8E\u5206\u533A\u5185\u7684\u7B2C\u4E00\u884C\uFF0C\u59CB\u7EC8\u8FD4\u56DE 0"}),"\n",(0,a.jsx)(e.li,{children:"\u5BF9\u4E8E\u5206\u533A\u5185\u7684\u6700\u540E\u4E00\u884C\uFF0C\u59CB\u7EC8\u8FD4\u56DE 1"}),"\n",(0,a.jsx)(e.li,{children:"\u5BF9\u4E8E\u76F8\u540C\u7684\u503C\uFF0C\u8FD4\u56DE\u76F8\u540C\u7684\u767E\u5206\u6BD4\u6392\u540D"}),"\n"]}),"\n",(0,a.jsx)(e.h2,{id:"\u4E3E\u4F8B",children:"\u4E3E\u4F8B"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-sql",children:'CREATE TABLE test_percent_rank (\n    productLine VARCHAR,\n    orderYear INT,\n    orderValue DOUBLE,\n    percentile_rank DOUBLE\n) ENGINE=OLAP\nDISTRIBUTED BY HASH(`orderYear`) BUCKETS 4\nPROPERTIES (\n"replication_allocation" = "tag.location.default: 1"\n);\n'})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-sql",children:"INSERT INTO test_percent_rank (productLine, orderYear, orderValue, percentile_rank) VALUES\n('Motorcycles', 2003, 2440.50, 0.00),\n('Trains', 2003, 2770.95, 0.17),\n('Trucks and Buses', 2003, 3284.28, 0.33),\n('Vintage Cars', 2003, 4080.00, 0.50),\n('Planes', 2003, 4825.44, 0.67),\n('Ships', 2003, 5072.71, 0.83),\n('Classic Cars', 2003, 5571.80, 1.00),\n('Motorcycles', 2004, 2598.77, 0.00),\n('Vintage Cars', 2004, 2819.28, 0.17),\n('Planes', 2004, 2857.35, 0.33),\n('Ships', 2004, 4301.15, 0.50),\n('Trucks and Buses', 2004, 4615.64, 0.67),\n('Trains', 2004, 4646.88, 0.83),\n('Classic Cars', 2004, 8124.98, 1.00),\n('Ships', 2005, 1603.20, 0.00),\n('Motorcycles', 2005, 3774.00, 0.17),\n('Planes', 2005, 4018.00, 0.50),\n('Vintage Cars', 2005, 5346.50, 0.67),\n('Classic Cars', 2005, 5971.35, 0.83),\n('Trucks and Buses', 2005, 6295.03, 1.00);\n"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-sql",children:"SELECT\n    productLine,\n    orderYear,\n    orderValue,\n    ROUND(\n    PERCENT_RANK()\n    OVER (\n        PARTITION BY orderYear\n        ORDER BY orderValue\n    ),2) percentile_rank\nFROM\n    test_percent_rank\nORDER BY\n    orderYear;\n"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-text",children:"+------------------+-----------+------------+-----------------+\n| productLine      | orderYear | orderValue | percentile_rank |\n+------------------+-----------+------------+-----------------+\n| Motorcycles      |      2003 |     2440.5 |               0 |\n| Trains           |      2003 |    2770.95 |            0.17 |\n| Trucks and Buses |      2003 |    3284.28 |            0.33 |\n| Vintage Cars     |      2003 |       4080 |             0.5 |\n| Planes           |      2003 |    4825.44 |            0.67 |\n| Ships            |      2003 |    5072.71 |            0.83 |\n| Classic Cars     |      2003 |     5571.8 |               1 |\n| Motorcycles      |      2004 |    2598.77 |               0 |\n| Vintage Cars     |      2004 |    2819.28 |            0.17 |\n| Planes           |      2004 |    2857.35 |            0.33 |\n| Ships            |      2004 |    4301.15 |             0.5 |\n| Trucks and Buses |      2004 |    4615.64 |            0.67 |\n| Trains           |      2004 |    4646.88 |            0.83 |\n| Classic Cars     |      2004 |    8124.98 |               1 |\n| Ships            |      2005 |     1603.2 |               0 |\n| Motorcycles      |      2005 |       3774 |             0.2 |\n| Planes           |      2005 |       4018 |             0.4 |\n| Vintage Cars     |      2005 |     5346.5 |             0.6 |\n| Classic Cars     |      2005 |    5971.35 |             0.8 |\n| Trucks and Buses |      2005 |    6295.03 |               1 |\n+------------------+-----------+------------+-----------------+\n"})})]})}function u(n={}){let{wrapper:e}={...(0,t.a)(),...n.components};return e?(0,a.jsx)(e,{...n,children:(0,a.jsx)(d,{...n})}):d(n)}},250065:function(n,e,s){s.d(e,{Z:function(){return i},a:function(){return l}});var r=s(667294);let a={},t=r.createContext(a);function l(n){let e=r.useContext(t);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function i(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(a):n.components||a:l(n.components),r.createElement(t.Provider,{value:e},n.children)}}}]);