"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["790636"],{128033:function(e,n,s){s.r(n),s.d(n,{default:()=>a,frontMatter:()=>o,metadata:()=>r,assets:()=>c,toc:()=>t,contentTitle:()=>d});var r=JSON.parse('{"id":"developer-guide/docker-dev","title":"Doris Docker \u5FEB\u901F\u642D\u5EFA\u5F00\u53D1\u73AF\u5883","description":"\x3c!--","source":"@site/i18n/zh-CN/docusaurus-plugin-content-docs-community/current/developer-guide/docker-dev.md","sourceDirName":"developer-guide","slug":"/developer-guide/docker-dev","permalink":"/zh-CN/community/developer-guide/docker-dev","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Doris Docker \u5FEB\u901F\u642D\u5EFA\u5F00\u53D1\u73AF\u5883","language":"zh-CN"},"sidebar":"community","previous":{"title":"\u8C03\u8BD5\u5DE5\u5177","permalink":"/zh-CN/community/developer-guide/debug-tool"},"next":{"title":"Doris BE\u5B58\u50A8\u5C42Benchmark\u5DE5\u5177","permalink":"/zh-CN/community/developer-guide/benchmark-tool"}}'),i=s("785893"),l=s("250065");let o={title:"Doris Docker \u5FEB\u901F\u642D\u5EFA\u5F00\u53D1\u73AF\u5883",language:"zh-CN"},d="Doris Docker \u5FEB\u901F\u642D\u5EFA\u5F00\u53D1\u73AF\u5883",c={},t=[{value:"\u76F8\u5173\u8BE6\u7EC6\u6587\u6863\u5BFC\u822A",id:"\u76F8\u5173\u8BE6\u7EC6\u6587\u6863\u5BFC\u822A",level:2},{value:"\u73AF\u5883\u51C6\u5907",id:"\u73AF\u5883\u51C6\u5907",level:2},{value:"\u6784\u5EFA\u955C\u50CF",id:"\u6784\u5EFA\u955C\u50CF",level:2},{value:"\u7F16\u8BD1",id:"\u7F16\u8BD1",level:2},{value:"\u8FD0\u884C",id:"\u8FD0\u884C",level:2}];function h(e){let n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"doris-docker-\u5FEB\u901F\u642D\u5EFA\u5F00\u53D1\u73AF\u5883",children:"Doris Docker \u5FEB\u901F\u642D\u5EFA\u5F00\u53D1\u73AF\u5883"})}),"\n",(0,i.jsx)(n.h2,{id:"\u76F8\u5173\u8BE6\u7EC6\u6587\u6863\u5BFC\u822A",children:"\u76F8\u5173\u8BE6\u7EC6\u6587\u6863\u5BFC\u822A"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/docs/install/source-install/compilation",children:"\u4F7F\u7528 Docker \u5F00\u53D1\u955C\u50CF\u7F16\u8BD1"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/docs/install/install-deploy",children:"\u90E8\u7F72"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/zh-CN/community/developer-guide/be-vscode-dev",children:"VSCode Be \u5F00\u53D1\u8C03\u8BD5"})}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"\u73AF\u5883\u51C6\u5907",children:"\u73AF\u5883\u51C6\u5907"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u5B89\u88C5 Docker"}),"\n",(0,i.jsxs)(n.li,{children:["VSCode\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Remote \u63D2\u4EF6"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"\u6784\u5EFA\u955C\u50CF",children:"\u6784\u5EFA\u955C\u50CF"}),"\n",(0,i.jsx)(n.p,{children:"\u521B\u5EFA dockerfile"}),"\n",(0,i.jsx)(n.p,{children:"VSCode \u4E2D\u4F7F\u7528 Ctrl-d \u66FF\u6362\u6389\u6240\u6709\u7684"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"<!!! your user !!!>"}),"\n",(0,i.jsx)(n.li,{children:"<!!! your user password !!!>"}),"\n",(0,i.jsx)(n.li,{children:"<!!! root password !!!>"}),"\n",(0,i.jsx)(n.li,{children:"<!!! your git email !!!>"}),"\n",(0,i.jsx)(n.li,{children:"<!!! your git username !!!>"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dockerfile",children:'FROM apache/incubator-doris:build-env-latest\n\nUSER root\nWORKDIR /root\nRUN echo \'<!!! root password !!!>\' | passwd root --stdin\n\nRUN yum install -y vim net-tools man wget git mysql lsof bash-completion \\\n        && cp /var/local/thirdparty/installed/bin/thrift /usr/bin\n\n# \u66F4\u5B89\u5168\u7684\u4F7F\u7528\uFF0C\u521B\u5EFA\u7528\u6237\u800C\u4E0D\u662F\u4F7F\u7528 root\nRUN yum install -y sudo \\\n        && useradd -ms /bin/bash <!!! your user !!!> && echo <!!! your user password !!!> | passwd <!!! your user !!!> --stdin \\\n        && usermod -a -G wheel <!!! your user !!!>\n\nUSER <!!! your user !!!>\nWORKDIR /home/<!!! your user !!!>\nRUN git config --global color.ui true \\\n        && git config --global user.email "<!!! your git email !!!>" \\\n        && git config --global user.name "<!!! your git username !!!>"\n\n# \u6309\u9700\u5B89\u88C5 zsh and oh my zsh, \u66F4\u6613\u4E8E\u4F7F\u7528\uFF0C\u4E0D\u9700\u8981\u7684\u79FB\u9664\nUSER root\nRUN yum install -y zsh \\\n        && chsh -s /bin/zsh <!!! your user !!!>\nUSER <!!! your user !!!>\nRUN wget https://github.com/robbyrussell/oh-my-zsh/raw/master/tools/install.sh -O - | zsh \\\n        && git clone https://github.com/zsh-users/zsh-autosuggestions ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-autosuggestions \\\n        && git clone https://github.com/zsh-users/zsh-syntax-highlighting.git ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-syntax-highlighting\n'})}),"\n",(0,i.jsx)(n.p,{children:"\u8FD0\u884C\u6784\u5EFA\u547D\u4EE4"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"docker build -t doris .\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u8FD0\u884C\u955C\u50CF"}),"\n",(0,i.jsxs)(n.p,{children:["\u6B64\u5904\u6309\u9700\u6CE8\u610F ",(0,i.jsx)(n.a,{href:"/zh-CN/community/source-install/compilation-with-docker",children:"\u6302\u8F7D\u7684\u95EE\u9898"}),"\u3002"]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"\u89C1\u94FE\u63A5\u4E2D\uFF1A\u5EFA\u8BAE\u4EE5\u6302\u8F7D\u672C\u5730 Doris \u6E90\u7801\u76EE\u5F55\u7684\u65B9\u5F0F\u8FD0\u884C\u955C\u50CF ....."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u7531\u4E8E\u5982\u679C\u662F\u4F7F\u7528 windows \u5F00\u53D1\uFF0C\u6302\u8F7D\u4F1A\u5B58\u5728\u8DE8\u6587\u4EF6\u7CFB\u7EDF\u8BBF\u95EE\u7684\u95EE\u9898\uFF0C\u8BF7\u81EA\u884C\u659F\u914C\u8BBE\u7F6E\u3002"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"--cap-add SYS_PTRACE"}),"\u53C2\u6570\u53EF\u4EE5\u5141\u8BB8docker\u4F7F\u7528ptrace\uFF0C\u4FBF\u4E8E\u6211\u4EEC\u4F7F\u7528ptrace\u548Cgdb\u8FDC\u7A0B\u8C03\u8BD5\u529F\u80FD\u3002"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"docker run -it --cap-add SYS_PTRACE doris:latest /bin/bash\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u5982\u679C\u9009\u62E9\u5B89\u88C5\u4E86 zsh\n\u8FD0\u884C \u5BB9\u5668\u540E\uFF0C\u5728 ~/.zshrc \u66FF\u6362 plugins \u4E3A"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"plugins=(git zsh-autosuggestions zsh-syntax-highlighting)\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u521B\u5EFA\u76EE\u5F55\u5E76\u4E0B\u8F7D doris"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"su <your user>\nmkdir code && cd code\ngit clone https://github.com/apache/doris.git\ncd doris\ngit submodule update --init --recursive\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\u7F16\u8BD1",children:"\u7F16\u8BD1"}),"\n",(0,i.jsx)(n.p,{children:"\u6CE8\u610F:"}),"\n",(0,i.jsx)(n.p,{children:"\u7B2C\u4E00\u6B21\u7F16\u8BD1\u7684\u65F6\u5019\u8981\u4F7F\u7528\u5982\u4E0B\u547D\u4EE4"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"sh build.sh --clean --be --fe --ui\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u8FD9\u662F\u56E0\u4E3A build-env-for-0.15.0 \u7248\u672C\u955C\u50CF\u5347\u7EA7\u4E86 thrift(0.9 -> 0.13)\uFF0C\u9700\u8981\u901A\u8FC7 --clean \u547D\u4EE4\u5F3A\u5236\u4F7F\u7528\u65B0\u7248\u672C\u7684 thrift \u751F\u6210\u4EE3\u7801\u6587\u4EF6\uFF0C\u5426\u5219\u4F1A\u51FA\u73B0\u4E0D\u517C\u5BB9\u7684\u4EE3\u7801\u3002\uFF1A"}),"\n",(0,i.jsx)(n.p,{children:"\u7F16\u8BD1 Doris"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"sh build.sh\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\u8FD0\u884C",children:"\u8FD0\u884C"}),"\n",(0,i.jsxs)(n.p,{children:["\u624B\u52A8\u521B\u5EFA ",(0,i.jsx)(n.code,{children:"meta_dir"})," \u5143\u6570\u636E\u5B58\u653E\u4F4D\u7F6E, \u9ED8\u8BA4\u503C\u4E3A ",(0,i.jsx)(n.code,{children:"${DORIS_HOME}/doris-meta"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"mkdir meta_dir\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u542F\u52A8FE"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"cd output/fe\nsh bin/start_fe.sh --daemon\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u542F\u52A8BE"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"cd output/be\nsh bin/start_be.sh --daemon\n"})}),"\n",(0,i.jsx)(n.p,{children:"mysql-client \u8FDE\u63A5"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"mysql -h 127.0.0.1 -P 9030 -u root\n"})})]})}function a(e={}){let{wrapper:n}={...(0,l.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},250065:function(e,n,s){s.d(n,{Z:function(){return d},a:function(){return o}});var r=s(667294);let i={},l=r.createContext(i);function o(e){let n=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);