"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["416563"],{866576:function(e,n,t){t.r(n),t.d(n,{default:()=>u,frontMatter:()=>a,metadata:()=>s,assets:()=>l,toc:()=>o,contentTitle:()=>c});var s=JSON.parse('{"id":"sql-manual/sql-functions/ai-functions/distance-functions/embed","title":"EMBED","description":"\u6839\u636E\u8F93\u5165\u6587\u672C\u751F\u6210\u8BED\u4E49\u5D4C\u5165\u5411\u91CF\uFF0C\u7528\u4E8E\u8868\u793A\u6587\u672C\u7684\u8BED\u4E49\u4FE1\u606F\uFF0C\u53EF\u7528\u4E8E\u76F8\u4F3C\u5EA6\u8BA1\u7B97\u3001\u68C0\u7D22\u7B49\u573A\u666F\u3002","source":"@site/i18n/zh-CN/docusaurus-plugin-content-docs/current/sql-manual/sql-functions/ai-functions/distance-functions/embed.md","sourceDirName":"sql-manual/sql-functions/ai-functions/distance-functions","slug":"/sql-manual/sql-functions/ai-functions/distance-functions/embed","permalink":"/zh-CN/docs/dev/sql-manual/sql-functions/ai-functions/distance-functions/embed","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1770477659000,"frontMatter":{"title":"EMBED","language":"zh-CN","description":"\u6839\u636E\u8F93\u5165\u6587\u672C\u751F\u6210\u8BED\u4E49\u5D4C\u5165\u5411\u91CF\uFF0C\u7528\u4E8E\u8868\u793A\u6587\u672C\u7684\u8BED\u4E49\u4FE1\u606F\uFF0C\u53EF\u7528\u4E8E\u76F8\u4F3C\u5EA6\u8BA1\u7B97\u3001\u68C0\u7D22\u7B49\u573A\u666F\u3002"},"sidebar":"docs","previous":{"title":"L2_DISTANCE","permalink":"/zh-CN/docs/dev/sql-manual/sql-functions/ai-functions/distance-functions/l2-distance"},"next":{"title":"\u7EFC\u8FF0","permalink":"/zh-CN/docs/dev/sql-manual/sql-functions/ai-functions/overview"}}'),i=t("785893"),r=t("250065");let a={title:"EMBED",language:"zh-CN",description:"\u6839\u636E\u8F93\u5165\u6587\u672C\u751F\u6210\u8BED\u4E49\u5D4C\u5165\u5411\u91CF\uFF0C\u7528\u4E8E\u8868\u793A\u6587\u672C\u7684\u8BED\u4E49\u4FE1\u606F\uFF0C\u53EF\u7528\u4E8E\u76F8\u4F3C\u5EA6\u8BA1\u7B97\u3001\u68C0\u7D22\u7B49\u573A\u666F\u3002"},c=void 0,l={},o=[{value:"\u63CF\u8FF0",id:"\u63CF\u8FF0",level:2},{value:"\u8BED\u6CD5",id:"\u8BED\u6CD5",level:2},{value:"\u53C2\u6570",id:"\u53C2\u6570",level:2},{value:"\u8FD4\u56DE\u503C",id:"\u8FD4\u56DE\u503C",level:2},{value:"\u793A\u4F8B",id:"\u793A\u4F8B",level:2}];function d(e){let n={code:"code",float:"float",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"\u63CF\u8FF0",children:"\u63CF\u8FF0"}),"\n",(0,i.jsx)(n.p,{children:"\u6839\u636E\u8F93\u5165\u6587\u672C\u751F\u6210\u8BED\u4E49\u5D4C\u5165\u5411\u91CF\uFF0C\u7528\u4E8E\u8868\u793A\u6587\u672C\u7684\u8BED\u4E49\u4FE1\u606F\uFF0C\u53EF\u7528\u4E8E\u76F8\u4F3C\u5EA6\u8BA1\u7B97\u3001\u68C0\u7D22\u7B49\u573A\u666F\u3002"}),"\n",(0,i.jsx)(n.h2,{id:"\u8BED\u6CD5",children:"\u8BED\u6CD5"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"EMBED([<resource_name>], <text>)\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\u53C2\u6570",children:"\u53C2\u6570"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u53C2\u6570"}),(0,i.jsx)(n.th,{children:"\u8BF4\u660E"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"<resource_name>"})}),(0,i.jsx)(n.td,{children:"\u6307\u5B9A\u7684\u8D44\u6E90\u540D\u79F0"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"<text>"})}),(0,i.jsx)(n.td,{children:"\u751F\u6210\u5D4C\u5165\u5411\u91CF\u7684\u6587\u672C"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"\u8FD4\u56DE\u503C",children:"\u8FD4\u56DE\u503C"}),"\n",(0,i.jsxs)(n.p,{children:["\u8FD4\u56DE\u7C7B\u578B\u4E3A ARRAY",(0,i.jsx)(n.float,{children:" \u4EE3\u8868\u6240\u751F\u6210\u7684\u5411\u91CF"})]}),"\n",(0,i.jsx)(n.p,{children:"\u5F53\u8F93\u5165\u503C\u4E3A NULL \u65F6\u8FD4\u56DE NULL"}),"\n",(0,i.jsx)(n.p,{children:"\u7ED3\u679C\u4E3A\u5927\u6A21\u578B\u751F\u6210\uFF0C\u6240\u4EE5\u8FD4\u56DE\u5185\u5BB9\u5E76\u4E0D\u56FA\u5B9A"}),"\n",(0,i.jsx)(n.h2,{id:"\u793A\u4F8B",children:"\u793A\u4F8B"}),"\n",(0,i.jsx)(n.p,{children:"\u4E0B\u8868\u6A21\u62DF\u67D0\u516C\u53F8\u7684\u884C\u4E3A\u624B\u518C"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:'CREATE TABLE knowledge_base (\n    id BIGINT,\n    title STRING,\n    content STRING,\n    embedding ARRAY<FLOAT> COMMENT \'\u7531 EMBED \u51FD\u6570\u751F\u6210\u7684\u5D4C\u5165\u5411\u91CF\'\n)\nDUPLICATE KEY(id)\nDISTRIBUTED BY HASH(id) BUCKETS 4\nPROPERTIES (\n    "replication_num" = "1"\n);\n\nSET default_ai_resource = \'embed_resource_name\';\n\n-- `embedding` \u662F\u51FD\u6570 EMBED \u6839\u636E content \u5BF9\u5E94\u7684\u6807\u7B7E\u6240\u751F\u6210\u7684\u5D4C\u5165\u5411\u91CF\nINSERT INTO knowledge_base (id, title, content, embedding) VALUES\n(1, "Travel Reimbursement Policy",\n    "Employees must submit a reimbursement request within 7 days after the business trip, with invoices and travel approval attached.",\n    EMBED("travel reimbursement policy")),\n(2, "Leave Policy",\n    "Employees must apply for leave in the system in advance. If the leave is longer than three days, approval from the direct manager is required.",\n    EMBED("leave request policy")),\n(3, "VPN User Guide",\n    "To access the internal network, employees must use VPN. For the first login, download and install the client and configure the certificate.",\n    EMBED("VPN guide intranet access")),\n(4, "Meeting Room Reservation",\n    "Meeting rooms can be reserved in advance through the OA system, with time and number of participants specified.",\n    EMBED("meeting room booking reservation")),\n(5, "Procurement Request Process",\n    "Departments must fill out a procurement request form for purchasing items. If the amount exceeds $5000, financial approval is required.",\n    EMBED("procurement request process finance"));\n'})}),"\n",(0,i.jsx)(n.p,{children:"\u901A\u8FC7\u5BF9\u6587\u672C\u7684\u5411\u91CF\u5316\u5904\u7406\uFF0C\u53EF\u4EE5\u8FDB\u884C\u7C7B\u4F3C\u4E0B\u5217\u64CD\u4F5C\uFF1A"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\u95EE\u7B54\u68C0\u7D22(\u7ED3\u5408 ",(0,i.jsx)(n.code,{children:"COSINE_DISTANCE"}),")"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:'SELECT \n    id, title, content,\n    COSINE_DISTANCE(embedding, EMBED("How to apply for travel reimbursement?")) AS score\nFROM knowledge_base\nORDER BY score ASC\nLIMIT 2;\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-text",children:"+------+-----------------------------+-----------------------------------------------------------------------------------------------------------------------------------------+--------------------+\n| id   | title                       | content                                                                                                                                 | score              |\n+------+-----------------------------+-----------------------------------------------------------------------------------------------------------------------------------------+--------------------+\n|    1 | Travel Reimbursement Policy | Employees must submit a reimbursement request within 7 days after the business trip, with invoices and travel approval attached.        | 0.4463210454563673 |\n|    5 | Procurement Request Process | Departments must fill out a procurement request form for purchasing items. If the amount exceeds $5000, financial approval is required. | 0.5726841578491431 |\n+------+-----------------------------+-----------------------------------------------------------------------------------------------------------------------------------------+--------------------+\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsxs)(n.li,{children:["\u95EE\u9898\u5206\u6790\u5339\u914D(\u7ED3\u5408 ",(0,i.jsx)(n.code,{children:"L2_DISTANCE"}),")"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:'SELECT \n    id, title, content,\n    L2_DISTANCE(embedding, EMBED("How to access the company intranet")) AS distance\nFROM knowledge_base\nORDER BY distance ASC\nLIMIT 2;\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-text",children:"+------+-----------------------------+---------------------------------------------------------------------------------------------------------------------------------------------+--------------------+\n| id   | title                       | content                                                                                                                                     | distance           |\n+------+-----------------------------+---------------------------------------------------------------------------------------------------------------------------------------------+--------------------+\n|    3 | VPN User Guide              | To access the internal network, employees must use VPN. For the first login, download and install the client and configure the certificate. | 0.5838271122253775 |\n|    1 | Travel Reimbursement Policy | Employees must submit a reimbursement request within 7 days after the business trip, with invoices and travel approval attached.            |  1.272394695975331 |\n+------+-----------------------------+---------------------------------------------------------------------------------------------------------------------------------------------+--------------------+\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsxs)(n.li,{children:["\u6839\u636E\u6587\u7AE0\u5185\u5BB9\u8FDB\u884C\u6587\u672C\u76F8\u5173\u5EA6\u5339\u914D\u5E76\u63A8\u8350(\u7ED3\u5408",(0,i.jsx)(n.code,{children:"INNER PRODUCT"}),")"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:'SELECT \n    id, title, content,\n    INNER_PRODUCT(embedding, EMBED("Leave system request leader approval")) AS score\nFROM knowledge_base\nWHERE id != 2\nORDER BY score DESC\nLIMIT 2;\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-text",children:"+------+-----------------------------+-----------------------------------------------------------------------------------------------------------------------------------------+---------------------+\n| id   | title                       | content                                                                                                                                 | score               |\n+------+-----------------------------+-----------------------------------------------------------------------------------------------------------------------------------------+---------------------+\n|    5 | Procurement Request Process | Departments must fill out a procurement request form for purchasing items. If the amount exceeds $5000, financial approval is required. |    0.33268885332504 |\n|    4 | Meeting Room Reservation    | Meeting rooms can be reserved in advance through the OA system, with time and number of participants specified.                         | 0.29224032230852487 |\n+------+-----------------------------+-----------------------------------------------------------------------------------------------------------------------------------------+---------------------+\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"4",children:["\n",(0,i.jsxs)(n.li,{children:["\u5BFB\u627E\u5DEE\u5F02\u8F83\u5C0F\u7684\u5185\u5BB9(\u7ED3\u5408",(0,i.jsx)(n.code,{children:"L1_DISTANCE"}),")"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:'SELECT \n    id, title, content,\n    L1_DISTANCE(embedding, EMBED("Procurement application process")) AS distance\nFROM knowledge_base\nORDER BY distance ASC\nLIMIT 3;\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-text",children:"+------+-----------------------------+------------------------------------------------------------------------------------------------------------------------------------------------+--------------------+\n| id   | title                       | content                                                                                                                                        | distance           |\n+------+-----------------------------+------------------------------------------------------------------------------------------------------------------------------------------------+--------------------+\n|    5 | Procurement Request Process | Departments must fill out a procurement request form for purchasing items. If the amount exceeds $5000, financial approval is required.        |  18.66882028897362 |\n|    4 | Meeting Room Reservation    | Meeting rooms can be reserved in advance through the OA system, with time and number of participants specified.                                |  30.90449328294426 |\n|    2 | Leave Policy                | Employees must apply for leave in the system in advance. If the leave is longer than three days, approval from the direct manager is required. | 31.060405636536416 |\n+------+-----------------------------+------------------------------------------------------------------------------------------------------------------------------------------------+--------------------+\n"})})]})}function u(e={}){let{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},250065:function(e,n,t){t.d(n,{Z:function(){return c},a:function(){return a}});var s=t(667294);let i={},r=s.createContext(i);function a(e){let n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);