"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["20208"],{855548:function(e,n,t){t.r(n),t.d(n,{default:()=>a,frontMatter:()=>r,metadata:()=>l,assets:()=>c,toc:()=>h,contentTitle:()=>d});var l=JSON.parse('{"id":"observability/log","title":"Log","description":"\u672C\u6587\u4ECB\u7ECD\u53EF\u89C2\u6D4B\u6027\u6838\u5FC3\u6570\u636E\u4E4B\u4E00 Log \u7684\u5B58\u50A8\u548C\u5206\u6790\u5B9E\u8DF5\uFF0C\u53EF\u89C2\u6D4B\u6027\u6574\u4F53\u65B9\u6848\u4ECB\u7ECD\u8BF7\u53C2\u8003\u6982\u8FF0\u3002","source":"@site/i18n/zh-CN/docusaurus-plugin-content-docs/version-4.x/observability/log.md","sourceDirName":"observability","slug":"/observability/log","permalink":"/zh-CN/docs/4.x/observability/log","draft":false,"unlisted":false,"tags":[],"version":"4.x","lastUpdatedAt":1770477659000,"frontMatter":{"title":"Log","language":"zh-CN","description":"\u672C\u6587\u4ECB\u7ECD\u53EF\u89C2\u6D4B\u6027\u6838\u5FC3\u6570\u636E\u4E4B\u4E00 Log \u7684\u5B58\u50A8\u548C\u5206\u6790\u5B9E\u8DF5\uFF0C\u53EF\u89C2\u6D4B\u6027\u6574\u4F53\u65B9\u6848\u4ECB\u7ECD\u8BF7\u53C2\u8003\u6982\u8FF0\u3002"},"sidebar":"docs","previous":{"title":"\u6982\u8FF0","permalink":"/zh-CN/docs/4.x/observability/overview"},"next":{"title":"Trace","permalink":"/zh-CN/docs/4.x/observability/trace"}}'),s=t("785893"),i=t("250065");let r={title:"Log",language:"zh-CN",description:"\u672C\u6587\u4ECB\u7ECD\u53EF\u89C2\u6D4B\u6027\u6838\u5FC3\u6570\u636E\u4E4B\u4E00 Log \u7684\u5B58\u50A8\u548C\u5206\u6790\u5B9E\u8DF5\uFF0C\u53EF\u89C2\u6D4B\u6027\u6574\u4F53\u65B9\u6848\u4ECB\u7ECD\u8BF7\u53C2\u8003\u6982\u8FF0\u3002"},d=void 0,c={},h=[{value:"\u7B2C 1 \u6B65\uFF1A\u8BC4\u4F30\u8D44\u6E90",id:"\u7B2C-1-\u6B65\u8BC4\u4F30\u8D44\u6E90",level:2},{value:"\u7B2C 2 \u6B65\uFF1A\u90E8\u7F72\u96C6\u7FA4",id:"\u7B2C-2-\u6B65\u90E8\u7F72\u96C6\u7FA4",level:2},{value:"\u7B2C 3 \u6B65\uFF1A\u4F18\u5316 FE \u548C BE \u914D\u7F6E",id:"\u7B2C-3-\u6B65\u4F18\u5316-fe-\u548C-be-\u914D\u7F6E",level:2},{value:"\u7B2C 4 \u6B65\uFF1A\u5EFA\u8868",id:"\u7B2C-4-\u6B65\u5EFA\u8868",level:2},{value:"\u7B2C 5 \u6B65\uFF1A\u91C7\u96C6\u65E5\u5FD7",id:"\u7B2C-5-\u6B65\u91C7\u96C6\u65E5\u5FD7",level:2},{value:"\u7B2C 6 \u6B65\uFF1A\u67E5\u8BE2\u548C\u5206\u6790\u65E5\u5FD7",id:"\u7B2C-6-\u6B65\u67E5\u8BE2\u548C\u5206\u6790\u65E5\u5FD7",level:2}];function x(e){let n={a:"a",br:"br",code:"code",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["\u672C\u6587\u4ECB\u7ECD\u53EF\u89C2\u6D4B\u6027\u6838\u5FC3\u6570\u636E\u4E4B\u4E00 Log \u7684\u5B58\u50A8\u548C\u5206\u6790\u5B9E\u8DF5\uFF0C\u53EF\u89C2\u6D4B\u6027\u6574\u4F53\u65B9\u6848\u4ECB\u7ECD\u8BF7\u53C2\u8003",(0,s.jsx)(n.a,{href:"overview",children:"\u6982\u8FF0"}),"\u3002"]}),"\n",(0,s.jsx)(n.h2,{id:"\u7B2C-1-\u6B65\u8BC4\u4F30\u8D44\u6E90",children:"\u7B2C 1 \u6B65\uFF1A\u8BC4\u4F30\u8D44\u6E90"}),"\n",(0,s.jsx)(n.p,{children:"\u5728\u90E8\u7F72\u96C6\u7FA4\u4E4B\u524D\uFF0C\u9996\u5148\u5E94\u8BC4\u4F30\u6240\u9700\u670D\u52A1\u5668\u786C\u4EF6\u8D44\u6E90\uFF0C\u5305\u62EC\u4EE5\u4E0B\u51E0\u4E2A\u5173\u952E\u6B65\u9AA4\uFF1A"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u8BC4\u4F30\u5199\u5165\u8D44\u6E90"}),"\uFF1A\u8BA1\u7B97\u516C\u5F0F\u5982\u4E0B\uFF1A"]}),"\n"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"\u5E73\u5747\u5199\u5165\u541E\u5410 = \u65E5\u589E\u6570\u636E\u91CF / 86400 s"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"\u5CF0\u503C\u5199\u5165\u541E\u5410 = \u5E73\u5747\u5199\u5165\u541E\u5410 * \u5199\u5165\u541E\u5410\u5CF0\u503C / \u5747\u503C\u6BD4"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"\u5CF0\u503C\u5199\u5165\u6240\u9700 CPU \u6838\u6570 = \u5CF0\u503C\u5199\u5165\u541E\u5410 / \u5355\u6838\u5199\u5165\u541E\u5410"})}),"\n"]}),"\n",(0,s.jsxs)(n.ol,{start:"2",children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u8BC4\u4F30\u5B58\u50A8\u8D44\u6E90"}),"\uFF1A\u8BA1\u7B97\u516C\u5F0F\u4E3A ",(0,s.jsx)(n.code,{children:"\u6240\u9700\u5B58\u50A8\u7A7A\u95F4 = \u65E5\u589E\u6570\u636E\u91CF / \u538B\u7F29\u7387 * \u526F\u672C\u6570 * \u6570\u636E\u5B58\u50A8\u5468\u671F"})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u8BC4\u4F30\u67E5\u8BE2\u8D44\u6E90"}),"\uFF1A\u67E5\u8BE2\u7684\u8D44\u6E90\u6D88\u8017\u968F\u67E5\u8BE2\u91CF\u548C\u590D\u6742\u5EA6\u800C\u5F02\uFF0C\u5EFA\u8BAE\u521D\u59CB\u9884\u7559 50% \u7684 CPU \u8D44\u6E90\u7528\u4E8E\u67E5\u8BE2\uFF0C\u518D\u6839\u636E\u5B9E\u9645\u6D4B\u8BD5\u60C5\u51B5\u8FDB\u884C\u8C03\u6574\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u6C47\u603B\u6574\u5408\u8D44\u6E90"}),"\uFF1A\u7531\u7B2C 1 \u6B65\u548C\u7B2C 3 \u6B65\u4F30\u7B97\u51FA\u6240\u9700 CPU \u6838\u6570\u540E\uFF0C\u9664\u4EE5\u5355\u673A CPU \u6838\u6570\uFF0C\u4F30\u7B97\u51FA BE \u670D\u52A1\u5668\u6570\u91CF\uFF0C\u518D\u6839\u636E BE \u670D\u52A1\u5668\u6570\u91CF\u548C\u7B2C 2 \u6B65\u7684\u7ED3\u679C\uFF0C\u4F30\u7B97\u51FA\u6BCF\u53F0 BE \u670D\u52A1\u5668\u6240\u9700\u5B58\u50A8\u7A7A\u95F4\uFF0C\u7136\u540E\u5206\u644A\u5230 4\uFF5E12 \u5757\u6570\u636E\u76D8\uFF0C\u8BA1\u7B97\u51FA\u5355\u76D8\u5B58\u50A8\u5BB9\u91CF\u3002"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"\u4EE5\u6BCF\u5929\u65B0\u589E 100 TB \u6570\u636E\u91CF\uFF08\u538B\u7F29\u524D\uFF09\u30015 \u500D\u538B\u7F29\u7387\u30012 \u526F\u672C\u3001\u70ED\u6570\u636E\u5B58\u50A8 3 \u5929\u3001\u51B7\u6570\u636E\u5B58\u50A8 30 \u5929\u3001\u5199\u5165\u541E\u5410\u5CF0\u503C / \u5747\u503C\u6BD4 200%\u3001\u5355\u6838\u5199\u5165\u541E\u5410 10 MB/s\u3001\u67E5\u8BE2\u9884\u7559 50% CPU \u8D44\u6E90\u4E3A\u4F8B\uFF0C\u53EF\u4F30\u7B97\u51FA\uFF1A"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u5B58\u7B97\u4E00\u4F53\u6A21\u5F0F"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"FE\uFF1A3 \u53F0\u670D\u52A1\u5668\uFF0C\u6BCF\u53F0\u914D\u7F6E 16 \u6838 CPU\u300164 GB \u5185\u5B58\u30011 \u5757 100 GB SSD \u76D8"}),"\n",(0,s.jsx)(n.li,{children:"BE\uFF1A30 \u53F0\u670D\u52A1\u5668\uFF0C\u6BCF\u53F0\u914D\u7F6E 32 \u6838 CPU\u3001256 GB \u5185\u5B58\u30018 \u5757 625 GB SSD \u76D8"}),"\n",(0,s.jsx)(n.li,{children:"S3 \u5BF9\u8C61\u5B58\u50A8\u7A7A\u95F4\uFF1A\u5373\u4E3A\u9884\u4F30\u51B7\u6570\u636E\u5B58\u50A8\u7A7A\u95F4\uFF0C540 TB"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u5B58\u7B97\u5206\u79BB\u6A21\u5F0F"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"FE\uFF1A3 \u53F0\u670D\u52A1\u5668\uFF0C\u6BCF\u53F0\u914D\u7F6E 16 \u6838 CPU\u300164 GB \u5185\u5B58\u30011 \u5757 100 GB SSD \u76D8"}),"\n",(0,s.jsx)(n.li,{children:"BE\uFF1A15 \u53F0\u670D\u52A1\u5668\uFF0C\u6BCF\u53F0\u914D\u7F6E 32 \u6838 CPU\u3001256 GB \u5185\u5B58\u30018 \u5757 680 GB SSD \u76D8"}),"\n",(0,s.jsx)(n.li,{children:"S3 \u5BF9\u8C61\u5B58\u50A8\u7A7A\u95F4\uFF1A\u5373\u4E3A\u9884\u4F30\u51B7\u6570\u636E\u5B58\u50A8\u7A7A\u95F4\uFF0C600 TB"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"\u4F7F\u7528\u5B58\u7B97\u5206\u79BB\u6A21\u5F0F\uFF0C\u5199\u5165\u548C\u70ED\u6570\u636E\u5B58\u50A8\u53EA\u9700\u8981 1 \u526F\u672C\uFF0C\u80FD\u591F\u663E\u8457\u964D\u4F4E\u6210\u672C\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u8BE5\u4F8B\u5B50\u4E2D\uFF0C\u5404\u5173\u952E\u6307\u6807\u7684\u503C\u53CA\u5177\u4F53\u8BA1\u7B97\u65B9\u6CD5\u53EF\u89C1\u4E0B\u8868\uFF1A"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"\u5173\u952E\u6307\u6807\uFF08\u5355\u4F4D\uFF09"}),(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"\u5B58\u7B97\u5206\u79BB\u6A21\u5F0F"}),(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"\u5B58\u7B97\u4E00\u4F53\u6A21\u5F0F"}),(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"\u8BF4\u660E"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u65E5\u589E\u6570\u636E\u91CF\uFF08TB\uFF09"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"100"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"100"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u6839\u636E\u5B9E\u9645\u9700\u6C42\u586B\u5199"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u538B\u7F29\u7387"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"5"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"5"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u4E00\u822C\u4E3A 5\uFF5E10 \u500D\uFF08\u542B\u7D22\u5F15\uFF09\uFF0C\u9ED8\u8BA4\u4E3A 5\uFF0C\u6839\u636E\u5B9E\u9645\u9700\u6C42\u586B\u5199"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u526F\u672C\u6570"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"1"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"2"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u6839\u636E\u5B9E\u9645\u9700\u6C42\u586B\u5199\uFF0C\u9ED8\u8BA4 1 \u526F\u672C\uFF0C\u53EF\u9009\u503C\uFF1A1\uFF0C2\uFF0C3"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u70ED\u6570\u636E\u5B58\u50A8\u5468\u671F\uFF08\u5929\uFF09"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"3"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"3"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u6839\u636E\u5B9E\u9645\u9700\u6C42\u586B\u5199"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u51B7\u6570\u636E\u5B58\u50A8\u5468\u671F\uFF08\u5929\uFF09"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"30"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"27"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u6839\u636E\u5B9E\u9645\u9700\u6C42\u586B\u5199"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u603B\u5B58\u50A8\u5468\u671F\uFF08\u5929\uFF09"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"30"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"30"}),(0,s.jsxs)(n.td,{style:{textAlign:"left"},children:["\u7B97\u6CD5\uFF1A",(0,s.jsx)(n.code,{children:"\u70ED\u6570\u636E\u5B58\u50A8\u5468\u671F + \u51B7\u6570\u636E\u5B58\u50A8\u5468\u671F"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u9884\u4F30\u70ED\u6570\u636E\u5B58\u50A8\u7A7A\u95F4\uFF08TB\uFF09"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"60"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"120"}),(0,s.jsxs)(n.td,{style:{textAlign:"left"},children:["\u7B97\u6CD5\uFF1A",(0,s.jsx)(n.code,{children:"\u65E5\u589E\u6570\u636E\u91CF / \u538B\u7F29\u7387 * \u526F\u672C\u6570 * \u70ED\u6570\u636E\u5B58\u50A8\u5468\u671F"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u9884\u4F30\u51B7\u6570\u636E\u5B58\u50A8\u7A7A\u95F4\uFF08TB\uFF09"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"600"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"540"}),(0,s.jsxs)(n.td,{style:{textAlign:"left"},children:["\u7B97\u6CD5\uFF1A",(0,s.jsx)(n.code,{children:"\u65E5\u589E\u6570\u636E\u91CF / \u538B\u7F29\u7387 * \u526F\u672C\u6570 * \u51B7\u6570\u636E\u5B58\u50A8\u5468\u671F"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u5199\u5165\u541E\u5410\u5CF0\u503C / \u5747\u503C\u6BD4"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"200%"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"200%"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u6839\u636E\u5B9E\u9645\u9700\u6C42\u586B\u5199\uFF0C\u9ED8\u8BA4 200%"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u5355\u673A CPU \u6838\u6570"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"32"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"32"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u6839\u636E\u5B9E\u9645\u9700\u6C42\u586B\u5199\uFF0C\u9ED8\u8BA4 32 \u6838"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u5E73\u5747\u5199\u5165\u541E\u5410\uFF08MB/s\uFF09"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"1214"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"2427"}),(0,s.jsxs)(n.td,{style:{textAlign:"left"},children:["\u7B97\u6CD5\uFF1A",(0,s.jsx)(n.code,{children:"\u65E5\u589E\u6570\u636E\u91CF / 86400 s"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u5CF0\u503C\u5199\u5165\u541E\u5410\uFF08MB/s\uFF09"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"2427"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"4855"}),(0,s.jsxs)(n.td,{style:{textAlign:"left"},children:["\u7B97\u6CD5\uFF1A",(0,s.jsx)(n.code,{children:"\u5E73\u5747\u5199\u5165\u541E\u5410 * \u5199\u5165\u541E\u5410\u5CF0\u503C / \u5747\u503C\u6BD4"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u5CF0\u503C\u5199\u5165\u6240\u9700 CPU \u6838\u6570"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"242.7"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"485.5"}),(0,s.jsxs)(n.td,{style:{textAlign:"left"},children:["\u7B97\u6CD5\uFF1A",(0,s.jsx)(n.code,{children:"\u5CF0\u503C\u5199\u5165\u541E\u5410 / \u5355\u6838\u5199\u5165\u541E\u5410"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u67E5\u8BE2\u9884\u7559 CPU \u767E\u5206\u6BD4"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"50%"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"50%"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u6839\u636E\u5B9E\u9645\u9700\u6C42\u586B\u5199\uFF0C\u9ED8\u8BA4 50%"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u9884\u4F30 BE \u670D\u52A1\u5668\u6570"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"15.2"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"30.3"}),(0,s.jsxs)(n.td,{style:{textAlign:"left"},children:["\u7B97\u6CD5\uFF1A",(0,s.jsx)(n.code,{children:"\u5CF0\u503C\u5199\u5165\u6240\u9700 CPU \u6838\u6570 / \u5355\u673A CPU \u6838\u6570 /\uFF081 - \u67E5\u8BE2\u9884\u7559 CPU \u767E\u5206\u6BD4\uFF09"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u9884\u4F30 BE \u670D\u52A1\u5668\u6570\u53D6\u6574"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"15"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"30"}),(0,s.jsxs)(n.td,{style:{textAlign:"left"},children:["\u7B97\u6CD5\uFF1A",(0,s.jsx)(n.code,{children:"MAX (\u526F\u672C\u6570\uFF0C\u9884\u4F30 BE \u670D\u52A1\u5668\u6570\u53D6\u6574)"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u9884\u4F30\u6BCF\u53F0 BE \u670D\u52A1\u5668\u5B58\u50A8\u7A7A\u95F4\uFF08TB\uFF09"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"5.33"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"5.33"}),(0,s.jsxs)(n.td,{style:{textAlign:"left"},children:["\u7B97\u6CD5\uFF1A",(0,s.jsx)(n.code,{children:"\u9884\u4F30\u70ED\u6570\u636E\u5B58\u50A8\u7A7A\u95F4 / \u9884\u4F30 BE \u670D\u52A1\u5668\u6570 /\uFF081 - 30%\uFF09"}),"\uFF0C\u5176\u4E2D\uFF0C30% \u662F\u5B58\u50A8\u7A7A\u95F4\u9884\u7559\u503C\u3002\u5EFA\u8BAE\u6BCF\u53F0 BE \u670D\u52A1\u5668\u6302\u8F7D 4\uFF5E12 \u5757\u6570\u636E\u76D8\uFF0C\u4EE5\u63D0\u9AD8 I/O \u80FD\u529B\u3002"]})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"\u7B2C-2-\u6B65\u90E8\u7F72\u96C6\u7FA4",children:"\u7B2C 2 \u6B65\uFF1A\u90E8\u7F72\u96C6\u7FA4"}),"\n",(0,s.jsxs)(n.p,{children:["\u5B8C\u6210\u8D44\u6E90\u8BC4\u4F30\u540E\uFF0C\u53EF\u4EE5\u5F00\u59CB\u90E8\u7F72 Apache Doris \u96C6\u7FA4\uFF0C\u63A8\u8350\u5728\u7269\u7406\u673A\u53CA\u865A\u62DF\u673A\u73AF\u5883\u4E2D\u8FDB\u884C\u90E8\u7F72\u3002\u624B\u52A8\u90E8\u7F72\u96C6\u7FA4\uFF0C\u53EF\u53C2\u8003 ",(0,s.jsx)(n.a,{href:"../install/deploy-manually/integrated-storage-compute-deploy-manually",children:"\u624B\u52A8\u90E8\u7F72"}),"\u3002"]}),"\n",(0,s.jsx)(n.h2,{id:"\u7B2C-3-\u6B65\u4F18\u5316-fe-\u548C-be-\u914D\u7F6E",children:"\u7B2C 3 \u6B65\uFF1A\u4F18\u5316 FE \u548C BE \u914D\u7F6E"}),"\n",(0,s.jsx)(n.p,{children:"\u5B8C\u6210\u96C6\u7FA4\u90E8\u7F72\u540E\uFF0C\u9700\u5206\u522B\u4F18\u5316 FE \u548C BE \u914D\u7F6E\u53C2\u6570\uFF0C\u4EE5\u66F4\u52A0\u5951\u5408\u65E5\u5FD7\u5B58\u50A8\u4E0E\u5206\u6790\u7684\u573A\u666F\u3002"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u4F18\u5316 FE \u914D\u7F6E"})}),"\n",(0,s.jsxs)(n.p,{children:["\u5728 ",(0,s.jsx)(n.code,{children:"fe/conf/fe.conf"})," \u76EE\u5F55\u4E0B\u627E\u5230 FE \u7684\u76F8\u5173\u914D\u7F6E\u9879\uFF0C\u5E76\u6309\u7167\u4EE5\u4E0B\u8868\u683C\uFF0C\u8C03\u6574 FE \u914D\u7F6E\u3002"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"\u9700\u8C03\u6574\u53C2\u6570"}),(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"\u8BF4\u660E"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:"max_running_txn_num_per_db = 10000"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u9AD8\u5E76\u53D1\u5BFC\u5165\u8FD0\u884C\u4E8B\u52A1\u6570\u8F83\u591A\uFF0C\u9700\u8C03\u9AD8\u53C2\u6570\u3002"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsxs)(n.td,{style:{textAlign:"left"},children:[(0,s.jsx)(n.code,{children:"streaming_label_keep_max_second = 3600"})," ",(0,s.jsx)(n.code,{children:"label_keep_max_second = 7200"})]}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u9AD8\u9891\u5BFC\u5165\u4E8B\u52A1\u6807\u7B7E\u5185\u5B58\u5360\u7528\u591A\uFF0C\u4FDD\u7559\u65F6\u95F4\u8C03\u77ED\u3002"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:"enable_round_robin_create_tablet = true"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u521B\u5EFA Tablet \u65F6\uFF0C\u91C7\u7528 Round Robin \u7B56\u7565\uFF0C\u5C3D\u91CF\u5747\u5300\u3002"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:"tablet_rebalancer_type = partition"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u5747\u8861 Tablet \u65F6\uFF0C\u91C7\u7528\u6BCF\u4E2A\u5206\u533A\u5185\u5C3D\u91CF\u5747\u5300\u7684\u7B56\u7565\u3002"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:"autobucket_min_buckets = 10"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u5C06\u81EA\u52A8\u5206\u6876\u7684\u6700\u5C0F\u5206\u6876\u6570\u4ECE 1 \u8C03\u5927\u5230 10\uFF0C\u907F\u514D\u65E5\u5FD7\u91CF\u589E\u52A0\u65F6\u5206\u6876\u4E0D\u591F\u3002"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:"max_backend_heartbeat_failure_tolerance_count = 10"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u65E5\u5FD7\u573A\u666F\u4E0B BE \u670D\u52A1\u5668\u538B\u529B\u8F83\u5927\uFF0C\u53EF\u80FD\u77ED\u65F6\u95F4\u5FC3\u8DF3\u8D85\u65F6\uFF0C\u56E0\u6B64\u5C06\u5BB9\u5FCD\u6B21\u6570\u4ECE 1 \u8C03\u5927\u5230 10\u3002"})]})]})]}),"\n",(0,s.jsxs)(n.p,{children:["\u66F4\u591A\u5173\u4E8E FE \u914D\u7F6E\u9879\u7684\u4FE1\u606F\uFF0C\u53EF\u53C2\u8003 ",(0,s.jsx)(n.a,{href:"../admin-manual/config/fe-config",children:"FE \u914D\u7F6E\u9879"}),"\u3002"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u4F18\u5316 BE \u914D\u7F6E"})}),"\n",(0,s.jsxs)(n.p,{children:["\u5728 ",(0,s.jsx)(n.code,{children:"be/conf/be.conf"})," \u76EE\u5F55\u4E0B\u627E\u5230 BE \u7684\u76F8\u5173\u914D\u7F6E\u9879\uFF0C\u5E76\u6309\u7167\u4EE5\u4E0B\u8868\u683C\uFF0C\u8C03\u6574 BE \u914D\u7F6E\u3002"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"\u6A21\u5757"}),(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"\u9700\u8C03\u6574\u53C2\u6570"}),(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"\u8BF4\u660E"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u5B58\u50A8"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:"storage_root_path = /path/to/dir1;/path/to/dir2;...;/path/to/dir12"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u914D\u7F6E\u70ED\u6570\u636E\u5728\u78C1\u76D8\u76EE\u5F55\u4E0A\u7684\u5B58\u50A8\u8DEF\u5F84\u3002"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"-"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:"enable_file_cache = true"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u5F00\u542F\u6587\u4EF6\u7F13\u5B58\u3002"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"-"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:'file_cache_path = [{"path": "/mnt/datadisk0/file_cache", "total_size":53687091200, "query_limit": "10737418240"},{"path": "/mnt/datadisk1/file_cache", "total_size":53687091200,"query_limit": "10737418240"}]'})}),(0,s.jsxs)(n.td,{style:{textAlign:"left"},children:["\u914D\u7F6E\u51B7\u6570\u636E\u7684\u7F13\u5B58\u8DEF\u5F84\u548C\u76F8\u5173\u8BBE\u7F6E\uFF0C\u5177\u4F53\u914D\u7F6E\u8BF4\u660E\u5982\u4E0B\uFF1A",(0,s.jsx)(n.br,{}),(0,s.jsx)(n.code,{children:"path"}),"\uFF1A\u7F13\u5B58\u8DEF\u5F84",(0,s.jsx)(n.br,{}),(0,s.jsx)(n.code,{children:"total_size"}),"\uFF1A\u8BE5\u7F13\u5B58\u8DEF\u5F84\u7684\u603B\u5927\u5C0F\uFF0C\u5355\u4F4D\u4E3A\u5B57\u8282\uFF0C53687091200 \u5B57\u8282\u7B49\u4E8E 50 GB",(0,s.jsx)(n.br,{}),(0,s.jsx)(n.code,{children:"query_limit"}),"\uFF1A\u5355\u6B21\u67E5\u8BE2\u53EF\u4EE5\u4ECE\u7F13\u5B58\u8DEF\u5F84\u4E2D\u67E5\u8BE2\u7684\u6700\u5927\u6570\u636E\u91CF\uFF0C\u5355\u4F4D\u4E3A\u5B57\u8282\uFF0C10737418240 \u5B57\u8282\u7B49\u4E8E 10 GB"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u5199\u5165"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:"write_buffer_size = 1073741824"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u589E\u52A0\u5199\u5165\u7F13\u51B2\u533A\uFF08buffer\uFF09\u7684\u6587\u4EF6\u5927\u5C0F\uFF0C\u51CF\u5C11\u5C0F\u6587\u4EF6\u548C\u968F\u673A I/O \u64CD\u4F5C\uFF0C\u63D0\u5347\u6027\u80FD\u3002"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"-"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:"max_tablet_version_num = 20000"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u914D\u5408\u5EFA\u8868\u7684 time_series compaction \u7B56\u7565\uFF0C\u5141\u8BB8\u66F4\u591A\u7248\u672C\u6682\u65F6\u672A\u5408\u5E76\u3002"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"Compaction"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:"max_cumu_compaction_threads = 8"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u8BBE\u7F6E\u4E3A CPU \u6838\u6570 / 4\uFF0C\u610F\u5473\u7740 CPU \u8D44\u6E90\u7684 1/4 \u7528\u4E8E\u5199\u5165\uFF0C1/4 \u7528\u4E8E\u540E\u53F0 Compaction\uFF0C2/1 \u7559\u7ED9\u67E5\u8BE2\u548C\u5176\u4ED6\u64CD\u4F5C\u3002"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"-"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:"inverted_index_compaction_enable = true"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u5F00\u542F\u7D22\u5F15\u5408\u5E76\uFF08index compaction\uFF09\uFF0C\u51CF\u5C11 Compaction \u65F6\u7684 CPU \u6D88\u8017\u3002"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"-"}),(0,s.jsxs)(n.td,{style:{textAlign:"left"},children:[(0,s.jsx)(n.code,{children:"enable_segcompaction = false"})," ",(0,s.jsx)(n.code,{children:"enable_ordered_data_compaction = false"})]}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u5173\u95ED\u65E5\u5FD7\u573A\u666F\u4E0D\u9700\u8981\u7684\u4E24\u4E2A Compaction \u529F\u80FD\u3002"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"-"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:"enable_compaction_priority_scheduling = false"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u4F4E\u4F18\u5148\u7EA7 compaction \u5728\u4E00\u5757\u76D8\u4E0A\u9650\u5236 2 \u4E2A\u4EFB\u52A1\uFF0C\u4F1A\u5F71\u54CD compaction \u901F\u5EA6\u3002"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"-"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:"total_permits_for_compaction_score = 200000 "})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u8BE5\u53C2\u6570\u7528\u6765\u63A7\u5236\u5185\u5B58\uFF0Ctime series \u7B56\u7565\u4E0B\u672C\u8EAB\u53EF\u4EE5\u63A7\u5236\u5185\u5B58\u3002"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u7F13\u5B58"}),(0,s.jsxs)(n.td,{style:{textAlign:"left"},children:[(0,s.jsx)(n.code,{children:"disable_storage_page_cache = true"})," ",(0,s.jsx)(n.code,{children:"inverted_index_searcher_cache_limit = 30%"})]}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u56E0\u4E3A\u65E5\u5FD7\u6570\u636E\u91CF\u8F83\u5927\uFF0C\u7F13\u5B58\uFF08cache\uFF09\u4F5C\u7528\u6709\u9650\uFF0C\u56E0\u6B64\u5173\u95ED\u6570\u636E\u7F13\u5B58\uFF0C\u8C03\u6362\u4E3A\u7D22\u5F15\u7F13\u5B58\uFF08index cache\uFF09\u7684\u65B9\u5F0F\u3002"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"-"}),(0,s.jsxs)(n.td,{style:{textAlign:"left"},children:[(0,s.jsx)(n.code,{children:"inverted_index_cache_stale_sweep_time_sec = 3600"})," ",(0,s.jsx)(n.code,{children:"index_cache_entry_stay_time_after_lookup_s = 3600"})]}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u8BA9\u7D22\u5F15\u7F13\u5B58\u5728\u5185\u5B58\u4E2D\u5C3D\u91CF\u4FDD\u7559 1 \u5C0F\u65F6\u3002"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"-"}),(0,s.jsxs)(n.td,{style:{textAlign:"left"},children:[(0,s.jsx)(n.code,{children:"enable_inverted_index_cache_on_cooldown = true"})," ",(0,s.jsx)(n.br,{}),(0,s.jsx)(n.code,{children:"enable_write_index_searcher_cache = false"})]}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u5F00\u542F\u7D22\u5F15\u4E0A\u4F20\u51B7\u6570\u636E\u5B58\u50A8\u65F6\u81EA\u52A8\u7F13\u5B58\u7684\u529F\u80FD\u3002"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"-"}),(0,s.jsxs)(n.td,{style:{textAlign:"left"},children:[(0,s.jsx)(n.code,{children:"tablet_schema_cache_recycle_interval = 3600"})," ",(0,s.jsx)(n.code,{children:"segment_cache_capacity = 20000"})]}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u51CF\u5C11\u5176\u4ED6\u7F13\u5B58\u5BF9\u5185\u5B58\u7684\u5360\u7528\u3002"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"-"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:"inverted_index_ram_dir_enable = true"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u51CF\u5C11\u5199\u5165\u65F6\u7D22\u5F15\u4E34\u65F6\u6587\u4EF6\u5E26\u6765\u7684 IO \u5F00\u9500\u3002"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u7EBF\u7A0B"}),(0,s.jsxs)(n.td,{style:{textAlign:"left"},children:[(0,s.jsx)(n.code,{children:"pipeline_executor_size = 24"})," ",(0,s.jsx)(n.code,{children:"doris_scanner_thread_pool_thread_num = 48"})]}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"32 \u6838 CPU \u7684\u8BA1\u7B97\u7EBF\u7A0B\u548C I/O \u7EBF\u7A0B\u914D\u7F6E\uFF0C\u6839\u636E\u6838\u6570\u7B49\u6BD4\u6269\u7F29\u3002"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"-"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:"scan_thread_nice_value = 5"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u964D\u4F4E\u67E5\u8BE2 I/O \u7EBF\u7A0B\u7684\u4F18\u5148\u7EA7\uFF0C\u4FDD\u8BC1\u5199\u5165\u6027\u80FD\u548C\u65F6\u6548\u6027\u3002"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u5176\u4ED6"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:"string_type_length_soft_limit_bytes = 10485760"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u5C06 String \u7C7B\u578B\u6570\u636E\u7684\u957F\u5EA6\u9650\u5236\u8C03\u9AD8\u81F3 10 MB\u3002"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"-"}),(0,s.jsxs)(n.td,{style:{textAlign:"left"},children:[(0,s.jsx)(n.code,{children:"trash_file_expire_time_sec = 300"})," ",(0,s.jsx)(n.code,{children:"path_gc_check_interval_second  = 900"})," ",(0,s.jsx)(n.code,{children:"path_scan_interval_second = 900"})]}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u8C03\u5FEB\u5783\u573E\u6587\u4EF6\u7684\u56DE\u6536\u65F6\u95F4\u3002"})]})]})]}),"\n",(0,s.jsxs)(n.p,{children:["\u66F4\u591A\u5173\u4E8E BE \u914D\u7F6E\u9879\u7684\u4FE1\u606F\uFF0C\u53EF\u53C2\u8003 ",(0,s.jsx)(n.a,{href:"../admin-manual/config/be-config",children:"BE \u914D\u7F6E\u9879"}),"\u3002"]}),"\n",(0,s.jsx)(n.h2,{id:"\u7B2C-4-\u6B65\u5EFA\u8868",children:"\u7B2C 4 \u6B65\uFF1A\u5EFA\u8868"}),"\n",(0,s.jsx)(n.p,{children:"\u7531\u4E8E\u65E5\u5FD7\u6570\u636E\u7684\u5199\u5165\u548C\u67E5\u8BE2\u90FD\u5177\u5907\u660E\u663E\u7684\u7279\u5F81\uFF0C\u56E0\u6B64\uFF0C\u5728\u5EFA\u8868\u65F6\u6309\u7167\u672C\u8282\u8BF4\u660E\u8FDB\u884C\u9488\u5BF9\u6027\u914D\u7F6E\uFF0C\u4EE5\u63D0\u5347\u6027\u80FD\u8868\u73B0\u3002"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u914D\u7F6E\u5206\u533A\u5206\u6876\u53C2\u6570"})}),"\n",(0,s.jsx)(n.p,{children:"\u5206\u533A\u6309\u7167\u4EE5\u4E0B\u8BF4\u660E\u914D\u7F6E\uFF1A"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u4F7F\u7528\u65F6\u95F4\u5B57\u6BB5\u4E0A\u7684 ",(0,s.jsx)(n.a,{href:"/zh-CN/docs/4.x/table-design/data-partitioning/manual-partitioning#range-%E5%88%86%E5%8C%BA",children:"Range \u5206\u533A"})," (",(0,s.jsx)(n.code,{children:"PARTITION BY RANGE("}),"ts",(0,s.jsx)(n.code,{children:")"}),")\uFF0C\u5E76\u5F00\u542F ",(0,s.jsx)(n.a,{href:"../table-design/data-partitioning/dynamic-partitioning",children:"\u52A8\u6001\u5206\u533A"})," (",(0,s.jsx)(n.code,{children:'"dynamic_partition.enable" = "true"'}),")\uFF0C\u6309\u5929\u81EA\u52A8\u7BA1\u7406\u5206\u533A\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:["\u4F7F\u7528 Datetime \u7C7B\u578B\u7684\u65F6\u95F4\u5B57\u6BB5\u4F5C\u4E3A\u6392\u5E8F Key (",(0,s.jsx)(n.code,{children:"DUPLICATE KEY(ts)"}),")\uFF0C\u5728\u67E5\u8BE2\u6700\u65B0 N \u6761\u65E5\u5FD7\u65F6\u6709\u6570\u500D\u52A0\u901F\u3002"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"\u5206\u6876\u6309\u7167\u4EE5\u4E0B\u8BF4\u660E\u914D\u7F6E\uFF1A"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u5206\u6876\u6570\u91CF\u5927\u81F4\u4E3A\u96C6\u7FA4\u78C1\u76D8\u603B\u6570\u7684 3 \u500D\uFF0C\u6BCF\u4E2A\u6876\u7684\u6570\u636E\u91CF\u538B\u7F29\u540E 5GB \u5DE6\u53F3\u3002"}),"\n",(0,s.jsxs)(n.li,{children:["\u4F7F\u7528 Random \u7B56\u7565 (",(0,s.jsx)(n.code,{children:"DISTRIBUTED BY RANDOM BUCKETS 60"}),")\uFF0C\u914D\u5408\u5199\u5165\u65F6\u7684 Single Tablet \u5BFC\u5165\uFF0C\u53EF\u4EE5\u63D0\u5347\u6279\u91CF\uFF08Batch\uFF09\u5199\u5165\u7684\u6548\u7387\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["\u66F4\u591A\u5173\u4E8E\u5206\u533A\u5206\u6876\u7684\u4FE1\u606F\uFF0C\u53EF\u53C2\u8003 ",(0,s.jsx)(n.a,{href:"../table-design/data-partitioning/data-distribution",children:"\u6570\u636E\u5212\u5206"}),"\u3002"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u914D\u7F6E\u538B\u7F29\u53C2\u6570"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u4F7F\u7528 zstd \u538B\u7F29\u7B97\u6CD5 (",(0,s.jsx)(n.code,{children:'"compression" = "zstd"'}),"), \u63D0\u9AD8\u6570\u636E\u538B\u7F29\u7387\u3002"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u914D\u7F6E Compaction \u53C2\u6570"})}),"\n",(0,s.jsx)(n.p,{children:"\u6309\u7167\u4EE5\u4E0B\u8BF4\u660E\u914D\u7F6E Compaction \u53C2\u6570\uFF1A"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u4F7F\u7528 time_series \u7B56\u7565 (",(0,s.jsx)(n.code,{children:'"compaction_policy" = "time_series"'}),")\uFF0C\u4EE5\u51CF\u8F7B\u5199\u653E\u5927\u6548\u5E94\uFF0C\u5BF9\u4E8E\u9AD8\u541E\u5410\u65E5\u5FD7\u5199\u5165\u7684\u8D44\u6E90\u5199\u5165\u5F88\u91CD\u8981\u3002"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u914D\u7F6E\u7D22\u5F15\u53C2\u6570"})}),"\n",(0,s.jsx)(n.p,{children:"\u6309\u7167\u4EE5\u4E0B\u8BF4\u660E\u64CD\u4F5C\uFF1A"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u5BF9\u7ECF\u5E38\u67E5\u8BE2\u7684\u5B57\u6BB5\u5EFA\u7D22\u5F15 (",(0,s.jsx)(n.code,{children:"USING INVERTED"}),")\u3002"]}),"\n",(0,s.jsx)(n.li,{children:"\u5BF9\u9700\u8981\u5168\u6587\u68C0\u7D22\u7684\u5B57\u6BB5\uFF0C\u5C06\u5206\u8BCD\u5668\uFF08parser\uFF09\u53C2\u6570\u8D4B\u503C\u4E3A unicode\uFF0C\u4E00\u822C\u80FD\u6EE1\u8DB3\u5927\u90E8\u5206\u9700\u6C42\u3002\u5982\u6709\u652F\u6301\u77ED\u8BED\u67E5\u8BE2\u7684\u9700\u6C42\uFF0C\u5C06 support_phrase \u53C2\u6570\u8D4B\u503C\u4E3A true\uFF1B\u5982\u4E0D\u9700\u8981\uFF0C\u5219\u8BBE\u7F6E\u4E3A false\uFF0C\u4EE5\u964D\u4F4E\u5B58\u50A8\u7A7A\u95F4\u3002"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u914D\u7F6E\u5B58\u50A8\u7B56\u7565"})}),"\n",(0,s.jsx)(n.p,{children:"\u6309\u7167\u4EE5\u4E0B\u8BF4\u660E\u64CD\u4F5C\uFF1A"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u5BF9\u4E8E\u70ED\u5B58\u50A8\u6570\u636E\uFF0C\u5982\u679C\u4F7F\u7528\u4E91\u76D8\uFF0C\u53EF\u914D\u7F6E 1 \u526F\u672C\uFF1B\u5982\u679C\u4F7F\u7528\u7269\u7406\u76D8\uFF0C\u5219\u81F3\u5C11\u914D\u7F6E 2 \u526F\u672C (",(0,s.jsx)(n.code,{children:'"replication_num" = "2"'}),")\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:["\u914D\u7F6E ",(0,s.jsx)(n.code,{children:"log_s3"})," \u7684\u5B58\u50A8\u4F4D\u7F6E (",(0,s.jsx)(n.code,{children:'CREATE RESOURCE "log_s3"'}),")\uFF0C\u5E76\u8BBE\u7F6E ",(0,s.jsx)(n.code,{children:"log_policy_3day"})," \u51B7\u70ED\u6570\u636E\u5206\u5C42\u7B56\u7565 (",(0,s.jsx)(n.code,{children:"CREATE STORAGE POLICY log_policy_3day"}),")\uFF0C\u5373\u5728\u8D85\u8FC7 3 \u5929\u540E\u5C06\u6570\u636E\u51B7\u5374\u81F3 ",(0,s.jsx)(n.code,{children:"log_s3"})," \u6307\u5B9A\u7684\u5B58\u50A8\u4F4D\u7F6E\u3002\u53EF\u53C2\u8003\u4EE5\u4E0B SQL\uFF1A"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:'CREATE DATABASE log_db;\nUSE log_db;\n\n-- \u5B58\u7B97\u5206\u79BB\u6A21\u5F0F\u4E0D\u9700\u8981\nCREATE RESOURCE "log_s3"\nPROPERTIES\n(\n    "type" = "s3",\n    "s3.endpoint" = "your_endpoint_url",\n    "s3.region" = "your_region",\n    "s3.bucket" = "your_bucket",\n    "s3.root.path" = "your_path",\n    "s3.access_key" = "your_ak",\n    "s3.secret_key" = "your_sk"\n);\n\n-- \u5B58\u7B97\u5206\u79BB\u6A21\u5F0F\u4E0D\u9700\u8981\nCREATE STORAGE POLICY log_policy_3day\nPROPERTIES(\n    "storage_resource" = "log_s3",\n    "cooldown_ttl" = "259200"\n);\n\nCREATE TABLE log_table\n(\n  `ts` DATETIME,\n  `host` TEXT,\n  `path` TEXT,\n  `message` TEXT,\n  INDEX idx_host (`host`) USING INVERTED,\n  INDEX idx_path (`path`) USING INVERTED,\n  INDEX idx_message (`message`) USING INVERTED PROPERTIES("parser" = "unicode", "support_phrase" = "true")\n)\nENGINE = OLAP\nDUPLICATE KEY(`ts`)\nPARTITION BY RANGE(`ts`) ()\nDISTRIBUTED BY RANDOM BUCKETS 60\nPROPERTIES (\n  "compression" = "zstd",\n  "compaction_policy" = "time_series",\n  "dynamic_partition.enable" = "true",\n  "dynamic_partition.create_history_partition" = "true",\n  "dynamic_partition.time_unit" = "DAY",\n  "dynamic_partition.start" = "-30",\n  "dynamic_partition.end" = "1",\n  "dynamic_partition.prefix" = "p",\n  "dynamic_partition.buckets" = "60",\n  "dynamic_partition.replication_num" = "2", -- \u5B58\u7B97\u5206\u79BB\u4E0D\u9700\u8981\n  "replication_num" = "2", -- \u5B58\u7B97\u5206\u79BB\u4E0D\u9700\u8981\n  "storage_policy" = "log_policy_3day" -- \u5B58\u7B97\u5206\u79BB\u4E0D\u9700\u8981\n);\n'})}),"\n",(0,s.jsx)(n.h2,{id:"\u7B2C-5-\u6B65\u91C7\u96C6\u65E5\u5FD7",children:"\u7B2C 5 \u6B65\uFF1A\u91C7\u96C6\u65E5\u5FD7"}),"\n",(0,s.jsx)(n.p,{children:"\u5B8C\u6210\u5EFA\u8868\u540E\uFF0C\u53EF\u8FDB\u884C\u65E5\u5FD7\u91C7\u96C6\u3002"}),"\n",(0,s.jsx)(n.p,{children:"Apache Doris \u63D0\u4F9B\u5F00\u653E\u3001\u901A\u7528\u7684 Stream HTTP APIs\uFF0C\u901A\u8FC7\u8FD9\u4E9B APIs\uFF0C\u4F60\u53EF\u4E0E\u5E38\u7528\u7684\u65E5\u5FD7\u91C7\u96C6\u5668\u6253\u901A\uFF0C\u5305\u62EC Logstash\u3001Filebeat\u3001Kafka \u7B49\uFF0C\u4ECE\u800C\u5F00\u5C55\u65E5\u5FD7\u91C7\u96C6\u5DE5\u4F5C\u3002\u672C\u8282\u4ECB\u7ECD\u4E86\u5982\u4F55\u4F7F\u7528 Stream HTTP APIs \u5BF9\u63A5\u65E5\u5FD7\u91C7\u96C6\u5668\u3002"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u5BF9\u63A5 Logstash"})}),"\n",(0,s.jsx)(n.p,{children:"\u6309\u7167\u4EE5\u4E0B\u6B65\u9AA4\u64CD\u4F5C\uFF1A"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"\u4E0B\u8F7D\u5E76\u5B89\u88C5 Logstash Doris Output \u63D2\u4EF6\u3002\u4F60\u53EF\u9009\u62E9\u4EE5\u4E0B\u4E24\u79CD\u65B9\u5F0F\u4E4B\u4E00\uFF1A"}),"\n"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["\u76F4\u63A5\u4E0B\u8F7D\uFF1A",(0,s.jsx)(n.a,{href:"https://apache-doris-releases.oss-accelerate.aliyuncs.com/extension/logstash-output-doris-1.2.0.gem",children:"\u70B9\u6B64\u4E0B\u8F7D"}),"\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"\u4ECE\u6E90\u7801\u7F16\u8BD1\uFF0C\u5E76\u8FD0\u884C\u4E0B\u65B9\u547D\u4EE4\u5B89\u88C5\uFF1A"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"./bin/logstash-plugin install logstash-output-doris-1.2.0.gem\n"})}),"\n",(0,s.jsxs)(n.ol,{start:"2",children:["\n",(0,s.jsx)(n.li,{children:"\u914D\u7F6E Logstash\u3002\u9700\u914D\u7F6E\u4EE5\u4E0B\u53C2\u6570\uFF1A"}),"\n"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"logstash.yml"}),"\uFF1A\u914D\u7F6E Logstash \u6279\u5904\u7406\u65E5\u5FD7\u7684\u6761\u6570\u548C\u65F6\u95F4\uFF0C\u7528\u4E8E\u63D0\u5347\u6570\u636E\u5199\u5165\u6027\u80FD\u3002"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"pipeline.batch.size: 1000000  \npipeline.batch.delay: 10000\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"logstash_demo.conf"}),"\uFF1A\u914D\u7F6E\u6240\u91C7\u96C6\u65E5\u5FD7\u7684\u5177\u4F53\u8F93\u5165\u8DEF\u5F84\u548C\u8F93\u51FA\u5230 Apache Doris \u7684\u8BBE\u7F6E\u3002"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:'input {  \n    file {  \n    path => "/path/to/your/log"  \n  }  \n}  \n\noutput {  \n  doris {  \n    http_hosts => [ "<http://fehost1:http_port>", "<http://fehost2:http_port>", "<http://fehost3:http_port">]  \n    user => "your_username"  \n    password => "your_password"  \n    db => "your_db"  \n    table => "your_table"  \n    \n    # doris stream load http headers  \n    headers => {  \n    "format" => "json"  \n    "read_json_by_line" => "true"  \n    "load_to_single_tablet" => "true"  \n    }  \n    \n    # field mapping: doris fileld name => logstash field name  \n    # %{} to get a logstash field, [] for nested field such as [host][name] for host.name  \n    mapping => {  \n    "ts" => "%{@timestamp}"  \n    "host" => "%{[host][name]}"  \n    "path" => "%{[log][file][path]}"  \n    "message" => "%{message}"  \n    }  \n    log_request => true  \n    log_speed_interval => 10  \n  }  \n}\n'})}),"\n",(0,s.jsxs)(n.ol,{start:"3",children:["\n",(0,s.jsx)(n.li,{children:"\u6309\u7167\u4E0B\u65B9\u547D\u4EE4\u8FD0\u884C Logstash\uFF0C\u91C7\u96C6\u65E5\u5FD7\u5E76\u8F93\u51FA\u81F3 Apache Doris\u3002"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"./bin/logstash -f logstash_demo.conf\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\u66F4\u591A\u5173\u4E8E Logstash \u914D\u7F6E\u548C\u4F7F\u7528\u7684\u8BF4\u660E\uFF0C\u53EF\u53C2\u8003 ",(0,s.jsx)(n.a,{href:"../ecosystem/observability/logstash",children:"Logstash Doris Output Plugin"}),"\u3002"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u5BF9\u63A5 Filebeat"})}),"\n",(0,s.jsx)(n.p,{children:"\u6309\u7167\u4EE5\u4E0B\u6B65\u9AA4\u64CD\u4F5C\uFF1A"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\u83B7\u53D6\u652F\u6301\u8F93\u51FA\u81F3 Apache Doris \u7684 Filebeat \u4E8C\u8FDB\u5236\u6587\u4EF6\u3002\u53EF ",(0,s.jsx)(n.a,{href:"https://apache-doris-releases.oss-accelerate.aliyuncs.com/extension/filebeat-doris-2.1.1",children:"\u70B9\u6B64\u4E0B\u8F7D"})," \u6216\u8005\u4ECE Apache Doris \u6E90\u7801\u7F16\u8BD1\u3002"]}),"\n",(0,s.jsx)(n.li,{children:"\u914D\u7F6E Filebeat\u3002\u9700\u914D\u7F6E\u4EE5\u4E0B\u53C2\u6570\uFF1A"}),"\n"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"filebeat_demo.yml"}),"\uFF1A\u914D\u7F6E\u6240\u91C7\u96C6\u65E5\u5FD7\u7684\u5177\u4F53\u8F93\u5165\u8DEF\u5F84\u548C\u8F93\u51FA\u5230 Apache Doris \u7684\u8BBE\u7F6E\u3002"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'# input\nfilebeat.inputs:\n- type: log\n  enabled: true\n  paths:\n    - /path/to/your/log\n  # multiline \u53EF\u4EE5\u5C06\u8DE8\u884C\u7684\u65E5\u5FD7\uFF08\u6BD4\u5982 Java stacktrace\uFF09\u62FC\u63A5\u8D77\u6765\n  multiline:\n    type: pattern\n    # \u6548\u679C\uFF1A\u4EE5 yyyy-mm-dd HH:MM:SS \u5F00\u5934\u7684\u884C\u8BA4\u4E3A\u662F\u4E00\u6761\u65B0\u7684\u65E5\u5FD7\uFF0C\u5176\u4ED6\u90FD\u62FC\u63A5\u5230\u4E0A\u4E00\u6761\u65E5\u5FD7\n    pattern: \'^[0-9]{4}-[0-9]{2}-[0-9]{2} [0-9]{2}:[0-9]{2}:[0-9]{2}\'\n    negate: true\n    match: after\n    skip_newline: true\n\nprocessors:\n# \u7528 js script \u63D2\u4EF6\u5C06\u65E5\u5FD7\u4E2D\u7684 \\t \u66FF\u6362\u6210\u7A7A\u683C\uFF0C\u907F\u514D JSON \u89E3\u6790\u62A5\u9519\n- script:\n    lang: javascript\n    source: >\n        function process(event) {\n            var msg = event.Get("message");\n            msg = msg.replace(/\\t/g, "  ");\n            event.Put("message", msg);\n        }\n# \u7528 dissect \u63D2\u4EF6\u505A\u7B80\u5355\u7684\u65E5\u5FD7\u89E3\u6790\n- dissect:\n    # 2024-06-08 18:26:25,481 INFO (report-thread|199) [ReportHandler.cpuReport():617] begin to handle\n    tokenizer: "%{day} %{time} %{log_level} (%{thread}) [%{position}] %{content}"\n    target_prefix: ""\n    ignore_failure: true\n    overwrite_keys: true\n\n# queue and batch\nqueue.mem:\n  events: 1000000\n  flush.min_events: 100000\n  flush.timeout: 10s\n\n# output\noutput.doris:\n  fenodes: [ "http://fehost1:http_port", "http://fehost2:http_port", "http://fehost3:http_port" ]\n  user: "your_username"\n  password: "your_password"\n  database: "your_db"\n  table: "your_table"\n  # output string format\n  ## %{[agent][hostname]} %{[log][file][path]} \u662Ffilebeat\u81EA\u5E26\u7684metadata\n  ## \u5E38\u7528\u7684 filebeat metadata \u8FD8\u662F\u6709\u91C7\u96C6\u65F6\u95F4\u6233 %{[@timestamp]}\n  ## %{[day]} %{[time]} \u662F\u4E0A\u9762 dissect \u89E3\u6790\u5F97\u5230\u5B57\u6BB5\n  codec_format_string: \'{"ts": "%{[day]} %{[time]}", "host": "%{[agent][hostname]}", "path": "%{[log][file][path]}", "message": "%{[message]}"}\'\n  headers:\n    format: "json"\n    read_json_by_line: "true"\n    load_to_single_tablet: "true"\n'})}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.ol,{start:"3",children:["\n",(0,s.jsx)(n.li,{children:"\u6309\u7167\u4E0B\u65B9\u547D\u4EE4\u8FD0\u884C Filebeat\uFF0C\u91C7\u96C6\u65E5\u5FD7\u5E76\u8F93\u51FA\u81F3 Apache Doris\u3002"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"chmod +x filebeat-doris-2.1.1\n./filebeat-doris-2.1.1 -c filebeat_demo.yml\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\u66F4\u591A\u5173\u4E8E Filebeat \u914D\u7F6E\u548C\u4F7F\u7528\u7684\u8BF4\u660E\uFF0C\u53EF\u53C2\u8003 ",(0,s.jsx)(n.a,{href:"../ecosystem/observability/beats",children:"Beats Doris Output Plugin"}),"\u3002"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u5BF9\u63A5 Kafka"})}),"\n",(0,s.jsx)(n.p,{children:"\u5C06 JSON \u683C\u5F0F\u7684\u65E5\u5FD7\u5199\u5165 Kafka \u7684\u6D88\u606F\u961F\u5217\uFF0C\u521B\u5EFA Kafka Routine Load\uFF0C\u5373\u53EF\u8BA9 Apache Doris \u4ECE Kafka \u4E3B\u52A8\u62C9\u53D6\u6570\u636E\u3002"}),"\n",(0,s.jsxs)(n.p,{children:["\u53EF\u53C2\u8003\u5982\u4E0B\u793A\u4F8B\u3002\u5176\u4E2D\uFF0C",(0,s.jsx)(n.code,{children:"property.*"})," \u662F Librdkafka \u5BA2\u6237\u7AEF\u76F8\u5173\u914D\u7F6E\uFF0C\u6839\u636E\u5B9E\u9645 Kafka \u96C6\u7FA4\u60C5\u51B5\u914D\u7F6E\u3002"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:'-- \u51C6\u5907\u597D kafka \u96C6\u7FA4\u548C topic log__topic_  \n-- \u521B\u5EFA routine load\uFF0C\u4ECE kafka log__topic_\u5C06\u6570\u636E\u5BFC\u5165 log_table \u8868  \nCREATE ROUTINE LOAD load_log_kafka ON log_db.log_table  \nCOLUMNS(ts, clientip, request, status, size)  \nPROPERTIES (\n"max_batch_interval" = "60",\n"max_batch_rows" = "20000000",\n"max_batch_size" = "1073741824", \n"load_to_single_tablet" = "true",\n"format" = "json"\n) \nFROM KAFKA (  \n"kafka_broker_list" = "host:port",  \n"kafka_topic" = "log__topic_",  \n"property.group.id" = "your_group_id",  \n"property.security.protocol"="SASL_PLAINTEXT",  \n"property.sasl.mechanism"="GSSAPI",  \n"property.sasl.kerberos.service.name"="kafka",  \n"property.sasl.kerberos.keytab"="/path/to/xxx.keytab",  \n"property.sasl.kerberos.principal"="<xxx@yyy.com>"  \n);  \n-- \u67E5\u770B routine \u7684\u72B6\u6001  \nSHOW ROUTINE LOAD;\n'})}),"\n",(0,s.jsxs)(n.p,{children:["\u66F4\u591A\u5173\u4E8E Kafka \u914D\u7F6E\u548C\u4F7F\u7528\u7684\u8BF4\u660E\uFF0C\u53EF\u53C2\u8003 ",(0,s.jsx)(n.a,{href:"/zh-CN/docs/4.x/data-operate/import/import-way/routine-load-manual",children:"Routine Load"}),"\u3002"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u4F7F\u7528\u81EA\u5B9A\u4E49\u7A0B\u5E8F\u91C7\u96C6\u65E5\u5FD7"})}),"\n",(0,s.jsx)(n.p,{children:"\u9664\u4E86\u5BF9\u63A5\u5E38\u7528\u7684\u65E5\u5FD7\u91C7\u96C6\u5668\u4EE5\u5916\uFF0C\u4F60\u4E5F\u53EF\u4EE5\u81EA\u5B9A\u4E49\u7A0B\u5E8F\uFF0C\u901A\u8FC7 HTTP API Stream Load \u5C06\u65E5\u5FD7\u6570\u636E\u5BFC\u5165 Apache Doris\u3002\u53C2\u8003\u4EE5\u4E0B\u4EE3\u7801\uFF1A"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:'curl   \n--location-trusted   \n-u username:password   \n-H "format:json"   \n-H "read_json_by_line:true"   \n-H "load_to_single_tablet:true"   \n-H "timeout:600"   \n-T logfile.json   \nhttp://fe_host:fe_http_port/api/log_db/log_table/_stream_load\n'})}),"\n",(0,s.jsx)(n.p,{children:"\u5728\u4F7F\u7528\u81EA\u5B9A\u4E49\u7A0B\u5E8F\u65F6\uFF0C\u9700\u6CE8\u610F\u4EE5\u4E0B\u5173\u952E\u70B9\uFF1A"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u4F7F\u7528 Basic Auth \u8FDB\u884C HTTP \u9274\u6743\uFF0C\u7528\u547D\u4EE4 ",(0,s.jsx)(n.code,{children:"echo -n 'username:password' | base64"})," \u8FDB\u884C\u8BA1\u7B97\u3002"]}),"\n",(0,s.jsx)(n.li,{children:'\u8BBE\u7F6E HTTP header "format:json"\uFF0C\u6307\u5B9A\u6570\u636E\u683C\u5F0F\u4E3A JSON\u3002'}),"\n",(0,s.jsx)(n.li,{children:'\u8BBE\u7F6E HTTP header "read_json_by_line:true"\uFF0C\u6307\u5B9A\u6BCF\u884C\u4E00\u4E2A JSON\u3002'}),"\n",(0,s.jsx)(n.li,{children:'\u8BBE\u7F6E HTTP header "load_to_single_tablet:true"\uFF0C\u6307\u5B9A\u4E00\u6B21\u5BFC\u5165\u5199\u5165\u4E00\u4E2A\u5206\u6876\u51CF\u5C11\u5BFC\u5165\u7684\u5C0F\u6587\u4EF6\u3002'}),"\n",(0,s.jsx)(n.li,{children:"\u5EFA\u8BAE\u5199\u5165\u5BA2\u6237\u7AEF\u4E00\u4E2A Batch \u7684\u5927\u5C0F\u4E3A 100MB \uFF5E 1GB\u3002\u5982\u679C\u4F60\u4F7F\u7528\u7684\u662F Apache Doris 2.1 \u53CA\u66F4\u9AD8\u7248\u672C\uFF0C\u9700\u901A\u8FC7\u670D\u52A1\u7AEF Group Commit \u529F\u80FD\uFF0C\u964D\u4F4E\u5BA2\u6237\u7AEF Batch \u5927\u5C0F\u3002"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"\u7B2C-6-\u6B65\u67E5\u8BE2\u548C\u5206\u6790\u65E5\u5FD7",children:"\u7B2C 6 \u6B65\uFF1A\u67E5\u8BE2\u548C\u5206\u6790\u65E5\u5FD7"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u65E5\u5FD7\u67E5\u8BE2"})}),"\n",(0,s.jsx)(n.p,{children:"Apache Doris \u652F\u6301\u6807\u51C6 SQL\uFF0C\u56E0\u6B64\uFF0C\u4F60\u53EF\u4EE5\u901A\u8FC7 MySQL \u5BA2\u6237\u7AEF\u6216\u8005 JDBC \u7B49\u65B9\u5F0F\u8FDE\u63A5\u5230\u96C6\u7FA4\uFF0C\u6267\u884C SQL \u8FDB\u884C\u65E5\u5FD7\u67E5\u8BE2\u3002\u53C2\u8003\u4EE5\u4E0B\u547D\u4EE4\uFF1A"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"mysql -h fe_host -P fe_mysql_port -u your_username -Dyour_db_name\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u4E0B\u65B9\u5217\u51FA\u5E38\u89C1\u7684 5 \u6761 SQL \u67E5\u8BE2\u547D\u4EE4\uFF0C\u4EE5\u4F9B\u53C2\u8003\uFF1A"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u67E5\u770B\u6700\u65B0\u7684 10 \u6761\u6570\u636E"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-SQL",children:"SELECT * FROM your_table_name ORDER BY ts DESC LIMIT 10;\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u67E5\u8BE2 ",(0,s.jsx)(n.code,{children:"host"})," \u4E3A ",(0,s.jsx)(n.code,{children:"8.8.8.8"})," \u7684\u6700\u65B0 10 \u6761\u6570\u636E"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-SQL",children:"SELECT * FROM your_table_name WHERE host = '8.8.8.8' ORDER BY ts DESC LIMIT 10;\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u68C0\u7D22\u8BF7\u6C42\u5B57\u6BB5\u4E2D\u6709 ",(0,s.jsx)(n.code,{children:"error"})," \u6216\u8005 ",(0,s.jsx)(n.code,{children:"404"})," \u7684\u6700\u65B0 10 \u6761\u6570\u636E\u3002\u5176\u4E2D\uFF0C",(0,s.jsx)(n.code,{children:"MATCH_ANY"})," \u662F Apache Doris \u5168\u6587\u68C0\u7D22\u7684 SQL \u8BED\u6CD5\uFF0C\u7528\u4E8E\u5339\u914D\u53C2\u6570\u4E2D\u4EFB\u4E00\u5173\u952E\u5B57\u3002"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-SQL",children:"SELECT * FROM your_table_name WHERE message MATCH_ANY 'error 404'  \nORDER BY ts DESC LIMIT 10;\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u68C0\u7D22\u8BF7\u6C42\u5B57\u6BB5\u4E2D\u6709 ",(0,s.jsx)(n.code,{children:"image"})," \u548C ",(0,s.jsx)(n.code,{children:"faq"})," \u7684\u6700\u65B0 10 \u6761\u6570\u636E\u3002\u5176\u4E2D\uFF0C",(0,s.jsx)(n.code,{children:"MATCH_ALL"})," \u662F Apache Doris \u5168\u6587\u68C0\u7D22\u7684 SQL \u8BED\u6CD5\uFF0C\u7528\u4E8E\u5339\u914D\u53C2\u6570\u4E2D\u6240\u6709\u5173\u952E\u5B57\u3002"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-SQL",children:"SELECT * FROM your_table_name WHERE message MATCH_ALL 'image faq'  \nORDER BY ts DESC LIMIT 10;\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u68C0\u7D22\u8BF7\u6C42\u5B57\u6BB5\u4E2D\u6709 ",(0,s.jsx)(n.code,{children:"image"})," \u548C ",(0,s.jsx)(n.code,{children:"faq"})," \u7684\u6700\u65B0 10 \u6761\u6570\u636E\u3002\u5176\u4E2D\uFF0C",(0,s.jsx)(n.code,{children:"MATCH_PHRASE"})," \u662F Apache Doris \u5168\u6587\u68C0\u7D22\u7684 SQL \u8BED\u6CD5\uFF0C\u7528\u4E8E\u5339\u914D\u53C2\u6570\u4E2D\u6240\u6709\u5173\u952E\u5B57\uFF0C\u5E76\u4E14\u8981\u6C42\u987A\u5E8F\u4E00\u81F4\u3002\u5728\u4E0B\u65B9\u4F8B\u5B50\u4E2D\uFF0C",(0,s.jsx)(n.code,{children:"a image faq b"})," \u80FD\u5339\u914D\uFF0C\u4F46\u662F ",(0,s.jsx)(n.code,{children:"a faq image b"})," \u4E0D\u80FD\u5339\u914D\uFF0C\u56E0\u4E3A ",(0,s.jsx)(n.code,{children:"image"})," \u548C ",(0,s.jsx)(n.code,{children:"faq"})," \u7684\u987A\u5E8F\u4E0E\u67E5\u8BE2\u4E0D\u4E00\u81F4\u3002"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-SQL",children:"SELECT * FROM your_table_name WHERE message MATCH_PHRASE 'image faq'  \nORDER BY ts DESC LIMIT 10;\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u53EF\u89C6\u5316\u65E5\u5FD7\u5206\u6790"})}),"\n",(0,s.jsx)(n.p,{children:"\u4E00\u4E9B\u7B2C\u4E09\u65B9\u5382\u5546\u63D0\u4F9B\u4E86\u57FA\u4E8E Apache Doris \u7684\u53EF\u89C6\u5316\u65E5\u5FD7\u5206\u6790\u5F00\u53D1\u5E73\u53F0\uFF0C\u5305\u542B\u7C7B Kibana Discover \u7684\u65E5\u5FD7\u68C0\u7D22\u5206\u6790\u754C\u9762\uFF0C\u63D0\u4F9B\u76F4\u89C2\u3001\u6613\u7528\u7684\u63A2\u7D22\u5F0F\u65E5\u5FD7\u5206\u6790\u4EA4\u4E92\u3002"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"WebUI",src:t(762222).Z+"",width:"2880",height:"1562"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u652F\u6301\u5168\u6587\u68C0\u7D22\u548C SQL \u4E24\u79CD\u6A21\u5F0F"}),"\n",(0,s.jsx)(n.li,{children:"\u652F\u6301\u65F6\u95F4\u6846\u548C\u76F4\u65B9\u56FE\u4E0A\u9009\u62E9\u67E5\u8BE2\u65E5\u5FD7\u7684\u65F6\u95F4\u6BB5"}),"\n",(0,s.jsx)(n.li,{children:"\u652F\u6301\u4FE1\u606F\u4E30\u5BCC\u7684\u65E5\u5FD7\u660E\u7EC6\u5C55\u793A\uFF0C\u8FD8\u53EF\u4EE5\u5C55\u5F00\u6210 JSON \u6216\u8868\u683C"}),"\n",(0,s.jsx)(n.li,{children:"\u5728\u65E5\u5FD7\u6570\u636E\u4E0A\u4E0B\u6587\u4EA4\u4E92\u5F0F\u70B9\u51FB\u589E\u52A0\u548C\u5220\u9664\u7B5B\u9009\u6761\u4EF6"}),"\n",(0,s.jsx)(n.li,{children:"\u641C\u7D22\u7ED3\u679C\u7684\u5B57\u6BB5 Top \u503C\u5C55\u793A\uFF0C\u4FBF\u4E8E\u53D1\u73B0\u5F02\u5E38\u503C\u548C\u8FDB\u4E00\u6B65\u4E0B\u94BB\u5206\u6790"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["\u60A8\u53EF\u4EE5\u8054\u7CFB ",(0,s.jsx)(n.a,{href:"mailto:dev@doris.apache.org",children:"dev@doris.apache.org"})," \u83B7\u5F97\u66F4\u591A\u5E2E\u52A9\u3002"]})]})}function a(e={}){let{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(x,{...e})}):x(e)}},762222:function(e,n,t){t.d(n,{Z:function(){return l}});let l=t.p+"assets/images/WebUI-CN-6e31a00cbff53ca123f7aed0780ac1f0.jpeg"},250065:function(e,n,t){t.d(n,{Z:function(){return d},a:function(){return r}});var l=t(667294);let s={},i=l.createContext(s);function r(e){let n=l.useContext(i);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),l.createElement(i.Provider,{value:n},e.children)}}}]);