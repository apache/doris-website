"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["846210"],{250106:function(n,e,a){a.r(e),a.d(e,{default:()=>p,frontMatter:()=>o,metadata:()=>r,assets:()=>i,toc:()=>c,contentTitle:()=>l});var r=JSON.parse('{"id":"data-operate/import/data-source/migrate-data-from-other-oltp","title":"\u4ECE\u5176\u4ED6 TP \u7CFB\u7EDF\u8FC1\u79FB\u6570\u636E","description":"\u4ECE\u5176\u4ED6 TP \u7CFB\u7EDF\uFF0C\u5982 MySQL/SqlServer/Oracle \u7B49\uFF0C\u8FC1\u79FB\u6570\u636E\u5230 Doris\uFF0C\u53EF\u4EE5\u6709\u591A\u79CD\u65B9\u5F0F\u3002","source":"@site/i18n/zh-CN/docusaurus-plugin-content-docs/version-2.1/data-operate/import/data-source/migrate-data-from-other-oltp.md","sourceDirName":"data-operate/import/data-source","slug":"/data-operate/import/data-source/migrate-data-from-other-oltp","permalink":"/zh-CN/docs/2.1/data-operate/import/data-source/migrate-data-from-other-oltp","draft":false,"unlisted":false,"tags":[],"version":"2.1","lastUpdatedAt":1770477659000,"frontMatter":{"title":"\u4ECE\u5176\u4ED6 TP \u7CFB\u7EDF\u8FC1\u79FB\u6570\u636E","language":"zh-CN","description":"\u4ECE\u5176\u4ED6 TP \u7CFB\u7EDF\uFF0C\u5982 MySQL/SqlServer/Oracle \u7B49\uFF0C\u8FC1\u79FB\u6570\u636E\u5230 Doris\uFF0C\u53EF\u4EE5\u6709\u591A\u79CD\u65B9\u5F0F\u3002"},"sidebar":"docs","previous":{"title":"\u4ECE\u5176\u4ED6 AP \u7CFB\u7EDF\u8FC1\u79FB\u6570\u636E","permalink":"/zh-CN/docs/2.1/data-operate/import/data-source/migrate-data-from-other-olap"},"next":{"title":"Stream Load","permalink":"/zh-CN/docs/2.1/data-operate/import/import-way/stream-load-manual"}}'),s=a("785893"),t=a("250065");let o={title:"\u4ECE\u5176\u4ED6 TP \u7CFB\u7EDF\u8FC1\u79FB\u6570\u636E",language:"zh-CN",description:"\u4ECE\u5176\u4ED6 TP \u7CFB\u7EDF\uFF0C\u5982 MySQL/SqlServer/Oracle \u7B49\uFF0C\u8FC1\u79FB\u6570\u636E\u5230 Doris\uFF0C\u53EF\u4EE5\u6709\u591A\u79CD\u65B9\u5F0F\u3002"},l=void 0,i={},c=[{value:"Multi-Catalog",id:"multi-catalog",level:2},{value:"Flink Doris Connector",id:"flink-doris-connector",level:2},{value:"Spark Connector",id:"spark-connector",level:2},{value:"DataX / Seatunnel / CloudCanal \u7B49\u4E09\u65B9\u5DE5\u5177",id:"datax--seatunnel--cloudcanal-\u7B49\u4E09\u65B9\u5DE5\u5177",level:2}];function d(n){let e={a:"a",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.a)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.p,{children:"\u4ECE\u5176\u4ED6 TP \u7CFB\u7EDF\uFF0C\u5982 MySQL/SqlServer/Oracle \u7B49\uFF0C\u8FC1\u79FB\u6570\u636E\u5230 Doris\uFF0C\u53EF\u4EE5\u6709\u591A\u79CD\u65B9\u5F0F\u3002"}),"\n",(0,s.jsx)(e.h2,{id:"multi-catalog",children:"Multi-Catalog"}),"\n",(0,s.jsx)(e.p,{children:"\u4F7F\u7528 Catalog \u6620\u5C04\u4E3A\u5916\u8868\uFF0C\u7136\u540E\u4F7F\u7528 INSERT INTO \u6216\u8005 CREATE-TABLE-AS-SELECT \u8BED\u53E5\uFF0C\u5B8C\u6210\u6570\u636E\u5BFC\u5165\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u4EE5 MySQL \u4E3A\u4F8B\uFF1A"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"CREATE CATALOG mysql_catalog properties(\n    'type' = 'jdbc',\n    'user' = 'root',\n    'password' = '123456',\n    'jdbc_url' = 'jdbc:mysql://host:3306/mysql_db',\n    'driver_url' = 'mysql-connector-java-8.0.25.jar',\n    'driver_class' = 'com.mysql.cj.jdbc.Driver'\n);\n\n-- \u901A\u8FC7 insert \u5BFC\u5165\nINSERT INTO internal.doris_db.tbl1\nSELECT * FROM iceberg_catalog.iceberg_db.table1;\n\n-- \u901A\u8FC7 ctas \u5BFC\u5165\nCREATE TABLE internal.doris_db.tbl1\nPROPERTIES('replication_num' = '1')\nAS\nSELECT * FROM iceberg_catalog.iceberg_db.table1;\n"})}),"\n",(0,s.jsxs)(e.p,{children:["\u5177\u4F53\u53EF\u53C2\u8003 ",(0,s.jsx)(e.a,{href:"../../../data-operate/import/import-way/insert-into-manual",children:"Catalog \u6570\u636E\u5BFC\u5165"}),"\u3002"]}),"\n",(0,s.jsx)(e.h2,{id:"flink-doris-connector",children:"Flink Doris Connector"}),"\n",(0,s.jsx)(e.p,{children:"\u53EF\u4EE5\u501F\u52A9\u4E8E Flink \u5B8C\u6210 TP \u7CFB\u7EDF\u7684\u79BB\u7EBF\u548C\u5B9E\u65F6\u540C\u6B65\u3002"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u79BB\u7EBF\u540C\u6B65\u53EF\u4EE5\u4F7F\u7528 Flink \u7684 JDBC Source \u548C Doris Sink \u5B8C\u6210\u6570\u636E\u7684\u5BFC\u5165\uFF0C\u4EE5 FlinkSQL \u4E3A\u4F8B\uFF1A"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"CREATE TABLE student_source (\n    id INT,\n    name STRING,\n    age INT\n  PRIMARY KEY (id) NOT ENFORCED\n) WITH (\n  'connector' = 'jdbc',\n  'url' = 'jdbc:mysql://localhost:3306/mydatabase',\n  'table-name' = 'students',\n  'username' = 'username',\n  'password' = 'password',\n);\n\nCREATE TABLE student_sink (\n    id INT,\n    name STRING,\n    age INT\n    ) \n    WITH (\n      'connector' = 'doris',\n      'fenodes' = '127.0.0.1:8030',\n      'table.identifier' = 'test.students',\n      'username' = 'root',\n      'password' = 'password',\n      'sink.label-prefix' = 'doris_label'\n);\n\nINSERT into student_sink select * from student_source;\n"})}),"\n",(0,s.jsxs)(e.p,{children:["\u5177\u4F53\u53EF\u53C2\u8003 ",(0,s.jsx)(e.a,{href:"https://nightlies.apache.org/flink/flink-docs-master/zh/docs/connectors/table/jdbc/#%e5%a6%82%e4%bd%95%e5%88%9b%e5%bb%ba-jdbc-%e8%a1%a8",children:"Flink JDBC"}),"\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u5B9E\u65F6\u540C\u6B65\u53EF\u4EE5\u501F\u52A9 FlinkCDC\uFF0C\u5B8C\u6210\u5168\u91CF\u548C\u589E\u91CF\u6570\u636E\u7684\u8BFB\u53D6\uFF0C\u4EE5 FlinkSQL \u4E3A\u4F8B\uFF1A"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"SET 'execution.checkpointing.interval' = '10s';\n\nCREATE TABLE cdc_mysql_source (\n  id int\n  ,name VARCHAR\n  ,PRIMARY KEY (id) NOT ENFORCED\n) WITH (\n'connector' = 'mysql-cdc',\n'hostname' = '127.0.0.1',\n'port' = '3306',\n'username' = 'root',\n'password' = 'password',\n'database-name' = 'database',\n'table-name' = 'table'\n);\n\n-- \u652F\u6301\u540C\u6B65 insert/update/delete \u4E8B\u4EF6\nCREATE TABLE doris_sink (\nid INT,\nname STRING\n) \nWITH (\n  'connector' = 'doris',\n  'fenodes' = '127.0.0.1:8030',\n  'table.identifier' = 'database.table',\n  'username' = 'root',\n  'password' = '',\n  'sink.properties.format' = 'json',\n  'sink.properties.read_json_by_line' = 'true',\n  'sink.enable-delete' = 'true',  -- \u540C\u6B65\u5220\u9664\u4E8B\u4EF6\n  'sink.label-prefix' = 'doris_label'\n);\n\ninsert into doris_sink select id,name from cdc_mysql_source;\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u540C\u65F6\u5BF9\u4E8E TP \u6570\u636E\u5E93\u4E2D \u6574\u5E93\u6216\u8005\u591A\u8868\u7684\u540C\u6B65\u64CD\u4F5C\uFF0C\u53EF\u4EE5\u4F7F\u7528 Flink Doris Connector \u63D0\u4F9B\u7684\u6574\u5E93\u540C\u6B65\u529F\u80FD\uFF0C\u4E00\u952E\u5B8C\u6210 TP \u6570\u636E\u5E93\u7684\u5199\u5165\uFF0C\u5982\uFF1A"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-shell",children:'<FLINK_HOME>bin/flink run \\\n    -Dexecution.checkpointing.interval=10s \\\n    -Dparallelism.default=1 \\\n    -c org.apache.doris.flink.tools.cdc.CdcTools \\\n    lib/flink-doris-connector-1.16-24.0.1.jar \\\n    mysql-sync-database \\\n    --database test_db \\\n    --mysql-conf hostname=127.0.0.1 \\\n    --mysql-conf port=3306 \\\n    --mysql-conf username=root \\\n    --mysql-conf password=123456 \\\n    --mysql-conf database-name=mysql_db \\\n    --including-tables "tbl1|test.*" \\\n    --sink-conf fenodes=127.0.0.1:8030 \\\n    --sink-conf username=root \\\n    --sink-conf password=123456 \\\n    --sink-conf jdbc-url=jdbc:mysql://127.0.0.1:9030 \\\n    --sink-conf sink.label-prefix=label \\\n    --table-conf replication_num=1 \n'})}),"\n",(0,s.jsxs)(e.p,{children:["\u5177\u4F53\u53EF\u53C2\u8003\uFF1A",(0,s.jsx)(e.a,{href:"/zh-CN/docs/2.1/ecosystem/flink-doris-connector#%E6%95%B4%E5%BA%93%E5%90%8C%E6%AD%A5",children:"\u6574\u5E93\u540C\u6B65"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"spark-connector",children:"Spark Connector"}),"\n",(0,s.jsx)(e.p,{children:"\u53EF\u4EE5\u901A\u8FC7 Spark Connector \u7684 JDBC Source \u548C Doris Sink \u5B8C\u6210\u6570\u636E\u7684\u5199\u5165\u3002"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:'val jdbcDF = spark.read\n  .format("jdbc")\n  .option("url", "jdbc:postgresql:dbserver")\n  .option("dbtable", "schema.tablename")\n  .option("user", "username")\n  .option("password", "password")\n  .load()\n  \n jdbcDF.write.format("doris")\n  .option("doris.table.identifier", "db.table")\n  .option("doris.fenodes", "127.0.0.1:8030")\n  .option("user", "root")\n  .option("password", "")\n  .save() \n'})}),"\n",(0,s.jsxs)(e.p,{children:["\u5177\u4F53\u53EF\u53C2\u8003\uFF1A",(0,s.jsx)(e.a,{href:"https://spark.apache.org/docs/latest/sql-data-sources-jdbc.html",children:"JDBC To Other Databases"}),"\uFF0C",(0,s.jsx)(e.a,{href:"/zh-CN/docs/2.1/ecosystem/spark-doris-connector#%E6%89%B9%E9%87%8F%E5%86%99%E5%85%A5",children:"Spark Doris Connector"})]}),"\n",(0,s.jsx)(e.h2,{id:"datax--seatunnel--cloudcanal-\u7B49\u4E09\u65B9\u5DE5\u5177",children:"DataX / Seatunnel / CloudCanal \u7B49\u4E09\u65B9\u5DE5\u5177"}),"\n",(0,s.jsx)(e.p,{children:"\u9664\u6B64\u4E4B\u5916\uFF0C\u4E5F\u53EF\u4EE5\u4F7F\u7528\u7B2C\u4E09\u65B9\u540C\u6B65\u5DE5\u5177\u6765\u8FDB\u884C\u6570\u636E\u540C\u6B65\uFF0C\u66F4\u591A\u53EF\u53C2\u8003\uFF1A"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"/zh-CN/docs/2.1/ecosystem/datax",children:"DataX"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"/zh-CN/docs/2.1/ecosystem/seatunnel",children:"Seatunnel"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"/zh-CN/docs/2.1/ecosystem/cloudcanal",children:"CloudCanal"})}),"\n"]})]})}function p(n={}){let{wrapper:e}={...(0,t.a)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(d,{...n})}):d(n)}},250065:function(n,e,a){a.d(e,{Z:function(){return l},a:function(){return o}});var r=a(667294);let s={},t=r.createContext(s);function o(n){let e=r.useContext(t);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:o(n.components),r.createElement(t.Provider,{value:e},n.children)}}}]);