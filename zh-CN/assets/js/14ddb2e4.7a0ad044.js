"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["794600"],{694491:function(n,i,e){e.r(i),e.d(i,{default:()=>a,frontMatter:()=>o,metadata:()=>s,assets:()=>d,toc:()=>h,contentTitle:()=>t});var s=JSON.parse('{"id":"query/join-optimization/doris-join-optimization","title":"Join \u4F18\u5316\u539F\u7406","description":"Doris \u652F\u6301\u4E24\u79CD\u7269\u7406\u7B97\u5B50\uFF0C\u4E00\u7C7B\u662F Hash Join\uFF0C\u53E6\u4E00\u7C7B\u662F Nest Loop Join\u3002","source":"@site/i18n/zh-CN/docusaurus-plugin-content-docs/version-2.0/query/join-optimization/doris-join-optimization.md","sourceDirName":"query/join-optimization","slug":"/query/join-optimization/doris-join-optimization","permalink":"/zh-CN/docs/2.0/query/join-optimization/doris-join-optimization","draft":false,"unlisted":false,"tags":[],"version":"2.0","frontMatter":{"title":"Join \u4F18\u5316\u539F\u7406","language":"zh-CN"},"sidebar":"docs","previous":{"title":"\u540C\u6B65\u7269\u5316\u89C6\u56FE","permalink":"/zh-CN/docs/2.0/query/view-materialized-view/materialized-view"},"next":{"title":"Bucket Shuffle Join","permalink":"/zh-CN/docs/2.0/query/join-optimization/bucket-shuffle-join"}}'),r=e("785893"),l=e("250065");let o={title:"Join \u4F18\u5316\u539F\u7406",language:"zh-CN"},t=void 0,d={},h=[{value:"Doris Shuffle \u65B9\u5F0F",id:"doris-shuffle-\u65B9\u5F0F",level:2},{value:"\u56DB\u79CD Shuffle \u65B9\u5F0F\u5BF9\u6BD4",id:"\u56DB\u79CD-shuffle-\u65B9\u5F0F\u5BF9\u6BD4",level:3},{value:"Runtime Filter  Join \u4F18\u5316",id:"runtime-filter--join-\u4F18\u5316",level:2},{value:"Runtime Filter \u7C7B\u578B",id:"runtime-filter-\u7C7B\u578B",level:3},{value:"Join Reorder",id:"join-reorder",level:2},{value:"Doris Join \u8C03\u4F18\u65B9\u6CD5",id:"doris-join-\u8C03\u4F18\u65B9\u6CD5",level:2},{value:"\u8C03\u4F18\u6848\u4F8B\u5B9E\u6218",id:"\u8C03\u4F18\u6848\u4F8B\u5B9E\u6218",level:2},{value:"\u6848\u4F8B\u4E00",id:"\u6848\u4F8B\u4E00",level:3},{value:"\u6848\u4F8B\u4E8C",id:"\u6848\u4F8B\u4E8C",level:3},{value:"\u6848\u4F8B\u4E09",id:"\u6848\u4F8B\u4E09",level:3},{value:"Doris Join \u8C03\u4F18\u5EFA\u8BAE",id:"doris-join-\u8C03\u4F18\u5EFA\u8BAE",level:2}];function c(n){let i={code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.a)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(i.p,{children:["Doris \u652F\u6301\u4E24\u79CD\u7269\u7406\u7B97\u5B50\uFF0C\u4E00\u7C7B\u662F ",(0,r.jsx)(i.strong,{children:"Hash Join"}),"\uFF0C\u53E6\u4E00\u7C7B\u662F ",(0,r.jsx)(i.strong,{children:"Nest Loop Join"}),"\u3002"]}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsx)(i.p,{children:"Hash Join\uFF1A\u5728\u53F3\u8868\u4E0A\u6839\u636E\u7B49\u503C Join \u5217\u5EFA\u7ACB\u54C8\u5E0C\u8868\uFF0C\u5DE6\u8868\u6D41\u5F0F\u7684\u5229\u7528\u54C8\u5E0C\u8868\u8FDB\u884C Join \u8BA1\u7B97\uFF0C\u5B83\u7684\u9650\u5236\u662F\u53EA\u80FD\u9002\u7528\u4E8E\u7B49\u503C Join\u3002"}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsx)(i.p,{children:"Nest Loop Join\uFF1A\u901A\u8FC7\u4E24\u4E2A for \u5FAA\u73AF\uFF0C\u5F88\u76F4\u89C2\u3002\u7136\u540E\u5B83\u9002\u7528\u7684\u573A\u666F\u5C31\u662F\u4E0D\u7B49\u503C\u7684 Join\uFF0C\u4F8B\u5982\uFF1A\u5927\u4E8E\u5C0F\u4E8E\u6216\u8005\u662F\u9700\u8981\u6C42\u7B1B\u5361\u5C14\u79EF\u7684\u573A\u666F\u3002\u5B83\u662F\u4E00\u4E2A\u901A\u7528\u7684 Join \u7B97\u5B50\uFF0C\u4F46\u662F\u6027\u80FD\u8868\u73B0\u5DEE\u3002"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(i.p,{children:"\u4F5C\u4E3A\u5206\u5E03\u5F0F\u7684 MPP \u6570\u636E\u5E93\uFF0C\u5728 Join \u7684\u8FC7\u7A0B\u4E2D\u662F\u9700\u8981\u8FDB\u884C\u6570\u636E\u7684 Shuffle\u3002\u6570\u636E\u9700\u8981\u8FDB\u884C\u62C6\u5206\u8C03\u5EA6\uFF0C\u624D\u80FD\u4FDD\u8BC1\u6700\u7EC8\u7684 Join \u7ED3\u679C\u662F\u6B63\u786E\u7684\u3002\u4E3E\u4E2A\u7B80\u5355\u7684\u4F8B\u5B50\uFF0C\u5047\u8BBE\u5173\u7CFB S \u548C R \u8FDB\u884C Join\uFF0CN \u8868\u793A\u53C2\u4E0E Join \u8BA1\u7B97\u7684\u8282\u70B9\u7684\u6570\u91CF\uFF1BT \u5219\u8868\u793A\u5173\u7CFB\u7684 Tuple \u6570\u76EE\u3002"}),"\n",(0,r.jsx)(i.h2,{id:"doris-shuffle-\u65B9\u5F0F",children:"Doris Shuffle \u65B9\u5F0F"}),"\n",(0,r.jsx)(i.p,{children:"Doris \u652F\u6301 4 \u79CD Shuffle \u65B9\u5F0F"}),"\n",(0,r.jsxs)(i.ol,{children:["\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsx)(i.p,{children:"Broadcast Join"}),"\n",(0,r.jsx)(i.p,{children:"\u5B83\u8981\u6C42\u628A\u53F3\u8868\u5168\u91CF\u7684\u6570\u636E\u90FD\u53D1\u9001\u5230\u5DE6\u8868\u4E0A\uFF0C\u5373\u6BCF\u4E00\u4E2A\u53C2\u4E0E Join \u7684\u8282\u70B9\uFF0C\u5B83\u90FD\u62E5\u6709\u53F3\u8868\u5168\u91CF\u7684\u6570\u636E\uFF0C\u4E5F\u5C31\u662F T(R)\u3002"}),"\n",(0,r.jsx)(i.p,{children:"\u5B83\u9002\u7528\u7684\u573A\u666F\u662F\u6BD4\u8F83\u901A\u7528\u7684\uFF0C\u540C\u65F6\u80FD\u591F\u652F\u6301 Hash Join \u548C Nest loop Join\uFF0C\u5B83\u7684\u7F51\u7EDC\u5F00\u9500 N * T(R)\u3002"}),"\n",(0,r.jsx)(i.p,{children:(0,r.jsx)(i.img,{alt:"BroadCast Join",src:e(396039).Z+"",width:"2560",height:"1440"})}),"\n",(0,r.jsx)(i.p,{children:"\u5DE6\u8868\u6570\u636E\u4E0D\u79FB\u52A8\uFF0C\u53F3\u8868\u6570\u636E\u53D1\u9001\u5230\u5DE6\u8868\u6570\u636E\u7684\u626B\u63CF\u8282\u70B9\u3002"}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsx)(i.p,{children:"Shuffle Join"}),"\n",(0,r.jsx)(i.p,{children:"\u5F53\u8FDB\u884C Hash Join \u65F6\u5019\uFF0C\u53EF\u4EE5\u901A\u8FC7 Join \u5217\u8BA1\u7B97\u5BF9\u5E94\u7684 Hash \u503C\uFF0C\u5E76\u8FDB\u884C Hash \u5206\u6876\u3002"}),"\n",(0,r.jsx)(i.p,{children:"\u5B83\u7684\u7F51\u7EDC\u5F00\u9500\u5219\u662F\uFF1AT\uFF08S\uFF09 + T\uFF08R\uFF09\uFF0C\u4F46\u5B83\u53EA\u80FD\u652F\u6301 Hash Join\uFF0C\u56E0\u4E3A\u5B83\u662F\u6839\u636E Join \u7684\u6761\u4EF6\u4E5F\u53BB\u505A\u8BA1\u7B97\u5206\u6876\u7684\u3002"}),"\n",(0,r.jsx)(i.p,{children:(0,r.jsx)(i.img,{alt:"Shuffle Join",src:e(662008).Z+"",width:"2560",height:"1040"})}),"\n",(0,r.jsx)(i.p,{children:"\u5DE6\u53F3\u8868\u6570\u636E\u6839\u636E\u5206\u533A\uFF0C\u8BA1\u7B97\u7684\u7ED3\u679C\u53D1\u9001\u5230\u4E0D\u540C\u7684\u5206\u533A\u8282\u70B9\u4E0A\u3002"}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsx)(i.p,{children:"Bucket Shuffle Join"}),"\n",(0,r.jsx)(i.p,{children:"Doris \u7684\u8868\u6570\u636E\u672C\u8EAB\u662F\u901A\u8FC7 Hash \u8BA1\u7B97\u5206\u6876\u7684\uFF0C\u6240\u4EE5\u5C31\u53EF\u4EE5\u5229\u7528\u8868\u672C\u8EAB\u7684\u5206\u6876\u5217\u7684\u6027\u8D28\u6765\u8FDB\u884C Join \u6570\u636E\u7684 Shuffle\u3002\u5047\u5982\u4E24\u5F20\u8868\u9700\u8981\u505A Join\uFF0C\u5E76\u4E14 Join \u5217\u662F\u5DE6\u8868\u7684\u5206\u6876\u5217\uFF0C\u90A3\u4E48\u5DE6\u8868\u7684\u6570\u636E\u5176\u5B9E\u53EF\u4EE5\u4E0D\u7528\u53BB\u79FB\u52A8\u53F3\u8868\u901A\u8FC7\u5DE6\u8868\u7684\u6570\u636E\u5206\u6876\u53D1\u9001\u6570\u636E\u5C31\u53EF\u4EE5\u5B8C\u6210  Join  \u7684\u8BA1\u7B97\u3002"}),"\n",(0,r.jsx)(i.p,{children:"\u5B83\u7684\u7F51\u7EDC\u5F00\u9500\u5219\u662F\uFF1AT\uFF08R\uFF09\u76F8\u5F53\u4E8E\u53EA Shuffle \u53F3\u8868\u7684\u6570\u636E\u5C31\u53EF\u4EE5\u4E86\u3002"}),"\n",(0,r.jsx)(i.p,{children:(0,r.jsx)(i.img,{alt:"Bucket Shuffle Join",src:e(753969).Z+"",width:"2560",height:"1040"})}),"\n",(0,r.jsx)(i.p,{children:"\u5DE6\u8868\u6570\u636E\u4E0D\u79FB\u52A8\uFF0C\u53F3\u8868\u6570\u636E\u6839\u636E\u5206\u533A\u8BA1\u7B97\u7684\u7ED3\u679C\u53D1\u9001\u5230\u5DE6\u8868\u626B\u8868\u7684\u8282\u70B9"}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsx)(i.p,{children:"Colocate"}),"\n",(0,r.jsx)(i.p,{children:"\u5B83\u4E0E Bucket Shuffle Join \u76F8\u4F3C\uFF0C\u76F8\u5F53\u4E8E\u5728\u6570\u636E\u5BFC\u5165\u7684\u65F6\u5019\uFF0C\u6839\u636E\u9884\u8BBE\u7684 Join \u5217\u7684\u573A\u666F\u5DF2\u7ECF\u505A\u597D\u4E86\u6570\u636E\u7684 Shuffle\u3002\u90A3\u4E48\u5B9E\u9645\u67E5\u8BE2\u7684\u65F6\u5019\u5C31\u53EF\u4EE5\u76F4\u63A5\u8FDB\u884C Join \u8BA1\u7B97\u800C\u4E0D\u9700\u8981\u8003\u8651\u6570\u636E\u7684 Shuffle \u95EE\u9898\u4E86\u3002"}),"\n",(0,r.jsx)(i.p,{children:(0,r.jsx)(i.img,{alt:"Colocation Join",src:e(339207).Z+"",width:"2560",height:"800"})}),"\n",(0,r.jsx)(i.p,{children:"\u6570\u636E\u5DF2\u7ECF\u9884\u5148\u5206\u533A\uFF0C\u76F4\u63A5\u5728\u672C\u5730\u8FDB\u884C Join \u8BA1\u7B97"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"\u56DB\u79CD-shuffle-\u65B9\u5F0F\u5BF9\u6BD4",children:"\u56DB\u79CD Shuffle \u65B9\u5F0F\u5BF9\u6BD4"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(i.table,{children:[(0,r.jsx)(i.thead,{children:(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.th,{children:"Shuffle \u65B9\u5F0F"}),(0,r.jsx)(i.th,{children:"\u7F51\u7EDC\u5F00\u9500"}),(0,r.jsx)(i.th,{children:"\u7269\u7406\u7B97\u5B50"}),(0,r.jsx)(i.th,{children:"\u9002\u7528\u573A\u666F"})]})}),(0,r.jsxs)(i.tbody,{children:[(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"BroadCast"}),(0,r.jsx)(i.td,{children:"N * T(R)"}),(0,r.jsx)(i.td,{children:"Hash Join / Nest Loop Join"}),(0,r.jsx)(i.td,{children:"\u901A\u7528"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"Shuffle"}),(0,r.jsx)(i.td,{children:"T(S) + T(R)"}),(0,r.jsx)(i.td,{children:"Hash Join"}),(0,r.jsx)(i.td,{children:"\u901A\u7528"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"Bucket Shuffle"}),(0,r.jsx)(i.td,{children:"T(R)"}),(0,r.jsx)(i.td,{children:"Hash Join"}),(0,r.jsx)(i.td,{children:"Join \u6761\u4EF6\u4E2D\u5B58\u5728\u5DE6\u8868\u7684\u5206\u5E03\u5F0F\u5217\uFF0C\u4E14\u5DE6\u8868\u6267\u884C\u65F6\u4E3A\u5355\u5206\u533A"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"Colocate"}),(0,r.jsx)(i.td,{children:"0"}),(0,r.jsx)(i.td,{children:"Hash Join"}),(0,r.jsx)(i.td,{children:"Join \u6761\u4EF6\u4E2D\u5B58\u5728\u5DE6\u8868\u7684\u5206\u5E03\u5F0F\u5217\uFF0C\u4E14\u5DE6\u53F3\u8868\u540C\u5C5E\u4E8E\u4E00\u4E2A Colocate Group"})]})]})]}),"\n",(0,r.jsx)(i.p,{children:"N\uFF1A\u53C2\u4E0E Join \u8BA1\u7B97\u7684 Instance \u4E2A\u6570"}),"\n",(0,r.jsx)(i.p,{children:"T(\u5173\u7CFB) : \u5173\u7CFB\u7684 Tuple \u6570\u76EE"}),"\n",(0,r.jsx)(i.p,{children:"\u4E0A\u9762\u8FD9 4 \u79CD\u65B9\u5F0F\u7075\u6D3B\u5EA6\u662F\u4ECE\u9AD8\u5230\u4F4E\u7684\uFF0C\u5B83\u5BF9\u8FD9\u4E2A\u6570\u636E\u5206\u5E03\u7684\u8981\u6C42\u662F\u8D8A\u6765\u8D8A\u4E25\u683C\uFF0C\u4F46 Join \u8BA1\u7B97\u7684\u6027\u80FD\u4E5F\u662F\u8D8A\u6765\u8D8A\u597D\u7684\u3002"}),"\n",(0,r.jsx)(i.h2,{id:"runtime-filter--join-\u4F18\u5316",children:"Runtime Filter  Join \u4F18\u5316"}),"\n",(0,r.jsx)(i.p,{children:"Doris \u5728\u8FDB\u884C Hash Join \u8BA1\u7B97\u65F6\u4F1A\u5728\u53F3\u8868\u6784\u5EFA\u4E00\u4E2A\u54C8\u5E0C\u8868\uFF0C\u5DE6\u8868\u6D41\u5F0F\u7684\u901A\u8FC7\u53F3\u8868\u7684\u54C8\u5E0C\u8868\u4ECE\u800C\u5F97\u51FA Join \u7ED3\u679C\u3002\u800C RuntimeFilter \u5C31\u662F\u5145\u5206\u5229\u7528\u4E86\u53F3\u8868\u7684 Hash \u8868\uFF0C\u5728\u53F3\u8868\u751F\u6210\u54C8\u5E0C\u8868\u7684\u65F6\u5019\uFF0C\u540C\u65F6\u751F\u6210\u4E00\u4E2A\u57FA\u4E8E\u54C8\u5E0C\u8868\u6570\u636E\u7684\u4E00\u4E2A\u8FC7\u6EE4\u6761\u4EF6\uFF0C\u7136\u540E\u4E0B\u63A8\u5230\u5DE6\u8868\u7684\u6570\u636E\u626B\u63CF\u8282\u70B9\u3002\u901A\u8FC7\u8FD9\u6837\u7684\u65B9\u5F0F\uFF0CDoris \u53EF\u4EE5\u5728\u8FD0\u884C\u65F6\u8FDB\u884C\u6570\u636E\u8FC7\u6EE4\u3002"}),"\n",(0,r.jsx)(i.p,{children:"\u5047\u5982\u5DE6\u8868\u662F\u4E00\u5F20\u5927\u8868\uFF0C\u53F3\u8868\u662F\u4E00\u5F20\u5C0F\u8868\uFF0C\u90A3\u4E48\u5229\u7528\u53F3\u8868\u751F\u6210\u7684\u8FC7\u6EE4\u6761\u4EF6\u5C31\u53EF\u4EE5\u628A\u7EDD\u5927\u591A\u6570\u5728 Join \u5C42\u8981\u8FC7\u6EE4\u7684\u6570\u636E\u5728\u6570\u636E\u8BFB\u53D6\u65F6\u5C31\u63D0\u524D\u8FC7\u6EE4\uFF0C\u8FD9\u6837\u5C31\u80FD\u5927\u5E45\u5EA6\u7684\u63D0\u5347 Join \u67E5\u8BE2\u7684\u6027\u80FD\u3002"}),"\n",(0,r.jsx)(i.p,{children:"\u5F53\u524D Doris \u652F\u6301\u4E09\u79CD\u7C7B\u578B RuntimeFilter"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsx)(i.p,{children:"\u4E00\u79CD\u662F IN\uFF0C\u5F88\u597D\u7406\u89E3\uFF0C\u5C06\u4E00\u4E2A hashset \u4E0B\u63A8\u5230\u6570\u636E\u626B\u63CF\u8282\u70B9\u3002"}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsx)(i.p,{children:"\u7B2C\u4E8C\u79CD\u5C31\u662F BloomFilter\uFF0C\u5C31\u662F\u5229\u7528\u54C8\u5E0C\u8868\u7684\u6570\u636E\u6784\u9020\u4E00\u4E2A BloomFilter\uFF0C\u7136\u540E\u628A\u8FD9\u4E2A BloomFilter \u4E0B\u63A8\u5230\u67E5\u8BE2\u6570\u636E\u7684\u626B\u63CF\u8282\u70B9\u3002"}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsx)(i.p,{children:"\u6700\u540E\u4E00\u79CD\u5C31\u662F MinMax\uFF0C\u5C31\u662F\u4E2A Range \u8303\u56F4\uFF0C\u901A\u8FC7\u53F3\u8868\u6570\u636E\u786E\u5B9A Range \u8303\u56F4\u4E4B\u540E\uFF0C\u4E0B\u63A8\u7ED9\u6570\u636E\u626B\u63CF\u8282\u70B9\u3002"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(i.p,{children:"Runtime Filter \u9002\u7528\u7684\u573A\u666F\u6709\u4E24\u4E2A\u8981\u6C42\uFF1A"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsx)(i.p,{children:"\u7B2C\u4E00\u4E2A\u8981\u6C42\u5C31\u662F\u5DE6\u8868\u5927\u53F3\u8868\u5C0F\uFF0C\u56E0\u4E3A\u6784\u5EFA Runtime Filter \u662F\u9700\u8981\u627F\u62C5\u8BA1\u7B97\u6210\u672C\u7684\uFF0C\u5305\u62EC\u4E00\u4E9B\u5185\u5B58\u7684\u5F00\u9500\u3002"}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsx)(i.p,{children:"\u7B2C\u4E8C\u4E2A\u8981\u6C42\u5C31\u662F\u5DE6\u53F3\u8868 Join \u51FA\u6765\u7684\u7ED3\u679C\u5F88\u5C11\uFF0C\u8BF4\u660E\u8FD9\u4E2A Join \u53EF\u4EE5\u8FC7\u6EE4\u6389\u5DE6\u8868\u7684\u7EDD\u5927\u90E8\u5206\u6570\u636E\u3002"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(i.p,{children:"\u5F53\u7B26\u5408\u4E0A\u9762\u4E24\u4E2A\u6761\u4EF6\u7684\u60C5\u51B5\u4E0B\uFF0C\u5F00\u542F Runtime Filter \u5C31\u80FD\u6536\u83B7\u6BD4\u8F83\u597D\u7684\u6548\u679C"}),"\n",(0,r.jsx)(i.p,{children:"\u5F53 Join \u5217\u4E3A\u5DE6\u8868\u7684 Key \u5217\u65F6\uFF0CRuntimeFilter \u4F1A\u4E0B\u63A8\u5230\u5B58\u50A8\u5F15\u64CE\u3002Doris \u672C\u8EAB\u652F\u6301\u5EF6\u8FDF\u7269\u5316\uFF0C"}),"\n",(0,r.jsx)(i.p,{children:"\u5EF6\u8FDF\u7269\u5316\u7B80\u5355\u6765\u8BF4\u662F\u8FD9\u6837\u7684\uFF1A\u5047\u5982\u9700\u8981\u626B\u63CF A\u3001B\u3001C \u4E09\u5217\uFF0C\u5728 A \u5217\u4E0A\u6709\u4E00\u4E2A\u8FC7\u6EE4\u6761\u4EF6\uFF1AA \u7B49\u4E8E 2\uFF0C\u8981\u626B\u63CF 100 \u884C\u7684\u8BDD\uFF0C\u53EF\u4EE5\u5148\u628A A \u5217\u7684 100 \u884C\u626B\u63CF\u51FA\u6765\uFF0C\u518D\u901A\u8FC7 A = 2 \u8FD9\u4E2A\u8FC7\u6EE4\u6761\u4EF6\u8FC7\u6EE4\u3002\u4E4B\u540E\u901A\u8FC7\u8FC7\u6EE4\u5B8C\u6210\u540E\u7684\u7ED3\u679C\uFF0C\u518D\u53BB\u8BFB\u53D6 B\u3001C \u5217\uFF0C\u8FD9\u6837\u5C31\u80FD\u6781\u5927\u7684\u964D\u4F4E\u6570\u636E\u7684\u8BFB\u53D6 IO\u3002\u6240\u4EE5\u8BF4 Runtime Filter \u5982\u679C\u5728 Key \u5217\u4E0A\u751F\u6210\uFF0C\u540C\u65F6\u5229\u7528 Doris \u672C\u8EAB\u7684\u5EF6\u8FDF\u7269\u5316\u6765\u8FDB\u4E00\u6B65\u63D0\u5347\u67E5\u8BE2\u7684\u6027\u80FD\u3002"}),"\n",(0,r.jsx)(i.h3,{id:"runtime-filter-\u7C7B\u578B",children:"Runtime Filter \u7C7B\u578B"}),"\n",(0,r.jsx)(i.p,{children:"Doris \u63D0\u4F9B\u4E86\u4E09\u79CD\u4E0D\u540C\u7684 Runtime Filter \u7C7B\u578B\uFF1A"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"IN"})," \u7684\u4F18\u70B9\u662F\u8FC7\u6EE4\u6548\u679C\u660E\u663E\uFF0C\u4E14\u5FEB\u901F\u3002\u5B83\u7684\u7F3A\u70B9\u9996\u5148\u7B2C\u4E00\u4E2A\u5B83\u53EA\u9002\u7528\u4E8E BroadCast\uFF0C\u7B2C\u4E8C\uFF0C\u5B83\u53F3\u8868\u8D85\u8FC7\u4E00\u5B9A\u6570\u636E\u91CF\u7684\u65F6\u5019\u5C31\u5931\u6548\u4E86\uFF0C\u5F53\u524D Doris \u76EE\u524D\u914D\u7F6E\u7684\u662F 1024\uFF0C\u5373\u53F3\u8868\u5982\u679C\u5927\u4E8E 1024\uFF0CIN \u7684 Runtime Filter \u5C31\u76F4\u63A5\u5931\u6548\u4E86\u3002"]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"MinMax"})," \u7684\u4F18\u70B9\u662F\u5F00\u9500\u6BD4\u8F83\u5C0F\u3002\u5B83\u7684\u7F3A\u70B9\u5C31\u662F\u5BF9\u6570\u503C\u5217\u8FD8\u6709\u6BD4\u8F83\u597D\u7684\u6548\u679C\uFF0C\u4F46\u5BF9\u4E8E\u975E\u6570\u503C\u5217\uFF0C\u57FA\u672C\u4E0A\u5C31\u6CA1\u4EC0\u4E48\u6548\u679C\u3002"]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Bloom Filter"})," \u7684\u7279\u70B9\u5C31\u662F\u901A\u7528\uFF0C\u9002\u7528\u4E8E\u5404\u79CD\u7C7B\u578B\u3001\u6548\u679C\u4E5F\u6BD4\u8F83\u597D\u3002\u7F3A\u70B9\u5C31\u662F\u5B83\u7684\u914D\u7F6E\u6BD4\u8F83\u590D\u6742\u5E76\u4E14\u8BA1\u7B97\u8F83\u9AD8\u3002"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"join-reorder",children:"Join Reorder"}),"\n",(0,r.jsx)(i.p,{children:"\u6570\u636E\u5E93\u4E00\u65E6\u6D89\u53CA\u5230\u591A\u8868 Join\uFF0CJoin \u7684\u987A\u5E8F\u5BF9\u6574\u4E2A Join \u67E5\u8BE2\u7684\u6027\u80FD\u662F\u5F71\u54CD\u5F88\u5927\u7684\u3002\u5047\u8BBE\u6709\u4E09\u5F20\u8868 Join\uFF0C\u53C2\u8003\u4E0B\u9762\u8FD9\u5F20\u56FE\uFF0C\u5DE6\u8FB9\u662F a \u8868\u8DDF b \u5F20\u8868\u5148\u505A Join\uFF0C\u4E2D\u95F4\u7ED3\u679C\u7684\u6709 2000 \u884C\uFF0C\u7136\u540E\u4E0E c \u8868\u518D\u8FDB\u884C Join \u8BA1\u7B97\u3002"}),"\n",(0,r.jsx)(i.p,{children:"\u63A5\u4E0B\u6765\u770B\u53F3\u56FE\uFF0C\u628A Join \u7684\u987A\u5E8F\u8C03\u6574\u4E86\u4E00\u4E0B\u3002\u628A a \u8868\u5148\u4E0E c \u8868 Join\uFF0C\u751F\u6210\u7684\u4E2D\u95F4\u7ED3\u679C\u53EA\u6709 100\uFF0C\u7136\u540E\u6700\u7EC8\u518D\u4E0E b \u8868 Join \u8BA1\u7B97\u3002\u6700\u7EC8\u7684 Join \u7ED3\u679C\u662F\u4E00\u6837\u7684\uFF0C\u4F46\u662F\u5B83\u751F\u6210\u7684\u4E2D\u95F4\u7ED3\u679C\u6709 20 \u500D\u7684\u5DEE\u8DDD\uFF0C\u8FD9\u5C31\u4F1A\u4EA7\u751F\u4E00\u4E2A\u5F88\u5927\u7684\u6027\u80FD Diff \u4E86\u3002"}),"\n",(0,r.jsx)(i.p,{children:(0,r.jsx)(i.img,{alt:"Join Reorder",src:e(744313).Z+"",width:"2560",height:"1232"})}),"\n",(0,r.jsx)(i.p,{children:"Doris \u76EE\u524D\u652F\u6301\u57FA\u4E8E\u89C4\u5219\u7684 Join Reorder \u7B97\u6CD5\u3002\u5B83\u7684\u903B\u8F91\u662F\uFF1A"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsx)(i.p,{children:"\u8BA9\u5927\u8868\u3001\u8DDF\u5C0F\u8868\u5C3D\u91CF\u505A Join\uFF0C\u5B83\u751F\u6210\u7684\u4E2D\u95F4\u7ED3\u679C\u662F\u5C3D\u53EF\u80FD\u5C0F\u7684\u3002"}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsx)(i.p,{children:"\u628A\u6709\u6761\u4EF6\u7684 Join \u8868\u5F80\u524D\u653E\uFF0C\u4E5F\u5C31\u662F\u8BF4\u5C3D\u91CF\u8BA9\u6709\u6761\u4EF6\u7684 Join \u8868\u8FDB\u884C\u8FC7\u6EE4"}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsx)(i.p,{children:"Hash Join \u7684\u4F18\u5148\u7EA7\u9AD8\u4E8E Nest Loop Join\uFF0C\u56E0\u4E3A Hash join \u672C\u8EAB\u662F\u6BD4 Nest Loop Join \u5FEB\u5F88\u591A\u7684\u3002"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"doris-join-\u8C03\u4F18\u65B9\u6CD5",children:"Doris Join \u8C03\u4F18\u65B9\u6CD5"}),"\n",(0,r.jsx)(i.p,{children:"Doris Join \u8C03\u4F18\u7684\u65B9\u6CD5\uFF1A"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsx)(i.p,{children:"\u5229\u7528 Doris \u672C\u8EAB\u63D0\u4F9B\u7684 Profile\uFF0C\u53BB\u5B9A\u4F4D\u67E5\u8BE2\u7684\u74F6\u9888\u3002Profile \u4F1A\u8BB0\u5F55 Doris \u6574\u4E2A\u67E5\u8BE2\u5F53\u4E2D\u5404\u79CD\u4FE1\u606F\uFF0C\u8FD9\u662F\u8FDB\u884C\u6027\u80FD\u8C03\u4F18\u7684\u4E00\u624B\u8D44\u6599\u3002"}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsx)(i.p,{children:"\u4E86\u89E3 Doris \u7684 Join \u673A\u5236\uFF0C\u8FD9\u4E5F\u662F\u7B2C\u4E8C\u90E8\u5206\u8DDF\u5927\u5BB6\u5206\u4EAB\u7684\u5185\u5BB9\u3002\u77E5\u5176\u7136\u77E5\u5176\u6240\u4EE5\u7136\u3001\u4E86\u89E3\u5B83\u7684\u673A\u5236\uFF0C\u624D\u80FD\u5206\u6790\u5B83\u4E3A\u4EC0\u4E48\u6BD4\u8F83\u6162\u3002"}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsx)(i.p,{children:"\u5229\u7528 Session \u53D8\u91CF\u53BB\u6539\u53D8 Join \u7684\u4E00\u4E9B\u884C\u4E3A\uFF0C\u4ECE\u800C\u5B9E\u73B0 Join \u7684\u8C03\u4F18\u3002"}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsx)(i.p,{children:"\u67E5\u770B Query Plan \u53BB\u5206\u6790\u8FD9\u4E2A\u8C03\u4F18\u662F\u5426\u751F\u6548\u3002"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(i.p,{children:"\u4E0A\u9762\u7684 4 \u6B65\u57FA\u672C\u4E0A\u5B8C\u6210\u4E86\u4E00\u4E2A\u6807\u51C6\u7684 Join \u8C03\u4F18\u6D41\u7A0B\uFF0C\u63A5\u7740\u5C31\u662F\u5B9E\u9645\u53BB\u67E5\u8BE2\u9A8C\u8BC1\u5B83\uFF0C\u770B\u770B\u6548\u679C\u5230\u5E95\u600E\u4E48\u6837\u3002"}),"\n",(0,r.jsx)(i.p,{children:"\u5982\u679C\u524D\u9762 4 \u79CD\u65B9\u5F0F\u4E32\u8054\u8D77\u6765\u4E4B\u540E\uFF0C\u8FD8\u662F\u4E0D\u594F\u6548\u3002\u8FD9\u65F6\u5019\u53EF\u80FD\u5C31\u9700\u8981\u53BB\u505A Join \u8BED\u53E5\u7684\u6539\u5199\uFF0C\u6216\u8005\u662F\u6570\u636E\u5206\u5E03\u7684\u8C03\u6574\u3001\u9700\u8981\u91CD\u65B0\u53BB Recheck \u6574\u4E2A\u6570\u636E\u5206\u5E03\u662F\u5426\u5408\u7406\uFF0C\u5305\u62EC\u67E5\u8BE2 Join \u8BED\u53E5\uFF0C\u53EF\u80FD\u9700\u8981\u505A\u4E00\u4E9B\u624B\u52A8\u7684\u8C03\u6574\u3002\u5F53\u7136\u8FD9\u79CD\u65B9\u5F0F\u662F\u5FC3\u667A\u6210\u672C\u662F\u6BD4\u8F83\u9AD8\u7684\uFF0C\u4E5F\u5C31\u662F\u8BF4\u8981\u5728\u5C1D\u8BD5\u524D\u9762\u65B9\u5F0F\u4E0D\u594F\u6548\u7684\u60C5\u51B5\u4E0B\uFF0C\u624D\u9700\u8981\u53BB\u505A\u8FDB\u4E00\u6B65\u7684\u5206\u6790\u3002"}),"\n",(0,r.jsx)(i.h2,{id:"\u8C03\u4F18\u6848\u4F8B\u5B9E\u6218",children:"\u8C03\u4F18\u6848\u4F8B\u5B9E\u6218"}),"\n",(0,r.jsx)(i.h3,{id:"\u6848\u4F8B\u4E00",children:"\u6848\u4F8B\u4E00"}),"\n",(0,r.jsx)(i.p,{children:"\u4E00\u4E2A\u56DB\u5F20\u8868 Join \u7684\u67E5\u8BE2\uFF0C\u901A\u8FC7 Profile \u7684\u65F6\u5019\u53D1\u73B0\u7B2C\u4E8C\u4E2A Join \u8017\u65F6\u5F88\u9AD8\uFF0C\u8017\u65F6 14 \u79D2\u3002"}),"\n",(0,r.jsx)(i.p,{children:(0,r.jsx)(i.img,{alt:"image-20220523153600797",src:e(293742).Z+"",width:"852",height:"514"})}),"\n",(0,r.jsx)(i.p,{children:"\u8FDB\u4E00\u6B65\u5206\u6790 Profile \u4E4B\u540E\uFF0C\u53D1\u73B0 BuildRows\uFF0C\u5C31\u662F\u53F3\u8868\u7684\u6570\u636E\u91CF\u662F\u5927\u6982 2500 \u4E07\u3002\u800C ProbeRows\uFF08ProbeRows \u662F\u5DE6\u8868\u7684\u6570\u636E\u91CF\uFF09\u53EA\u6709 1 \u4E07\u591A\u3002\u8FD9\u79CD\u573A\u666F\u4E0B\u53F3\u8868\u662F\u8FDC\u8FDC\u5927\u4E8E\u5DE6\u8868\uFF0C\u8FD9\u663E\u7136\u662F\u4E2A\u4E0D\u5408\u7406\u7684\u60C5\u51B5\u3002\u8FD9\u663E\u7136\u8BF4\u660E Join \u7684\u987A\u5E8F\u51FA\u73B0\u4E86\u4E00\u4E9B\u95EE\u9898\u3002\u8FD9\u65F6\u5019\u5C1D\u8BD5\u6539\u53D8 Session \u53D8\u91CF\uFF0C\u5F00\u542F Join Reorder\u3002"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{children:"set enable_cost_based_join_reorder = true\n"})}),"\n",(0,r.jsx)(i.p,{children:"\u8FD9\u6B21\u8017\u65F6\u4ECE 14 \u79D2\u964D\u5230\u4E86 4 \u79D2\uFF0C\u6027\u80FD\u63D0\u5347\u4E86 3 \u500D\u591A\u3002"}),"\n",(0,r.jsx)(i.p,{children:"\u6B64\u65F6\u518D Check Profile \u7684\u65F6\u5019\uFF0C\u5DE6\u53F3\u8868\u7684\u987A\u5E8F\u5DF2\u7ECF\u8C03\u6574\u6B63\u786E\uFF0C\u5373\u53F3\u8868\u662F\u5C0F\u8868\uFF0C\u5DE6\u8868\u662F\u5927\u8868\u3002\u57FA\u4E8E\u5C0F\u8868\u53BB\u6784\u5EFA\u54C8\u5E0C\u8868\uFF0C\u5F00\u9500\u662F\u5F88\u5C0F\u7684\uFF0C\u8FD9\u5C31\u662F\u5178\u578B\u7684\u4E00\u4E2A\u5229\u7528 Join Reorder \u53BB\u63D0\u5347 Join \u6027\u80FD\u7684\u4E00\u4E2A\u573A\u666F"}),"\n",(0,r.jsx)(i.p,{children:(0,r.jsx)(i.img,{alt:"image-20220523153757607",src:e(27440).Z+"",width:"848",height:"508"})}),"\n",(0,r.jsx)(i.h3,{id:"\u6848\u4F8B\u4E8C",children:"\u6848\u4F8B\u4E8C"}),"\n",(0,r.jsx)(i.p,{children:"\u5B58\u5728\u4E00\u4E2A\u6162\u67E5\u8BE2\uFF0C\u67E5\u770B Profile \u4E4B\u540E\uFF0C\u6574\u4E2A Join \u8282\u70B9\u8017\u65F6\u5927\u6982 44 \u79D2\u3002\u5B83\u7684\u53F3\u8868\u6709 1000 \u4E07\uFF0C\u5DE6\u8868\u6709 6000 \u4E07\uFF0C\u6700\u7EC8\u8FD4\u56DE\u7684\u7ED3\u679C\u4E5F\u53EA\u6709 6000 \u4E07\u3002"}),"\n",(0,r.jsx)(i.p,{children:(0,r.jsx)(i.img,{alt:"image-20220523153913059",src:e(804965).Z+"",width:"914",height:"558"})}),"\n",(0,r.jsx)(i.p,{children:"\u8FD9\u91CC\u53EF\u4EE5\u5927\u81F4\u7684\u4F30\u7B97\u51FA\u8FC7\u6EE4\u7387\u662F\u5F88\u9AD8\u7684\uFF0C\u90A3\u4E3A\u4EC0\u4E48 Runtime Filter \u6CA1\u6709\u751F\u6548\u5462\uFF1F\u901A\u8FC7 Query Plan \u53BB\u67E5\u770B\u5B83\uFF0C\u53D1\u73B0\u5B83\u53EA\u5F00\u542F\u4E86 IN \u7684 Runtime Filter\u3002"}),"\n",(0,r.jsx)(i.p,{children:(0,r.jsx)(i.img,{alt:"image-20220523153958828",src:e(474262).Z+"",width:"1004",height:"442"})}),"\n",(0,r.jsx)(i.p,{children:"\u5F53\u53F3\u8868\u8D85\u8FC7 1024 \u884C\u7684\u8BDD\uFF0CIN \u662F\u4E0D\u751F\u6548\u7684\uFF0C\u6240\u4EE5\u6839\u672C\u8D77\u4E0D\u5230\u4EC0\u4E48\u8FC7\u6EE4\u7684\u6548\u679C\uFF0C\u6240\u4EE5\u5C1D\u8BD5\u8C03\u6574 RuntimeFilter \u7684\u7C7B\u578B\u3002"}),"\n",(0,r.jsx)(i.p,{children:"\u8FD9\u91CC\u6539\u4E3A\u4E86 BloomFilter\uFF0C\u5DE6\u8868\u7684 6000 \u4E07\u6761\u6570\u636E\u8FC7\u6EE4\u4E86 5900 \u4E07\u6761\u3002\u57FA\u672C\u4E0A 99% \u7684\u6570\u636E\u90FD\u88AB\u8FC7\u6EE4\u6389\u4E86\uFF0C\u8FD9\u4E2A\u6548\u679C\u662F\u5F88\u663E\u8457\u7684\u3002\u67E5\u8BE2\u4E5F\u4ECE\u539F\u6765\u7684 44 \u79D2\u964D\u5230\u4E86 13 \u79D2\uFF0C\u6027\u80FD\u63D0\u5347\u4E86\u5927\u6982\u4E5F\u662F\u4E09\u500D\u591A\u3002"}),"\n",(0,r.jsx)(i.h3,{id:"\u6848\u4F8B\u4E09",children:"\u6848\u4F8B\u4E09"}),"\n",(0,r.jsx)(i.p,{children:"\u4E0B\u9762\u662F\u4E00\u4E2A\u6BD4\u8F83\u6781\u7AEF\u7684 Case\uFF0C\u901A\u8FC7\u4E00\u4E9B\u73AF\u5883\u53D8\u91CF\u8C03\u4F18\u4E5F\u6CA1\u6709\u529E\u6CD5\u89E3\u51B3\uFF0C\u56E0\u4E3A\u5B83\u6D89\u53CA\u5230 SQL Rewrite\uFF0C\u6240\u4EE5\u8FD9\u91CC\u5217\u51FA\u6765\u4E86\u539F\u59CB\u7684 SQL\u3002"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-sql",children:"select 100.00 * sum (case\n        when P_type like 'PROMOS'\n        then 1 extendedprice * (1 - 1 discount)\n        else 0\n        end ) / sum(1 extendedprice * (1 - 1 discount)) as promo revenue\nfrom lineitem, part\nwhere\n    1_partkey = p_partkey\n    and 1_shipdate >= date '1997-06-01'\n    and 1 shipdate < date '1997-06-01' + interval '1' month\n"})}),"\n",(0,r.jsx)(i.p,{children:"\u8FD9\u4E2A Join \u67E5\u8BE2\u662F\u5F88\u7B80\u5355\u7684\uFF0C\u5355\u7EAF\u7684\u4E00\u4E2A\u5DE6\u53F3\u8868\u7684 Join\u3002\u5F53\u7136\u5B83\u4E0A\u9762\u6709\u4E00\u4E9B\u8FC7\u6EE4\u6761\u4EF6\uFF0C\u6253\u5F00 Profile \u7684\u65F6\u5019\uFF0C\u53D1\u73B0\u6574\u4E2A\u67E5\u8BE2 Hash Join \u6267\u884C\u4E86\u4E09\u5206\u591A\u949F\uFF0C\u5B83\u662F\u4E00\u4E2A BroadCast \u7684 Join\uFF0C\u5B83\u7684\u53F3\u8868\u6709 2 \u4EBF\u6761\uFF0C\u5DE6\u8868\u53EA\u6709 70 \u4E07\u3002\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\u9009\u62E9\u4E86 Broadcast Join \u662F\u4E0D\u5408\u7406\u7684\uFF0C\u8FD9\u76F8\u5F53\u4E8E\u8981\u628A 2 \u4EBF\u6761\u505A\u4E00\u4E2A Hash Table\uFF0C\u7136\u540E\u7528 70 \u4E07\u6761\u904D\u5386\u4E24\u4EBF\u6761\u7684 Hash Table\uFF0C\u8FD9\u663E\u7136\u662F\u4E0D\u5408\u7406\u7684\u3002"}),"\n",(0,r.jsx)(i.p,{children:(0,r.jsx)(i.img,{alt:"image-20220523154712519",src:e(829393).Z+"",width:"556",height:"454"})}),"\n",(0,r.jsx)(i.p,{children:"\u4E3A\u4EC0\u4E48\u4F1A\u4EA7\u751F\u4E0D\u5408\u7406\u7684 Join \u987A\u5E8F\u5462\uFF1F\u5176\u5B9E\u8FD9\u4E2A\u5DE6\u8868\u662F\u4E00\u4E2A 10 \u4EBF\u6761\u7EA7\u522B\u7684\u5927\u8868\uFF0C\u5B83\u4E0A\u9762\u52A0\u4E86\u4E24\u4E2A\u8FC7\u6EE4\u6761\u4EF6\uFF0C\u52A0\u5B8C\u8FD9\u4E24\u4E2A\u8FC7\u6EE4\u6761\u4EF6\u4E4B\u540E\uFF0C10 \u4EBF\u6761\u7684\u6570\u636E\u5C31\u5269 70 \u4E07\u6761\u4E86\u3002\u4F46 Doris \u76EE\u524D\u6CA1\u6709\u4E00\u4E2A\u597D\u7684\u7EDF\u8BA1\u4FE1\u606F\u6536\u96C6\u7684\u6846\u67B6\uFF0C\u6240\u4EE5\u5B83\u4E0D\u77E5\u9053\u8FD9\u4E2A\u8FC7\u6EE4\u6761\u4EF6\u7684\u8FC7\u6EE4\u7387\u5230\u5E95\u600E\u4E48\u6837\u3002\u6240\u4EE5\u8FD9\u4E2A Join \u987A\u5E8F\u5B89\u6392\u7684\u65F6\u5019\uFF0C\u5C31\u9009\u62E9\u4E86\u9519\u8BEF\u7684 Join \u7684\u5DE6\u53F3\u8868\u987A\u5E8F\uFF0C\u5BFC\u81F4\u5B83\u7684\u6027\u80FD\u662F\u6781\u5176\u4F4E\u4E0B\u7684\u3002"}),"\n",(0,r.jsx)(i.p,{children:"\u4E0B\u56FE\u662F\u6539\u5199\u5B8C\u6210\u4E4B\u540E\u7684\u4E00\u4E2A SQL \u8BED\u53E5\uFF0C\u5728 Join \u540E\u9762\u6DFB\u52A0\u4E86\u4E00\u4E2A Join Hint\uFF0C\u5728 Join \u540E\u9762\u52A0\u4E00\u4E2A\u65B9\u62EC\u53F7\uFF0C\u7136\u540E\u628A\u9700\u8981\u7684 Join \u65B9\u5F0F\u5199\u5165\u3002\u8FD9\u91CC\u9009\u62E9\u4E86 Shuffle Join\uFF0C\u53EF\u4EE5\u770B\u5230\u53F3\u8FB9\u5B83\u5B9E\u9645\u67E5\u8BE2\u8BA1\u5212\u91CC\u9762\u770B\u5230\u8FD9\u4E2A\u6570\u636E\u786E\u5B9E\u662F\u505A\u4E86 Partition\uFF0C\u539F\u5148 3 \u5206\u949F\u7684\u8017\u65F6\u901A\u8FC7\u8FD9\u6837\u7684\u6539\u5199\u5B8C\u4E4B\u540E\u53EA\u5269\u4E0B 7 \u79D2\uFF0C\u6027\u80FD\u63D0\u5347\u660E\u663E"}),"\n",(0,r.jsx)(i.p,{children:(0,r.jsx)(i.img,{alt:"image-20220523160915229",src:e(375823).Z+"",width:"572",height:"674"})}),"\n",(0,r.jsx)(i.h2,{id:"doris-join-\u8C03\u4F18\u5EFA\u8BAE",children:"Doris Join \u8C03\u4F18\u5EFA\u8BAE"}),"\n",(0,r.jsx)(i.p,{children:"\u6700\u540E\u6211\u4EEC\u603B\u7ED3 Doris Join \u4F18\u5316\u8C03\u4F18\u7684\u56DB\u70B9\u5EFA\u8BAE\uFF1A"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsx)(i.p,{children:"\u7B2C\u4E00\u70B9\uFF1A\u5728\u505A Join \u7684\u65F6\u5019\uFF0C\u8981\u5C3D\u91CF\u9009\u62E9\u540C\u7C7B\u578B\u6216\u8005\u7B80\u5355\u7C7B\u578B\u7684\u5217\uFF0C\u540C\u7C7B\u578B\u7684\u8BDD\u5C31\u51CF\u5C11\u5B83\u7684\u6570\u636E Cast\uFF0C\u7B80\u5355\u7C7B\u578B\u672C\u8EAB Join \u8BA1\u7B97\u5C31\u5F88\u5FEB\u3002"}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsx)(i.p,{children:"\u7B2C\u4E8C\u70B9\uFF1A\u5C3D\u91CF\u9009\u62E9 Key \u5217\u8FDB\u884C Join\uFF0C\u539F\u56E0\u524D\u9762\u5728 Runtime Filter \u7684\u65F6\u5019\u4E5F\u4ECB\u7ECD\u4E86\uFF0CKey \u5217\u5728\u5EF6\u8FDF\u7269\u5316\u4E0A\u80FD\u8D77\u5230\u4E00\u4E2A\u6BD4\u8F83\u597D\u7684\u6548\u679C\u3002"}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsx)(i.p,{children:"\u7B2C\u4E09\u70B9\uFF1A\u5927\u8868\u4E4B\u95F4\u7684 Join\uFF0C\u5C3D\u91CF\u8BA9\u5B83 Colocation\uFF0C\u56E0\u4E3A\u5927\u8868\u4E4B\u95F4\u7684\u7F51\u7EDC\u5F00\u9500\u662F\u5F88\u5927\u7684\uFF0C\u5982\u679C\u9700\u8981\u53BB\u505A Shuffle \u7684\u8BDD\uFF0C\u4EE3\u4EF7\u662F\u5F88\u9AD8\u7684\u3002"}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsx)(i.p,{children:"\u7B2C\u56DB\u70B9\uFF1A\u5408\u7406\u7684\u4F7F\u7528 Runtime Filter\uFF0C\u5B83\u5728 Join \u8FC7\u6EE4\u7387\u9AD8\u7684\u573A\u666F\u4E0B\u6548\u679C\u662F\u975E\u5E38\u663E\u8457\u7684\u3002\u4F46\u662F\u5B83\u5E76\u4E0D\u662F\u4E07\u7075\u836F\uFF0C\u800C\u662F\u6709\u4E00\u5B9A\u526F\u4F5C\u7528\u7684\uFF0C\u6240\u4EE5\u9700\u8981\u6839\u636E\u5177\u4F53\u7684 SQL \u7684\u7C92\u5EA6\u505A\u5F00\u5173\u3002"}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsx)(i.p,{children:"\u6700\u540E\uFF1A\u8981\u6D89\u53CA\u5230\u591A\u8868 Join \u7684\u65F6\u5019\uFF0C\u9700\u8981\u53BB\u5224\u65AD Join \u7684\u5408\u7406\u6027\u3002\u5C3D\u91CF\u4FDD\u8BC1\u5DE6\u8868\u4E3A\u5927\u8868\uFF0C\u53F3\u8868\u4E3A\u5C0F\u8868\uFF0C\u7136\u540E Hash Join \u4F1A\u4F18\u4E8E Nest Loop Join\u3002\u5FC5\u8981\u7684\u65F6\u53EF\u4EE5\u901A\u8FC7 SQL Rewrite\uFF0C\u5229\u7528 Hint \u53BB\u8C03\u6574 Join \u7684\u987A\u5E8F\u3002"}),"\n"]}),"\n"]})]})}function a(n={}){let{wrapper:i}={...(0,l.a)(),...n.components};return i?(0,r.jsx)(i,{...n,children:(0,r.jsx)(c,{...n})}):c(n)}},396039:function(n,i,e){e.d(i,{Z:function(){return s}});let s=e.p+"assets/images/broadcast-join-d8bd07ac2608d3b7c4cddddf67b7fd55.png"},753969:function(n,i,e){e.d(i,{Z:function(){return s}});let s=e.p+"assets/images/bucket-shuffle-join-b0e7449164fd95a4e77e2f412b057433.png"},339207:function(n,i,e){e.d(i,{Z:function(){return s}});let s=e.p+"assets/images/colocation-join-9db80ffeb4bd80e1a54b083e4817db7d.png"},744313:function(n,i,e){e.d(i,{Z:function(){return s}});let s=e.p+"assets/images/join-reorder-720c5270f5962ae7aad73aa26a9d3553.png"},293742:function(n,i,e){e.d(i,{Z:function(){return s}});let s=e.p+"assets/images/image-20220523153600797-8c0110f8498c2b6b54fe9dfa6b6f89bf.png"},27440:function(n,i,e){e.d(i,{Z:function(){return s}});let s=e.p+"assets/images/image-20220523153757607-aced93bcd65de383a68aca075909885c.png"},804965:function(n,i,e){e.d(i,{Z:function(){return s}});let s=e.p+"assets/images/image-20220523153913059-c430baf5eae63c272d3e1355636ccad8.png"},474262:function(n,i,e){e.d(i,{Z:function(){return s}});let s=e.p+"assets/images/image-20220523153958828-1e0aaf5df637b5db23a27c9f97c22bea.png"},829393:function(n,i,e){e.d(i,{Z:function(){return s}});let s=e.p+"assets/images/image-20220523154712519-ff90fd895d5eed317bcc989f77b5b8bb.png"},375823:function(n,i,e){e.d(i,{Z:function(){return s}});let s=e.p+"assets/images/image-20220523160915229-e2e523c3e6e9e79d17e9849c1d8aa8f1.png"},662008:function(n,i,e){e.d(i,{Z:function(){return s}});let s=e.p+"assets/images/shuffle-join-82eb90441df18be5d1cd519b7700a551.png"},250065:function(n,i,e){e.d(i,{Z:function(){return t},a:function(){return o}});var s=e(667294);let r={},l=s.createContext(r);function o(n){let i=s.useContext(l);return s.useMemo(function(){return"function"==typeof n?n(i):{...i,...n}},[i,n])}function t(n){let i;return i=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:o(n.components),s.createElement(l.Provider,{value:i},n.children)}}}]);