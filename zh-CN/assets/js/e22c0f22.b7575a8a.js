"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["631780"],{541516:function(n,e,s){s.r(e),s.d(e,{default:()=>a,frontMatter:()=>c,metadata:()=>i,assets:()=>t,toc:()=>o,contentTitle:()=>d});var i=JSON.parse('{"id":"lakehouse/catalogs/jdbc-mysql-catalog","title":"MySQL JDBC Catalog","description":"Doris JDBC Catalog \u652F\u6301\u901A\u8FC7\u6807\u51C6 JDBC \u63A5\u53E3\u8FDE\u63A5 MySQL \u6570\u636E\u5E93\u3002\u672C\u6587\u6863\u4ECB\u7ECD\u5982\u4F55\u914D\u7F6E MySQL \u6570\u636E\u5E93\u8FDE\u63A5\u3002","source":"@site/i18n/zh-CN/docusaurus-plugin-content-docs/current/lakehouse/catalogs/jdbc-mysql-catalog.md","sourceDirName":"lakehouse/catalogs","slug":"/lakehouse/catalogs/jdbc-mysql-catalog","permalink":"/zh-CN/docs/dev/lakehouse/catalogs/jdbc-mysql-catalog","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1770477659000,"frontMatter":{"title":"MySQL JDBC Catalog","language":"zh-CN","description":"Doris JDBC Catalog \u652F\u6301\u901A\u8FC7\u6807\u51C6 JDBC \u63A5\u53E3\u8FDE\u63A5 MySQL \u6570\u636E\u5E93\u3002\u672C\u6587\u6863\u4ECB\u7ECD\u5982\u4F55\u914D\u7F6E MySQL \u6570\u636E\u5E93\u8FDE\u63A5\u3002"},"sidebar":"docs","previous":{"title":"JDBC Catalog","permalink":"/zh-CN/docs/dev/lakehouse/catalogs/jdbc-catalog-overview"},"next":{"title":"PostgreSQL JDBC Catalog","permalink":"/zh-CN/docs/dev/lakehouse/catalogs/jdbc-pg-catalog"}}'),l=s("785893"),r=s("250065");let c={title:"MySQL JDBC Catalog",language:"zh-CN",description:"Doris JDBC Catalog \u652F\u6301\u901A\u8FC7\u6807\u51C6 JDBC \u63A5\u53E3\u8FDE\u63A5 MySQL \u6570\u636E\u5E93\u3002\u672C\u6587\u6863\u4ECB\u7ECD\u5982\u4F55\u914D\u7F6E MySQL \u6570\u636E\u5E93\u8FDE\u63A5\u3002"},d=void 0,t={},o=[{value:"\u4F7F\u7528\u987B\u77E5",id:"\u4F7F\u7528\u987B\u77E5",level:2},{value:"\u8FDE\u63A5 MySQL",id:"\u8FDE\u63A5-mysql",level:2},{value:"\u8FDE\u63A5\u5B89\u5168",id:"\u8FDE\u63A5\u5B89\u5168",level:3},{value:"\u5C42\u7EA7\u6620\u5C04",id:"\u5C42\u7EA7\u6620\u5C04",level:2},{value:"\u5217\u7C7B\u578B\u6620\u5C04",id:"\u5217\u7C7B\u578B\u6620\u5C04",level:2},{value:"\u9644\u5F55",id:"\u9644\u5F55",level:2},{value:"\u65F6\u533A\u95EE\u9898",id:"\u65F6\u533A\u95EE\u9898",level:3},{value:"\u5E38\u89C1\u95EE\u9898",id:"\u5E38\u89C1\u95EE\u9898",level:2},{value:"\u8FDE\u63A5\u5F02\u5E38\u6392\u67E5",id:"\u8FDE\u63A5\u5F02\u5E38\u6392\u67E5",level:3},{value:"\u5176\u4ED6\u95EE\u9898",id:"\u5176\u4ED6\u95EE\u9898",level:3}];function h(n){let e={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.a)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.p,{children:"Doris JDBC Catalog \u652F\u6301\u901A\u8FC7\u6807\u51C6 JDBC \u63A5\u53E3\u8FDE\u63A5 MySQL \u6570\u636E\u5E93\u3002\u672C\u6587\u6863\u4ECB\u7ECD\u5982\u4F55\u914D\u7F6E MySQL \u6570\u636E\u5E93\u8FDE\u63A5\u3002"}),"\n",(0,l.jsxs)(e.p,{children:["\u5173\u4E8E JDBC Catalog \u6982\u8FF0\uFF0C\u8BF7\u53C2\u9605\uFF1A",(0,l.jsx)(e.a,{href:"/zh-CN/docs/dev/lakehouse/catalogs/jdbc-catalog-overview",children:" JDBC Catalog \u6982\u8FF0"})]}),"\n",(0,l.jsx)(e.h2,{id:"\u4F7F\u7528\u987B\u77E5",children:"\u4F7F\u7528\u987B\u77E5"}),"\n",(0,l.jsx)(e.p,{children:"\u8981\u8FDE\u63A5\u5230 MySQL \u6570\u636E\u5E93\uFF0C\u60A8\u9700\u8981"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"MySQL 5.7, 8.0 \u6216\u66F4\u9AD8\u7248\u672C\u3002"}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:["MySQL \u6570\u636E\u5E93\u7684 JDBC \u9A71\u52A8\u7A0B\u5E8F\uFF0C\u60A8\u53EF\u4EE5\u4ECE ",(0,l.jsx)(e.a,{href:"https://mvnrepository.com/artifact/com.mysql/mysql-connector-j",children:"Maven \u4ED3\u5E93"}),"\u4E0B\u8F7D\u6700\u65B0\u6216\u6307\u5B9A\u7248\u672C\u7684 MySQL JDBC \u9A71\u52A8\u7A0B\u5E8F\u3002\u63A8\u8350\u4F7F\u7528 MySQL Connector/J 8.0.31 \u53CA\u4EE5\u4E0A\u7248\u672C\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"Doris \u6BCF\u4E2A FE \u548C BE \u8282\u70B9\u548C MySQL \u670D\u52A1\u5668\u4E4B\u95F4\u7684\u7F51\u7EDC\u8FDE\u63A5\uFF0C\u9ED8\u8BA4\u7AEF\u53E3\u4E3A 3306\u3002"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"\u8FDE\u63A5-mysql",children:"\u8FDE\u63A5 MySQL"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-sql",children:"CREATE CATALOG mysql_catalog PROPERTIES (\n    'type' = 'jdbc',\n    'user' = 'username',\n    'password' = 'pwd',\n    'jdbc_url' = 'jdbc:mysql://host:3306',\n    'driver_url' = 'mysql-connector-j-8.3.0.jar',\n    'driver_class' = 'com.mysql.cj.jdbc.Driver'\n);\n"})}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.code,{children:"jdbc_url"})," \u5B9A\u4E49\u8981\u4F20\u9012\u7ED9 MySQL JDBC \u9A71\u52A8\u7A0B\u5E8F\u7684\u8FDE\u63A5\u4FE1\u606F\u548C\u53C2\u6570\u3002\u652F\u6301\u7684 URL \u7684\u53C2\u6570\u53EF\u5728 ",(0,l.jsx)(e.a,{href:"https://dev.mysql.com/doc/connector-j/en/connector-j-reference-configuration-properties.html",children:"MySQL \u5F00\u53D1\u6307\u5357"})," \u4E2D\u627E\u5230\u3002"]}),"\n",(0,l.jsx)(e.h3,{id:"\u8FDE\u63A5\u5B89\u5168",children:"\u8FDE\u63A5\u5B89\u5168"}),"\n",(0,l.jsxs)(e.p,{children:["\u5982\u679C\u7528\u6237\u4F7F\u7528\u6570\u636E\u6E90\u4E0A\u5B89\u88C5\u7684\u5168\u5C40\u4FE1\u4EFB\u8BC1\u4E66\u914D\u7F6E\u4E86 TLS\uFF0C\u5219\u53EF\u4EE5\u901A\u8FC7\u5C06\u53C2\u6570\u9644\u52A0\u5230\u5728 ",(0,l.jsx)(e.code,{children:"jdbc_url"})," \u5C5E\u6027\u4E2D\u8BBE\u7F6E\u7684 JDBC \u8FDE\u63A5\u5B57\u7B26\u4E32\u6765\u542F\u7528\u96C6\u7FA4\u548C\u6570\u636E\u6E90\u4E4B\u95F4\u7684 TLS\u3002"]}),"\n",(0,l.jsxs)(e.p,{children:["\u4F8B\u5982\uFF0C\u5BF9\u4E8E ",(0,l.jsx)(e.code,{children:"MySQL Connector/J 8.0"})," \u7248\uFF0C\u4F7F\u7528 ",(0,l.jsx)(e.code,{children:"sslMode"})," \u53C2\u6570\u901A\u8FC7 TLS \u4FDD\u62A4\u8FDE\u63A5\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u8BE5\u53C2\u6570\u8BBE\u7F6E\u4E3A PREFERRED\uFF0C\u5982\u679C\u670D\u52A1\u5668\u542F\u7528\uFF0C\u5B83\u53EF\u4EE5\u4FDD\u62A4\u8FDE\u63A5\u3002\u8FD8\u53EF\u4EE5\u5C06\u6B64\u53C2\u6570\u8BBE\u7F6E\u4E3A REQUIRED\uFF0C\u5982\u679C\u672A\u5EFA\u7ACB TLS\uFF0C\u5219\u4F1A\u5BFC\u81F4\u8FDE\u63A5\u5931\u8D25\u3002"]}),"\n",(0,l.jsxs)(e.p,{children:["\u53EF\u4EE5\u5728\u901A\u8FC7\u5728 ",(0,l.jsx)(e.code,{children:"jdbc_url"})," \u4E2D\u6DFB\u52A0 sslMode \u53C2\u6570\u6765\u914D\u7F6E\u5B83\uFF1A"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-sql",children:"'jdbc_url' = 'jdbc:mysql://host:3306/?sslMode=REQUIRED'\n"})}),"\n",(0,l.jsxs)(e.p,{children:["\u6709\u5173 TLS \u914D\u7F6E\u9009\u9879\u7684\u66F4\u591A\u4FE1\u606F\uFF0C\u8BF7\u53C2\u9605 ",(0,l.jsx)(e.a,{href:"https://dev.mysql.com/doc/connector-j/en/connector-j-connp-props-security.html#cj-conn-prop_sslMode",children:"MySQL JDBC \u5B89\u5168\u6587\u6863"}),"\u3002"]}),"\n",(0,l.jsx)(e.h2,{id:"\u5C42\u7EA7\u6620\u5C04",children:"\u5C42\u7EA7\u6620\u5C04"}),"\n",(0,l.jsx)(e.p,{children:"\u6620\u5C04 MySQL \u65F6\uFF0CDoris \u7684\u4E00\u4E2A Database \u5BF9\u5E94\u4E8E MySQL \u4E2D\u7684\u4E00\u4E2A Database\u3002\u800C Doris \u7684 Database \u4E0B\u7684 Table \u5219\u5BF9\u5E94\u4E8E MySQL \u4E2D\uFF0C\u8BE5 Database \u4E0B\u7684 Tables\u3002\u5373\u6620\u5C04\u5173\u7CFB\u5982\u4E0B\uFF1A"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"Doris"}),(0,l.jsx)(e.th,{children:"MySQL"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"Catalog"}),(0,l.jsx)(e.td,{children:"MySQL Server"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"Database"}),(0,l.jsx)(e.td,{children:"Database"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"Table"}),(0,l.jsx)(e.td,{children:"Table"})]})]})]}),"\n",(0,l.jsx)(e.h2,{id:"\u5217\u7C7B\u578B\u6620\u5C04",children:"\u5217\u7C7B\u578B\u6620\u5C04"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"MySQL Type"}),(0,l.jsx)(e.th,{children:"Doris Type"}),(0,l.jsx)(e.th,{children:"Comment"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"boolean"}),(0,l.jsx)(e.td,{children:"tinyint"}),(0,l.jsx)(e.td,{})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"tinyint"}),(0,l.jsx)(e.td,{children:"tinyint"}),(0,l.jsx)(e.td,{})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"smallint"}),(0,l.jsx)(e.td,{children:"smallint"}),(0,l.jsx)(e.td,{})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"mediumint"}),(0,l.jsx)(e.td,{children:"int"}),(0,l.jsx)(e.td,{})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"int"}),(0,l.jsx)(e.td,{children:"int"}),(0,l.jsx)(e.td,{})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"bigint"}),(0,l.jsx)(e.td,{children:"bigint"}),(0,l.jsx)(e.td,{})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"unsigned tinyint"}),(0,l.jsx)(e.td,{children:"smallint"}),(0,l.jsx)(e.td,{children:"Doris \u4E0D\u652F\u6301 unsigned \u6570\u636E\u7C7B\u578B\uFF0C\u6240\u4EE5 unsigned \u6570\u636E\u7C7B\u578B\u4F1A\u88AB\u6620\u5C04\u4E3A Doris \u5BF9\u5E94\u5927\u4E00\u4E2A\u6570\u91CF\u7EA7\u7684\u6570\u636E\u7C7B\u578B\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"unsigned mediumint"}),(0,l.jsx)(e.td,{children:"int"}),(0,l.jsx)(e.td,{children:"\u540C\u4E0A\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"unsigned int"}),(0,l.jsx)(e.td,{children:"bigint"}),(0,l.jsx)(e.td,{children:"\u540C\u4E0A\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"unsigned bigint"}),(0,l.jsx)(e.td,{children:"largeint"}),(0,l.jsx)(e.td,{children:"\u540C\u4E0A\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"float"}),(0,l.jsx)(e.td,{children:"float"}),(0,l.jsx)(e.td,{})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"double"}),(0,l.jsx)(e.td,{children:"double"}),(0,l.jsx)(e.td,{})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"decimal(P, S)"}),(0,l.jsx)(e.td,{children:"decimal(P, S)"}),(0,l.jsx)(e.td,{})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"unsigned decimal(P, S)"}),(0,l.jsx)(e.td,{children:"decimal(P + 1, S) / string"}),(0,l.jsx)(e.td,{children:"\u5982\u679C\u8D85\u8FC7 Doris \u652F\u6301\u7684\u6700\u5927\u7CBE\u5EA6\uFF0C\u5219\u4F1A\u4F7F\u7528 String \u627F\u63A5\u3002\u6CE8\u610F\u5728\u6B64\u7C7B\u578B\u88AB\u6620\u5C04\u4E3A String \u65F6\uFF0C\u53EA\u80FD\u652F\u6301\u67E5\u8BE2\uFF0C\u4E0D\u80FD\u5BF9 MySQL \u8FDB\u884C\u5199\u5165\u64CD\u4F5C\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"date"}),(0,l.jsx)(e.td,{children:"date"}),(0,l.jsx)(e.td,{})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"timestamp(S)"}),(0,l.jsx)(e.td,{children:"datetime(S)/timestamptz(S)"}),(0,l.jsxs)(e.td,{children:["properties \u4E2D ",(0,l.jsx)(e.code,{children:"enable.mapping.timestamp_tz"})," (4.0.3 \u540E\u5F00\u59CB\u652F\u6301) \u5C5E\u6027\u63A7\u5236\uFF0C\u9ED8\u8BA4\u4E3A ",(0,l.jsx)(e.code,{children:"false"}),", \u5219\u6620\u5C04\u5230 ",(0,l.jsx)(e.code,{children:"datetime"}),"; \u4E3A ",(0,l.jsx)(e.code,{children:"true"})," \u65F6\uFF0C\u5219\u6620\u5C04\u5230 ",(0,l.jsx)(e.code,{children:"timestamptz"})," \u7C7B\u578B"]})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"datetime(S)"}),(0,l.jsx)(e.td,{children:"datetime(S)"}),(0,l.jsx)(e.td,{})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"year"}),(0,l.jsx)(e.td,{children:"smallint"}),(0,l.jsx)(e.td,{children:"Doris \u4E0D\u652F\u6301 year \u7C7B\u578B\uFF0Cyear \u7C7B\u578B\u4F1A\u88AB\u6620\u5C04\u4E3A smallint\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"time"}),(0,l.jsx)(e.td,{children:"string"}),(0,l.jsx)(e.td,{children:"Doris \u4E0D\u652F\u6301 time \u7C7B\u578B\uFF0Ctime \u7C7B\u578B\u4F1A\u88AB\u6620\u5C04\u4E3A string\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"char"}),(0,l.jsx)(e.td,{children:"char"}),(0,l.jsx)(e.td,{})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"varchar"}),(0,l.jsx)(e.td,{children:"varchar"}),(0,l.jsx)(e.td,{})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"json"}),(0,l.jsx)(e.td,{children:"string"}),(0,l.jsx)(e.td,{children:"\u4E3A\u4E86\u66F4\u597D\u7684\u8BFB\u53D6\u4E0E\u8BA1\u7B97\u6027\u80FD\u5747\u8861\uFF0CDoris \u4F1A\u5C06 json \u7C7B\u578B\u6620\u5C04\u4E3A string \u7C7B\u578B\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"set"}),(0,l.jsx)(e.td,{children:"string"}),(0,l.jsx)(e.td,{})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"enum"}),(0,l.jsx)(e.td,{children:"string"}),(0,l.jsx)(e.td,{})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"bit"}),(0,l.jsx)(e.td,{children:"boolean / string"}),(0,l.jsx)(e.td,{children:"Doris \u4E0D\u652F\u6301 bit \u7C7B\u578B\uFF0Cbit \u7C7B\u578B\u4F1A\u5728 bit(1) \u65F6\u88AB\u6620\u5C04\u4E3A boolean\uFF0C\u5176\u4ED6\u60C5\u51B5\u4E0B\u6620\u5C04\u4E3A string\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"tinytext, text, mediumtext, longtext"}),(0,l.jsx)(e.td,{children:"string"}),(0,l.jsx)(e.td,{})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"blob, mediumblob, longblob, tinyblob, binary, varbinary"}),(0,l.jsx)(e.td,{children:"string /varbinary"}),(0,l.jsxs)(e.td,{children:["\u7531 properties \u4E2D ",(0,l.jsx)(e.code,{children:"enable.mapping.varbinary"})," (4.0.2 \u540E\u5F00\u59CB\u652F\u6301) \u5C5E\u6027\u63A7\u5236\u3002\u9ED8\u8BA4\u4E3A ",(0,l.jsx)(e.code,{children:"false"}),", \u5219\u6620\u5C04\u5230 ",(0,l.jsx)(e.code,{children:"string"}),"; \u4E3A ",(0,l.jsx)(e.code,{children:"true"})," \u65F6\uFF0C\u5219\u6620\u5C04\u5230 ",(0,l.jsx)(e.code,{children:"varbinary"})," \u7C7B\u578B\u3002"]})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"other"}),(0,l.jsx)(e.td,{children:"UNSUPPORTED"}),(0,l.jsx)(e.td,{})]})]})]}),"\n",(0,l.jsx)(e.h2,{id:"\u9644\u5F55",children:"\u9644\u5F55"}),"\n",(0,l.jsx)(e.h3,{id:"\u65F6\u533A\u95EE\u9898",children:"\u65F6\u533A\u95EE\u9898"}),"\n",(0,l.jsxs)(e.p,{children:["\u901A\u8FC7 JDBC Catalog \u8BBF\u95EE\u6570\u636E\u65F6\uFF0CBE \u7684 JNI \u90E8\u5206\u4F7F\u7528 JVM \u65F6\u533A\u3002JVM \u65F6\u533A\u9ED8\u8BA4\u4E3A BE \u90E8\u7F72\u673A\u5668\u7684\u65F6\u533A\uFF0C\u8FD9\u4F1A\u5F71\u54CD JDBC \u8BFB\u53D6\u6570\u636E\u65F6\u7684\u65F6\u533A\u8F6C\u6362\u3002\u4E3A\u4E86\u786E\u4FDD\u65F6\u533A\u4E00\u81F4\u6027\uFF0C\u5EFA\u8BAE\u5728 ",(0,l.jsx)(e.code,{children:"be.conf"})," \u7684 ",(0,l.jsx)(e.code,{children:"JAVA_OPTS"})," \u4E2D\u8BBE\u7F6E JVM \u65F6\u533A\u4E0E Doris \u4F1A\u8BDD\u53D8\u91CF\u7684 ",(0,l.jsx)(e.code,{children:"time_zone"})," \u4E00\u81F4\u3002"]}),"\n",(0,l.jsxs)(e.p,{children:["\u8BFB\u53D6 MySQL \u7684 timestamp \u7C7B\u578B\u65F6\uFF0C\u8BF7\u5728 JDBC URL \u4E2D\u6DFB\u52A0\u53C2\u6570\uFF1A",(0,l.jsx)(e.code,{children:"connectionTimeZone=LOCAL"})," \u548C ",(0,l.jsx)(e.code,{children:"forceConnectionTimeZoneToSession=true"}),"\u3002\u8FD9\u4E9B\u53C2\u6570\u9002\u7528\u4E8E MySQL Connector/J 8 \u4EE5\u4E0A\u7248\u672C\uFF0C\u53EF\u786E\u4FDD\u8BFB\u53D6\u7684\u65F6\u95F4\u4E3A Doris BE JVM \u65F6\u533A\uFF0C\u800C\u975E MySQL \u670D\u52A1\u7AEF\u7684\u65F6\u533A\u3002"]}),"\n",(0,l.jsx)(e.h2,{id:"\u5E38\u89C1\u95EE\u9898",children:"\u5E38\u89C1\u95EE\u9898"}),"\n",(0,l.jsx)(e.h3,{id:"\u8FDE\u63A5\u5F02\u5E38\u6392\u67E5",children:"\u8FDE\u63A5\u5F02\u5E38\u6392\u67E5"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"Communications link failure The last packet successfully received from the server was 7 milliseconds ago."}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u539F\u56E0\uFF1A"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u7F51\u7EDC\u95EE\u9898\uFF1A"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u7F51\u7EDC\u4E0D\u7A33\u5B9A\u6216\u8FDE\u63A5\u4E2D\u65AD\u3002"}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u5BA2\u6237\u7AEF\u548C\u670D\u52A1\u5668\u4E4B\u95F4\u7684\u7F51\u7EDC\u5EF6\u8FDF\u8FC7\u9AD8\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"MySQL \u670D\u52A1\u5668\u8BBE\u7F6E"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["MySQL \u670D\u52A1\u5668\u53EF\u80FD\u914D\u7F6E\u4E86\u8FDE\u63A5\u8D85\u65F6\u53C2\u6570\uFF0C\u4F8B\u5982 ",(0,l.jsx)(e.code,{children:"wait_timeout"})," \u6216 ",(0,l.jsx)(e.code,{children:"interactive_timeout"}),"\uFF0C\u5BFC\u81F4\u8FDE\u63A5\u8D85\u65F6\u88AB\u5173\u95ED\u3002"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u9632\u706B\u5899\u8BBE\u7F6E"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u9632\u706B\u5899\u89C4\u5219\u53EF\u80FD\u963B\u6B62\u4E86\u5BA2\u6237\u7AEF\u4E0E\u670D\u52A1\u5668\u4E4B\u95F4\u7684\u901A\u4FE1\u3002"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u8FDE\u63A5\u6C60\u8BBE\u7F6E"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\u8FDE\u63A5\u6C60\u4E2D\u7684\u914D\u7F6E ",(0,l.jsx)(e.code,{children:"connection_pool_max_life_time"})," \u53EF\u80FD\u5BFC\u81F4\u8FDE\u63A5\u88AB\u5173\u95ED\u6216\u56DE\u6536\uFF0C\u6216\u8005\u672A\u53CA\u65F6\u63A2\u6D3B"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u670D\u52A1\u5668\u8D44\u6E90\u95EE\u9898"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"MySQL \u670D\u52A1\u5668\u53EF\u80FD\u8D44\u6E90\u4E0D\u8DB3\uFF0C\u65E0\u6CD5\u5904\u7406\u65B0\u7684\u8FDE\u63A5\u8BF7\u6C42\u3002"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u5BA2\u6237\u7AEF\u914D\u7F6E"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\u5BA2\u6237\u7AEF JDBC \u9A71\u52A8\u914D\u7F6E\u9519\u8BEF\uFF0C\u4F8B\u5982 ",(0,l.jsx)(e.code,{children:"autoReconnect"})," \u53C2\u6570\u672A\u8BBE\u7F6E\u6216\u8BBE\u7F6E\u4E0D\u5F53\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u89E3\u51B3\u65B9\u6848"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u68C0\u67E5\u7F51\u7EDC\u8FDE\u63A5\uFF1A"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u786E\u8BA4\u5BA2\u6237\u7AEF\u548C\u670D\u52A1\u5668\u4E4B\u95F4\u7684\u7F51\u7EDC\u8FDE\u63A5\u7A33\u5B9A\uFF0C\u907F\u514D\u7F51\u7EDC\u5EF6\u8FDF\u8FC7\u9AD8\u3002"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u68C0\u67E5 MySQL \u670D\u52A1\u5668\u914D\u7F6E\uFF1A"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\u67E5\u770B\u5E76\u8C03\u6574 MySQL \u670D\u52A1\u5668\u7684 ",(0,l.jsx)(e.code,{children:"wait_timeout"})," \u548C ",(0,l.jsx)(e.code,{children:"interactive_timeout"})," \u53C2\u6570\uFF0C\u786E\u4FDD\u5B83\u4EEC\u8BBE\u7F6E\u5408\u7406\u3002"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u68C0\u67E5\u9632\u706B\u5899\u914D\u7F6E\uFF1A"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u786E\u8BA4\u9632\u706B\u5899\u89C4\u5219\u5141\u8BB8\u5BA2\u6237\u7AEF\u4E0E\u670D\u52A1\u5668\u4E4B\u95F4\u7684\u901A\u4FE1\u3002"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u8C03\u6574\u8FDE\u63A5\u6C60\u8BBE\u7F6E\uFF1A"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\u68C0\u67E5\u5E76\u8C03\u6574\u8FDE\u63A5\u6C60\u7684\u914D\u7F6E\u53C2\u6570 ",(0,l.jsx)(e.code,{children:"connection_pool_max_life_time"}),"\uFF0C\u786E\u4FDD\u5C0F\u4E8E MySQL \u7684 ",(0,l.jsx)(e.code,{children:"wait_timeout"})," \u548C ",(0,l.jsx)(e.code,{children:"interactive_timeout"})," \u53C2\u6570\u5E76\u5927\u4E8E\u6267\u884C\u65F6\u95F4\u6700\u957F\u7684 SQL"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u76D1\u63A7\u670D\u52A1\u5668\u8D44\u6E90\uFF1A"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u76D1\u63A7 MySQL \u670D\u52A1\u5668\u7684\u8D44\u6E90\u4F7F\u7528\u60C5\u51B5\uFF0C\u786E\u4FDD\u6709\u8DB3\u591F\u7684\u8D44\u6E90\u5904\u7406\u8FDE\u63A5\u8BF7\u6C42\u3002"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u4F18\u5316\u5BA2\u6237\u7AEF\u914D\u7F6E\uFF1A"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\u786E\u8BA4 JDBC \u9A71\u52A8\u7684\u914D\u7F6E\u53C2\u6570\u6B63\u786E\uFF0C\u4F8B\u5982 ",(0,l.jsx)(e.code,{children:"autoReconnect=true"}),"\uFF0C\u786E\u4FDD\u8FDE\u63A5\u80FD\u5728\u4E2D\u65AD\u540E\u81EA\u52A8\u91CD\u8FDE\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"java.io.EOFException MESSAGE: Can not read response from server. Expected to read 819 bytes, read 686 bytes before connection was unexpectedly lost."}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u539F\u56E0\uFF1A\u8FDE\u63A5\u88AB MySQL Kill \u6216\u8005 MySQL \u5B95\u673A"}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u89E3\u51B3\uFF1A\u68C0\u67E5 MySQL \u662F\u5426\u6709\u4E3B\u52A8 kill \u8FDE\u63A5\u7684\u673A\u5236\uFF0C\u6216\u8005\u662F\u5426\u56E0\u4E3A\u67E5\u8BE2\u8FC7\u5927\u67E5\u5D29 MySQL"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"\u5176\u4ED6\u95EE\u9898",children:"\u5176\u4ED6\u95EE\u9898"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u8BFB\u5199 MySQL \u7684 emoji \u8868\u60C5\u51FA\u73B0\u4E71\u7801"}),"\n",(0,l.jsx)(e.p,{children:"Doris \u67E5\u8BE2 MySQL \u65F6\uFF0C\u7531\u4E8E MySQL \u4E4B\u4E2D\u9ED8\u8BA4\u7684 utf8 \u7F16\u7801\u4E3A utf8mb3\uFF0C\u65E0\u6CD5\u8868\u793A\u9700\u8981 4 \u5B57\u8282\u7F16\u7801\u7684 emoji \u8868\u60C5\u3002\u8FD9\u91CC\u9700\u8981\u5C06 MySQL \u7684\u7F16\u7801\u4FEE\u6539\u4E3A utf8mb4\uFF0C\u4EE5\u652F\u6301 4 \u5B57\u8282\u7F16\u7801\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u53EF\u5168\u5C40\u4FEE\u6539\u914D\u7F6E\u9879"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-text",children:"\u4FEE\u6539 mysql \u76EE\u5F55\u4E0B\u7684 my.ini \u6587\u4EF6\uFF08linux \u7CFB\u7EDF\u4E3A etc \u76EE\u5F55\u4E0B\u7684 my.cnf \u6587\u4EF6\uFF09\n[client]\ndefault-character-set=utf8mb4\n\n[mysql]\n\u8BBE\u7F6E mysql \u9ED8\u8BA4\u5B57\u7B26\u96C6\ndefault-character-set=utf8mb4\n\n[mysqld]\n\u8BBE\u7F6E mysql \u5B57\u7B26\u96C6\u670D\u52A1\u5668\ncharacter-set-server=utf8mb4\ncollation-server=utf8mb4_unicode_ci\ninit_connect='SET NAMES utf8mb4\n\n\u4FEE\u6539\u5BF9\u5E94\u8868\u4E0E\u5217\u7684\u7C7B\u578B\nALTER TABLE table_name MODIFY colum_name VARCHAR(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;\nALTER TABLE table_name CHARSET=utf8mb4;\nSET NAMES utf8mb4\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u8BFB\u53D6 MySQL DATE/DATETIME \u7C7B\u578B\u51FA\u73B0\u5F02\u5E38"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-text",children:"ERROR 1105 (HY000): errCode = 2, detailMessage = (10.16.10.6)[INTERNAL_ERROR]UdfRuntimeException: get next block failed: \nCAUSED BY: SQLException: Zero date value prohibited\nCAUSED BY: DataReadException: Zero date value prohibited\n"})}),"\n",(0,l.jsxs)(e.p,{children:["\u56E0\u4E3A JDBC \u4E2D\u5BF9\u4E8E\u975E\u6CD5\u7684 DATE/DATETIME \u9ED8\u8BA4\u5904\u7406\u4E3A\u629B\u51FA\u5F02\u5E38\u3002\u53EF\u4EE5\u901A\u8FC7 URL \u53C2\u6570 ",(0,l.jsx)(e.code,{children:"zeroDateTimeBehavior"})," \u63A7\u5236\u8BE5\u884C\u4E3A\u3002\u53EF\u9009\u53C2\u6570\u4E3A\uFF1A",(0,l.jsx)(e.code,{children:"exception"}),",",(0,l.jsx)(e.code,{children:"convertToNull"}),",",(0,l.jsx)(e.code,{children:"round"}),", \u5206\u522B\u4E3A\uFF1A\u5F02\u5E38\u62A5\u9519\uFF1B\u8F6C\u4E3A ",(0,l.jsx)(e.code,{children:"NULL"})," \u503C\uFF1B\u8F6C\u4E3A ",(0,l.jsx)(e.code,{children:'"0001-01-01 00:00:00"'})]}),"\n",(0,l.jsxs)(e.p,{children:["\u9700\u8981\u5728\u521B\u5EFA Catalog \u7684 ",(0,l.jsx)(e.code,{children:"jdbc_url"})," \u628A JDBC \u8FDE\u63A5\u4E32\u6700\u540E\u589E\u52A0 ",(0,l.jsx)(e.code,{children:"zeroDateTimeBehavior=convertToNull"})," ,\u5982 ",(0,l.jsx)(e.code,{children:'"jdbc_url" = "jdbc:mysql://127.0.0.1:3306/test?zeroDateTimeBehavior=convertToNull"'})," \u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0CJDBC \u4F1A\u628A 0000-00-00 \u6216\u8005 0000-00-00 00:00:00 \u8F6C\u6362\u6210 null\uFF0C\u7136\u540E Doris \u4F1A\u628A\u5F53\u524D Catalog \u7684\u6240\u6709 Date/DateTime \u7C7B\u578B\u7684\u5217\u6309\u7167\u53EF\u7A7A\u7C7B\u578B\u5904\u7406\uFF0C\u8FD9\u6837\u5C31\u53EF\u4EE5\u6B63\u5E38\u8BFB\u53D6\u4E86\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:["\u8BFB\u53D6 MySQL Catalog \u6216\u5176\u4ED6 JDBC Catalog \u65F6\uFF0C\u51FA\u73B0\u52A0\u8F7D\u7C7B\u5931\u8D25\uFF0C\u5982 ",(0,l.jsx)(e.code,{children:"failed to load driver class com.mysql.cj.jdbc.driver in either of hikariconfig class loader"})]}),"\n",(0,l.jsxs)(e.p,{children:["\u8FD9\u662F\u56E0\u4E3A\u5728\u521B\u5EFA Catalog \u65F6\uFF0C\u586B\u5199\u7684 ",(0,l.jsx)(e.code,{children:"driver_class"})," \u4E0D\u6B63\u786E\uFF0C\u9700\u8981\u6B63\u786E\u586B\u5199\uFF0C\u5982\u4E0A\u65B9\u4F8B\u5B50\u4E3A\u5927\u5C0F\u5199\u95EE\u9898\uFF0C\u5E94\u586B\u5199\u4E3A ",(0,l.jsx)(e.code,{children:"'driver_class' = 'com.mysql.cj.jdbc.Driver'"})]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u8BFB\u53D6 MySQL \u51FA\u73B0\u901A\u4FE1\u94FE\u8DEF\u5F02\u5E38"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-text",children:"ERROR 1105 (HY000): errCode = 2, detailMessage = PoolInitializationException: Failed to initialize pool: Communications link failure\n\nThe last packet successfully received from the server was 7 milliseconds ago.  The last packet sent successfully to the server was 4 milliseconds ago.\nCAUSED BY: CommunicationsException: Communications link failure\n    \nThe last packet successfully received from the server was 7 milliseconds ago.  The last packet sent successfully to the server was 4 milliseconds ago.\nCAUSED BY: SSLHandshakeException\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53EF\u67E5\u770B be \u7684 be.out \u65E5\u5FD7\uFF0C\u5982\u679C\u5305\u542B\u4EE5\u4E0B\u4FE1\u606F\uFF1A"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"WARN: Establishing SSL connection without server's identity verification is not recommended. \nAccording to MySQL 5.5.45+, 5.6.26+ and 5.7.6+ requirements SSL connection must be established by default if explicit option isn't set. \nFor compliance with existing applications not using SSL the verifyServerCertificate property is set to 'false'. \nYou need either to explicitly disable SSL by setting useSSL=false, or set useSSL=true and provide truststore for server certificate verification.\n"})}),"\n",(0,l.jsxs)(e.p,{children:["\u53EF\u5728 ",(0,l.jsx)(e.code,{children:"jdbc_url"})," \u4E2D\u589E\u52A0 ",(0,l.jsx)(e.code,{children:"useSSL=false"}),"\uFF0C\u5982 ",(0,l.jsx)(e.code,{children:"'jdbc_url' = 'jdbc:mysql://127.0.0.1:3306/test?useSSL=false'"}),"\u3002"]}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u67E5\u8BE2 MySQL \u5927\u6570\u636E\u91CF\u65F6\uFF0C\u5982\u679C\u67E5\u8BE2\u5076\u5C14\u80FD\u591F\u6210\u529F\uFF0C\u5076\u5C14\u4F1A\u62A5\u5982\u4E0B\u9519\u8BEF\uFF0C\u4E14\u51FA\u73B0\u8BE5\u9519\u8BEF\u65F6 MySQL \u7684\u8FDE\u63A5\u88AB\u5168\u90E8\u65AD\u5F00\uFF0C\u65E0\u6CD5\u8FDE\u63A5\u5230 MySQL Server\uFF0C\u8FC7\u6BB5\u65F6\u95F4\u540E MySQL \u53C8\u6062\u590D\u6B63\u5E38\uFF0C\u4F46\u662F\u4E4B\u524D\u7684\u8FDE\u63A5\u90FD\u6CA1\u4E86\uFF1A"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-text",children:"ERROR 1105 (HY000): errCode = 2, detailMessage = [INTERNAL_ERROR]UdfRuntimeException: JDBC executor sql has error:\nCAUSED BY: CommunicationsException: Communications link failure\nThe last packet successfully received from the server was 4,446 milliseconds ago. The last packet sent successfully to the server was 4,446 milliseconds ago.\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u51FA\u73B0\u4E0A\u8FF0\u73B0\u8C61\u65F6\uFF0C\u53EF\u80FD\u662F MySQL Server \u81EA\u8EAB\u7684\u5185\u5B58\u6216 CPU \u8D44\u6E90\u88AB\u8017\u5C3D\u5BFC\u81F4 MySQL \u670D\u52A1\u4E0D\u53EF\u7528\uFF0C\u53EF\u4EE5\u5C1D\u8BD5\u589E\u5927 MySQL Server \u7684\u5185\u5B58\u6216 CPU \u914D\u7F6E\u3002"}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u67E5\u8BE2 MySQL \u7684\u8FC7\u7A0B\u4E2D\uFF0C\u5982\u679C\u53D1\u73B0\u548C\u5728 MySQL \u5E93\u7684\u67E5\u8BE2\u7ED3\u679C\u4E0D\u4E00\u81F4\u7684\u60C5\u51B5"}),"\n",(0,l.jsxs)(e.p,{children:["\u9996\u5148\u8981\u5148\u6392\u67E5\u4E0B\u67E5\u8BE2\u5B57\u6BB5\u4E2D\u662F\u5B57\u7B26\u4E32\u5426\u5B58\u5728\u6709\u5927\u5C0F\u5199\u60C5\u51B5\u3002\u6BD4\u5982\uFF0CTable \u4E2D\u6709\u4E00\u4E2A\u5B57\u6BB5 ",(0,l.jsx)(e.code,{children:"c_1"})," \u4E2D\u6709 ",(0,l.jsx)(e.code,{children:'"aaa"'})," \u548C ",(0,l.jsx)(e.code,{children:'"AAA"'})," \u4E24\u6761\u6570\u636E\uFF0C\u5982\u679C\u5728\u521D\u59CB\u5316 MySQL \u6570\u636E\u5E93\u65F6\u672A\u6307\u5B9A\u533A\u5206\u5B57\u7B26\u4E32\u5927\u5C0F\u5199\uFF0C\u90A3\u4E48 MySQL \u9ED8\u8BA4\u662F\u4E0D\u533A\u5206\u5B57\u7B26\u4E32\u5927\u5C0F\u5199\u7684\uFF0C\u4F46\u662F\u5728 Doris \u4E2D\u662F\u4E25\u683C\u533A\u5206\u5927\u5C0F\u5199\u7684\uFF0C\u6240\u4EE5\u4F1A\u51FA\u73B0\u4EE5\u4E0B\u60C5\u51B5\uFF1A"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-text",children:'MySQL \u884C\u4E3A\uFF1A\nselect count(c_1) from table where c_1 = "aaa"; \u672A\u533A\u5206\u5B57\u7B26\u4E32\u5927\u5C0F\uFF0C\u6240\u4EE5\u7ED3\u679C\u4E3A\uFF1A2\n\nDoris \u884C\u4E3A\uFF1A\nselect count(c_1) from table where c_1 = "aaa"; \u4E25\u683C\u533A\u5206\u5B57\u7B26\u4E32\u5927\u5C0F\uFF0C\u6240\u4EE5\u7ED3\u679C\u4E3A\uFF1A1\n'})}),"\n",(0,l.jsx)(e.p,{children:"\u5982\u679C\u51FA\u73B0\u4E0A\u8FF0\u73B0\u8C61\uFF0C\u90A3\u4E48\u9700\u8981\u6309\u7167\u9700\u6C42\u6765\u8C03\u6574\uFF0C\u65B9\u5F0F\u5982\u4E0B\uFF1A"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:["\u5728 MySQL \u4E2D\u67E5\u8BE2\u65F6\u6DFB\u52A0\u201CBINARY\u201D\u5173\u952E\u5B57\u6765\u5F3A\u5236\u533A\u5206\u5927\u5C0F\u5199\uFF1A",(0,l.jsx)(e.code,{children:'select count(c_1) from table where BINARY c_1 = "aaa";'})]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:["\u6216\u8005\u5728 MySQL \u4E2D\u5EFA\u8868\u65F6\u5019\u6307\u5B9A\uFF1A",(0,l.jsx)(e.code,{children:"CREATE TABLE table (c_1 VARCHAR(255) CHARACTER SET binary);"})]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u6216\u8005\u5728\u521D\u59CB\u5316 MySQL \u6570\u636E\u5E93\u65F6\u6307\u5B9A\u6821\u5BF9\u89C4\u5219\u6765\u533A\u5206\u5927\u5C0F\u5199\uFF1A"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-plain text",children:"[mysqld]\ncharacter-set-server=utf8\ncollation-server=utf8_bin\n[client]\ndefault-character-set=utf8\n[mysql]\ndefault-character-set=utf8\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u67E5\u8BE2 MySQL \u7684\u65F6\u5019\uFF0C\u51FA\u73B0\u957F\u65F6\u95F4\u5361\u4F4F\u6CA1\u6709\u8FD4\u56DE\u7ED3\u679C\uFF0C\u6216\u7740\u5361\u4F4F\u5F88\u957F\u65F6\u95F4\u5E76\u4E14 fe.warn.log \u4E2D\u51FA\u73B0\u51FA\u73B0\u5927\u91CF write lock \u65E5\u5FD7\u3002"}),"\n",(0,l.jsxs)(e.p,{children:["\u53EF\u4EE5\u5C1D\u8BD5\u5728 URL \u6DFB\u52A0 socketTimeout\uFF0C\u4F8B\u5982\uFF1A",(0,l.jsx)(e.code,{children:"jdbc:mysql://host:port/database?socketTimeout=30000"}),"\uFF0C\u9632\u6B62 JDBC \u5BA2\u6237\u7AEF \u5728\u88AB MySQL \u5173\u95ED\u8FDE\u63A5\u540E\u65E0\u9650\u7B49\u5F85\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u5728\u4F7F\u7528 MySQL Catalog \u7684\u8FC7\u7A0B\u4E2D\u53D1\u73B0 FE \u7684 JVM \u5185\u5B58\u6216 Threads \u6570\u6301\u7EED\u589E\u957F\u4E0D\u51CF\u5C11\uFF0C\u5E76\u53EF\u80FD\u540C\u65F6\u51FA\u73B0 Forward to master connection timed out \u62A5\u9519"}),"\n",(0,l.jsxs)(e.p,{children:["\u6253\u5370 FE \u7EBF\u7A0B\u5806\u6808 ",(0,l.jsx)(e.code,{children:"jstack fe_pid > fe.js"}),"\uFF0C\u5982\u679C\u51FA\u73B0\u5927\u91CF ",(0,l.jsx)(e.code,{children:"mysql-cj-abandoned-connection-cleanup"})," \u7EBF\u7A0B\uFF0C\u8BF4\u660E\u662F MySQL JDBC \u9A71\u52A8\u7684\u95EE\u9898\u3002"]}),"\n",(0,l.jsx)(e.p,{children:"\u6309\u7167\u5982\u4E0B\u65B9\u5F0F\u5904\u7406\uFF1A"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u5347\u7EA7 MySQL JDBC \u9A71\u52A8\u5230 8.0.31 \u53CA\u4EE5\u4E0A\u7248\u672C"}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:["\u5728 FE \u548C BE conf \u6587\u4EF6\u7684 ",(0,l.jsx)(e.code,{children:"JAVA_OPTS"})," \u4E2D\u589E\u52A0 ",(0,l.jsx)(e.code,{children:"-Dcom.mysql.cj.disableAbandonedConnectionCleanup=true"})," \u53C2\u6570\uFF0C\u7981\u7528 MySQL JDBC \u9A71\u52A8\u7684\u8FDE\u63A5\u6E05\u7406\u529F\u80FD\uFF0C\u5E76\u91CD\u542F\u96C6\u7FA4"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u6CE8\u610F\uFF1A\u5982\u679C Doris \u7684\u7248\u672C\u5728 2.0.13 \u53CA\u4EE5\u4E0A\uFF0C\u6216 2.1.5 \u53CA\u4EE5\u4E0A\uFF0C\u5219\u65E0\u9700\u589E\u52A0\u8BE5\u53C2\u6570\uFF0C\u56E0\u4E3A Doris \u5DF2\u7ECF\u9ED8\u8BA4\u7981\u7528\u4E86 MySQL JDBC \u9A71\u52A8\u7684\u8FDE\u63A5\u6E05\u7406\u529F\u80FD\u3002\u53EA\u9700\u66F4\u6362 MySQL JDBC \u9A71\u52A8\u7248\u672C\u5373\u53EF\u3002\u4F46\u662F\u9700\u8981\u91CD\u542F Doris \u96C6\u7FA4\u6765\u6E05\u7406\u6389\u4E4B\u524D\u7684\u6CC4\u6F0F\u7EBF\u7A0B\u3002"}),"\n"]}),"\n"]})]})}function a(n={}){let{wrapper:e}={...(0,r.a)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(h,{...n})}):h(n)}},250065:function(n,e,s){s.d(e,{Z:function(){return d},a:function(){return c}});var i=s(667294);let l={},r=i.createContext(l);function c(n){let e=i.useContext(r);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:c(n.components),i.createElement(r.Provider,{value:e},n.children)}}}]);