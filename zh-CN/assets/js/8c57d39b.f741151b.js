"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["171489"],{92539:function(e,r,n){n.r(r),n.d(r,{default:()=>h,frontMatter:()=>t,metadata:()=>i,assets:()=>c,toc:()=>a,contentTitle:()=>o});var i=JSON.parse('{"id":"db-connect/arrow-flight-sql-connect","title":"\u57FA\u4E8E Arrow Flight SQL \u7684\u9AD8\u901F\u6570\u636E\u4F20\u8F93\u94FE\u8DEF","description":"\u81EA Doris 2.1 \u7248\u672C\u540E\uFF0C\u57FA\u4E8E Arrow Flight SQL \u534F\u8BAE\u5B9E\u73B0\u4E86\u9AD8\u901F\u6570\u636E\u94FE\u8DEF\uFF0C\u652F\u6301\u591A\u79CD\u8BED\u8A00\u4F7F\u7528 SQL \u4ECE Doris \u9AD8\u901F\u8BFB\u53D6\u5927\u6279\u91CF\u6570\u636E\u3002Arrow Flight SQL \u8FD8\u63D0\u4F9B\u4E86\u901A\u7528\u7684 JDBC \u9A71\u52A8\uFF0C\u652F\u6301\u4E0E\u540C\u6837\u9075\u5FAA Arrow Flight SQL \u534F\u8BAE\u7684\u6570\u636E\u5E93\u65E0\u7F1D\u4EA4\u4E92\u3002\u90E8\u5206\u573A\u666F\u76F8\u6BD4 MySQL Client \u6216 JDBC/ODBC \u9A71\u52A8\u6570\u636E\u4F20\u8F93\u65B9\u6848\uFF0C\u6027\u80FD\u63D0\u5347\u767E\u500D\u3002","source":"@site/i18n/zh-CN/docusaurus-plugin-content-docs/current/db-connect/arrow-flight-sql-connect.md","sourceDirName":"db-connect","slug":"/db-connect/arrow-flight-sql-connect","permalink":"/zh-CN/docs/dev/db-connect/arrow-flight-sql-connect","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"\u57FA\u4E8E Arrow Flight SQL \u7684\u9AD8\u901F\u6570\u636E\u4F20\u8F93\u94FE\u8DEF","language":"zh-CN"},"sidebar":"docs","previous":{"title":"\u901A\u8FC7 MySQL \u534F\u8BAE\u8FDE\u63A5","permalink":"/zh-CN/docs/dev/db-connect/database-connect"},"next":{"title":"\u6982\u89C8","permalink":"/zh-CN/docs/dev/table-design/overview"}}'),s=n("785893"),l=n("250065");let t={title:"\u57FA\u4E8E Arrow Flight SQL \u7684\u9AD8\u901F\u6570\u636E\u4F20\u8F93\u94FE\u8DEF",language:"zh-CN"},o=void 0,c={},a=[{value:"\u5B9E\u73B0\u539F\u7406",id:"\u5B9E\u73B0\u539F\u7406",level:2},{value:"Python \u4F7F\u7528\u65B9\u6CD5",id:"python-\u4F7F\u7528\u65B9\u6CD5",level:2},{value:"\u5B89\u88C5 Library",id:"\u5B89\u88C5-library",level:3},{value:"\u8FDE\u63A5 Doris",id:"\u8FDE\u63A5-doris",level:3},{value:"\u5EFA\u8868\u4E0E\u83B7\u53D6\u5143\u6570\u636E",id:"\u5EFA\u8868\u4E0E\u83B7\u53D6\u5143\u6570\u636E",level:3},{value:"\u5BFC\u5165\u6570\u636E",id:"\u5BFC\u5165\u6570\u636E",level:3},{value:"\u6267\u884C\u67E5\u8BE2",id:"\u6267\u884C\u67E5\u8BE2",level:3},{value:"\u5B8C\u6574\u4EE3\u7801",id:"\u5B8C\u6574\u4EE3\u7801",level:3},{value:"JDBC Connector with Arrow Flight SQL",id:"jdbc-connector-with-arrow-flight-sql",level:2},{value:"Java \u4F7F\u7528\u65B9\u6CD5",id:"java-\u4F7F\u7528\u65B9\u6CD5",level:2},{value:"ADBC Driver",id:"adbc-driver",level:3},{value:"JDBC Driver",id:"jdbc-driver",level:3},{value:"JDBC \u548C Java \u8FDE\u63A5\u65B9\u5F0F\u7684\u9009\u62E9",id:"jdbc-\u548C-java-\u8FDE\u63A5\u65B9\u5F0F\u7684\u9009\u62E9",level:3},{value:"\u4E0E\u5176\u4ED6\u5927\u6570\u636E\u7EC4\u4EF6\u4EA4\u4E92",id:"\u4E0E\u5176\u4ED6\u5927\u6570\u636E\u7EC4\u4EF6\u4EA4\u4E92",level:2},{value:"Spark &amp; Flink",id:"spark--flink",level:3},{value:"\u652F\u6301 BI \u5DE5\u5177",id:"\u652F\u6301-bi-\u5DE5\u5177",level:3},{value:"\u6269\u5C55\u5E94\u7528",id:"\u6269\u5C55\u5E94\u7528",level:2},{value:"\u591A BE \u5E76\u884C\u8FD4\u56DE\u7ED3\u679C",id:"\u591A-be-\u5E76\u884C\u8FD4\u56DE\u7ED3\u679C",level:3},{value:"\u591A BE \u5171\u4EAB\u540C\u4E00\u4E2A\u53EF\u4F9B\u96C6\u7FA4\u5916\u90E8\u8BBF\u95EE\u7684 IP",id:"\u591A-be-\u5171\u4EAB\u540C\u4E00\u4E2A\u53EF\u4F9B\u96C6\u7FA4\u5916\u90E8\u8BBF\u95EE\u7684-ip",level:3},{value:"FAQ",id:"faq",level:2},{value:"2.1 Release Note",id:"21-release-note",level:2},{value:"v2.1.9",id:"v219",level:3},{value:"v2.1.8",id:"v218",level:3},{value:"v2.1.7",id:"v217",level:3},{value:"v2.1.6",id:"v216",level:3},{value:"v2.1.5",id:"v215",level:3},{value:"3.0 Release Note",id:"30-release-note",level:2},{value:"v3.0.5",id:"v305",level:3},{value:"v3.0.4",id:"v304",level:3},{value:"v3.0.3",id:"v303",level:3},{value:"v3.0.2",id:"v302",level:3},{value:"v3.0.1",id:"v301",level:3}];function d(e){let r={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.p,{children:"\u81EA Doris 2.1 \u7248\u672C\u540E\uFF0C\u57FA\u4E8E Arrow Flight SQL \u534F\u8BAE\u5B9E\u73B0\u4E86\u9AD8\u901F\u6570\u636E\u94FE\u8DEF\uFF0C\u652F\u6301\u591A\u79CD\u8BED\u8A00\u4F7F\u7528 SQL \u4ECE Doris \u9AD8\u901F\u8BFB\u53D6\u5927\u6279\u91CF\u6570\u636E\u3002Arrow Flight SQL \u8FD8\u63D0\u4F9B\u4E86\u901A\u7528\u7684 JDBC \u9A71\u52A8\uFF0C\u652F\u6301\u4E0E\u540C\u6837\u9075\u5FAA Arrow Flight SQL \u534F\u8BAE\u7684\u6570\u636E\u5E93\u65E0\u7F1D\u4EA4\u4E92\u3002\u90E8\u5206\u573A\u666F\u76F8\u6BD4 MySQL Client \u6216 JDBC/ODBC \u9A71\u52A8\u6570\u636E\u4F20\u8F93\u65B9\u6848\uFF0C\u6027\u80FD\u63D0\u5347\u767E\u500D\u3002"}),"\n",(0,s.jsx)(r.h2,{id:"\u5B9E\u73B0\u539F\u7406",children:"\u5B9E\u73B0\u539F\u7406"}),"\n",(0,s.jsx)(r.p,{children:"\u5728 Doris \u4E2D\u67E5\u8BE2\u7ED3\u679C\u4EE5\u5217\u5B58\u683C\u5F0F\u7684 Block \u7EC4\u7EC7\u3002\u5728 2.1 \u4EE5\u524D\u7248\u672C\uFF0C\u53EF\u4EE5\u901A\u8FC7 MySQL Client \u6216 JDBC/ODBC \u9A71\u52A8\u4F20\u8F93\u81F3\u76EE\u6807\u5BA2\u6237\u7AEF\uFF0C\u9700\u8981\u5C06\u884C\u5B58\u683C\u5F0F\u7684 Bytes \u518D\u53CD\u5E8F\u5217\u5316\u4E3A\u5217\u5B58\u683C\u5F0F\u3002\u57FA\u4E8E Arrow Flight SQL \u6784\u5EFA\u9AD8\u901F\u6570\u636E\u4F20\u8F93\u94FE\u8DEF\uFF0C\u82E5\u76EE\u6807\u5BA2\u6237\u7AEF\u540C\u6837\u652F\u6301 Arrow \u5217\u5B58\u683C\u5F0F\uFF0C\u6574\u4F53\u4F20\u8F93\u8FC7\u7A0B\u5C06\u5B8C\u5168\u907F\u514D\u5E8F\u5217\u5316/\u53CD\u5E8F\u5217\u5316\u64CD\u4F5C\uFF0C\u5F7B\u5E95\u6D88\u9664\u56E0\u6B64\u5E26\u6765\u65F6\u95F4\u53CA\u6027\u80FD\u635F\u8017\u3002"}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.img,{alt:"Arrow_Flight_SQL",src:n(347174).Z+"",width:"1280",height:"647"})}),"\n",(0,s.jsxs)(r.p,{children:["\u5B89\u88C5 Apache Arrow \u4F60\u53EF\u4EE5\u53BB\u5B98\u65B9\u6587\u6863 ",(0,s.jsx)(r.a,{href:"https://arrow.apache.org/install/",children:"Apache Arrow"})," \u627E\u5230\u8BE6\u7EC6\u7684\u5B89\u88C5\u6559\u7A0B\u3002\u66F4\u591A\u5173\u4E8E Doris \u5B9E\u73B0 Arrow Flight \u534F\u8BAE\u7684\u539F\u7406\u53EF\u4EE5\u53C2\u8003 ",(0,s.jsx)(r.a,{href:"https://github.com/apache/doris/issues/25514",children:"Doris support Arrow Flight SQL protocol"}),"\u3002"]}),"\n",(0,s.jsx)(r.h2,{id:"python-\u4F7F\u7528\u65B9\u6CD5",children:"Python \u4F7F\u7528\u65B9\u6CD5"}),"\n",(0,s.jsx)(r.p,{children:"\u4F7F\u7528 Python \u7684 ADBC Driver \u8FDE\u63A5 Doris \u5B9E\u73B0\u6570\u636E\u7684\u6781\u901F\u8BFB\u53D6\uFF0C\u4E0B\u9762\u7684\u6B65\u9AA4\u4F7F\u7528 Python\uFF08\u7248\u672C >= 3.9\uFF09\u7684 ADBC Driver \u6267\u884C\u4E00\u7CFB\u5217\u5E38\u89C1\u7684\u6570\u636E\u5E93\u8BED\u6CD5\u64CD\u4F5C\uFF0C\u5305\u62EC DDL\u3001DML\u3001\u8BBE\u7F6E Session \u53D8\u91CF\u4EE5\u53CA Show \u8BED\u53E5\u7B49\u3002"}),"\n",(0,s.jsx)(r.h3,{id:"\u5B89\u88C5-library",children:"\u5B89\u88C5 Library"}),"\n",(0,s.jsx)(r.p,{children:"Library \u88AB\u53D1\u5E03\u5728 PyPI\uFF0C\u53EF\u901A\u8FC7\u4EE5\u4E0B\u65B9\u5F0F\u7B80\u5355\u5B89\u88C5\uFF1A"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{children:"pip install adbc_driver_manager\npip install adbc_driver_flightsql\n"})}),"\n",(0,s.jsx)(r.p,{children:"\u5728\u4EE3\u7801\u4E2D import \u4EE5\u4E0B\u6A21\u5757/\u5E93\u6765\u4F7F\u7528\u5DF2\u5B89\u88C5\u7684 Library\uFF1A"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-Python",children:"import adbc_driver_manager\nimport adbc_driver_flightsql.dbapi as flight_sql\n\n>>> print(adbc_driver_manager.__version__)\n1.1.0\n>>> print(adbc_driver_flightsql.__version__)\n1.1.0\n"})}),"\n",(0,s.jsx)(r.h3,{id:"\u8FDE\u63A5-doris",children:"\u8FDE\u63A5 Doris"}),"\n",(0,s.jsx)(r.p,{children:"\u521B\u5EFA\u4E0E Doris Arrow Flight SQL \u670D\u52A1\u4EA4\u4E92\u7684\u5BA2\u6237\u7AEF\u3002\u9700\u63D0\u4F9B Doris FE \u7684 Host\u3001Arrow Flight Port\u3001\u767B\u9646\u7528\u6237\u540D\u4EE5\u53CA\u5BC6\u7801\uFF0C\u5E76\u8FDB\u884C\u4EE5\u4E0B\u914D\u7F6E\u3002\n\u4FEE\u6539 Doris FE \u548C BE \u7684\u914D\u7F6E\u53C2\u6570\uFF1A"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"\u4FEE\u6539 fe/conf/fe.conf \u4E2D arrow_flight_sql_port \u4E3A\u4E00\u4E2A\u53EF\u7528\u7AEF\u53E3\uFF0C\u5982 8070\u3002"}),"\n",(0,s.jsx)(r.li,{children:"\u4FEE\u6539 be/conf/be.conf\u4E2D arrow_flight_sql_port \u4E3A\u4E00\u4E2A\u53EF\u7528\u7AEF\u53E3\uFF0C\u5982 8050\u3002"}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.code,{children:"\u6CE8: fe.conf \u4E0E be.conf \u4E2D\u914D\u7F6E\u7684 arrow_flight_sql_port \u7AEF\u53E3\u53F7\u4E0D\u76F8\u540C"})}),"\n",(0,s.jsxs)(r.p,{children:["\u4FEE\u6539\u914D\u7F6E\u5E76\u91CD\u542F\u96C6\u7FA4\u540E\uFF0C\u5728 fe/log/fe.log \u6587\u4EF6\u4E2D\u641C\u7D22\u5230 ",(0,s.jsx)(r.code,{children:"Arrow Flight SQL service is started"})," \u8868\u660E FE \u7684 Arrow Flight Server \u542F\u52A8\u6210\u529F\uFF1B\u5728 be/log/be.INFO \u6587\u4EF6\u4E2D\u641C\u7D22\u5230 ",(0,s.jsx)(r.code,{children:"Arrow Flight Service bind to host"})," \u8868\u660E BE \u7684 Arrow Flight Server \u542F\u52A8\u6210\u529F\u3002"]}),"\n",(0,s.jsx)(r.p,{children:"\u5047\u8BBE Doris \u5B9E\u4F8B\u4E2D FE \u548C BE \u7684 Arrow Flight SQL \u670D\u52A1\u5C06\u5206\u522B\u5728\u7AEF\u53E3 8070 \u548C 8050 \u4E0A\u8FD0\u884C\uFF0C\u4E14 Doris \u7528\u6237\u540D/\u5BC6\u7801\u4E3A\u201Cuser\u201D/\u201Cpass\u201D\uFF0C\u90A3\u4E48\u8FDE\u63A5\u8FC7\u7A0B\u5982\u4E0B\u6240\u793A\uFF1A"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-Python",children:'conn = flight_sql.connect(uri="grpc://{FE_HOST}:{fe.conf:arrow_flight_sql_port}", db_kwargs={\n            adbc_driver_manager.DatabaseOptions.USERNAME.value: "user",\n            adbc_driver_manager.DatabaseOptions.PASSWORD.value: "pass",\n        })\ncursor = conn.cursor()\n'})}),"\n",(0,s.jsx)(r.p,{children:"\u8FDE\u63A5\u5B8C\u6210\u540E\uFF0C\u53EF\u4EE5\u901A\u8FC7 SQL \u4F7F\u8FD4\u56DE\u7684 Cursor \u4E0E Doris \u4EA4\u4E92\uFF0C\u6267\u884C\u4F8B\u5982\u5EFA\u8868\u3001\u83B7\u53D6\u5143\u6570\u636E\u3001\u5BFC\u5165\u6570\u636E\u3001\u67E5\u8BE2\u7B49\u64CD\u4F5C\u3002"}),"\n",(0,s.jsx)(r.h3,{id:"\u5EFA\u8868\u4E0E\u83B7\u53D6\u5143\u6570\u636E",children:"\u5EFA\u8868\u4E0E\u83B7\u53D6\u5143\u6570\u636E"}),"\n",(0,s.jsx)(r.p,{children:"\u5C06 Query \u4F20\u9012\u7ED9 cursor.execute\uFF08\uFF09\u51FD\u6570\uFF0C\u6267\u884C\u5EFA\u8868\u4E0E\u83B7\u53D6\u5143\u6570\u636E\u64CD\u4F5C\uFF1A"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-Python",children:'cursor.execute("DROP DATABASE IF EXISTS arrow_flight_sql FORCE;")\nprint(cursor.fetchallarrow().to_pandas())\n\ncursor.execute("create database arrow_flight_sql;")\nprint(cursor.fetchallarrow().to_pandas())\n\ncursor.execute("show databases;")\nprint(cursor.fetchallarrow().to_pandas())\n\ncursor.execute("use arrow_flight_sql;")\nprint(cursor.fetchallarrow().to_pandas())\n\ncursor.execute("""CREATE TABLE arrow_flight_sql_test\n    (\n         k0 INT,\n         k1 DOUBLE,\n         K2 varchar(32) NULL DEFAULT "" COMMENT "",\n         k3 DECIMAL(27,9) DEFAULT "0",\n         k4 BIGINT NULL DEFAULT \'10\',\n         k5 DATE,\n    )\n    DISTRIBUTED BY HASH(k5) BUCKETS 5\n    PROPERTIES("replication_num" = "1");""")\nprint(cursor.fetchallarrow().to_pandas())\n\ncursor.execute("show create table arrow_flight_sql_test;")\nprint(cursor.fetchallarrow().to_pandas())\n'})}),"\n",(0,s.jsx)(r.p,{children:"\u5982\u679C StatusResult \u8FD4\u56DE 0\uFF0C\u5219\u8BF4\u660E Query \u6267\u884C\u6210\u529F\uFF08\u8FD9\u6837\u8BBE\u8BA1\u7684\u539F\u56E0\u662F\u4E3A\u4E86\u517C\u5BB9 JDBC\uFF09\u3002"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{children:"  StatusResult\n0            0\n\n  StatusResult\n0            0\n\n                   Database\n0         __internal_schema\n1          arrow_flight_sql\n..                      ...\n507             udf_auth_db\n\n[508 rows x 1 columns]\n\n  StatusResult\n0            0\n\n  StatusResult\n0            0\n                   Table                                       Create Table\n0  arrow_flight_sql_test  CREATE TABLE `arrow_flight_sql_test` (\\n  `k0`...\n"})}),"\n",(0,s.jsx)(r.h3,{id:"\u5BFC\u5165\u6570\u636E",children:"\u5BFC\u5165\u6570\u636E"}),"\n",(0,s.jsx)(r.p,{children:"\u6267\u884C INSERT INTO\uFF0C\u5411\u6240\u521B\u5EFA\u8868\u4E2D\u5BFC\u5165\u5C11\u91CF\u6D4B\u8BD5\u6570\u636E\uFF1A"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-Python",children:"cursor.execute(\"\"\"INSERT INTO arrow_flight_sql_test VALUES\n        ('0', 0.1, \"ID\", 0.0001, 9999999999, '2023-10-21'),\n        ('1', 0.20, \"ID_1\", 1.00000001, 0, '2023-10-21'),\n        ('2', 3.4, \"ID_1\", 3.1, 123456, '2023-10-22'),\n        ('3', 4, \"ID\", 4, 4, '2023-10-22'),\n        ('4', 122345.54321, \"ID\", 122345.54321, 5, '2023-10-22');\"\"\")\nprint(cursor.fetchallarrow().to_pandas())\n"})}),"\n",(0,s.jsx)(r.p,{children:"\u5982\u4E0B\u6240\u793A\u5219\u8BC1\u660E\u5BFC\u5165\u6210\u529F\uFF1A"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{children:"  StatusResult\n0            0\n"})}),"\n",(0,s.jsx)(r.p,{children:"\u5982\u679C\u9700\u8981\u5BFC\u5165\u5927\u6279\u91CF\u6570\u636E\u5230 Doris\uFF0C\u53EF\u4EE5\u4F7F\u7528 pydoris \u6267\u884C Stream Load \u6765\u5B9E\u73B0\u3002"}),"\n",(0,s.jsx)(r.h3,{id:"\u6267\u884C\u67E5\u8BE2",children:"\u6267\u884C\u67E5\u8BE2"}),"\n",(0,s.jsx)(r.p,{children:"\u63A5\u7740\u5BF9\u4E0A\u9762\u5BFC\u5165\u7684\u8868\u8FDB\u884C\u67E5\u8BE2\u67E5\u8BE2\uFF0C\u5305\u62EC\u805A\u5408\u3001\u6392\u5E8F\u3001Set Session Variable \u7B49\u64CD\u4F5C\u3002"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-Python",children:'cursor.execute("select * from arrow_flight_sql_test order by k0;")\nprint(cursor.fetchallarrow().to_pandas())\n\ncursor.execute("set exec_mem_limit=2000;")\nprint(cursor.fetchallarrow().to_pandas())\n\ncursor.execute("show variables like \\"%exec_mem_limit%\\";")\nprint(cursor.fetchallarrow().to_pandas())\n\ncursor.execute("select k5, sum(k1), count(1), avg(k3) from arrow_flight_sql_test group by k5;")\nprint(cursor.fetch_df())\n'})}),"\n",(0,s.jsx)(r.p,{children:"\u7ED3\u679C\u5982\u4E0B\u6240\u793A\uFF1A"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{children:"   k0            k1    K2                k3          k4          k5\n0   0       0.10000    ID       0.000100000  9999999999  2023-10-21\n1   1       0.20000  ID_1       1.000000010           0  2023-10-21\n2   2       3.40000  ID_1       3.100000000      123456  2023-10-22\n3   3       4.00000    ID       4.000000000           4  2023-10-22\n4   4  122345.54321    ID  122345.543210000           5  2023-10-22\n\n[5 rows x 6 columns]\n\n  StatusResult\n0            0\n\n    Variable_name Value Default_Value Changed\n0  exec_mem_limit  2000    2147483648       1\n\n           k5  Nullable(Float64)_1  Int64_2 Nullable(Decimal(38, 9))_3\n0  2023-10-22         122352.94321        3            40784.214403333\n1  2023-10-21              0.30000        2                0.500050005\n\n[2 rows x 5 columns]\n"})}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"\u6CE8\u610F\uFF1A"})," fetch \u67E5\u8BE2\u7ED3\u679C\u9700\u8981\u4F7F\u7528 ",(0,s.jsx)(r.code,{children:"cursor.fetchallarrow()"})," \u8FD4\u56DE arrow \u683C\u5F0F\uFF0C\u6216\u4F7F\u7528 ",(0,s.jsx)(r.code,{children:"cursor.fetch_df()"})," \u76F4\u63A5\u8FD4\u56DE pandas dataframe\uFF0C\u8FD9\u5C06\u4FDD\u6301\u6570\u636E\u7684\u5217\u5B58\u683C\u5F0F\u3002\u4E0D\u80FD\u4F7F\u7528 ",(0,s.jsx)(r.code,{children:"cursor.fetchall()"}),"\uFF0C\u5426\u5219\u4F1A\u5C06\u5217\u5B58\u683C\u5F0F\u7684\u6570\u636E\u8F6C\u56DE\u884C\u5B58\uFF0C\u8FD9\u548C\u4F7F\u7528 mysql-client \u6CA1\u6709\u672C\u8D28\u533A\u522B\uFF0C\u751A\u81F3\u7531\u4E8E\u5728 client \u4FA7\u591A\u4E86\u4E00\u6B21\u5217\u8F6C\u884C\u7684\u64CD\u4F5C\uFF0C\u53EF\u80FD\u6BD4 mysql-client \u8FD8\u6162\u3002"]}),"\n",(0,s.jsx)(r.h3,{id:"\u5B8C\u6574\u4EE3\u7801",children:"\u5B8C\u6574\u4EE3\u7801"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-Python",children:'# Doris Arrow Flight SQL Test\n\n# step 1, library is released on PyPI and can be easily installed.\n# pip install adbc_driver_manager\n# pip install adbc_driver_flightsql\nimport adbc_driver_manager\nimport adbc_driver_flightsql.dbapi as flight_sql\n\n# step 2, create a client that interacts with the Doris Arrow Flight SQL service.\n# Modify arrow_flight_sql_port in fe/conf/fe.conf to an available port, such as 8070.\n# Modify arrow_flight_sql_port in be/conf/be.conf to an available port, such as 8050.\nconn = flight_sql.connect(uri="grpc://{FE_HOST}:{fe.conf:arrow_flight_sql_port}", db_kwargs={\n            adbc_driver_manager.DatabaseOptions.USERNAME.value: "root",\n            adbc_driver_manager.DatabaseOptions.PASSWORD.value: "",\n        })\ncursor = conn.cursor()\n\n# interacting with Doris via SQL using Cursor\ndef execute(sql):\n    print("\\n### execute query: ###\\n " + sql)\n    cursor.execute(sql)\n    print("### result: ###")\n    print(cursor.fetchallarrow().to_pandas())\n\n# step3, execute DDL statements, create database/table, show stmt.\nexecute("DROP DATABASE IF EXISTS arrow_flight_sql FORCE;")\nexecute("show databases;")\nexecute("create database arrow_flight_sql;")\nexecute("show databases;")\nexecute("use arrow_flight_sql;")\nexecute("""CREATE TABLE arrow_flight_sql_test\n    (\n         k0 INT,\n         k1 DOUBLE,\n         K2 varchar(32) NULL DEFAULT "" COMMENT "",\n         k3 DECIMAL(27,9) DEFAULT "0",\n         k4 BIGINT NULL DEFAULT \'10\',\n         k5 DATE,\n    )\n    DISTRIBUTED BY HASH(k5) BUCKETS 5\n    PROPERTIES("replication_num" = "1");""")\nexecute("show create table arrow_flight_sql_test;")\n\n\n# step4, insert into\nexecute("""INSERT INTO arrow_flight_sql_test VALUES\n        (\'0\', 0.1, "ID", 0.0001, 9999999999, \'2023-10-21\'),\n        (\'1\', 0.20, "ID_1", 1.00000001, 0, \'2023-10-21\'),\n        (\'2\', 3.4, "ID_1", 3.1, 123456, \'2023-10-22\'),\n        (\'3\', 4, "ID", 4, 4, \'2023-10-22\'),\n        (\'4\', 122345.54321, "ID", 122345.54321, 5, \'2023-10-22\');""")\n\n\n# step5, execute queries, aggregation, sort, set session variable\nexecute("select * from arrow_flight_sql_test order by k0;")\nexecute("set exec_mem_limit=2000;")\nexecute("show variables like \\"%exec_mem_limit%\\";")\nexecute("select k5, sum(k1), count(1), avg(k3) from arrow_flight_sql_test group by k5;")\n\n# step6, close cursor \ncursor.close()\n'})}),"\n",(0,s.jsx)(r.h2,{id:"jdbc-connector-with-arrow-flight-sql",children:"JDBC Connector with Arrow Flight SQL"}),"\n",(0,s.jsx)(r.p,{children:"Arrow Flight SQL \u534F\u8BAE\u7684\u5F00\u6E90 JDBC \u9A71\u52A8\u517C\u5BB9\u6807\u51C6\u7684 JDBC API\uFF0C\u53EF\u7528\u4E8E\u5927\u591A\u6570 BI \u5DE5\u5177\u901A\u8FC7 JDBC \u8BBF\u95EE Doris\uFF0C\u5E76\u652F\u6301\u9AD8\u901F\u4F20\u8F93 Apache Arrow \u6570\u636E\u3002\u4F7F\u7528\u65B9\u6CD5\u4E0E\u901A\u8FC7 MySQL \u534F\u8BAE\u7684 JDBC \u9A71\u52A8\u8FDE\u63A5 Doris \u7C7B\u4F3C\uFF0C\u53EA\u9700\u5C06\u94FE\u63A5 URL \u4E2D\u7684 jdbc:mysql \u534F\u8BAE\u6362\u6210 jdbc:arrow-flight-sql \u534F\u8BAE\uFF0C\u67E5\u8BE2\u8FD4\u56DE\u7684\u7ED3\u679C\u4F9D\u7136\u662F JDBC \u7684 ResultSet \u6570\u636E\u7ED3\u6784\u3002"}),"\n",(0,s.jsx)(r.p,{children:"POM dependency:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-Java",children:"<properties>\n    <arrow.version>17.0.0</arrow.version>\n</properties>\n<dependencies>\n    <dependency>\n        <groupId>org.apache.arrow</groupId>\n        <artifactId>flight-sql-jdbc-core</artifactId>\n        <version>${arrow.version}</version>\n    </dependency>\n</dependencies>\n"})}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"\u6CE8\u610F\uFF1A"})," \u4F7F\u7528 Java 9 \u6216\u66F4\u9AD8\u7248\u672C\u65F6\uFF0C\u5FC5\u987B\u901A\u8FC7\u5728 Java \u547D\u4EE4\u4E2D\u6DFB\u52A0 ",(0,s.jsx)(r.code,{children:"--add-opens=java.base/java.nio=ALL-UNNAMED"})," \u6765\u66B4\u9732\u4E00\u4E9B JDK \u5185\u90E8\u7ED3\u6784\uFF0C\u5426\u5219\uFF0C\u60A8\u53EF\u80FD\u4F1A\u770B\u5230\u4E00\u4E9B\u9519\u8BEF\uFF0C\u5982 ",(0,s.jsx)(r.code,{children:'module java.base does not "opens java.nio" to unnamed module'})," \u6216\u8005 ",(0,s.jsx)(r.code,{children:'module java.base does not "opens java.nio" to org.apache.arrow.memory.core'})," \u6216\u8005 ",(0,s.jsx)(r.code,{children:"java.lang.NoClassDefFoundError: Could not initialize class org.apache.arrow.memory.util.MemoryUtil (Internal; Prepare)"})]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-shell",children:'# Directly on the command line\n$ java --add-opens=java.base/java.nio=ALL-UNNAMED -jar ...\n# Indirectly via environment variables\n$ env _JAVA_OPTIONS="--add-opens=java.base/java.nio=ALL-UNNAMED" java -jar ...\n'})}),"\n",(0,s.jsxs)(r.p,{children:["\u5982\u679C\u5728 IntelliJ IDEA \u4E2D\u8C03\u8BD5\uFF0C\u9700\u8981\u5728 ",(0,s.jsx)(r.code,{children:"Run/Debug Configurations"})," \u7684 ",(0,s.jsx)(r.code,{children:"Build and run"})," \u4E2D\u589E\u52A0 ",(0,s.jsx)(r.code,{children:"--add-opens=java.base/java.nio=ALL-UNNAMED"}),"\uFF0C\u53C2\u7167\u4E0B\u9762\u7684\u56FE\u7247\uFF1A"]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.img,{alt:"arrow-flight-sql-IntelliJ",src:n(820045).Z+"",width:"2566",height:"1458"})}),"\n",(0,s.jsx)(r.p,{children:"\u8FDE\u63A5\u4EE3\u7801\u793A\u4F8B\u5982\u4E0B\uFF1A"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-Java",children:'import java.sql.Connection;\nimport java.sql.DriverManager;\nimport java.sql.ResultSet;\nimport java.sql.Statement;\n\nClass.forName("org.apache.arrow.driver.jdbc.ArrowFlightJdbcDriver");\nString DB_URL = "jdbc:arrow-flight-sql://{FE_HOST}:{fe.conf:arrow_flight_sql_port}?useServerPrepStmts=false"\n        + "&cachePrepStmts=true&useSSL=false&useEncryption=false";\nString USER = "root";\nString PASS = "";\n\nConnection conn = DriverManager.getConnection(DB_URL, USER, PASS);\nStatement stmt = conn.createStatement();\nResultSet resultSet = stmt.executeQuery("select * from information_schema.tables;");\nwhile (resultSet.next()) {\n    System.out.println(resultSet.toString());\n}\n\nresultSet.close();\nstmt.close();\nconn.close();\n'})}),"\n",(0,s.jsx)(r.h2,{id:"java-\u4F7F\u7528\u65B9\u6CD5",children:"Java \u4F7F\u7528\u65B9\u6CD5"}),"\n",(0,s.jsx)(r.p,{children:"\u9664\u4E86\u4F7F\u7528 JDBC\uFF0C\u4E0E Python \u7C7B\u4F3C\uFF0CJava \u4E5F\u53EF\u4EE5\u521B\u5EFA Driver \u8BFB\u53D6 Doris \u5E76\u8FD4\u56DE Arrow \u683C\u5F0F\u7684\u6570\u636E\uFF0C\u4E0B\u9762\u5206\u522B\u662F\u4F7F\u7528 AdbcDriver \u548C JdbcDriver \u8FDE\u63A5 Doris Arrow Flight Server\u3002"}),"\n",(0,s.jsx)(r.p,{children:"POM dependency:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-Java",children:"<properties>\n    <adbc.version>0.15.0</adbc.version>\n</properties>\n\n<dependencies>\n    <dependency>\n        <groupId>org.apache.arrow.adbc</groupId>\n        <artifactId>adbc-driver-jdbc</artifactId>\n        <version>${adbc.version}</version>\n    </dependency>\n    <dependency>\n        <groupId>org.apache.arrow.adbc</groupId>\n        <artifactId>adbc-core</artifactId>\n        <version>${adbc.version}</version>\n    </dependency>\n    <dependency>\n        <groupId>org.apache.arrow.adbc</groupId>\n        <artifactId>adbc-driver-manager</artifactId>\n        <version>${adbc.version}</version>\n    </dependency>\n    <dependency>\n        <groupId>org.apache.arrow.adbc</groupId>\n        <artifactId>adbc-sql</artifactId>\n        <version>${adbc.version}</version>\n    </dependency>\n    <dependency>\n        <groupId>org.apache.arrow.adbc</groupId>\n        <artifactId>adbc-driver-flight-sql</artifactId>\n        <version>${adbc.version}</version>\n    </dependency>\n</dependencies>\n"})}),"\n",(0,s.jsx)(r.h3,{id:"adbc-driver",children:"ADBC Driver"}),"\n",(0,s.jsx)(r.p,{children:"\u8FDE\u63A5\u4EE3\u7801\u793A\u4F8B\u5982\u4E0B\uFF1A"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-Java",children:'// 1. new driver\nfinal BufferAllocator allocator = new RootAllocator();\nFlightSqlDriver driver = new FlightSqlDriver(allocator);\nMap<String, Object> parameters = new HashMap<>();\nAdbcDriver.PARAM_URI.set(parameters, Location.forGrpcInsecure("{FE_HOST}", {fe.conf:arrow_flight_sql_port}).getUri().toString());\nAdbcDriver.PARAM_USERNAME.set(parameters, "root");\nAdbcDriver.PARAM_PASSWORD.set(parameters, "");\nAdbcDatabase adbcDatabase = driver.open(parameters);\n\n// 2. new connection\nAdbcConnection connection = adbcDatabase.connect();\nAdbcStatement stmt = connection.createStatement();\n\n// 3. execute query\nstmt.setSqlQuery("select * from information_schema.tables;");\nQueryResult queryResult = stmt.executeQuery();\nArrowReader reader = queryResult.getReader();\n\n// 4. load result\nList<String> result = new ArrayList<>();\nwhile (reader.loadNextBatch()) {\n    VectorSchemaRoot root = reader.getVectorSchemaRoot();\n    String tsvString = root.contentToTSVString();\n    result.add(tsvString);\n}\nSystem.out.printf("batchs %d\\n", result.size());\n\n// 5. close\nreader.close();\nqueryResult.close();\nstmt.close();\nconnection.close();\n'})}),"\n",(0,s.jsx)(r.h3,{id:"jdbc-driver",children:"JDBC Driver"}),"\n",(0,s.jsx)(r.p,{children:"\u8FDE\u63A5\u4EE3\u7801\u793A\u4F8B\u5982\u4E0B\uFF1A"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-Java",children:'final Map<String, Object> parameters = new HashMap<>();\nAdbcDriver.PARAM_URI.set(\n        parameters,"jdbc:arrow-flight-sql://{FE_HOST}:{fe.conf:arrow_flight_sql_port}?useServerPrepStmts=false&cachePrepStmts=true&useSSL=false&useEncryption=false");\nAdbcDriver.PARAM_USERNAME.set(parameters, "root");\nAdbcDriver.PARAM_PASSWORD.set(parameters, "");\ntry (\n        BufferAllocator allocator = new RootAllocator();\n        AdbcDatabase db = new JdbcDriver(allocator).open(parameters);\n        AdbcConnection connection = db.connect();\n        AdbcStatement stmt = connection.createStatement()\n) {\n    stmt.setSqlQuery("select * from information_schema.tables;");\n    AdbcStatement.QueryResult queryResult = stmt.executeQuery();\n    ArrowReader reader = queryResult.getReader();\n    List<String> result = new ArrayList<>();\n    while (reader.loadNextBatch()) {\n        VectorSchemaRoot root = reader.getVectorSchemaRoot();\n        String tsvString = root.contentToTSVString();\n        result.add(tsvString);\n    }\n    long etime = System.currentTimeMillis();\n    System.out.printf("batchs %d\\n", result.size());\n\n    reader.close();\n    queryResult.close();\n    stmt.close();\n}  catch (Exception e) {\n    e.printStackTrace();\n}\n'})}),"\n",(0,s.jsx)(r.h3,{id:"jdbc-\u548C-java-\u8FDE\u63A5\u65B9\u5F0F\u7684\u9009\u62E9",children:"JDBC \u548C Java \u8FDE\u63A5\u65B9\u5F0F\u7684\u9009\u62E9"}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.a,{href:"https://github.com/apache/doris/blob/master/samples/arrow-flight-sql/java/README.md",children:"JDBC/Java Arrow Flight SQL Sample"})," \u662F JDBC/Java \u4F7F\u7528 Arrow FLight SQL \u7684 demo\uFF0C\u4F60\u53EF\u4EE5\u4F7F\u7528\u5B83\u6765\u6D4B\u8BD5\u5411 Arrow Flight Server \u53D1\u9001\u67E5\u8BE2\u7684\u591A\u79CD\u8FDE\u63A5\u65B9\u6CD5\uFF0C\u5E2E\u52A9\u4F60\u4E86\u89E3\u5982\u4F55\u4F7F\u7528 Arrow FLight SQL \u5E76\u6D4B\u8BD5\u6027\u80FD\u3002\u9884\u671F\u7684\u6267\u884C\u7ED3\u679C\u89C1 ",(0,s.jsx)(r.a,{href:"https://github.com/apache/doris/pull/45306",children:"Add Arrow Flight Sql demo for Java"}),"\u3002"]}),"\n",(0,s.jsxs)(r.p,{children:["\u5BF9\u6BD4\u4F20\u7EDF\u7684 ",(0,s.jsx)(r.code,{children:"jdbc:mysql"})," \u8FDE\u63A5\u65B9\u5F0F\uFF0CJdbc \u548C Java \u7684 Arrow Flight SQL \u8FDE\u63A5\u65B9\u5F0F\u7684\u6027\u80FD\u6D4B\u8BD5\u89C1 Section 6.2 of ",(0,s.jsx)(r.a,{href:"https://github.com/apache/doris/issues/25514",children:"GitHub Issue"}),"\uFF0C\u8FD9\u91CC\u57FA\u4E8E\u6D4B\u8BD5\u7ED3\u8BBA\u7ED9\u51FA\u4E00\u4E9B\u4F7F\u7528\u5EFA\u8BAE\u3002"]}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsx)(r.p,{children:"\u4E0A\u8FF0\u4E09\u79CD Java Arrow Flight SQL \u8FDE\u63A5\u65B9\u5F0F\u7684\u9009\u62E9\u4E0A\uFF0C\u5982\u679C\u540E\u7EED\u7684\u6570\u636E\u5206\u6790\u5C06\u57FA\u4E8E\u884C\u5B58\u7684\u6570\u636E\u683C\u5F0F\uFF0C\u90A3\u4E48\u4F7F\u7528 jdbc:arrow-flight-sql\uFF0C\u8FD9\u5C06\u8FD4\u56DE JDBC ResultSet \u683C\u5F0F\u7684\u6570\u636E\uFF1B\u5982\u679C\u540E\u7EED\u7684\u6570\u636E\u5206\u6790\u53EF\u4EE5\u57FA\u4E8E Arrow \u683C\u5F0F\u6216\u5176\u4ED6\u5217\u5B58\u6570\u636E\u683C\u5F0F\uFF0C\u90A3\u4E48\u4F7F\u7528 Flight AdbcDriver \u6216 Flight JdbcDriver \u76F4\u63A5\u8FD4\u56DE Arrow \u683C\u5F0F\u7684\u6570\u636E\uFF0C\u8FD9\u5C06\u907F\u514D\u884C\u5217\u8F6C\u6362\uFF0C\u5E76\u53EF\u5229\u7528 Arrow \u7684\u7279\u6027\u52A0\u901F\u6570\u636E\u89E3\u6790\u3002"}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["\u65E0\u8BBA\u89E3\u6790 JDBC ResultSet \u8FD8\u662F Arrow \u683C\u5F0F\u7684\u6570\u636E\uFF0C\u6240\u8017\u8D39\u7684\u65F6\u95F4\u90FD\u5927\u4E8E\u8BFB\u53D6\u6570\u636E\u7684\u8017\u65F6\uFF0C\u5982\u679C\u4F60\u90A3\u91CC\u4F7F\u7528 Arrow Flight SQL \u7684\u6027\u80FD\u4E0D\u7B26\u5408\u9884\u671F\uFF0C\u548C ",(0,s.jsx)(r.code,{children:"jdbc:mysql://"})," \u76F8\u6BD4\u63D0\u5347\u6709\u9650\uFF0C\u4E0D\u59A8\u5206\u6790\u4E0B\u662F\u5426\u89E3\u6790\u6570\u636E\u8017\u65F6\u592A\u957F\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsx)(r.p,{children:"\u5BF9\u6240\u6709\u8FDE\u63A5\u65B9\u5F0F\u800C\u8A00\uFF0CJDK 17 \u90FD\u6BD4 JDK 1.8 \u8BFB\u53D6\u6570\u636E\u7684\u901F\u5EA6\u66F4\u5FEB\u3002"}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["\u5F53\u8BFB\u53D6\u6570\u636E\u91CF\u975E\u5E38\u5927\u65F6\uFF0C\u4F7F\u7528 Arrow Flight SQL \u5C06\u6BD4 ",(0,s.jsx)(r.code,{children:"jdbc:mysql://"})," \u4F7F\u7528\u66F4\u5C11\u7684\u5185\u5B58\uFF0C\u6240\u4EE5\u5982\u679C\u4F60\u53D7\u5185\u5B58\u4E0D\u8DB3\u56F0\u6270\uFF0C\u540C\u6837\u53EF\u4EE5\u5C1D\u8BD5\u4E0B Arrow Flight SQL\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsx)(r.p,{children:"\u9664\u4E86\u4E0A\u8FF0\u4E09\u79CD\u8FDE\u63A5\u65B9\u5F0F\uFF0C\u8FD8\u53EF\u4EE5\u4F7F\u7528\u539F\u751F\u7684 FlightClient \u8FDE\u63A5 Arrow Flight Server\uFF0C\u53EF\u4EE5\u66F4\u52A0\u7075\u6D3B\u7684\u5E76\u884C\u8BFB\u53D6\u591A\u4E2A Endpoints\u3002Flight AdbcDriver \u4E5F\u662F\u57FA\u4E8E FlightClient \u521B\u5EFA\u7684\u94FE\u63A5\uFF0C\u76F8\u8F83\u4E8E\u76F4\u63A5\u4F7F\u7528 FlightClient \u66F4\u7B80\u5355\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"\u4E0E\u5176\u4ED6\u5927\u6570\u636E\u7EC4\u4EF6\u4EA4\u4E92",children:"\u4E0E\u5176\u4ED6\u5927\u6570\u636E\u7EC4\u4EF6\u4EA4\u4E92"}),"\n",(0,s.jsx)(r.h3,{id:"spark--flink",children:"Spark & Flink"}),"\n",(0,s.jsxs)(r.p,{children:["Arrow Flight \u5B98\u65B9\u76EE\u524D\u6CA1\u6709\u652F\u6301 Spark \u548C Flink \u7684\u8BA1\u5212\uFF08\u89C1 ",(0,s.jsx)(r.a,{href:"https://github.com/apache/arrow-adbc/issues/1490",children:"GitHub Issue"}),"\uFF09\uFF0C",(0,s.jsx)(r.a,{href:"https://github.com/apache/doris-spark-connector",children:"Doris Spark Connector"})," \u548C ",(0,s.jsx)(r.a,{href:"https://github.com/apache/doris-flink-connector",children:"Doris Flink Connector"})," \u81EA 24.0.0 \u5F00\u59CB\u652F\u6301\u901A\u8FC7 Arrow Flight SQL \u8BBF\u95EE Doris\uFF0C\u9884\u671F\u80FD\u63D0\u5347\u6570\u500D\u8BFB\u53D6\u6027\u80FD\u3002"]}),"\n",(0,s.jsxs)(r.p,{children:["\u793E\u533A\u4E4B\u524D\u53C2\u8003\u5F00\u6E90\u7684 ",(0,s.jsx)(r.a,{href:"https://github.com/qwshen/spark-flight-connector",children:"Spark-Flight-Connector"}),"\uFF0C\u5728 Spark \u4E2D\u4F7F\u7528 FlightClient \u8FDE\u63A5 Doris \u6D4B\u8BD5\uFF0C\u53D1\u73B0 Arrow \u4E0E Doris Block \u4E4B\u95F4\u6570\u636E\u683C\u5F0F\u8F6C\u6362\u7684\u901F\u5EA6\u66F4\u5FEB\uFF0C\u662F CSV \u683C\u5F0F\u4E0E Doris Block \u4E4B\u95F4\u8F6C\u6362\u901F\u5EA6\u7684 10 \u500D\uFF0C\u800C\u4E14\u5BF9 Map\uFF0CArray \u7B49\u590D\u6742\u7C7B\u578B\u7684\u652F\u6301\u66F4\u597D\uFF0C\u8FD9\u662F\u56E0\u4E3A Arrow \u6570\u636E\u683C\u5F0F\u7684\u538B\u7F29\u7387\u9AD8\uFF0C\u4F20\u8F93\u65F6\u7F51\u7EDC\u5F00\u9500\u5C0F\u3002\u4E0D\u8FC7\u76EE\u524D Doris Arrow Flight \u8FD8\u6CA1\u6709\u5B9E\u73B0\u591A\u8282\u70B9\u5E76\u884C\u8BFB\u53D6\uFF0C\u4ECD\u662F\u5C06\u67E5\u8BE2\u7ED3\u679C\u6C47\u603B\u5230\u4E00\u53F0 BE \u8282\u70B9\u540E\u8FD4\u56DE\uFF0C\u5BF9\u7B80\u5355\u7684\u6279\u91CF\u5BFC\u51FA\u6570\u636E\u800C\u8A00\uFF0C\u6027\u80FD\u53EF\u80FD\u6CA1\u6709 Doris Spark Connector \u5FEB\uFF0C\u540E\u8005\u652F\u6301 Tablet \u7EA7\u522B\u7684\u5E76\u884C\u8BFB\u53D6\u3002\u5982\u679C\u4F60\u5E0C\u671B\u5728 Spark \u4F7F\u7528 Arrow Flight SQL \u8FDE\u63A5 Doris\uFF0C\u53EF\u4EE5\u53C2\u8003\u5F00\u6E90\u7684 ",(0,s.jsx)(r.a,{href:"https://github.com/qwshen/spark-flight-connector",children:"Spark-Flight-Connector"})," \u548C ",(0,s.jsx)(r.a,{href:"https://github.com/dremio-hub/dremio-flight-connector",children:"Dremio-Flight-Connector"})," \u81EA\u884C\u5B9E\u73B0\u3002"]}),"\n",(0,s.jsx)(r.h3,{id:"\u652F\u6301-bi-\u5DE5\u5177",children:"\u652F\u6301 BI \u5DE5\u5177"}),"\n",(0,s.jsxs)(r.p,{children:["\u81EA Doris v2.1.8 \u5F00\u59CB\uFF0C\u652F\u6301 DBeaver \u7B49 BI \u5DE5\u5177\u4F7F\u7528 ",(0,s.jsx)(r.code,{children:"arrow-flight-sql"})," \u534F\u8BAE\u8FDE\u63A5 Doris\u3002DBeaver \u4F7F\u7528 ",(0,s.jsx)(r.code,{children:"arrow-flight-sql"})," Driver \u8FDE\u63A5 Doris \u7684\u65B9\u6CD5\u53C2\u8003\uFF1A",(0,s.jsx)(r.a,{href:"https://www.dremio.com/blog/jdbc-driver-for-arrow-flight-sql/#h-how-to-use-jdbc-driver-with-dbeaver-client",children:"how-to-use-jdbc-driver-with-dbeaver-client"}),"\uFF0C",(0,s.jsx)(r.a,{href:"https://docs.dremio.com/current/sonar/client-applications/clients/dbeaver/?_gl=1*1epgwh0*_gcl_au*MjUyNjE1ODM0LjE3MzQwMDExNDg",children:"client-applications/clients/dbeaver/"}),"\u3002"]}),"\n",(0,s.jsx)(r.h2,{id:"\u6269\u5C55\u5E94\u7528",children:"\u6269\u5C55\u5E94\u7528"}),"\n",(0,s.jsx)(r.h3,{id:"\u591A-be-\u5E76\u884C\u8FD4\u56DE\u7ED3\u679C",children:"\u591A BE \u5E76\u884C\u8FD4\u56DE\u7ED3\u679C"}),"\n",(0,s.jsx)(r.p,{children:"Doris \u9ED8\u8BA4\u4F1A\u5C06\u4E00\u4E2A\u67E5\u8BE2\u5728\u6240\u6709 BE \u8282\u70B9\u4E0A\u7684\u7ED3\u679C\u6C47\u603B\u805A\u5408\u5230\u4E00\u4E2A BE \u8282\u70B9\u4E0A\uFF0C\u5728 Mysql/JDBC \u67E5\u8BE2\u4E2D FE \u4F1A\u5411\u8FD9\u4E2A\u6C47\u603B\u6570\u636E\u7684\u8282\u70B9\u8BF7\u6C42\u67E5\u8BE2\u7ED3\u679C\uFF0C\u5728 Arrow Flight SQL \u67E5\u8BE2\u4E2D FE \u4F1A\u5C06\u8FD9\u4E2A\u8282\u70B9\u7684 IP/Port \u5305\u88C5\u5728 Endpoint \u4E2D\u8FD4\u56DE\u7ED9 ADBC Client\uFF0CADBC Client \u4F1A\u8BF7\u6C42\u8FD9\u4E2A Endpoint \u5BF9\u5E94\u7684 BE \u8282\u70B9\u62C9\u53D6\u6570\u636E\u3002"}),"\n",(0,s.jsxs)(r.p,{children:["\u5982\u679C\u67E5\u8BE2\u53EA\u662F\u7B80\u5355\u7684 Select \u4ECE Doris \u62C9\u53D6\u6570\u636E\uFF0C\u6CA1\u6709 Join\u3001Sort\u3001\u7A97\u53E3\u51FD\u6570\u7B49\u6709\u6570\u636E Shuffle \u884C\u4E3A\u7684\u7B97\u5B50\uFF0C\u53EF\u4EE5\u5C06\u67E5\u8BE2\u6309\u7167 Tablet \u7C92\u5EA6\u62C6\u5206\uFF0C\u73B0\u5728 Doris Spark/Flink Connector \u5C31\u662F\u7528\u7684\u8FD9\u4E2A\u65B9\u6CD5\u5B9E\u73B0\u5E76\u884C\u8BFB\u53D6\u6570\u636E\uFF0C\u5206\u4E3A\u4E24\u4E2A\u6B65\u9AA4\uFF1A\n1. \u6267\u884C ",(0,s.jsx)(r.code,{children:"explain sql"}),"\uFF0CFE \u8FD4\u56DE\u7684\u67E5\u8BE2\u8BA1\u5212\u4E2D ScanOperator \u5305\u542B Scan \u7684\u6240\u6709 Tablet ID List\u3002\n2. \u4F9D\u636E\u4E0A\u9762\u7684 Tablet ID List \u5C06\u539F\u59CB SQL \u62C6\u5206\u4E3A\u591A\u4E2A SQL\uFF0C\u6BCF\u4E2A SQL \u53EA\u8BFB\u53D6\u90E8\u5206 Tablet\uFF0C\u7528\u6CD5\u7C7B\u4F3C ",(0,s.jsx)(r.code,{children:"SELECT * FROM t1 TABLET(10001,10002) limit 1000;"}),"\uFF0C\u62C6\u5206\u540E\u7684\u591A\u4E2A SQL \u53EF\u4EE5\u5E76\u884C\u6267\u884C\u3002\u53C2\u8003 ",(0,s.jsx)(r.a,{href:"https://github.com/apache/doris/pull/10170",children:"Support select table sample"}),"\u3002"]}),"\n",(0,s.jsxs)(r.p,{children:["\u5982\u679C\u67E5\u8BE2\u6700\u5916\u5C42\u662F\u805A\u5408\uFF0CSQL \u7C7B\u4F3C ",(0,s.jsx)(r.code,{children:"select k1, sum(k2) from xxx group by k1"}),"\uFF0CDoris v3.0.4 \u7248\u672C\u540E\uFF0C\u6267\u884C ",(0,s.jsx)(r.code,{children:"set enable_parallel_result_sink=true;"})," \u540E\u5141\u8BB8\u4E00\u4E2A\u67E5\u8BE2\u7684\u6BCF\u4E2A BE \u8282\u70B9\u72EC\u7ACB\u8FD4\u56DE\u67E5\u8BE2\u7ED3\u679C\uFF0CADBC Client \u6536\u5230 FE \u8FD4\u56DE\u7684 Endpoint \u5217\u8868\u540E\u5E76\u884C\u4ECE\u591A\u4E2A BE \u8282\u70B9\u62C9\u53D6\u7ED3\u679C\u3002\u4E0D\u8FC7\u6CE8\u610F\u5F53\u805A\u5408\u7ED3\u679C\u5F88\u5C0F\u65F6\uFF0C\u591A BE \u8FD4\u56DE\u4F1A\u589E\u52A0 RPC \u7684\u538B\u529B\u3002\u5177\u4F53\u5B9E\u73B0\u53C2\u8003 ",(0,s.jsx)(r.a,{href:"https://github.com/apache/doris/pull/36053",children:"support parallel result sink"}),"\u3002\u7406\u8BBA\u4E0A\u9664\u4E86\u6700\u5916\u5C42\u662F\u6392\u5E8F\u7684\u67E5\u8BE2\uFF0C\u5176\u4ED6\u67E5\u8BE2\u90FD\u53EF\u4EE5\u652F\u6301\u6BCF\u4E2A BE \u8282\u70B9\u5E76\u884C\u8FD4\u56DE\u7ED3\u679C\uFF0C\u4E0D\u8FC7\u6682\u65F6\u6CA1\u6709\u8FD9\u65B9\u4FBF\u7684\u9700\u6C42\uFF0C\u6CA1\u6709\u66F4\u8FDB\u4E00\u6B65\u5B9E\u73B0\u3002"]}),"\n",(0,s.jsx)(r.h3,{id:"\u591A-be-\u5171\u4EAB\u540C\u4E00\u4E2A\u53EF\u4F9B\u96C6\u7FA4\u5916\u90E8\u8BBF\u95EE\u7684-ip",children:"\u591A BE \u5171\u4EAB\u540C\u4E00\u4E2A\u53EF\u4F9B\u96C6\u7FA4\u5916\u90E8\u8BBF\u95EE\u7684 IP"}),"\n",(0,s.jsx)(r.p,{children:"\u5982\u679C\u5B58\u5728\u4E00\u4E2A Doris \u96C6\u7FA4\uFF0C\u5B83\u7684 FE \u8282\u70B9\u53EF\u4EE5\u88AB\u96C6\u7FA4\u5916\u90E8\u8BBF\u95EE\uFF0C\u5B83\u7684\u6240\u6709 BE \u8282\u70B9\u53EA\u53EF\u4EE5\u88AB\u96C6\u7FA4\u5185\u90E8\u8BBF\u95EE\u3002\u8FD9\u5728\u4F7F\u7528 Mysql Client \u548C JDBC \u8FDE\u63A5 Doris \u6267\u884C\u67E5\u8BE2\u662F\u6CA1\u95EE\u9898\u7684\uFF0C\u67E5\u8BE2\u7ED3\u679C\u5C06\u7531 Doris FE \u8282\u70B9\u8FD4\u56DE\u3002\u4F46\u4F7F\u7528 Arrow Flight SQL \u8FDE\u63A5 Doris \u65E0\u6CD5\u6267\u884C\u67E5\u8BE2\uFF0C\u56E0\u4E3A ADBC Client \u9700\u8981\u8FDE\u63A5 Doris BE \u8282\u70B9\u62C9\u53D6\u67E5\u8BE2\u7ED3\u679C\uFF0C\u4F46 Doris BE \u8282\u70B9\u4E0D\u5141\u8BB8\u88AB\u96C6\u7FA4\u5916\u90E8\u8BBF\u95EE\u3002"}),"\n",(0,s.jsx)(r.p,{children:"\u5728\u751F\u4EA7\u73AF\u5883\u4E2D\uFF0C\u5F88\u591A\u65F6\u5019\u4E0D\u65B9\u4FBF\u5C06 Doris BE \u8282\u70B9\u66B4\u9732\u5230\u96C6\u7FA4\u5916\u3002\u4F46\u53EF\u4EE5\u4E3A\u6240\u6709 Doris BE \u8282\u70B9\u589E\u52A0\u4E86\u4E00\u5C42\u53CD\u5411\u4EE3\u7406\uFF08\u6BD4\u5982 Nginx\uFF09\uFF0C\u96C6\u7FA4\u5916\u90E8\u7684 Client \u8FDE\u63A5 Nginx \u65F6\u4F1A\u968F\u673A\u8DEF\u7531\u5230\u4E00\u53F0 Doris BE \u8282\u70B9\u4E0A\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0CArrow Flight SQL \u67E5\u8BE2\u7ED3\u679C\u4F1A\u968F\u673A\u4FDD\u5B58\u5728\u4E00\u53F0 Doris BE \u8282\u70B9\u4E0A\uFF0C\u5982\u679C\u548C Nginx \u968F\u673A\u8DEF\u7531\u7684 Doris BE \u8282\u70B9\u4E0D\u540C\uFF0C\u9700\u8981\u5728 Doris BE \u8282\u70B9\u5185\u90E8\u505A\u4E00\u6B21\u6570\u636E\u8F6C\u53D1\u3002"}),"\n",(0,s.jsxs)(r.p,{children:["\u81EA Doris v2.1.8 \u5F00\u59CB\uFF0C\u4F60\u53EF\u4EE5\u5728\u6240\u6709 Doris BE \u8282\u70B9\u7684 ",(0,s.jsx)(r.code,{children:"be.conf"})," \u4E2D\u5C06 ",(0,s.jsx)(r.code,{children:"public_host"})," \u548C ",(0,s.jsx)(r.code,{children:"arrow_flight_sql_proxy_port"})," \u914D\u7F6E\u6210\u591A Doris BE \u8282\u70B9\u5171\u4EAB\u7684\u53EF\u4F9B\u96C6\u7FA4\u5916\u90E8\u8BBF\u95EE\u7684 IP \u548C\u7AEF\u53E3\uFF0C\u67E5\u8BE2\u7ED3\u679C\u53EF\u4EE5\u6B63\u786E\u8F6C\u53D1\u540E\u8FD4\u56DE ADBC Client\u3002"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-conf",children:"    public_host={nginx ip}\n    arrow_flight_sql_proxy_port={nginx port}\n"})}),"\n",(0,s.jsx)(r.h2,{id:"faq",children:"FAQ"}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["Q: \u62A5\u9519 ",(0,s.jsx)(r.code,{children:'connection error: desc = "transport: Error while dialing: dial tcp <ip:arrow_flight_port>: i/o timeout"'}),"\u3002"]}),"\n",(0,s.jsxs)(r.p,{children:["A: \u5982\u679C\u62A5\u9519\u4FE1\u606F\u4E2D\u7684 ",(0,s.jsx)(r.code,{children:"<ip:arrow_flight_port>"})," \u662F Doris FE \u8282\u70B9\u7684 IP \u548C arrow-flight-prot\uFF0C"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{children:" \u9996\u5148\u68C0\u67E5 Doris FE \u8282\u70B9\u7684 arrow-flight-server \u662F\u5426\u6B63\u5E38\u542F\u52A8\uFF0C\u5728 fe/log/fe.log \u6587\u4EF6\u4E2D\u641C\u7D22\u5230 `Arrow Flight SQL service is started` \u8868\u660E FE \u7684 Arrow Flight Server \u542F\u52A8\u6210\u529F\u3002\n\n \u82E5 Doris FE \u8282\u70B9\u7684 arrow-flight-server \u6B63\u5E38\u542F\u52A8\uFF0C\uFF0C\u68C0\u67E5 Client \u6240\u5728\u673A\u5668\u80FD\u5426 `ping` \u901A\u62A5\u9519\u4FE1\u606F `<ip:arrow_flight_port>` \u4E2D\u7684 IP\uFF0C\u82E5\u65E0\u6CD5 `ping` \u901A\uFF0C\u9700\u8981\u4E3A Doris FE \u8282\u70B9\u5F00\u901A\u4E00\u4E2A\u53EF\u4F9B\u5916\u90E8\u8BBF\u95EE\u7684 IP\uFF0C\u5E76\u91CD\u65B0\u90E8\u7F72\u96C6\u7FA4\u3002\n"})}),"\n",(0,s.jsxs)(r.p,{children:["A: \u5982\u679C\u62A5\u9519\u4FE1\u606F\u4E2D\u7684 ",(0,s.jsx)(r.code,{children:"<ip:arrow_flight_port>"})," \u662F Doris BE \u8282\u70B9\u7684 IP \u548C arrow-flight-prot\u3002"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{children:" \u9996\u5148\u68C0\u67E5 Doris BE \u8282\u70B9\u7684 arrow-flight-server \u662F\u5426\u6B63\u5E38\u542F\u52A8\uFF0C\u5728 be/log/be.INFO \u6587\u4EF6\u4E2D\u641C\u7D22\u5230 `Arrow Flight Service bind to host` \u8868\u660E BE \u7684 Arrow Flight Server \u542F\u52A8\u6210\u529F\u3002\n \n \u82E5 Doris BE \u8282\u70B9\u7684 arrow-flight-server \u6B63\u5E38\u542F\u52A8\uFF0C\u68C0\u67E5 Client \u6240\u5728\u673A\u5668\u80FD\u5426 `ping` \u901A\u62A5\u9519\u4FE1\u606F `<ip:arrow_flight_port>` \u4E2D\u7684 IP\uFF0C\u82E5\u65E0\u6CD5 `ping` \u901A\uFF0C\u82E5\u5DF2\u77E5 Doris BE \u8282\u70B9\u5904\u4E8E\u65E0\u6CD5\u88AB\u5916\u90E8\u8BBF\u95EE\u7684\u5185\u7F51\uFF0C\u4E0B\u9762\u4E24\u4E2A\u65B9\u6CD5\uFF1A\n\n     - \u8003\u8651\u4E3A\u6BCF\u4E2A Doris BE \u8282\u70B9\u5F00\u901A\u4E00\u4E2A\u53EF\u4F9B\u5916\u90E8\u8BBF\u95EE\u7684 IP\uFF0C\u81EA Doris v2.1.8 \u5F00\u59CB\uFF0C\u4F60\u53EF\u4EE5\u5728\u8FD9\u4E2A Doris BE \u8282\u70B9\u7684 `be.conf` \u4E2D\u5C06 `public_host` \u914D\u7F6E\u6210\u8FD9\u4E2A IP\uFF0C\u540C\u7406\u5C06\u6240\u6709 Doris BE \u8282\u70B9\u7684 `public_host` \u914D\u7F6E\u6210\u5BF9\u5E94 BE \u8282\u70B9\u53EF\u88AB Client \u8BBF\u95EE\u7684 IP\u3002\n\n     - \u53C2\u8003\u4E0A\u6587 [\u591A BE \u5171\u4EAB\u540C\u4E00\u4E2A\u53EF\u4F9B\u96C6\u7FA4\u5916\u90E8\u8BBF\u95EE\u7684 IP] \u7AE0\u8282\uFF0C\u53EF\u4EE5\u4E3A\u6240\u6709 Doris BE \u8282\u70B9\u589E\u52A0\u4E86\u4E00\u5C42\u53CD\u5411\u4EE3\u7406\u3002\n \n \u82E5\u4E0D\u6E05\u695A Doris BE \u662F\u5426\u5B8C\u5168\u5904\u4E8E\u5185\u7F51\uFF0C\u68C0\u67E5 Client \u6240\u5728\u673A\u5668\u4E0E Doris BE \u8282\u70B9\u6240\u5728\u673A\u5668\u7684\u5176\u4ED6 IP \u4E4B\u95F4\u7684\u8FDE\u901A\u6027\uFF0C\u5728 Doris BE \u8282\u70B9\u6240\u5728\u673A\u5668\u6267\u884C `ifconfig` \u8FD4\u56DE\u5F53\u524D\u673A\u5668\u6240\u6709\u7684 IP\uFF0C\u5176\u4E2D\u4E00\u4E2A IP \u5E94\u8BE5\u548C `<ip:arrow_flight_port>` \u4E2D\u7684 IP \u76F8\u540C\uFF0C\u5E76\u4E14\u548C `show backends` \u6253\u5370\u7684\u8FD9\u4E2A Doris BE \u8282\u70B9\u7684 IP \u76F8\u540C\uFF0C\u4F9D\u6B21 `ping` `ifconfig` \u8FD4\u56DE\u7684\u5176\u4ED6 IP\uFF0C\u82E5 Doris BE \u8282\u70B9\u5B58\u5728\u53EF\u4EE5\u88AB Client \u8BBF\u95EE\u7684 IP\uFF0C\u53C2\u8003\u4E0A\u6587\u540C\u6837\u5C06\u8FD9\u4E2A IP \u914D\u7F6E\u4E3A `public_host`\u3002\u82E5 Doris BE \u8282\u70B9\u6240\u6709\u7684 IP \u5747\u65E0\u6CD5\u88AB Client \u8BBF\u95EE\uFF0C\u90A3\u4E48 Doris BE \u8282\u70B9\u5B8C\u5168\u5904\u4E8E\u5185\u7F51\u3002\n"})}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["Q\uFF1A\u4F7F\u7528 JDBC \u6216 JAVA \u8FDE\u63A5 Arrow Flight SQL \u65F6\u62A5\u9519 ",(0,s.jsx)(r.code,{children:'module java.base does not "opens java.nio" to unnamed module'})," \u6216\u8005 ",(0,s.jsx)(r.code,{children:'module java.base does not "opens java.nio" to org.apache.arrow.memory.core'})," \u6216\u8005 ",(0,s.jsx)(r.code,{children:"java.lang.NoClassDefFoundError: Could not initialize class org.apache.arrow.memory.util.MemoryUtil (Internal; Prepare)"})]}),"\n",(0,s.jsxs)(r.p,{children:["A\uFF1A\u9996\u5148\u68C0\u67E5 fe/conf/fe.conf \u4E2D ",(0,s.jsx)(r.code,{children:"JAVA_OPTS_FOR_JDK_17"})," \u662F\u5426\u5305\u542B ",(0,s.jsx)(r.code,{children:"--add-opens=java.base/java.nio=ALL-UNNAMED"}),"\uFF0C\u82E5\u6CA1\u6709\u5219\u6DFB\u52A0\u3002\u7136\u540E\u53C2\u8003\u4E0A\u6587 [JDBC Connector with Arrow Flight SQL] \u4E2D\u7684\u6CE8\u610F\u4E8B\u9879\u5728 Java \u547D\u4EE4\u4E2D\u6DFB\u52A0 ",(0,s.jsx)(r.code,{children:"--add-opens=java.base/java.nio=ALL-UNNAMED"}),"\uFF0C\u5982\u679C\u5728 IntelliJ IDEA \u4E2D\u8C03\u8BD5\uFF0C\u9700\u8981\u5728 ",(0,s.jsx)(r.code,{children:"Run/Debug Configurations"})," \u7684 ",(0,s.jsx)(r.code,{children:"Build and run"})," \u4E2D\u589E\u52A0 ",(0,s.jsx)(r.code,{children:"--add-opens=java.base/java.nio=ALL-UNNAMED"}),"\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["Q: ARM \u73AF\u5883\u62A5\u9519 ",(0,s.jsx)(r.code,{children:"get flight info statement failed, arrow flight schema timeout, TimeoutException: Waited 5000 milliseconds for io.grpc.stub.Client"}),"\u3002"]}),"\n",(0,s.jsx)(r.p,{children:"A: \u5982\u679C Linux \u5185\u6838\u7248\u672C <= 4.19.90\uFF0C\u9700\u8981\u5347\u7EA7\u5230 4.19.279 \u53CA\u4EE5\u4E0A\uFF0C\u6216\u8005\u5728\u4F4E\u7248\u672C Linux \u5185\u6838\u7684\u73AF\u5883\u4E2D\u91CD\u65B0\u7F16\u8BD1 Doris BE\uFF0C\u5177\u4F53\u7F16\u8BD1\u65B9\u6CD5\u53C2\u8003\u6587\u6863<docs/dev/install/source-install/compilation-arm>"}),"\n",(0,s.jsxs)(r.p,{children:["\u95EE\u9898\u539F\u56E0\uFF1A\u8FD9\u662F\u56E0\u4E3A\u8001\u7248\u672C Linux \u5185\u6838\u548C Arrow \u5B58\u5728\u517C\u5BB9\u6027\u95EE\u9898\uFF0C",(0,s.jsx)(r.code,{children:"cpp: arrow::RecordBatch::MakeEmpty()"})," \u6784\u9020 Arrow Record Batch \u65F6\u4F1A\u5361\u4F4F\uFF0C\u5BFC\u81F4 Doris BE \u7684 Arrow Flight Server \u5728 5000ms \u5185\u6CA1\u6709\u56DE\u5E94 Doris FE \u7684 Arrow Flight Server \u7684 RPC \u8BF7\u6C42\uFF0C\u5BFC\u81F4 FE \u7ED9 Client \u8FD4\u56DE rpc timeout failed\u3002Spark \u548C Flink \u8BFB\u53D6 Doris \u65F6\u4E5F\u662F\u5C06\u67E5\u8BE2\u7ED3\u679C\u8F6C\u6362\u6210 Arrow Record Batch \u540E\u8FD4\u56DE\uFF0C\u6240\u4EE5\u4E5F\u5B58\u5728\u540C\u6837\u7684\u95EE\u9898\u3002"]}),"\n",(0,s.jsx)(r.p,{children:"kylinv10 SP2 \u548C SP3 \u7684 Linux \u5185\u6838\u7248\u672C\u6700\u9AD8\u53EA\u6709 4.19.90-24.4.v2101.ky10.aarch64\uFF0C\u65E0\u6CD5\u7EE7\u7EED\u5347\u7EA7\u5185\u6838\u7248\u672C\uFF0C\u53EA\u80FD\u5728 kylinv10 \u4E0A\u91CD\u65B0\u7F16\u8BD1 Doris BE\uFF0C\u5982\u679C\u4F7F\u7528\u65B0\u7248\u672C ldb_toolchain \u7F16\u8BD1 Doris  BE \u540E\u95EE\u9898\u4F9D\u7136\u5B58\u5728\uFF0C\u53EF\u4EE5\u5C1D\u8BD5\u4F7F\u7528\u4F4E\u7248\u672C ldb_toolchain v0.17 \u7F16\u8BD1\uFF0C\u5982\u679C\u4F60\u7684 ARM \u73AF\u5883\u65E0\u6CD5\u8FDE\u5916\u7F51\uFF0C\u534E\u4E3A\u4E91\u63D0\u4F9B ARM + kylinv10\uFF0C\u963F\u91CC\u4E91\u63D0\u4F9B x86 + kylinv10"}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsx)(r.p,{children:"Q:  prepared statement \u4F20\u9012\u53C2\u6570\u62A5\u9519\u3002"}),"\n",(0,s.jsxs)(r.p,{children:["A: \u76EE\u524D ",(0,s.jsx)(r.code,{children:"jdbc:arrow-flight-sql"})," \u548C Java ADBC/JDBCDriver \u4E0D\u652F\u6301 prepared statement \u4F20\u9012\u53C2\u6570\uFF0C\u7C7B\u4F3C",(0,s.jsx)(r.code,{children:"select * from xxx where id=?"}),"\uFF0C\u5C06\u62A5\u9519 ",(0,s.jsx)(r.code,{children:"parameter ordinal 1 out of range"}),"\uFF0C\u8FD9\u662F Arrow Flight SQL \u7684\u4E00\u4E2A BUG\uFF08",(0,s.jsx)(r.a,{href:"https://github.com/apache/arrow/issues/40118",children:"GitHub Issue"}),"\uFF09\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["Q: \u5982\u4F55\u4FEE\u6539 ",(0,s.jsx)(r.code,{children:"jdbc:arrow-flight-sql"})," \u6BCF\u6B21\u8BFB\u53D6\u7684\u6279\u6B21\u5927\u5C0F\uFF0C\u5728\u67D0\u4E9B\u573A\u666F\u4E0B\u63D0\u5347\u6027\u80FD\u3002"]}),"\n",(0,s.jsxs)(r.p,{children:["A: \u901A\u8FC7\u4FEE\u6539",(0,s.jsx)(r.code,{children:"org.apache.arrow.adbc.driver.jdbc.JdbcArrowReader"}),"\u6587\u4EF6\u4E2D",(0,s.jsx)(r.code,{children:"makeJdbcConfig"}),"\u65B9\u6CD5\u4E2D\u7684 ",(0,s.jsx)(r.code,{children:"setTargetBatchSize"}),"\uFF0C\u9ED8\u8BA4\u662F 1024\uFF0C\u7136\u540E\u5C06\u4FEE\u6539\u540E\u7684\u6587\u4EF6\u4FDD\u5B58\u5230\u672C\u5730\u540C\u540D\u8DEF\u5F84\u76EE\u5F55\u4E0B\uFF0C\u4ECE\u800C\u8986\u76D6\u539F\u6587\u4EF6\u751F\u6548\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsx)(r.p,{children:"Q: ADBC v0.10\uFF0CJDBC \u548C Java ADBC/JDBCDriver \u4E0D\u652F\u6301\u5E76\u884C\u8BFB\u53D6\u3002"}),"\n",(0,s.jsxs)(r.p,{children:["A: \u6CA1\u6709\u5B9E\u73B0",(0,s.jsx)(r.code,{children:"stmt.executePartitioned()"}),"\u8FD9\u4E2A\u65B9\u6CD5\uFF0C\u53EA\u80FD\u4F7F\u7528\u539F\u751F\u7684 FlightClient \u5B9E\u73B0\u5E76\u884C\u8BFB\u53D6\u591A\u4E2A Endpoints, \u4F7F\u7528\u65B9\u6CD5",(0,s.jsx)(r.code,{children:"sqlClient=new FlightSqlClient, execute=sqlClient.execute(sql), endpoints=execute.getEndpoints(), for(FlightEndpoint endpoint: endpoints)"}),"\uFF0C\u6B64\u5916\uFF0CADBC V0.10 \u9ED8\u8BA4\u7684 AdbcStatement \u5B9E\u9645\u662F JdbcStatement\uFF0CexecuteQuery \u540E\u5C06\u884C\u5B58\u683C\u5F0F\u7684 JDBC ResultSet \u53C8\u91CD\u65B0\u8F6C\u6210\u7684 Arrow \u5217\u5B58\u683C\u5F0F\uFF0C\u9884\u671F\u5230 ADBC 1.0.0 \u65F6 Java ADBC \u5C06\u529F\u80FD\u5B8C\u5584 ",(0,s.jsx)(r.a,{href:"https://github.com/apache/arrow-adbc/issues/1490",children:"GitHub Issue"}),"\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsx)(r.p,{children:"Q: \u5728 URL \u4E2D\u6307\u5B9A database name\u3002"}),"\n",(0,s.jsxs)(r.p,{children:["A: \u622A\u6B62 Arrow v15.0\uFF0CArrow JDBC Connector \u4E0D\u652F\u6301\u5728 URL \u4E2D\u6307\u5B9A database name\uFF0C\u6BD4\u5982 ",(0,s.jsx)(r.code,{children:"jdbc:arrow-flight-sql://{FE_HOST}:{fe.conf:arrow_flight_sql_port}/test?useServerPrepStmts=false"})," \u4E2D\u6307\u5B9A\u8FDE\u63A5",(0,s.jsx)(r.code,{children:"test"})," database \u65E0\u6548\uFF0C\u53EA\u80FD\u624B\u52A8\u6267\u884C SQL ",(0,s.jsx)(r.code,{children:"use database"}),"\u3002Arrow v18.0 \u652F\u6301\u4E86\u5728 URL \u4E2D\u6307\u5B9A database name\uFF0C\u4F46\u5B9E\u6D4B\u4ECD\u6709 BUG\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["Q: Python ADBC print ",(0,s.jsx)(r.code,{children:"Warning: Cannot disable autocommit; conn will not be DB-API 2.0 compliant"}),"\u3002"]}),"\n",(0,s.jsx)(r.p,{children:"A: \u4F7F\u7528 Python \u65F6\u5FFD\u7565\u8FD9\u4E2A Warning\uFF0C\u8FD9\u662F Python ADBC Client \u7684\u95EE\u9898\uFF0C\u4E0D\u4F1A\u5F71\u54CD\u67E5\u8BE2\u3002"}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["Q: Python \u62A5\u9519 ",(0,s.jsx)(r.code,{children:"grpc: received message larger than max (20748753 vs. 16777216)"}),"\u3002"]}),"\n",(0,s.jsxs)(r.p,{children:["A: \u53C2\u8003 ",(0,s.jsx)(r.a,{href:"https://github.com/apache/arrow-adbc/issues/2078",children:"Python: grpc: received message larger than max (20748753 vs. 16777216) #2078"})," \u5728 Database Option \u4E2D\u589E\u52A0 ",(0,s.jsx)(r.code,{children:"adbc_driver_flightsql.DatabaseOptions.WITH_MAX_MSG_SIZE.value"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["Q: \u62A5\u9519 ",(0,s.jsx)(r.code,{children:"invalid bearer token"}),"\u3002"]}),"\n",(0,s.jsxs)(r.p,{children:["A: \u6267\u884C ",(0,s.jsx)(r.code,{children:"SET PROPERTY FOR 'root' 'max_user_connections' = '10000';"})," \u4FEE\u6539\u5F53\u524D\u7528\u6237\u7684\u5F53\u524D\u6700\u5927\u8FDE\u63A5\u6570\u5230 10000\uFF1B\u5728 ",(0,s.jsx)(r.code,{children:"fe.conf"})," \u589E\u52A0 qe_max_connection=30000 \u548C arrow_flight_token_cache_size=8000 \u5E76\u91CD\u542F FE\u3002"]}),"\n",(0,s.jsxs)(r.p,{children:["ADBC Client \u548C Arrow Flight Server \u7AEF\u4E4B\u95F4\u7684\u8FDE\u63A5\u672C\u8D28\u4E0A\u662F\u4E2A\u957F\u94FE\u63A5\uFF0C\u9700\u8981\u5728 Server \u7F13\u5B58 Auth Token\u3001Connection\u3001Session\uFF0C\u8FDE\u63A5\u521B\u5EFA\u540E\u4E0D\u4F1A\u5728\u5355\u4E2A\u67E5\u8BE2\u7ED3\u675F\u65F6\u7ACB\u5373\u65AD\u5F00\uFF0C\u9700\u8981 Client \u53D1\u9001 close() \u8BF7\u6C42\u540E\u6E05\u7406\uFF0C\u4F46\u5B9E\u9645\u4E0A Client \u7ECF\u5E38\u4E0D\u4F1A\u53D1\u9001 close \u8BF7\u6C42\uFF0C\u6240\u4EE5 Auth Token\u3001Connection\u3001Session \u4F1A\u957F\u65F6\u95F4\u5728 Arrow Flight Server \u4E0A\u4FDD\u5B58\uFF0C\u9ED8\u8BA4\u4F1A\u5728 3 \u5929\u540E\u8D85\u65F6\u65AD\u5F00\uFF0C\u6216\u8005\u5728\u8FDE\u63A5\u6570\u8D85\u8FC7 ",(0,s.jsx)(r.code,{children:"arrow_flight_token_cache_size"})," \u7684\u9650\u5236\u540E\u4F9D\u636E LRU \u6DD8\u6C70\u3002"]}),"\n",(0,s.jsxs)(r.p,{children:["\u622A\u6B62 Doris v2.1.8\uFF0CArrow Flight \u8FDE\u63A5\u548C Mysql/JDBC \u8FDE\u63A5\u4F7F\u7528\u76F8\u540C\u7684\u8FDE\u63A5\u6570\u9650\u5236\uFF0C\u5305\u62EC FE \u6240\u6709\u7528\u6237\u7684\u603B\u8FDE\u63A5\u6570 ",(0,s.jsx)(r.code,{children:"qe_max_connection"})," \u548C\u5355\u4E2A\u7528\u6237\u7684\u8FDE\u63A5\u6570 ",(0,s.jsx)(r.code,{children:"UserProperty"})," \u4E2D\u7684 ",(0,s.jsx)(r.code,{children:"max_user_connections"}),"\u3002\u4F46\u9ED8\u8BA4\u7684 ",(0,s.jsx)(r.code,{children:"qe_max_connection"})," \u548C ",(0,s.jsx)(r.code,{children:"max_user_connections"})," \u5206\u522B\u662F 1024 \u548C 100\u3002Arrow Flight SQL \u5E38\u7528\u6765\u53D6\u4EE3\u4F7F\u7528 JDBC \u7684\u573A\u666F\uFF0C\u4F46 JDBC \u8FDE\u63A5\u4F1A\u5728\u67E5\u8BE2\u7ED3\u675F\u540E\u7ACB\u5373\u91CA\u653E\uFF0C\u6240\u4EE5\u4F7F\u7528 Arrow Flight SQL \u65F6\uFF0CDoris \u9ED8\u8BA4\u7684\u8FDE\u63A5\u6570\u9650\u5236\u592A\u5C0F\uFF0C\u7ECF\u5E38\u5BFC\u81F4\u8FDE\u63A5\u6570\u8D85\u8FC7 ",(0,s.jsx)(r.code,{children:"arrow_flight_token_cache_size"})," \u7684\u9650\u5236\u540E\u5C06\u4ECD\u5728\u88AB\u4F7F\u7528\u7684\u8FDE\u63A5\u6DD8\u6C70\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsx)(r.p,{children:"Q: \u4F7F\u7528 JDBC \u6216 JAVA \u8FDE\u63A5 Arrow Flight SQL \u8BFB\u53D6 Datatime \u7C7B\u578B\u8FD4\u56DE\u65F6\u95F4\u6233\uFF0C\u800C\u4E0D\u662F\u683C\u5F0F\u5316\u65F6\u95F4\u3002"}),"\n",(0,s.jsxs)(r.p,{children:["A: JDBC \u6216 JAVA \u8FDE\u63A5 Arrow Flight SQL \u8BFB\u53D6 Datatime \u7C7B\u578B\u9700\u8981\u81EA\u884C\u8F6C\u6362\u65F6\u95F4\u6233\uFF0C\u53C2\u8003 ",(0,s.jsx)(r.a,{href:"https://github.com/apache/doris/pull/48578",children:"Add java parsing datetime type in arrow flight sql sample #48578"}),"\u3002\u7528 Python Arrow Flight SQL \u8BFB\u53D6 Datatime \u7C7B\u578B\u8FD4\u56DE\u7ED3\u679C\u4E3A ",(0,s.jsx)(r.code,{children:"2025-03-03 17:23:28Z"}),"\uFF0C\u800C JDBC \u6216 JAVA \u8FD4\u56DE ",(0,s.jsx)(r.code,{children:"1740993808"}),"\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["Q: \u4F7F\u7528 JDBC \u6216 Java JDBC Client \u8FDE\u63A5 Arrow Flight SQL \u8BFB\u53D6 Array \u5D4C\u5957\u7C7B\u578B\u62A5\u9519 ",(0,s.jsx)(r.code,{children:"Configuration does not provide a mapping for array column 2"}),"\u3002"]}),"\n",(0,s.jsxs)(r.p,{children:["A: \u53C2\u8003 ",(0,s.jsx)(r.a,{href:"https://github.com/apache/doris/blob/master/samples/arrow-flight-sql/java/src/main/java/doris/arrowflight/demo/FlightAdbcDriver.java",children:(0,s.jsx)(r.code,{children:"sample/arrow-flight-sql"})})," \u4F7F\u7528 JAVA ADBC Client\u3002"]}),"\n",(0,s.jsx)(r.p,{children:"Python ADBC Client\u3001JAVA ADBC Client\u3001Java JDBC DriverManager \u8BFB\u53D6 Array \u5D4C\u5957\u7C7B\u578B\u90FD\u6CA1\u95EE\u9898\uFF0C\u53EA\u6709\u4F7F\u7528 JDBC \u6216 Java JDBC Client \u8FDE\u63A5 Arrow Flight SQL \u6709\u95EE\u9898\uFF0C\u5B9E\u9645\u4E0A Arrow Flight JDBC \u7684\u517C\u5BB9\u6027\u4E0D\u597D\u4FDD\u8BC1\uFF0C\u4E0D\u662F Arrow \u5B98\u65B9\u5F00\u53D1\u7684\uFF0C\u7531\u4E00\u4E2A\u7B2C\u4E09\u65B9\u6570\u636E\u5E93\u516C\u53F8 Dremio \u5F00\u53D1\uFF0C\u4E4B\u524D\u8FD8\u53D1\u73B0\u8FC7\u5176\u4ED6\u517C\u5BB9\u6027\u95EE\u9898\uFF0C\u6240\u4EE5\u5EFA\u8BAE\u4F18\u5148\u7528 JAVA ADBC Client\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"21-release-note",children:"2.1 Release Note"}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsx)(r.p,{children:"v2.1.4 \u53CA\u4E4B\u524D\u7684\u7248\u672C Doris Arrow Flight \u4E0D\u591F\u5B8C\u5584\uFF0C\u5EFA\u8BAE\u5347\u7EA7\u540E\u4F7F\u7528\u3002"}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"v219",children:"v2.1.9"}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["\u4FEE\u590D Doris \u6570\u636E\u5E8F\u5217\u5316\u5230 Arrow \u7684\u95EE\u9898\u3002\n",(0,s.jsx)(r.a,{href:"https://github.com/apache/doris/pull/48944",children:"Fix UT DataTypeSerDeArrowTest of Array/Map/Struct/Bitmap/HLL/Decimal256 types"})]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["\u8BFB\u53D6 ",(0,s.jsx)(r.code,{children:"Decimal256"})," \u7C7B\u578B\u5931\u8D25;"]}),"\n",(0,s.jsxs)(r.li,{children:["\u8BFB\u53D6 ",(0,s.jsx)(r.code,{children:"DatetimeV2"})," \u7C7B\u578B\u5FAE\u5999\u90E8\u5206\u9519\u8BEF;"]}),"\n",(0,s.jsxs)(r.li,{children:["\u8BFB\u53D6 ",(0,s.jsx)(r.code,{children:"DateV2"})," \u7C7B\u578B\u7ED3\u679C\u4E0D\u6B63\u786E;"]}),"\n",(0,s.jsxs)(r.li,{children:["\u8BFB\u53D6 ",(0,s.jsx)(r.code,{children:"IPV4/IPV6"})," \u7C7B\u578B\u7ED3\u679C\u4E3A NULL \u65F6\u62A5\u9519;"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["\u4FEE\u590D Doris Arrow Flight SQL \u67E5\u8BE2\u5931\u8D25\u8FD4\u56DE\u7A7A\u7ED3\u679C\uFF0C\u6CA1\u6709\u8FD4\u56DE\u771F\u5B9E\u7684\u9519\u8BEF\u4FE1\u606F\u3002\n",(0,s.jsx)(r.a,{href:"https://github.com/apache/doris/pull/45023",children:"Fix query result is empty and not return query error message"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"v218",children:"v2.1.8"}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["\u652F\u6301 DBeaver \u7B49 BI \u5DE5\u5177\u4F7F\u7528 ",(0,s.jsx)(r.code,{children:"arrow-flight-sql"})," \u534F\u8BAE\u8FDE\u63A5 Doris\uFF0C\u652F\u6301\u6B63\u786E\u663E\u793A\u5143\u6570\u636E\u6811\u3002\n",(0,s.jsx)(r.a,{href:"https://github.com/apache/doris/pull/46217",children:"Support arrow-flight-sql protocol getStreamCatalogs, getStreamSchemas, getStreamTables #46217"}),"\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["\u652F\u6301\u591A BE \u5171\u4EAB\u540C\u4E00\u4E2A\u53EF\u4F9B\u96C6\u7FA4\u5916\u90E8\u8BBF\u95EE\u7684 IP \u65F6\uFF0C\u67E5\u8BE2\u7ED3\u679C\u53EF\u4EE5\u6B63\u786E\u8F6C\u53D1\u540E\u8FD4\u56DE ADBC Client\u3002\n",(0,s.jsx)(r.a,{href:"https://github.com/apache/doris/pull/43281",children:"Arrow flight server supports data forwarding when BE uses public vip"})]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["\u652F\u6301\u591A\u4E2A Endpoint \u5E76\u884C\u8BFB\u53D6\u3002\n",(0,s.jsx)(r.a,{href:"https://github.com/apache/doris/pull/44286",children:"Arrow Flight support multiple endpoints"})]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["\u4FEE\u590D\u67E5\u8BE2\u62A5\u9519 ",(0,s.jsx)(r.code,{children:"FE not found arrow flight schema"}),"\u3002\n",(0,s.jsx)(r.a,{href:"https://github.com/apache/doris/pull/43960",children:"Fix FE not found arrow flight schema"})]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["\u4FEE\u590D\u8BFB\u53D6\u5141\u8BB8 NULL \u7684\u5217\u62A5\u9519 ",(0,s.jsx)(r.code,{children:"BooleanBuilder::AppendValues"}),"\u3002\n",(0,s.jsx)(r.a,{href:"https://github.com/apache/doris/pull/43929",children:"Fix Doris NULL column conversion to arrow batch"})]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["\u4FEE\u590D ",(0,s.jsx)(r.code,{children:"show processlist"})," \u663E\u793A\u91CD\u590D\u7684 Connection ID\u3002\n",(0,s.jsx)(r.a,{href:"https://github.com/apache/doris/pull/46284",children:"Fix arrow-flight-sql ConnectContext to use a unified ID #46284"})]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["\u4FEE\u590D\u8BFB\u53D6 ",(0,s.jsx)(r.code,{children:"Datetime"})," \u548C ",(0,s.jsx)(r.code,{children:"DatetimeV2"})," \u7C7B\u578B\u4E22\u5931\u65F6\u533A\uFF0C\u5BFC\u81F4\u6BD4\u771F\u5B9E\u6570\u636E\u7684 datetime \u5C11 8 \u5C0F\u65F6\u7684\u95EE\u9898\u3002\n",(0,s.jsx)(r.a,{href:"https://github.com/apache/doris/pull/38215",children:"Fix time zone issues and accuracy issues #38215"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"v217",children:"v2.1.7"}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["\u4FEE\u590D\u9891\u7E41\u6253\u5370\u65E5\u5FD7 ",(0,s.jsx)(r.code,{children:"Connection wait_timeout"}),"\u3002\n",(0,s.jsx)(r.a,{href:"https://github.com/apache/doris/pull/41770",children:"Fix kill timeout FlightSqlConnection and FlightSqlConnectProcessor close"})]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["\u4FEE\u590D Arrow Flight Bearer Token \u8FC7\u671F\u540E\u4ECE Cache \u4E2D\u6DD8\u6C70\u3002\n",(0,s.jsx)(r.a,{href:"https://github.com/apache/doris/pull/41754",children:"Fix Arrow Flight bearer token cache evict after expired"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"v216",children:"v2.1.6"}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["\u4FEE\u590D\u67E5\u8BE2\u62A5\u9519 ",(0,s.jsx)(r.code,{children:"0.0.0.0:xxx, connection refused"}),"\u3002\n",(0,s.jsx)(r.a,{href:"https://github.com/apache/doris/pull/40002",children:"Fix return result from FE Arrow Flight server error 0.0.0.0:xxx, connection refused"})]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["\u4FEE\u590D\u67E5\u8BE2\u62A5\u9519 ",(0,s.jsx)(r.code,{children:"Reach limit of connections"}),"\u3002\n",(0,s.jsx)(r.a,{href:"https://github.com/apache/doris/pull/39127",children:"Fix exceed user property max connection cause Reach limit of connections #39127"})]}),"\n",(0,s.jsxs)(r.p,{children:["\u4E4B\u524D\u7684\u7248\u672C\u6267\u884C ",(0,s.jsx)(r.code,{children:"SET PROPERTY FOR 'root' 'max_user_connections' = '1024';"})," \u4FEE\u6539\u5F53\u524D\u7528\u6237\u7684\u5F53\u524D\u6700\u5927\u8FDE\u63A5\u6570\u5230 1024\uFF0C\u53EF\u4E34\u65F6\u89C4\u907F\u3002"]}),"\n",(0,s.jsxs)(r.p,{children:["\u56E0\u4E3A\u4E4B\u524D\u7684\u7248\u672C\u53EA\u9650\u5236 Arrow Flight \u8FDE\u63A5\u6570\u5C0F\u4E8E ",(0,s.jsx)(r.code,{children:"qe_max_connection/2"}),"\uFF0C",(0,s.jsx)(r.code,{children:"qe_max_connection"})," \u662F fe \u6240\u6709\u7528\u6237\u7684\u603B\u8FDE\u63A5\u6570\uFF0C\u9ED8\u8BA4 1024\uFF0C\u6CA1\u6709\u9650\u5236\u5355\u4E2A\u7528\u6237\u7684 Arrow Flight \u8FDE\u63A5\u6570\u5C0F\u4E8E ",(0,s.jsx)(r.code,{children:"UserProperty"})," \u4E2D\u7684 ",(0,s.jsx)(r.code,{children:"max_user_connections"}),"\uFF0C\u9ED8\u8BA4 100\uFF0C\u6240\u4EE5\u5F53 Arrow Flight \u8FDE\u63A5\u6570\u8D85\u8FC7\u5F53\u524D\u7528\u6237\u8FDE\u63A5\u6570\u4E0A\u9650\u65F6\u5C06\u62A5\u9519 ",(0,s.jsx)(r.code,{children:"Reach limit of connections"}),"\uFF0C\u6240\u4EE5\u9700\u8C03\u5927\u5F53\u524D\u7528\u6237\u7684 ",(0,s.jsx)(r.code,{children:"max_user_connections"}),"\u3002"]}),"\n",(0,s.jsxs)(r.p,{children:["\u95EE\u9898\u8BE6\u60C5\u89C1\uFF1A",(0,s.jsx)(r.a,{href:"https://ask.selectdb.com/questions/D18b1/2-1-4-ban-ben-python-shi-yong-arrow-flight-sql-lian-jie-bu-hui-duan-kai-lian-jie-shu-zhan-man-da-dao-100/E1ic1?commentId=10070000000005324",children:"Questions"})]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["\u589E\u52A0 Conf ",(0,s.jsx)(r.code,{children:"arrow_flight_result_sink_buffer_size_rows"}),"\uFF0C\u652F\u6301\u4FEE\u6539\u5355\u6B21\u8FD4\u56DE\u7684\u67E5\u8BE2\u7ED3\u679C ArrowBatch \u5927\u5C0F\uFF0C\u9ED8\u8BA4 4096 * 8\u3002\n",(0,s.jsx)(r.a,{href:"https://github.com/apache/doris/pull/38221",children:"Add config arrow_flight_result_sink_buffer_size_rows"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"v215",children:"v2.1.5"}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["\u4FEE\u590D Arrow Flight SQL \u67E5\u8BE2\u7ED3\u679C\u4E3A\u7A7A\u3002\n",(0,s.jsx)(r.a,{href:"https://github.com/apache/doris/pull/36827",children:"Fix arrow flight result sink #36827"})]}),"\n",(0,s.jsxs)(r.p,{children:["Doris v2.1.4 \u8BFB\u53D6\u5927\u6570\u636E\u91CF\u65F6\u6709\u51E0\u7387\u62A5\u9519\uFF0C\u95EE\u9898\u8BE6\u60C5\u89C1\uFF1A",(0,s.jsx)(r.a,{href:"https://ask.selectdb.com/questions/D1Ia1/arrow-flight-sql-shi-yong-python-de-adbc-driver-lian-jie-doris-zhi-xing-cha-xun-sql-du-qu-bu-dao-shu-ju",children:"Questions"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"30-release-note",children:"3.0 Release Note"}),"\n",(0,s.jsx)(r.h3,{id:"v305",children:"v3.0.5"}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsxs)(r.li,{children:["\u4FEE\u590D Doris \u6570\u636E\u5E8F\u5217\u5316\u5230 Arrow \u7684\u95EE\u9898\u3002\n",(0,s.jsx)(r.a,{href:"https://github.com/apache/doris/pull/48944",children:"Fix UT DataTypeSerDeArrowTest of Array/Map/Struct/Bitmap/HLL/Decimal256 types"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["\u8BFB\u53D6 ",(0,s.jsx)(r.code,{children:"Decimal256"})," \u7C7B\u578B\u5931\u8D25;"]}),"\n",(0,s.jsxs)(r.li,{children:["\u8BFB\u53D6 ",(0,s.jsx)(r.code,{children:"DatetimeV2"})," \u7C7B\u578B\u5FAE\u5999\u90E8\u5206\u9519\u8BEF;"]}),"\n",(0,s.jsxs)(r.li,{children:["\u8BFB\u53D6 ",(0,s.jsx)(r.code,{children:"DateV2"})," \u7C7B\u578B\u7ED3\u679C\u4E0D\u6B63\u786E;"]}),"\n",(0,s.jsxs)(r.li,{children:["\u8BFB\u53D6 ",(0,s.jsx)(r.code,{children:"IPV4/IPV6"})," \u7C7B\u578B\u7ED3\u679C\u4E3A NULL \u65F6\u62A5\u9519;"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"v304",children:"v3.0.4"}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["\u652F\u6301 DBeaver \u7B49 BI \u5DE5\u5177\u4F7F\u7528 ",(0,s.jsx)(r.code,{children:"arrow-flight-sql"})," \u534F\u8BAE\u8FDE\u63A5 Doris\uFF0C\u652F\u6301\u6B63\u786E\u663E\u793A\u5143\u6570\u636E\u6811\u3002\n",(0,s.jsx)(r.a,{href:"https://github.com/apache/doris/pull/46217",children:"Support arrow-flight-sql protocol getStreamCatalogs, getStreamSchemas, getStreamTables #46217"}),"\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["\u652F\u6301\u591A\u4E2A Endpoint \u5E76\u884C\u8BFB\u53D6\u3002\n",(0,s.jsx)(r.a,{href:"https://github.com/apache/doris/pull/44286",children:"Arrow Flight support multiple endpoints"})]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["\u4FEE\u590D\u8BFB\u53D6\u5141\u8BB8 NULL \u7684\u5217\u62A5\u9519 ",(0,s.jsx)(r.code,{children:"BooleanBuilder::AppendValues"}),"\u3002\n",(0,s.jsx)(r.a,{href:"https://github.com/apache/doris/pull/43929",children:"Fix Doris NULL column conversion to arrow batch"})]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["\u4FEE\u590D ",(0,s.jsx)(r.code,{children:"show processlist"})," \u663E\u793A\u91CD\u590D\u7684 Connection ID\u3002\n",(0,s.jsx)(r.a,{href:"https://github.com/apache/doris/pull/46284",children:"Fix arrow-flight-sql ConnectContext to use a unified ID #46284"})]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["\u4FEE\u590D Doris Arrow Flight SQL \u67E5\u8BE2\u5931\u8D25\u8FD4\u56DE\u7A7A\u7ED3\u679C\uFF0C\u6CA1\u6709\u8FD4\u56DE\u771F\u5B9E\u7684\u9519\u8BEF\u4FE1\u606F\u3002\n",(0,s.jsx)(r.a,{href:"https://github.com/apache/doris/pull/45023",children:"Fix query result is empty and not return query error message"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"v303",children:"v3.0.3"}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["\u4FEE\u590D\u67E5\u8BE2\u62A5\u9519 ",(0,s.jsx)(r.code,{children:"0.0.0.0:xxx, connection refused"}),"\u3002\n",(0,s.jsx)(r.a,{href:"https://github.com/apache/doris/pull/40002",children:"Fix return result from FE Arrow Flight server error 0.0.0.0:xxx, connection refused"})]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["\u4FEE\u590D\u67E5\u8BE2\u62A5\u9519 ",(0,s.jsx)(r.code,{children:"Reach limit of connections"}),"\u3002\n",(0,s.jsx)(r.a,{href:"https://github.com/apache/doris/pull/39127",children:"Fix exceed user property max connection cause Reach limit of connections #39127"})]}),"\n",(0,s.jsxs)(r.p,{children:["\u4E4B\u524D\u7684\u7248\u672C\u6267\u884C ",(0,s.jsx)(r.code,{children:"SET PROPERTY FOR 'root' 'max_user_connections' = '1024';"})," \u4FEE\u6539\u5F53\u524D\u7528\u6237\u7684\u5F53\u524D\u6700\u5927\u8FDE\u63A5\u6570\u5230 1024\uFF0C\u53EF\u4E34\u65F6\u89C4\u907F\u3002"]}),"\n",(0,s.jsxs)(r.p,{children:["\u56E0\u4E3A\u4E4B\u524D\u7684\u7248\u672C\u53EA\u9650\u5236 Arrow Flight \u8FDE\u63A5\u6570\u5C0F\u4E8E ",(0,s.jsx)(r.code,{children:"qe_max_connection/2"}),"\uFF0C",(0,s.jsx)(r.code,{children:"qe_max_connection"})," \u662F fe \u6240\u6709\u7528\u6237\u7684\u603B\u8FDE\u63A5\u6570\uFF0C\u9ED8\u8BA4 1024\uFF0C\u6CA1\u6709\u9650\u5236\u5355\u4E2A\u7528\u6237\u7684 Arrow Flight \u8FDE\u63A5\u6570\u5C0F\u4E8E ",(0,s.jsx)(r.code,{children:"UserProperty"})," \u4E2D\u7684 ",(0,s.jsx)(r.code,{children:"max_user_connections"}),"\uFF0C\u9ED8\u8BA4 100\uFF0C\u6240\u4EE5\u5F53 Arrow Flight \u8FDE\u63A5\u6570\u8D85\u8FC7\u5F53\u524D\u7528\u6237\u8FDE\u63A5\u6570\u4E0A\u9650\u65F6\u5C06\u62A5\u9519 ",(0,s.jsx)(r.code,{children:"Reach limit of connections"}),"\uFF0C\u6240\u4EE5\u9700\u8C03\u5927\u5F53\u524D\u7528\u6237\u7684 ",(0,s.jsx)(r.code,{children:"max_user_connections"}),"\u3002"]}),"\n",(0,s.jsxs)(r.p,{children:["\u95EE\u9898\u8BE6\u60C5\u89C1\uFF1A",(0,s.jsx)(r.a,{href:"https://ask.selectdb.com/questions/D18b1/2-1-4-ban-ben-python-shi-yong-arrow-flight-sql-lian-jie-bu-hui-duan-kai-lian-jie-shu-zhan-man-da-dao-100/E1ic1?commentId=10070000000005324",children:"Questions"})]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["\u4FEE\u590D\u9891\u7E41\u6253\u5370\u65E5\u5FD7 ",(0,s.jsx)(r.code,{children:"Connection wait_timeout"}),"\u3002\n",(0,s.jsx)(r.a,{href:"https://github.com/apache/doris/pull/41770",children:"Fix kill timeout FlightSqlConnection and FlightSqlConnectProcessor close"})]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["\u4FEE\u590D Arrow Flight Bearer Token \u8FC7\u671F\u540E\u4ECE Cache \u4E2D\u6DD8\u6C70\u3002\n",(0,s.jsx)(r.a,{href:"https://github.com/apache/doris/pull/41754",children:"Fix Arrow Flight bearer token cache evict after expired"})]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["\u652F\u6301\u591A BE \u5171\u4EAB\u540C\u4E00\u4E2A\u53EF\u4F9B\u96C6\u7FA4\u5916\u90E8\u8BBF\u95EE\u7684 IP \u65F6\uFF0C\u67E5\u8BE2\u7ED3\u679C\u53EF\u4EE5\u6B63\u786E\u8F6C\u53D1\u540E\u8FD4\u56DE ADBC Client\u3002\n",(0,s.jsx)(r.a,{href:"https://github.com/apache/doris/pull/43281",children:"Arrow flight server supports data forwarding when BE uses public vip"})]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["\u4FEE\u590D\u67E5\u8BE2\u62A5\u9519 ",(0,s.jsx)(r.code,{children:"FE not found arrow flight schema"}),"\u3002\n",(0,s.jsx)(r.a,{href:"https://github.com/apache/doris/pull/43960",children:"Fix FE not found arrow flight schema"})]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["\u4FEE\u590D\u8BFB\u53D6 ",(0,s.jsx)(r.code,{children:"Datetime"})," \u548C ",(0,s.jsx)(r.code,{children:"DatetimeV2"})," \u7C7B\u578B\u4E22\u5931\u65F6\u533A\uFF0C\u5BFC\u81F4\u6BD4\u771F\u5B9E\u6570\u636E\u7684 datetime \u5C11 8 \u5C0F\u65F6\u7684\u95EE\u9898\u3002\n",(0,s.jsx)(r.a,{href:"https://github.com/apache/doris/pull/38215",children:"Fix time zone issues and accuracy issues #38215"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"v302",children:"v3.0.2"}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsxs)(r.li,{children:["\u589E\u52A0 Conf ",(0,s.jsx)(r.code,{children:"arrow_flight_result_sink_buffer_size_rows"}),"\uFF0C\u652F\u6301\u4FEE\u6539\u5355\u6B21\u8FD4\u56DE\u7684\u67E5\u8BE2\u7ED3\u679C ArrowBatch \u5927\u5C0F\uFF0C\u9ED8\u8BA4 4096 * 8\u3002\n",(0,s.jsx)(r.a,{href:"https://github.com/apache/doris/pull/38221",children:"Add config arrow_flight_result_sink_buffer_size_rows"})]}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"v301",children:"v3.0.1"}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["\u67E5\u8BE2\u7ED3\u679C\u7F3A\u5931\uFF0C\u67E5\u8BE2\u7ED3\u679C\u884C\u6570 = \u5B9E\u9645\u884C\u6570 / BE \u4E2A\u6570\n",(0,s.jsx)(r.a,{href:"https://github.com/apache/doris/pull/37779",children:"Fix get Schema failed when enable_parallel_result_sink is false #37779"})]}),"\n",(0,s.jsxs)(r.p,{children:["\u5728 Doris 3.0.0 \u7248\u672C\uFF0C\u5982\u679C\u67E5\u8BE2\u6700\u5916\u5C42\u662F\u805A\u5408\uFF0CSQL \u7C7B\u4F3C ",(0,s.jsx)(r.code,{children:"select k1, sum(k2) from xxx group by k1"}),"\uFF0C\u4F60\u53EF\u80FD\u4F1A\u9047\u5230\uFF08\u67E5\u8BE2\u7ED3\u679C\u884C\u6570 = \u5B9E\u9645\u884C\u6570 / BE \u4E2A\u6570\uFF09\uFF0C\u8FD9\u662F ",(0,s.jsx)(r.a,{href:"https://github.com/apache/doris/pull/36053",children:"support parallel result sink"})," \u5F15\u5165\u7684\u95EE\u9898\uFF0C\u5728 ",(0,s.jsx)(r.a,{href:"https://github.com/apache/doris/pull/37779",children:"Fix get Schema failed when enable_parallel_result_sink is false"})," \u4E34\u65F6\u4FEE\u590D\uFF0C\u5728 ",(0,s.jsx)(r.a,{href:"https://github.com/apache/doris/pull/44286",children:"Arrow Flight support multiple endpoints"})," \u652F\u6301\u591A\u4E2A Endpoint \u5E76\u884C\u8BFB\u53D6\u540E\u6B63\u5F0F\u4FEE\u590D\u3002"]}),"\n"]}),"\n"]})]})}function h(e={}){let{wrapper:r}={...(0,l.a)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},347174:function(e,r,n){n.d(r,{Z:function(){return i}});let i=n.p+"assets/images/Arrow_Flight_SQL-c51538bca23f1062d141adab8fe055cb.png"},820045:function(e,r,n){n.d(r,{Z:function(){return i}});let i=n.p+"assets/images/arrow-flight-sql-IntelliJ-45ab7c8f343f3dab024c6db8a08884f5.png"},250065:function(e,r,n){n.d(r,{Z:function(){return o},a:function(){return t}});var i=n(667294);let s={},l=i.createContext(s);function t(e){let r=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),i.createElement(l.Provider,{value:r},e.children)}}}]);