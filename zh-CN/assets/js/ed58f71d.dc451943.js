"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["550430"],{693988:function(e,s,n){n.r(s),n.d(s,{default:()=>d,frontMatter:()=>o,metadata:()=>l,assets:()=>a,toc:()=>i,contentTitle:()=>r});var l=JSON.parse('{"id":"lakehouse/best-practices/doris-lakesoul","title":"\u4F7F\u7528 Doris \u548C LakeSoul","description":"\u4F5C\u4E3A\u4E00\u79CD\u5168\u65B0\u7684\u5F00\u653E\u5F0F\u7684\u6570\u636E\u7BA1\u7406\u67B6\u6784\uFF0C\u6E56\u4ED3\u4E00\u4F53\uFF08Data Lakehouse\uFF09\u878D\u5408\u4E86\u6570\u636E\u4ED3\u5E93\u7684\u9AD8\u6027\u80FD\u3001\u5B9E\u65F6\u6027\u4EE5\u53CA\u6570\u636E\u6E56\u7684\u4F4E\u6210\u672C\u3001\u7075\u6D3B\u6027\u7B49\u4F18\u52BF\uFF0C\u5E2E\u52A9\u7528\u6237\u66F4\u52A0\u4FBF\u6377\u5730\u6EE1\u8DB3\u5404\u79CD\u6570\u636E\u5904\u7406\u5206\u6790\u7684\u9700\u6C42\uFF0C\u5728\u4F01\u4E1A\u7684\u5927\u6570\u636E\u4F53\u7CFB\u4E2D\u5DF2\u7ECF\u5F97\u5230\u8D8A\u6765\u8D8A\u591A\u7684\u5E94\u7528\u3002","source":"@site/i18n/zh-CN/docusaurus-plugin-content-docs/version-2.1/lakehouse/best-practices/doris-lakesoul.md","sourceDirName":"lakehouse/best-practices","slug":"/lakehouse/best-practices/doris-lakesoul","permalink":"/zh-CN/docs/2.1/lakehouse/best-practices/doris-lakesoul","draft":false,"unlisted":false,"tags":[],"version":"2.1","frontMatter":{"title":"\u4F7F\u7528 Doris \u548C LakeSoul","language":"zh-CN"},"sidebar":"docs","previous":{"title":"\u4F7F\u7528 Doris \u548C Iceberg","permalink":"/zh-CN/docs/2.1/lakehouse/best-practices/doris-iceberg"},"next":{"title":"Doris \u96C6\u6210 AWS S3 Tables","permalink":"/zh-CN/docs/2.1/lakehouse/best-practices/doris-aws-s3tables"}}'),t=n("785893"),c=n("250065");let o={title:"\u4F7F\u7528 Doris \u548C LakeSoul",language:"zh-CN"},r=void 0,a={},i=[{value:"Apache Doris &amp; LakeSoul",id:"apache-doris--lakesoul",level:2},{value:"\u4F7F\u7528\u6307\u5357",id:"\u4F7F\u7528\u6307\u5357",level:2},{value:"01 \u73AF\u5883\u51C6\u5907",id:"01-\u73AF\u5883\u51C6\u5907",level:3},{value:"02 \u73AF\u5883\u90E8\u7F72",id:"02-\u73AF\u5883\u90E8\u7F72",level:3},{value:"03 \u6570\u636E\u67E5\u8BE2",id:"03-\u6570\u636E\u67E5\u8BE2",level:3},{value:"04 CDC \u8868\u652F\u6301",id:"04-cdc-\u8868\u652F\u6301",level:3}];function u(e){let s={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,c.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.p,{children:"\u4F5C\u4E3A\u4E00\u79CD\u5168\u65B0\u7684\u5F00\u653E\u5F0F\u7684\u6570\u636E\u7BA1\u7406\u67B6\u6784\uFF0C\u6E56\u4ED3\u4E00\u4F53\uFF08Data Lakehouse\uFF09\u878D\u5408\u4E86\u6570\u636E\u4ED3\u5E93\u7684\u9AD8\u6027\u80FD\u3001\u5B9E\u65F6\u6027\u4EE5\u53CA\u6570\u636E\u6E56\u7684\u4F4E\u6210\u672C\u3001\u7075\u6D3B\u6027\u7B49\u4F18\u52BF\uFF0C\u5E2E\u52A9\u7528\u6237\u66F4\u52A0\u4FBF\u6377\u5730\u6EE1\u8DB3\u5404\u79CD\u6570\u636E\u5904\u7406\u5206\u6790\u7684\u9700\u6C42\uFF0C\u5728\u4F01\u4E1A\u7684\u5927\u6570\u636E\u4F53\u7CFB\u4E2D\u5DF2\u7ECF\u5F97\u5230\u8D8A\u6765\u8D8A\u591A\u7684\u5E94\u7528\u3002"}),"\n",(0,t.jsx)(s.p,{children:"\u5728\u8FC7\u53BB\u591A\u4E2A\u7248\u672C\u4E2D\uFF0CApache Doris \u6301\u7EED\u52A0\u6DF1\u4E0E\u6570\u636E\u6E56\u7684\u878D\u5408\uFF0C\u5F53\u524D\u5DF2\u6F14\u8FDB\u51FA\u4E00\u5957\u6210\u719F\u7684\u6E56\u4ED3\u4E00\u4F53\u89E3\u51B3\u65B9\u6848\u3002"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"\u81EA 0.15 \u7248\u672C\u8D77\uFF0CApache Doris \u5F15\u5165 Hive \u548C Iceberg \u5916\u90E8\u8868\uFF0C\u5C1D\u8BD5\u5728 Apache Iceberg \u4E4B\u4E0A\u63A2\u7D22\u4E0E\u6570\u636E\u6E56\u7684\u80FD\u529B\u7ED3\u5408\u3002"}),"\n",(0,t.jsx)(s.li,{children:"\u81EA 1.2 \u7248\u672C\u8D77\uFF0CApache Doris \u6B63\u5F0F\u5F15\u5165 Multi-Catalog \u529F\u80FD\uFF0C\u5B9E\u73B0\u4E86\u591A\u79CD\u6570\u636E\u6E90\u7684\u81EA\u52A8\u5143\u6570\u636E\u6620\u5C04\u548C\u6570\u636E\u8BBF\u95EE\u3001\u5E76\u5BF9\u5916\u90E8\u6570\u636E\u8BFB\u53D6\u548C\u67E5\u8BE2\u6267\u884C\u7B49\u65B9\u9762\u505A\u4E86\u8BF8\u591A\u6027\u80FD\u4F18\u5316\uFF0C\u5B8C\u5168\u5177\u5907\u4E86\u6784\u5EFA\u6781\u901F\u6613\u7528 Lakehouse \u67B6\u6784\u7684\u80FD\u529B\u3002"}),"\n",(0,t.jsx)(s.li,{children:"\u5728 2.1 \u7248\u672C\u4E2D\uFF0CApache Doris \u6E56\u4ED3\u4E00\u4F53\u67B6\u6784\u5F97\u5230\u5168\u9762\u52A0\u5F3A\uFF0C\u4E0D\u4EC5\u589E\u5F3A\u4E86\u4E3B\u6D41\u6570\u636E\u6E56\u683C\u5F0F\uFF08Hudi\u3001Iceberg\u3001Paimon \u7B49\uFF09\u7684\u8BFB\u53D6\u548C\u5199\u5165\u80FD\u529B\uFF0C\u8FD8\u5F15\u5165\u4E86\u591A SQL \u65B9\u8A00\u517C\u5BB9\u3001\u53EF\u4ECE\u539F\u6709\u7CFB\u7EDF\u65E0\u7F1D\u5207\u6362\u81F3 Apache Doris\u3002\u5728\u6570\u636E\u79D1\u5B66\u53CA\u5927\u89C4\u6A21\u6570\u636E\u8BFB\u53D6\u573A\u666F\u4E0A\uFF0CDoris \u96C6\u6210\u4E86 Arrow Flight \u9AD8\u901F\u8BFB\u53D6\u63A5\u53E3\uFF0C\u4F7F\u5F97\u6570\u636E\u4F20\u8F93\u6548\u7387\u5B9E\u73B0 100 \u500D\u7684\u63D0\u5347\u3002"}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{alt:"\u4F7F\u7528 Doris \u548C LakeSoul \u6784\u5EFA Lakehouse",src:n(285993).Z+"",width:"2560",height:"1280"})}),"\n",(0,t.jsx)(s.h2,{id:"apache-doris--lakesoul",children:"Apache Doris & LakeSoul"}),"\n",(0,t.jsx)(s.p,{children:"LakeSoul \u662F\u7531\u6570\u5143\u7075\u5F00\u53D1\u7684\u4E91\u539F\u751F\u6E56\u4ED3\u6846\u67B6\uFF0C\u5E76\u5728 2023 \u5E74 5 \u6708\u6350\u8D60\u7ED9\u4E86 Linux \u57FA\u91D1\u4F1A AI & Data \u57FA\u91D1\u4F1A\u3002\u5B83\u4EE5\u5143\u6570\u636E\u7BA1\u7406\u7684\u9AD8\u53EF\u6269\u5C55\u6027\u3001ACID \u4E8B\u52A1\u3001\u9AD8\u6548\u7075\u6D3B\u7684 upsert \u64CD\u4F5C\u3001\u6A21\u5F0F\u6F14\u53D8\u548C\u6279\u6D41\u96C6\u6210\u5904\u7406\u4E3A\u7279\u70B9\u3002"}),"\n",(0,t.jsx)(s.p,{children:"\u501F\u52A9 Apache Doris \u7684\u9AD8\u6027\u80FD\u67E5\u8BE2\u5F15\u64CE\u548C LakeSoul \u7684\u9AD8\u6548\u6570\u636E\u7BA1\u7406\uFF0C\u7528\u6237\u53EF\u4EE5\u5B9E\u73B0\uFF1A"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"\u5B9E\u65F6\u6570\u636E\u5165\u6E56\uFF1A\u5229\u7528 LakeSoul \u7684\u67B6\u6784\uFF0C\u6570\u636E\u53EF\u4EE5\u4EE5\u9AD8\u6548\u7387\u548C\u4F4E\u5EF6\u8FDF\u5165\u6E56\uFF0C\u652F\u6301\u5305\u62EC\u805A\u5408\u3001\u53BB\u91CD\u548C\u90E8\u5206\u5217\u66F4\u65B0\u5728\u5185\u7684\u5404\u79CD\u6570\u636E\u66F4\u65B0\u80FD\u529B\u3002"}),"\n",(0,t.jsx)(s.li,{children:"\u9AD8\u6027\u80FD\u6570\u636E\u5904\u7406\u548C\u5206\u6790\uFF1ALakeSoul \u7684\u6279\u6D41\u96C6\u6210\u5904\u7406\u548C\u6A21\u5F0F\u6F14\u53D8\u7B49\u80FD\u529B\u53EF\u4EE5\u4E0E Doris \u7684\u5F3A\u5927\u67E5\u8BE2\u5F15\u64CE\u65E0\u7F1D\u96C6\u6210\uFF0C\u5B9E\u73B0\u6E56\u6570\u636E\u7684\u5FEB\u901F\u67E5\u8BE2\u548C\u5206\u6790\u54CD\u5E94\u3002\n\u672A\u6765\uFF0CApache Doris \u5C06\u9010\u6B65\u652F\u6301 LakeSoul \u7684\u66F4\u591A\u9AD8\u7EA7\u529F\u80FD\uFF0C\u5982 CDC \u6D41\u540C\u6B65\u548C\u81EA\u52A8\u6A21\u5F0F\u6F14\u53D8\uFF0C\u5171\u540C\u6784\u5EFA\u7EDF\u4E00\u7684\u3001\u9AD8\u6027\u80FD\u7684\u3001\u5B9E\u65F6\u7684\u6E56\u4ED3\u5E73\u53F0\u3002"}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"\u672C\u6587\u5C06\u89E3\u91CA\u5982\u4F55\u5FEB\u901F\u642D\u5EFA Apache Doris + LakeSoul \u6D4B\u8BD5\u548C\u6F14\u793A\u73AF\u5883\uFF0C\u5E76\u6F14\u793A\u5404\u79CD\u529F\u80FD\u7684\u4F7F\u7528\u65B9\u6CD5\uFF0C\u5C55\u793A\u5728\u6E56\u4ED3\u67B6\u6784\u4E2D\u4F7F\u7528\u4E24\u4E2A\u7CFB\u7EDF\u96C6\u6210\u548C\u4F18\u52BF\u3002"}),"\n",(0,t.jsxs)(s.p,{children:["\u5173\u4E8E\u66F4\u591A\u8BF4\u660E\uFF0C\u8BF7\u53C2\u9605 ",(0,t.jsx)(s.a,{href:"/zh-CN/docs/2.1/lakehouse/catalogs/lakesoul-catalog",children:"LakeSoul Catalog"})]}),"\n",(0,t.jsx)(s.h2,{id:"\u4F7F\u7528\u6307\u5357",children:"\u4F7F\u7528\u6307\u5357"}),"\n",(0,t.jsxs)(s.p,{children:["\u672C\u6587\u6D89\u53CA\u6240\u6709\u811A\u672C\u548C\u4EE3\u7801\u53EF\u4EE5\u4ECE\u8BE5\u5730\u5740\u83B7\u53D6\uFF1A",(0,t.jsx)(s.a,{href:"https://github.com/apache/doris/tree/master/samples/datalake/lakesoul",children:"https://github.com/apache/doris/tree/master/samples/datalake/lakesoul"})]}),"\n",(0,t.jsx)(s.h3,{id:"01-\u73AF\u5883\u51C6\u5907",children:"01 \u73AF\u5883\u51C6\u5907"}),"\n",(0,t.jsx)(s.p,{children:"\u672C\u6587\u793A\u4F8B\u91C7\u7528 Docker Compose \u90E8\u7F72\uFF0C\u7EC4\u4EF6\u53CA\u7248\u672C\u53F7\u5982\u4E0B\uFF1A"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:"\u7EC4\u4EF6\u540D\u79F0"}),(0,t.jsx)(s.th,{children:"\u7248\u672C"})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Apache Doris"}),(0,t.jsx)(s.td,{children:"\u9ED8\u8BA4 3.0.2"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"LakeSoul"}),(0,t.jsx)(s.td,{children:"2.6.1"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Postgres"}),(0,t.jsx)(s.td,{children:"14.5"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Apache Spark"}),(0,t.jsx)(s.td,{children:"3.3.1"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Apache Flink"}),(0,t.jsx)(s.td,{children:"1.17"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"MinIO"}),(0,t.jsx)(s.td,{children:"RELEASE.2024-04-29T09-56-05Z"})]})]})]}),"\n",(0,t.jsx)(s.h3,{id:"02-\u73AF\u5883\u90E8\u7F72",children:"02 \u73AF\u5883\u90E8\u7F72"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"\u542F\u52A8\u6240\u6709\u7EC4\u4EF6"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"bash ./start_all.sh\n"})}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"\u542F\u52A8\u540E\uFF0C\u53EF\u4EE5\u4F7F\u7528\u4EE5\u4E0B\u811A\u672C\u767B\u5F55\u5230 Doris \u547D\u4EE4\u884C\uFF1A"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"-- login doris\nbash ./start_doris_client.sh\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"03-\u6570\u636E\u67E5\u8BE2",children:"03 \u6570\u636E\u67E5\u8BE2"}),"\n",(0,t.jsx)(s.p,{children:"\u5982\u4E0B\u6240\u793A\uFF0C\u5728 Doris \u96C6\u7FA4\u4E2D\u5DF2\u7ECF\u521B\u5EFA\u4E86\u4E00\u4E2A\u540D\u4E3A lakesoul \u7684 Catalog\uFF08\u53EF\u4F7F\u7528 SHOW CATALOGS \u67E5\u770B\uFF09\u3002\u4EE5\u4E0B\u662F\u8BE5 Catalog \u7684\u521B\u5EFA\u8BED\u53E5\uFF1A"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:"  -- Already created\n  CREATE CATALOG `lakesoul` PROPERTIES (\n    'type'='lakesoul',\n    'lakesoul.pg.username'='lakesoul_test',\n    'lakesoul.pg.password'='lakesoul_test',\n    'lakesoul.pg.url'='jdbc:postgresql://lakesoul-meta-pg:5432/lakesoul_test?stringtype=unspecified',\n    'minio.endpoint'='http://minio:9000',\n    'minio.access_key'='admin',\n    'minio.secret_key'='password'\n  );\n\n"})}),"\n",(0,t.jsxs)(s.p,{children:["LakeSoul \u8868 ",(0,t.jsx)(s.code,{children:"lakesoul.tpch.customer"})," \u5DF2\u52A0\u8F7D\u5230 Doris \u4E2D\u3002\u5728 Doris \u4E2D\u67E5\u8BE2\u6570\u636E\u3002"]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"\u67E5\u8BE2\u6570\u636E"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:"Doris> use `lakesoul`.`tpch`;\nDatabase changed\n\nDoris> show tables;\n+---------------------+\n| Tables_in_tpch      |\n+---------------------+\n| customer_from_spark |\n+---------------------+\n1 row in set (0.00 sec)\n\nDoris> select * from customer_from_spark where c_nationkey = 1 order by c_custkey limit 4;\n+-----------+--------------------+-----------------------------------------+-------------+-----------------+-----------+--------------+--------------------------------------------------------------------------------------------------------+\n| c_custkey | c_name             | c_address                               | c_nationkey | c_phone         | c_acctbal | c_mktsegment | c_comment                                                                                              |\n+-----------+--------------------+-----------------------------------------+-------------+-----------------+-----------+--------------+--------------------------------------------------------------------------------------------------------+\n|         3 | Customer#000000003 | MG9kdTD2WBHm                            |           1 | 11-719-748-3364 |   7498.12 | AUTOMOBILE   |  deposits eat slyly ironic, even instructions. express foxes detect slyly. blithely even accounts abov |\n|        14 | Customer#000000014 | KXkletMlL2JQEA                          |           1 | 11-845-129-3851 |   5266.30 | FURNITURE    | , ironic packages across the unus                                                                      |\n|        30 | Customer#000000030 | nJDsELGAavU63Jl0c5NKsKfL8rIJQQkQnYL2QJY |           1 | 11-764-165-5076 |   9321.01 | BUILDING     | lithely final requests. furiously unusual account                                                      |\n|        59 | Customer#000000059 | zLOCP0wh92OtBihgspOGl4                  |           1 | 11-355-584-3112 |   3458.60 | MACHINERY    | ously final packages haggle blithely after the express deposits. furiou                                |\n+-----------+--------------------+-----------------------------------------+-------------+-----------------+-----------+--------------+--------------------------------------------------------------------------------------------------------+\n4 rows in set (3.14 sec)\n\nDoris> select * from customer_from_spark where c_nationkey = 1 order by c_custkey desc limit 4;\n+-----------+--------------------+-----------------------------------------+-------------+-----------------+-----------+--------------+-------------------------------------------------------------------------------------------------+\n| c_custkey | c_name             | c_address                               | c_nationkey | c_phone         | c_acctbal | c_mktsegment | c_comment                                                                                       |\n+-----------+--------------------+-----------------------------------------+-------------+-----------------+-----------+--------------+-------------------------------------------------------------------------------------------------+\n|     14983 | Customer#000014983 | ERN3vq5Fvt4DL                           |           1 | 11-424-279-1846 |    841.22 | AUTOMOBILE   | furiously slyly special foxes. express theodolites cajole carefully. special dinos haggle pinto |\n|     14968 | Customer#000014968 | ,sykKTZBzVFl7ito1750v2TRYwmkRl2nvqGHwmx |           1 | 11-669-222-9657 |   6106.77 | HOUSEHOLD    | ts above the furiously even deposits haggle across                                              |\n|     14961 | Customer#000014961 | JEIORcsBp6RpLYH 9gNdDyWJ                |           1 | 11-490-251-5554 |   4006.35 | HOUSEHOLD    | quests detect carefully final platelets! quickly final frays haggle slyly blithely final acc    |\n|     14940 | Customer#000014940 | bNoyCxPuqSwPLjbqjEUNGN d0mSP            |           1 | 11-242-677-1085 |   8829.48 | HOUSEHOLD    | ver the quickly express braids. regular dependencies haggle fluffily quickly i                  |\n+-----------+--------------------+-----------------------------------------+-------------+-----------------+-----------+--------------+-------------------------------------------------------------------------------------------------+\n4 rows in set (0.10 sec)\n"})}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["\u5206\u533A\u88C1\u526A\nDoris \u53EF\u4EE5\u5BF9 LakeSoul \u6267\u884C\u5206\u533A\u88C1\u526A\uFF0C\u5E76\u901A\u8FC7\u539F\u751F\u8BFB\u53D6\u52A0\u901F\u67E5\u8BE2\u8FC7\u7A0B\u3002\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7 ",(0,t.jsx)(s.code,{children:"explain verbose"})," \u6765\u68C0\u67E5\u8FD9\u4E00\u70B9\u3002"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:"Doris> explain verbose select * from customer_from_spark where c_nationkey < 3;\n+----------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Explain String(Old Planner)                                                                                                                                          |\n+----------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| PLAN FRAGMENT 0                                                                                                                                                      |\n|   OUTPUT EXPRS:                                                                                                                                                      |\n|     `lakesoul`.`tpch`.`customer_from_spark`.`c_custkey`                                                                                                              |\n|     `lakesoul`.`tpch`.`customer_from_spark`.`c_name`                                                                                                                 |\n|     `lakesoul`.`tpch`.`customer_from_spark`.`c_address`                                                                                                              |\n|     `lakesoul`.`tpch`.`customer_from_spark`.`c_nationkey`                                                                                                            |\n|     `lakesoul`.`tpch`.`customer_from_spark`.`c_phone`                                                                                                                |\n|     `lakesoul`.`tpch`.`customer_from_spark`.`c_acctbal`                                                                                                              |\n|     `lakesoul`.`tpch`.`customer_from_spark`.`c_mktsegment`                                                                                                           |\n|     `lakesoul`.`tpch`.`customer_from_spark`.`c_comment`                                                                                                              |\n|   PARTITION: UNPARTITIONED                                                                                                                                           |\n|                                                                                                                                                                      |\n|   HAS_COLO_PLAN_NODE: false                                                                                                                                          |\n|                                                                                                                                                                      |\n|   VRESULT SINK                                                                                                                                                       |\n|      MYSQL_PROTOCAL                                                                                                                                                  |\n|                                                                                                                                                                      |\n|   1:VEXCHANGE                                                                                                                                                        |\n|      offset: 0                                                                                                                                                       |\n|      tuple ids: 0                                                                                                                                                    |\n|                                                                                                                                                                      |\n| PLAN FRAGMENT 1                                                                                                                                                      |\n|                                                                                                                                                                      |\n|   PARTITION: RANDOM                                                                                                                                                  |\n|                                                                                                                                                                      |\n|   HAS_COLO_PLAN_NODE: false                                                                                                                                          |\n|                                                                                                                                                                      |\n|   STREAM DATA SINK                                                                                                                                                   |\n|     EXCHANGE ID: 01                                                                                                                                                  |\n|     UNPARTITIONED                                                                                                                                                    |\n|                                                                                                                                                                      |\n|   0:VplanNodeName                                                                                                                                                    |\n|      table: customer_from_spark                                                                                                                                      |\n|      predicates: (`c_nationkey` < 3)                                                                                                                                 |\n|      inputSplitNum=12, totalFileSize=0, scanRanges=12                                                                                                                |\n|      partition=0/0                                                                                                                                                   |\n|      backends:                                                                                                                                                       |\n|        10002                                                                                                                                                         |\n|          s3://lakesoul-test-bucket/data/tpch/customer_from_spark/c_nationkey=1/part-00000-0568c817-d6bc-4fa1-bb9e-b311069b131c_00000.c000.parquet start: 0 length: 0 |\n|          s3://lakesoul-test-bucket/data/tpch/customer_from_spark/c_nationkey=1/part-00001-d99a8fe6-61ab-4285-94da-2f84f8746a8a_00001.c000.parquet start: 0 length: 0 |\n|          s3://lakesoul-test-bucket/data/tpch/customer_from_spark/c_nationkey=1/part-00002-8a8e396f-685f-4b0f-87fa-e2a3fe5be87e_00002.c000.parquet start: 0 length: 0 |\n|          ... other 8 files ...                                                                                                                                       |\n|          s3://lakesoul-test-bucket/data/tpch/customer_from_spark/c_nationkey=0/part-00003-d5b598cd-5bed-412c-a26f-bb4bc9c937bc_00003.c000.parquet start: 0 length: 0 |\n|      numNodes=1                                                                                                                                                      |\n|      pushdown agg=NONE                                                                                                                                               |\n|      tuple ids: 0                                                                                                                                                    |\n|                                                                                                                                                                      |\n| Tuples:                                                                                                                                                              |\n| TupleDescriptor{id=0, tbl=customer_from_spark}                                                                                                                       |\n|   SlotDescriptor{id=0, col=c_custkey, colUniqueId=0, type=int, nullable=false, isAutoIncrement=false, subColPath=null}                                               |\n|   SlotDescriptor{id=1, col=c_name, colUniqueId=1, type=text, nullable=true, isAutoIncrement=false, subColPath=null}                                                  |\n|   SlotDescriptor{id=2, col=c_address, colUniqueId=2, type=text, nullable=true, isAutoIncrement=false, subColPath=null}                                               |\n|   SlotDescriptor{id=3, col=c_nationkey, colUniqueId=3, type=int, nullable=false, isAutoIncrement=false, subColPath=null}                                             |\n|   SlotDescriptor{id=4, col=c_phone, colUniqueId=4, type=text, nullable=true, isAutoIncrement=false, subColPath=null}                                                 |\n|   SlotDescriptor{id=5, col=c_acctbal, colUniqueId=5, type=decimalv3(15,2), nullable=true, isAutoIncrement=false, subColPath=null}                                    |\n|   SlotDescriptor{id=6, col=c_mktsegment, colUniqueId=6, type=text, nullable=true, isAutoIncrement=false, subColPath=null}                                            |\n|   SlotDescriptor{id=7, col=c_comment, colUniqueId=7, type=text, nullable=true, isAutoIncrement=false, subColPath=null}                                               |\n+----------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n57 rows in set (0.03 sec)\n\n"})}),"\n",(0,t.jsxs)(s.p,{children:["\u901A\u8FC7\u68C0\u67E5 ",(0,t.jsx)(s.code,{children:"EXPLAIN VERBOSE"})," \u8BED\u53E5\u7684\u7ED3\u679C\uFF0C\u53EF\u4EE5\u770B\u5230\u8C13\u8BCD\u6761\u4EF6 ",(0,t.jsx)(s.code,{children:"c_nationkey < 3"})," \u6700\u7EC8\u53EA\u547D\u4E2D\u4E00\u4E2A\u5206\u533A\uFF08partition=0/0\uFF09\u3002"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"04-cdc-\u8868\u652F\u6301",children:"04 CDC \u8868\u652F\u6301"}),"\n",(0,t.jsxs)(s.p,{children:["\u542F\u52A8 Flink CDC \u4F5C\u4E1A\u4EE5\u540C\u6B65 MySQL \u8868\u3002MySQL \u8868\u5728\u542F\u52A8 ",(0,t.jsx)(s.code,{children:"start_all.sh"})," \u65F6\u5DF2\u7ECF\u88AB\u52A0\u8F7D\u4E86\u3002"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"bash start_flink_cdc_job.sh\n"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:"Start flink-cdc job...\nSLF4J: Class path contains multiple SLF4J bindings.\nSLF4J: Found binding in [jar:file:/opt/flink/lib/log4j-slf4j-impl-2.17.1.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: Found binding in [jar:file:/opt/hadoop/share/hadoop/common/lib/slf4j-reload4j-1.7.36.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.\nSLF4J: Actual binding is of type [org.apache.logging.slf4j.Log4jLoggerFactory]\nLoading class `com.mysql.jdbc.Driver'. This is deprecated. The new driver class is `com.mysql.cj.jdbc.Driver'. The driver is automatically registered via the SPI and manual loading of the driver class is generally unnecessary.\nJob has been submitted with JobID d1b3641dcd1ad85c6b373d49b1867e68\n\n"})}),"\n",(0,t.jsxs)(s.p,{children:["Flink CDC \u4F5C\u4E1A\u5C06\u542F\u52A8\u3002\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7\u91CD\u65B0\u521B\u5EFA LakeSoul Catalog \u5728 ",(0,t.jsx)(s.code,{children:"doris client"})," \u4E2D\u68C0\u67E5\u542F\u52A8\u8FC7\u7A0B\u3002Flink CDC \u4F5C\u4E1A\u542F\u52A8\u540E\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5728 ",(0,t.jsx)(s.code,{children:"doris client"})," \u4E2D\u770B\u5230\u6B63\u5728\u540C\u6B65\u7684 LakeSoul CDC \u8868\u3002"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:"Doris> show tables;\n+---------------------+\n| Tables_in_tpch      |\n+---------------------+\n| customer_from_spark |\n+---------------------+\n2 rows in set (0.00 sec)\n\n\nDoris> drop catalog if exists lakesoul;\nQuery OK, 0 rows affected (0.00 sec)\n\nDoris> create catalog `lakesoul`  properties ('type'='lakesoul', 'lakesoul.pg.username'='lakesoul_test', 'lakesoul.pg.password'='lakesoul_test', 'lakesoul.pg.url'='jdbc:postgresql://lakesoul-meta-pg:5432/lakesoul_test?stringtype=unspecified', 'minio.endpoint'='http://minio:9000', 'minio.access_key'='admin', 'minio.secret_key'='password');\nQuery OK, 0 rows affected (0.01 sec)\n\nDoris> show tables;\n+---------------------+\n| Tables_in_tpch      |\n+---------------------+\n| customer            |\n| customer_from_spark |\n+---------------------+\n2 rows in set (0.00 sec)\n\nDoris> select c_custkey, c_name, c_address, c_nationkey , c_phone, c_acctbal , c_mktsegment , c_comment from lakesoul.tpch.customer where c_custkey < 10;\n+-----------+--------------------+---------------------------------------+-------------+-----------------+-----------+--------------+-------------------------------------------------------------------------------------------------------------------+\n| c_custkey | c_name             | c_address                             | c_nationkey | c_phone         | c_acctbal | c_mktsegment | c_comment                                                                                                         |\n+-----------+--------------------+---------------------------------------+-------------+-----------------+-----------+--------------+-------------------------------------------------------------------------------------------------------------------+\n|         1 | Customer#000000001 | IVhzIApeRb ot,c,E                     |          15 | 25-989-741-2988 |    711.56 | BUILDING     | to the even, regular platelets. regular, ironic epitaphs nag e                                                    |\n|         3 | Customer#000000003 | MG9kdTD2WBHm                          |           1 | 11-719-748-3364 |   7498.12 | AUTOMOBILE   |  deposits eat slyly ironic, even instructions. express foxes detect slyly. blithely even accounts abov            |\n|         7 | Customer#000000007 | TcGe5gaZNgVePxU5kRrvXBfkasDTea        |          18 | 28-190-982-9759 |   9561.95 | AUTOMOBILE   | ainst the ironic, express theodolites. express, even pinto beans among the exp                                    |\n|         8 | Customer#000000008 | I0B10bB0AymmC, 0PrRYBCP1yGJ8xcBPmWhl5 |          17 | 27-147-574-9335 |   6819.74 | BUILDING     | among the slyly regular theodolites kindle blithely courts. carefully even theodolites haggle slyly along the ide |\n|         2 | Customer#000000002 | XSTf4,NCwDVaWNe6tEgvwfmRchLXak        |          13 | 23-768-687-3665 |    121.65 | AUTOMOBILE   | l accounts. blithely ironic theodolites integrate boldly: caref                                                   |\n|         4 | Customer#000000004 | XxVSJsLAGtn                           |           4 | 14-128-190-5944 |   2866.83 | MACHINERY    |  requests. final, regular ideas sleep final accou                                                                 |\n|         5 | Customer#000000005 | KvpyuHCplrB84WgAiGV6sYpZq7Tj          |           3 | 13-750-942-6364 |    794.47 | HOUSEHOLD    | n accounts will have to unwind. foxes cajole accor                                                                |\n|         6 | Customer#000000006 | sKZz0CsnMD7mp4Xd0YrBvx,LREYKUWAh yVn  |          20 | 30-114-968-4951 |   7638.57 | AUTOMOBILE   | tions. even deposits boost according to the slyly bold packages. final accounts cajole requests. furious          |\n|         9 | Customer#000000009 | xKiAFTjUsCuxfeleNqefumTrjS            |           8 | 18-338-906-3675 |   8324.07 | FURNITURE    | r theodolites according to the requests wake thinly excuses: pending requests haggle furiousl                     |\n+-----------+--------------------+---------------------------------------+-------------+-----------------+-----------+--------------+-------------------------------------------------------------------------------------------------------------------+\n9 rows in set (1.09 sec)\n\n"})}),"\n",(0,t.jsxs)(s.p,{children:["\u8FDB\u5165 ",(0,t.jsx)(s.code,{children:"mysql client"})," \u5E76\u5C1D\u8BD5\u4FEE\u6539\u6570\u636E\u3002"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"bash start_mysql_client.sh\n"})}),"\n",(0,t.jsxs)(s.p,{children:["\u5C1D\u8BD5\u4ECE ",(0,t.jsx)(s.code,{children:"mysql client"})," \u66F4\u65B0\u884C\u3002"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:"mysql> update customer set c_acctbal=2211.26 where c_custkey=1;\nQuery OK, 1 row affected (0.01 sec)\nRows matched: 1  Changed: 1  Warnings: 0\n"})}),"\n",(0,t.jsxs)(s.p,{children:["\u56DE\u5230 ",(0,t.jsx)(s.code,{children:"doris client"})," \u5E76\u68C0\u67E5\u6570\u636E\u53D8\u5316\u3002"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:"Doris> select c_custkey, c_name, c_address, c_nationkey , c_phone, c_acctbal , c_mktsegment , c_comment from lakesoul.tpch.customer where c_custkey < 10;\n+-----------+--------------------+---------------------------------------+-------------+-----------------+-----------+--------------+-------------------------------------------------------------------------------------------------------------------+\n| c_custkey | c_name             | c_address                             | c_nationkey | c_phone         | c_acctbal | c_mktsegment | c_comment                                                                                                         |\n+-----------+--------------------+---------------------------------------+-------------+-----------------+-----------+--------------+-------------------------------------------------------------------------------------------------------------------+\n|         2 | Customer#000000002 | XSTf4,NCwDVaWNe6tEgvwfmRchLXak        |          13 | 23-768-687-3665 |    121.65 | AUTOMOBILE   | l accounts. blithely ironic theodolites integrate boldly: caref                                                   |\n|         4 | Customer#000000004 | XxVSJsLAGtn                           |           4 | 14-128-190-5944 |   2866.83 | MACHINERY    |  requests. final, regular ideas sleep final accou                                                                 |\n|         5 | Customer#000000005 | KvpyuHCplrB84WgAiGV6sYpZq7Tj          |           3 | 13-750-942-6364 |    794.47 | HOUSEHOLD    | n accounts will have to unwind. foxes cajole accor                                                                |\n|         6 | Customer#000000006 | sKZz0CsnMD7mp4Xd0YrBvx,LREYKUWAh yVn  |          20 | 30-114-968-4951 |   7638.57 | AUTOMOBILE   | tions. even deposits boost according to the slyly bold packages. final accounts cajole requests. furious          |\n|         9 | Customer#000000009 | xKiAFTjUsCuxfeleNqefumTrjS            |           8 | 18-338-906-3675 |   8324.07 | FURNITURE    | r theodolites according to the requests wake thinly excuses: pending requests haggle furiousl                     |\n|         1 | Customer#000000001 | IVhzIApeRb ot,c,E                     |          15 | 25-989-741-2988 |   2211.26 | BUILDING     | to the even, regular platelets. regular, ironic epitaphs nag e                                                    |\n|         3 | Customer#000000003 | MG9kdTD2WBHm                          |           1 | 11-719-748-3364 |   7498.12 | AUTOMOBILE   |  deposits eat slyly ironic, even instructions. express foxes detect slyly. blithely even accounts abov            |\n|         7 | Customer#000000007 | TcGe5gaZNgVePxU5kRrvXBfkasDTea        |          18 | 28-190-982-9759 |   9561.95 | AUTOMOBILE   | ainst the ironic, express theodolites. express, even pinto beans among the exp                                    |\n|         8 | Customer#000000008 | I0B10bB0AymmC, 0PrRYBCP1yGJ8xcBPmWhl5 |          17 | 27-147-574-9335 |   6819.74 | BUILDING     | among the slyly regular theodolites kindle blithely courts. carefully even theodolites haggle slyly along the ide |\n+-----------+--------------------+---------------------------------------+-------------+-----------------+-----------+--------------+-------------------------------------------------------------------------------------------------------------------+\n9 rows in set (0.11 sec)\n\n"})}),"\n",(0,t.jsxs)(s.p,{children:["\u5C1D\u8BD5\u4ECE ",(0,t.jsx)(s.code,{children:"mysql client"})," \u5220\u9664\u884C\u3002"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:"mysql> delete from customer where c_custkey = 2;\nQuery OK, 1 row affected (0.01 sec)\n"})}),"\n",(0,t.jsxs)(s.p,{children:["\u56DE\u5230 ",(0,t.jsx)(s.code,{children:"doris client"})," \u5E76\u68C0\u67E5\u6570\u636E\u53D8\u5316\u3002"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:"Doris> select c_custkey, c_name, c_address, c_nationkey , c_phone, c_acctbal , c_mktsegment , c_comment from lakesoul.tpch.customer where c_custkey < 10;\n+-----------+--------------------+---------------------------------------+-------------+-----------------+-----------+--------------+-------------------------------------------------------------------------------------------------------------------+\n| c_custkey | c_name             | c_address                             | c_nationkey | c_phone         | c_acctbal | c_mktsegment | c_comment                                                                                                         |\n+-----------+--------------------+---------------------------------------+-------------+-----------------+-----------+--------------+-------------------------------------------------------------------------------------------------------------------+\n|         6 | Customer#000000006 | sKZz0CsnMD7mp4Xd0YrBvx,LREYKUWAh yVn  |          20 | 30-114-968-4951 |   7638.57 | AUTOMOBILE   | tions. even deposits boost according to the slyly bold packages. final accounts cajole requests. furious          |\n|         9 | Customer#000000009 | xKiAFTjUsCuxfeleNqefumTrjS            |           8 | 18-338-906-3675 |   8324.07 | FURNITURE    | r theodolites according to the requests wake thinly excuses: pending requests haggle furiousl                     |\n|         1 | Customer#000000001 | IVhzIApeRb ot,c,E                     |          15 | 25-989-741-2988 |   2211.26 | BUILDING     | to the even, regular platelets. regular, ironic epitaphs nag e                                                    |\n|         3 | Customer#000000003 | MG9kdTD2WBHm                          |           1 | 11-719-748-3364 |   7498.12 | AUTOMOBILE   |  deposits eat slyly ironic, even instructions. express foxes detect slyly. blithely even accounts abov            |\n|         7 | Customer#000000007 | TcGe5gaZNgVePxU5kRrvXBfkasDTea        |          18 | 28-190-982-9759 |   9561.95 | AUTOMOBILE   | ainst the ironic, express theodolites. express, even pinto beans among the exp                                    |\n|         8 | Customer#000000008 | I0B10bB0AymmC, 0PrRYBCP1yGJ8xcBPmWhl5 |          17 | 27-147-574-9335 |   6819.74 | BUILDING     | among the slyly regular theodolites kindle blithely courts. carefully even theodolites haggle slyly along the ide |\n|         4 | Customer#000000004 | XxVSJsLAGtn                           |           4 | 14-128-190-5944 |   2866.83 | MACHINERY    |  requests. final, regular ideas sleep final accou                                                                 |\n|         5 | Customer#000000005 | KvpyuHCplrB84WgAiGV6sYpZq7Tj          |           3 | 13-750-942-6364 |    794.47 | HOUSEHOLD    | n accounts will have to unwind. foxes cajole accor                                                                |\n+-----------+--------------------+---------------------------------------+-------------+-----------------+-----------+--------------+-------------------------------------------------------------------------------------------------------------------+\n8 rows in set (0.11 sec)\n\n"})})]})}function d(e={}){let{wrapper:s}={...(0,c.a)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(u,{...e})}):u(e)}},285993:function(e,s,n){n.d(s,{Z:function(){return l}});let l=n.p+"assets/images/lakehouse-architecture-for-doris-and-lakesoul-ef021d8b6de64a42b7c2ffdb3387114c.png"},250065:function(e,s,n){n.d(s,{Z:function(){return r},a:function(){return o}});var l=n(667294);let t={},c=l.createContext(t);function o(e){let s=l.useContext(c);return l.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function r(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),l.createElement(c.Provider,{value:s},e.children)}}}]);