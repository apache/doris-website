"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["869922"],{978546:function(e,n,s){s.r(n),s.d(n,{default:()=>o,frontMatter:()=>d,metadata:()=>i,assets:()=>h,toc:()=>t,contentTitle:()=>c});var i=JSON.parse('{"id":"admin-manual/auth/authentication/internal","title":"\u5185\u7F6E\u8BA4\u8BC1","description":"\u5173\u952E\u6982\u5FF5","source":"@site/i18n/zh-CN/docusaurus-plugin-content-docs/current/admin-manual/auth/authentication/internal.md","sourceDirName":"admin-manual/auth/authentication","slug":"/admin-manual/auth/authentication/internal","permalink":"/zh-CN/docs/dev/admin-manual/auth/authentication/internal","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"\u5185\u7F6E\u8BA4\u8BC1","language":"zh-CN"},"sidebar":"docs","previous":{"title":"\u8BA4\u8BC1\u4E0E\u9274\u6743\u6982\u8FF0","permalink":"/zh-CN/docs/dev/admin-manual/auth/authentication-and-authorization"},"next":{"title":"\u8054\u90A6\u8BA4\u8BC1","permalink":"/zh-CN/docs/dev/admin-manual/auth/authentication/federation"}}'),r=s("785893"),l=s("250065");let d={title:"\u5185\u7F6E\u8BA4\u8BC1",language:"zh-CN"},c=void 0,h={},t=[{value:"\u5173\u952E\u6982\u5FF5",id:"\u5173\u952E\u6982\u5FF5",level:2},{value:"\u7528\u6237",id:"\u7528\u6237",level:3},{value:"\u7528\u6237\u5C5E\u6027",id:"\u7528\u6237\u5C5E\u6027",level:4},{value:"\u5185\u7F6E\u7528\u6237",id:"\u5185\u7F6E\u7528\u6237",level:4},{value:"\u5BC6\u7801",id:"\u5BC6\u7801",level:3},{value:"\u5BC6\u7801\u7B56\u7565",id:"\u5BC6\u7801\u7B56\u7565",level:4},{value:"\u8BA4\u8BC1\u673A\u5236",id:"\u8BA4\u8BC1\u673A\u5236",level:2},{value:"\u9ED1\u767D\u540D\u5355",id:"\u9ED1\u767D\u540D\u5355",level:2},{value:"\u76F8\u5173\u547D\u4EE4",id:"\u76F8\u5173\u547D\u4EE4",level:2},{value:"\u5176\u5B83\u8BF4\u660E",id:"\u5176\u5B83\u8BF4\u660E",level:2}];function a(e){let n={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,l.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"\u5173\u952E\u6982\u5FF5",children:"\u5173\u952E\u6982\u5FF5"}),"\n",(0,r.jsx)(n.h3,{id:"\u7528\u6237",children:"\u7528\u6237"}),"\n",(0,r.jsx)(n.p,{children:"\u5728 Doris \u4E2D\uFF0C\u4E00\u4E2A user_identity \u552F\u4E00\u6807\u8BC6\u4E00\u4E2A\u7528\u6237\u3002user_identity \u7531\u4E24\u90E8\u5206\u7EC4\u6210\uFF0Cuser_name \u548C host\uFF0C\u5176\u4E2D username \u4E3A\u7528\u6237\u540D\u3002host \u6807\u8BC6\u7528\u6237\u7AEF\u8FDE\u63A5\u6240\u5728\u7684\u4E3B\u673A\u5730\u5740\u3002host \u90E8\u5206\u53EF\u4EE5\u4F7F\u7528 % \u8FDB\u884C\u6A21\u7CCA\u5339\u914D\u3002\u5982\u679C\u4E0D\u6307\u5B9A host\uFF0C\u9ED8\u8BA4\u4E3A '%'\uFF0C\u5373\u8868\u793A\u8BE5\u7528\u6237\u53EF\u4EE5\u4ECE\u4EFB\u610F host \u8FDE\u63A5\u5230 Doris\u3002"}),"\n",(0,r.jsx)(n.h4,{id:"\u7528\u6237\u5C5E\u6027",children:"\u7528\u6237\u5C5E\u6027"}),"\n",(0,r.jsx)(n.p,{children:"\u7528\u6237\u5C5E\u6027\u76F4\u63A5\u9644\u5C5E\u4E8E user_name\uFF0C\u800C\u4E0D\u662F user_identity\uFF0C\u5373 user@'192.%' \u548C user@['domain'] \u90FD\u62E5\u6709\u540C\u4E00\u7EC4\u7528\u6237\u5C5E\u6027\u3002\u8BE5\u5C5E\u6027\u5C5E\u4E8E user\uFF0C\u800C\u4E0D\u662F user@'192.%' \u6216 user@['domain']\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u7528\u6237\u5C5E\u6027\u5305\u62EC\u4F46\u4E0D\u9650\u4E8E\uFF1A\u7528\u6237\u6700\u5927\u8FDE\u63A5\u6570\u3001\u5BFC\u5165\u96C6\u7FA4\u914D\u7F6E\u7B49\u7B49\u3002"}),"\n",(0,r.jsx)(n.h4,{id:"\u5185\u7F6E\u7528\u6237",children:"\u5185\u7F6E\u7528\u6237"}),"\n",(0,r.jsx)(n.p,{children:"\u5185\u7F6E\u7528\u6237\u662F Doris \u9ED8\u8BA4\u521B\u5EFA\u7684\u7528\u6237\uFF0C\u5E76\u9ED8\u8BA4\u62E5\u6709\u4E00\u5B9A\u7684\u6743\u9650\uFF0C\u5305\u62EC root \u548C admin\u3002\u521D\u59CB\u5BC6\u7801\u90FD\u4E3A\u7A7A\uFF0Cfe \u542F\u52A8\u540E\uFF0C\u53EF\u4EE5\u901A\u8FC7\u4FEE\u6539\u5BC6\u7801\u547D\u4EE4\u8FDB\u884C\u4FEE\u6539\u3002\u4E0D\u652F\u6301\u5220\u9664\u9ED8\u8BA4\u7528\u6237\u3002"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"root@'%'\uFF1Aroot \u7528\u6237\uFF0C\u5141\u8BB8\u4ECE\u4EFB\u610F\u8282\u70B9\u767B\u5F55\uFF0C\u89D2\u8272\u4E3A operator\u3002"}),"\n",(0,r.jsx)(n.li,{children:"admin@'%'\uFF1Aadmin \u7528\u6237\uFF0C\u5141\u8BB8\u4ECE\u4EFB\u610F\u8282\u70B9\u767B\u5F55\uFF0C\u89D2\u8272\u4E3A admin\u3002"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"\u5BC6\u7801",children:"\u5BC6\u7801"}),"\n",(0,r.jsx)(n.p,{children:"\u7528\u6237\u767B\u5F55\u7684\u51ED\u636E\uFF0C\u7BA1\u7406\u5458\u521B\u5EFA\u7528\u6237\u65F6\u8BBE\u7F6E\uFF0C\u4E5F\u53EF\u4EE5\u521B\u5EFA\u540E\u7531\u7528\u6237\u81EA\u5DF1\u66F4\u6539\u5BC6\u7801\u3002"}),"\n",(0,r.jsx)(n.h4,{id:"\u5BC6\u7801\u7B56\u7565",children:"\u5BC6\u7801\u7B56\u7565"}),"\n",(0,r.jsx)(n.p,{children:"Doris \u652F\u6301\u4EE5\u4E0B\u5BC6\u7801\u7B56\u7565\uFF0C\u53EF\u4EE5\u5E2E\u52A9\u7528\u6237\u66F4\u597D\u7684\u8FDB\u884C\u5BC6\u7801\u7BA1\u7406\u3002"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"PASSWORD_HISTORY"})}),"\n",(0,r.jsxs)(n.p,{children:["\u662F\u5426\u5141\u8BB8\u5F53\u524D\u7528\u6237\u91CD\u7F6E\u5BC6\u7801\u65F6\u4F7F\u7528\u5386\u53F2\u5BC6\u7801\u3002\u5982 ",(0,r.jsx)(n.code,{children:"PASSWORD_HISTORY"})," 10 \u8868\u793A\u7981\u6B62\u4F7F\u7528\u8FC7\u53BB 10 \u6B21\u8BBE\u7F6E\u8FC7\u7684\u5BC6\u7801\u4E3A\u65B0\u5BC6\u7801\u3002\u5982\u679C\u8BBE\u7F6E\u4E3A ",(0,r.jsx)(n.code,{children:"PASSWORD_HISTORY DEFAULT"}),"\uFF0C\u5219\u4F1A\u4F7F\u7528\u5168\u5C40\u53D8\u91CF ",(0,r.jsx)(n.code,{children:"password_history"})," \u4E2D\u7684\u503C\u30020 \u8868\u793A\u4E0D\u542F\u7528\u8FD9\u4E2A\u529F\u80FD\u3002\u9ED8\u8BA4\u4E3A 0\u3002"]}),"\n",(0,r.jsx)(n.p,{children:"\u793A\u4F8B\uFF1A"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u8BBE\u7F6E\u5168\u5C40\u53D8\u91CF\uFF1A",(0,r.jsx)(n.code,{children:"SET GLOBAL password_history = 10"})]}),"\n",(0,r.jsxs)(n.li,{children:["\u4E3A\u7528\u6237\u8BBE\u7F6E\uFF1A",(0,r.jsx)(n.code,{children:"ALTER USER user1@'ip' PASSWORD_HISTORY 10"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"PASSWORD_EXPIRE"})}),"\n",(0,r.jsxs)(n.p,{children:["\u8BBE\u7F6E\u5F53\u524D\u7528\u6237\u5BC6\u7801\u7684\u8FC7\u671F\u65F6\u95F4\u3002\u5982 ",(0,r.jsx)(n.code,{children:"PASSWORD_EXPIRE INTERVAL 10 DAY"})," \u8868\u793A\u5BC6\u7801\u4F1A\u5728 10 \u5929\u540E\u8FC7\u671F\u3002",(0,r.jsx)(n.code,{children:"PASSWORD_EXPIRE NEVER"})," \u8868\u793A\u5BC6\u7801\u4E0D\u8FC7\u671F\u3002\u5982\u679C\u8BBE\u7F6E\u4E3A ",(0,r.jsx)(n.code,{children:"PASSWORD_EXPIRE DEFAULT"}),"\uFF0C\u5219\u4F1A\u4F7F\u7528\u5168\u5C40\u53D8\u91CF ",(0,r.jsx)(n.code,{children:"default_password_lifetime"})," \u4E2D\u7684\u503C\uFF08\u5355\u4F4D\u4E3A \u5929\uFF09\u3002\u9ED8\u8BA4\u4E3A NEVER\uFF08\u6216 0\uFF09\uFF0C\u8868\u793A\u4E0D\u4F1A\u8FC7\u671F\u3002"]}),"\n",(0,r.jsx)(n.p,{children:"\u793A\u4F8B\uFF1A"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u8BBE\u7F6E\u5168\u5C40\u53D8\u91CF\uFF1A",(0,r.jsx)(n.code,{children:"SET GLOBAL default_password_lifetime = 1"})]}),"\n",(0,r.jsxs)(n.li,{children:["\u4E3A\u7528\u6237\u8BBE\u7F6E\uFF1A",(0,r.jsx)(n.code,{children:"ALTER USER user1@'ip' PASSWORD_EXPIRE INTERVAL 10 DAY"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"FAILED_LOGIN_ATTEMPTS"})," \u548C ",(0,r.jsx)(n.code,{children:"PASSWORD_LOCK_TIME"})]}),"\n",(0,r.jsxs)(n.p,{children:["\u8BBE\u7F6E\u5F53\u524D\u7528\u6237\u767B\u5F55\u65F6\uFF0C\u5982\u679C\u4F7F\u7528\u9519\u8BEF\u7684\u5BC6\u7801\u767B\u5F55 n \u6B21\u540E\uFF0C\u8D26\u6237\u5C06\u88AB\u9501\u5B9A\uFF0C\u5E76\u8BBE\u7F6E\u9501\u5B9A\u65F6\u95F4\u3002\u5982 ",(0,r.jsx)(n.code,{children:"FAILED_LOGIN_ATTEMPTS 3 PASSWORD_LOCK_TIME 1 DAY"})," \u8868\u793A\u5982\u679C 3 \u6B21\u9519\u8BEF\u767B\u5F55\uFF0C\u5219\u8D26\u6237\u4F1A\u88AB\u9501\u5B9A\u4E00\u5929\u3002\u7BA1\u7406\u5458\u53EF\u4EE5\u901A\u8FC7 ALTER USER \u8BED\u53E5\u4E3B\u52A8\u89E3\u9501\u88AB\u9501\u5B9A\u7684\u8D26\u6237\u3002"]}),"\n",(0,r.jsx)(n.p,{children:"\u793A\u4F8B\uFF1A"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u4E3A\u7528\u6237\u8BBE\u7F6E\uFF1A",(0,r.jsx)(n.code,{children:"ALTER USER user1@'ip' FAILED_LOGIN_ATTEMPTS 3 PASSWORD_LOCK_TIME 1 DAY"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"\u5BC6\u7801\u5F3A\u5EA6"}),"\n",(0,r.jsxs)(n.p,{children:["\u8BE5\u529F\u80FD\u7531\u5168\u5C40\u53D8\u91CF ",(0,r.jsx)(n.code,{children:"validate_password_policy"})," \u63A7\u5236\u3002\u9ED8\u8BA4\u4E3A NONE/0\uFF0C\u5373\u4E0D\u68C0\u67E5\u5BC6\u7801\u5F3A\u5EA6\u3002\u5982\u679C\u8BBE\u7F6E\u4E3A STRONG/2\uFF0C\u5219\u5BC6\u7801\u5FC5\u987B\u5305\u542B\u201C\u5927\u5199\u5B57\u6BCD\u201D\uFF0C\u201C\u5C0F\u5199\u5B57\u6BCD\u201D\uFF0C\u201C\u6570\u5B57\u201D\u548C\u201C\u7279\u6B8A\u5B57\u7B26\u201D\u4E2D\u7684 3 \u9879\uFF0C\u5E76\u4E14\u957F\u5EA6\u5FC5\u987B\u5927\u4E8E\u7B49\u4E8E 8\u3002"]}),"\n",(0,r.jsx)(n.p,{children:"\u793A\u4F8B\uFF1A"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"SET validate_password_policy=STRONG"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u4EE5\u4E0A\u7B56\u7565\u8BBE\u7F6E\u540E\uFF0C\u53EF\u4EE5\u901A\u8FC7\u5982\u4E0B\u547D\u4EE4\u67E5\u770B\uFF1A"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"SHOW PROC \"/auth/'<user>'@'<host>'\";\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u6CE8\u610F\uFF0C\u9700\u8981\u4F7F\u7528\u5355\u5F15\u53F7\u5206\u522B\u5305\u88F9 user \u548C host \u90E8\u5206\u3002\u6BD4\u5982\uFF1A"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"SHOW PROC \"/auth/'root'@'%'\";\nSHOW PROC \"/auth/'user1'@'127.0.0.1'\";\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u8BA4\u8BC1\u673A\u5236",children:"\u8BA4\u8BC1\u673A\u5236"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"\u5BA2\u6237\u7AEF\u8BA4\u8BC1\u4FE1\u606F\u53D1\u9001\uFF1A\u5BA2\u6237\u7AEF\u5C06\u7528\u6237\u7684\u4FE1\u606F\uFF08\u5982\u7528\u6237\u540D\u3001\u5BC6\u7801\u3001\u6570\u636E\u5E93\u7B49\uFF09\u6253\u5305\u53D1\u9001\u7ED9 Doris \u670D\u52A1\u5668\u3002\u8FD9\u4E9B\u4FE1\u606F\u7528\u4E8E\u8BC1\u660E\u5BA2\u6237\u7AEF\u7684\u8EAB\u4EFD\u548C\u8BF7\u6C42\u8BBF\u95EE\u7684\u6570\u636E\u5E93\u3002"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"\u670D\u52A1\u5668\u8BA4\u8BC1\uFF1ADoris \u6536\u5230\u5BA2\u6237\u7AEF\u7684\u8BA4\u8BC1\u4FE1\u606F\u540E\uFF0C\u4F1A\u8FDB\u884C\u9A8C\u8BC1\u3002\u5982\u679C\u7528\u6237\u540D\u3001\u5BC6\u7801\u4EE5\u53CA\u5BA2\u6237\u7AEF\u7684 IP \u6B63\u786E\uFF0C\u5E76\u4E14\u8BE5\u7528\u6237\u5177\u6709\u8BBF\u95EE\u6240\u9009\u6570\u636E\u5E93\u7684\u6743\u9650\uFF0C\u5219\u8BA4\u8BC1\u6210\u529F\uFF0CDoris \u4F1A\u5C06\u7528\u6237\u4E2A\u4F53\u6620\u5C04\u5230\u7CFB\u7EDF\u5185\u7684\u7528\u6237\u6807\u8BC6\uFF08User Identity\uFF09\u4E0A\u3002\u5426\u5219\uFF0C\u8BA4\u8BC1\u5931\u8D25\uFF0C\u5E76\u8FD4\u56DE\u76F8\u5E94\u7684\u9519\u8BEF\u6D88\u606F\u7ED9\u5BA2\u6237\u7AEF\u3002"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"\u9ED1\u767D\u540D\u5355",children:"\u9ED1\u767D\u540D\u5355"}),"\n",(0,r.jsxs)(n.p,{children:["Doris \u672C\u8EAB\u4E0D\u652F\u6301\u9ED1\u540D\u5355\uFF0C\u53EA\u6709\u767D\u540D\u5355\u529F\u80FD\uFF0C\u4F46\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7\u67D0\u4E9B\u65B9\u5F0F\u6765\u6A21\u62DF\u9ED1\u540D\u5355\u3002\u5047\u8BBE\u5148\u521B\u5EFA\u4E86\u540D\u4E3A ",(0,r.jsx)(n.code,{children:"user@'192.%'"})," \u7684\u7528\u6237\uFF0C\u8868\u793A\u5141\u8BB8\u6765\u81EA ",(0,r.jsx)(n.code,{children:"192.*"})," \u7684\u7528\u6237\u767B\u5F55\u3002\u6B64\u65F6\u5982\u679C\u60F3\u7981\u6B62\u6765\u81EA ",(0,r.jsx)(n.code,{children:"192.168.10.1"})," \u7684\u7528\u6237\u767B\u5F55\uFF0C\u5219\u53EF\u4EE5\u518D\u521B\u5EFA\u4E00\u4E2A\u7528\u6237 ",(0,r.jsx)(n.code,{children:"cmy@'192.168.10.1'"}),"\uFF0C\u5E76\u8BBE\u7F6E\u4E00\u4E2A\u65B0\u7684\u5BC6\u7801\u3002\u56E0\u4E3A ",(0,r.jsx)(n.code,{children:"192.168.10.1"})," \u7684\u4F18\u5148\u7EA7\u9AD8\u4E8E ",(0,r.jsx)(n.code,{children:"192.%"}),"\uFF0C\u6240\u4EE5\u6765\u81EA ",(0,r.jsx)(n.code,{children:"192.168.10.1"})," \u7684\u7528\u6237\u5C06\u4E0D\u80FD\u518D\u4F7F\u7528\u65E7\u5BC6\u7801\u8FDB\u884C\u767B\u5F55\u3002"]}),"\n",(0,r.jsx)(n.h2,{id:"\u76F8\u5173\u547D\u4EE4",children:"\u76F8\u5173\u547D\u4EE4"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u521B\u5EFA\u7528\u6237\uFF1A",(0,r.jsx)(n.a,{href:"../../../sql-manual/sql-statements/account-management/CREATE-USER",children:"CREATE USER"})]}),"\n",(0,r.jsxs)(n.li,{children:["\u67E5\u770B\u7528\u6237\uFF1A",(0,r.jsx)(n.a,{href:"../../../sql-manual/sql-statements/account-management/SHOW-GRANTS",children:"SHOW ALL GRANTS"})]}),"\n",(0,r.jsxs)(n.li,{children:["\u4FEE\u6539\u7528\u6237\uFF1A",(0,r.jsx)(n.a,{href:"../../../sql-manual/sql-statements/account-management/ALTER-USER",children:"ALTER USER"})]}),"\n",(0,r.jsxs)(n.li,{children:["\u4FEE\u6539\u5BC6\u7801\uFF1A",(0,r.jsx)(n.a,{href:"../../../sql-manual/sql-statements/account-management/SET-PASSWORD",children:"SET PASSWORD"})]}),"\n",(0,r.jsxs)(n.li,{children:["\u5220\u9664\u7528\u6237\uFF1A",(0,r.jsx)(n.a,{href:"../../../sql-manual/sql-statements/account-management/DROP-USER",children:"DROP USER"})]}),"\n",(0,r.jsxs)(n.li,{children:["\u8BBE\u7F6E\u7528\u6237\u5C5E\u6027\uFF1A",(0,r.jsx)(n.a,{href:"../../../sql-manual/sql-statements/account-management/SET-PROPERTY",children:"SET PROPERTY"})]}),"\n",(0,r.jsxs)(n.li,{children:["\u67E5\u770B\u7528\u6237\u5C5E\u6027\uFF1A",(0,r.jsx)(n.a,{href:"../../../sql-manual/sql-statements/account-management/SHOW-PROPERTY",children:"SHOW PROPERTY"})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"\u5176\u5B83\u8BF4\u660E",children:"\u5176\u5B83\u8BF4\u660E"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"\u767B\u5F55\u65F6 user_identity \u4F18\u5148\u7EA7\u9009\u62E9\u95EE\u9898"}),"\n",(0,r.jsxs)(n.p,{children:["\u5982\u4E0A\u6587\u4ECB\u7ECD\uFF0C",(0,r.jsx)(n.code,{children:"user_identity"})," \u7531 ",(0,r.jsx)(n.code,{children:"user_name"})," \u548C ",(0,r.jsx)(n.code,{children:"host"})," \u7EC4\u6210\uFF0C\u4F46\u662F\u7528\u6237\u767B\u5F55\u7684\u65F6\u5019\uFF0C\u53EA\u9700\u8981\u8F93\u5165 ",(0,r.jsx)(n.code,{children:"user_name"}),"\uFF0C\u6240\u4EE5\u7531 Doris \u6839\u636E\u5BA2\u6237\u7AEF\u7684 IP \u6765\u5339\u914D\u76F8\u5E94\u7684 ",(0,r.jsx)(n.code,{children:"host"}),"\uFF0C\u4ECE\u800C\u51B3\u5B9A\u4F7F\u7528\u54EA\u4E2A ",(0,r.jsx)(n.code,{children:"user_identity"})," \u767B\u5F55\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:["\u5982\u679C \u6839\u636E \u5BA2\u6237\u7AEF ip \u53EA\u80FD\u5339\u914D\u5230\u4E00\u4E2A ",(0,r.jsx)(n.code,{children:"user_identity"}),"\uFF0C\u90A3\u4E48\u6BEB\u65E0\u7591\u95EE\u4F1A\u5339\u914D\u5230\u8FD9\u4E2A ",(0,r.jsx)(n.code,{children:"user_identity"}),"\uFF0C\u4F46\u662F\u5F53\u80FD\u591F\u5339\u914D\u5230\u591A\u4E2A ",(0,r.jsx)(n.code,{children:"user_identity"})," \u65F6\uFF0C\u5C31\u4F1A\u6709\u5982\u4E0B\u7684\u4F18\u5148\u7EA7\u95EE\u9898\u3002"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"\u57DF\u540D\u4E0E ip \u7684\u4F18\u5148\u7EA7\uFF1A"}),"\n",(0,r.jsx)(n.p,{children:"\u5047\u8BBE\u521B\u5EFA\u4E86\u5982\u4E0B\u7528\u6237\uFF1A"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"CREATE USER user1@['domain1'] IDENTIFIED BY \"12345\";\nCREATE USER user1@'ip1'IDENTIFIED BY \"abcde\";\n"})}),"\n",(0,r.jsx)(n.p,{children:"domain1 \u88AB\u89E3\u6790\u4E3A\u4E24\u4E2A IP\uFF1Aip1 \u548C ip2\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u5728\u4F18\u5148\u7EA7\u4E0A\uFF0Cip \u4F18\u5148\u4E8E \u57DF\u540D\uFF0C\u56E0\u6B64\uFF0C\u5F53\u7528\u6237 user1 \u4ECE ip1 \u8FD9\u53F0\u673A\u5668\u5C1D\u8BD5\u4F7F\u7528\u5BC6\u7801 '12345' \u767B\u5F55 Doris \u4F1A\u88AB\u62D2\u7EDD\u3002"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"\u5177\u4F53 ip \u548C \u8303\u56F4 ip \u7684\u4F18\u5148\u7EA7\uFF1A"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u5047\u8BBE\u521B\u5EFA\u4E86\u5982\u4E0B\u7528\u6237\uFF1A"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"CREATE USER user1@'%' IDENTIFIED BY \"12345\";\nCREATE USER user1@'192.%' IDENTIFIED BY \"abcde\";\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u5728\u4F18\u5148\u7EA7\u4E0A\uFF0C'192.%' \u4F18\u5148\u4E8E '%'\uFF0C\u56E0\u6B64\uFF0C\u5F53\u7528\u6237 user1 \u4ECE 192.168.1.1 \u8FD9\u53F0\u673A\u5668\u5C1D\u8BD5\u4F7F\u7528\u5BC6\u7801 '12345' \u767B\u5F55 Doris \u4F1A\u88AB\u62D2\u7EDD\u3002"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"\u5FD8\u8BB0\u5BC6\u7801"}),"\n",(0,r.jsx)(n.p,{children:"\u5982\u679C\u5FD8\u8BB0\u4E86\u5BC6\u7801\u65E0\u6CD5\u767B\u5F55 Doris\uFF0C\u53EF\u4EE5\u5728 FE \u7684 config \u6587\u4EF6\u4E2D\u6DFB\u52A0 skip_localhost_auth_check=true \u53C2\u6570\uFF0C\u5E76\u4E14\u91CD\u542F FE\uFF0C\u4ECE\u800C\u65E0\u5BC6\u7801\u5728 Fe \u672C\u673A\u901A\u8FC7 root \u767B\u5F55 Doris\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u767B\u5F55\u540E\uFF0C\u53EF\u4EE5\u901A\u8FC7 SET PASSWORD \u547D\u4EE4\u91CD\u7F6E\u5BC6\u7801\u3002"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"\u4EFB\u4F55\u7528\u6237\u90FD\u4E0D\u80FD\u91CD\u7F6E root \u7528\u6237\u7684\u5BC6\u7801\uFF0C\u9664\u4E86 root \u7528\u6237\u81EA\u5DF1\u3002"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"current_user()"})," \u548C ",(0,r.jsx)(n.code,{children:"user()"})]}),"\n",(0,r.jsxs)(n.p,{children:["\u7528\u6237\u53EF\u4EE5\u901A\u8FC7 ",(0,r.jsx)(n.code,{children:"SELECT current_user()"})," \u548C ",(0,r.jsx)(n.code,{children:"SELECT user()"})," \u5206\u522B\u67E5\u770B ",(0,r.jsx)(n.code,{children:"current_user"})," \u548C ",(0,r.jsx)(n.code,{children:"user"}),"\u3002\u5176\u4E2D ",(0,r.jsx)(n.code,{children:"current_user"})," \u8868\u793A\u5F53\u524D\u7528\u6237\u662F\u4EE5\u54EA\u79CD\u8EAB\u4EFD\u901A\u8FC7\u8BA4\u8BC1\u7CFB\u7EDF\u7684\uFF0C\u800C ",(0,r.jsx)(n.code,{children:"user"})," \u5219\u662F\u7528\u6237\u5F53\u524D\u5B9E\u9645\u7684 User Identity\u3002"]}),"\n",(0,r.jsx)(n.p,{children:"\u4E3E\u4F8B\u8BF4\u660E\uFF1A"}),"\n",(0,r.jsxs)(n.p,{children:["\u5047\u8BBE\u521B\u5EFA\u4E86 ",(0,r.jsx)(n.code,{children:"user1@'192.%'"})," \u8FD9\u4E2A\u7528\u6237\uFF0C\u7136\u540E\u4EE5\u4E3A\u6765\u81EA ",(0,r.jsx)(n.code,{children:"192.168.10.1"})," \u7684\u7528\u6237 ",(0,r.jsx)(n.code,{children:"user1"})," \u767B\u5F55\u4E86\u7CFB\u7EDF\uFF0C\u5219\u6B64\u65F6\u7684 ",(0,r.jsx)(n.code,{children:"current_user"})," \u4E3A ",(0,r.jsx)(n.code,{children:"user1@'192.%'"}),"\uFF0C\u800C ",(0,r.jsx)(n.code,{children:"user"})," \u4E3A ",(0,r.jsx)(n.code,{children:"user1@'192.168.10.1'"}),"\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:["\u6240\u6709\u7684\u6743\u9650\u90FD\u662F\u8D4B\u4E88\u67D0\u4E00\u4E2A ",(0,r.jsx)(n.code,{children:"current_user"})," \u7684\uFF0C\u771F\u5B9E\u7528\u6237\u62E5\u6709\u5BF9\u5E94\u7684 ",(0,r.jsx)(n.code,{children:"current_user"})," \u7684\u6240\u6709\u6743\u9650\u3002"]}),"\n"]}),"\n"]})]})}function o(e={}){let{wrapper:n}={...(0,l.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},250065:function(e,n,s){s.d(n,{Z:function(){return c},a:function(){return d}});var i=s(667294);let r={},l=i.createContext(r);function d(e){let n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);