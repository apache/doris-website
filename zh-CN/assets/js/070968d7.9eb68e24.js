"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["615433"],{642482:function(n,e,s){s.r(e),s.d(e,{default:()=>h,frontMatter:()=>i,metadata:()=>t,assets:()=>o,toc:()=>c,contentTitle:()=>d});var t=JSON.parse('{"id":"sql-manual/sql-statements/data-modification/backup-and-restore/CREATE-REPOSITORY","title":"CREATE REPOSITORY","description":"\u63CF\u8FF0","source":"@site/i18n/zh-CN/docusaurus-plugin-content-docs/current/sql-manual/sql-statements/data-modification/backup-and-restore/CREATE-REPOSITORY.md","sourceDirName":"sql-manual/sql-statements/data-modification/backup-and-restore","slug":"/sql-manual/sql-statements/data-modification/backup-and-restore/CREATE-REPOSITORY","permalink":"/zh-CN/docs/dev/sql-manual/sql-statements/data-modification/backup-and-restore/CREATE-REPOSITORY","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"CREATE REPOSITORY","language":"zh-CN"},"sidebar":"docs","previous":{"title":"CLEAN LABEL","permalink":"/zh-CN/docs/dev/sql-manual/sql-statements/data-modification/load-and-export/CLEAN-LABEL"},"next":{"title":"DROP REPOSITORY","permalink":"/zh-CN/docs/dev/sql-manual/sql-statements/data-modification/backup-and-restore/DROP-REPOSITORY"}}'),r=s("785893"),l=s("250065");let i={title:"CREATE REPOSITORY",language:"zh-CN"},d=void 0,o={},c=[{value:"\u63CF\u8FF0",id:"\u63CF\u8FF0",level:2},{value:"\u8BED\u6CD5",id:"\u8BED\u6CD5",level:2},{value:"\u5FC5\u9009\u53C2\u6570",id:"\u5FC5\u9009\u53C2\u6570",level:2},{value:"\u6743\u9650\u63A7\u5236",id:"\u6743\u9650\u63A7\u5236",level:2},{value:"\u6CE8\u610F\u4E8B\u9879",id:"\u6CE8\u610F\u4E8B\u9879",level:2},{value:"\u793A\u4F8B",id:"\u793A\u4F8B",level:2}];function a(n){let e={a:"a",blockquote:"blockquote",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.a)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.h2,{id:"\u63CF\u8FF0",children:"\u63CF\u8FF0"}),"\n",(0,r.jsx)(e.p,{children:"\u8BE5\u8BED\u53E5\u7528\u4E8E\u521B\u5EFA\u4ED3\u5E93\u3002\u4ED3\u5E93\u7528\u4E8E\u5C5E\u4E8E\u5907\u4EFD\u6216\u6062\u590D\u3002"}),"\n",(0,r.jsx)(e.h2,{id:"\u8BED\u6CD5",children:"\u8BED\u6CD5"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-sql",children:"CREATE [READ ONLY] REPOSITORY <repo_name>\n    WITH [ S3 | HDFS ]\n    ON LOCATION <repo_location>\n    PROPERTIES (\n              -- S3 or HDFS storage property\n              <storage_property>\n              [ , ... ]\n    )\n"})}),"\n",(0,r.jsx)(e.h2,{id:"\u5FC5\u9009\u53C2\u6570",children:"\u5FC5\u9009\u53C2\u6570"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"<repo_name>"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"\u4ED3\u5E93\u7684\u552F\u4E00\u540D\u79F0"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"<repo_location>"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"\u4ED3\u5E93\u7684\u5B58\u50A8\u8DEF\u5F84"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"<storage_property>"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"\u4ED3\u5E93\u7684\u5C5E\u6027\u3002\u6B64\u5904\u9700\u8981\u6839\u636E\u9009\u62E9\u7684\u662F S3 \u5B58\u50A8\u8FD8\u662F HDFS \u5B58\u50A8\u4ECB\u8D28\u6765\u9009\u62E9\u5BF9\u5E94\u7684\u53C2\u6570"}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"<storage_property>"})," \u53EF\u9009\u53C2\u6570\u5982\u4E0B\uFF0C\u5E76\u53EF\u6839\u636E\u5B9E\u9645\u73AF\u5883\u60C5\u51B5\u6DFB\u52A0"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"\u53C2\u6570"}),(0,r.jsx)(e.th,{children:"\u8BF4\u660E"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.strong,{children:"s3.endpoint"})}),(0,r.jsx)(e.td,{children:"S3 \u670D\u52A1\u7AEF\u70B9"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.strong,{children:"s3.access_key"})}),(0,r.jsx)(e.td,{children:"S3 \u8BBF\u95EE\u5BC6\u94A5"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.strong,{children:"s3.secret_key"})}),(0,r.jsx)(e.td,{children:"S3 \u79D8\u5BC6\u5BC6\u94A5"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.strong,{children:"s3.region"})}),(0,r.jsx)(e.td,{children:"S3 \u533A\u57DF"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.strong,{children:"use_path_style"})}),(0,r.jsx)(e.td,{children:"\u662F\u5426\u4F7F\u7528\u8DEF\u5F84\u6837\u5F0F\u8BBF\u95EE S3\uFF08\u9002\u7528\u4E8E MinIO\uFF09"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.strong,{children:"fs.defaultFS"})}),(0,r.jsx)(e.td,{children:"Hadoop \u9ED8\u8BA4\u6587\u4EF6\u7CFB\u7EDF URI"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.strong,{children:"hadoop.username"})}),(0,r.jsx)(e.td,{children:"Hadoop \u7528\u6237\u540D"})]})]})]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Note: "})}),"\n",(0,r.jsxs)(e.p,{children:["Doris\u652F\u6301\u4F7F\u7528",(0,r.jsx)(e.code,{children:"AWS Assume Role"}),"\u7684\u65B9\u5F0F\u521B\u5EFA\u4F4D\u4E8EAWS S3\u4E0A\u7684Repository\uFF0C\u8BF7\u53C2\u8003",(0,r.jsx)(e.a,{href:"/zh-CN/docs/dev/admin-manual/auth/integrations/aws-authentication-and-authorization#assumed-role-authentication",children:"AWS\u96C6\u6210"}),"."]}),"\n",(0,r.jsx)(e.h2,{id:"\u6743\u9650\u63A7\u5236",children:"\u6743\u9650\u63A7\u5236"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{style:{textAlign:"left"},children:"\u6743\u9650"}),(0,r.jsx)(e.th,{style:{textAlign:"left"},children:"\u5BF9\u8C61"}),(0,r.jsx)(e.th,{style:{textAlign:"left"},children:"\u8BF4\u660E"})]})}),(0,r.jsx)(e.tbody,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"ADMIN_PRIV"}),(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"\u6574\u4E2A\u96C6\u7FA4\u7BA1\u7406\u6743\u9650"}),(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"\u4EC5 root \u6216 superuser \u7528\u6237\u53EF\u4EE5\u521B\u5EFA\u4ED3\u5E93"})]})})]}),"\n",(0,r.jsx)(e.h2,{id:"\u6CE8\u610F\u4E8B\u9879",children:"\u6CE8\u610F\u4E8B\u9879"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u5982\u679C\u662F\u53EA\u8BFB\u4ED3\u5E93\uFF0C\u5219\u53EA\u80FD\u5728\u4ED3\u5E93\u4E0A\u8FDB\u884C\u6062\u590D\u3002\u5982\u679C\u4E0D\u662F\uFF0C\u5219\u53EF\u4EE5\u8FDB\u884C\u5907\u4EFD\u548C\u6062\u590D\u64CD\u4F5C\u3002"}),"\n",(0,r.jsx)(e.li,{children:"\u6839\u636E S3\u3001HDFS \u7684\u4E0D\u540C\u7C7B\u578B\uFF0CPROPERTIES \u6709\u6240\u4E0D\u540C\uFF0C\u5177\u4F53\u89C1\u793A\u4F8B\u3002"}),"\n",(0,r.jsx)(e.li,{children:"ON LOCATION ,\u5982\u679C\u662F S3 , \u8FD9\u91CC\u540E\u9762\u8DDF\u7684\u662F S3 \u7684 Bucket Name\u3002"}),"\n",(0,r.jsx)(e.li,{children:"\u5728\u505A\u6570\u636E\u8FC1\u79FB\u64CD\u4F5C\u65F6\uFF0C\u9700\u8981\u5728\u6E90\u96C6\u7FA4\u548C\u76EE\u7684\u96C6\u7FA4\u521B\u5EFA\u5B8C\u5168\u76F8\u540C\u7684\u4ED3\u5E93\uFF0C\u4EE5\u4FBF\u76EE\u7684\u96C6\u7FA4\u53EF\u4EE5\u901A\u8FC7\u8FD9\u4E2A\u4ED3\u5E93\uFF0C\u67E5\u770B\u5230\u6E90\u96C6\u7FA4\u5907\u4EFD\u7684\u6570\u636E\u5FEB\u7167\u3002"}),"\n",(0,r.jsxs)(e.li,{children:["\u4EFB\u4F55\u7528\u6237\u90FD\u53EF\u4EE5\u901A\u8FC7 ",(0,r.jsx)(e.a,{href:"./SHOW-REPOSITORIES",children:"SHOW REPOSITORIES"})," \u547D\u4EE4\u67E5\u770B\u5DF2\u7ECF\u521B\u5EFA\u7684\u4ED3\u5E93\u3002"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"\u793A\u4F8B",children:"\u793A\u4F8B"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsx)(e.li,{children:'\u521B\u5EFA\u540D\u4E3A bos_repo \u7684\u4ED3\u5E93\uFF0C\u4F9D\u8D56 BOS broker "bos_broker"\uFF0C\u6570\u636E\u6839\u76EE\u5F55\u4E3A\uFF1Abos://palo_backup'}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:"\u521B\u5EFA\u540D\u4E3A s3_repo \u7684\u4ED3\u5E93"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-sql",children:'CREATE REPOSITORY `s3_repo`\nWITH S3\nON LOCATION "s3://s3-repo"\nPROPERTIES\n(\n    "s3.endpoint" = "http://s3-REGION.amazonaws.com",\n    "s3.access_key" = "AWS_ACCESS_KEY",\n    "s3.secret_key"="AWS_SECRET_KEY",\n    "s3.region" = "REGION"\n);\n'})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Note: "})}),"\n",(0,r.jsxs)(e.p,{children:["Doris\u652F\u6301\u4F7F\u7528",(0,r.jsx)(e.code,{children:"AWS Assume Role"}),"\u7684\u65B9\u5F0F\u521B\u5EFA\u4F4D\u4E8EAWS S3\u4E0A\u7684Repository\uFF0C\u8BF7\u53C2\u8003",(0,r.jsx)(e.a,{href:"/zh-CN/docs/dev/admin-manual/auth/integrations/aws-authentication-and-authorization#assumed-role-authentication",children:"AWS\u96C6\u6210"}),"."]}),"\n",(0,r.jsx)(e.p,{children:"\u521B\u5EFA\u540D\u4E3A hdfs_repo \u7684\u4ED3\u5E93"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-sql",children:'CREATE REPOSITORY `hdfs_repo`\nWITH hdfs\nON LOCATION "hdfs://hadoop-name-node:54310/path/to/repo/"\nPROPERTIES\n(\n    "fs.defaultFS"="hdfs://hadoop-name-node:54310",\n    "hadoop.username"="user"\n);\n'})}),"\n",(0,r.jsx)(e.p,{children:"\u521B\u5EFA\u540D\u4E3A minio_repo \u7684\u4ED3\u5E93\u3002"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-sql",children:'CREATE REPOSITORY `minio_repo`\nWITH S3\nON LOCATION "s3://minio_repo"\nPROPERTIES\n(\n    "s3.endpoint" = "http://minio.com",\n    "s3.access_key" = "MINIO_USER",\n    "s3.secret_key"="MINIO_PASSWORD",\n    "s3.region" = "REGION"\n    "use_path_style" = "true"\n);\n'})}),"\n",(0,r.jsx)(e.p,{children:"\u4F7F\u7528\u4E34\u65F6\u79D8\u94A5\u521B\u5EFA\u540D\u4E3A minio_repo \u7684\u4ED3\u5E93"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-sql",children:'CREATE REPOSITORY `minio_repo`\nWITH S3\nON LOCATION "s3://minio_repo"\nPROPERTIES\n(\n    "s3.endpoint" = "AWS_ENDPOINT",\n    "s3.access_key" = "AWS_TEMP_ACCESS_KEY",\n    "s3.secret_key" = "AWS_TEMP_SECRET_KEY",\n    "s3.session_token" = "AWS_TEMP_TOKEN",\n    "s3.region" = "AWS_REGION"\n)\n'})}),"\n",(0,r.jsx)(e.p,{children:"\u4F7F\u7528\u817E\u8BAF\u4E91 COS \u521B\u5EFA\u4ED3\u5E93"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-sql",children:'CREATE REPOSITORY `cos_repo`\nWITH S3\nON LOCATION "s3://backet1/"\nPROPERTIES\n(\n    "s3.access_key" = "ak",\n    "s3.secret_key" = "sk",\n    "s3.endpoint" = "http://cos.ap-beijing.myqcloud.com",\n    "s3.region" = "ap-beijing"\n);\n'})})]})}function h(n={}){let{wrapper:e}={...(0,l.a)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(a,{...n})}):a(n)}},250065:function(n,e,s){s.d(e,{Z:function(){return d},a:function(){return i}});var t=s(667294);let r={},l=t.createContext(r);function i(n){let e=t.useContext(l);return t.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:i(n.components),t.createElement(l.Provider,{value:e},n.children)}}}]);