"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["534590"],{107372:function(e,n,r){r.r(n),r.d(n,{default:()=>h,frontMatter:()=>c,metadata:()=>i,assets:()=>d,toc:()=>o,contentTitle:()=>a});var i=JSON.parse('{"id":"admin-manual/auth/authorization/ranger","title":"Ranger \u9274\u6743","description":"Apache Ranger \u662F\u4E00\u4E2A\u7528\u6765\u5728 Hadoop \u5E73\u53F0\u4E0A\u8FDB\u884C\u76D1\u63A7\uFF0C\u542F\u7528\u670D\u52A1\uFF0C\u4EE5\u53CA\u5168\u65B9\u4F4D\u6570\u636E\u5B89\u5168\u8BBF\u95EE\u7BA1\u7406\u7684\u5B89\u5168\u6846\u67B6\u3002 \u4F7F\u7528 ranger \u540E\uFF0C\u4F1A\u901A\u8FC7\u5728 Ranger \u4FA7\u914D\u7F6E\u6743\u9650\u4EE3\u66FF\u5728 Doris \u4E2D\u6267\u884C Grant \u8BED\u53E5\u6388\u6743\u3002","source":"@site/i18n/zh-CN/docusaurus-plugin-content-docs/current/admin-manual/auth/authorization/ranger.md","sourceDirName":"admin-manual/auth/authorization","slug":"/admin-manual/auth/authorization/ranger","permalink":"/zh-CN/docs/dev/admin-manual/auth/authorization/ranger","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1770477659000,"frontMatter":{"title":"Ranger \u9274\u6743","language":"zh-CN","description":"Apache Ranger \u662F\u4E00\u4E2A\u7528\u6765\u5728 Hadoop \u5E73\u53F0\u4E0A\u8FDB\u884C\u76D1\u63A7\uFF0C\u542F\u7528\u670D\u52A1\uFF0C\u4EE5\u53CA\u5168\u65B9\u4F4D\u6570\u636E\u5B89\u5168\u8BBF\u95EE\u7BA1\u7406\u7684\u5B89\u5168\u6846\u67B6\u3002 \u4F7F\u7528 ranger \u540E\uFF0C\u4F1A\u901A\u8FC7\u5728 Ranger \u4FA7\u914D\u7F6E\u6743\u9650\u4EE3\u66FF\u5728 Doris \u4E2D\u6267\u884C Grant \u8BED\u53E5\u6388\u6743\u3002"},"sidebar":"docs","previous":{"title":"\u5185\u7F6E\u9274\u6743","permalink":"/zh-CN/docs/dev/admin-manual/auth/authorization/internal"},"next":{"title":"\u6570\u636E\u8BBF\u95EE\u63A7\u5236","permalink":"/zh-CN/docs/dev/admin-manual/auth/authorization/data"}}'),s=r("785893"),l=r("250065");let c={title:"Ranger \u9274\u6743",language:"zh-CN",description:"Apache Ranger \u662F\u4E00\u4E2A\u7528\u6765\u5728 Hadoop \u5E73\u53F0\u4E0A\u8FDB\u884C\u76D1\u63A7\uFF0C\u542F\u7528\u670D\u52A1\uFF0C\u4EE5\u53CA\u5168\u65B9\u4F4D\u6570\u636E\u5B89\u5168\u8BBF\u95EE\u7BA1\u7406\u7684\u5B89\u5168\u6846\u67B6\u3002 \u4F7F\u7528 ranger \u540E\uFF0C\u4F1A\u901A\u8FC7\u5728 Ranger \u4FA7\u914D\u7F6E\u6743\u9650\u4EE3\u66FF\u5728 Doris \u4E2D\u6267\u884C Grant \u8BED\u53E5\u6388\u6743\u3002"},a=void 0,d={},o=[{value:"Ranger \u793A\u4F8B",id:"ranger-\u793A\u4F8B",level:2},{value:"\u66F4\u6539 Doris \u914D\u7F6E",id:"\u66F4\u6539-doris-\u914D\u7F6E",level:3},{value:"\u6743\u9650\u793A\u4F8B",id:"\u6743\u9650\u793A\u4F8B",level:3},{value:"\u5168\u5C40\u6743\u9650",id:"\u5168\u5C40\u6743\u9650",level:4},{value:"Catalog \u6743\u9650",id:"catalog-\u6743\u9650",level:4},{value:"Database \u6743\u9650",id:"database-\u6743\u9650",level:4},{value:"Table \u6743\u9650",id:"table-\u6743\u9650",level:4},{value:"\u5217\u6743\u9650",id:"\u5217\u6743\u9650",level:4},{value:"Resource \u6743\u9650",id:"resource-\u6743\u9650",level:4},{value:"Workload Group \u6743\u9650",id:"workload-group-\u6743\u9650",level:4},{value:"Compute Group \u6743\u9650",id:"compute-group-\u6743\u9650",level:4},{value:"Storage Vault \u6743\u9650",id:"storage-vault-\u6743\u9650",level:4},{value:"\u884C\u6743\u9650\u793A\u4F8B",id:"\u884C\u6743\u9650\u793A\u4F8B",level:3},{value:"\u6570\u636E\u8131\u654F\u793A\u4F8B",id:"\u6570\u636E\u8131\u654F\u793A\u4F8B",level:3},{value:"\u5E38\u89C1\u95EE\u9898",id:"\u5E38\u89C1\u95EE\u9898",level:2},{value:"\u5B89\u88C5\u548C\u914D\u7F6E Doris Ranger \u63D2\u4EF6",id:"\u5B89\u88C5\u548C\u914D\u7F6E-doris-ranger-\u63D2\u4EF6",level:2},{value:"\u5B89\u88C5\u63D2\u4EF6",id:"\u5B89\u88C5\u63D2\u4EF6",level:3},{value:"\u914D\u7F6E\u63D2\u4EF6",id:"\u914D\u7F6E\u63D2\u4EF6",level:3}];function t(e){let n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,l.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"Apache Ranger \u662F\u4E00\u4E2A\u7528\u6765\u5728 Hadoop \u5E73\u53F0\u4E0A\u8FDB\u884C\u76D1\u63A7\uFF0C\u542F\u7528\u670D\u52A1\uFF0C\u4EE5\u53CA\u5168\u65B9\u4F4D\u6570\u636E\u5B89\u5168\u8BBF\u95EE\u7BA1\u7406\u7684\u5B89\u5168\u6846\u67B6\u3002\n\u4F7F\u7528 ranger \u540E\uFF0C\u4F1A\u901A\u8FC7\u5728 Ranger \u4FA7\u914D\u7F6E\u6743\u9650\u4EE3\u66FF\u5728 Doris \u4E2D\u6267\u884C Grant \u8BED\u53E5\u6388\u6743\u3002\nRanger \u7684\u5B89\u88C5\u548C\u914D\u7F6E\u89C1\u4E0B\u6587\uFF1A\u5B89\u88C5\u548C\u914D\u7F6E Doris Ranger \u63D2\u4EF6"}),"\n",(0,s.jsx)(n.h2,{id:"ranger-\u793A\u4F8B",children:"Ranger \u793A\u4F8B"}),"\n",(0,s.jsx)(n.h3,{id:"\u66F4\u6539-doris-\u914D\u7F6E",children:"\u66F4\u6539 Doris \u914D\u7F6E"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"\u5728 fe/conf/fe.conf \u6587\u4EF6\u4E2D\u914D\u7F6E\u9274\u6743\u65B9\u5F0F\u4E3A ranger access_controller_type=ranger-doris"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["\u5728\u6240\u6709 FE \u7684 conf \u76EE\u5F55\u521B\u5EFA ",(0,s.jsx)(n.code,{children:"ranger-doris-security.xml"})," \u6587\u4EF6\uFF0C\u5185\u5BB9\u5982\u4E0B\uFF1A"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'<?xml version="1.0" encoding="UTF-8"?>\n<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>\n<configuration>\n    <property>\n        <name>ranger.plugin.doris.policy.cache.dir</name>\n        <value>/path/to/ranger/cache/</value>\n    </property>\n    <property>\n        <name>ranger.plugin.doris.policy.pollIntervalMs</name>\n        <value>30000</value>\n    </property>\n    <property>\n        <name>ranger.plugin.doris.policy.rest.client.connection.timeoutMs</name>\n        <value>60000</value>\n    </property>\n    <property>\n        <name>ranger.plugin.doris.policy.rest.client.read.timeoutMs</name>\n        <value>60000</value>\n    </property>\n    <property>\n        <name>ranger.plugin.doris.policy.rest.url</name>\n        <value>http://172.21.0.32:6080</value>\n    </property>\n    <property>\n        <name>ranger.plugin.doris.policy.source.impl</name>\n        <value>org.apache.ranger.admin.client.RangerAdminRESTClient</value>\n    </property>\n    <property>\n        <name>ranger.plugin.doris.service.name</name>\n        <value>doris</value>\n    </property>\n</configuration>\n'})}),"\n",(0,s.jsxs)(n.p,{children:["\u5176\u4E2D\u9700\u8981\u5C06 ",(0,s.jsx)(n.code,{children:"ranger.plugin.doris.policy.cache.dir"})," \u548C ",(0,s.jsx)(n.code,{children:"ranger.plugin.doris.policy.rest.url"})," \u6539\u4E3A\u5B9E\u9645\u503C\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"\u542F\u52A8\u96C6\u7FA4"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u6743\u9650\u793A\u4F8B",children:"\u6743\u9650\u793A\u4F8B"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\u5728 Doris \u4E2D\u521B\u5EFA ",(0,s.jsx)(n.code,{children:"user1"}),"\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:["\u5728 Doris \u4E2D\uFF0C\u5148\u4F7F\u7528 ",(0,s.jsx)(n.code,{children:"admin"})," \u7528\u6237\u521B\u5EFA\u4E00\u4E2A Catalog\uFF1A",(0,s.jsx)(n.code,{children:"hive"}),"\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:["\u5728 Ranger \u4E2D\u521B\u5EFA ",(0,s.jsx)(n.code,{children:"user1"}),"\u3002"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"\u5168\u5C40\u6743\u9650",children:"\u5168\u5C40\u6743\u9650"}),"\n",(0,s.jsxs)(n.p,{children:["\u76F8\u5F53\u4E8E Doris \u5185\u90E8\u6388\u6743\u8BED\u53E5\u7684 ",(0,s.jsx)(n.code,{children:"grant select_priv on *.*.* to user1"}),";"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"catalog \u540C\u7EA7\u4E0B\u62C9\u6846\u53EF\u4EE5\u627E\u5230 global \u9009\u9879"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["\u8F93\u5165\u6846\u91CC\u53EA\u80FD\u8F93\u5165 ",(0,s.jsx)(n.code,{children:"*"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"global",src:r(256005).Z+"",width:"2866",height:"1508"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"catalog-\u6743\u9650",children:"Catalog \u6743\u9650"}),"\n",(0,s.jsxs)(n.p,{children:["\u76F8\u5F53\u4E8E Doris \u5185\u90E8\u6388\u6743\u8BED\u53E5\u7684 ",(0,s.jsx)(n.code,{children:"grant select_priv on hive.*.* to user1"}),";"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"catalog",src:r(466377).Z+"",width:"2864",height:"1512"})}),"\n",(0,s.jsx)(n.h4,{id:"database-\u6743\u9650",children:"Database \u6743\u9650"}),"\n",(0,s.jsxs)(n.p,{children:["\u76F8\u5F53\u4E8E Doris \u5185\u90E8\u6388\u6743\u8BED\u53E5\u7684 ",(0,s.jsx)(n.code,{children:"grant select_priv on hive.tpch.* to user1"}),";"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"database",src:r(100706).Z+"",width:"2854",height:"1554"})}),"\n",(0,s.jsx)(n.h4,{id:"table-\u6743\u9650",children:"Table \u6743\u9650"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"\u8FD9\u91CC\u7684table\u6CDB\u6307 \u8868/\u89C6\u56FE/\u5F02\u6B65\u7269\u5316\u89C6\u56FE"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["\u76F8\u5F53\u4E8E Doris \u5185\u90E8\u6388\u6743\u8BED\u53E5\u7684 ",(0,s.jsx)(n.code,{children:"grant select_priv on hive.tpch.user to user1"}),";"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"table",src:r(724015).Z+"",width:"2864",height:"1552"})}),"\n",(0,s.jsx)(n.h4,{id:"\u5217\u6743\u9650",children:"\u5217\u6743\u9650"}),"\n",(0,s.jsxs)(n.p,{children:["\u76F8\u5F53\u4E8E Doris \u5185\u90E8\u6388\u6743\u8BED\u53E5\u7684 ",(0,s.jsx)(n.code,{children:"grant select_priv(name,age) on hive.tpch.user to user1"}),";"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"column",src:r(230861).Z+"",width:"2858",height:"1552"})}),"\n",(0,s.jsx)(n.h4,{id:"resource-\u6743\u9650",children:"Resource \u6743\u9650"}),"\n",(0,s.jsxs)(n.p,{children:["\u76F8\u5F53\u4E8E Doris \u5185\u90E8\u6388\u6743\u8BED\u53E5\u7684 ",(0,s.jsx)(n.code,{children:"grant usage_priv on resource 'resource1' to user1"}),";"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"catalog \u540C\u7EA7\u4E0B\u62C9\u6846\u53EF\u4EE5\u627E\u5230 resource \u9009\u9879"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"resource",src:r(851378).Z+"",width:"2878",height:"1544"})}),"\n",(0,s.jsx)(n.h4,{id:"workload-group-\u6743\u9650",children:"Workload Group \u6743\u9650"}),"\n",(0,s.jsxs)(n.p,{children:["\u76F8\u5F53\u4E8E Doris \u5185\u90E8\u6388\u6743\u8BED\u53E5\u7684 ",(0,s.jsx)(n.code,{children:"grant usage_priv on workload group 'group1' to user1"}),";"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"catalog \u540C\u7EA7\u4E0B\u62C9\u6846\u53EF\u4EE5\u627E\u5230 workload group \u9009\u9879"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"group1",src:r(739782).Z+"",width:"2878",height:"1532"})}),"\n",(0,s.jsx)(n.h4,{id:"compute-group-\u6743\u9650",children:"Compute Group \u6743\u9650"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"3.0.6 \u7248\u672C\u652F\u6301"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["\u76F8\u5F53\u4E8E Doris \u5185\u90E8\u6388\u6743\u8BED\u53E5\u7684 ",(0,s.jsx)(n.code,{children:"grant usage_priv on compute group 'group1' to user1"}),";"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"catalog \u540C\u7EA7\u4E0B\u62C9\u6846\u53EF\u4EE5\u627E\u5230 compute group \u9009\u9879"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"compute group",src:r(100367).Z+"",width:"2868",height:"1520"})}),"\n",(0,s.jsx)(n.h4,{id:"storage-vault-\u6743\u9650",children:"Storage Vault \u6743\u9650"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"3.0.6 \u7248\u672C\u652F\u6301"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["\u76F8\u5F53\u4E8E Doris \u5185\u90E8\u6388\u6743\u8BED\u53E5\u7684 ",(0,s.jsx)(n.code,{children:"grant usage_priv on storage vault 'vault1' to user1"}),";"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"catalog \u540C\u7EA7\u4E0B\u62C9\u6846\u53EF\u4EE5\u627E\u5230 storage vault \u9009\u9879"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"storage vault",src:r(980851).Z+"",width:"2858",height:"1444"})}),"\n",(0,s.jsx)(n.h3,{id:"\u884C\u6743\u9650\u793A\u4F8B",children:"\u884C\u6743\u9650\u793A\u4F8B"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"2.1.3 \u7248\u672C\u652F\u6301"}),"\n"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"\u53C2\u8003 \u6743\u9650\u793A\u4F8B \u7ED9 user1 \u5206\u914D internal.db1.user \u8868\u7684 select \u6743\u9650\u3002"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"\u5728 Ranger \u4E2D\u6DFB\u52A0\u4E00\u4E2A Row Level Filter policy"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Row Policy \u793A\u4F8B",src:r(797447).Z+"",width:"1280",height:"703"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["\u4F7F\u7528 user1 \u767B\u5F55 Doris\u3002\u6267\u884C ",(0,s.jsx)(n.code,{children:"select * from internal.db1.user"}),"\uFF0C\u53EA\u80FD\u770B\u5230\u6EE1\u8DB3 ",(0,s.jsx)(n.code,{children:"id > 3"})," \u4E14 ",(0,s.jsx)(n.code,{children:"age = 2"})," \u7684\u6570\u636E\u3002"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u6570\u636E\u8131\u654F\u793A\u4F8B",children:"\u6570\u636E\u8131\u654F\u793A\u4F8B"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"2.1.3 \u7248\u672C\u652F\u6301"}),"\n"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"\u53C2\u8003 \u6743\u9650\u793A\u4F8B \u7ED9 user1 \u5206\u914D internal.db1.user \u8868\u7684 select \u6743\u9650\u3002"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"\u5728 Ranger \u4E2D\u6DFB\u52A0\u4E00\u4E2A Masking policy"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Data Mask \u793A\u4F8B",src:r(3830).Z+"",width:"1280",height:"702"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["\u4F7F\u7528 user1 \u767B\u5F55 Doris\u3002\u6267\u884C ",(0,s.jsx)(n.code,{children:"select * from internal.db1.user"}),"\uFF0C\u770B\u5230\u7684 phone \u662F\u6309\u7167\u6307\u5B9A\u89C4\u5219\u8131\u654F\u540E\u7684\u6570\u636E\u3002"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"\u5E38\u89C1\u95EE\u9898",children:"\u5E38\u89C1\u95EE\u9898"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"ranger \u8BBF\u95EE\u5931\u8D25\uFF0C\u600E\u4E48\u67E5\u770B\u65E5\u5FD7"}),"\n",(0,s.jsx)(n.p,{children:"\u5728\u6240\u6709 FE \u7684 conf \u76EE\u5F55\u521B\u5EFA log4j.properties \u6587\u4EF6\uFF0C\u5185\u5BB9\u5982\u4E0B\uFF1A"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"log4j.rootLogger = warn,stdout,D\n\nlog4j.appender.stdout = org.apache.log4j.ConsoleAppender\nlog4j.appender.stdout.Target = System.out\nlog4j.appender.stdout.layout = org.apache.log4j.PatternLayout\nlog4j.appender.stdout.layout.ConversionPattern = [%-5p] %d{yyyy-MM-dd HH:mm:ss,SSS} method:%l%n%m%n\n\nlog4j.appender.D = org.apache.log4j.DailyRollingFileAppender\nlog4j.appender.D.File = /path/to/fe/log/ranger.log\nlog4j.appender.D.Append = true\nlog4j.appender.D.Threshold = INFO\nlog4j.appender.D.layout = org.apache.log4j.PatternLayout\nlog4j.appender.D.layout.ConversionPattern = %-d{yyyy-MM-dd HH:mm:ss}  [ %t:%r ] - [ %p ]  %m%n\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\u5176\u4E2D ",(0,s.jsx)(n.code,{children:"log4j.appender.D.File"})," \u6539\u4E3A\u5B9E\u9645\u503C\uFF0C\u7528\u4E8E\u5B58\u653E Ranger \u63D2\u4EF6\u7684\u65E5\u5FD7\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"\u914D\u7F6E\u4E86 Row Level Filter policy \uFF0C\u4F46\u662F\u7528\u6237\u67E5\u8BE2\u65F6\u62A5\u6CA1\u6709\u6743\u9650"}),"\n",(0,s.jsx)(n.p,{children:"Row Level Filter policy \u4EC5\u7528\u6765\u9650\u5236\u7528\u6237\u8BBF\u95EE\u8868\u4E2D\u6570\u636E\u7684\u7279\u5B9A\u8BB0\u5F55\uFF0C \u4ECD\u9700\u901A\u8FC7 ACCESS POLICY \u4E3A\u7528\u6237\u6388\u6743"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["\u521B\u5EFA\u670D\u52A1\u540E\uFF0C\u9ED8\u8BA4\u4EC5 ",(0,s.jsx)(n.code,{children:"admin"})," \u7528\u6237\u6709\u6743\u9650\uFF0C ",(0,s.jsx)(n.code,{children:"root"})," \u7528\u6237\u6CA1\u6709\u6743\u9650"]}),"\n",(0,s.jsxs)(n.p,{children:["\u5982\u56FE\u6240\u793A\uFF0C\u521B\u5EFA\u670D\u52A1\u7684\u65F6\u5019\uFF0C\u6DFB\u52A0\u914D\u7F6E ",(0,s.jsx)(n.code,{children:"default.policy.users"})," \uFF0C\u5982\u9700\u914D\u7F6E\u591A\u4E2A\u7528\u6237\u62E5\u6709\u5168\u90E8\u6743\u9650\uFF0C\u7528 ",(0,s.jsx)(n.code,{children:","})," \u5206\u9694\n",(0,s.jsx)(n.img,{alt:"default policy",src:r(697289).Z+"",width:"1706",height:"398"})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"\u4F7F\u7528 ranger \u9274\u6743\u540E\uFF0C\u5185\u90E8\u6388\u6743\u8FD8\u6709\u7528\u4E48\uFF1F"}),"\n",(0,s.jsx)(n.p,{children:"\u4E0D\u80FD\u7528\uFF0C\u4E5F\u4E0D\u80FD\u521B\u5EFA/\u5220\u9664\u89D2\u8272"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"\u5B89\u88C5\u548C\u914D\u7F6E-doris-ranger-\u63D2\u4EF6",children:"\u5B89\u88C5\u548C\u914D\u7F6E Doris Ranger \u63D2\u4EF6"}),"\n",(0,s.jsx)(n.h3,{id:"\u5B89\u88C5\u63D2\u4EF6",children:"\u5B89\u88C5\u63D2\u4EF6"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"\u4E0B\u8F7D\u4EE5\u4E0B\u6587\u4EF6"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://selectdb-doris-1308700295.cos.ap-beijing.myqcloud.com/release/ranger/dev/ranger-doris-plugin-3.0.0-SNAPSHOT.jar",children:"ranger-doris-plugin-3.0.0-SNAPSHOT.jar"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://selectdb-doris-1308700295.cos.ap-beijing.myqcloud.com/release/jdbc_driver/mysql-connector-java-8.0.25.jar",children:"mysql-connector-java-8.0.25.jar"})}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["\u5C06\u4E0B\u8F7D\u597D\u7684\u6587\u4EF6\u653E\u5230 Ranger \u670D\u52A1\u7684 ",(0,s.jsx)(n.code,{children:"ranger-plugins/doris"})," \u76EE\u5F55\u4E0B\uFF0C\u5982\uFF1A"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"/usr/local/service/ranger/ews/webapp/WEB-INF/classes/ranger-plugins/doris/ranger-doris-plugin-3.0.0-SNAPSHOT.jar\n/usr/local/service/ranger/ews/webapp/WEB-INF/classes/ranger-plugins/doris/mysql-connector-java-8.0.25.jar\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"\u91CD\u542F Ranger \u670D\u52A1\u3002"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["\u4E0B\u8F7D ",(0,s.jsx)(n.a,{href:"https://github.com/morningman/ranger/blob/doris-plugin/agents-common/src/main/resources/service-defs/ranger-servicedef-doris.json",children:"ranger-servicedef-doris.json"})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"\u6267\u884C\u4EE5\u4E0B\u547D\u4EE4\u4E0A\u4F20\u5B9A\u4E49\u6587\u4EF6\u5230 Ranger \u670D\u52A1\uFF1A"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'curl -u user:password -X POST \\\n    -H "Accept: application/json" \\\n    -H "Content-Type: application/json" \\\n    http://172.21.0.32:6080/service/plugins/definitions \\\n    -d@ranger-servicedef-doris.json\n'})}),"\n",(0,s.jsx)(n.p,{children:"\u5176\u4E2D\u7528\u6237\u540D\u5BC6\u7801\u662F\u767B\u5F55 Ranger WebUI \u6240\u4F7F\u7528\u7684\u7528\u6237\u540D\u5BC6\u7801\u3002"}),"\n",(0,s.jsxs)(n.p,{children:["\u670D\u52A1\u5730\u5740\u7AEF\u53E3\u53EF\u4EE5\u518D ",(0,s.jsx)(n.code,{children:"ranger-admin-site.xml"})," \u914D\u7F6E\u6587\u4EF6\u7684 ",(0,s.jsx)(n.code,{children:"ranger.service.http.port"})," \u914D\u7F6E\u9879\u67E5\u770B\u3002"]}),"\n",(0,s.jsx)(n.p,{children:"\u5982\u6267\u884C\u6210\u529F\uFF0C\u4F1A\u8FD4\u56DE Json \u683C\u5F0F\u7684\u670D\u52A1\u5B9A\u4E49\uFF0C\u5982\uFF1A"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'{\n  "id": 207,\n  "guid": "d3ff9e41-f9dd-4217-bb5f-3fa9996454b6",\n  "isEnabled": true,\n  "createdBy": "Admin",\n  "updatedBy": "Admin",\n  "createTime": 1705817398112,\n  "updateTime": 1705817398112,\n  "version": 1,\n  "name": "doris",\n  "displayName": "Apache Doris",\n  "implClass": "org.apache.ranger.services.doris.RangerServiceDoris",\n  "label": "Doris",\n  "description": "Apache Doris",\n  "options": {\n    "enableDenyAndExceptionsInPolicies": "true"\n  },\n  ...\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"\u5982\u60F3\u91CD\u65B0\u521B\u5EFA\uFF0C\u5219\u53EF\u4EE5\u4F7F\u7528\u4EE5\u4E0B\u547D\u4EE4\u5220\u9664\u670D\u52A1\u5B9A\u4E49\u540E\uFF0C\u518D\u91CD\u65B0\u4E0A\u4F20\uFF1A"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"curl -v -u user:password -X DELETE \\\nhttp://172.21.0.32:6080/service/plugins/definitions/207\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\u5176\u4E2D ",(0,s.jsx)(n.code,{children:"207"})," \u662F\u521B\u5EFA\u65F6\u8FD4\u56DE\u7684 id\u3002\u5220\u9664\u524D\uFF0C\u9700\u5728 Ranger WebUI \u754C\u9762\u5220\u9664\u5DF2\u521B\u5EFA\u7684 Doris \u670D\u52A1\u3002"]}),"\n",(0,s.jsx)(n.p,{children:"\u4E5F\u53EF\u4EE5\u901A\u8FC7\u4EE5\u4E0B\u547D\u4EE4\u5217\u4E3E\u5F53\u524D\u5DF2\u6DFB\u52A0\u7684\u670D\u52A1\u5B9A\u4E49\uFF0C\u4EE5\u4FBF\u83B7\u53D6 id\uFF1A"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"curl -v -u user:password -X GET \\\nhttp://172.21.0.32:6080/service/plugins/definitions/\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u914D\u7F6E\u63D2\u4EF6",children:"\u914D\u7F6E\u63D2\u4EF6"}),"\n",(0,s.jsx)(n.p,{children:"\u5B89\u88C5\u5B8C\u6BD5\u540E\uFF0C\u6253\u5F00 Ranger WebUI\uFF0C\u53EF\u4EE5\u518D Service Manger \u754C\u9762\u4E2D\u770B\u5230 Apache Doris \u63D2\u4EF6\uFF1A"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"ranger",src:r(696748).Z+"",width:"3978",height:"1492"})}),"\n",(0,s.jsxs)(n.p,{children:["\u70B9\u51FB\u63D2\u4EF6\u65C1\u8FB9\u7684 ",(0,s.jsx)(n.code,{children:"+"})," \u53F7\u6DFB\u52A0\u4E00\u4E2A  Doris \u670D\u52A1\uFF1A"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"ranger2",src:r(712206).Z+"",width:"1844",height:"1810"})}),"\n",(0,s.jsx)(n.p,{children:"Config Properties \u90E8\u5206\u53C2\u6570\u542B\u4E49\u5982\u4E0B\uFF1A"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Username"}),"/",(0,s.jsx)(n.code,{children:"Pasword"}),"\uFF1ADoris \u96C6\u7FA4\u7684\u7528\u6237\u540D\u5BC6\u7801\uFF0C\u8FD9\u91CC\u5EFA\u8BAE\u4F7F\u7528 Admin \u7528\u6237\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"jdbc.driver_class"}),"\uFF1A\u8FDE\u63A5 Doris \u4F7F\u7528\u7684 JDBC \u9A71\u52A8\u3002",(0,s.jsx)(n.code,{children:"com.mysql.cj.jdbc.Driver"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"jdbc.url"}),"\uFF1ADoris \u96C6\u7FA4\u7684 JDBC url \u8FDE\u63A5\u4E32\u3002",(0,s.jsx)(n.code,{children:"jdbc:mysql://172.21.0.101:9030?useSSL=false"})]}),"\n",(0,s.jsxs)(n.li,{children:["\u989D\u5916\u53C2\u6570\uFF1A\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"resource.lookup.timeout.value.in.ms"}),"\uFF1A\u83B7\u53D6\u5143\u4FE1\u606F\u7684\u8D85\u65F6\u65F6\u95F4\uFF0C\u5EFA\u8BAE\u586B\u5199 ",(0,s.jsx)(n.code,{children:"10000"}),"\uFF0C\u5373 10 \u79D2\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["\u53EF\u4EE5\u70B9\u51FB ",(0,s.jsx)(n.code,{children:"Test Connection"})," \u68C0\u67E5\u662F\u5426\u53EF\u4EE5\u8054\u901A\u3002"]}),"\n",(0,s.jsxs)(n.p,{children:["\u4E4B\u540E\u70B9\u51FB ",(0,s.jsx)(n.code,{children:"Add"})," \u6DFB\u52A0\u670D\u52A1\u3002"]}),"\n",(0,s.jsx)(n.p,{children:"\u4E4B\u540E\uFF0C\u53EF\u4EE5\u5728 Service Manger \u754C\u9762\u7684 Apache Doris \u63D2\u4EF6\u4E2D\u770B\u5230\u521B\u5EFA\u7684\u670D\u52A1\uFF0C\u70B9\u51FB\u670D\u52A1\uFF0C\u5373\u53EF\u5F00\u59CB\u914D\u7F6E Ranger\u3002"})]})}function h(e={}){let{wrapper:n}={...(0,l.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}},466377:function(e,n,r){r.d(n,{Z:function(){return i}});let i=r.p+"assets/images/catalog-2804feb30d3521d7c4264c9f101dd7a4.png"},230861:function(e,n,r){r.d(n,{Z:function(){return i}});let i=r.p+"assets/images/column-5da963241d596f0ff33ac0f820777586.png"},100367:function(e,n,r){r.d(n,{Z:function(){return i}});let i=r.p+"assets/images/compute-group-d292b1dc9b5e66f16d9b38694683c074.png"},100706:function(e,n,r){r.d(n,{Z:function(){return i}});let i=r.p+"assets/images/database-b7937539c5df2bee922a1677f2665298.png"},697289:function(e,n,r){r.d(n,{Z:function(){return i}});let i=r.p+"assets/images/default-policy-e876a64c98f330140a8116f49c35dff7.png"},256005:function(e,n,r){r.d(n,{Z:function(){return i}});let i=r.p+"assets/images/global-b9ae251ae4e6766b41278849fc17ec62.png"},739782:function(e,n,r){r.d(n,{Z:function(){return i}});let i=r.p+"assets/images/group1-d5d2748e9b699dc8f52f2bf932ae892e.png"},3830:function(e,n,r){r.d(n,{Z:function(){return i}});let i=r.p+"assets/images/ranger-data-mask-b6a744951ab66b50d2eab58507a71e58.png"},797447:function(e,n,r){r.d(n,{Z:function(){return i}});let i=r.p+"assets/images/ranger-row-policy-1ff51f26011c8534e95ba9a308d952a2.jpeg"},696748:function(e,n,r){r.d(n,{Z:function(){return i}});let i=r.p+"assets/images/ranger1-f3bf6121740cc89e025f6a1b2ae9a0f2.png"},712206:function(e,n,r){r.d(n,{Z:function(){return i}});let i=r.p+"assets/images/ranger2-e4453db1ebcf2d34cb964bcf67999dd7.png"},851378:function(e,n,r){r.d(n,{Z:function(){return i}});let i=r.p+"assets/images/resource-0ff0b624695ba3cff9451ccd1742f549.png"},980851:function(e,n,r){r.d(n,{Z:function(){return i}});let i=r.p+"assets/images/storage-vault-a1e09e8e79c2b53575c7a26be967bcf5.png"},724015:function(e,n,r){r.d(n,{Z:function(){return i}});let i=r.p+"assets/images/table-45cec6f0894baab2419d290bd738e805.png"},250065:function(e,n,r){r.d(n,{Z:function(){return a},a:function(){return c}});var i=r(667294);let s={},l=i.createContext(s);function c(e){let n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);