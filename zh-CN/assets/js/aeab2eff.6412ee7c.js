"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["63442"],{163449:function(n,e,s){s.r(e),s.d(e,{default:()=>h,frontMatter:()=>c,metadata:()=>l,assets:()=>t,toc:()=>a,contentTitle:()=>d});var l=JSON.parse('{"id":"admin-manual/maint-monitor/disk-capacity","title":"\u78C1\u76D8\u7A7A\u95F4\u7BA1\u7406","description":"\u672C\u6587\u6863\u4E3B\u8981\u4ECB\u7ECD\u548C\u78C1\u76D8\u5B58\u50A8\u7A7A\u95F4\u6709\u5173\u7684\u7CFB\u7EDF\u53C2\u6570\u548C\u5904\u7406\u7B56\u7565\u3002","source":"@site/i18n/zh-CN/docusaurus-plugin-content-docs/version-2.0/admin-manual/maint-monitor/disk-capacity.md","sourceDirName":"admin-manual/maint-monitor","slug":"/admin-manual/maint-monitor/disk-capacity","permalink":"/zh-CN/docs/2.0/admin-manual/maint-monitor/disk-capacity","draft":false,"unlisted":false,"tags":[],"version":"2.0","frontMatter":{"title":"\u78C1\u76D8\u7A7A\u95F4\u7BA1\u7406","language":"zh-CN"},"sidebar":"docs","previous":{"title":"\u76D1\u63A7\u548C\u62A5\u8B66","permalink":"/zh-CN/docs/2.0/admin-manual/maint-monitor/monitor-alert"},"next":{"title":"\u6570\u636E\u526F\u672C\u7BA1\u7406","permalink":"/zh-CN/docs/2.0/admin-manual/maint-monitor/tablet-repair-and-balance"}}'),i=s("785893"),r=s("250065");let c={title:"\u78C1\u76D8\u7A7A\u95F4\u7BA1\u7406",language:"zh-CN"},d=void 0,t={},a=[{value:"\u540D\u8BCD\u89E3\u91CA",id:"\u540D\u8BCD\u89E3\u91CA",level:2},{value:"\u57FA\u672C\u539F\u7406",id:"\u57FA\u672C\u539F\u7406",level:2},{value:"FE \u53C2\u6570",id:"fe-\u53C2\u6570",level:2},{value:"BE \u53C2\u6570",id:"be-\u53C2\u6570",level:2},{value:"\u78C1\u76D8\u7A7A\u95F4\u91CA\u653E",id:"\u78C1\u76D8\u7A7A\u95F4\u91CA\u653E",level:2}];function o(n){let e={a:"a",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.a)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.p,{children:"\u672C\u6587\u6863\u4E3B\u8981\u4ECB\u7ECD\u548C\u78C1\u76D8\u5B58\u50A8\u7A7A\u95F4\u6709\u5173\u7684\u7CFB\u7EDF\u53C2\u6570\u548C\u5904\u7406\u7B56\u7565\u3002"}),"\n",(0,i.jsx)(e.p,{children:"Doris \u7684\u6570\u636E\u78C1\u76D8\u7A7A\u95F4\u5982\u679C\u4E0D\u52A0\u4EE5\u63A7\u5236\uFF0C\u4F1A\u56E0\u78C1\u76D8\u5199\u6EE1\u800C\u5BFC\u81F4\u8FDB\u7A0B\u6302\u6389\u3002\u56E0\u6B64\u6211\u4EEC\u76D1\u6D4B\u78C1\u76D8\u7684\u4F7F\u7528\u7387\u548C\u5269\u4F59\u7A7A\u95F4\uFF0C\u901A\u8FC7\u8BBE\u7F6E\u4E0D\u540C\u7684\u8B66\u6212\u6C34\u4F4D\uFF0C\u6765\u63A7\u5236 Doris \u7CFB\u7EDF\u4E2D\u7684\u5404\u9879\u64CD\u4F5C\uFF0C\u5C3D\u91CF\u907F\u514D\u53D1\u751F\u78C1\u76D8\u88AB\u5199\u6EE1\u7684\u60C5\u51B5\u3002"}),"\n",(0,i.jsx)(e.h2,{id:"\u540D\u8BCD\u89E3\u91CA",children:"\u540D\u8BCD\u89E3\u91CA"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["Data Dir\uFF1A\u6570\u636E\u76EE\u5F55\uFF0C\u5728 BE \u914D\u7F6E\u6587\u4EF6 ",(0,i.jsx)(e.code,{children:"be.conf"})," \u7684 ",(0,i.jsx)(e.code,{children:"storage_root_path"})," \u4E2D\u6307\u5B9A\u7684\u5404\u4E2A\u6570\u636E\u76EE\u5F55\u3002\u901A\u5E38\u4E00\u4E2A\u6570\u636E\u76EE\u5F55\u5BF9\u5E94\u4E00\u4E2A\u78C1\u76D8\u3001\u56E0\u6B64\u4E0B\u6587\u4E2D ",(0,i.jsx)(e.strong,{children:"\u78C1\u76D8"})," \u4E5F\u6307\u4EE3\u4E00\u4E2A\u6570\u636E\u76EE\u5F55\u3002"]}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"\u57FA\u672C\u539F\u7406",children:"\u57FA\u672C\u539F\u7406"}),"\n",(0,i.jsx)(e.p,{children:"BE \u5B9A\u671F\uFF08\u6BCF\u9694\u4E00\u5206\u949F\uFF09\u4F1A\u5411 FE \u6C47\u62A5\u4E00\u6B21\u78C1\u76D8\u4F7F\u7528\u60C5\u51B5\u3002FE \u8BB0\u5F55\u8FD9\u4E9B\u7EDF\u8BA1\u503C\uFF0C\u5E76\u6839\u636E\u8FD9\u4E9B\u7EDF\u8BA1\u503C\uFF0C\u9650\u5236\u4E0D\u540C\u7684\u64CD\u4F5C\u8BF7\u6C42\u3002"}),"\n",(0,i.jsxs)(e.p,{children:["\u5728 FE \u4E2D\u5206\u522B\u8BBE\u7F6E\u4E86 ",(0,i.jsx)(e.strong,{children:"\u9AD8\u6C34\u4F4D\uFF08High Watermark\uFF09"})," \u548C ",(0,i.jsx)(e.strong,{children:"\u5371\u9669\u6C34\u4F4D\uFF08Flood Stage\uFF09"})," \u4E24\u7EA7\u9608\u503C\u3002\u5371\u9669\u6C34\u4F4D\u9AD8\u4E8E\u9AD8\u6C34\u4F4D\u3002\u5F53\u78C1\u76D8\u4F7F\u7528\u7387\u9AD8\u4E8E\u9AD8\u6C34\u4F4D\u65F6\uFF0CDoris \u4F1A\u9650\u5236\u67D0\u4E9B\u64CD\u4F5C\u7684\u6267\u884C\uFF08\u5982\u526F\u672C\u5747\u8861\u7B49\uFF09\u3002\u800C\u5982\u679C\u9AD8\u4E8E\u5371\u9669\u6C34\u4F4D\uFF0C\u5219\u4F1A\u7981\u6B62\u67D0\u4E9B\u64CD\u4F5C\u7684\u6267\u884C\uFF08\u5982\u5BFC\u5165\uFF09\u3002"]}),"\n",(0,i.jsxs)(e.p,{children:["\u540C\u65F6\uFF0C\u5728 BE \u4E0A\u4E5F\u8BBE\u7F6E\u4E86 ",(0,i.jsx)(e.strong,{children:"\u5371\u9669\u6C34\u4F4D\uFF08Flood Stage\uFF09"}),"\u3002\u8003\u8651\u5230 FE \u5E76\u4E0D\u80FD\u5B8C\u5168\u53CA\u65F6\u7684\u68C0\u6D4B\u5230 BE \u4E0A\u7684\u78C1\u76D8\u4F7F\u7528\u60C5\u51B5\uFF0C\u4EE5\u53CA\u65E0\u6CD5\u63A7\u5236\u67D0\u4E9B BE \u81EA\u8EAB\u8FD0\u884C\u7684\u64CD\u4F5C\uFF08\u5982 Compaction\uFF09\u3002\u56E0\u6B64 BE \u4E0A\u7684\u5371\u9669\u6C34\u4F4D\u7528\u4E8E BE \u4E3B\u52A8\u62D2\u7EDD\u548C\u505C\u6B62\u67D0\u4E9B\u64CD\u4F5C\uFF0C\u8FBE\u5230\u81EA\u6211\u4FDD\u62A4\u7684\u76EE\u7684\u3002"]}),"\n",(0,i.jsx)(e.h2,{id:"fe-\u53C2\u6570",children:"FE \u53C2\u6570"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u9AD8\u6C34\u4F4D\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-text",children:"storage_high_watermark_usage_percent \u9ED8\u8BA4 85 (85%)\u3002\nstorage_min_left_capacity_bytes \u9ED8\u8BA4 2GB\u3002\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u5F53\u78C1\u76D8\u7A7A\u95F4\u4F7F\u7528\u7387",(0,i.jsx)(e.strong,{children:"\u5927\u4E8E"})," ",(0,i.jsx)(e.code,{children:"storage_high_watermark_usage_percent"}),"\uFF0C",(0,i.jsx)(e.strong,{children:"\u6216\u8005"})," \u78C1\u76D8\u7A7A\u95F4\u5269\u4F59\u5927\u5C0F",(0,i.jsx)(e.strong,{children:"\u5C0F\u4E8E"})," ",(0,i.jsx)(e.code,{children:"storage_min_left_capacity_bytes"})," \u65F6\uFF0C\u8BE5\u78C1\u76D8\u4E0D\u4F1A\u518D\u88AB\u4F5C\u4E3A\u4EE5\u4E0B\u64CD\u4F5C\u7684\u76EE\u7684\u8DEF\u5F84\uFF1A"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Tablet \u5747\u8861\u64CD\u4F5C\uFF08Balance\uFF09"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Colocation \u8868\u6570\u636E\u5206\u7247\u7684\u91CD\u5206\u5E03\uFF08Relocation\uFF09"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Decommission"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u5371\u9669\u6C34\u4F4D\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-text",children:"storage_flood_stage_usage_percent \u9ED8\u8BA4 95 (95%)\u3002\nstorage_flood_stage_left_capacity_bytes \u9ED8\u8BA4 1GB\u3002\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u5F53\u78C1\u76D8\u7A7A\u95F4\u4F7F\u7528\u7387",(0,i.jsx)(e.strong,{children:"\u5927\u4E8E"})," ",(0,i.jsx)(e.code,{children:"storage_flood_stage_usage_percent"}),"\uFF0C",(0,i.jsx)(e.strong,{children:"\u5E76\u4E14"})," \u78C1\u76D8\u7A7A\u95F4\u5269\u4F59\u5927\u5C0F",(0,i.jsx)(e.strong,{children:"\u5C0F\u4E8E"})," ",(0,i.jsx)(e.code,{children:"storage_flood_stage_left_capacity_bytes"})," \u65F6\uFF0C\u8BE5\u78C1\u76D8\u4E0D\u4F1A\u518D\u88AB\u4F5C\u4E3A\u4EE5\u4E0B\u64CD\u4F5C\u7684\u76EE\u7684\u8DEF\u5F84\uFF0C\u5E76\u7981\u6B62\u67D0\u4E9B\u64CD\u4F5C\uFF1A"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Tablet \u5747\u8861\u64CD\u4F5C\uFF08Balance\uFF09"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Colocation \u8868\u6570\u636E\u5206\u7247\u7684\u91CD\u5206\u5E03\uFF08Relocation\uFF09"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u526F\u672C\u8865\u9F50"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6062\u590D\u64CD\u4F5C\uFF08Restore\uFF09"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6570\u636E\u5BFC\u5165\uFF08Load/Insert\uFF09"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"be-\u53C2\u6570",children:"BE \u53C2\u6570"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u5371\u9669\u6C34\u4F4D\uFF1A"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-text",children:"storage_flood_stage_usage_percent \u9ED8\u8BA4 90 (90%)\u3002\nstorage_flood_stage_left_capacity_bytes \u9ED8\u8BA4 1GB\u3002\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u5F53\u78C1\u76D8\u7A7A\u95F4\u4F7F\u7528\u7387",(0,i.jsx)(e.strong,{children:"\u5927\u4E8E"})," ",(0,i.jsx)(e.code,{children:"storage_flood_stage_usage_percent"}),"\uFF0C",(0,i.jsx)(e.strong,{children:"\u5E76\u4E14"})," \u78C1\u76D8\u7A7A\u95F4\u5269\u4F59\u5927\u5C0F",(0,i.jsx)(e.strong,{children:"\u5C0F\u4E8E"})," ",(0,i.jsx)(e.code,{children:"storage_flood_stage_left_capacity_bytes"})," \u65F6\uFF0C\u8BE5\u78C1\u76D8\u4E0A\u7684\u4EE5\u4E0B\u64CD\u4F5C\u4F1A\u88AB\u7981\u6B62\uFF1A"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Base/Cumulative Compaction\u3002"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6570\u636E\u5199\u5165\u3002\u5305\u62EC\u5404\u79CD\u5BFC\u5165\u64CD\u4F5C\u3002"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Clone Task\u3002\u901A\u5E38\u53D1\u751F\u4E8E\u526F\u672C\u4FEE\u590D\u6216\u5747\u8861\u65F6\u3002"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Push Task\u3002\u53D1\u751F\u5728 Hadoop \u5BFC\u5165\u7684 Loading \u9636\u6BB5\uFF0C\u4E0B\u8F7D\u6587\u4EF6\u3002"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Alter Task\u3002Schema Change \u6216 Rollup \u4EFB\u52A1\u3002"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Download Task\u3002\u6062\u590D\u64CD\u4F5C\u7684 Downloading \u9636\u6BB5\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"\u78C1\u76D8\u7A7A\u95F4\u91CA\u653E",children:"\u78C1\u76D8\u7A7A\u95F4\u91CA\u653E"}),"\n",(0,i.jsx)(e.p,{children:"\u5F53\u78C1\u76D8\u7A7A\u95F4\u9AD8\u4E8E\u9AD8\u6C34\u4F4D\u751A\u81F3\u5371\u9669\u6C34\u4F4D\u540E\uFF0C\u5F88\u591A\u64CD\u4F5C\u90FD\u4F1A\u88AB\u7981\u6B62\u3002\u6B64\u65F6\u53EF\u4EE5\u5C1D\u8BD5\u901A\u8FC7\u4EE5\u4E0B\u65B9\u5F0F\u51CF\u5C11\u78C1\u76D8\u4F7F\u7528\u7387\uFF0C\u6062\u590D\u7CFB\u7EDF\u3002"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5220\u9664\u8868\u6216\u5206\u533A"}),"\n",(0,i.jsxs)(e.p,{children:["\u901A\u8FC7\u5220\u9664\u8868\u6216\u5206\u533A\u7684\u65B9\u5F0F\uFF0C\u80FD\u591F\u5FEB\u901F\u964D\u4F4E\u78C1\u76D8\u7A7A\u95F4\u4F7F\u7528\u7387\uFF0C\u6062\u590D\u96C6\u7FA4\u3002",(0,i.jsxs)(e.strong,{children:["\u6CE8\u610F\uFF1A\u53EA\u6709 ",(0,i.jsx)(e.code,{children:"DROP"})," \u64CD\u4F5C\u53EF\u4EE5\u8FBE\u5230\u5FEB\u901F\u964D\u4F4E\u78C1\u76D8\u7A7A\u95F4\u4F7F\u7528\u7387\u7684\u76EE\u7684\uFF0C",(0,i.jsx)(e.code,{children:"DELETE"})," \u64CD\u4F5C\u4E0D\u53EF\u4EE5\u3002"]})]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-text",children:"DROP TABLE tbl;\nALTER TABLE tbl DROP PARTITION p1;\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6269\u5BB9 BE"}),"\n",(0,i.jsx)(e.p,{children:"\u6269\u5BB9\u540E\uFF0C\u6570\u636E\u5206\u7247\u4F1A\u81EA\u52A8\u5747\u8861\u5230\u78C1\u76D8\u4F7F\u7528\u7387\u8F83\u4F4E\u7684 BE \u8282\u70B9\u4E0A\u3002\u6269\u5BB9\u64CD\u4F5C\u4F1A\u6839\u636E\u6570\u636E\u91CF\u53CA\u8282\u70B9\u6570\u91CF\u4E0D\u540C\uFF0C\u5728\u6570\u5C0F\u65F6\u6216\u6570\u5929\u540E\u4F7F\u96C6\u7FA4\u5230\u8FBE\u5747\u8861\u72B6\u6001\u3002"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4FEE\u6539\u8868\u6216\u5206\u533A\u7684\u526F\u672C"}),"\n",(0,i.jsx)(e.p,{children:"\u53EF\u4EE5\u5C06\u8868\u6216\u5206\u533A\u7684\u526F\u672C\u6570\u964D\u4F4E\u3002\u6BD4\u5982\u9ED8\u8BA4 3 \u526F\u672C\u53EF\u4EE5\u964D\u4F4E\u4E3A 2 \u526F\u672C\u3002\u8BE5\u65B9\u6CD5\u867D\u7136\u964D\u4F4E\u4E86\u6570\u636E\u7684\u53EF\u9760\u6027\uFF0C\u4F46\u662F\u80FD\u591F\u5FEB\u901F\u7684\u964D\u4F4E\u78C1\u76D8\u4F7F\u7528\u7387\uFF0C\u4F7F\u96C6\u7FA4\u6062\u590D\u6B63\u5E38\u3002\u8BE5\u65B9\u6CD5\u901A\u5E38\u7528\u4E8E\u7D27\u6025\u6062\u590D\u7CFB\u7EDF\u3002\u8BF7\u5728\u6062\u590D\u540E\uFF0C\u901A\u8FC7\u6269\u5BB9\u6216\u5220\u9664\u6570\u636E\u7B49\u65B9\u5F0F\uFF0C\u964D\u4F4E\u78C1\u76D8\u4F7F\u7528\u7387\u540E\uFF0C\u5C06\u526F\u672C\u6570\u6062\u590D\u4E3A 3\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u4FEE\u6539\u526F\u672C\u64CD\u4F5C\u4E3A\u77AC\u95F4\u751F\u6548\uFF0C\u540E\u53F0\u4F1A\u81EA\u52A8\u5F02\u6B65\u7684\u5220\u9664\u591A\u4F59\u7684\u526F\u672C\u3002"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-text",children:'ALTER TABLE tbl MODIFY PARTITION p1 SET("replication_num" = "2");\n'})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5220\u9664\u591A\u4F59\u6587\u4EF6"}),"\n",(0,i.jsx)(e.p,{children:"\u5F53 BE \u8FDB\u7A0B\u5DF2\u7ECF\u56E0\u4E3A\u78C1\u76D8\u5199\u6EE1\u800C\u6302\u6389\u5E76\u65E0\u6CD5\u542F\u52A8\u65F6\uFF08\u6B64\u73B0\u8C61\u53EF\u80FD\u56E0 FE \u6216 BE \u68C0\u6D4B\u4E0D\u53CA\u65F6\u800C\u53D1\u751F\uFF09\u3002\u9700\u8981\u901A\u8FC7\u5220\u9664\u6570\u636E\u76EE\u5F55\u4E0B\u7684\u4E00\u4E9B\u4E34\u65F6\u6587\u4EF6\uFF0C\u4FDD\u8BC1 BE \u8FDB\u7A0B\u80FD\u591F\u542F\u52A8\u3002\u4EE5\u4E0B\u76EE\u5F55\u4E2D\u7684\u6587\u4EF6\u53EF\u4EE5\u76F4\u63A5\u5220\u9664\uFF1A"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"log/\uFF1A\u65E5\u5FD7\u76EE\u5F55\u4E0B\u7684\u65E5\u5FD7\u6587\u4EF6\u3002"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"snapshot/: \u5FEB\u7167\u76EE\u5F55\u4E0B\u7684\u5FEB\u7167\u6587\u4EF6\u3002"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"trash/\uFF1A\u56DE\u6536\u7AD9\u4E2D\u7684\u6587\u4EF6\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsxs)(e.strong,{children:["\u8FD9\u79CD\u64CD\u4F5C\u4F1A\u5BF9 ",(0,i.jsx)(e.a,{href:"/zh-CN/docs/2.0/admin-manual/data-admin/recyclebin",children:"\u4ECE BE \u56DE\u6536\u7AD9\u4E2D\u6062\u590D\u6570\u636E"})," \u4EA7\u751F\u5F71\u54CD\u3002"]})}),"\n",(0,i.jsxs)(e.p,{children:["\u5982\u679C BE \u8FD8\u80FD\u591F\u542F\u52A8\uFF0C\u5219\u53EF\u4EE5\u4F7F\u7528",(0,i.jsx)(e.code,{children:"ADMIN CLEAN TRASH ON(BackendHost:BackendHeartBeatPort);"}),"\u6765\u4E3B\u52A8\u6E05\u7406\u4E34\u65F6\u6587\u4EF6\uFF0C\u4F1A\u6E05\u7406 ",(0,i.jsx)(e.strong,{children:"\u6240\u6709"})," trash \u6587\u4EF6\u548C\u8FC7\u671F snapshot \u6587\u4EF6\uFF0C",(0,i.jsx)(e.strong,{children:"\u8FD9\u5C06\u5F71\u54CD\u4ECE\u56DE\u6536\u7AD9\u6062\u590D\u6570\u636E\u7684\u64CD\u4F5C"})," \u3002"]}),"\n",(0,i.jsxs)(e.p,{children:["\u5982\u679C\u4E0D\u624B\u52A8\u6267\u884C",(0,i.jsx)(e.code,{children:"ADMIN CLEAN TRASH"}),"\uFF0C\u7CFB\u7EDF\u4ECD\u5C06\u4F1A\u5728\u51E0\u5206\u949F\u81F3\u51E0\u5341\u5206\u949F\u5185\u81EA\u52A8\u6267\u884C\u6E05\u7406\uFF0C\u8FD9\u91CC\u5206\u4E3A\u4E24\u79CD\u60C5\u51B5\uFF1A"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u5982\u679C\u78C1\u76D8\u5360\u7528\u672A\u8FBE\u5230 ",(0,i.jsx)(e.strong,{children:"\u5371\u9669\u6C34\u4F4D (Flood Stage)"})," \u7684 90%\uFF0C\u5219\u4F1A\u6E05\u7406\u8FC7\u671F trash \u6587\u4EF6\u548C\u8FC7\u671F snapshot \u6587\u4EF6\uFF0C\u6B64\u65F6\u4F1A\u4FDD\u7559\u4E00\u4E9B\u8FD1\u671F\u6587\u4EF6\u800C\u4E0D\u5F71\u54CD\u6062\u590D\u6570\u636E\u3002"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u5982\u679C\u78C1\u76D8\u5360\u7528\u5DF2\u8FBE\u5230 ",(0,i.jsx)(e.strong,{children:"\u5371\u9669\u6C34\u4F4D (Flood Stage)"})," \u7684 90%\uFF0C\u5219\u4F1A\u6E05\u7406 ",(0,i.jsx)(e.strong,{children:"\u6240\u6709"})," trash \u6587\u4EF6\u548C\u8FC7\u671F snapshot \u6587\u4EF6\uFF0C ",(0,i.jsx)(e.strong,{children:"\u6B64\u65F6\u4F1A\u5F71\u54CD\u4ECE\u56DE\u6536\u7AD9\u6062\u590D\u6570\u636E\u7684\u64CD\u4F5C"})," \u3002\u81EA\u52A8\u6267\u884C\u7684\u65F6\u95F4\u95F4\u9694\u53EF\u4EE5\u901A\u8FC7\u914D\u7F6E\u9879\u4E2D\u7684",(0,i.jsx)(e.code,{children:"max_garbage_sweep_interval"}),"\u548C",(0,i.jsx)(e.code,{children:"min_garbage_sweep_interval"}),"\u66F4\u6539\u3002"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u51FA\u73B0\u7531\u4E8E\u7F3A\u5C11 trash \u6587\u4EF6\u800C\u5BFC\u81F4\u6062\u590D\u5931\u8D25\u7684\u60C5\u51B5\u65F6\uFF0C\u53EF\u80FD\u8FD4\u56DE\u5982\u4E0B\u7ED3\u679C\uFF1A"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-text",children:'{"status": "Fail","msg": "can find tablet path in trash"}\n'})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5220\u9664\u6570\u636E\u6587\u4EF6\uFF08\u5371\u9669\uFF01\uFF01\uFF01\uFF09"}),"\n",(0,i.jsxs)(e.p,{children:["\u5F53\u4EE5\u4E0A\u64CD\u4F5C\u90FD\u65E0\u6CD5\u91CA\u653E\u7A7A\u95F4\u65F6\uFF0C\u9700\u8981\u901A\u8FC7\u5220\u9664\u6570\u636E\u6587\u4EF6\u6765\u91CA\u653E\u7A7A\u95F4\u3002\u6570\u636E\u6587\u4EF6\u5728\u6307\u5B9A\u6570\u636E\u76EE\u5F55\u7684 ",(0,i.jsx)(e.code,{children:"data/"})," \u76EE\u5F55\u4E0B\u3002\u5220\u9664\u6570\u636E\u5206\u7247\uFF08Tablet\uFF09\u5FC5\u987B\u5148\u786E\u4FDD\u8BE5 Tablet \u81F3\u5C11\u6709\u4E00\u4E2A\u526F\u672C\u662F\u6B63\u5E38\u7684\uFF0C\u5426\u5219",(0,i.jsx)(e.strong,{children:"\u5220\u9664\u552F\u4E00\u526F\u672C\u4F1A\u5BFC\u81F4\u6570\u636E\u4E22\u5931"}),"\u3002\u5047\u8BBE\u6211\u4EEC\u8981\u5220\u9664 id \u4E3A 12345 \u7684 Tablet\uFF1A"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u627E\u5230 Tablet \u5BF9\u5E94\u7684\u76EE\u5F55\uFF0C\u901A\u5E38\u4F4D\u4E8E ",(0,i.jsx)(e.code,{children:"data/shard_id/tablet_id/"})," \u4E0B\u3002\u5982\uFF1A"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.code,{children:"data/0/12345/"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u8BB0\u5F55 tablet id \u548C schema hash\u3002\u5176\u4E2D schema hash \u4E3A\u4E0A\u4E00\u6B65\u76EE\u5F55\u7684\u4E0B\u4E00\u7EA7\u76EE\u5F55\u540D\u3002\u5982\u4E0B\u4E3A 352781111\uFF1A"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.code,{children:"data/0/12345/352781111"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5220\u9664\u6570\u636E\u76EE\u5F55\uFF1A"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.code,{children:"rm -rf data/0/12345/"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u5220\u9664 Tablet \u5143\u6570\u636E\uFF08\u5177\u4F53\u53C2\u8003 ",(0,i.jsx)(e.a,{href:"../trouble-shooting/tablet-meta-tool.md",children:"Tablet \u5143\u6570\u636E\u7BA1\u7406\u5DE5\u5177"}),"\uFF09"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.code,{children:"./lib/meta_tool --operation=delete_header --root_path=/path/to/root_path --tablet_id=12345 --schema_hash= 352781111"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]})]})}function h(n={}){let{wrapper:e}={...(0,r.a)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(o,{...n})}):o(n)}},250065:function(n,e,s){s.d(e,{Z:function(){return d},a:function(){return c}});var l=s(667294);let i={},r=l.createContext(i);function c(n){let e=l.useContext(r);return l.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:c(n.components),l.createElement(r.Provider,{value:e},n.children)}}}]);