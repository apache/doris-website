"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["148530"],{601691:function(e,n,s){s.r(n),s.d(n,{default:()=>j,frontMatter:()=>t,metadata:()=>i,assets:()=>h,toc:()=>o,contentTitle:()=>a});var i=JSON.parse('{"id":"lakehouse/catalogs/hive-catalog","title":"Hive Catalog","description":"\u901A\u8FC7\u8FDE\u63A5 Hive Metastore\uFF0C\u6216\u8005\u517C\u5BB9 Hive Metatore \u7684\u5143\u6570\u636E\u670D\u52A1\uFF0CDoris \u53EF\u4EE5\u81EA\u52A8\u83B7\u53D6 Hive \u7684\u5E93\u8868\u4FE1\u606F\uFF0C\u5E76\u8FDB\u884C\u6570\u636E\u67E5\u8BE2\u3002","source":"@site/i18n/zh-CN/docusaurus-plugin-content-docs/version-2.1/lakehouse/catalogs/hive-catalog.mdx","sourceDirName":"lakehouse/catalogs","slug":"/lakehouse/catalogs/hive-catalog","permalink":"/zh-CN/docs/2.1/lakehouse/catalogs/hive-catalog","draft":false,"unlisted":false,"tags":[],"version":"2.1","lastUpdatedAt":1770477659000,"frontMatter":{"title":"Hive Catalog","language":"zh-CN","description":"\u901A\u8FC7\u8FDE\u63A5 Hive Metastore\uFF0C\u6216\u8005\u517C\u5BB9 Hive Metatore \u7684\u5143\u6570\u636E\u670D\u52A1\uFF0CDoris \u53EF\u4EE5\u81EA\u52A8\u83B7\u53D6 Hive \u7684\u5E93\u8868\u4FE1\u606F\uFF0C\u5E76\u8FDB\u884C\u6570\u636E\u67E5\u8BE2\u3002"},"sidebar":"docs","previous":{"title":"\u6570\u636E\u76EE\u5F55\u6982\u8FF0","permalink":"/zh-CN/docs/2.1/lakehouse/catalog-overview"},"next":{"title":"Iceberg Catalog","permalink":"/zh-CN/docs/2.1/lakehouse/catalogs/iceberg-catalog"}}'),l=s("785893"),r=s("250065"),c=s("247902"),d=s("905525");let t={title:"Hive Catalog",language:"zh-CN",description:"\u901A\u8FC7\u8FDE\u63A5 Hive Metastore\uFF0C\u6216\u8005\u517C\u5BB9 Hive Metatore \u7684\u5143\u6570\u636E\u670D\u52A1\uFF0CDoris \u53EF\u4EE5\u81EA\u52A8\u83B7\u53D6 Hive \u7684\u5E93\u8868\u4FE1\u606F\uFF0C\u5E76\u8FDB\u884C\u6570\u636E\u67E5\u8BE2\u3002"},a=void 0,h={},o=[{value:"\u9002\u7528\u573A\u666F",id:"\u9002\u7528\u573A\u666F",level:2},{value:"\u914D\u7F6E Catalog",id:"\u914D\u7F6E-catalog",level:2},{value:"\u8BED\u6CD5",id:"\u8BED\u6CD5",level:3},{value:"\u652F\u6301\u7684 Hive \u7248\u672C",id:"\u652F\u6301\u7684-hive-\u7248\u672C",level:3},{value:"\u652F\u6301\u7684\u5143\u6570\u636E\u670D\u52A1",id:"\u652F\u6301\u7684\u5143\u6570\u636E\u670D\u52A1",level:3},{value:"\u652F\u6301\u7684\u5B58\u50A8\u7CFB\u7EDF",id:"\u652F\u6301\u7684\u5B58\u50A8\u7CFB\u7EDF",level:3},{value:"Hive Catalog \u529F\u80FD\u652F\u6301\u77E9\u9635",id:"hive-catalog-\u529F\u80FD\u652F\u6301\u77E9\u9635",level:3},{value:"\u652F\u6301\u7684\u6570\u636E\u683C\u5F0F",id:"\u652F\u6301\u7684\u6570\u636E\u683C\u5F0F",level:3},{value:"\u5217\u7C7B\u578B\u6620\u5C04",id:"\u5217\u7C7B\u578B\u6620\u5C04",level:2},{value:"\u57FA\u7840\u793A\u4F8B",id:"\u57FA\u7840\u793A\u4F8B",level:2},{value:"Hive Metastore",id:"hive-metastore",level:3},{value:"AWS Glue",id:"aws-glue",level:3},{value:"Aliyun DLF",id:"aliyun-dlf",level:3},{value:"\u67E5\u8BE2\u64CD\u4F5C",id:"\u67E5\u8BE2\u64CD\u4F5C",level:2},{value:"\u57FA\u7840\u67E5\u8BE2",id:"\u57FA\u7840\u67E5\u8BE2",level:3},{value:"\u67E5\u8BE2 Hive \u5206\u533A",id:"\u67E5\u8BE2-hive-\u5206\u533A",level:3},{value:"\u67E5\u8BE2 Hive \u4E8B\u52A1\u8868",id:"\u67E5\u8BE2-hive-\u4E8B\u52A1\u8868",level:3},{value:"\u67E5\u8BE2 Hive View",id:"\u67E5\u8BE2-hive-view",level:3},{value:"\u5199\u5165\u64CD\u4F5C",id:"\u5199\u5165\u64CD\u4F5C",level:2},{value:"INSERT INTO",id:"insert-into",level:3},{value:"INSERT OVERWRITE",id:"insert-overwrite",level:3},{value:"CTAS",id:"ctas",level:3},{value:"\u76F8\u5173\u53C2\u6570",id:"\u76F8\u5173\u53C2\u6570",level:3},{value:"\u5E93\u8868\u7BA1\u7406",id:"\u5E93\u8868\u7BA1\u7406",level:2},{value:"\u521B\u5EFA\u548C\u5220\u9664\u5E93",id:"\u521B\u5EFA\u548C\u5220\u9664\u5E93",level:3},{value:"\u521B\u5EFA\u548C\u5220\u9664\u8868",id:"\u521B\u5EFA\u548C\u5220\u9664\u8868",level:3},{value:"\u8BA2\u9605 Hive Metastore \u4E8B\u4EF6",id:"\u8BA2\u9605-hive-metastore-\u4E8B\u4EF6",level:2},{value:"\u9644\u5F55",id:"\u9644\u5F55",level:2},{value:"\u4E8B\u52A1\u673A\u5236",id:"\u4E8B\u52A1\u673A\u5236",level:3},{value:"\u5E76\u53D1\u5199\u5165\u673A\u5236",id:"\u5E76\u53D1\u5199\u5165\u673A\u5236",level:3},{value:"HDFS \u6587\u4EF6\u64CD\u4F5C",id:"hdfs-\u6587\u4EF6\u64CD\u4F5C",level:3},{value:"\u7248\u672C\u66F4\u65B0\u8BB0\u5F55",id:"\u7248\u672C\u66F4\u65B0\u8BB0\u5F55",level:3}];function x(e){let n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.a)(),...e.components},{Details:s}=n;return s||function(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.p,{children:"\u901A\u8FC7\u8FDE\u63A5 Hive Metastore\uFF0C\u6216\u8005\u517C\u5BB9 Hive Metatore \u7684\u5143\u6570\u636E\u670D\u52A1\uFF0CDoris \u53EF\u4EE5\u81EA\u52A8\u83B7\u53D6 Hive \u7684\u5E93\u8868\u4FE1\u606F\uFF0C\u5E76\u8FDB\u884C\u6570\u636E\u67E5\u8BE2\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u9664\u4E86 Hive \u5916\uFF0C\u5F88\u591A\u5176\u4ED6\u7CFB\u7EDF\u4E5F\u4F1A\u4F7F\u7528 Hive Metastore \u5B58\u50A8\u5143\u6570\u636E\u3002\u6240\u4EE5\u901A\u8FC7 Hive Catalog\uFF0C\u6211\u4EEC\u4E0D\u4EC5\u80FD\u8BBF\u95EE Hive \u8868\uFF0C\u4E5F\u80FD\u8BBF\u95EE\u4F7F\u7528 Hive Metastore \u4F5C\u4E3A\u5143\u6570\u636E\u5B58\u50A8\u7684\u5176\u4ED6\u8868\u683C\u5F0F\uFF0C\u5982 Iceberg\u3001Hudi \u7B49\u3002"}),"\n",(0,l.jsx)(n.h2,{id:"\u9002\u7528\u573A\u666F",children:"\u9002\u7528\u573A\u666F"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u573A\u666F"}),(0,l.jsx)(n.th,{children:"\u8BF4\u660E"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u67E5\u8BE2\u52A0\u901F"}),(0,l.jsx)(n.td,{children:"\u5229\u7528 Doris \u5206\u5E03\u5F0F\u8BA1\u7B97\u5F15\u64CE\uFF0C\u76F4\u63A5\u8BBF\u95EE Hive \u6570\u636E\u8FDB\u884C\u67E5\u8BE2\u52A0\u901F\u3002"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u6570\u636E\u96C6\u6210"}),(0,l.jsx)(n.td,{children:"\u8BFB\u53D6 Hive \u6570\u636E\u5E76\u5199\u5165\u5230 Doris \u5185\u8868\u3002\u6216\u901A\u8FC7 Doris \u8BA1\u7B97\u5F15\u64CE\u8FDB\u884C ZeroETL \u64CD\u4F5C\u3002"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u6570\u636E\u5199\u56DE"}),(0,l.jsx)(n.td,{children:"\u5C06\u4EFB\u610F Doris \u652F\u6301\u8BFB\u53D6\u7684\u6570\u636E\u6E90\u6570\u636E\u8FDB\u884C\u52A0\u5DE5\u540E\uFF0C\u5199\u56DE\u5230 Hive \u8868\u5B58\u50A8\u3002"})]})]})]}),"\n",(0,l.jsx)(n.h2,{id:"\u914D\u7F6E-catalog",children:"\u914D\u7F6E Catalog"}),"\n",(0,l.jsx)(n.h3,{id:"\u8BED\u6CD5",children:"\u8BED\u6CD5"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"CREATE CATALOG [IF NOT EXISTS] catalog_name PROPERTIES (\n    'type'='hms', -- required\n    'hive.metastore.type' = '<hive_metastore_type>', -- optional\n    'hive.version' = '<hive_version>', -- optional\n    'fs.defaultFS' = '<fs_defaultfs>', -- optional\n    {MetaStoreProperties},\n    {StorageProperties},\n    {HiveProperties},\n    {CommonProperties}\n);\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.code,{children:"<hive_metastore_type>"})}),"\n",(0,l.jsx)(n.p,{children:"\u6307\u5B9A Hive Metastore \u7684\u7C7B\u578B\u3002"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"hms"}),"\uFF1A\u6807\u51C6\u7684 Hive Metastore \u670D\u52A1\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"glue"}),"\uFF1A\u4F7F\u7528 Hive Metastore \u517C\u5BB9\u63A5\u53E3\u8BBF\u95EE AWS Glue \u5143\u6570\u636E\u670D\u52A1\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"dlf"}),"\uFF1A\u4F7F\u7528 Hive Metastore \u517C\u5BB9\u63A5\u53E3\u8BBF\u95EE\u963F\u91CC\u4E91 DLF \u5143\u6570\u636E\u670D\u52A1\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.code,{children:"<fs_defaultfs>"})}),"\n",(0,l.jsx)(n.p,{children:"\u5F53\u9700\u8981\u901A\u8FC7 Doris \u5199\u5165\u6570\u636E\u5230\u8FD9\u4E2A Hive Catalog \u4E2D\u8868\u65F6\uFF0C\u6B64\u53C2\u6570\u4E3A\u5FC5\u9009\u9879\u3002\u793A\u4F8B\uFF1A"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.code,{children:"'fs.defaultFS' = 'hdfs://namenode:port'"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.code,{children:"{MetaStoreProperties}"})}),"\n",(0,l.jsx)(n.p,{children:"MetaStoreProperties \u90E8\u5206\u7528\u4E8E\u586B\u5199 Metastore \u5143\u6570\u636E\u670D\u52A1\u8FDE\u63A5\u548C\u8BA4\u8BC1\u4FE1\u606F\u3002\u5177\u4F53\u53EF\u53C2\u9605\u3010\u652F\u6301\u7684\u5143\u6570\u636E\u670D\u52A1\u3011\u90E8\u5206\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.code,{children:"{StorageProperties}"})}),"\n",(0,l.jsx)(n.p,{children:"StorageProperties \u90E8\u5206\u7528\u4E8E\u586B\u5199\u5B58\u50A8\u7CFB\u7EDF\u76F8\u5173\u7684\u8FDE\u63A5\u548C\u8BA4\u8BC1\u4FE1\u606F\u3002\u5177\u4F53\u53EF\u53C2\u9605\u3010\u652F\u6301\u7684\u5B58\u50A8\u7CFB\u7EDF\u3011\u90E8\u5206\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.code,{children:"{HiveProperties}"})}),"\n",(0,l.jsx)(n.p,{children:"HiveProperties \u90E8\u5206\u7528\u4E8E\u586B\u5199\u548C Hive Catalog \u76F8\u5173\u7684\u5176\u4ED6\u53C2\u6570\u3002"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"get_schema_from_table"}),"\uFF1A\u9ED8\u8BA4\u4E3A false\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0CDoris \u4F1A\u4ECE Hive Metastore \u4E2D\u83B7\u53D6\u8868\u7684 Schema \u4FE1\u606F\u3002\u4F46\u67D0\u4E9B\u60C5\u51B5\u4E0B\u53EF\u80FD\u51FA\u73B0\u517C\u5BB9\u95EE\u9898\uFF0C\u5982\u9519\u8BEF ",(0,l.jsx)(n.code,{children:"Storage schema reading not supported"}),"\u3002\u6B64\u65F6\u53EF\u4EE5\u5C06\u8FD9\u4E2A\u53C2\u6570\u8BBE\u7F6E\u4E3A true\uFF0C\u5219\u4F1A\u4ECE Table \u5BF9\u8C61\u4E2D\u76F4\u63A5\u83B7\u53D6\u8868 Schema\u3002\u4F46\u6CE8\u610F\uFF0C\u8BE5\u65B9\u5F0F\u4F1A\u5BFC\u81F4\u5217\u7684\u9ED8\u8BA4\u503C\u4FE1\u606F\u88AB\u5FFD\u7565\u3002\u8BE5\u53C2\u6570\u81EA 2.1.10 \u548C 3.0.6 \u7248\u672C\u652F\u6301\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"hive.recursive_directories"}),"\uFF1A\u5728 list \u5206\u533A\u76EE\u5F55\u65F6\uFF0C\u662F\u5426\u9012\u5F52\u5B50\u76EE\u5F55\u3002\u8BE5\u53C2\u6570\u81EA 3.0.2 \u7248\u672C\u652F\u6301\u3002\u5728 4.0 \u7248\u672C\u4E4B\u524D\uFF0C\u8BE5\u53C2\u6570\u9ED8\u8BA4\u503C\u4E3A ",(0,l.jsx)(n.code,{children:"false"}),"\uFF0C\u4E4B\u540E\u7684\u7248\u672C\uFF0C\u8BE5\u9ED8\u8BA4\u503C\u4E3A ",(0,l.jsx)(n.code,{children:"true"}),"\u3002\u67D0\u4E9B Hive \u5916\u8868\u7684\u5206\u533A\u8DEF\u5F84\u53EF\u80FD\u548C\u8868\u7ED3\u6784\u4E2D\u7684\u5206\u533A\u4FE1\u606F\u4E0D\u5339\u914D\uFF0C\u9700\u8981\u5C06\u8FD9\u4E2A\u53C2\u6570\u8BBE\u4E3A ",(0,l.jsx)(n.code,{children:"true"})," \u4EE5\u4FBF\u83B7\u53D6\u5B50\u76EE\u5F55\u4E0B\u7684\u6570\u636E\u6587\u4EF6\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"hive.ignore_absent_partitions"}),"\uFF1A\u662F\u5426\u5FFD\u7565\u4E0D\u5B58\u5728\u7684\u5206\u533A\u3002\u9ED8\u8BA4\u4E3A ",(0,l.jsx)(n.code,{children:"true"}),"\u3002\u5982\u679C\u8BBE\u4E3A ",(0,l.jsx)(n.code,{children:"false"}),"\uFF0C\u5F53\u9047\u5230\u4E0D\u5B58\u5728\u7684\u5206\u533A\u65F6\uFF0C\u67E5\u8BE2\u4F1A\u62A5\u9519\u3002\u8BE5\u53C2\u6570\u81EA 3.0.2 \u7248\u672C\u652F\u6301\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.code,{children:"{CommonProperties}"})}),"\n",(0,l.jsxs)(n.p,{children:["CommonProperties \u90E8\u5206\u7528\u4E8E\u586B\u5199\u901A\u7528\u5C5E\u6027\u3002\u8BF7\u53C2\u9605",(0,l.jsx)(n.a,{href:"/zh-CN/docs/2.1/lakehouse/catalog-overview",children:" \u6570\u636E\u76EE\u5F55\u6982\u8FF0 "}),"\u4E2D\u3010\u901A\u7528\u5C5E\u6027\u3011\u90E8\u5206\u3002"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"\u652F\u6301\u7684-hive-\u7248\u672C",children:"\u652F\u6301\u7684 Hive \u7248\u672C"}),"\n",(0,l.jsx)(n.p,{children:"\u652F\u6301 Hive 1.x\uFF0C2.x\uFF0C3.x\uFF0C4.x\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u5176\u4E2D Hive \u4E8B\u52A1\u8868\u652F\u6301 3.x \u4E4B\u540E\u7684\u7248\u672C\uFF0C\u8BE6\u60C5\u53C2\u9605\u3010Hive \u4E8B\u52A1\u8868\u3011\u7AE0\u8282\u3002"}),"\n",(0,l.jsx)(n.h3,{id:"\u652F\u6301\u7684\u5143\u6570\u636E\u670D\u52A1",children:"\u652F\u6301\u7684\u5143\u6570\u636E\u670D\u52A1"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"/zh-CN/docs/2.1/lakehouse/metastores/hive-metastore",children:"Hive Metastore"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"/zh-CN/docs/2.1/lakehouse/metastores/aws-glue",children:"AWS Glue"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"/zh-CN/docs/2.1/lakehouse/metastores/aliyun-dlf",children:"Aliyun DLF "})}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"\u6CE8\u610F\uFF1A\u4E0D\u540C Doris \u7248\u672C\u6240\u652F\u6301\u7684\u670D\u52A1\u7C7B\u578B\u548C\u53C2\u6570\u7565\u6709\u533A\u522B\uFF0C\u8BF7\u53C2\u8003\u3010\u57FA\u7840\u793A\u4F8B\u3011\u7AE0\u8282\u3002"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"\u652F\u6301\u7684\u5B58\u50A8\u7CFB\u7EDF",children:"\u652F\u6301\u7684\u5B58\u50A8\u7CFB\u7EDF"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"/zh-CN/docs/2.1/lakehouse/storages/hdfs",children:"HDFS"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"/zh-CN/docs/2.1/lakehouse/storages/s3",children:"AWS S3"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"/zh-CN/docs/2.1/lakehouse/storages/gcs",children:"Google Cloud Storage"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"/zh-CN/docs/2.1/lakehouse/storages/azure-blob",children:"Azure Blob"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"/zh-CN/docs/2.1/lakehouse/storages/aliyun-oss",children:"\u963F\u91CC\u4E91 OSS"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"/zh-CN/docs/2.1/lakehouse/storages/tencent-cos",children:"\u817E\u8BAF\u4E91 COS"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"/zh-CN/docs/2.1/lakehouse/storages/huawei-obs",children:"\u534E\u4E3A\u4E91 OBS"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"/zh-CN/docs/2.1/lakehouse/storages/minio",children:"MINIO"})}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsxs)(n.p,{children:["\u5982\u679C\u9700\u8981\u901A\u8FC7 Doris \u521B\u5EFA Hive \u8868\u5E76\u5199\u5165\u6570\u636E\uFF0C\u9700\u8981\u5728 Catalog \u5C5E\u6027\u4E2D\u663E\u5F0F\u589E\u52A0 ",(0,l.jsx)(n.code,{children:"fs.defaultFS"})," \u5C5E\u6027\u3002\u5982\u679C\u521B\u5EFA Catalog \u4EC5\u7528\u4E8E\u67E5\u8BE2\uFF0C\u5219\u8BE5\u53C2\u6570\u53EF\u4EE5\u7701\u7565\u3002"]}),"\n",(0,l.jsx)(n.p,{children:"\u4E0D\u540C Doris \u7248\u672C\u6240\u652F\u6301\u7684\u670D\u52A1\u7C7B\u578B\u548C\u53C2\u6570\u7565\u6709\u533A\u522B\uFF0C\u8BF7\u53C2\u8003\u3010\u57FA\u7840\u793A\u4F8B\u3011\u7AE0\u8282\u3002"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"hive-catalog-\u529F\u80FD\u652F\u6301\u77E9\u9635",children:"Hive Catalog \u529F\u80FD\u652F\u6301\u77E9\u9635"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u5143\u6570\u636E\u670D\u52A1"}),(0,l.jsx)(n.th,{children:"\u8868\u67E5\u8BE2"}),(0,l.jsx)(n.th,{children:"\u89C6\u56FE\u67E5\u8BE2"}),(0,l.jsx)(n.th,{children:"DDL \u64CD\u4F5C"}),(0,l.jsx)(n.th,{children:"\u6570\u636E\u5199\u56DE"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"Hive"}),(0,l.jsx)(n.td,{children:"\u2705"}),(0,l.jsx)(n.td,{children:"\u2705"}),(0,l.jsx)(n.td,{children:"\u2705"}),(0,l.jsx)(n.td,{children:"\u2705"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"AWS Glue"}),(0,l.jsx)(n.td,{children:"\u2705"}),(0,l.jsx)(n.td,{children:"\u2705"}),(0,l.jsx)(n.td,{children:"\u274C"}),(0,l.jsx)(n.td,{children:"\u274C"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"DLF"}),(0,l.jsx)(n.td,{children:"\u2705"}),(0,l.jsx)(n.td,{children:"\u2705"}),(0,l.jsx)(n.td,{children:"\u2705"}),(0,l.jsx)(n.td,{children:"\u2705"})]})]})]}),"\n",(0,l.jsx)(n.h3,{id:"\u652F\u6301\u7684\u6570\u636E\u683C\u5F0F",children:"\u652F\u6301\u7684\u6570\u636E\u683C\u5F0F"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Hive"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"/zh-CN/docs/2.1/lakehouse/file-formats/parquet",children:"Parquet"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"/zh-CN/docs/2.1/lakehouse/file-formats/orc",children:"ORC"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"/zh-CN/docs/2.1/lakehouse/file-formats/text",children:"Text/CSV/JSON"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Hudi"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"/zh-CN/docs/2.1/lakehouse/file-formats/parquet",children:"Parquet"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"/zh-CN/docs/2.1/lakehouse/file-formats/orc",children:"ORC"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Iceberg"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"/zh-CN/docs/2.1/lakehouse/file-formats/parquet",children:"Parquet"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"/zh-CN/docs/2.1/lakehouse/file-formats/orc",children:"ORC"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"\u5217\u7C7B\u578B\u6620\u5C04",children:"\u5217\u7C7B\u578B\u6620\u5C04"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"Hive Type"}),(0,l.jsx)(n.th,{children:"Doris Type"}),(0,l.jsx)(n.th,{children:"Comment"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"boolean"}),(0,l.jsx)(n.td,{children:"boolean"}),(0,l.jsx)(n.td,{})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"tinyint"}),(0,l.jsx)(n.td,{children:"tinyint"}),(0,l.jsx)(n.td,{})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"smallint"}),(0,l.jsx)(n.td,{children:"smallint"}),(0,l.jsx)(n.td,{})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"int"}),(0,l.jsx)(n.td,{children:"int"}),(0,l.jsx)(n.td,{})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"bigint"}),(0,l.jsx)(n.td,{children:"bigint"}),(0,l.jsx)(n.td,{})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"date"}),(0,l.jsx)(n.td,{children:"date"}),(0,l.jsx)(n.td,{})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"timestamp"}),(0,l.jsx)(n.td,{children:"datetime(6)"}),(0,l.jsx)(n.td,{children:"\u56FA\u5B9A\u6620\u5C04\u5230\u7CBE\u5EA6\u4E3A 6 \u7684 datetime"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"float"}),(0,l.jsx)(n.td,{children:"float"}),(0,l.jsx)(n.td,{})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"double"}),(0,l.jsx)(n.td,{children:"double"}),(0,l.jsx)(n.td,{})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"decimal(P, S)"}),(0,l.jsx)(n.td,{children:"decimal(P, S)"}),(0,l.jsx)(n.td,{children:"\u5982\u679C\u672A\u6307\u5B9A\u7CBE\u5EA6\uFF0C\u9ED8\u8BA4\u4E3A decimal(9, 0)"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"char(N)"}),(0,l.jsx)(n.td,{children:"char(N)"}),(0,l.jsx)(n.td,{})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"varchar(N)"}),(0,l.jsx)(n.td,{children:"varchar(N)"}),(0,l.jsx)(n.td,{})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"string"}),(0,l.jsx)(n.td,{children:"string"}),(0,l.jsx)(n.td,{})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"binary"}),(0,l.jsx)(n.td,{children:"string/varbinary"}),(0,l.jsxs)(n.td,{children:["\u7531 properties \u4E2D ",(0,l.jsx)(n.code,{children:"enable.mapping.varbinary"})," (4.0.2 \u540E\u5F00\u59CB\u652F\u6301) \u5C5E\u6027\u63A7\u5236\u3002\u9ED8\u8BA4\u4E3A ",(0,l.jsx)(n.code,{children:"false"}),", \u5219\u6620\u5C04\u5230 ",(0,l.jsx)(n.code,{children:"string"}),"; \u4E3A ",(0,l.jsx)(n.code,{children:"true"})," \u65F6\uFF0C\u5219\u6620\u5C04\u5230 ",(0,l.jsx)(n.code,{children:"varbinary"})," \u7C7B\u578B\u3002"]})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"array"}),(0,l.jsx)(n.td,{children:"array"}),(0,l.jsx)(n.td,{})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"map"}),(0,l.jsx)(n.td,{children:"map"}),(0,l.jsx)(n.td,{})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"struct"}),(0,l.jsx)(n.td,{children:"struct"}),(0,l.jsx)(n.td,{})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"other"}),(0,l.jsx)(n.td,{children:"unsupported"}),(0,l.jsx)(n.td,{})]})]})]}),"\n",(0,l.jsx)(n.h2,{id:"\u57FA\u7840\u793A\u4F8B",children:"\u57FA\u7840\u793A\u4F8B"}),"\n",(0,l.jsx)(n.h3,{id:"hive-metastore",children:"Hive Metastore"}),"\n",(0,l.jsxs)(s,{children:[(0,l.jsx)("summary",{children:"3.1+ \u7248\u672C"}),(0,l.jsxs)(c.Z,{children:[(0,l.jsxs)(d.Z,{value:"HDFS",label:"HDFS",default:!0,children:[(0,l.jsx)(n.p,{children:"\u8BBF\u95EE\u672A\u5F00\u542F Kerberos \u8BA4\u8BC1\u7684 HMS \u548C HDFS \u670D\u52A1"}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"CREATE CATALOG hive_hms_hdfs_test_catalog PROPERTIES (\n    'type' = 'hms',\n    'hive.metastore.uris' = 'thrift://127.0.0.1:9383',\n    'fs.defaultFS' = 'hdfs://127.0.0.1:8520',\n    'hadoop.username' = 'doris'\n);\n"})}),(0,l.jsx)(n.p,{children:"\u8BBF\u95EE\u5F00\u542F Kerberos \u8BA4\u8BC1\u7684 HMS \u548C HDFS \u670D\u52A1"}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"CREATE CATALOG hive_hms_hdfs_kerberos_test_catalog PROPERTIES (\n    'type' = 'hms',\n    'hive.metastore.uris' = 'thrift://127.0.0.1:9583',\n    'hive.metastore.client.principal' = 'hive/presto-master.docker.cluster@LABS.TERADATA.COM',\n    'hive.metastore.client.keytab' = '/keytabs/hive-presto-master.keytab',\n    'hive.metastore.service.principal' = 'hive/hadoop-master@LABS.TERADATA.COM',\n    'hive.metastore.sasl.enabled ' = 'true',\n    'hive.metastore.authentication.type' = 'kerberos',\n    'fs.defaultFS' = 'hdfs://127.0.0.1:8520',\n    'hadoop.security.auth_to_local' = 'RULE:[2:\\$1@\\$0](.*@LABS.TERADATA.COM)s/@.*//\n    RULE:[2:\\$1@\\$0](.*@OTHERLABS.TERADATA.COM)s/@.*//\n    RULE:[2:\\$1@\\$0](.*@OTHERREALM.COM)s/@.*//\n    DEFAULT',\n    'hadoop.security.authentication' = 'kerberos',\n    'hadoop.kerberos.principal' = 'hive/presto-master.docker.cluster@LABS.TERADATA.COM',\n    'hadoop.kerberos.keytab' = '/keytabs/hive-presto-master.keytab'\n);\n"})})]}),(0,l.jsx)(d.Z,{value:"ViewFs",label:"ViewFs",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"CREATE CATALOG hive_viewfs PROPERTIES (\n    'type' = 'hms',\n    'hive.metastore.uris' = 'thrift://172.0.0.1:9083',\n    'fs.defaultFS' = 'viewfs://your-cluster',\n    'fs.viewfs.mounttable.your-cluster.link./ns1' = 'hdfs://your-nameservice/',\n    'fs.viewfs.mounttable.your-cluster.homedir' = '/ns1',\n    'dfs.nameservices' = 'your-nameservice',\n    'dfs.ha.namenodes.your-nameservice' = 'nn1,nn2',\n    'dfs.namenode.rpc-address.your-nameservice.nn1' = '172.21.0.2:8088',\n    'dfs.namenode.rpc-address.your-nameservice.nn2' = '172.21.0.3:8088',\n    'dfs.client.failover.proxy.provider.your-nameservice' = 'org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider'\n);\n"})})}),(0,l.jsxs)(d.Z,{value:"S3",label:"S3",children:[(0,l.jsx)(n.p,{children:"\u8BBF\u95EE\u672A\u5F00\u542F Kerberos \u8BA4\u8BC1\u7684 HMS"}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"CREATE CATALOG hive_hms_s3_test_catalog PROPERTIES (\n    'type' = 'hms',\n    'hive.metastore.uris' = 'thrift://127.0.0.1:9383',\n    's3.region' = 'ap-east-1',\n    's3.access_key' = '<ak>',\n    's3.secret_key' = '<sk>'\n);\n"})}),(0,l.jsx)(n.p,{children:"\u4F7F\u7528 IAM Assumed Role \u7684\u65B9\u5F0F\u83B7\u53D6 S3 \u8BBF\u95EE\u51ED\u8BC1 (3.1.2+)"}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"CREATE CATALOG hive_hms_on_s3_iamrole PROPERTIES (\n    'type' = 'hms',\n    'hive.metastore.uris' = 'thrift://127.0.0.1:9383',\n    's3.region'   = 'us-east-1',\n    's3.role_arn' = 'arn:aws:iam::543815668950:role/role'\n);\n"})})]}),(0,l.jsxs)(d.Z,{value:"OSS",label:"OSS",children:[(0,l.jsx)(n.p,{children:"\u8BBF\u95EE\u672A\u5F00\u542F Kerberos \u8BA4\u8BC1\u7684 HMS"}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"CREATE CATALOG hive_hms_on_oss_catalog PROPERTIES (\n    'type' = 'hms',\n    'hive.metastore.uris' = 'thrift://127.0.0.1:9383',\n    'oss.region' = 'cn-beijing',\n    'oss.endpoint' = 'oss-cn-beijing.aliyuncs.com',\n    'oss.access_key' = '<ak>',\n    'oss.secret_key' = '<sk>'\n);\n"})}),(0,l.jsx)(n.p,{children:"\u8BBF\u95EE\u5F00\u542F Kerberos \u8BA4\u8BC1\u7684 HMS"}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"CREATE CATALOG hive_hms_on_oss_kerberos_old_catalog PROPERTIES (\n    'type' = 'hms',\n    'hive.metastore.uris' = 'thrift://127.0.0.1:9583',\n    'hive.metastore.client.principal' = 'hive/presto-master.docker.cluster@LABS.TERADATA.COM',\n    'hive.metastore.client.keytab' = '/keytabs/hive-presto-master.keytab',\n    'hive.metastore.service.principal' = 'hive/hadoop-master@LABS.TERADATA.COM',\n    'hive.metastore.sasl.enabled ' = 'true',\n    'hive.metastore.authentication.type' = 'kerberos',\n    'hadoop.security.auth_to_local' = 'RULE:[2:\\$1@\\$0](.*@LABS.TERADATA.COM)s/@.*//\n    RULE:[2:\\$1@\\$0](.*@OTHERLABS.TERADATA.COM)s/@.*//\n    RULE:[2:\\$1@\\$0](.*@OTHERREALM.COM)s/@.*//\n    DEFAULT',\n    'oss.region' = 'cn-beijing',\n    'oss.endpoint' = 'oss-cn-beijing.aliyuncs.com',\n    'oss.access_key' = '<ak>',\n    'oss.secret_key' = '<sk>'\n);\n"})})]}),(0,l.jsxs)(d.Z,{value:"COS",label:"COS",children:[(0,l.jsx)(n.p,{children:"\u8BBF\u95EE\u672A\u5F00\u542F Kerberos \u8BA4\u8BC1\u7684 HMS"}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"CREATE CATALOG hive_hms_cos_test_region_catalog PROPERTIES (\n    'type' = 'hms',\n    'hive.metastore.uris' = 'thrift://127.0.0.1:9383',\n    'cos.region' = 'ap-beijing',\n    'cos.endpoint' = 'cos.ap-beijing.myqcloud.com',\n    'cos.access_key' = '<ak>',\n    'cos.secret_key' = '<sk>'\n);\n"})}),(0,l.jsx)(n.p,{children:"\u8BBF\u95EE\u5F00\u542F Kerberos \u8BA4\u8BC1\u7684 HMS"}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"CREATE CATALOG hive_hms_on_cos_kerberos_new_catalog PROPERTIES (\n    'type' = 'hms',\n    'hive.metastore.uris' = 'thrift://127.0.0.1:9583',\n    'hive.metastore.client.principal' = 'hive/presto-master.docker.cluster@LABS.TERADATA.COM',\n    'hive.metastore.client.keytab' = '/keytabs/hive-presto-master.keytab',\n    'hive.metastore.service.principal' = 'hive/hadoop-master@LABS.TERADATA.COM',\n    'hive.metastore.sasl.enabled ' = 'true',\n    'hive.metastore.authentication.type' = 'kerberos',\n    'hadoop.security.auth_to_local' = 'RULE:[2:\\$1@\\$0](.*@LABS.TERADATA.COM)s/@.*//\n    RULE:[2:\\$1@\\$0](.*@OTHERLABS.TERADATA.COM)s/@.*//\n    RULE:[2:\\$1@\\$0](.*@OTHERREALM.COM)s/@.*//\n    DEFAULT',\n    'cos.region' = 'ap-beijing',\n    'cos.endpoint' = 'cos.ap-beijing.myqcloud.com',\n    'cos.access_key' = '<ak>',\n    'cos.secret_key' = '<sk>'\n);\n"})})]}),(0,l.jsxs)(d.Z,{value:"OBS",label:"OBS",children:[(0,l.jsx)(n.p,{children:"\u8BBF\u95EE\u672A\u5F00\u542F Kerberos \u8BA4\u8BC1\u7684 HMS"}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"CREATE CATALOG test_hive_on_hms_obs_catalog PROPERTIES (\n    'type' = 'hms',\n    'hive.metastore.uris' = 'thrift://127.0.0.1:9383',\n    'obs.region' = 'cn-north-4',\n    'obs.endpoint' = 'obs.cn-north-4.myhuaweicloud.com',\n    'cos.access_key' = '<ak>',\n    'cos.secret_key' = '<sk>'\n);\n"})}),(0,l.jsx)(n.p,{children:"\u8BBF\u95EE\u5F00\u542F Kerberos \u8BA4\u8BC1\u7684 HMS"}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"CREATE CATALOG hive_hms_on_obs_kerberos_new_catalog PROPERTIES (\n    'type' = 'hms',\n    'iceberg.catalog.type' = 'hms',\n    'hive.metastore.uris' = 'thrift://127.0.0.1:9583',\n    'hive.metastore.service.principal' = 'hive/hadoop-master@LABS.TERADATA.COM',\n    'hive.metastore.sasl.enabled' = 'true',\n    'hive.metastore.client.principal' = 'hive/presto-master.docker.cluster@LABS.TERADATA.COM',\n    'hive.metastore.client.keytab' = '/keytabs/hive-presto-master.keytab',\n    'hive.metastore.authentication.type' = 'kerberos',\n    'hadoop.security.auth_to_local' = 'RULE:[2:\\$1@\\$0](.*@LABS.TERADATA.COM)s/@.*//\n    RULE:[2:\\$1@\\$0](.*@OTHERLABS.TERADATA.COM)s/@.*//\n    RULE:[2:\\$1@\\$0](.*@OTHERREALM.COM)s/@.*//\n    DEFAULT',\n    'obs.region' = 'cn-north-4',\n    'obs.endpoint' = 'obs.cn-north-4.myhuaweicloud.com',\n    'obs.access_key' = '<ak>',\n    'obs.secret_key' = '<sk>'\n);\n"})})]}),(0,l.jsxs)(d.Z,{value:"GCS",label:"GCS",children:[(0,l.jsx)(n.p,{children:"\u8BBF\u95EE\u672A\u5F00\u542F Kerberos \u8BA4\u8BC1\u7684 HMS"}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"CREATE CATALOG `hive_hms_on_gcs_new_catalog` PROPERTIES (\n    'type' = 'hms',\n    'hive.metastore.uris' = 'thrift://127.0.0.1:9383',\n    'gs.access_key' = '<ak>',\n    'gs.secret_key' = '<sk>',\n    'fs.gcs.support'='true'\n);\n"})})]}),(0,l.jsxs)(d.Z,{value:"Azure Blob",label:"Azure Blob",children:[(0,l.jsx)(n.p,{children:"Supported since 3.1.3"}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"CREATE CATALOG `hive_hms_on_azure_blob_new_catalog` PROPERTIES (\n    'type' = 'hms',\n    'hive.metastore.uris' = 'thrift://127.0.0.1:9383',\n    'azure.account_name' = '<account_name>',\n    'azure.account_key' = '<account_key>',\n    'azure.endpoint' = 'https://<account_name>.blob.core.windows.net',\n    'fs.azure.support'='true'\n);\n"})})]}),(0,l.jsx)(d.Z,{value:"MinIO",label:"MinIO",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"CREATE CATALOG test_hive_on_hms_minio_catalog PROPERTIES (\n    'type' = 'hms',\n    'hive.metastore.uris' = 'thrift://127.0.0.1:9383',\n    'fs.minio.support' = 'true',\n    'minio.use_path_style' = 'true',\n    'minio.endpoint' = 'http://127.0.0.1:19001',\n    'minio.access_key' = '<ak>',\n    'minio.secret_key' = '<sk>'\n);\n"})})})]})]}),"\n",(0,l.jsxs)(s,{children:[(0,l.jsx)("summary",{children:"2.1 & 3.0 \u7248\u672C"}),(0,l.jsxs)(c.Z,{children:[(0,l.jsxs)(d.Z,{value:"HDFS",label:"HDFS",default:!0,children:[(0,l.jsx)(n.p,{children:"\u8BBF\u95EE\u672A\u5F00\u542F Kerberos \u8BA4\u8BC1\u7684 HMS"}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"CREATE CATALOG hive_hms_hdfs_test_catalog PROPERTIES (\n    'type' = 'hms',\n    'hive.metastore.uris' = 'thrift://127.0.0.1:9383',\n    'hadoop.username' = 'doris',\n    'fs.defaultFS' = 'hdfs://127.0.0.1:8320'\n);\n\n"})}),(0,l.jsx)(n.p,{children:"\u8BBF\u95EE\u5F00\u542F Kerberos \u8BA4\u8BC1\u7684 HMS"}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"CREATE CATALOG test_two_hive_kerberos PROPERTIES (\n    'type' = 'hms',\n    'hive.metastore.uris' = 'thrift://127.0.0.1:9583',\n    'hive.metastore.sasl.enabled ' = 'true',\n    'hive.metastore.kerberos.principal' = 'hive/hadoop-master@LABS.TERADATA.COM',\n    'fs.defaultFS' = 'hdfs://127.0.0.1:8520',\n    'hadoop.kerberos.min.seconds.before.relogin' = '5',\n    'hadoop.security.authentication' = 'kerberos',\n    'hadoop.kerberos.principal' = 'hive/presto-master.docker.cluster@LABS.TERADATA.COM',\n    'hadoop.kerberos.keytab' = '/keytabs/hive-presto-master.keytab',\n    'hadoop.security.auth_to_local' = 'RULE:[2:\\$1@\\$0](.*@LABS.TERADATA.COM)s/@.*//\n    RULE:[2:\\$1@\\$0](.*@OTHERLABS.TERADATA.COM)s/@.*//\n    RULE:[2:\\$1@\\$0](.*@OTHERREALM.COM)s/@.*//\n    DEFAULT'\n);\n"})})]}),(0,l.jsx)(d.Z,{value:"S3",label:"S3",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"CREATE CATALOG hms_on_s3_catalog PROPERTIES (\n    'type' = 'hms',\n    'hive.metastore.uris' = 'thrift://127.0.0.1:9383',\n    's3.region' = 'ap-east-1',\n    's3.endpoint' = 's3.ap-east-1.amazonaws.com',\n    's3.access_key' = '<ak>',\n    's3.secret_key' = '<sk>'\n);\n"})})}),(0,l.jsx)(d.Z,{value:"OSS",label:"OSS",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"CREATE CATALOG hive_hms_on_oss_catalog PROPERTIES (\n    'type' = 'hms',\n    'hive.metastore.uris' = 'thrift://127.0.0.1:9383',\n    'oss.region' = 'cn-beijing',\n    'oss.endpoint' = 'oss-cn-beijing.aliyuncs.com',\n    'oss.access_key' = '<ak>',\n    'oss.secret_key' = '<sk>'\n);\n"})})}),(0,l.jsx)(d.Z,{value:"COS",label:"COS",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"CREATE CATALOG hive_hms_cos_test_region_catalog PROPERTIES (\n    'type' = 'hms',\n    'hive.metastore.uris' = 'thrift://127.0.0.1:9383',\n    'cos.region' = 'ap-beijing',\n    'cos.endpoint' = 'cos.ap-beijing.myqcloud.com',\n    'cos.access_key' = '<ak>',\n    'cos.secret_key' = '<sk>'\n);\n"})})}),(0,l.jsx)(d.Z,{value:"OBS",label:"OBS",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"CREATE CATALOG test_hive_on_hms_obs_catalog PROPERTIES (\n    'type' = 'hms',\n    'hive.metastore.uris' = 'thrift://127.0.0.1:9383',\n    'obs.region' = 'cn-north-4',\n    'obs.endpoint' = 'obs.cn-north-4.myhuaweicloud.com',\n    'obs.access_key' = '<ak>',\n    'obs.secret_key' = '<sk>'\n);\n"})})}),(0,l.jsx)(d.Z,{value:"GCS",label:"GCS",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"CREATE CATALOG hive_hms_on_gcs_s3 PROPERTIES (\n    'type'='hms',\n    'hive.metastore.uris' = 'thrift://127.0.0.1:9383',\n    'warehouse' = 's3://bucket/gcs/paimon_warehouse',\n    'gs.access_key' = '<ak>',\n    'gs.secret_key' = '<sk>',\n    'gs.endpoint' = 'storage.googleapis.com'\n);\n"})})}),(0,l.jsx)(d.Z,{value:"MinIO",label:"MinIO",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"CREATE CATALOG test_hive_on_hms_minio_catalog PROPERTIES (\n    'type' = 'hms',\n    'hive.metastore.uris' = 'thrift://127.0.0.1:9383',\n    's3.endpoint' = 'http://127.0.0.1:19000',\n    's3.access_key' = '<ak>',\n    's3.secret_key' = '<sk>',\n    's3.path.style.access' = 'true'\n);\n"})})})]})]}),"\n",(0,l.jsx)(n.h3,{id:"aws-glue",children:"AWS Glue"}),"\n",(0,l.jsxs)(s,{children:[(0,l.jsx)("summary",{children:"3.1+ \u7248\u672C"}),(0,l.jsx)(c.Z,{children:(0,l.jsxs)(d.Z,{value:"S3",label:"S3",default:!0,children:[(0,l.jsx)(n.p,{children:"AWS Glue \u548C S3 \u5B58\u50A8\u670D\u52A1\u5171\u7528\u4E00\u5957\u8BA4\u8BC1\u4FE1\u606F\u3002"}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"CREATE CATALOG hive_glue_on_s3_catalog PROPERTIES (\n    'type' = 'hms',\n    'hive.metastore.type' = 'glue',\n    'glue.region' = 'ap-east-1',\n    'glue.endpoint' = 'https://glue.ap-east-1.amazonaws.com',\n    'glue.access_key' = '<ak>',\n    'glue.secret_key' = '<sk>'\n);\n"})}),(0,l.jsx)(n.p,{children:"Glue \u670D\u52A1\u7684\u8BA4\u8BC1\u4FE1\u606F\u548C S3 \u7684\u8BA4\u8BC1\u4FE1\u606F\u4E0D\u4E00\u81F4\u65F6\uFF0C\u53EF\u4EE5\u901A\u8FC7\u4EE5\u4E0B\u65B9\u5F0F\u5355\u72EC\u6307\u5B9A S3 \u7684\u8BA4\u8BC1\u4FE1\u606F\u3002"}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"CREATE CATALOG hive_glue_on_s3_catalog PROPERTIES (\n    'type' = 'hms',\n    'hive.metastore.type' = 'glue',\n    'glue.region' = 'ap-east-1',\n    'glue.endpoint' = 'https://glue.ap-east-1.amazonaws.com',\n    'glue.access_key' = '<ak>',\n    'glue.secret_key' = '<sk>',\n    's3.region' = 'ap-east-1',\n    's3.endpoint' = 'https://s3.ap-east-1.amazonaws.com/',\n    's3.access_key' = '<ak>',\n    's3.secret_key' = '<sk>'\n);\n"})}),(0,l.jsx)(n.p,{children:"\u4F7F\u7528 IAM Assumed Role \u7684\u65B9\u5F0F\u83B7\u53D6 S3 \u8BBF\u95EE\u51ED\u8BC1 (3.1.2+ \u652F\u6301)"}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"CREATE CATALOG `glue_hive_iamrole` PROPERTIES ( \n    'type' = 'hms',\n    'hive.metastore.type' = 'glue',\n    'glue.region' = 'us-east-1',\n    'glue.endpoint' = 'https://glue.us-east-1.amazonaws.com',\n    'glue.role_arn' = '<role_arn>'\n);\n"})})]})})]}),"\n",(0,l.jsxs)(s,{children:[(0,l.jsx)("summary",{children:"2.1 & 3.0 \u7248\u672C"}),(0,l.jsx)(c.Z,{children:(0,l.jsxs)(d.Z,{value:"S3",label:"S3",default:!0,children:[(0,l.jsxs)(n.p,{children:["\u975E EC2 \u73AF\u5883\u4E0B\uFF0C\u9700\u8981\u4F7F\u7528 ",(0,l.jsx)(n.a,{href:"https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html",children:"aws configure "})," \u914D\u7F6E Credentials \u4FE1\u606F\uFF0C\u540C\u65F6\u5728~/.aws \u76EE\u5F55\u4E0B\u751F\u6210 credentials \u6587\u4EF6\u3002"]}),(0,l.jsxs)(n.p,{children:["\u6216\u8005\u663E\u793A\u7684\u5728\u521B\u5EFA catalog \u53C2\u6570\u4E2D\u65B0\u589E\u51ED\u636E\u63D0\u4F9B\u65B9\u5F0F ",(0,l.jsx)("b",{children:'"aws.catalog.credentials.provider.factory.class"="com.amazonaws.glue.catalog.credentials.ConfigurationAWSCredentialsProviderFactory"'})]}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"create catalog hive_glue PROPERTIES(\n    'type' = 'hms',\n    'hive.metastore.type' = 'glue',\n    'glue.endpoint' = 'https://glue.ap-northeast-1.amazonaws.com',\n    'glue.region' = 'ap-northeast-1',\n    'glue.access_key' = '<ak>',\n    'glue.secret_key' = '<sk>'\n);\n"})})]})})]}),"\n",(0,l.jsx)(n.h3,{id:"aliyun-dlf",children:"Aliyun DLF"}),"\n",(0,l.jsxs)(s,{children:[(0,l.jsx)("summary",{children:"3.1+ \u7248\u672C"}),(0,l.jsx)(c.Z,{children:(0,l.jsx)(d.Z,{value:"DLF 1.0",label:"DLF 1.0",default:!0,children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"CREATE CATALOG hive_dlf_oss_test_catalog PROPERTIES (\n    'type' = 'hms',\n    'hive.metastore.type' = 'dlf',\n    'dlf.uid' = '203225413946383283',\n    'dlf.catalog_id' = 'p2_regression_case',\n    'dlf.endpoint' = 'dlf.cn-beijing.aliyuncs.com',\n    'dlf.region' = 'cn-beijing',\n    'dlf.access_key' = '<ak>',\n    'dlf.secret_key' = '<sk>'\n);\n"})})})})]}),"\n",(0,l.jsxs)(s,{children:[(0,l.jsx)("summary",{children:"2.1 & 3.0 \u7248\u672C"}),(0,l.jsx)(c.Z,{children:(0,l.jsx)(d.Z,{value:"DLF 1.0",label:"DLF 1.0",default:!0,children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"CREATE CATALOG hive_dlf_oss_test_catalog PROPERTIES (\n    'type' = 'hms',\n    'hive.metastore.type' = 'dlf',\n    'dlf.uid' = '203225413946383283',\n    'dlf.catalog.id' = 'p2_regression_case',\n    'dlf.endpoint' = 'dlf.cn-beijing.aliyuncs.com',\n    'dlf.region' = 'cn-beijing',\n    'dlf.access_key' = '<ak>',\n    'dlf.secret_key' = '<sk>'\n);\n"})})})})]}),"\n",(0,l.jsx)(n.h2,{id:"\u67E5\u8BE2\u64CD\u4F5C",children:"\u67E5\u8BE2\u64CD\u4F5C"}),"\n",(0,l.jsx)(n.h3,{id:"\u57FA\u7840\u67E5\u8BE2",children:"\u57FA\u7840\u67E5\u8BE2"}),"\n",(0,l.jsx)(n.p,{children:"\u914D\u7F6E\u597D Catalog \u540E\uFF0C\u53EF\u4EE5\u901A\u8FC7\u4EE5\u4E0B\u65B9\u5F0F\u67E5\u8BE2 Catalog \u4E2D\u7684\u8868\u6570\u636E\uFF1A"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"-- 1. switch to catalog, use database and query\nSWITCH hive_ctl;\nUSE hive_db;\nSELECT * FROM hive_tbl LIMIT 10;\n\n-- 2. use hive database directly\nUSE hive_ctl.hive_db;\nSELECT * FROM hive_tbl LIMIT 10;\n\n-- 3. use full qualified name to query\nSELECT * FROM hive_ctl.hive_db.hive_tbl LIMIT 10;\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u67E5\u8BE2-hive-\u5206\u533A",children:"\u67E5\u8BE2 Hive \u5206\u533A"}),"\n",(0,l.jsx)(n.p,{children:"\u53EF\u4EE5\u901A\u8FC7\u4E0B\u9762\u4E24\u79CD\u65B9\u5F0F\u67E5\u8BE2 Hive \u5206\u533A\u4FE1\u606F\u3002"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.code,{children:"SHOW PARTITIONS FROM [catalog.][db.]hive_table"})}),"\n",(0,l.jsx)(n.p,{children:"\u8BE5\u8BED\u53E5\u53EF\u4EE5\u5217\u51FA\u6307\u5B9A Hive \u8868\u7684\u6240\u6709\u5206\u533A\u4EE5\u53CA\u5206\u533A\u503C\u4FE1\u606F\u3002"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"SHOW PARTITIONS FROM hive_table;\n\n+--------------------------------+\n| Partition                      |\n+--------------------------------+\n| pt1=2024-10-10/pt2=beijing     |\n| pt1=2024-10-10/pt2=shanghai    |\n| pt1=2024-10-11/pt2=beijing     |\n| pt1=2024-10-11/pt2=shanghai    |\n| pt1=2024-10-12/pt2=nanjing     |\n+--------------------------------+\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["\u4F7F\u7528 ",(0,l.jsx)(n.code,{children:"table$partitions"})," \u5143\u6570\u636E\u8868"]}),"\n",(0,l.jsxs)(n.p,{children:["\u81EA 2.1.7 \u548C 3.0.3 \u7248\u672C\u5F00\u59CB\uFF0C\u7528\u6237\u53EF\u4EE5\u901A\u8FC7 ",(0,l.jsx)(n.code,{children:"table$partitions"})," \u5143\u6570\u636E\u8868\u67E5\u8BE2 Hive \u5206\u533A\u4FE1\u606F\u3002",(0,l.jsx)(n.code,{children:"table$partitions"})," \u672C\u8D28\u4E0A\u662F\u4E00\u4E2A\u5173\u7CFB\u8868\uFF0C\u6BCF\u4E2A\u5206\u533A\u5217\u4E3A\u4E00\u5217\uFF0C\u6240\u4EE5\u53EF\u4EE5\u4F7F\u7528\u5728\u4EFB\u610F SELECT \u8BED\u53E5\u4E2D\u3002"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"SELECT * FROM hive_table$partitions;\n\n+------------+-------------+\n| pt1        | pt2         |\n+------------+-------------+\n| 2024-10-10 | beijing     |\n| 2024-10-10 | shanghai    |\n| 2024-10-12 | nanjing     |\n| 2024-10-11 | beijing     |\n| 2024-10-11 | shanghai    |\n+------------+-------------+\n"})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"\u67E5\u8BE2-hive-\u4E8B\u52A1\u8868",children:"\u67E5\u8BE2 Hive \u4E8B\u52A1\u8868"}),"\n",(0,l.jsxs)(n.p,{children:["Hive Transactional \u8868\u662F Hive \u4E2D\u652F\u6301 ACID \u8BED\u4E49\u7684\u8868\u3002\u8BE6\u60C5\u53EF\u89C1 ",(0,l.jsx)(n.a,{href:"https://cwiki.apache.org/confluence/display/Hive/Hive+Transactions",children:"Hive Transactions"}),"\u3002"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Hive Transactional \u8868\u652F\u6301\u60C5\u51B5"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u8868\u7C7B\u578B"}),(0,l.jsx)(n.th,{children:"\u5728 Hive \u4E2D\u652F\u6301\u7684\u64CD\u4F5C"}),(0,l.jsx)(n.th,{children:"Hive \u8868\u5C5E\u6027"}),(0,l.jsx)(n.th,{children:"\u652F\u6301\u7684 Hive \u7248\u672C"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"Full-ACID Transactional Table"}),(0,l.jsx)(n.td,{children:"\u652F\u6301 Insert, Update, Delete \u64CD\u4F5C"}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"'transactional'='true'"})}),(0,l.jsx)(n.td,{children:"4.x\uFF0C3.x\uFF0C2.x\uFF0C\u5176\u4E2D 2.x \u9700\u8981\u5728 Hive \u4E2D\u6267\u884C\u5B8C Major Compaction \u624D\u53EF\u4EE5\u8BFB\u53D6\u3002"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"Insert-Only Transactional Table"}),(0,l.jsx)(n.td,{children:"\u53EA\u652F\u6301 Insert \u64CD\u4F5C"}),(0,l.jsxs)(n.td,{children:[(0,l.jsx)(n.code,{children:"'transactional'='true'"}),",",(0,l.jsx)(n.code,{children:"'transactional_properties'='insert_only'"})]}),(0,l.jsxs)(n.td,{children:["4.x\uFF0C3.x\uFF0C2.x \u5728\u521B\u5EFA catalog \u7684\u65F6\u5019\u9700\u8981\u6307\u5B9A ",(0,l.jsx)(n.code,{children:"hive.version"}),"\u3002"]})]})]})]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u5F53\u524D\u9650\u5236"}),"\n",(0,l.jsx)(n.p,{children:"\u76EE\u524D\u4E0D\u652F\u6301 Original Files \u7684\u573A\u666F\u3002\u5F53\u4E00\u4E2A\u8868\u8F6C\u6362\u6210 Transactional \u8868\u4E4B\u540E\uFF0C\u540E\u7EED\u65B0\u5199\u7684\u6570\u636E\u6587\u4EF6\u4F1A\u4F7F\u7528 Hive Transactional \u8868\u7684 Schema\uFF0C\u4F46\u662F\u5DF2\u7ECF\u5B58\u5728\u7684\u6570\u636E\u6587\u4EF6\u662F\u4E0D\u4F1A\u8F6C\u5316\u6210 Transactional \u8868\u7684 Schema\uFF0C\u8FD9\u6837\u7684\u6587\u4EF6\u79F0\u4E3A Original Files\u3002"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"\u67E5\u8BE2-hive-view",children:"\u67E5\u8BE2 Hive View"}),"\n",(0,l.jsx)(n.p,{children:"\u652F\u6301\u67E5\u8BE2 Hive View\u3002\u4F46\u6CE8\u610F\u6709\u4EE5\u4E0B\u9650\u5236\uFF1A"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Hive View \u7684\u5B9A\u4E49\u8BED\u53E5\uFF08HiveQL\uFF09\u5FC5\u987B\u662F Doris \u652F\u6301\u7684 SQL \u8BED\u53E5\u3002\u5426\u5219\u4F1A\u51FA\u73B0\u89E3\u6790\u9519\u8BEF\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u90E8\u5206 HiveQL \u652F\u6301\u7684\u51FD\u6570\u53EF\u80FD\u548C Doris \u652F\u6301\u7684\u51FD\u6570\u540C\u540D\uFF0C\u4F46\u884C\u4E3A\u4E0D\u4E00\u81F4\uFF0C\u8FD9\u53EF\u80FD\u5BFC\u81F4\u6700\u7EC8\u7ED3\u679C\u548C\u4F7F\u7528 Hive \u67E5\u8BE2\u7684\u7ED3\u679C\u4E0D\u4E00\u81F4\u3002\u5982\u679C\u7528\u6237\u9047\u5230\u6B64\u7C7B\u95EE\u9898\uFF0C\u53EF\u4EE5\u5411\u793E\u533A\u53CD\u9988\u3002"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"\u5199\u5165\u64CD\u4F5C",children:"\u5199\u5165\u64CD\u4F5C"}),"\n",(0,l.jsx)(n.p,{children:"\u53EF\u4EE5\u901A\u8FC7 INSERT \u8BED\u53E5\u5C06\u6570\u636E\u5199\u5165\u5230 Hive \u8868\u4E2D\u3002\u652F\u6301\u5199\u5165\u5230\u7531 Doris \u521B\u5EFA\u7684 Hive \u8868\uFF0C\u6216\u8005 Hive \u4E2D\u5DF2\u5B58\u5728\u7684\u4E14\u683C\u5F0F\u652F\u6301\u7684\u8868\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u5BF9\u4E8E\u5206\u533A\u8868\uFF0C\u4F1A\u6839\u636E\u6570\u636E\uFF0C\u81EA\u52A8\u5199\u5165\u5230\u5BF9\u5E94\u5206\u533A\uFF0C\u6216\u8005\u521B\u5EFA\u65B0\u7684\u5206\u533A\u3002\u76EE\u524D\u4E0D\u652F\u6301\u6307\u5B9A\u5206\u533A\u5199\u5165\u3002"}),"\n",(0,l.jsx)(n.h3,{id:"insert-into",children:"INSERT INTO"}),"\n",(0,l.jsx)(n.p,{children:"INSERT \u64CD\u4F5C\u4F1A\u5C06\u6570\u636E\u4EE5\u8FFD\u52A0\u7684\u65B9\u5F0F\u5199\u5165\u5230\u76EE\u6807\u8868\u4E2D\u3002\u5F53\u524D\u4E0D\u652F\u6301\u6307\u5B9A\u5206\u533A\u5199\u5165\u3002"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:'INSERT INTO hive_tbl values (val1, val2, val3, val4);\nINSERT INTO hive_ctl.hive_db.hive_tbl SELECT col1, col2 FROM internal.db1.tbl1;\n\nINSERT INTO hive_tbl(col1, col2) values (val1, val2);\nINSERT INTO hive_tbl(col1, col2, partition_col1, partition_col2) values (1, 2, "beijing", "2023-12-12");\n'})}),"\n",(0,l.jsx)(n.h3,{id:"insert-overwrite",children:"INSERT OVERWRITE"}),"\n",(0,l.jsx)(n.p,{children:"INSERT OVERWRITE \u4F1A\u4F7F\u7528\u65B0\u7684\u6570\u636E\u5B8C\u5168\u8986\u76D6\u539F\u6709\u8868\u4E2D\u7684\u6570\u636E\u3002\u5F53\u524D\u4E0D\u652F\u6301\u6307\u5B9A\u5206\u533A\u5199\u5165\u3002"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"INSERT OVERWRITE TABLE VALUES(val1, val2, val3, val4)\nINSERT OVERWRITE TABLE hive_ctl.hive_db.hive_tbl(col1, col2) SELECT col1, col2 FROM internal.db1.tbl1;\n"})}),"\n",(0,l.jsx)(n.p,{children:"INSERT OVERWRITE \u7684\u8BED\u4E49\u4E0E Hive \u4E00\u81F4\uFF0C\u6709\u5982\u4E0B\u884C\u4E3A\uFF1A"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u5F53\u76EE\u7684\u8868\u662F\u5206\u533A\u8868\uFF0C\u800C\u6E90\u8868\u4E3A\u7A7A\u8868\u65F6\uFF0C\u64CD\u4F5C\u4E0D\u4F1A\u4EA7\u751F\u4EFB\u4F55\u5F71\u54CD\u3002\u76EE\u7684\u8868\u6570\u636E\u65E0\u53D8\u5316\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u5F53\u76EE\u7684\u8868\u662F\u975E\u5206\u533A\u8868\uFF0C\u800C\u6E90\u8868\u662F\u7A7A\u8868\u662F\uFF0C\u76EE\u7684\u8868\u4F1A\u88AB\u6E05\u7A7A\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u5F53\u524D\u4E0D\u652F\u6301\u6307\u5B9A\u5206\u533A\u5199\u5165\uFF0C\u56E0\u6B64 INSERT OVERWRITE \u4E3A\u6839\u636E\u6E90\u8868\u4E2D\u7684\u6570\u503C\uFF0C\u81EA\u52A8\u5904\u7406\u5BF9\u5E94\u7684\u76EE\u7684\u8868\u5206\u533A\u3002\u5982\u679C\u76EE\u7684\u8868\u662F\u5206\u533A\u8868\uFF0C\u5219\u53EA\u4F1A\u8986\u76D6\u6D89\u53CA\u5230\u7684\u5206\u533A\uFF0C\u4E0D\u6D89\u53CA\u7684\u5206\u533A\uFF0C\u6570\u636E\u65E0\u53D8\u5316\u3002"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"ctas",children:"CTAS"}),"\n",(0,l.jsxs)(n.p,{children:["\u53EF\u4EE5\u901A\u8FC7 ",(0,l.jsx)(n.code,{children:"CTAS(CREATE TABLE AS SELECT)"})," \u8BED\u53E5\u521B\u5EFA Hive \u8868\u5E76\u5199\u5165\u6570\u636E\uFF1A"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE hive_ctas ENGINE=hive AS SELECT * FROM other_table;\n"})}),"\n",(0,l.jsx)(n.p,{children:"CTAS \u652F\u6301\u6307\u5B9A\u6587\u4EF6\u683C\u5F0F\u3001\u5206\u533A\u65B9\u5F0F\u7B49\u4FE1\u606F\uFF0C\u5982\uFF1A"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:'CREATE TABLE hive_ctas ENGINE=hive\nPARTITION BY LIST (pt1, pt2) ()\nAS SELECT col1,pt1,pt2 FROM part_ctas_src WHERE col1>0;\n    \nCREATE TABLE hive_ctl.hive_db.hive_ctas (col1,col2,pt1) ENGINE=hive\nPARTITION BY LIST (pt1) ()\nPROPERTIES (\n    "file_format"="parquet",\n    "compression"="zstd"\n)\nAS SELECT col1,pt1 as col2,pt2 as pt1 FROM test_ctas.part_ctas_src WHERE col1>0;\n'})}),"\n",(0,l.jsx)(n.h3,{id:"\u76F8\u5173\u53C2\u6570",children:"\u76F8\u5173\u53C2\u6570"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Session \u53D8\u91CF"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u53C2\u6570\u540D\u79F0"}),(0,l.jsx)(n.th,{children:"\u63CF\u8FF0"}),(0,l.jsx)(n.th,{children:"\u9ED8\u8BA4\u503C"}),(0,l.jsx)(n.th,{children:"\u7248\u672C"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"hive_parquet_use_column_names"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"true"})}),(0,l.jsxs)(n.td,{children:["Doris \u5728\u8BFB\u53D6 Hive \u8868 Parquet \u6570\u636E\u7C7B\u578B\u65F6\uFF0C\u9ED8\u8BA4\u4F1A\u6839\u636E Hive \u8868\u7684\u5217\u540D\u4ECE Parquet \u6587\u4EF6\u4E2D\u627E\u540C\u540D\u7684\u5217\u6765\u8BFB\u53D6\u6570\u636E\u3002\u5F53\u8BE5\u53D8\u91CF\u4E3A ",(0,l.jsx)(n.code,{children:"false"})," \u65F6\uFF0CDoris \u4F1A\u6839\u636E Hive \u8868\u4E2D\u7684\u5217\u987A\u5E8F\u4ECE Parquet \u6587\u4EF6\u4E2D\u8BFB\u53D6\u6570\u636E\uFF0C\u4E0E\u5217\u540D\u65E0\u5173\u3002\u7C7B\u4F3C\u4E8E Hive \u4E2D\u7684 ",(0,l.jsx)(n.code,{children:"parquet.column.index.access"})," \u53D8\u91CF\u3002\u8BE5\u53C2\u6570\u53EA\u9002\u7528\u4E8E\u9876\u5C42\u5217\u540D\uFF0C\u5BF9 Struct \u5185\u90E8\u65E0\u6548\u3002"]}),(0,l.jsx)(n.td,{children:"2.1.6+, 3.0.3+"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"hive_orc_use_column_names"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"true"})}),(0,l.jsxs)(n.td,{children:["\u4E0E ",(0,l.jsx)(n.code,{children:"hive_parquet_use_column_names"})," \u7C7B\u4F3C\uFF0C\u9488\u5BF9\u7684\u662F Hive \u8868 ORC \u6570\u636E\u7C7B\u578B\u3002\u7C7B\u4F3C\u4E8E Hive \u4E2D\u7684 ",(0,l.jsx)(n.code,{children:"orc.force.positional.evolution"})," \u53D8\u91CF\u3002"]}),(0,l.jsx)(n.td,{children:"2.1.6+, 3.0.3+"})]})]})]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"BE \u914D\u7F6E"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u53C2\u6570\u540D\u79F0"}),(0,l.jsx)(n.th,{children:"\u63CF\u8FF0"}),(0,l.jsx)(n.th,{children:"\u9ED8\u8BA4\u503C"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"hive_sink_max_file_size"})}),(0,l.jsx)(n.td,{children:"\u6700\u5927\u7684\u6570\u636E\u6587\u4EF6\u5927\u5C0F\u3002\u5F53\u5199\u5165\u6570\u636E\u91CF\u8D85\u8FC7\u8BE5\u5927\u5C0F\u540E\u4F1A\u5173\u95ED\u5F53\u524D\u6587\u4EF6\uFF0C\u6EDA\u52A8\u4EA7\u751F\u4E00\u4E2A\u65B0\u6587\u4EF6\u7EE7\u7EED\u5199\u5165\u3002"}),(0,l.jsx)(n.td,{children:"1GB"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"table_sink_partition_write_max_partition_nums_per_writer"})}),(0,l.jsx)(n.td,{children:"BE \u8282\u70B9\u4E0A\u6BCF\u4E2A Instance \u6700\u5927\u5199\u5165\u7684\u5206\u533A\u6570\u76EE\u3002"}),(0,l.jsx)(n.td,{children:"128"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"table_sink_non_partition_write_scaling_data_processed_threshold"})}),(0,l.jsxs)(n.td,{children:["\u975E\u5206\u533A\u8868\u5F00\u59CB scaling-write \u7684\u6570\u636E\u91CF\u9608\u503C\u3002\u6BCF\u589E\u52A0 ",(0,l.jsx)(n.code,{children:"table_sink_non_partition_write_scaling_data_processed_threshold"})," \u6570\u636E\u5C31\u4F1A\u53D1\u9001\u7ED9\u4E00\u4E2A\u65B0\u7684 writer(instance) \u8FDB\u884C\u5199\u5165\u3002scaling-write \u673A\u5236\u4E3B\u8981\u662F\u4E3A\u4E86\u6839\u636E\u6570\u636E\u91CF\u6765\u4F7F\u7528\u4E0D\u540C\u6570\u76EE\u7684 writer(instance) \u6765\u8FDB\u884C\u5199\u5165\uFF0C\u4F1A\u968F\u7740\u6570\u636E\u91CF\u7684\u589E\u52A0\u800C\u589E\u5927\u5199\u5165\u7684 writer(instance) \u6570\u76EE\uFF0C\u4ECE\u800C\u63D0\u9AD8\u5E76\u53D1\u5199\u5165\u7684\u541E\u5410\u3002\u5F53\u6570\u636E\u91CF\u6BD4\u8F83\u5C11\u7684\u65F6\u5019\u4E5F\u4F1A\u8282\u7701\u8D44\u6E90\uFF0C\u5E76\u4E14\u5C3D\u53EF\u80FD\u5730\u51CF\u5C11\u4EA7\u751F\u7684\u6587\u4EF6\u6570\u76EE\u3002"]}),(0,l.jsx)(n.td,{children:"25MB"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"table_sink_partition_write_min_data_processed_rebalance_threshold"})}),(0,l.jsxs)(n.td,{children:["\u5206\u533A\u8868\u5F00\u59CB\u89E6\u53D1\u91CD\u5E73\u8861\u7684\u6700\u5C11\u6570\u636E\u91CF\u9608\u503C\u3002\u5982\u679C ",(0,l.jsx)(n.code,{children:"\u5F53\u524D\u7D2F\u79EF\u7684\u6570\u636E\u91CF"})," - ",(0,l.jsx)(n.code,{children:"\u81EA\u4ECE\u4E0A\u6B21\u89E6\u53D1\u91CD\u5E73\u8861\u6216\u8005\u6700\u5F00\u59CB\u7D2F\u79EF\u7684\u6570\u636E\u91CF"})," >= ",(0,l.jsx)(n.code,{children:"table_sink_partition_write_min_data_processed_rebalance_threshold"}),"\uFF0C\u5C31\u5F00\u59CB\u89E6\u53D1\u91CD\u5E73\u8861\u673A\u5236\u3002\u5982\u679C\u53D1\u73B0\u6700\u7EC8\u751F\u6210\u7684\u6587\u4EF6\u5927\u5C0F\u5DEE\u5F02\u8FC7\u5927\uFF0C\u53EF\u4EE5\u8C03\u5C0F\u6539\u9608\u503C\u6765\u589E\u52A0\u5747\u8861\u5EA6\u3002\u5F53\u7136\u8FC7\u5C0F\u7684\u9608\u503C\u4F1A\u5BFC\u81F4\u91CD\u5E73\u8861\u7684\u6210\u672C\u589E\u52A0\uFF0C\u53EF\u80FD\u4F1A\u5F71\u54CD\u6027\u80FD\u3002"]}),(0,l.jsx)(n.td,{children:"25MB"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"table_sink_partition_write_min_partition_data_processed_rebalance_threshold"})}),(0,l.jsxs)(n.td,{children:["\u5206\u533A\u8868\u5F00\u59CB\u8FDB\u884C\u91CD\u5E73\u8861\u65F6\u7684\u6700\u5C11\u7684\u5206\u533A\u6570\u636E\u91CF\u9608\u503C\u3002\u5982\u679C ",(0,l.jsx)(n.code,{children:"\u5F53\u524D\u5206\u533A\u7684\u6570\u636E\u91CF"})," >= ",(0,l.jsx)(n.code,{children:"\u9608\u503C"})," * ",(0,l.jsx)(n.code,{children:"\u5F53\u524D\u5206\u533A\u5DF2\u7ECF\u5206\u914D\u7684 task \u6570\u76EE"}),"\uFF0C\u5C31\u5F00\u59CB\u5BF9\u8BE5\u5206\u533A\u8FDB\u884C\u91CD\u5E73\u8861\u3002\u5982\u679C\u53D1\u73B0\u6700\u7EC8\u751F\u6210\u7684\u6587\u4EF6\u5927\u5C0F\u5DEE\u5F02\u8FC7\u5927\uFF0C\u53EF\u4EE5\u8C03\u5C0F\u6539\u9608\u503C\u6765\u589E\u52A0\u5747\u8861\u5EA6\u3002\u5F53\u7136\u8FC7\u5C0F\u7684\u9608\u503C\u4F1A\u5BFC\u81F4\u91CD\u5E73\u8861\u7684\u6210\u672C\u589E\u52A0\uFF0C\u53EF\u80FD\u4F1A\u5F71\u54CD\u6027\u80FD\u3002"]}),(0,l.jsx)(n.td,{children:"15MB"})]})]})]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"\u5E93\u8868\u7BA1\u7406",children:"\u5E93\u8868\u7BA1\u7406"}),"\n",(0,l.jsx)(n.p,{children:"\u7528\u6237\u53EF\u4EE5\u901A\u8FC7 Doris \u5728 Hive Metastore \u4E2D\u521B\u5EFA\u3001\u5220\u9664\u5E93\u8868\u3002\u6CE8\u610F\uFF0CDoris \u53EA\u662F\u8C03\u7528 Hive Metastore \u7684 API \u8FDB\u884C\u76F8\u5E94\u64CD\u4F5C\uFF0CDoris \u672C\u8EAB\u7684\u5143\u6570\u636E\u5E76\u4E0D\u5B58\u50A8\u548C\u6301\u4E45\u5316\u4EFB\u4F55 Hive \u7684\u5143\u6570\u636E\u3002"}),"\n",(0,l.jsx)(n.h3,{id:"\u521B\u5EFA\u548C\u5220\u9664\u5E93",children:"\u521B\u5EFA\u548C\u5220\u9664\u5E93"}),"\n",(0,l.jsxs)(n.p,{children:["\u53EF\u4EE5\u901A\u8FC7 ",(0,l.jsx)(n.code,{children:"SWITCH"})," \u8BED\u53E5\u5207\u6362\u5230\u5BF9\u5E94\u7684 Catalog \u4E0B\uFF0C\u6267\u884C ",(0,l.jsx)(n.code,{children:"CREATE DATABASE"})," \u8BED\u53E5\uFF1A"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"SWITCH hive_ctl;\nCREATE DATABASE [IF NOT EXISTS] hive_db;\n"})}),"\n",(0,l.jsx)(n.p,{children:"\u4E5F\u53EF\u4EE5\u4F7F\u7528\u5168\u9650\u5B9A\u540D\u521B\u5EFA\uFF0C\u6216\u6307\u5B9A location\uFF0C\u5982\uFF1A"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"CREATE DATABASE [IF NOT EXISTS] hive_ctl.hive_db;\n    \nCREATE DATABASE [IF NOT EXISTS] hive_ctl.hive_db\nPROPERTIES ('location'='hdfs://172.21.16.47:4007/path/to/db/');\n"})}),"\n",(0,l.jsxs)(n.p,{children:["\u4E4B\u540E\u53EF\u4EE5\u901A\u8FC7 ",(0,l.jsx)(n.code,{children:"SHOW CREATE DATABASE"})," \u547D\u4EE4\u53EF\u4EE5\u67E5\u770B Database \u7684 Location \u4FE1\u606F\uFF1A"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"mysql> SHOW CREATE DATABASE hive_db;\n+----------+---------------------------------------------------------------------------------------------+\n| Database | Create Database                                                                             |\n+----------+---------------------------------------------------------------------------------------------+\n| hive_db  | CREATE DATABASE hive_db LOCATION 'hdfs://172.21.16.47:4007/usr/hive/warehouse/hive_db.db'   |\n+----------+---------------------------------------------------------------------------------------------+\n"})}),"\n",(0,l.jsx)(n.p,{children:"\u5220\u9664"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"DROP DATABASE [IF EXISTS] hive_ctl.hive_db;\n"})}),"\n",(0,l.jsx)(n.admonition,{type:"caution",children:(0,l.jsx)(n.p,{children:"\u5BF9\u4E8E Hive Database\uFF0C\u5FC5\u987B\u5148\u5220\u9664\u8FD9\u4E2A Database \u4E0B\u7684\u6240\u6709\u8868\u540E\uFF0C\u624D\u80FD\u5220\u9664 Database\uFF0C\u5426\u5219\u4F1A\u62A5\u9519\u3002\u8FD9\u4E2A\u64CD\u4F5C\u4F1A\u540C\u6B65\u5220\u9664 Hive \u4E2D\u5BF9\u5E94\u7684 Database\u3002"})}),"\n",(0,l.jsx)(n.h3,{id:"\u521B\u5EFA\u548C\u5220\u9664\u8868",children:"\u521B\u5EFA\u548C\u5220\u9664\u8868"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u521B\u5EFA"})}),"\n",(0,l.jsx)(n.p,{children:"Doris \u652F\u6301\u5728 Hive \u4E2D\u521B\u5EFA\u5206\u533A\u6216\u975E\u5206\u533A\u8868\u3002"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"-- Create unpartitioned hive table\nCREATE TABLE unpartitioned_table (\n  `col1` BOOLEAN COMMENT 'col1',\n  `col2` INT COMMENT 'col2',\n  `col3` BIGINT COMMENT 'col3',\n  `col4` CHAR(10) COMMENT 'col4',\n  `col5` FLOAT COMMENT 'col5',\n  `col6` DOUBLE COMMENT 'col6',\n  `col7` DECIMAL(9,4) COMMENT 'col7',\n  `col8` VARCHAR(11) COMMENT 'col8',\n  `col9` STRING COMMENT 'col9'\n)  ENGINE=hive\nPROPERTIES (\n  'file_format'='parquet'\n);\n\n-- Create partitioned hive table\n-- The partition columns must be in table's column definition list\nCREATE TABLE partition_table (\n  `col1` BOOLEAN COMMENT 'col1',\n  `col2` INT COMMENT 'col2',\n  `col3` BIGINT COMMENT 'col3',\n  `col4` DECIMAL(2,1) COMMENT 'col4',\n  `pt1` VARCHAR COMMENT 'pt1',\n  `pt2` VARCHAR COMMENT 'pt2'\n)  ENGINE=hive\nPARTITION BY LIST (pt1, pt2) ()\nPROPERTIES (\n  'file_format'='orc',\n  'compression'='zlib'\n);\n\n-- Create text format table(Since 2.1.7 & 3.0.3)\nCREATE TABLE text_table (\n    `id` INT,\n    `name` STRING\n) PROPERTIES (\n    'file_format'='text',\n    'compression'='gzip',\n    'field.delim'='\\t',\n    'line.delim'='\\n',\n    'collection.delim'=';',\n    'mapkey.delim'=':',\n    'serialization.null.format'='\\\\N',\n    'escape.delim'='\\\\'\n);\n"})}),"\n",(0,l.jsxs)(n.p,{children:["\u521B\u5EFA\u540E\uFF0C\u53EF\u4EE5\u901A\u8FC7 ",(0,l.jsx)(n.code,{children:"SHOW CREATE TABLE"})," \u547D\u4EE4\u67E5\u770B Hive \u7684\u5EFA\u8868\u8BED\u53E5\u3002"]}),"\n",(0,l.jsx)(n.p,{children:"\u6CE8\u610F\uFF0C\u4E0D\u540C\u4E8E Hive \u4E2D\u7684\u5EFA\u8868\u8BED\u53E5\u3002\u5728 Doris \u4E2D\u521B\u5EFA Hive \u5206\u533A\u8868\u65F6\uFF0C\u5206\u533A\u5217\u4E5F\u5FC5\u987B\u5199\u5230 Table \u7684 Schema \u4E2D\u3002\u540C\u65F6\uFF0C\u5206\u533A\u5217\u5FC5\u987B\u5728\u6240\u6709 Schema \u7684\u6700\u540E\uFF0C\u4E14\u987A\u5E8F\u4FDD\u6301\u4E00\u81F4\u3002"}),"\n",(0,l.jsxs)(n.admonition,{type:"tip",children:[(0,l.jsxs)(n.p,{children:["\u5BF9\u4E8E\u67D0\u4E9B\u9ED8\u8BA4\u5F00\u542F ACID \u4E8B\u52A1\u7279\u6027\u7684 Hive \u96C6\u7FA4\uFF0C\u4F7F\u7528 Doris \u5EFA\u8868\u540E\uFF0C\u8868\u5C5E\u6027 ",(0,l.jsx)(n.code,{children:"transactional"})," \u4F1A\u4E3A ",(0,l.jsx)(n.code,{children:"true"}),"\u3002\u800C Doris \u53EA\u652F\u6301\u90E8\u5206 Hive \u4E8B\u52A1\u8868\u7684\u7279\u6027\uFF0C\u56E0\u6B64\u53EF\u80FD\u4F1A\u5BFC\u81F4 Doris \u521B\u5EFA\u7684 Hive\uFF0CDoris \u672C\u8EAB\u65E0\u6CD5\u8BFB\u53D6\u7684\u95EE\u9898\u3002\u56E0\u6B64\uFF0C\u9700\u8981\u5728\u5EFA\u8868\u7684\u5C5E\u6027\u4E2D\uFF0C\u663E\u5F0F\u589E\u52A0\uFF1A",(0,l.jsx)(n.code,{children:'"transactional" = "false"'}),"\uFF0C\u6765\u521B\u5EFA\u975E\u4E8B\u52A1\u7684 Hive \u8868\uFF1A"]}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"CREATE TABLE non_acid_table(\n  `col1` BOOLEAN COMMENT 'col1',\n  `col2` INT COMMENT 'col2',\n  `col3` BIGINT COMMENT 'col3'\n)  ENGINE=hive\nPROPERTIES (\n  'transactional'='false',\n);\n"})})]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u5220\u9664"})}),"\n",(0,l.jsxs)(n.p,{children:["\u53EF\u4EE5\u901A\u8FC7 ",(0,l.jsx)(n.code,{children:"DROP TABLE"})," \u8BED\u53E5\u5220\u9664\u4E00\u4E2A Hive \u8868\u3002\u5F53\u524D\u5220\u9664\u8868\u540E\uFF0C\u4F1A\u540C\u65F6\u5220\u9664\u6570\u636E\uFF0C\u5305\u62EC\u5206\u533A\u6570\u636E\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u5217\u7C7B\u578B\u6620\u5C04"})}),"\n",(0,l.jsx)(n.p,{children:"\u53C2\u8003\u3010\u5217\u7C7B\u578B\u6620\u5C04\u3011\u90E8\u5206\u3002\u9700\u8981\u989D\u5916\u6CE8\u610F\u4E00\u4E0B\u9650\u5236\uFF1A"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u5217\u7C7B\u578B\u53EA\u80FD\u4E3A\u9ED8\u8BA4\u7684 Nullable\uFF0C\u4E0D\u652F\u6301 ",(0,l.jsx)(n.code,{children:"NOT NULL"}),"\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:["Hive 3.0 \u652F\u6301\u8BBE\u7F6E\u9ED8\u8BA4\u503C\u3002\u5982\u679C\u9700\u8981\u8BBE\u7F6E\u9ED8\u8BA4\u503C\uFF0C\u5219\u9700\u8981\u5728 Catalog \u5C5E\u6027\u4E2D\u663E\u793A\u7684\u6DFB\u52A0 ",(0,l.jsx)(n.code,{children:'"hive.version" = "3.0.0"'}),"\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:["\u63D2\u5165\u6570\u636E\u540E\uFF0C\u5982\u679C\u7C7B\u578B\u4E0D\u80FD\u591F\u517C\u5BB9\uFF0C\u4F8B\u5982 ",(0,l.jsx)(n.code,{children:"'abc'"})," \u63D2\u5165\u5230\u6570\u503C\u7C7B\u578B\uFF0C\u5219\u4F1A\u8F6C\u4E3A ",(0,l.jsx)(n.code,{children:"null"})," \u503C\u63D2\u5165\u3002"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u5206\u533A"})}),"\n",(0,l.jsx)(n.p,{children:"Hive \u4E2D\u7684\u5206\u533A\u7C7B\u578B\u5BF9\u5E94 Doris \u4E2D\u7684 List \u5206\u533A\u3002\u56E0\u6B64\uFF0C\u5728 Doris \u4E2D \u521B\u5EFA Hive \u5206\u533A\u8868\uFF0C\u9700\u4F7F\u7528 List \u5206\u533A\u7684\u5EFA\u8868\u8BED\u53E5\uFF0C\u4F46\u65E0\u9700\u663E\u5F0F\u7684\u679A\u4E3E\u5404\u4E2A\u5206\u533A\u3002\u5728\u5199\u5165\u6570\u636E\u65F6\uFF0CDoris \u4F1A\u6839\u636E\u6570\u636E\u7684\u503C\uFF0C\u81EA\u52A8\u521B\u5EFA\u5BF9\u5E94\u7684 Hive \u5206\u533A\u3002\u652F\u6301\u521B\u5EFA\u5355\u5217\u6216\u591A\u5217\u5206\u533A\u8868\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u6587\u4EF6\u683C\u5F0F"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"ORC\uFF08\u9ED8\u8BA4\uFF09"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Parquet"}),"\n",(0,l.jsx)(n.p,{children:"\u6CE8\u610F\uFF0CDATETIME \u7C7B\u578B\u5199\u5165\u5230 Parquet \u6587\u4EF6\u65F6\uFF0C\u7269\u7406\u7C7B\u578B\u4F7F\u7528\u7684\u662F INT96 \u800C\u975E INT64\u3002\u76EE\u7684\u662F\u517C\u5BB9 Hive 4.0 \u7248\u672C\u4E4B\u524D\u7684\u903B\u8F91\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Text\uFF08\u81EA 2.1.7 \u548C 3.0.3 \u7248\u672C\u5F00\u59CB\u652F\u6301\uFF09"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Text \u683C\u5F0F\u8FD8\u652F\u6301\u4EE5\u4E0B\u8868\u5C5E\u6027\uFF1A"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"field.delim"}),"\uFF1A\u5217\u5206\u9694\u7B26\u3002\u9ED8\u8BA4 ",(0,l.jsx)(n.code,{children:"\\1"}),"\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"line.delim"}),"\uFF1A\u884C\u5206\u9694\u7B26\u3002\u9ED8\u8BA4 ",(0,l.jsx)(n.code,{children:"\\n"}),"\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"collection.delim"}),"\uFF1A\u590D\u6742\u7C7B\u578B\u4E2D\u5404\u5143\u7D20\u4E4B\u95F4\u7684\u5206\u9694\u7B26\u3002\u9ED8\u8BA4 ",(0,l.jsx)(n.code,{children:"\\2"}),"\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"mapkey.delim"}),"\uFF1AMap \u7C7B\u578B\u7684\u952E\u503C\u5206\u5272\u7B26\u3002\u9ED8\u8BA4 ",(0,l.jsx)(n.code,{children:"\\3"})]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"serialization.null.format"}),"\uFF1ANULL \u503C\u7684\u5B58\u50A8\u683C\u5F0F\u3002\u9ED8\u8BA4 ",(0,l.jsx)(n.code,{children:"\\N"}),"\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"escape.delim"}),"\uFF1A\u8F6C\u79FB\u5B57\u7B26\u3002\u9ED8\u8BA4 ",(0,l.jsx)(n.code,{children:"\\"}),"\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u538B\u7F29\u683C\u5F0F"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Parquet\uFF1Asnappy\uFF08\u9ED8\u8BA4\uFF09\u3001zstd\u3001plain\u3002\uFF08Plain \u5C31\u662F\u4E0D\u91C7\u7528\u538B\u7F29\uFF09"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"ORC\uFF1Asnappy\u3001zlib\uFF08\u9ED8\u8BA4\uFF09\u3001zstd\u3001plain\u3002\uFF08Plain \u5C31\u662F\u4E0D\u91C7\u7528\u538B\u7F29\uFF09"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Text\uFF1Agzip\u3001defalte\u3001bzip2\u3001zstd\u3001lz4\u3001lzo\u3001snappy\u3001plain\uFF08\u9ED8\u8BA4\uFF09\u3002\uFF08Plain \u5C31\u662F\u4E0D\u91C7\u7528\u538B\u7F29\uFF09"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u5B58\u50A8\u4ECB\u8D28"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"HDFS"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u5BF9\u8C61\u5B58\u50A8"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"\u8BA2\u9605-hive-metastore-\u4E8B\u4EF6",children:"\u8BA2\u9605 Hive Metastore \u4E8B\u4EF6"}),"\n",(0,l.jsx)(n.p,{children:"\u901A\u8FC7\u8BA9 FE \u8282\u70B9\u5B9A\u65F6\u8BFB\u53D6 HMS \u7684 Notification Event \u6765\u611F\u77E5 Hive \u8868\u5143\u6570\u636E\u7684\u5B9E\u65F6\u53D8\u66F4\u60C5\u51B5\uFF0C\u4EE5\u63D0\u9AD8\u5143\u6570\u636E\u7684\u65F6\u6548\u6027\u3002\u76EE\u524D\u652F\u6301\u5904\u7406\u5982\u4E0B Event\uFF1A"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u4E8B\u4EF6"}),(0,l.jsx)(n.th,{children:"\u4E8B\u4EF6\u884C\u4E3A\u548C\u5BF9\u5E94\u7684\u52A8\u4F5C"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"CREATE DATABASE"}),(0,l.jsx)(n.td,{children:"\u5728\u5BF9\u5E94\u6570\u636E\u76EE\u5F55\u4E0B\u521B\u5EFA\u6570\u636E\u5E93\u3002"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"DROP DATABASE"}),(0,l.jsx)(n.td,{children:"\u5728\u5BF9\u5E94\u6570\u636E\u76EE\u5F55\u4E0B\u5220\u9664\u6570\u636E\u5E93\u3002"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"ALTER DATABASE"}),(0,l.jsx)(n.td,{children:"\u6B64\u4E8B\u4EF6\u7684\u5F71\u54CD\u4E3B\u8981\u6709\u66F4\u6539\u6570\u636E\u5E93\u7684\u5C5E\u6027\u4FE1\u606F\uFF0C\u6CE8\u91CA\u53CA\u9ED8\u8BA4\u5B58\u50A8\u4F4D\u7F6E\u7B49\uFF0C\u8FD9\u4E9B\u6539\u53D8\u4E0D\u5F71\u54CD Doris \u5BF9\u5916\u90E8\u6570\u636E\u76EE\u5F55\u7684\u67E5\u8BE2\u64CD\u4F5C\uFF0C\u56E0\u6B64\u76EE\u524D\u4F1A\u5FFD\u7565\u6B64 Event\u3002"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"CREATE TABLE"}),(0,l.jsx)(n.td,{children:"\u5728\u5BF9\u5E94\u6570\u636E\u5E93\u4E0B\u521B\u5EFA\u8868\u3002"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"DROP TABLE"}),(0,l.jsx)(n.td,{children:"\u5728\u5BF9\u5E94\u6570\u636E\u5E93\u4E0B\u5220\u9664\u8868\uFF0C\u5E76\u5931\u6548\u8868\u7684\u7F13\u5B58\u3002"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"ALTER TABLE"}),(0,l.jsx)(n.td,{children:"\u5982\u679C\u662F\u91CD\u547D\u540D\uFF0C\u5148\u5220\u9664\u65E7\u540D\u5B57\u7684\u8868\uFF0C\u518D\u7528\u65B0\u540D\u5B57\u521B\u5EFA\u8868\uFF0C\u5426\u5219\u5931\u6548\u8BE5\u8868\u7684\u7F13\u5B58\u3002"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"ADD PARTITION"}),(0,l.jsx)(n.td,{children:"\u5728\u5BF9\u5E94\u8868\u7F13\u5B58\u7684\u5206\u533A\u5217\u8868\u91CC\u6DFB\u52A0\u5206\u533A\u3002"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"DROP PARTITION"}),(0,l.jsx)(n.td,{children:"\u5728\u5BF9\u5E94\u8868\u7F13\u5B58\u7684\u5206\u533A\u5217\u8868\u91CC\u5220\u9664\u5206\u533A\uFF0C\u5E76\u5931\u6548\u8BE5\u5206\u533A\u7684\u7F13\u5B58\u3002"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"ALTER PARTITION"}),(0,l.jsx)(n.td,{children:"\u5982\u679C\u662F\u91CD\u547D\u540D\uFF0C\u5148\u5220\u9664\u65E7\u540D\u5B57\u7684\u5206\u533A\uFF0C\u518D\u7528\u65B0\u540D\u5B57\u521B\u5EFA\u5206\u533A\uFF0C\u5426\u5219\u5931\u6548\u8BE5\u5206\u533A\u7684\u7F13\u5B58\u3002"})]})]})]}),"\n",(0,l.jsx)(n.admonition,{type:"tip",children:(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["\u5F53\u5BFC\u5165\u6570\u636E\u5BFC\u81F4\u6587\u4EF6\u53D8\u66F4\uFF0C\u5206\u533A\u8868\u4F1A\u89E6\u53D1 ",(0,l.jsx)(n.code,{children:"ALTER PARTITION"})," \u65F6\u95F4\uFF0C\u975E\u5206\u533A\u8868\u4F1A\u89E6\u53D1 ",(0,l.jsx)(n.code,{children:"ALTER TABLE"})," \u4E8B\u4EF6\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u5982\u679C\u7ED5\u8FC7 HMS \u76F4\u63A5\u64CD\u4F5C\u6587\u4EF6\u7CFB\u7EDF\u7684\u8BDD\uFF0CHMS \u4E0D\u4F1A\u751F\u6210\u5BF9\u5E94\u4E8B\u4EF6\uFF0C\u56E0\u6B64 Doris \u4E5F\u65E0\u6CD5\u611F\u77E5\u5143\u6570\u636E\u53D8\u5316\u3002"}),"\n"]}),"\n"]})}),"\n",(0,l.jsxs)(n.p,{children:["\u8BE5\u7279\u6027\u5728 ",(0,l.jsx)(n.code,{children:"fe.conf"})," \u4E2D\u6709\u5982\u4E0B\u76F8\u5173\u53C2\u6570\uFF1A"]}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"enable_hms_events_incremental_sync"}),": \u662F\u5426\u5F00\u542F\u5143\u6570\u636E\u81EA\u52A8\u589E\u91CF\u540C\u6B65\u529F\u80FD\uFF0C\u9ED8\u8BA4\u5173\u95ED\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"hms_events_polling_interval_ms"}),": \u8BFB\u53D6 event \u7684\u95F4\u9694\u65F6\u95F4\uFF0C\u9ED8\u8BA4\u503C\u4E3A 10000\uFF0C\u5355\u4F4D\uFF1A\u6BEB\u79D2\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"hms_events_batch_size_per_rpc"}),": \u6BCF\u6B21\u8BFB\u53D6 event \u7684\u6700\u5927\u6570\u91CF\uFF0C\u9ED8\u8BA4\u503C\u4E3A 500\u3002"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["\u5982\u679C\u60F3\u4F7F\u7528\u8BE5\u7279\u6027 (\u534E\u4E3A\u4E91 MRS \u9664\u5916)\uFF0C\u9700\u8981\u66F4\u6539 HMS \u7684 ",(0,l.jsx)(n.code,{children:"hive-site.xml"})," \u5E76\u91CD\u542F HMS \u548C HiveServer2\uFF1A"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-xml",children:"<property>\n    <name>hive.metastore.event.db.notification.api.auth</name>\n    <value>false</value>\n</property>\n<property>\n    <name>hive.metastore.dml.events</name>\n    <value>true</value>\n</property>\n<property>\n    <name>hive.metastore.transactional.event.listeners</name>\n    <value>org.apache.hive.hcatalog.listener.DbNotificationListener</value>\n</property>\n"})}),"\n",(0,l.jsxs)(n.p,{children:["\u534E\u4E3A\u4E91 MRS \u9700\u8981\u66F4\u6539 ",(0,l.jsx)(n.code,{children:"hivemetastore-site.xml"})," \u5E76\u91CD\u542F HMS \u548C HiveServer2\uFF1A"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-xml",children:"<property>\n    <name>metastore.transactional.event.listeners</name>\n    <value>org.apache.hive.hcatalog.listener.DbNotificationListener</value>\n</property>\n"})}),"\n",(0,l.jsx)(n.h2,{id:"\u9644\u5F55",children:"\u9644\u5F55"}),"\n",(0,l.jsx)(n.h3,{id:"\u4E8B\u52A1\u673A\u5236",children:"\u4E8B\u52A1\u673A\u5236"}),"\n",(0,l.jsx)(n.p,{children:"\u5BF9 Hive \u7684\u5199\u5165\u64CD\u4F5C\u4F1A\u88AB\u653E\u5728\u4E00\u4E2A\u5355\u72EC\u7684\u4E8B\u52A1\u91CC\uFF0C\u5728\u4E8B\u52A1\u63D0\u4EA4\u524D\uFF0C\u6570\u636E\u5BF9\u5916\u4E0D\u53EF\u89C1\u3002\u53EA\u6709\u5F53\u63D0\u4EA4\u8BE5\u4E8B\u52A1\u540E\uFF0C\u8868\u7684\u76F8\u5173\u64CD\u4F5C\u624D\u5BF9\u5176\u4ED6\u4EBA\u53EF\u89C1\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u4E8B\u52A1\u80FD\u4FDD\u8BC1\u64CD\u4F5C\u7684\u539F\u5B50\u6027\uFF0C\u4E8B\u52A1\u5185\u7684\u6240\u6709\u64CD\u4F5C\uFF0C\u8981\u4E48\u5168\u90E8\u6210\u529F\uFF0C\u8981\u4E48\u5168\u90E8\u5931\u8D25\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u4E8B\u52A1\u4E0D\u80FD\u5B8C\u5168\u4FDD\u8BC1\u64CD\u4F5C\u7684\u9694\u79BB\u6027\uFF0C\u53EA\u80FD\u5C3D\u529B\u800C\u4E3A\uFF0C\u901A\u8FC7\u5206\u79BB\u6587\u4EF6\u7CFB\u7EDF\u64CD\u4F5C\u548C \u5BF9 Hive Metastore \u7684\u5143\u6570\u636E\u64CD\u4F5C\u6765\u5C3D\u91CF\u51CF\u5C11\u4E0D\u4E00\u81F4\u7684\u65F6\u95F4\u7A97\u53E3\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u6BD4\u5982\u5728\u4E00\u4E2A\u4E8B\u52A1\u4E2D\uFF0C\u9700\u8981\u4FEE\u6539 Hive \u8868\u7684\u591A\u4E2A\u5206\u533A\u3002\u5047\u8BBE\u8FD9\u4E2A\u4EFB\u52A1\u5206\u6210\u4E24\u6279\u8FDB\u884C\u64CD\u4F5C\uFF0C\u5728\u7B2C\u4E00\u6279\u64CD\u4F5C\u5DF2\u7ECF\u5B8C\u6210\u3001\u7B2C\u4E8C\u6279\u64CD\u4F5C\u8FD8\u672A\u5B8C\u6210\u65F6\uFF0C\u7B2C\u4E00\u6279\u5206\u533A\u5DF2\u7ECF\u5BF9\u5916\u53EF\u89C1\uFF0C\u5916\u90E8\u53EF\u4EE5\u8BFB\u53D6\u5230\u7B2C\u4E00\u6279\u5206\u533A\uFF0C\u4F46\u8BFB\u4E0D\u5230\u7B2C\u4E8C\u6279\u5206\u533A\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u5728\u4E8B\u52A1\u63D0\u4EA4\u8FC7\u7A0B\u4E2D\u51FA\u73B0\u4EFB\u4F55\u5F02\u5E38\uFF0C\u90FD\u4F1A\u76F4\u63A5\u56DE\u9000\u8BE5\u4E8B\u52A1\uFF0C\u5305\u62EC\u5BF9 HDFS \u6587\u4EF6\u7684\u4FEE\u6539\u3001\u4EE5\u53CA\u5BF9 Hive Metastore \u5143\u6570\u636E\u7684\u4FEE\u6539\uFF0C\u4E0D\u9700\u8981\u7528\u6237\u505A\u5176\u4ED6\u5904\u7406\u3002"}),"\n",(0,l.jsx)(n.h3,{id:"\u5E76\u53D1\u5199\u5165\u673A\u5236",children:"\u5E76\u53D1\u5199\u5165\u673A\u5236"}),"\n",(0,l.jsx)(n.p,{children:"\u5F53\u524D Apache Doris \u652F\u6301\u4F7F\u7528\u591A\u4E2A\u63D2\u5165\u8BED\u53E5\u8FDB\u884C\u5E76\u53D1\u5199\u5165\u3002\u4E0D\u8FC7\u9700\u8981\u6CE8\u610F\u7684\u662F\uFF0C\u7528\u6237\u9700\u8981\u63A7\u5236\u5E76\u53D1\u5199\u5165\u4E0D\u4EA7\u751F\u53EF\u80FD\u51B2\u7A81\u7684\u60C5\u51B5\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u56E0\u4E3A\u666E\u901A\u975E\u4E8B\u52A1 Hive \u8868\u7F3A\u5C11\u5B8C\u5907\u7684\u4E8B\u52A1\u673A\u5236\u3002\u901A\u8FC7\u4E0A\u6587\u4ECB\u7ECD\u7684 Apache Doris \u4E8B\u52A1\u673A\u5236\u6211\u4EEC\u77E5\u9053\u76EE\u524D Apache Doris \u4E2D\u7684\u5B9E\u73B0\u53EA\u80FD\u662F\u5C3D\u529B\u800C\u4E3A\u5730\u51CF\u5C11\u53EF\u80FD\u4E0D\u4E00\u81F4\u7684\u65F6\u95F4\u7A97\u53E3\uFF0C\u800C\u65E0\u6CD5\u4FDD\u8BC1\u771F\u6B63\u7684 ACID\u3002\u56E0\u6B64\u5728 Apache Doris \u4E2D\u8FDB\u884C\u5E76\u53D1\u5199\u5165 Hive \u8868\u53EF\u80FD\u4F1A\u5BFC\u81F4\u6570\u636E\u4E00\u81F4\u6027\u95EE\u9898\u3002"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"INSERT"})," \u5E76\u53D1\u64CD\u4F5C"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"INSERT"})," \u4E3A\u6570\u636E\u8FFD\u52A0\u64CD\u4F5C\uFF0C\u5728\u5E76\u53D1\u6267\u884C ",(0,l.jsx)(n.code,{children:"INSERT"})," \u65F6\uFF0C\u4E0D\u4F1A\u4EA7\u751F\u51B2\u7A81\uFF0C\u64CD\u4F5C\u4F1A\u4EA7\u751F\u9884\u671F\u7684\u7ED3\u679C\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"INSERT OVERWRITE"})," \u5E76\u53D1\u64CD\u4F5C"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["\u5982\u679C\u4F7F\u7528 ",(0,l.jsx)(n.code,{children:"INSERT OVERWRITE"})," \u5BF9\u540C\u4E00\u8868\u6216\u5206\u533A\u5E76\u53D1\u5199\u5165\uFF0C\u53EF\u80FD\u4F1A\u5BFC\u81F4\u6570\u636E\u4E22\u5931\u6216\u635F\u574F\uFF0C\u7ED3\u679C\u53EF\u80FD\u662F\u4E0D\u786E\u5B9A\u7684\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u4E00\u822C\u6709\u4EE5\u4E0B\u51E0\u79CD\u89E3\u51B3\u65B9\u6848\uFF1A"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u5BF9\u4E8E\u5206\u533A\u8868\uFF0C\u53EF\u4EE5\u5C06\u6570\u636E\u5199\u5165\u4E0D\u540C\u7684\u5206\u533A\uFF0C\u5E76\u53D1\u64CD\u4F5C\u4E0D\u540C\u5206\u533A\u4E0D\u4F1A\u4EA7\u751F\u51B2\u7A81\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u5BF9\u4E8E\u975E\u5206\u533A\u8868\uFF0C\u53EF\u4EE5\u540C\u65F6\u6267\u884C INSERT\uFF0C\u800C\u4E0D\u4F7F\u7528 INSERT OVERWRITE\uFF0C\u8FD9\u6837\u4E0D\u4F1A\u4EA7\u751F\u51B2\u7A81\u7684\u95EE\u9898\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u5BF9\u4E8E\u53EF\u80FD\u4EA7\u751F\u51B2\u7A81\u7684\u64CD\u4F5C\uFF0C\u9700\u8981\u7528\u6237\u5728\u4E1A\u52A1\u4FA7\u63A7\u5236\u540C\u4E00\u65F6\u95F4\u53EA\u6709\u4E00\u4E2A\u5199\u5165\u5728\u8FDB\u884C\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"hdfs-\u6587\u4EF6\u64CD\u4F5C",children:"HDFS \u6587\u4EF6\u64CD\u4F5C"}),"\n",(0,l.jsxs)(n.p,{children:["\u5728 HDFS \u4E0A\u7684 Hive \u8868\u6570\u636E\u901A\u5E38\u4F1A\u5148\u5199\u5165\u5230\u4E34\u65F6\u76EE\u5F55\uFF0C\u7136\u540E\u901A\u8FC7 ",(0,l.jsx)(n.code,{children:"rename"})," \u7B49\u6587\u4EF6\u7CFB\u7EDF\u64CD\u4F5C\u8FDB\u884C\u6700\u7EC8\u7684\u6587\u4EF6\u63D0\u4EA4\u3002\u8FD9\u91CC\u6211\u4EEC\u8BE6\u7EC6\u4ECB\u7ECD\u4E0D\u540C\u6570\u636E\u64CD\u4F5C\u4E2D\uFF0CHDFS \u4E0A\u6587\u4EF6\u7684\u5177\u4F53\u64CD\u4F5C\u3002"]}),"\n",(0,l.jsxs)(n.p,{children:["\u6570\u636E\u7684\u4E34\u65F6\u76EE\u5F55\u683C\u5F0F\u4E3A\uFF1A",(0,l.jsx)(n.code,{children:"/tmp/.doris_staging/<username>/<uuid>"})]}),"\n",(0,l.jsxs)(n.p,{children:["\u5199\u5165\u7684\u6570\u636E\u6587\u4EF6\u540D\u79F0\u683C\u5F0F\u4E3A\uFF1A",(0,l.jsx)(n.code,{children:"<query-id>_<uuid>-<index>.<compress-type>.<file-type>"})]}),"\n",(0,l.jsx)(n.p,{children:"\u4E0B\u9762\u4E3E\u4F8B\u8BF4\u660E\u5404\u79CD\u60C5\u51B5\u4E0B\u7684\u6587\u4EF6\u64CD\u4F5C\u3002"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u975E\u5206\u533A\u8868"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Append\uFF08\u8FFD\u52A0\u5199\u5165\uFF09"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["\u76EE\u6807\u8868\u76EE\u5F55\uFF1A",(0,l.jsx)(n.code,{children:"hdfs://ns/usr/hive/warehouse/example.db/table1"})]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["\u4E34\u65F6\u6587\u4EF6\uFF1A",(0,l.jsx)(n.code,{children:"hdfs://ns/tmp/.doris_staging/root/f02247cb662846038baae272af5eeb05/b35fdbcea3a4e39-86d1f36987ef1492_7e3985bf-9de9-4fc7-b84e-adf11aa08756-0.orc"})]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u63D0\u4EA4\u9636\u6BB5\u4F1A\u628A\u6240\u6709\u4E34\u65F6\u6587\u4EF6\u79FB\u52A8\u5230\u76EE\u6807\u8868\u76EE\u5F55\u4E0B\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Overwrite\uFF08\u8986\u76D6\u5199\uFF09"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["\u76EE\u6807\u8868\u76EE\u5F55\uFF1A",(0,l.jsx)(n.code,{children:"hdfs://ns/usr/hive/warehouse/example.db/table1"})]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["\u4E34\u65F6\u6587\u4EF6\uFF1A",(0,l.jsx)(n.code,{children:"hdfs://ns/tmp/.doris_staging/root/f02247cb662846038baae272af5eeb05/b35fdbcea3a4e39-86d1f36987ef1492_7e3985bf-9de9-4fc7-b84e-adf11aa08756-0.orc"})]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u63D0\u4EA4\u9636\u6BB5\uFF1A"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["\u76EE\u6807\u8868\u76EE\u5F55\u91CD\u547D\u540D\u4E3A\u76EE\u6807\u8868\u4E34\u65F6\u76EE\u5F55\uFF1A",(0,l.jsx)(n.code,{children:"hdfs://ns/usr/hive/warehouse/example.db/_temp_b35fdbcea3a4e39-86d1f36987ef1492_table1"})]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u4E34\u65F6\u76EE\u5F55\u91CD\u547D\u540D\u4E3A\u76EE\u6807\u8868\u76EE\u5F55\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u5220\u9664\u76EE\u6807\u8868\u4E34\u65F6\u76EE\u5F55\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u5206\u533A\u8868"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Add\uFF08\u6DFB\u52A0\u5230\u65B0\u5206\u533A\uFF09"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["\u76EE\u6807\u8868\u76EE\u5F55\uFF1A",(0,l.jsx)(n.code,{children:"hdfs://ns/usr/hive/warehouse/example.db/table2/part_col=2024-01-01"})]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["\u4E34\u65F6\u6587\u4EF6\uFF1A",(0,l.jsx)(n.code,{children:"hdfs://ns/tmp/.doris_staging/root/a7eac7505d7a42fdb06cb9ef1ea3e912/par1=a/d678a74d232345e0-b659e2fb58e86ffd_549ad677-ee75-4fa1-b8a6-3e821e1dae61-0.orc"})]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u63D0\u4EA4\u9636\u6BB5\uFF0C\u4F1A\u5C06\u4E34\u65F6\u76EE\u5F55\u91CD\u547D\u540D\u4E3A\u76EE\u6807\u8868\u76EE\u5F55"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Append\uFF08\u5199\u5165\u6570\u636E\u5230\u5DF2\u5B58\u5728\u7684\u5206\u533A\uFF09"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["\u76EE\u6807\u8868\u76EE\u5F55\uFF1A",(0,l.jsx)(n.code,{children:"hdfs://ns/usr/hive/warehouse/example.db/table2/part_col=2024-01-01"})]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["\u4E34\u65F6\u6587\u4EF6\uFF1A",(0,l.jsx)(n.code,{children:"hdfs://ns/tmp/.doris_staging/root/a7eac7505d7a42fdb06cb9ef1ea3e912/par1=a/d678a74d232345e0-b659e2fb58e86ffd_549ad677-ee75-4fa1-b8a6-3e821e1dae61-0.orc"})]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u63D0\u4EA4\u9636\u6BB5\uFF0C\u4F1A\u5C06\u4E34\u65F6\u76EE\u5F55\u4E0B\u7684\u6587\u4EF6\uFF0C\u79FB\u52A8\u5230\u76EE\u6807\u8868\u76EE\u5F55\u4E0B\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Overwrite\uFF08\u8986\u76D6\u5DF2\u6709\u5206\u533A\uFF09"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["\u76EE\u6807\u8868\u76EE\u5F55\uFF1A",(0,l.jsx)(n.code,{children:"hdfs://ns/usr/hive/warehouse/example.db/table2/part_col=2024-01-01"})]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["\u4E34\u65F6\u6587\u4EF6\uFF1A",(0,l.jsx)(n.code,{children:"hdfs://ns/tmp/.doris_staging/root/a7eac7505d7a42fdb06cb9ef1ea3e912/par1=a/d678a74d232345e0-b659e2fb58e86ffd_549ad677-ee75-4fa1-b8a6-3e821e1dae61-0.orc"})]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u63D0\u4EA4\u9636\u6BB5\uFF1A"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["\u76EE\u6807\u8868\u5206\u533A\u76EE\u5F55\u91CD\u547D\u540D\u4E3A\u76EE\u6807\u8868\u4E34\u65F6\u5206\u533A\u76EE\u5F55\uFF1A",(0,l.jsx)(n.code,{children:"hdfs://ns/usr/hive/warehouse/example.db/table2/_temp_d678a74d232345e0-b659e2fb58e86ffd_part_col=2024-01-01"})]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u4E34\u65F6\u5206\u533A\u76EE\u5F55\u91CD\u547D\u540D\u4E3A\u76EE\u6807\u8868\u5206\u533A\u76EE\u5F55\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u5220\u9664\u76EE\u6807\u8868\u4E34\u65F6\u5206\u533A\u76EE\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"\u7248\u672C\u66F4\u65B0\u8BB0\u5F55",children:"\u7248\u672C\u66F4\u65B0\u8BB0\u5F55"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"Doris \u7248\u672C"}),(0,l.jsx)(n.th,{children:"\u529F\u80FD\u652F\u6301"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"2.1.6"}),(0,l.jsx)(n.td,{children:"\u652F\u6301 Hive \u8868\u6570\u636E\u5199\u56DE"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"3.0.4"}),(0,l.jsx)(n.td,{children:"\u652F\u6301 JsonSerDe \u683C\u5F0F\u7684 Hive \u8868\u3002\u652F\u6301 Hive4 \u7684\u4E8B\u52A1\u8868\u3002"})]})]})]})]})}function j(e={}){let{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(x,{...e})}):x(e)}},905525:function(e,n,s){s.d(n,{Z:()=>r});var i=s("785893");s("667294");var l=s("74904");function r(e){let{children:n,hidden:s,className:r}=e;return(0,i.jsx)("div",{role:"tabpanel",className:(0,l.Z)("tabItem_Ymn6",r),hidden:s,children:n})}},247902:function(e,n,s){s.d(n,{Z:()=>E});var i=s("785893"),l=s("667294"),r=s("74904"),c=s("69599"),d=s("616550"),t=s("232000"),a=s("4520"),h=s("38341"),o=s("876009");function x(e){return l.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||l.isValidElement(e)&&function(e){let{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function j(e){let{value:n,tabValues:s}=e;return s.some(e=>e.value===n)}var p=s("7227");function u(e){let{className:n,block:s,selectedValue:l,selectValue:d,tabValues:t}=e,a=[],{blockElementScrollPositionUntilNextRender:h}=(0,c.o5)(),o=e=>{let n=e.currentTarget,s=t[a.indexOf(n)].value;s!==l&&(h(n),d(s))},x=e=>{let n=null;switch(e.key){case"Enter":o(e);break;case"ArrowRight":{let s=a.indexOf(e.currentTarget)+1;n=a[s]??a[0];break}case"ArrowLeft":{let s=a.indexOf(e.currentTarget)-1;n=a[s]??a[a.length-1]}}n?.focus()};return(0,i.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":s},n),children:t.map(e=>{let{value:n,label:s,attributes:c}=e;return(0,i.jsx)("li",{role:"tab",tabIndex:l===n?0:-1,"aria-selected":l===n,ref:e=>a.push(e),onKeyDown:x,onClick:o,...c,className:(0,r.Z)("tabs__item","tabItem_LNqP",c?.className,{"tabs__item--active":l===n}),children:s??n},n)})})}function v(e){let{lazy:n,children:s,selectedValue:c}=e,d=(Array.isArray(s)?s:[s]).filter(Boolean);if(n){let e=d.find(e=>e.props.value===c);return e?(0,l.cloneElement)(e,{className:(0,r.Z)("margin-top--md",e.props.className)}):null}return(0,i.jsx)("div",{className:"margin-top--md",children:d.map((e,n)=>(0,l.cloneElement)(e,{key:n,hidden:e.props.value!==c}))})}function m(e){let n=function(e){let{defaultValue:n,queryString:s=!1,groupId:i}=e,r=function(e){let{values:n,children:s}=e;return(0,l.useMemo)(()=>{let e=n??x(s).map(e=>{let{props:{value:n,label:s,attributes:i,default:l}}=e;return{value:n,label:s,attributes:i,default:l}});return!function(e){let n=(0,h.lx)(e,(e,n)=>e.value===n.value);if(n.length>0)throw Error(`Docusaurus error: Duplicate values "${n.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[n,s])}(e),[c,p]=(0,l.useState)(()=>(function(e){let{defaultValue:n,tabValues:s}=e;if(0===s.length)throw Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!j({value:n,tabValues:s}))throw Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${s.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}let i=s.find(e=>e.default)??s[0];if(!i)throw Error("Unexpected error: 0 tabValues");return i.value})({defaultValue:n,tabValues:r})),[u,v]=function(e){let{queryString:n=!1,groupId:s}=e,i=(0,d.k6)(),r=function(e){let{queryString:n=!1,groupId:s}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!s)throw Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return s??null}({queryString:n,groupId:s});return[(0,a._X)(r),(0,l.useCallback)(e=>{if(!r)return;let n=new URLSearchParams(i.location.search);n.set(r,e),i.replace({...i.location,search:n.toString()})},[r,i])]}({queryString:s,groupId:i}),[m,E]=function(e){let{groupId:n}=e,s=n?`docusaurus.tab.${n}`:null,[i,r]=(0,o.Nk)(s);return[i,(0,l.useCallback)(e=>{s&&r.set(e)},[s,r])]}({groupId:i}),_=(()=>{let e=u??m;return j({value:e,tabValues:r})?e:null})();return(0,t.Z)(()=>{_&&p(_)},[_]),{selectedValue:c,selectValue:(0,l.useCallback)(e=>{if(!j({value:e,tabValues:r}))throw Error(`Can't select invalid tab value=${e}`);p(e),v(e),E(e)},[v,E,r]),tabValues:r}}(e);return(0,i.jsxs)("div",{className:(0,r.Z)("tabs-container","tabList__CuJ"),children:[(0,i.jsx)(u,{...n,...e}),(0,i.jsx)(v,{...n,...e})]})}function E(e){let n=(0,p.Z)();return(0,i.jsx)(m,{...e,children:x(e.children)},String(n))}},250065:function(e,n,s){s.d(n,{Z:function(){return d},a:function(){return c}});var i=s(667294);let l={},r=i.createContext(l);function c(e){let n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:c(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);