"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["926746"],{921360:function(n,e,i){i.r(e),i.d(e,{default:()=>h,frontMatter:()=>d,metadata:()=>s,assets:()=>c,toc:()=>t,contentTitle:()=>a});var s=JSON.parse('{"id":"releasenotes/v4.0/release-4.0.0","title":"Release 4.0.0","description":"\u4EB2\u7231\u7684\u793E\u533A\u5C0F\u4F19\u4F34\u4EEC\uFF0C\u6211\u4EEC\u5F88\u9AD8\u5174\u5730\u5411\u5927\u5BB6\u5BA3\u5E03\uFF0C\u8FD1\u671F\u6211\u4EEC\u8FCE\u6765\u4E86 Apache Doris 4.0 \u7248\u672C\u7684\u6B63\u5F0F\u53D1\u5E03\uFF0C\u6B22\u8FCE\u5927\u5BB6\u4E0B\u8F7D\u4F7F\u7528\u4F53\u9A8C\u3002\u672C\u6B21\u53D1\u5E03\u56F4\u7ED5 \u201CAI \u9A71\u52A8\u3001\u641C\u7D22\u589E\u5F3A\u3001\u79BB\u7EBF\u63D0\u6548\u201D \u4E09\u5927\u6838\u5FC3\u65B9\u5411\uFF0C\u65B0\u589E\u5411\u91CF\u7D22\u5F15\u3001AI \u51FD\u6570\u7B49\u5173\u952E\u7279\u6027\uFF0C\u5B8C\u5584\u641C\u7D22\u529F\u80FD\u77E9\u9635\uFF0C\u4F18\u5316\u79BB\u7EBF\u8BA1\u7B97\u7A33\u5B9A\u6027\u4E0E\u8D44\u6E90\u5229\u7528\u7387\uFF0C","source":"@site/i18n/zh-CN/docusaurus-plugin-content-docs/version-4.x/releasenotes/v4.0/release-4.0.0.md","sourceDirName":"releasenotes/v4.0","slug":"/releasenotes/v4.0/release-4.0.0","permalink":"/zh-CN/docs/4.x/releasenotes/v4.0/release-4.0.0","draft":false,"unlisted":false,"tags":[],"version":"4.x","lastUpdatedAt":1770477659000,"frontMatter":{"title":"Release 4.0.0","language":"zh-CN","description":"\u4EB2\u7231\u7684\u793E\u533A\u5C0F\u4F19\u4F34\u4EEC\uFF0C\u6211\u4EEC\u5F88\u9AD8\u5174\u5730\u5411\u5927\u5BB6\u5BA3\u5E03\uFF0C\u8FD1\u671F\u6211\u4EEC\u8FCE\u6765\u4E86 Apache Doris 4.0 \u7248\u672C\u7684\u6B63\u5F0F\u53D1\u5E03\uFF0C\u6B22\u8FCE\u5927\u5BB6\u4E0B\u8F7D\u4F7F\u7528\u4F53\u9A8C\u3002\u672C\u6B21\u53D1\u5E03\u56F4\u7ED5 \u201CAI \u9A71\u52A8\u3001\u641C\u7D22\u589E\u5F3A\u3001\u79BB\u7EBF\u63D0\u6548\u201D \u4E09\u5927\u6838\u5FC3\u65B9\u5411\uFF0C\u65B0\u589E\u5411\u91CF\u7D22\u5F15\u3001AI \u51FD\u6570\u7B49\u5173\u952E\u7279\u6027\uFF0C\u5B8C\u5584\u641C\u7D22\u529F\u80FD\u77E9\u9635\uFF0C\u4F18\u5316\u79BB\u7EBF\u8BA1\u7B97\u7A33\u5B9A\u6027\u4E0E\u8D44\u6E90\u5229\u7528\u7387\uFF0C"},"sidebar":"docs","previous":{"title":"Release 4.0.1","permalink":"/zh-CN/docs/4.x/releasenotes/v4.0/release-4.0.1"},"next":{"title":"Release 3.1.4","permalink":"/zh-CN/docs/4.x/releasenotes/v3.1/release-3.1.4"}}'),l=i("785893"),r=i("250065");let d={title:"Release 4.0.0",language:"zh-CN",description:"\u4EB2\u7231\u7684\u793E\u533A\u5C0F\u4F19\u4F34\u4EEC\uFF0C\u6211\u4EEC\u5F88\u9AD8\u5174\u5730\u5411\u5927\u5BB6\u5BA3\u5E03\uFF0C\u8FD1\u671F\u6211\u4EEC\u8FCE\u6765\u4E86 Apache Doris 4.0 \u7248\u672C\u7684\u6B63\u5F0F\u53D1\u5E03\uFF0C\u6B22\u8FCE\u5927\u5BB6\u4E0B\u8F7D\u4F7F\u7528\u4F53\u9A8C\u3002\u672C\u6B21\u53D1\u5E03\u56F4\u7ED5 \u201CAI \u9A71\u52A8\u3001\u641C\u7D22\u589E\u5F3A\u3001\u79BB\u7EBF\u63D0\u6548\u201D \u4E09\u5927\u6838\u5FC3\u65B9\u5411\uFF0C\u65B0\u589E\u5411\u91CF\u7D22\u5F15\u3001AI \u51FD\u6570\u7B49\u5173\u952E\u7279\u6027\uFF0C\u5B8C\u5584\u641C\u7D22\u529F\u80FD\u77E9\u9635\uFF0C\u4F18\u5316\u79BB\u7EBF\u8BA1\u7B97\u7A33\u5B9A\u6027\u4E0E\u8D44\u6E90\u5229\u7528\u7387\uFF0C"},a=void 0,c={},t=[{value:"\u4E00\u3001AI \u80FD\u529B\u6DF1\u5EA6\u96C6\u6210\uFF0C\u5F00\u542F\u667A\u80FD\u5206\u6790\u65B0\u8303\u5F0F",id:"\u4E00ai-\u80FD\u529B\u6DF1\u5EA6\u96C6\u6210\u5F00\u542F\u667A\u80FD\u5206\u6790\u65B0\u8303\u5F0F",level:2},{value:"<strong>\u5411\u91CF\u7D22\u5F15\uFF08Vector Index\uFF09</strong>",id:"\u5411\u91CF\u7D22\u5F15vector-index",level:3},{value:"<strong>AI</strong> <strong>Functions \u51FD\u6570\u5E93</strong>",id:"ai-functions-\u51FD\u6570\u5E93",level:3},{value:"\u4E8C\u3001\u641C\u7D22\u529F\u80FD\u5168\u9762\u5347\u7EA7\uFF0C\u8D4B\u80FD\u5168\u6587\u68C0\u7D22",id:"\u4E8C\u641C\u7D22\u529F\u80FD\u5168\u9762\u5347\u7EA7\u8D4B\u80FD\u5168\u6587\u68C0\u7D22",level:2},{value:"<strong>\u65B0\u589ESearch \u51FD\u6570\uFF1A\u7EDF\u4E00\u5165\u53E3\u7684\u8F7B\u91CF DSL \u5168\u6587\u68C0\u7D22</strong>",id:"\u65B0\u589Esearch-\u51FD\u6570\u7EDF\u4E00\u5165\u53E3\u7684\u8F7B\u91CF-dsl-\u5168\u6587\u68C0\u7D22",level:3},{value:"<strong>\u6838\u5FC3\u4EAE\u70B9</strong>",id:"\u6838\u5FC3\u4EAE\u70B9",level:4},{value:"<strong>DSL\u8BED\u6CD5\u652F\u6301\u7B80\u4ECB</strong>",id:"dsl\u8BED\u6CD5\u652F\u6301\u7B80\u4ECB",level:4},{value:"<strong>\u4F7F\u7528\u65B9\u5F0F\u4E3E\u4F8B</strong>",id:"\u4F7F\u7528\u65B9\u5F0F\u4E3E\u4F8B",level:4},{value:"<strong>\u6587\u672C\u68C0\u7D22\u6253\u5206</strong>",id:"\u6587\u672C\u68C0\u7D22\u6253\u5206",level:3},{value:"<strong>\u4F7F\u7528\u65B9\u5F0F\u4E3E\u4F8B</strong>",id:"\u4F7F\u7528\u65B9\u5F0F\u4E3E\u4F8B-1",level:4},{value:"<strong>\u529F\u80FD\u7279\u6027\u548C\u9650\u5236</strong>",id:"\u529F\u80FD\u7279\u6027\u548C\u9650\u5236",level:4},{value:"\u652F\u6301\u7684\u7D22\u5F15\u7C7B\u578B",id:"\u652F\u6301\u7684\u7D22\u5F15\u7C7B\u578B",level:5},{value:"\u652F\u6301\u7684\u6587\u672C\u68C0\u7D22\u7B97\u5B50",id:"\u652F\u6301\u7684\u6587\u672C\u68C0\u7D22\u7B97\u5B50",level:5},{value:"\u6CE8\u610F\u4E8B\u9879",id:"\u6CE8\u610F\u4E8B\u9879",level:5},{value:"\u5012\u6392\u7D22\u5F15\u5206\u8BCD\u80FD\u529B\u589E\u5F3A",id:"\u5012\u6392\u7D22\u5F15\u5206\u8BCD\u80FD\u529B\u589E\u5F3A",level:3},{value:"\u589E\u52A0\u4E09\u79CD\u5185\u7F6E\u5206\u8BCD\u5668",id:"\u589E\u52A0\u4E09\u79CD\u5185\u7F6E\u5206\u8BCD\u5668",level:4},{value:"ICU\uFF08International Components for Unicode\uFF09\u5206\u8BCD\u5668",id:"icuinternational-components-for-unicode\u5206\u8BCD\u5668",level:5},{value:"IK\u5206\u8BCD\u5668",id:"ik\u5206\u8BCD\u5668",level:5},{value:"Basic\u5206\u8BCD\u5668",id:"basic\u5206\u8BCD\u5668",level:5},{value:"\u65B0\u589E\u81EA\u5B9A\u4E49\u5206\u8BCD\u80FD\u529B",id:"\u65B0\u589E\u81EA\u5B9A\u4E49\u5206\u8BCD\u80FD\u529B",level:4},{value:"\u4F7F\u7528\u65B9\u5F0F\u4E3E\u4F8B1",id:"\u4F7F\u7528\u65B9\u5F0F\u4E3E\u4F8B1",level:5},{value:"\u4F7F\u7528\u65B9\u5F0F\u4E3E\u4F8B2",id:"\u4F7F\u7528\u65B9\u5F0F\u4E3E\u4F8B2",level:5},{value:"\u4E09\u3001\u79BB\u7EBF\u8BA1\u7B97\u80FD\u529B\u5F3A\u5316\uFF0C\u4FDD\u969C\u5927\u89C4\u6A21\u4EFB\u52A1\u7A33\u5B9A\u8FD0\u884C",id:"\u4E09\u79BB\u7EBF\u8BA1\u7B97\u80FD\u529B\u5F3A\u5316\u4FDD\u969C\u5927\u89C4\u6A21\u4EFB\u52A1\u7A33\u5B9A\u8FD0\u884C",level:2},{value:"BE\u914D\u7F6E\u9879",id:"be\u914D\u7F6E\u9879",level:3},{value:"FE Session Variable",id:"fe-session-variable",level:3},{value:"\u5BA1\u8BA1\u65E5\u5FD7",id:"\u5BA1\u8BA1\u65E5\u5FD7",level:3},{value:"Profile",id:"profile",level:3},{value:"\u7CFB\u7EDF\u8868 backend_active_tasks",id:"\u7CFB\u7EDF\u8868-backend_active_tasks",level:3},{value:"\u6D4B\u8BD5",id:"\u6D4B\u8BD5",level:3},{value:"\u56DB\u3001\u6570\u636E\u8D28\u91CF\u5168\u94FE\u8DEF\u4FDD\u969C\uFF0C\u7B51\u7262\u5206\u6790\u7ED3\u679C\u53EF\u4FE1\u57FA\u77F3",id:"\u56DB\u6570\u636E\u8D28\u91CF\u5168\u94FE\u8DEF\u4FDD\u969C\u7B51\u7262\u5206\u6790\u7ED3\u679C\u53EF\u4FE1\u57FA\u77F3",level:2},{value:"Cast",id:"cast",level:3},{value:"\u4E25\u683C\u6A21\u5F0F\u3001\u975E\u4E25\u683C\u6A21\u5F0F\u3001try_cast",id:"\u4E25\u683C\u6A21\u5F0F\u975E\u4E25\u683C\u6A21\u5F0Ftry_cast",level:3},{value:"\u6D6E\u70B9\u7C7B\u578B\u8BA1\u7B97",id:"\u6D6E\u70B9\u7C7B\u578B\u8BA1\u7B97",level:3},{value:"\u65E5\u671F\u51FD\u6570",id:"\u65E5\u671F\u51FD\u6570",level:3},{value:"\u4E94\u3001\u6027\u80FD\u4F18\u5316",id:"\u4E94\u6027\u80FD\u4F18\u5316",level:2},{value:"<strong>TopN \u5EF6\u8FDF\u7269\u5316</strong>",id:"topn-\u5EF6\u8FDF\u7269\u5316",level:3},{value:"<strong>SQL Cache \u7F13\u5B58</strong>",id:"sql-cache-\u7F13\u5B58",level:3},{value:"JSON \u6027\u80FD\u4F18\u5316",id:"json-\u6027\u80FD\u4F18\u5316",level:3},{value:"\u516D\u3001\u66F4\u6613\u7528\u7684\u8D44\u6E90\u7BA1\u63A7",id:"\u516D\u66F4\u6613\u7528\u7684\u8D44\u6E90\u7BA1\u63A7",level:2},{value:"\u603B\u7ED3",id:"\u603B\u7ED3",level:2},{value:"\u81F4\u8C22",id:"\u81F4\u8C22",level:2}];function o(n){let e={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",h5:"h5",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.a)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.p,{children:"\u4EB2\u7231\u7684\u793E\u533A\u5C0F\u4F19\u4F34\u4EEC\uFF0C\u6211\u4EEC\u5F88\u9AD8\u5174\u5730\u5411\u5927\u5BB6\u5BA3\u5E03\uFF0C\u8FD1\u671F\u6211\u4EEC\u8FCE\u6765\u4E86 Apache Doris 4.0 \u7248\u672C\u7684\u6B63\u5F0F\u53D1\u5E03\uFF0C\u6B22\u8FCE\u5927\u5BB6\u4E0B\u8F7D\u4F7F\u7528\u4F53\u9A8C\u3002\u672C\u6B21\u53D1\u5E03\u56F4\u7ED5 \u201CAI \u9A71\u52A8\u3001\u641C\u7D22\u589E\u5F3A\u3001\u79BB\u7EBF\u63D0\u6548\u201D \u4E09\u5927\u6838\u5FC3\u65B9\u5411\uFF0C\u65B0\u589E\u5411\u91CF\u7D22\u5F15\u3001AI \u51FD\u6570\u7B49\u5173\u952E\u7279\u6027\uFF0C\u5B8C\u5584\u641C\u7D22\u529F\u80FD\u77E9\u9635\uFF0C\u4F18\u5316\u79BB\u7EBF\u8BA1\u7B97\u7A33\u5B9A\u6027\u4E0E\u8D44\u6E90\u5229\u7528\u7387\uFF0C\u5E76\u901A\u8FC7\u591A\u9879\u5E95\u5C42\u6539\u8FDB\u63D0\u5347\u67E5\u8BE2\u6027\u80FD\u4E0E\u6570\u636E\u8D28\u91CF\uFF0C\u4E3A\u7528\u6237\u6784\u5EFA\u66F4\u9AD8\u6548\u3001\u66F4\u7075\u6D3B\u7684\u4F01\u4E1A\u7EA7\u6570\u636E\u5206\u6790\u5E73\u53F0\u3002"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"\u5728 4.0 \u7248\u672C\u7684\u7814\u53D1\u8FC7\u7A0B\u4E2D\uFF0C\u6709\u8D85\u8FC7 200 \u540D\u8D21\u732E\u8005\u4E3A Apache Doris \u63D0\u4EA4\u4E86 9000+ \u4E2A\u4F18\u5316\u4E0E\u4FEE\u590D\u3002"}),"\u5728\u6B64\u5411\u6240\u6709\u53C2\u4E0E\u7248\u672C\u7814\u53D1\u3001\u6D4B\u8BD5\u548C\u9700\u6C42\u53CD\u9988\u7684\u8D21\u732E\u8005\u4EEC\u8868\u793A\u6700\u8877\u5FC3\u7684\u611F\u8C22\u3002"]}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["GitHub \u4E0B\u8F7D\uFF1A",(0,l.jsx)(e.a,{href:"https://github.com/apache/doris/releases",children:"https://github.com/apache/doris/releases"})]}),"\n",(0,l.jsxs)(e.li,{children:["\u5B98\u7F51\u4E0B\u8F7D\uFF1A",(0,l.jsx)(e.a,{href:"https://doris.apache.org/download",children:"https://doris.apache.org/download"})]}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"\u4E00ai-\u80FD\u529B\u6DF1\u5EA6\u96C6\u6210\u5F00\u542F\u667A\u80FD\u5206\u6790\u65B0\u8303\u5F0F",children:"\u4E00\u3001AI \u80FD\u529B\u6DF1\u5EA6\u96C6\u6210\uFF0C\u5F00\u542F\u667A\u80FD\u5206\u6790\u65B0\u8303\u5F0F"}),"\n",(0,l.jsx)(e.p,{children:"\u968F\u7740\u5927\u6A21\u578B\u4E0E\u5411\u91CF\u68C0\u7D22\u6280\u672F\u5728\u4F01\u4E1A\u7EA7\u573A\u666F\u7684\u52A0\u901F\u843D\u5730\u4E0E\u6DF1\u5EA6\u6E17\u900F\uFF0C\u672C\u6B21 Doris \u7248\u672C\u8FED\u4EE3\u5C06\u91CD\u70B9\u5F3A\u5316 AI \u539F\u751F\u652F\u6301\u80FD\u529B\u3002\u901A\u8FC7\u5411\u91CF\u7D22\u5F15\u6280\u672F\uFF0C\u9AD8\u6548\u878D\u5408\u4F01\u4E1A\u7684\u7ED3\u6784\u5316\u4E0E\u975E\u7ED3\u6784\u5316\u6570\u636E\uFF0CDoris \u5C06\u7A81\u7834\u4F20\u7EDF\u6570\u636E\u5E93\u7684\u529F\u80FD\u8FB9\u754C\uFF0C\u76F4\u63A5\u5347\u7EA7\u4E3A\u4F01\u4E1A\u6838\u5FC3\u7684 \u201CAI \u5206\u6790\u4E2D\u67A2\u201D\uFF0C\u4E3A\u4E1A\u52A1\u7AEF\u7684\u667A\u80FD\u5316\u51B3\u7B56\u4E0E\u521B\u65B0\u5B9E\u8DF5\u63D0\u4F9B\u7A33\u5B9A\u3001\u9AD8\u6548\u7684\u5E95\u5C42\u6570\u636E\u652F\u6491\u3002"}),"\n",(0,l.jsx)(e.h3,{id:"\u5411\u91CF\u7D22\u5F15vector-index",children:(0,l.jsx)(e.strong,{children:"\u5411\u91CF\u7D22\u5F15\uFF08Vector Index\uFF09"})}),"\n",(0,l.jsx)(e.p,{children:"\u6B63\u5F0F\u5F15\u5165\u5411\u91CF\u7D22\u5F15\u529F\u80FD\uFF0C\u652F\u6301\u5BF9\u9AD8\u7EF4\u5411\u91CF\u6570\u636E\uFF08\u5982\u6587\u672C\u5D4C\u5165\u3001\u56FE\u50CF\u7279\u5F81\u7B49\uFF09\u8FDB\u884C\u9AD8\u6548\u5B58\u50A8\u4E0E\u68C0\u7D22\u3002\u7ED3\u5408 Doris \u539F\u751F\u7684 SQL \u5206\u6790\u80FD\u529B\uFF0C\u7528\u6237\u53EF\u76F4\u63A5\u5728\u6570\u636E\u5E93\u5185\u5B8C\u6210 \u201C\u7ED3\u6784\u5316\u6570\u636E\u67E5\u8BE2 + \u5411\u91CF\u76F8\u4F3C\u6027\u641C\u7D22\u201D \u7684\u4E00\u4F53\u5316\u5206\u6790\uFF0C\u65E0\u9700\u8DE8\u7CFB\u7EDF\u6574\u5408\uFF0C\u5927\u5E45\u964D\u4F4E AI \u5E94\u7528\uFF08\u5982\u667A\u80FD\u63A8\u8350\u3001\u8BED\u4E49\u641C\u7D22\u3001\u56FE\u50CF\u68C0\u7D22\uFF09\u7684\u5F00\u53D1\u4E0E\u90E8\u7F72\u6210\u672C\u3002"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5411\u91CF\u7D22\u5F15\u68C0\u7D22\u51FD\u6570\u4ECB\u7ECD"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"l2_distance_approximate()"})," \u4F7F\u7528 HNSW \u7D22\u5F15\u6309 ",(0,l.jsx)(e.strong,{children:"\u6B27\u6C0F\u8DDD\u79BB\uFF08L2\uFF09"})," \u8FD1\u4F3C\u8BA1\u7B97\u76F8\u4F3C\u5EA6\u3002",(0,l.jsx)(e.strong,{children:"\u6570\u503C\u8D8A\u5C0F\u8D8A\u76F8\u4F3C"}),(0,l.jsx)(e.strong,{children:"\u3002"})]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"inner_product_approximate()"}),"\u4F7F\u7528 HNSW \u7D22\u5F15\u6309 ",(0,l.jsx)(e.strong,{children:"\u5185\u79EF\uFF08Inner Product\uFF09"})," \u8FD1\u4F3C\u8BA1\u7B97\u76F8\u4F3C\u5EA6\u3002",(0,l.jsx)(e.strong,{children:"\u6570\u503C\u8D8A\u5927\u8D8A\u76F8\u4F3C\u3002"})]}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u793A\u4F8B"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-SQL",children:'-- 1) \u5EFA\u8868\u4E0E\u7D22\u5F15\nCREATE TABLE doc_store (\n  id BIGINT,\n  title STRING,\n  tags ARRAY<STRING>,\n  embedding ARRAY<FLOAT> NOT NULL,\n  INDEX idx_vec (embedding) USING ANN PROPERTIES (\n      "index_type"  = "hnsw",\n      "metric_type" = "l2_distance",\n      "dim"         = "768",\n      "quantizer"   = "flat" -- \u53EF\u9009\uFF1Aflat / sq8 / sq4\n  ),\n  INDEX idx_title (title) USING INVERTED PROPERTIES ("parser" = "english")\n)\nDUPLICATE KEY(id)\nDISTRIBUTED BY HASH(id) BUCKETS 16\nPROPERTIES("replication_num"="1");\n\n-- 2) TopN \u6700\u8FD1\u90BB\uFF08\u5EFA\u8BAE\u4F7F\u7528 PreparedStatement \u4F20\u5165\u5411\u91CF\uFF09, \u7528\u771F\u5B9E\u5411\u91CF\u66FF\u6362\u4E0B\u9762\u7684 ... \u5360\u4F4D\u7B26\nSELECT id, l2_distance_approximate(embedding, [...]) AS dist\nFROM doc_store\nORDER BY dist ASC\nLIMIT 10;\n\n-- 3) \u5E26\u8FC7\u6EE4\u6761\u4EF6\u7684 ANN\uFF08\u5148\u8FC7\u6EE4\u540ETopN\uFF0C\u4FDD\u969C\u53EC\u56DE\uFF09, \u7528\u771F\u5B9E\u5411\u91CF\u66FF\u6362\u4E0B\u9762\u7684 ... \u5360\u4F4D\u7B26\nSELECT id, title,\n       l2_distance_approximate(embedding, [...]) AS dist\nFROM doc_store\nWHERE title MATCH_ANY \'music\'                -- \u4F7F\u7528\u5012\u6392\u7D22\u5F15\u5FEB\u901F\u8FC7\u6EE4\n  AND array_contains(tags, \'recommendation\') -- \u7ED3\u6784\u5316\u8FC7\u6EE4\nORDER BY dist ASC\nLIMIT 5;\n\n-- 4) \u8303\u56F4\u67E5\u8BE2\uFF0C, \u7528\u771F\u5B9E\u5411\u91CF\u66FF\u6362\u4E0B\u9762\u7684 ... \u5360\u4F4D\u7B26\nSELECT COUNT(*)\nFROM doc_store\nWHERE l2_distance_approximate(embedding, [...]) <= 0.35;\n'})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u5EFA\u7D22\u5F15\u53C2\u6570"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"index_type"}),"\uFF1A\u5FC5\u586B\uFF0C\u5F53\u524D\u652F\u6301 ",(0,l.jsx)(e.code,{children:"hnsw"}),"\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"metric_type"}),"\uFF1A\u5FC5\u586B\uFF0C",(0,l.jsx)(e.code,{children:"l2_distance"})," / ",(0,l.jsx)(e.code,{children:"inner_product"}),"\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"dim"}),"\uFF1A\u5FC5\u586B\uFF0C\u6B63\u6574\u6570\uFF0C\u9700\u4E0E\u5BFC\u5165\u5411\u91CF\u7EF4\u5EA6\u4E25\u683C\u4E00\u81F4\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"max_degree"}),"\uFF1A\u53EF\u9009\uFF0C\u9ED8\u8BA4 ",(0,l.jsx)(e.strong,{children:"32"}),"\uFF1B\u63A7\u5236 HNSW \u56FE\u8282\u70B9\u51FA\u5EA6\uFF08M\uFF09\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"ef_construction"}),"\uFF1A\u53EF\u9009\uFF0C\u9ED8\u8BA4 ",(0,l.jsx)(e.strong,{children:"40"}),"\uFF1B\u6784\u5EFA\u9636\u6BB5\u5019\u9009\u961F\u5217\u957F\u5EA6\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"quant"}),"\uFF1A\u53EF\u9009\uFF0C",(0,l.jsx)(e.code,{children:"flat"}),"\uFF08\u9ED8\u8BA4\uFF09/ ",(0,l.jsx)(e.code,{children:"sq8"})," / ",(0,l.jsx)(e.code,{children:"sq4"}),"\uFF1B\u91CF\u5316\u53EF\u663E\u8457\u964D\u4F4E\u5185\u5B58\u5360\u7528\uFF0CSQ8 \u7D22\u5F15\u4F53\u79EF\u7EA6\u4E3A FLAT \u7684 ",(0,l.jsx)(e.strong,{children:"1/3"}),"\uFF0C\u4EE5\u5C0F\u5E45\u53EC\u56DE\u635F\u5931\u6362\u53D6\u66F4\u9AD8\u5BB9\u91CF/\u66F4\u4F4E\u6210\u672C\u3002"]}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u6CE8\u610F\u4E8B\u9879"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["Doris ",(0,l.jsx)(e.strong,{children:"\u9ED8\u8BA4\u91C7\u7528\u201C\u524D\u8FC7\u6EE4\u201D"}),"\uFF1A\u5148\u7528\u53EF\u7CBE\u786E\u5B9A\u4F4D\u7684\u7D22\u5F15\uFF08\u5982\u5012\u6392\uFF09\u505A\u8C13\u8BCD\u8FC7\u6EE4\uFF0C\u518D\u5728\u5269\u4F59\u96C6\u5408\u4E0A\u8FDB\u884C ANN TopN\uFF0C\u786E\u4FDD\u7ED3\u679C\u53EF\u89E3\u91CA\u4E0E\u53EC\u56DE\u7A33\u5B9A\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:["\u5982 SQL \u4E2D\u51FA\u73B0 ",(0,l.jsx)(e.strong,{children:"\u65E0\u6CD5\u7531\u4E8C\u7EA7\u7D22\u5F15\u7CBE\u786E\u5B9A\u4F4D"})," \u7684\u8C13\u8BCD\uFF08\u4F8B\uFF1A",(0,l.jsx)(e.code,{children:"ROUND(id) > 100"})," \u4E14 ",(0,l.jsx)(e.code,{children:"id"})," \u65E0\u5012\u6392\u7B49\u4E8C\u7EA7\u7D22\u5F15\uFF09\uFF0C\u4E3A\u4FDD\u8BC1\u524D\u8FC7\u6EE4\u8BED\u4E49\u4E0E\u6B63\u786E\u6027\uFF0C\u7CFB\u7EDF\u5C06 ",(0,l.jsx)(e.strong,{children:"\u56DE\u9000\u7CBE\u786E\u66B4\u529B\u641C\u7D22"}),"\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:["\u5411\u91CF\u5217\u9700\u4E3A ",(0,l.jsx)(e.strong,{children:(0,l.jsx)(e.code,{children:"ARRAY<FLOAT> NOT NULL"})}),"\uFF0C\u4E14\u5BFC\u5165\u5411\u91CF\u7EF4\u5EA6\u5FC5\u987B\u4E0E\u7D22\u5F15 ",(0,l.jsx)(e.code,{children:"dim"})," \u4E00\u81F4\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:["ANN \u76EE\u524D\u4EC5\u652F\u6301 ",(0,l.jsx)(e.strong,{children:"Duplicate Key"})," \u8868\u6A21\u578B\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(e.h3,{id:"ai-functions-\u51FD\u6570\u5E93",children:[(0,l.jsx)(e.strong,{children:"AI"})," ",(0,l.jsx)(e.strong,{children:"Functions \u51FD\u6570\u5E93"})]}),"\n",(0,l.jsx)(e.p,{children:"\u8BA9\u6570\u636E\u5206\u6790\u5E08\u80FD\u591F\u76F4\u63A5\u901A\u8FC7\u7B80\u5355\u7684 SQL \u8BED\u53E5\uFF0C\u8C03\u7528\u5927\u8BED\u8A00\u6A21\u578B\u8FDB\u884C\u6587\u672C\u5904\u7406\u3002\u65E0\u8BBA\u662F\u63D0\u53D6\u7279\u5B9A\u91CD\u8981\u4FE1\u606F\u3001\u5BF9\u8BC4\u8BBA\u8FDB\u884C\u60C5\u611F\u5206\u7C7B\uFF0C\u8FD8\u662F\u751F\u6210\u7B80\u77ED\u7684\u6587\u672C\u6458\u8981\uFF0C\u73B0\u5728\u90FD\u80FD\u5728\u6570\u636E\u5E93\u5185\u90E8\u65E0\u7F1D\u5B8C\u6210\uFF1A"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.a,{href:"https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-functions/ai-functions/ai-classify",children:"AI_CLASSIFY"}),"\uFF1A \u5728\u7ED9\u5B9A\u7684\u6807\u7B7E\u4E2D\u63D0\u53D6\u4E0E\u6587\u672C\u5185\u5BB9\u5339\u914D\u5EA6\u6700\u9AD8\u7684\u5355\u4E2A\u6807\u7B7E\u5B57\u7B26\u4E32"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.a,{href:"https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-functions/ai-functions/ai-extract",children:"AI_EXTRACT"}),"\uFF1A \u6839\u636E\u6587\u672C\u5185\u5BB9\uFF0C\u4E3A\u6BCF\u4E2A\u7ED9\u5B9A\u6807\u7B7E\u63D0\u53D6\u76F8\u5173\u4FE1\u606F\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.a,{href:"https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-functions/ai-functions/ai-filter",children:"AI_FILTER"}),": \u5224\u65AD\u6587\u672C\u5185\u5BB9\u662F\u5426\u6B63\u786E\uFF0C\u8FD4\u56DE\u503C\u4E3Abool\u7C7B\u578B\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.a,{href:"https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-functions/ai-functions/ai-fixgrammar",children:"AI_FIXGRAMMAR"}),"\uFF1A \u4FEE\u590D\u6587\u672C\u4E2D\u7684\u8BED\u6CD5\u3001\u62FC\u5199\u9519\u8BEF\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.a,{href:"https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-functions/ai-functions/ai-generate",children:"AI_GENERATE"}),"\uFF1A \u57FA\u4E8E\u53C2\u6570\u5185\u5BB9\u751F\u6210\u5185\u5BB9\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.a,{href:"https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-functions/ai-functions/ai-mask",children:"AI_MASK"}),": \u6839\u636E\u6807\u7B7E\uFF0C\u5C06\u539F\u6587\u4E2D\u7684\u654F\u611F\u4FE1\u606F\u7528",(0,l.jsx)(e.code,{children:"[MASKED]"}),"\u8FDB\u884C\u66FF\u6362\u5904\u7406\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.a,{href:"https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-functions/ai-functions/ai-sentiment",children:"AI_SENTIMENT"}),"\uFF1A \u5206\u6790\u6587\u672C\u60C5\u611F\u503E\u5411\uFF0C\u8FD4\u56DE\u503C\u4E3A",(0,l.jsx)(e.code,{children:"positive"}),"\u3001",(0,l.jsx)(e.code,{children:"negative"}),"\u3001",(0,l.jsx)(e.code,{children:"neutral"}),"\u3001",(0,l.jsx)(e.code,{children:"mixed"}),"\u5176\u4E2D\u4E4B\u4E00\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.a,{href:"https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-functions/ai-functions/ai-similarity",children:"AI_SIMILARITY"}),"\uFF1A \u5224\u65AD\u4E24\u6587\u672C\u7684\u8BED\u4E49\u76F8\u4F3C\u5EA6\uFF0C\u8FD4\u56DE\u503C\u4E3A 0 - 10 \u4E4B\u95F4\u7684\u6D6E\u70B9\u6570\uFF0C\u503C\u8D8A\u5927\u4EE3\u8868\u8BED\u4E49\u8D8A\u76F8\u4F3C\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.a,{href:"https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-functions/ai-functions/ai-summarize",children:"AI_SUMMARIZE"}),"\uFF1A \u5BF9\u6587\u672C\u8FDB\u884C\u9AD8\u5EA6\u603B\u7ED3\u6982\u62EC\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.a,{href:"https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-functions/ai-functions/ai-translate",children:"AI_TRANSLATE"}),"\uFF1A \u5C06\u6587\u672C\u7FFB\u8BD1\u4E3A\u6307\u5B9A\u8BED\u8A00\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.a,{href:"https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-functions/aggregate-functions/ai-agg",children:"AI_AGG"}),": \u5BF9\u591A\u6761\u6587\u672C\u8FDB\u884C\u8DE8\u884C\u805A\u5408\u5206\u6790\u3002"]}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u76EE\u524D\u53EF\u4EE5\u652F\u6301\uFF1AOpenAI\u3001Anthropic\u3001Gemini\u3001DeepSeek\u3001Local\u3001MoonShot\u3001MiniMax\u3001Zhipu\u3001Qwen\u3001Baichuan\u3002\u4F8B\u5982\uFF0C\u6211\u4EEC\u6A21\u62DF\u4E00\u4E2A\u7B80\u5386\u7B5B\u9009\u7684\u9700\u6C42\uFF0C\u53EF\u4EE5\u901A\u8FC7\u4EE5\u4E0BSQL \u6765\u5728\u8BED\u4E49\u5C42\u8FDB\u884C\u7B5B\u9009\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u4EE5\u4E0B\u8868\u6A21\u62DF\u5728\u62DB\u8058\u65F6\u7684\u5019\u9009\u4EBA\u7B80\u5386\u548C\u804C\u4E1A\u8981\u6C42\uFF1A"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-SQL",children:"CREATE TABLE candidate_profiles (\n    candidate_id INT,\n    name         VARCHAR(50),\n    self_intro   VARCHAR(500)\n)\nDUPLICATE KEY(candidate_id)\nDISTRIBUTED BY HASH(candidate_id) BUCKETS 1\nPROPERTIES (\n    \"replication_num\" = \"1\"\n);\n\nCREATE TABLE job_requirements (\n    job_id   INT,\n    title    VARCHAR(100),\n    jd_text  VARCHAR(500)\n)\nDUPLICATE KEY(job_id)\nDISTRIBUTED BY HASH(job_id) BUCKETS 1\nPROPERTIES (\n    \"replication_num\" = \"1\"\n);\n\nINSERT INTO candidate_profiles VALUES\n(1, 'Alice', 'I am a senior backend engineer with 7 years of experience in Java, Spring Cloud and high-concurrency systems.'),\n(2, 'Bob',   'Frontend developer focusing on React, TypeScript and performance optimization for e-commerce sites.'),\n(3, 'Cathy', 'Data scientist specializing in NLP, large language models and recommendation systems.');\n\nINSERT INTO job_requirements VALUES\n(101, 'Backend Engineer', 'Looking for a senior backend engineer with deep Java expertise and experience designing distributed systems.'),\n(102, 'ML Engineer',      'Seeking a data scientist or ML engineer familiar with NLP and large language models.');\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53EF\u4EE5\u901A\u8FC7AI_FILTER\u628A\u804C\u4E1A\u8981\u6C42\u548C\u5019\u9009\u4EBA\u7B80\u4ECB\u505A\u8BED\u4E49\u5339\u914D\uFF0C\u7B5B\u9009\u51FA\u5408\u9002\u7684\u5019\u9009\u4EBA\uFF1A"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-SQL",children:"SELECT\n    c.candidate_id, c.name,\n    j.job_id, j.title\nFROM candidate_profiles AS c\nJOIN job_requirements AS j\nWHERE AI_FILTER(CONCAT('Does the following candidate self-introduction match the job description?', \n                'Job: ', j.jd_text, ' Candidate: ', c.self_intro));\n+--------------+-------+--------+------------------+\n| candidate_id | name  | job_id | title            |\n+--------------+-------+--------+------------------+\n|            3 | Cathy |    102 | ML Engineer      |\n|            1 | Alice |    101 | Backend Engineer |\n+--------------+-------+--------+------------------+\n"})}),"\n",(0,l.jsx)(e.h2,{id:"\u4E8C\u641C\u7D22\u529F\u80FD\u5168\u9762\u5347\u7EA7\u8D4B\u80FD\u5168\u6587\u68C0\u7D22",children:"\u4E8C\u3001\u641C\u7D22\u529F\u80FD\u5168\u9762\u5347\u7EA7\uFF0C\u8D4B\u80FD\u5168\u6587\u68C0\u7D22"}),"\n",(0,l.jsx)(e.p,{children:"\u9488\u5BF9\u4F01\u4E1A\u7EA7\u641C\u7D22\u573A\u666F\u7684\u591A\u6837\u5316\u9700\u6C42\uFF0C\u672C\u6B21\u7248\u672C\u5B8C\u5584\u641C\u7D22\u80FD\u529B\u77E9\u9635\uFF0C\u63D0\u4F9B\u66F4\u7CBE\u51C6\u3001\u66F4\u7075\u6D3B\u7684\u6587\u672C\u68C0\u7D22\u4F53\u9A8C\uFF1A"}),"\n",(0,l.jsx)(e.h3,{id:"\u65B0\u589Esearch-\u51FD\u6570\u7EDF\u4E00\u5165\u53E3\u7684\u8F7B\u91CF-dsl-\u5168\u6587\u68C0\u7D22",children:(0,l.jsx)(e.strong,{children:"\u65B0\u589ESearch \u51FD\u6570\uFF1A\u7EDF\u4E00\u5165\u53E3\u7684\u8F7B\u91CF DSL \u5168\u6587\u68C0\u7D22"})}),"\n",(0,l.jsx)(e.h4,{id:"\u6838\u5FC3\u4EAE\u70B9",children:(0,l.jsx)(e.strong,{children:"\u6838\u5FC3\u4EAE\u70B9"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u4E00\u4E2A\u51FD\u6570\u641E\u5B9A\u5168\u6587\u68C0\u7D22"}),"\uFF1A\u5C06\u590D\u6742\u6587\u672C\u68C0\u7D22\u7B97\u5B50\u6536\u62E2\u5230 ",(0,l.jsx)(e.code,{children:"SEARCH()"})," \u7EDF\u4E00\u5165\u53E3\uFF0C\u8BED\u6CD5\u8D34\u8FD1 ",(0,l.jsx)(e.strong,{children:"Elasticsearch Query String"}),"\uFF0C\u6781\u5927\u964D\u4F4E SQL \u62FC\u63A5\u590D\u6742\u5EA6\u4E0E\u8FC1\u79FB\u6210\u672C\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u591A\u6761\u4EF6\u7D22\u5F15\u4E0B\u63A8"}),"\uFF1A\u590D\u6742\u68C0\u7D22\u6761\u4EF6\u76F4\u63A5\u4E0B\u63A8\u81F3\u5012\u6392\u7D22\u5F15\u6267\u884C\uFF0C\u907F\u514D\u201C\u89E3\u6790\u4E00\u6B21\u3001\u62FC\u63A5\u4E00\u6B21\u201D\u7684\u91CD\u590D\u5F00\u9500\uFF0C\u663E\u8457\u63D0\u5347\u6027\u80FD\u3002"]}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"dsl\u8BED\u6CD5\u652F\u6301\u7B80\u4ECB",children:(0,l.jsx)(e.strong,{children:"DSL\u8BED\u6CD5\u652F\u6301\u7B80\u4ECB"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\u5F53\u524D\u7248\u672C\u652F\u6301\u7684\u8BED\u6CD5\u529F\u80FD\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\u8BCD\u9879\u67E5\u8BE2\uFF08Term\uFF09\uFF1A",(0,l.jsx)(e.code,{children:"field:value"})]}),"\n",(0,l.jsxs)(e.li,{children:["ANY / ALL \u591A\u503C\u5339\u914D\uFF1A",(0,l.jsx)(e.code,{children:"field:ANY(v1 v2 ...)"})," / ",(0,l.jsx)(e.code,{children:"field:ALL(v1 v2 ...)"})]}),"\n",(0,l.jsxs)(e.li,{children:["\u5E03\u5C14\u7EC4\u5408\uFF1A",(0,l.jsx)(e.code,{children:"AND / OR / NOT"})," \u4E0E\u62EC\u53F7\u5206\u7EC4"]}),"\n",(0,l.jsxs)(e.li,{children:["\u591A\u5B57\u6BB5\u641C\u7D22\uFF1A\u5728\u4E00\u4E2A ",(0,l.jsx)(e.code,{children:"search()"})," \u4E2D\u5BF9\u591A\u4E2A\u5B57\u6BB5\u505A\u5E03\u5C14\u7EC4\u5408"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\u540E\u7EED\u7248\u672C\u4F1A\u6301\u7EED\u8FED\u4EE3\u4EE5\u652F\u6301\u4EE5\u4E0B\u8BED\u6CD5\u529F\u80FD\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u77ED\u8BED"}),"\n",(0,l.jsx)(e.li,{children:"\u524D\u7F00"}),"\n",(0,l.jsx)(e.li,{children:"\u901A\u914D\u7B26"}),"\n",(0,l.jsx)(e.li,{children:"\u6B63\u5219"}),"\n",(0,l.jsx)(e.li,{children:"\u8303\u56F4"}),"\n",(0,l.jsx)(e.li,{children:"\u5217\u8868"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"\u4F7F\u7528\u65B9\u5F0F\u4E3E\u4F8B",children:(0,l.jsx)(e.strong,{children:"\u4F7F\u7528\u65B9\u5F0F\u4E3E\u4F8B"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-SQL",children:"-- \u8BCD\u9879\u67E5\u8BE2\nSELECT * FROM docs WHERE search('title:apache');\n\n-- ANY\uFF1A\u5339\u914D\u4EFB\u610F\u4E00\u4E2A\u503C\nSELECT * FROM docs WHERE search('tags:ANY(java python golang)');\n\n-- ALL\uFF1A\u540C\u65F6\u5305\u542B\u591A\u4E2A\u503C\nSELECT * FROM docs WHERE search('tags:ALL(machine learning)');\n\n-- \u5E03\u5C14 + \u591A\u5B57\u6BB5\nSELECT * FROM docs\nWHERE search('(title:Doris OR content:database) AND NOT category:archived');\n\n-- \u7ED3\u5408\u7ED3\u6784\u5316\u8FC7\u6EE4\uFF08\u7ED3\u6784\u5316\u6761\u4EF6\u4E0D\u53C2\u4E0E\u6253\u5206\uFF09\nSELECT * FROM docs\nWHERE search('title:apache') AND publish_date >= '2025-01-01';\n"})}),"\n",(0,l.jsx)(e.h3,{id:"\u6587\u672C\u68C0\u7D22\u6253\u5206",children:(0,l.jsx)(e.strong,{children:"\u6587\u672C\u68C0\u7D22\u6253\u5206"})}),"\n",(0,l.jsx)(e.p,{children:"\u4E3A\u4E86\u66F4\u597D\u7684\u652F\u6301\u6DF7\u5408\u68C0\u7D22\u573A\u666F\uFF0CDoris4.0\u7248\u672C\u5F15\u5165\u4E1A\u754C\u4E3B\u6D41\u7684 BM25 \u76F8\u5173\u6027\u8BC4\u5206\u7B97\u6CD5\uFF0C\u66FF\u4EE3\u4F20\u7EDF\u7684 TF-IDF \u7B97\u6CD5\u3002BM25 \u53EF\u6839\u636E\u6587\u6863\u957F\u5EA6\u52A8\u6001\u8C03\u6574\u8BCD\u9891\u6743\u91CD\uFF0C\u5728\u957F\u6587\u672C\u3001\u591A\u5B57\u6BB5\u68C0\u7D22\u573A\u666F\u4E0B\uFF08\u5982\u65E5\u5FD7\u5206\u6790\u3001\u6587\u6863\u68C0\u7D22\uFF09\uFF0C\u663E\u8457\u63D0\u5347\u7ED3\u679C\u76F8\u5173\u6027\u4E0E\u68C0\u7D22\u51C6\u786E\u6027\u3002"}),"\n",(0,l.jsx)(e.h4,{id:"\u4F7F\u7528\u65B9\u5F0F\u4E3E\u4F8B-1",children:(0,l.jsx)(e.strong,{children:"\u4F7F\u7528\u65B9\u5F0F\u4E3E\u4F8B"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-SQL",children:"SELECT *, score() as score \nFROM search_demo \nWHERE content MATCH_ANY 'search query' \nORDER BY score DESC \nLIMIT 10;\n"})}),"\n",(0,l.jsx)(e.h4,{id:"\u529F\u80FD\u7279\u6027\u548C\u9650\u5236",children:(0,l.jsx)(e.strong,{children:"\u529F\u80FD\u7279\u6027\u548C\u9650\u5236"})}),"\n",(0,l.jsx)(e.h5,{id:"\u652F\u6301\u7684\u7D22\u5F15\u7C7B\u578B",children:"\u652F\u6301\u7684\u7D22\u5F15\u7C7B\u578B"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Tokenized\u7D22\u5F15\uFF1A\u9884\u5B9A\u4E49\u5206\u8BCD\u5668\u548C\u81EA\u5B9A\u4E49\u5206\u8BCD\u5668"}),"\n",(0,l.jsx)(e.li,{children:"\u975ETokenized\u7D22\u5F15\uFF1A\u4E0D\u5206\u8BCD\u7D22\u5F15"}),"\n"]}),"\n",(0,l.jsx)(e.h5,{id:"\u652F\u6301\u7684\u6587\u672C\u68C0\u7D22\u7B97\u5B50",children:"\u652F\u6301\u7684\u6587\u672C\u68C0\u7D22\u7B97\u5B50"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"MATCH_ANY"}),"\n",(0,l.jsx)(e.li,{children:"MATCH_ALL"}),"\n",(0,l.jsx)(e.li,{children:"MATCH_PHRASE"}),"\n",(0,l.jsx)(e.li,{children:"MATCH_PHRASE_PREFIX"}),"\n",(0,l.jsx)(e.li,{children:"SEARCH"}),"\n"]}),"\n",(0,l.jsx)(e.h5,{id:"\u6CE8\u610F\u4E8B\u9879",children:"\u6CE8\u610F\u4E8B\u9879"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5206\u6570\u8303\u56F4\uFF1ABM25\u5206\u6570\u6CA1\u6709\u56FA\u5B9A\u7684\u4E0A\u4E0B\u754C\uFF0C\u5206\u6570\u7684\u76F8\u5BF9\u5927\u5C0F\u6BD4\u7EDD\u5BF9\u503C\u66F4\u6709\u610F\u4E49"}),"\n",(0,l.jsx)(e.li,{children:"\u7A7A\u67E5\u8BE2\uFF1A\u5982\u679C\u67E5\u8BE2\u8BCD\u9879\u5728\u96C6\u5408\u4E2D\u4E0D\u5B58\u5728\uFF0C\u5C06\u8FD4\u56DE0\u5206"}),"\n",(0,l.jsx)(e.li,{children:"\u6587\u6863\u957F\u5EA6\u5F71\u54CD\uFF1A\u8F83\u77ED\u7684\u6587\u6863\u5728\u5305\u542B\u67E5\u8BE2\u8BCD\u9879\u65F6\u901A\u5E38\u83B7\u5F97\u66F4\u9AD8\u5206\u6570"}),"\n",(0,l.jsx)(e.li,{children:"\u67E5\u8BE2\u8BCD\u9879\u6570\u91CF\uFF1A\u591A\u8BCD\u9879\u67E5\u8BE2\u7684\u5206\u6570\u662F\u5404\u8BCD\u9879\u5206\u6570\u7684\u7EC4\u5408\uFF08\u76F8\u52A0\uFF09"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"\u5012\u6392\u7D22\u5F15\u5206\u8BCD\u80FD\u529B\u589E\u5F3A",children:"\u5012\u6392\u7D22\u5F15\u5206\u8BCD\u80FD\u529B\u589E\u5F3A"}),"\n",(0,l.jsx)(e.p,{children:"Doris \u57283.1 \u7248\u672C\u521D\u6B65\u63D0\u4F9B\u4E86\u4E00\u5B9A\u80FD\u529B\u7684\u5206\u8BCD\u80FD\u529B\uFF0C\u57284.0 \u7248\u672C\u4E2D\uFF0C\u6211\u4EEC\u5BF9\u5206\u8BCD\u80FD\u529B\u8FDB\u4E00\u6B65\u589E\u5F3A\uFF0C\u80FD\u591F\u6EE1\u8DB3\u7528\u6237\u5728\u4E0D\u540C\u573A\u666F\u4E0B\u7684\u5206\u8BCD\u548C\u6587\u672C\u68C0\u7D22\u9700\u6C42\u3002"}),"\n",(0,l.jsx)(e.h4,{id:"\u589E\u52A0\u4E09\u79CD\u5185\u7F6E\u5206\u8BCD\u5668",children:"\u589E\u52A0\u4E09\u79CD\u5185\u7F6E\u5206\u8BCD\u5668"}),"\n",(0,l.jsx)(e.h5,{id:"icuinternational-components-for-unicode\u5206\u8BCD\u5668",children:"ICU\uFF08International Components for Unicode\uFF09\u5206\u8BCD\u5668"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u9002\u7528\u573A\u666F\uFF1A\u5305\u542B\u590D\u6742\u6587\u5B57\u7CFB\u7EDF\u7684\u56FD\u9645\u5316\u6587\u672C\uFF0C\u7279\u522B\u9002\u5408\u591A\u8BED\u8A00\u6DF7\u5408\u6587\u6863\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u5206\u8BCD\u80FD\u529B\u4E3E\u4F8B"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-SQL",children:'SELECT TOKENIZE(\'\u0645\u0631\u062D\u0628\u0627 \u0628\u0627\u0644\u0639\u0627\u0644\u0645 Hello \u4E16\u754C\', \'"parser"="icu"\');\n-- \u7ED3\u679C: ["\u0645\u0631\u062D\u0628\u0627", "\u0628\u0627\u0644\u0639\u0627\u0644\u0645", "Hello", "\u4E16\u754C"]\n\nSELECT TOKENIZE(\'\u0E21\u0E19\u0E44\u0E21\u0E40\u0E1B\u0E19\u0E44\u0E1B\u0E15\u0E32\u0E21\u0E04\u0E27\u0E32\u0E21\u0E15\u0E2D\u0E07\u0E01\u0E32\u0E23\', \'"parser"="icu"\');\n-- \u7ED3\u679C: ["\u0E21\u0E19", "\u0E44\u0E21\u0E40\u0E1B\u0E19", "\u0E44\u0E1B", "\u0E15\u0E32\u0E21", "\u0E04\u0E27\u0E32\u0E21", "\u0E15\u0E2D\u0E07\u0E01\u0E32\u0E23"]\n'})}),"\n",(0,l.jsx)(e.h5,{id:"ik\u5206\u8BCD\u5668",children:"IK\u5206\u8BCD\u5668"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u9002\u7528\u573A\u666F\uFF1A\u5BF9\u5206\u8BCD\u8D28\u91CF\u8981\u6C42\u8F83\u9AD8\u7684\u4E2D\u6587\u6587\u672C\u5904\u7406"}),"\n",(0,l.jsx)(e.li,{children:"ik_smart\uFF1A\u667A\u80FD\u6A21\u5F0F\uFF0C\u8BCD\u5C11\u4E14\u66F4\u957F\uFF0C\u8BED\u4E49\u96C6\u4E2D\uFF0C\u9002\u5408\u7CBE\u786E\u641C\u7D22"}),"\n",(0,l.jsx)(e.li,{children:"ik_max_word\uFF1A\u6700\u7EC6\u7C92\u5EA6\u6A21\u5F0F\uFF0C\u66F4\u591A\u77ED\u8BCD\uFF0C\u8986\u76D6\u66F4\u5168\u9762\uFF0C\u9002\u5408\u53EC\u56DE\u641C\u7D22"}),"\n",(0,l.jsx)(e.li,{children:"\u5206\u8BCD\u80FD\u529B\u4E3E\u4F8B"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-SQL",children:'SELECT TOKENIZE(\'\u4E2D\u534E\u4EBA\u6C11\u5171\u548C\u56FD\u56FD\u6B4C\', \'"parser"="ik","parser_mode"="ik_smart"\');\n-- \u7ED3\u679C: ["\u4E2D\u534E\u4EBA\u6C11\u5171\u548C\u56FD", "\u56FD\u6B4C"]\n\nSELECT TOKENIZE(\'\u4E2D\u534E\u4EBA\u6C11\u5171\u548C\u56FD\u56FD\u6B4C\', \'"parser"="ik","parser_mode"="ik_max_word"\');\n-- \u7ED3\u679C: ["\u4E2D\u534E\u4EBA\u6C11\u5171\u548C\u56FD", "\u4E2D\u534E\u4EBA\u6C11", "\u4E2D\u534E", "\u534E\u4EBA", "\u4EBA\u6C11\u5171\u548C\u56FD", "\u4EBA\u6C11", "\u5171\u548C\u56FD", "\u5171\u548C", "\u56FD\u6B4C"]\n'})}),"\n",(0,l.jsx)(e.h5,{id:"basic\u5206\u8BCD\u5668",children:"Basic\u5206\u8BCD\u5668"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u9002\u7528\u573A\u666F\uFF1A\u7B80\u5355\u573A\u666F\u3001\u5BF9\u6027\u80FD\u8981\u6C42\u6781\u9AD8\u7684\u573A\u666F\uFF0C\u53EF\u4EE5\u4F5C\u4E3A\u65E5\u5FD7\u573A\u666F\u4E2Dunicode\u5206\u8BCD\u5668\u7684\u5E73\u66FF"}),"\n",(0,l.jsx)(e.li,{children:"\u5206\u8BCD\u80FD\u529B\u4E3E\u4F8B"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-SQL",children:'-- \u82F1\u6587\u6587\u672C\u5206\u8BCD\nSELECT TOKENIZE(\'Hello World! This is a test.\', \'"parser"="basic"\');\n-- \u7ED3\u679C: ["hello", "world", "this", "is", "a", "test"]\n\n-- \u4E2D\u6587\u6587\u672C\u5206\u8BCD\nSELECT TOKENIZE(\'\u4F60\u597D\u4E16\u754C\', \'"parser"="basic"\');\n-- \u7ED3\u679C: ["\u4F60", "\u597D", "\u4E16", "\u754C"]\n\n-- \u6DF7\u5408\u8BED\u8A00\u5206\u8BCD\nSELECT TOKENIZE(\'Hello\u4F60\u597DWorld\u4E16\u754C\', \'"parser"="basic"\');\n-- \u7ED3\u679C: ["hello", "\u4F60", "\u597D", "world", "\u4E16", "\u754C"]\n\n-- \u5305\u542B\u6570\u5B57\u548C\u7279\u6B8A\u5B57\u7B26\nSELECT TOKENIZE(\'GET /images/hm_bg.jpg HTTP/1.0\', \'"parser"="basic"\');\n-- \u7ED3\u679C: ["get", "images", "hm", "bg", "jpg", "http", "1", "0"]\n\n-- \u5904\u7406\u957F\u6570\u5B57\u5E8F\u5217\nSELECT TOKENIZE(\'12345678901234567890\', \'"parser"="basic"\');\n-- \u7ED3\u679C: ["12345678901234567890"]\n'})}),"\n",(0,l.jsx)(e.h4,{id:"\u65B0\u589E\u81EA\u5B9A\u4E49\u5206\u8BCD\u80FD\u529B",children:"\u65B0\u589E\u81EA\u5B9A\u4E49\u5206\u8BCD\u80FD\u529B"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u7BA1\u9053\u5316\u7EC4\u5408\uFF1A\u901A\u8FC7 char filter\u3001tokenizer \u4E0E\u591A\u4E2A token filter \u7684\u94FE\u5F0F\u914D\u7F6E\uFF0C\u6784\u5EFA\u81EA\u5B9A\u4E49\u6587\u672C\u5904\u7406\u6D41\u7A0B\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u7EC4\u4EF6\u590D\u7528\uFF1A\u5E38\u7528\u7684 tokenizer \u548C filter \u53EF\u5728\u591A\u4E2A analyzer \u4E2D\u5171\u4EAB\uFF0C\u51CF\u5C11\u91CD\u590D\u5B9A\u4E49\uFF0C\u964D\u4F4E\u7EF4\u62A4\u6210\u672C\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u7528\u6237\u53EF\u4EE5\u901A\u8FC7Doris\u63D0\u4F9B\u7684\u81EA\u5B9A\u4E49\u5206\u8BCD\u673A\u5236\uFF0C\u652F\u6301\u7075\u6D3B\u7EC4\u5408char filter\u3001tokenizer \u548C token filter\uFF0C\u4ECE\u800C\u4E3A\u4E0D\u540C\u5B57\u6BB5\u5B9A\u5236\u5408\u9002\u7684\u5206\u8BCD\u6D41\u7A0B\uFF0C\u6EE1\u8DB3\u590D\u6742\u573A\u666F\u4E0B\u7684\u4E2A\u6027\u5316\u6587\u672C\u68C0\u7D22\u9700\u6C42\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.h5,{id:"\u4F7F\u7528\u65B9\u5F0F\u4E3E\u4F8B1",children:"\u4F7F\u7528\u65B9\u5F0F\u4E3E\u4F8B1"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u521B\u5EFA\u7C7B\u578B\u4E3Aword_delimiter\u7684token filter\uFF0C\u901A\u8FC7\u914D\u7F6E Word Delimiter Filter\uFF0C\u5C06\u70B9\u53F7(.)\u548C\u4E0B\u5212\u7EBF(_)\u8BBE\u7F6E\u4E3A\u5206\u9694\u7B26\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u521B\u5EFA\u81EA\u5B9A\u4E49\u5206\u8BCD\u5668complex_identifier_analyzer\uFF0C\u5F15\u7528token filter complex_word_splitter\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-SQL",children:'-- 1. \u521B\u5EFA\u81EA\u5B9A\u4E49 token filter\nCREATE INVERTED INDEX TOKEN_FILTER IF NOT EXISTS complex_word_splitter\nPROPERTIES\n(\n    "type" = "word_delimiter",\n    "type_table" = "[. => SUBWORD_DELIM], [_ => SUBWORD_DELIM]");\n\n-- 2. \u521B\u5EFA\u81EA\u5B9A\u4E49\u5206\u8BCD\u5668\nCREATE INVERTED INDEX ANALYZER IF NOT EXISTS complex_identifier_analyzer\nPROPERTIES\n(\n    "tokenizer" = "standard",\n    "token_filter" = "complex_word_splitter, lowercase"\n);\n\nSELECT TOKENIZE(\u2018apy217.39_202501260000026_526\u2019, \u2018\u201Danalyzer\u201C=\u201D complex_identifier_analyzer\u201C\u2018);\n-- \u7ED3\u679C\u4E3A[apy]\u3001[217]\u3001[39]\u3001[202501260000026]\u3001[526]\n\n-- MATCH(\u2018apy217\u2019)\u6216\u8005MATCH(\u2018202501260000026\u2019)\u90FD\u53EF\u4EE5\u547D\u4E2D\n'})}),"\n",(0,l.jsx)(e.h5,{id:"\u4F7F\u7528\u65B9\u5F0F\u4E3E\u4F8B2",children:"\u4F7F\u7528\u65B9\u5F0F\u4E3E\u4F8B2"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u521B\u5EFA\u7C7B\u578B\u4E3Achar_group\u7684tokenizer multi_value_tokenizer\uFF0C\u53EA\u5C06\u7B26\u53F7|\u8BBE\u7F6E\u4E3A\u5206\u9694\u7B26\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u521B\u5EFA\u81EA\u5B9A\u4E49\u5206\u8BCD\u5668multi_value_analyzer\uFF0C\u5F15\u7528tokenizer multi_value_tokenizer \u3002"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-SQL",children:'-- \u521B\u5EFA\u7528\u4E8E\u591A\u503C\u5217\u5206\u5272\u7684 char group tokenizer\nCREATE INVERTED INDEX TOKENIZER IF NOT EXISTS multi_value_tokenizer\nPROPERTIES\n(\n    "type" = "char_group",\n    "tokenize_on_chars" = "[|]",\n    "max_token_length" = "255"\n);\n-- \u521B\u5EFA\u591A\u503C\u5217\u5206\u8BCD\u5668\nCREATE INVERTED INDEX ANALYZER IF NOT EXISTS multi_value_analyzer\nPROPERTIES\n(\n    "tokenizer" = "multi_value_tokenizer",\n    "token_filter" = "lowercase, asciifolding"\n);\n\nSELECT tokenize(\'alice|123456|company\', \'"analyzer"="multi_value_analyzer"\');\n-- \u7ED3\u679C\u4E3A[alice]\u3001[123456]\u3001[company]\n\n-- MATCH_ANY(\u2018alice\u2019)\u6216\u8005MATCH_ANY(\u2018123456\u2019)\u90FD\u53EF\u4EE5\u547D\u4E2D\n'})}),"\n",(0,l.jsx)(e.h2,{id:"\u4E09\u79BB\u7EBF\u8BA1\u7B97\u80FD\u529B\u5F3A\u5316\u4FDD\u969C\u5927\u89C4\u6A21\u4EFB\u52A1\u7A33\u5B9A\u8FD0\u884C",children:"\u4E09\u3001\u79BB\u7EBF\u8BA1\u7B97\u80FD\u529B\u5F3A\u5316\uFF0C\u4FDD\u969C\u5927\u89C4\u6A21\u4EFB\u52A1\u7A33\u5B9A\u8FD0\u884C"}),"\n",(0,l.jsx)(e.p,{children:"\u5F53\u524D\u8D8A\u6765\u8D8A\u591A\u7684\u7528\u6237\u5C06ETL \u6570\u636E\u52A0\u5DE5\uFF0C\u591A\u8868\u7269\u5316\u89C6\u56FE\u5904\u7406\u7B49\u79BB\u7EBF\u8BA1\u7B97\u4EFB\u52A1\u8FC1\u79FB\u5230Doris \u4E0A\u8FD0\u884C\uFF0C\u9488\u5BF9\u79BB\u7EBF\u6279\u5904\u7406\u573A\u666F\u7684\u8D44\u6E90\u6D88\u8017\u5927\u3001\u4EFB\u52A1\u6613\u6EA2\u51FA\u7B49\u75DB\u70B9\uFF0C4.0 \u65B0\u589E Spill Disk \u529F\u80FD\uFF0C\u5F53\u79BB\u7EBF\u8BA1\u7B97\u4EFB\u52A1\u7684\u5185\u5B58\u5360\u7528\u8D85\u51FA\u9608\u503C\u65F6\uFF0C\u81EA\u52A8\u5C06\u90E8\u5206\u4E2D\u95F4\u6570\u636E\u5199\u5165\u78C1\u76D8\uFF0C\u907F\u514D\u56E0\u5185\u5B58\u4E0D\u8DB3\u5BFC\u81F4\u4EFB\u52A1\u5931\u8D25\uFF0C\u5927\u5E45\u63D0\u5347\u5927\u89C4\u6A21\u79BB\u7EBF\u4EFB\u52A1\u7684\u7A33\u5B9A\u6027\u4E0E\u5BB9\u9519\u80FD\u529B\u3002\u76EE\u524D\u652F\u6301\u843D\u76D8\u7684\u7B97\u5B50\u6709\uFF1A"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Hash Join\u7B97\u5B50"}),"\n",(0,l.jsx)(e.li,{children:"\u805A\u5408\u7B97\u5B50"}),"\n",(0,l.jsx)(e.li,{children:"\u6392\u5E8F\u7B97\u5B50"}),"\n",(0,l.jsx)(e.li,{children:"CTE \u7B97\u5B50"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"be\u914D\u7F6E\u9879",children:"BE\u914D\u7F6E\u9879"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-JavaScript",children:"spill_storage_root_path=/mnt/disk1/spilltest/doris/be/storage;/mnt/disk2/doris-spill;/mnt/disk3/doris-spill\nspill_storage_limit=100%\n"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"spill_storage_root_path\uFF1A\u67E5\u8BE2\u4E2D\u95F4\u7ED3\u679C\u843D\u76D8\u6587\u4EF6\u5B58\u50A8\u8DEF\u5F84\uFF0C\u9ED8\u8BA4\u548Cstorage_root_path\u4E00\u6837\u3002"}),"\n",(0,l.jsx)(e.li,{children:"spill_storage_limit: \u843D\u76D8\u6587\u4EF6\u5360\u7528\u78C1\u76D8\u7A7A\u95F4\u9650\u5236\u3002\u53EF\u4EE5\u914D\u7F6E\u5177\u4F53\u7684\u7A7A\u95F4\u5927\u5C0F\uFF08\u6BD4\u5982100G, 1T\uFF09\u6216\u8005\u767E\u5206\u6BD4\uFF0C\u9ED8\u8BA4\u662F20%\u3002\u5982\u679Cspill_storage_root_path\u914D\u7F6E\u5355\u72EC\u7684\u78C1\u76D8\uFF0C\u53EF\u4EE5\u8BBE\u7F6E\u4E3A100%\u3002\u8FD9\u4E2A\u53C2\u6570\u4E3B\u8981\u662F\u9632\u6B62\u843D\u76D8\u5360\u7528\u592A\u591A\u7684\u78C1\u76D8\u7A7A\u95F4\uFF0C\u5BFC\u81F4\u65E0\u6CD5\u8FDB\u884C\u6B63\u5E38\u7684\u6570\u636E\u5B58\u50A8\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"fe-session-variable",children:"FE Session Variable"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-JavaScript",children:"set enable_spill=true;\nset exec_mem_limit = 10g;\nset query_timeout = 3600;\n"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"enable_spill \u8868\u793A\u4E00\u4E2Aquery \u662F\u5426\u5F00\u542F\u843D\u76D8\uFF0C\u9ED8\u8BA4\u5173\u95ED\uFF1B\u5982\u679C\u5F00\u542F\uFF0C\u5728\u5185\u5B58\u7D27\u5F20\u7684\u60C5\u51B5\u4E0B\uFF0C\u4F1A\u89E6\u53D1\u67E5\u8BE2\u843D\u76D8\uFF1B"}),"\n",(0,l.jsx)(e.li,{children:"exec_mem_limit \u8868\u793A\u4E00\u4E2Aquery \u4F7F\u7528\u7684\u6700\u5927\u7684\u5185\u5B58\u5927\u5C0F\uFF1B"}),"\n",(0,l.jsx)(e.li,{children:"query_timeout \u5F00\u542F\u843D\u76D8\uFF0C\u67E5\u8BE2\u65F6\u95F4\u53EF\u80FD\u4F1A\u663E\u8457\u589E\u52A0\uFF0Cquery_timeout\u9700\u8981\u8FDB\u884C\u8C03\u6574\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u4E00\u65E6\u843D\u76D8\u53D1\u751F\uFF0C\u7528\u6237\u53EF\u4EE5\u901A\u8FC7\u591A\u79CD\u65B9\u5F0F\u76D1\u6D4B\u843D\u76D8\u7684\u6267\u884C\u72B6\u51B5\u3002"}),"\n",(0,l.jsx)(e.h3,{id:"\u5BA1\u8BA1\u65E5\u5FD7",children:"\u5BA1\u8BA1\u65E5\u5FD7"}),"\n",(0,l.jsxs)(e.p,{children:["FE audit log\u4E2D\u589E\u52A0\u4E86",(0,l.jsx)(e.code,{children:"SpillWriteBytesToLocalStorage"}),"\u548C",(0,l.jsx)(e.code,{children:"SpillReadBytesFromLocalStorage"}),"\u5B57\u6BB5\uFF0C\u5206\u522B\u8868\u793A\u843D\u76D8\u65F6\u5199\u76D8\u548C\u8BFB\u76D8\u6570\u636E\u603B\u91CF\u3002"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-Plain",children:"SpillWriteBytesToLocalStorage=503412182|SpillReadBytesFromLocalStorage=503412182\n"})}),"\n",(0,l.jsx)(e.h3,{id:"profile",children:"Profile"}),"\n",(0,l.jsxs)(e.p,{children:["\u5982\u679C\u67E5\u8BE2\u8FC7\u7A0B\u4E2D\u89E6\u53D1\u4E86\u843D\u76D8\uFF0C\u5728Query Profile\u4E2D\u589E\u52A0\u4E86",(0,l.jsx)(e.code,{children:"Spill"})," \u524D\u7F00\u7684\u4E00\u4E9BCounter\u8FDB\u884C\u6807\u8BB0\u548C\u843D\u76D8\u76F8\u5173counter\u3002\u4EE5HashJoin\u65F6Build HashTable\u4E3A\u4F8B\uFF0C\u53EF\u4EE5\u770B\u5230\u4E0B\u9762\u7684Counter\uFF1A"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-Bash",children:"PARTITIONED_HASH_JOIN_SINK_OPERATOR  (id=4  ,  nereids_id=179):(ExecTime:  6sec351ms)\n      -  Spilled:  true\n      -  CloseTime:  528ns\n      -  ExecTime:  6sec351ms\n      -  InitTime:  5.751us\n      -  InputRows:  6.001215M  (6001215)\n      -  MemoryUsage:  0.00  \n      -  MemoryUsagePeak:  554.42  MB\n      -  MemoryUsageReserved:  1024.00  KB\n      -  OpenTime:  2.267ms\n      -  PendingFinishDependency:  0ns\n      -  SpillBuildTime:  2sec437ms\n      -  SpillInMemRow:  0\n      -  SpillMaxRowsOfPartition:  68.569K  (68569)\n      -  SpillMinRowsOfPartition:  67.455K  (67455)\n      -  SpillPartitionShuffleTime:  836.302ms\n      -  SpillPartitionTime:  131.839ms\n      -  SpillTotalTime:  5sec563ms\n      -  SpillWriteBlockBytes:  714.13  MB\n      -  SpillWriteBlockCount:  1.344K  (1344)\n      -  SpillWriteFileBytes:  244.40  MB\n      -  SpillWriteFileTime:  350.754ms\n      -  SpillWriteFileTotalCount:  32\n      -  SpillWriteRows:  6.001215M  (6001215)\n      -  SpillWriteSerializeBlockTime:  4sec378ms\n      -  SpillWriteTaskCount:  417\n      -  SpillWriteTaskWaitInQueueCount:  0\n      -  SpillWriteTaskWaitInQueueTime:  8.731ms\n      -  SpillWriteTime:  5sec549ms\n"})}),"\n",(0,l.jsx)(e.h3,{id:"\u7CFB\u7EDF\u8868-backend_active_tasks",children:"\u7CFB\u7EDF\u8868 backend_active_tasks"}),"\n",(0,l.jsxs)(e.p,{children:["\u589E\u52A0\u4E86",(0,l.jsx)(e.code,{children:"SPILL_WRITE_BYTES_TO_LOCAL_STORAGE"}),"\u548C",(0,l.jsx)(e.code,{children:"SPILL_READ_BYTES_FROM_LOCAL_STORAGE"}),"\u5B57\u6BB5\uFF0C\u5206\u522B\u8868\u793A\u4E00\u4E2A\u67E5\u8BE2\u76EE\u524D\u843D\u76D8\u4E2D\u95F4\u7ED3\u679C\u5199\u76D8\u6570\u636E\u548C\u8BFB\u76D8\u6570\u636E\u603B\u91CF\u3002"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-Bash",children:"mysql [information_schema]>select * from backend_active_tasks;\n+-------+------------+-------------------+-----------------------------------+--------------+------------------+-----------+------------+----------------------+---------------------------+--------------------+-------------------+------------+------------------------------------+-------------------------------------+\n| BE_ID | FE_HOST    | WORKLOAD_GROUP_ID | QUERY_ID                          | TASK_TIME_MS | TASK_CPU_TIME_MS | SCAN_ROWS | SCAN_BYTES | BE_PEAK_MEMORY_BYTES | CURRENT_USED_MEMORY_BYTES | SHUFFLE_SEND_BYTES | SHUFFLE_SEND_ROWS | QUERY_TYPE | SPILL_WRITE_BYTES_TO_LOCAL_STORAGE | SPILL_READ_BYTES_FROM_LOCAL_STORAGE |\n+-------+------------+-------------------+-----------------------------------+--------------+------------------+-----------+------------+----------------------+---------------------------+--------------------+-------------------+------------+------------------------------------+-------------------------------------+\n| 10009 | 10.16.10.8 |                 1 | 6f08c74afbd44fff-9af951270933842d |        13612 |            11025 |  12002430 | 1960955904 |            733243057 |                  70113260 |                  0 |                 0 | SELECT     |                          508110119 |                            26383070 |\n| 10009 | 10.16.10.8 |                 1 | 871d643b87bf447b-865eb799403bec96 |            0 |                0 |         0 |          0 |                    0 |                         0 |                  0 |                 0 | SELECT     |                                  0 |                                   0 |\n+-------+------------+-------------------+-----------------------------------+--------------+------------------+-----------+------------+----------------------+---------------------------+--------------------+-------------------+------------+------------------------------------+-------------------------------------+\n2 rows in set (0.00 sec)\n"})}),"\n",(0,l.jsx)(e.h3,{id:"\u6D4B\u8BD5",children:"\u6D4B\u8BD5"}),"\n",(0,l.jsxs)(e.p,{children:["\u4E3A\u9A8C\u8BC1\u843D\u76D8\u529F\u80FD\u7684\u7A33\u5B9A\u6027\uFF0C\u6211\u4EEC\u91C7\u7528 ",(0,l.jsx)(e.strong,{children:"TPC-DS 10TB \u6807\u51C6\u6570\u636E\u96C6"})," \u5F00\u5C55\u6D4B\u8BD5\uFF0C\u6D4B\u8BD5\u73AF\u5883\u914D\u7F6E\u4E3A ",(0,l.jsx)(e.strong,{children:"3 \u53F0 BE \u670D\u52A1\u5668\uFF08\u6BCF\u53F0 16 \u6838 CPU\u300164GB \u5185\u5B58\uFF09"}),"\u3002BE\u7684\u5185\u5B58\u4E0E\u6570\u636E\u89C4\u6A21\u7684\u6BD4\u4F8B\u4E3A 1:52\u3002\u6D4B\u8BD5\u7ED3\u679C\u663E\u793A\uFF0C\u6574\u4F53\u8FD0\u884C\u65F6\u957F\u4E3A 28102.386 \u79D2\uFF0C\u4E14\u6210\u529F\u8DD1\u5B8C TPC-DS \u57FA\u51C6\u6D4B\u8BD5\u4E2D\u7684\u5168\u90E8 99 \u6761\u67E5\u8BE2\uFF0C\u9A8C\u8BC1\u4E86\u843D\u76D8\u529F\u80FD\u7684\u57FA\u7840\u7A33\u5B9A\u6027\u3002"]}),"\n",(0,l.jsxs)(e.p,{children:["\u5177\u4F53\u6570\u636E\u8BF7\u53C2\u8003\uFF0C ",(0,l.jsx)(e.a,{href:"https://doris.apache.org/zh-CN/docs/dev/admin-manual/workload-management/spill-disk",children:"https://doris.apache.org/zh-CN/docs/dev/admin-manual/workload-management/spill-disk"})]}),"\n",(0,l.jsx)(e.h2,{id:"\u56DB\u6570\u636E\u8D28\u91CF\u5168\u94FE\u8DEF\u4FDD\u969C\u7B51\u7262\u5206\u6790\u7ED3\u679C\u53EF\u4FE1\u57FA\u77F3",children:"\u56DB\u3001\u6570\u636E\u8D28\u91CF\u5168\u94FE\u8DEF\u4FDD\u969C\uFF0C\u7B51\u7262\u5206\u6790\u7ED3\u679C\u53EF\u4FE1\u57FA\u77F3"}),"\n",(0,l.jsx)(e.p,{children:"\u6570\u636E\u6B63\u786E\u6027\u662F\u4F01\u4E1A\u5236\u5B9A\u51B3\u7B56\u7684\u6838\u5FC3\u524D\u63D0\u4E0E\u5173\u952E\u57FA\u77F3\u3002\u4E3A\u8FDB\u4E00\u6B65\u592F\u5B9E\u8FD9\u4E00\u57FA\u7840\uFF0C4.0 \u7248\u672C\u5BF9\u5927\u91CF\u51FD\u6570\u7684\u8FD0\u884C\u884C\u4E3A\u8FDB\u884C\u4E86\u7CFB\u7EDF\u6027\u68B3\u7406\u4E0E\u89C4\u8303\uFF0C\u4ECE\u6570\u636E\u5BFC\u5165\u73AF\u8282\u5230\u8BA1\u7B97\u5206\u6790\u73AF\u8282\u6784\u5EFA\u5168\u94FE\u8DEF\u6821\u9A8C\u673A\u5236\uFF0C\u5168\u9762\u4FDD\u969C\u6570\u636E\u5904\u7406\u7ED3\u679C\u7684\u51C6\u786E\u6027\u4E0E\u53EF\u9760\u6027\uFF0C\u4E3A\u4F01\u4E1A\u51B3\u7B56\u63D0\u4F9B\u575A\u5B9E\u7684\u6570\u636E\u652F\u6491\u3002"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsxs)(e.strong,{children:["\u6CE8\uFF1A\u8FD9\u4E9B",(0,l.jsx)(e.strong,{children:(0,l.jsx)(e.strong,{children:"\u6570\u636E\u8D28\u91CF"})}),"\u95EE\u9898\u7684\u68B3\u7406\uFF0C\u4F1A\u5BFC\u81F4\u4E00\u4E9B\u884C\u4E3A\u8DDF\u8FC7\u53BB\u4E0D\u4E00\u6837\uFF0C\u5347\u7EA7\u4E4B\u524D\u9700\u8981\u4ED4\u7EC6\u9605\u8BFB\u8FD9\u4E9B\u6587\u6863\u3002"]})}),"\n",(0,l.jsx)(e.h3,{id:"cast",children:"Cast"}),"\n",(0,l.jsxs)(e.p,{children:["CAST \u662F SQL \u4E2D\u903B\u8F91\u6700\u590D\u6742\u7684\u51FD\u6570\u4E4B\u4E00\uFF0C\u5176\u6838\u5FC3\u4F5C\u7528\u662F\u5B9E\u73B0\u4E0D\u540C\u6570\u636E\u7C7B\u578B\u95F4\u7684\u8F6C\u6362 \u2014\u2014 \u8FD9\u4E00\u8FC7\u7A0B\u4E0D\u4EC5\u9700\u5904\u7406\u5927\u91CF\u7EC6\u788E\u7684\u683C\u5F0F\u89C4\u5219\u4E0E\u8FB9\u754C\u573A\u666F\uFF0C\u66F4\u56E0\u6D89\u53CA\u7C7B\u578B\u8BED\u4E49\u7684\u7CBE\u51C6\u6620\u5C04\uFF0C\u6210\u4E3A\u5B9E\u9645\u4F7F\u7528\u4E2D\u6781\u6613\u51FA\u9519\u7684\u73AF\u8282\u3002\u5C24\u5176\u5728\u6570\u636E\u5BFC\u5165\u573A\u666F\u4E2D\uFF0C\u672C\u8D28\u662F\u5C06\u5916\u90E8\u5B57\u7B26\u4E32\u8F6C\u6362\u4E3A\u6570\u636E\u5E93\u5185\u90E8\u7C7B\u578B\u7684 CAST \u64CD\u4F5C\uFF0C\u56E0\u6B64 CAST \u7684\u884C\u4E3A\u76F4\u63A5\u51B3\u5B9A\u4E86\u5BFC\u5165\u903B\u8F91\u7684\u51C6\u786E\u6027\u4E0E\u7A33\u5B9A\u6027\u3002\u540C\u65F6\uFF0C\u6211\u4EEC\u53EF\u4EE5\u9884\u89C1\u672A\u6765\u7684\u6570\u636E\u5E93\u5C06\u5927\u91CF\u7684\u88ABAI \u6765\u64CD\u4F5C\uFF0C\u800CAI \u9700\u8981\u5BF9\u6570\u636E\u5E93\u7684\u884C\u4E3A\u6709\u660E\u786E\u7684\u5B9A\u4E49\uFF0C\u4E3A\u6B64\uFF0C\u6211\u4EEC\u5F15\u5165\u4E86BNF \u8303\u5F0F\uFF0C\u6211\u4EEC\u5E0C\u671B\u901A\u8FC7\u8303\u5F0F\u5B9A\u4E49\u7684\u65B9\u5F0F\uFF0C\u4E3A\u5F00\u53D1\u8005\u548CAI Agent\u63D0\u4F9B\u6E05\u6670\u7684\u64CD\u4F5C\u4F9D\u636E\u3002\u4F8B\u5982\u4EC5 DATE \u7C7B\u578B\u7684 CAST \u5C31\u5DF2\u901A\u8FC7 BNF \u8986\u76D6\u6570\u5341\u79CD\u683C\u5F0F\u7EC4\u5408\u573A\u666F\uFF08 ",(0,l.jsx)(e.a,{href:"https://doris.apache.org/zh-CN/docs/dev/sql-manual/basic-element/sql-data-types/conversion/datetime-conversion",children:"https://doris.apache.org/zh-CN/docs/dev/sql-manual/basic-element/sql-data-types/conversion/datetime-conversion"})," \uFF09\uFF0C\u540C\u65F6\u5728\u6D4B\u8BD5\u9636\u6BB5\u6211\u4EEC\u901A\u8FC7\u8FD9\u4E9B\u89C4\u5219\uFF0C\u6D3E\u751F\u51FA\u767E\u4E07\u7EA7\u7684\u6D4B\u8BD5case\uFF0C\u4FDD\u969C\u7ED3\u679C\u7684\u6B63\u786E\u6027\u3002"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-XML",children:'<datetime>       ::= <date> (("T" | " ") <time> <whitespace>* <offset>?)?\n                   | <digit>{14} <fraction>? <whitespace>* <offset>?\n\n\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\n\n<date>           ::= <year> ("-" | "/") <month1> ("-" | "/") <day1>\n                   | <year> <month2> <day2>\n\n<year>           ::= <digit>{2} | <digit>{4} ; 1970 \u4E3A\u754C\n<month1>         ::= <digit>{1,2}            ; 01\u201312\n<day1>           ::= <digit>{1,2}            ; 01\u201328/29/30/31 \u89C6\u6708\u4EFD\u800C\u5B9A\n\n<month2>         ::= <digit>{2}              ; 01\u201312\n<day2>           ::= <digit>{2}              ; 01\u201328/29/30/31 \u89C6\u6708\u4EFD\u800C\u5B9A\n\n\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\n\n<time>           ::= <hour1> (":" <minute1> (":" <second1> <fraction>?)?)?\n                   | <hour2> (<minute2> (<second2> <fraction>?)?)?\n\n<hour1>           ::= <digit>{1,2}      ; 00\u201323\n<minute1>         ::= <digit>{1,2}      ; 00\u201359\n<second1>         ::= <digit>{1,2}      ; 00\u201359\n\n<hour2>           ::= <digit>{2}        ; 00\u201323\n<minute2>         ::= <digit>{2}        ; 00\u201359\n<second2>         ::= <digit>{2}        ; 00\u201359\n\n<fraction>        ::= "." <digit>*\n\n\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\n\n<offset>         ::= ( "+" | "-" ) <hour-offset> [ ":"? <minute-offset> ]\n                   | <special-tz>\n                   | <long-tz>\n\n<hour-offset>    ::= <digit>{1,2}      ; 0\u201314\n<minute-offset>  ::= <digit>{2}        ; 00/30/45\n\n<special-tz>     ::= "CST" | "UTC" | "GMT" | "ZULU" | "Z"   ; \u5FFD\u7565\u5927\u5C0F\u5199\n<long-tz>        ::= ( ^<whitespace> )+                     ; e.g. America/New_York\n\n\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\n\n<digit>          ::= "0" | "1" | "2" | "3" | "4" | "5" | "6" | "7" | "8" | "9"\n\n<area>           ::= <alpha>+\n<location>       ::= (<alpha> | "_")+\n<alpha>          ::= "A" | \u2026 | "Z" | "a" | \u2026 | "z"\n<whitespace>     ::= " " | "\\t" | "\\n" | "\\r" | "\\v" | "\\f"\n'})}),"\n",(0,l.jsx)(e.h3,{id:"\u4E25\u683C\u6A21\u5F0F\u975E\u4E25\u683C\u6A21\u5F0Ftry_cast",children:"\u4E25\u683C\u6A21\u5F0F\u3001\u975E\u4E25\u683C\u6A21\u5F0F\u3001try_cast"}),"\n",(0,l.jsxs)(e.p,{children:["\u5728 Doris 4.0 \u4E2D\uFF0C\u5BF9",(0,l.jsx)(e.code,{children:"CAST"}),"\u64CD\u4F5C\u589E\u52A0\u4E86\u4E25\u683C\u6A21\u5F0F\u3001\u975E\u4E25\u683C\u6A21\u5F0F\uFF08\u901A\u8FC7enable_strict_cast \u6765\u63A7\u5236\uFF09\u4EE5\u53CA",(0,l.jsx)(e.code,{children:"TRY_CAST"}),"\u51FD\u6570\uFF0C\u4EE5\u66F4\u597D\u5730\u5904\u7406\u6570\u636E\u7C7B\u578B\u8F6C\u6362\u65F6\u7684\u5404\u79CD\u60C5\u51B5\u3002\u5177\u4F53\u5982\u4E0B\uFF1A"]}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u4E25\u683C\u6A21\u5F0F"}),"\uFF1A\u7CFB\u7EDF\u4F1A\u4F9D\u636E\u9884\u5B9A\u4E49\u7684 BNF\uFF08\u8BED\u6CD5\u89C4\u5219\uFF0C\u5BF9\u8F93\u5165\u6570\u636E\u7684\u683C\u5F0F\u3001\u7C7B\u578B\u3001\u53D6\u503C\u8303\u56F4\u8FDB\u884C\u4E25\u683C\u6821\u9A8C\uFF1A\u82E5\u6570\u636E\u4E0D\u7B26\u5408\u89C4\u5219\uFF08\u5982\u5B57\u6BB5\u7C7B\u578B\u5E94\u4E3A \u201C\u6570\u503C\u578B\u201D \u5374\u4F20\u5165\u5B57\u7B26\u4E32\u3001\u65E5\u671F\u683C\u5F0F\u4E0D\u7B26\u5408 \u201CYYYY-MM-DD\u201D \u89C4\u8303\uFF09\uFF0C\u7CFB\u7EDF\u4F1A\u76F4\u63A5\u7EC8\u6B62\u6570\u636E\u5904\u7406\u6D41\u7A0B\u5E76\u629B\u51FA\u660E\u786E\u62A5\u9519\uFF08\u542B\u5177\u4F53\u4E0D\u7B26\u5408\u89C4\u5219\u7684\u5B57\u6BB5\u4E0E\u539F\u56E0\uFF09\uFF0C\u675C\u7EDD\u4E0D\u5408\u6CD5\u6570\u636E\u8FDB\u5165\u5B58\u50A8\u6216\u8BA1\u7B97\u73AF\u8282\u3002\u8FD9\u79CD \u201C\u96F6\u5BB9\u5FCD\u201D \u7684\u6821\u9A8C\u903B\u8F91\uFF0C\u4E0E PostgreSQL \u6570\u636E\u5E93\u7684\u4E25\u683C\u6570\u636E\u6821\u9A8C\u884C\u4E3A\u9AD8\u5EA6\u4E00\u81F4\uFF0C\u80FD\u4ECE\u6E90\u5934\u4FDD\u969C\u6570\u636E\u8D28\u91CF\u7684\u51C6\u786E\u6027\u4E0E\u4E00\u81F4\u6027\uFF0C\u56E0\u6B64\u5728\u5BF9\u6570\u636E\u53EF\u9760\u6027\u8981\u6C42\u6781\u9AD8\u7684\u573A\u666F\u4E2D\u4E0D\u53EF\u6216\u7F3A \u2014\u2014 \u4F8B\u5982\u91D1\u878D\u884C\u4E1A\u7684\u4EA4\u6613\u5BF9\u8D26\u3001\u8D22\u52A1\u9886\u57DF\u7684\u8D26\u5355\u6838\u7B97\u3001\u653F\u52A1\u7CFB\u7EDF\u7684\u4FE1\u606F\u767B\u8BB0\u7B49\u573A\u666F\uFF0C\u4E00\u65E6\u51FA\u73B0\u4E0D\u5408\u6CD5\u6570\u636E\uFF08\u5982\u4EA4\u6613\u91D1\u989D\u4E3A\u8D1F\u6570\u3001\u8D26\u5355\u65E5\u671F\u683C\u5F0F\u9519\u8BEF\uFF09\uFF0C\u53EF\u80FD\u5F15\u53D1\u8D44\u91D1\u635F\u5931\u3001\u5408\u89C4\u98CE\u9669\u6216\u4E1A\u52A1\u6D41\u7A0B\u6DF7\u4E71\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u975E\u4E25\u683C\u6A21\u5F0F"}),"\uFF1A\u7CFB\u7EDF\u540C\u6837\u4F1A\u4F9D\u636E BNF \u89C4\u5219\u6821\u9A8C\u6570\u636E\uFF0C\u4F46\u91C7\u7528 \u201C\u5BB9\u9519\u5F0F\u201D \u5904\u7406\u903B\u8F91\uFF1A\u82E5\u6570\u636E\u4E0D\u7B26\u5408\u89C4\u5219\uFF0C\u4E0D\u4F1A\u7EC8\u6B62\u6D41\u7A0B\u6216\u62A5\u9519\uFF0C\u800C\u662F\u81EA\u52A8\u5C06\u4E0D\u5408\u6CD5\u6570\u636E\u8F6C\u6362\u4E3A NULL \u503C\u540E\u7EE7\u7EED\u6267\u884C SQL\uFF08\u4F8B\u5982\u5C06\u5B57\u7B26\u4E32 \u201Cxyz\u201D \u8F6C\u6362\u4E3A\u6570\u503C\u578B NULL\uFF09\uFF0C\u786E\u4FDD SQL \u4EFB\u52A1\u80FD\u6B63\u5E38\u5B8C\u6210\uFF0C\u4F18\u5148\u4FDD\u969C\u4E1A\u52A1\u6D41\u7A0B\u7684\u8FDE\u7EED\u6027\u4E0E\u6267\u884C\u6548\u7387\u3002\u8FD9\u79CD\u6A21\u5F0F\u66F4\u9002\u7528\u4E8E\u5BF9 \u201C\u6570\u636E\u5B8C\u6574\u6027\u8981\u6C42\u8F83\u4F4E\u3001\u4F46\u5BF9 SQL \u6267\u884C\u6210\u529F\u7387\u8981\u6C42\u9AD8\u201D \u7684\u573A\u666F \u2014\u2014 \u4F8B\u5982\u65E5\u5FD7\u6570\u636E\u5904\u7406\u3001\u7528\u6237\u884C\u4E3A\u6570\u636E\u6E05\u6D17\u3001\u4E34\u65F6\u6570\u636E\u5206\u6790\u7B49\u573A\u666F\uFF0C\u6B64\u7C7B\u573A\u666F\u4E2D\u6570\u636E\u91CF\u5E9E\u5927\u4E14\u6765\u6E90\u590D\u6742\uFF08\u5982 APP \u65E5\u5FD7\u53EF\u80FD\u56E0\u8BBE\u5907\u5F02\u5E38\u4EA7\u751F\u683C\u5F0F\u9519\u4E71\u5B57\u6BB5\uFF09\uFF0C\u82E5\u56E0\u5C11\u91CF\u4E0D\u5408\u6CD5\u6570\u636E\u4E2D\u65AD\u6574\u4E2A SQL \u4EFB\u52A1\uFF0C\u4F1A\u5927\u5E45\u964D\u4F4E\u5904\u7406\u6548\u7387\uFF0C\u4E14\u5C11\u91CF NULL \u503C\u5BF9\u6574\u4F53\u5206\u6790\u7ED3\u679C\uFF08\u5982\u7EDF\u8BA1\u6D3B\u8DC3\u7528\u6237\u6570\u3001\u70B9\u51FB\u91CF\uFF09\u5F71\u54CD\u6781\u5C0F\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(e.p,{children:["enable_strict_cast \u662F\u5728\u4E00\u4E2A\u8BED\u53E5\u7EA7\u522B\u63A7\u5236cast\u7684\u884C\u4E3A\u7684\u65B9\u5F0F\uFF0C\u4F46\u662F\u53EF\u80FD\u4F1A\u51FA\u73B0\uFF0C\u5728\u4E00\u4E2ASQL \u4E2D\u6709\u591A\u4E2Acast \u51FD\u6570\uFF0C\u6709\u4E00\u90E8\u5206\u51FD\u6570\u7528\u6237\u5E0C\u671B\u7528\u4E25\u683C\u6A21\u5F0F\uFF0C\u53E6\u5916\u4E00\u90E8\u5206\u51FD\u6570\u4F7F\u7528\u975E\u4E25\u683C\u6A21\u5F0F\uFF0C\u6240\u4EE5\u6211\u4EEC\u5F15\u5165\u4E86",(0,l.jsx)(e.code,{children:"TRY_CAST"})," \u51FD\u6570\u3002",(0,l.jsx)(e.code,{children:"TRY_CAST"}),"\u51FD\u6570\u7684\u4F5C\u7528\u662F\u5C06\u4E00\u4E2A\u8868\u8FBE\u5F0F\u8F6C\u6362\u4E3A\u6307\u5B9A\u7684\u6570\u636E\u7C7B\u578B\uFF0C\u5982\u679C\u8F6C\u6362\u6210\u529F\u5219\u8FD4\u56DE\u8F6C\u6362\u540E\u7684\u503C\uFF0C\u5982\u679C\u8F6C\u6362\u5931\u8D25\u5219\u8FD4\u56DE NULL\u3002\u5176\u8BED\u6CD5\u4E3A",(0,l.jsx)(e.code,{children:"TRY_CAST(source_expr AS target_type)"}),"\uFF0C\u5176\u4E2D",(0,l.jsx)(e.code,{children:"source_expr"}),"\u662F\u8981\u8F6C\u6362\u7684\u8868\u8FBE\u5F0F\uFF0C",(0,l.jsx)(e.code,{children:"target_type"}),"\u662F\u76EE\u6807\u6570\u636E\u7C7B\u578B\u3002\u4F8B\u5982\uFF0C",(0,l.jsx)(e.code,{children:"TRY_CAST('123' AS INT)"}),"\u4F1A\u8FD4\u56DE 123\uFF0C\u800C",(0,l.jsx)(e.code,{children:"TRY_CAST('abc' AS INT)"}),"\u4F1A\u8FD4\u56DE NULL\u3002",(0,l.jsx)(e.code,{children:"TRY_CAST"}),"\u51FD\u6570\u63D0\u4F9B\u4E86\u4E00\u79CD\u66F4\u7075\u6D3B\u7684\u7C7B\u578B\u8F6C\u6362\u65B9\u5F0F\uFF0C\u5728\u4E0D\u9700\u8981\u4E25\u683C\u4FDD\u8BC1\u8F6C\u6362\u6210\u529F\u7684\u573A\u666F\u4E0B\uFF0C\u53EF\u4EE5\u4F7F\u7528\u8BE5\u51FD\u6570\u6765\u907F\u514D\u56E0\u8F6C\u6362\u5931\u8D25\u800C\u5BFC\u81F4\u7684\u9519\u8BEF\u3002"]}),"\n",(0,l.jsx)(e.h3,{id:"\u6D6E\u70B9\u7C7B\u578B\u8BA1\u7B97",children:"\u6D6E\u70B9\u7C7B\u578B\u8BA1\u7B97"}),"\n",(0,l.jsxs)(e.p,{children:["Doris \u63D0\u4F9B\u4E86\u4E24\u79CD\u6D6E\u70B9\u6570\u636E\u7C7B\u578B\uFF1A",(0,l.jsx)(e.code,{children:"FLOAT"})," \u548C ",(0,l.jsx)(e.code,{children:"DOUBLE"}),"\uFF0C\u4F46\u662F\u5728\u6709Inf\u6216\u8005Nan\u7684\u65F6\u5019\u7531\u4E8E\u884C\u4E3A\u4E0D\u786E\u5B9A\uFF0C\u5BFC\u81F4order by \u6216\u8005 group by\u65F6\u7ED3\u679C\u53EF\u80FD\u9519\u8BEF\uFF0C\u5728\u8FD9\u4E2A\u7248\u672C\u4E2D\u6211\u4EEC\u89C4\u8303\u5E76\u4E14\u660E\u786E\u4E86\u8FD9\u4E2A\u884C\u4E3A\u3002"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7B97\u672F\u8FD0\u7B97"})}),"\n",(0,l.jsx)(e.p,{children:"Doris \u7684\u6D6E\u70B9\u6570\u652F\u6301\u5E38\u89C1\u7684\u52A0\u51CF\u4E58\u9664\u7B49\u7B97\u672F\u8FD0\u7B97\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u9700\u8981\u7279\u522B\u6CE8\u610F\u7684\u662F\uFF0CDoris \u5728\u5904\u7406\u6D6E\u70B9\u6570\u9664\u4EE5 0 \u7684\u60C5\u51B5\u65F6\uFF0C\u5E76\u4E0D\u5B8C\u5168\u9075\u5FAA IEEE 754 \u6807\u51C6\u3002"}),"\n",(0,l.jsx)(e.p,{children:"Doris \u5728\u8FD9\u65B9\u9762\u53C2\u8003\u4E86 PostgreSQL \u7684\u5B9E\u73B0\uFF0C\u5F53\u9664\u4EE5 0 \u65F6\u4E0D\u4F1A\u751F\u6210\u7279\u6B8A\u503C\uFF0C\u800C\u662F\u8FD4\u56DE SQL NULL\uFF1A"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"\u8868\u8FBE\u5F0F"}),(0,l.jsx)(e.th,{children:"PostgreSQL"}),(0,l.jsx)(e.th,{children:"IEEE 754"}),(0,l.jsx)(e.th,{children:"Doris"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"1.0 / 0.0"}),(0,l.jsx)(e.td,{children:"\u9519\u8BEF"}),(0,l.jsx)(e.td,{children:"Infinity"}),(0,l.jsx)(e.td,{children:"NULL"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"0.0 / 0.0"}),(0,l.jsx)(e.td,{children:"\u9519\u8BEF"}),(0,l.jsx)(e.td,{children:"NaN"}),(0,l.jsx)(e.td,{children:"NULL"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"-1.0 / 0.0"}),(0,l.jsx)(e.td,{children:"\u9519\u8BEF"}),(0,l.jsx)(e.td,{children:"-Infinity"}),(0,l.jsx)(e.td,{children:"NULL"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"'Infinity' / 'Infinity'"}),(0,l.jsx)(e.td,{children:"NaN"}),(0,l.jsx)(e.td,{children:"NaN"}),(0,l.jsx)(e.td,{children:"NaN"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"1.0 / 'Infinity'"}),(0,l.jsx)(e.td,{children:"0"}),(0,l.jsx)(e.td,{children:"0"}),(0,l.jsx)(e.td,{children:"0"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"'Infinity' - 'Infinity'"}),(0,l.jsx)(e.td,{children:"NaN"}),(0,l.jsx)(e.td,{children:"NaN"}),(0,l.jsx)(e.td,{children:"NaN"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"'Infinity' - 1.0"}),(0,l.jsx)(e.td,{children:"Infinity"}),(0,l.jsx)(e.td,{children:"Infinity"}),(0,l.jsx)(e.td,{children:"Infinity"})]})]})]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u6BD4\u8F83\u8FD0\u7B97"})}),"\n",(0,l.jsx)(e.p,{children:"IEEE \u6807\u51C6\u5B9A\u4E49\u7684\u6D6E\u70B9\u6570\u6BD4\u8F83\u4E0E\u901A\u5E38\u7684\u6574\u6570\u6BD4\u8F83\u6709\u4E00\u4E9B\u91CD\u8981\u533A\u522B\u3002\u4F8B\u5982\uFF0C\u8D1F\u96F6\u548C\u6B63\u96F6\u88AB\u89C6\u4E3A\u76F8\u7B49\uFF0C\u800C\u4EFB\u4F55 NaN \u503C\u4E0E\u4EFB\u4F55\u5176\u4ED6\u503C\uFF08\u5305\u62EC\u5B83\u81EA\u8EAB\uFF09\u6BD4\u8F83\u65F6\u90FD\u4E0D\u76F8\u7B49\u3002\u6240\u6709\u6709\u9650\u6D6E\u70B9\u6570\u90FD\u4E25\u683C\u5C0F\u4E8E +\u221E\uFF0C\u4E25\u683C\u5927\u4E8E -\u221E\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u4E3A\u4E86\u786E\u4FDD\u7ED3\u679C\u7684\u4E00\u81F4\u6027\u548C\u53EF\u9884\u6D4B\u6027\uFF0CDoris \u5BF9 NaN \u7684\u5904\u7406\u4E0E IEEE \u6807\u51C6\u6709\u6240\u4E0D\u540C\u3002 \u5728 Doris \u4E2D\uFF0CNaN \u88AB\u89C6\u4E3A\u5927\u4E8E\u6240\u6709\u5176\u4ED6\u503C\uFF08\u5305\u62EC Infinity\uFF09, NaN \u7B49\u4E8E NaN\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-SQL",children:"mysql> select * from sort_float order by d;\n+------+-----------+\n| id   | d         |\n+------+-----------+\n|    5 | -Infinity |\n|    2 |      -123 |\n|    1 |       123 |\n|    4 |  Infinity |\n|    8 |       NaN |\n|    9 |       NaN |\n+------+-----------+\n\nmysql> select \n    cast('Nan' as double) = cast('Nan' as double) , \n    cast('Nan' as double) > cast('Inf' as double) , \n    cast('Nan' as double) > cast('123456.789' as double);\n+-----------------------------------------------+-----------------------------------------------+------------------------------------------------------+\n| cast('Nan' as double) = cast('Nan' as double) | cast('Nan' as double) > cast('Inf' as double) | cast('Nan' as double) > cast('123456.789' as double) |\n+-----------------------------------------------+-----------------------------------------------+------------------------------------------------------+\n|                                             1 |                                             1 |                                                    1 |\n+-----------------------------------------------+-----------------------------------------------+------------------------------------------------------+\n"})}),"\n",(0,l.jsx)(e.h3,{id:"\u65E5\u671F\u51FD\u6570",children:"\u65E5\u671F\u51FD\u6570"}),"\n",(0,l.jsx)(e.p,{children:"\u672C\u6B21\u4F18\u5316\u56F4\u7ED5\u65E5\u671F\u51FD\u6570\u4E0E\u65F6\u533A\u652F\u6301\u4E24\u5927\u7EF4\u5EA6\u5C55\u5F00\uFF0C\u8FDB\u4E00\u6B65\u63D0\u5347\u4E86\u6570\u636E\u5904\u7406\u7684\u51C6\u786E\u6027\u4E0E\u9002\u7528\u6027\uFF1A"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"\u7EDF\u4E00\u65E5\u671F\u6EA2\u51FA\u884C\u4E3A"}),"\uFF1A\u9488\u5BF9\u4F17\u591A\u65E5\u671F\u51FD\u6570\u5728\u65E5\u671F\u6EA2\u51FA\u573A\u666F\uFF08\u5982\u65E5\u671F\u5C0F\u4E8E ",(0,l.jsx)(e.code,{children:"0000-01-01"})," \u6216\u5927\u4E8E ",(0,l.jsx)(e.code,{children:"9999-12-31"}),"\uFF09\u4E0B\u7684\u884C\u4E3A\u8FDB\u884C\u6807\u51C6\u5316\u4FEE\u6B63\uFF0C\u6B64\u524D\u4E0D\u540C\u51FD\u6570\u5904\u7406\u6EA2\u51FA\u65F6\u7ED3\u679C\u4E0D\u4E00\u81F4\u7684\u95EE\u9898\u88AB\u89E3\u51B3\uFF0C\u5F53\u524D\u6240\u6709\u76F8\u5173\u51FD\u6570\u5728\u89E6\u53D1\u65E5\u671F\u6EA2\u51FA\u65F6\u5747\u7EDF\u4E00\u8FD4\u56DE\u62A5\u9519\uFF0C\u907F\u514D\u56E0\u5F02\u5E38\u7ED3\u679C\u5BFC\u81F4\u7684\u6570\u636E\u8BA1\u7B97\u504F\u5DEE\u3002"]}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"\u6269\u5C55\u65E5\u671F\u51FD\u6570\u652F\u6301\u8303\u56F4"}),"\uFF1A\u5C06\u90E8\u5206\u65E5\u671F\u7C7B\u578B\u51FD\u6570\u7684\u53C2\u6570\u7B7E\u540D\u4ECE ",(0,l.jsx)(e.code,{children:"int32"})," \u5347\u7EA7\u4E3A ",(0,l.jsx)(e.code,{children:"int64"}),"\u3002\u8FD9\u4E00\u8C03\u6574\u7A81\u7834\u4E86\u539F ",(0,l.jsx)(e.code,{children:"int32"})," \u7C7B\u578B\u5BF9\u65E5\u671F\u8303\u56F4\u7684\u9650\u5236\uFF0C\u4F7F\u76F8\u5173\u51FD\u6570\u80FD\u591F\u652F\u6301\u66F4\u5927\u8DE8\u5EA6\u7684\u65E5\u671F\u8BA1\u7B97\u3002"]}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"\u4F18\u5316\u65F6\u533A\u652F\u6301\u63CF\u8FF0"}),"\uFF1A\u7ED3\u5408 Doris \u65F6\u533A\u7BA1\u7406\u7684\u5B9E\u9645\u903B\u8F91\uFF08\u8BE6\u89C1\u5B98\u65B9\u6587\u6863\uFF1A",(0,l.jsx)(e.a,{href:"https://doris.apache.org/zh-CN/docs/dev/admin-manual/cluster-management/time-zone",children:"https://doris.apache.org/zh-CN/docs/dev/admin-manual/cluster-management/time-zone"})," \uFF09\uFF0C\u5BF9\u65F6\u533A\u652F\u6301\u5185\u5BB9\u8FDB\u884C\u4E86\u66F4\u7CBE\u51C6\u7684\u8865\u5145\u4E0E\u8BF4\u660E\uFF0C\u660E\u786E\u4E86 ",(0,l.jsx)(e.code,{children:"system_time_zone"})," \u4E0E ",(0,l.jsx)(e.code,{children:"time_zone"})," \u4E24\u5927\u6838\u5FC3\u53C2\u6570\u7684\u4F5C\u7528\u3001\u4FEE\u6539\u65B9\u5F0F\uFF0C\u4EE5\u53CA\u65F6\u533A\u5BF9\u65E5\u671F\u51FD\u6570\uFF08\u5982 ",(0,l.jsx)(e.code,{children:"FROM_UNIXTIME"}),"\u3001",(0,l.jsx)(e.code,{children:"UNIX_TIMESTAMP"}),"\uFF09\u3001\u6570\u636E\u5BFC\u5165\u8F6C\u6362\u7684\u5177\u4F53\u5F71\u54CD\uFF0C\u4E3A\u7528\u6237\u914D\u7F6E\u4E0E\u4F7F\u7528\u65F6\u533A\u529F\u80FD\u63D0\u4F9B\u66F4\u6E05\u6670\u7684\u6307\u5F15\u3002"]}),"\n",(0,l.jsx)(e.p,{children:"\u4E3A\u6784\u5EFA\u771F\u6B63 Agent Friendly \u7684\u6570\u636E\u5E93\u751F\u6001\uFF0C\u5E76\u5E2E\u52A9\u5927\u6A21\u578B\u66F4\u7CBE\u51C6\u3001\u6DF1\u5EA6\u5730\u7406\u89E3 Doris\uFF0C\u6211\u4EEC\u5BF9 Doris \u7684 SQL Reference \u8FDB\u884C\u4E86\u7CFB\u7EDF\u6027\u5B8C\u5584\uFF0C\u5177\u4F53\u6DB5\u76D6\u6570\u636E\u7C7B\u578B\u5B9A\u4E49\u3001\u51FD\u6570\u5B9A\u4E49\u3001\u6570\u636E\u53D8\u6362\u89C4\u5219\u7B49\u6838\u5FC3\u5185\u5BB9\uFF0C\u4E3A AI \u4E0E\u6570\u636E\u5E93\u7684\u534F\u540C\u4EA4\u4E92\u5960\u5B9A\u6E05\u6670\u3001\u53EF\u9760\u7684\u6280\u672F\u57FA\u7840\u3002 \u8FD9\u9879\u5DE5\u4F5C\u5F97\u5230\u4E86\u5F88\u591A\u793E\u533A\u5C0F\u4F19\u4F34\u7684\u652F\u6301\uFF0C\u4ED6\u4EEC\u7684\u667A\u6167\u4E0E\u529B\u91CF\u4E3A\u9879\u76EE\u6CE8\u5165\u4E86\u5173\u952E\u6D3B\u529B\u3002\u6211\u4EEC\u4E5F\u70ED\u5207\u671F\u5F85\u66F4\u591A\u793E\u533A\u540C\u4EC1\u52A0\u5165\u8FDB\u6765\uFF0C\u4E0E\u6211\u4EEC\u643A\u624B\u5171\u5EFA\uFF0C\u5728\u6280\u672F\u63A2\u7D22\u4E0E\u751F\u6001\u5B8C\u5584\u7684\u9053\u8DEF\u4E0A\u51DD\u805A\u66F4\u591A\u529B\u91CF\uFF0C\u5171\u521B\u66F4\u5927\u4EF7\u503C\u3002"}),"\n",(0,l.jsx)(e.h2,{id:"\u4E94\u6027\u80FD\u4F18\u5316",children:"\u4E94\u3001\u6027\u80FD\u4F18\u5316"}),"\n",(0,l.jsx)(e.h3,{id:"topn-\u5EF6\u8FDF\u7269\u5316",children:(0,l.jsx)(e.strong,{children:"TopN \u5EF6\u8FDF\u7269\u5316"})}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.code,{children:"SELECT * FROM tableX ORDER BY columnA ASC/DESC LIMIT N"})," \u4F5C\u4E3A\u5178\u578B\u7684 TopN \u67E5\u8BE2\u6A21\u5F0F\uFF0C\u5E7F\u6CDB\u5E94\u7528\u4E8E\u65E5\u5FD7\u5206\u6790\u3001\u5411\u91CF\u68C0\u7D22\u3001\u6570\u636E\u63A2\u67E5\u7B49\u9AD8\u9891\u573A\u666F\u3002\u7531\u4E8E\u6B64\u7C7B\u67E5\u8BE2\u672A\u643A\u5E26\u8FC7\u6EE4\u6761\u4EF6\uFF0C\u5F53\u6570\u636E\u89C4\u6A21\u5E9E\u5927\u65F6\uFF0C\u4F20\u7EDF\u6267\u884C\u65B9\u5F0F\u9700\u5BF9\u5168\u8868\u6570\u636E\u8FDB\u884C\u626B\u63CF\u5E76\u6392\u5E8F\uFF0C\u8FD9\u4F1A\u5BFC\u81F4\u5927\u91CF\u4E0D\u5FC5\u8981\u7684\u6570\u636E\u8BFB\u53D6\uFF0C\u5F15\u53D1\u4E25\u91CD\u7684\u8BFB\u653E\u5927\u95EE\u9898\u3002\u5C24\u5176\u5728\u9AD8\u5E76\u53D1\u8BF7\u6C42\u6216\u5927\u6570\u636E\u91CF\u5B58\u50A8\u573A\u666F\u4E2D\uFF0C\u8BE5\u7C7B\u67E5\u8BE2\u7684\u6027\u80FD\u74F6\u9888\u66F4\u4E3A\u663E\u8457\uFF0C\u7528\u6237\u5BF9\u5176\u4F18\u5316\u9700\u6C42\u6781\u4E3A\u8FEB\u5207\u3002"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{alt:"img",src:i(60432).Z+"",width:"898",height:"850"})}),"\n",(0,l.jsxs)(e.p,{children:["\u4E3A\u653B\u514B\u8FD9\u4E00\u75DB\u70B9\uFF0C\u6211\u4EEC\u5F15\u5165\u4E86\u300C\u5EF6\u8FDF\u7269\u5316\u300D\u4F18\u5316\u673A\u5236\uFF0C\u5C06 TopN \u67E5\u8BE2\u62C6\u89E3\u4E3A\u4E24\u9636\u6BB5\u9AD8\u6548\u6267\u884C\uFF1A\u7B2C\u4E00\u9636\u6BB5\u4EC5\u8BFB\u53D6\u6392\u5E8F\u5B57\u6BB5\uFF08columnA\uFF09\u4E0E\u7528\u4E8E\u5B9A\u4F4D\u6570\u636E\u7684\u4E3B\u952E / \u884C\u6807\u8BC6\uFF0C\u901A\u8FC7\u6392\u5E8F\u5FEB\u901F\u7B5B\u9009\u51FA\u7B26\u5408 ",(0,l.jsx)(e.code,{children:"LIMIT N"})," \u6761\u4EF6\u7684\u76EE\u6807\u884C\uFF1B\u7B2C\u4E8C\u9636\u6BB5\u518D\u57FA\u4E8E\u884C\u6807\u8BC6\u7CBE\u51C6\u8BFB\u53D6\u76EE\u6807\u884C\u7684\u6240\u6709\u5217\u6570\u636E\u3002"]}),"\n",(0,l.jsx)(e.p,{children:"\u57284.0\u4E0A\uFF0C\u6211\u4EEC\u5BF9\u8FD9\u4E2A\u80FD\u529B\u505A\u51FA\u4E86\u66F4\u8FDB\u4E00\u6B65\u7684\u6269\u5C55"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u652F\u6301\u5728\u591A\u8868\u5173\u8054\u7684\u65F6\u5019\u4E5F\u8FDB\u884CTopN\u7684\u5EF6\u8FDF\u7269\u5316"}),"\n",(0,l.jsx)(e.li,{children:"\u652F\u6301\u5728\u5916\u8868\u67E5\u8BE2\u65F6\u8FDB\u884CTopN\u7684\u5EF6\u8FDF\u7269\u5316"}),"\n"]}),"\n",(0,l.jsxs)(e.p,{children:["\u5728\u8FD9\u4E24\u4E2A\u65B0\u7684\u573A\u666F\u4E4B\u4E2D\uFF0C\u8FD9\u4E2A\u65B9\u6848\u80FD\u5927\u5E45\u524A\u51CF\u975E\u5FC5\u8981\u5217\u7684\u8BFB\u53D6\u91CF\uFF0C\u4ECE\u6839\u6E90\u4E0A\u964D\u4F4E\u8BFB\u653E\u5927\u6548\u5E94\uFF0C\u5728\u5BBD\u8868\u5C0F ",(0,l.jsx)(e.code,{children:"LIMIT"})," \u573A\u666F\u4E0B TopN \u67E5\u8BE2\u7684\u6267\u884C\u6548\u7387\u6709\u51E0\u5341\u500D\u7684\u63D0\u5347\u3002"]}),"\n",(0,l.jsx)(e.h3,{id:"sql-cache-\u7F13\u5B58",children:(0,l.jsx)(e.strong,{children:"SQL Cache \u7F13\u5B58"})}),"\n",(0,l.jsx)(e.p,{children:"SQL Cache \u662FDoris \u5728\u65E9\u671F\u7248\u672C\u4E2D\u63D0\u4F9B\u7684\u4E00\u4E2A\u529F\u80FD\uFF0C\u4F46\u662F\u8FD9\u4E2A\u529F\u80FD\u7684\u4F7F\u7528\u53D7\u9650\u4E8E\u5F88\u591A\u6761\u4EF6\uFF0C\u6240\u4EE5\u6CA1\u6709\u9ED8\u8BA4\u6253\u5F00\uFF0C\u5728\u8FD9\u4E2A\u7248\u672C\u4E2D\uFF0C\u6211\u4EEC\u7CFB\u7EDF\u7684\u68B3\u7406\u4E86\u53EF\u80FD\u5F71\u54CDSQL Cache \u7ED3\u679C\u7684\u95EE\u9898\uFF0C\u4F8B\u5982 catalog\u3001db\u3001table\u3001column\u3001row\u67E5\u8BE2\u6743\u9650\u53D8\u66F4\uFF0CSession variables \u53D1\u751F\u53D8\u66F4\uFF0C\u51FA\u73B0\u4E86\u5E38\u91CF\u6298\u53E0\u89C4\u5219\u4E0D\u80FD\u5316\u7B80\u7684\u975E\u786E\u5B9A\u51FD\u6570\u7B49\uFF0C\u786E\u4FDDSQL Cache \u7ED3\u679C\u7684\u6B63\u786E\u6027\uFF0C\u6240\u4EE5\u8FD9\u4E2A\u529F\u80FD\u9ED8\u8BA4\u5F00\u542F\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u540C\u65F6\u6211\u4EEC\u7CFB\u7EDF\u7684\u4F18\u5316\u4E86\u4F18\u5316\u5668\u89E3\u6790SQL\u7684\u6027\u80FD\uFF0C\u5C06SQL \u89E3\u6790\u7684\u6027\u80FD\u63D0\u5347\u4E86100\u500D\u3002\u4F8B\u5982\u4EE5\u4E0BSQL\uFF0C\u5176\u4E2Dbig_view\u662F\u4E2A\u5F88\u5927\u7684view\uFF0C\u91CC\u9762\u6709\u5D4C\u5957\u7684view\uFF0C\u5171\u8BA1163\u4E2Ajoin\u548C17\u4E2Aunion\uFF0C\u6211\u4EEC\u5C06SQL \u89E3\u6790\u7684\u6027\u80FD\u4ECE400ms\uFF0C\u63D0\u5347\u5230\u4E862ms\u3002\u8FD9\u4E2A\u4F18\u5316\u4E0D\u4EC5\u4EC5\u5BF9SQL Cache \u6709\u5F88\u5927\u7684\u4F5C\u7528\uFF0C\u5BF9Doris \u5728\u9AD8\u5E76\u53D1\u67E5\u8BE2\u573A\u666F\u4E0B\uFF0C\u90FD\u6709\u5F88\u5927\u7684\u63D0\u5347\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-SQL",children:"SELECT *,now() as etl_time from big_view;\n"})}),"\n",(0,l.jsx)(e.h3,{id:"json-\u6027\u80FD\u4F18\u5316",children:"JSON \u6027\u80FD\u4F18\u5316"}),"\n",(0,l.jsx)(e.p,{children:"JSON \u662F\u534A\u7ED3\u6784\u5316\u6570\u636E\u5E38\u89C1\u7684\u4E00\u79CD\u5B58\u50A8\u65B9\u5F0F\uFF0C\u57284.0 \u7248\u672C\u6211\u4EEC\u5BF9JSONB \u4E5F\u8FDB\u884C\u4E86\u5347\u7EA7\u3002\u4E00\u65B9\u9762\uFF0C\u65B0\u589E\u5BF9 Decimal \u7C7B\u578B\u7684\u652F\u6301\uFF0C\u5B8C\u5584\u4E86 JSON \u4E2D Number \u7C7B\u578B\u4E0E Doris \u5185\u90E8\u7C7B\u578B\u7684\u6620\u5C04\u4F53\u7CFB\uFF08\u6B64\u524D\u5DF2\u8986\u76D6 Int8/Int16/Int32/Int64/Int128/Float/Double \u7B49\uFF09\uFF0C\u8FDB\u4E00\u6B65\u6EE1\u8DB3\u9AD8\u7CBE\u5EA6\u6570\u503C\u573A\u666F\u7684\u5B58\u50A8\u4E0E\u5904\u7406\u9700\u6C42\uFF0C\u907F\u514D\u5927\u6570\u503C\u6216\u9AD8\u7CBE\u5EA6\u6570\u636E\u5728 JSON \u8F6C\u6362\u4E2D\u56E0\u7C7B\u578B\u9002\u914D\u95EE\u9898\u5BFC\u81F4\u7684\u7CBE\u5EA6\u635F\u5931\uFF0C\u8FD9\u6709\u52A9\u4E8Evariant \u7C7B\u578B\u7684\u63A8\u5BFC\uFF1B\u53E6\u4E00\u65B9\u9762\uFF0C\u5BF9 JSONB \u76F8\u5173\u7684\u5168\u91CF\u51FD\u6570\uFF08\u5982 json_extract \u7CFB\u5217\u3001json_exists_path\u3001json_type \u7B49\uFF09\u8FDB\u884C\u7CFB\u7EDF\u6027\u6027\u80FD\u4F18\u5316\uFF0C\u4F18\u5316\u540E\u51FD\u6570\u6267\u884C\u6548\u7387\u666E\u904D\u63D0\u5347 30% \u4EE5\u4E0A\uFF0C\u663E\u8457\u52A0\u5FEB\u4E86 JSON \u5B57\u6BB5\u63D0\u53D6\u3001\u7C7B\u578B\u5224\u65AD\u3001\u8DEF\u5F84\u6821\u9A8C\u7B49\u9AD8\u9891\u64CD\u4F5C\u7684\u5904\u7406\u901F\u5EA6\uFF0C\u4E3A\u534A\u7ED3\u6784\u5316\u6570\u636E\u7684\u9AD8\u6548\u5206\u6790\u63D0\u4F9B\u66F4\u5F3A\u652F\u6491\u3002"}),"\n",(0,l.jsxs)(e.p,{children:["\u76F8\u5173\u529F\u80FD\u7EC6\u8282\u53EF\u53C2\u8003 Doris \u5B98\u65B9\u6587\u6863\uFF1A",(0,l.jsx)(e.a,{href:"https://doris.apache.org/zh-CN/docs/dev/sql-manual/basic-element/sql-data-types/semi-structured/JSON",children:"https://doris.apache.org/zh-CN/docs/dev/sql-manual/basic-element/sql-data-types/semi-structured/JSON"})]}),"\n",(0,l.jsx)(e.h2,{id:"\u516D\u66F4\u6613\u7528\u7684\u8D44\u6E90\u7BA1\u63A7",children:"\u516D\u3001\u66F4\u6613\u7528\u7684\u8D44\u6E90\u7BA1\u63A7"}),"\n",(0,l.jsx)(e.p,{children:"4.0 \u7248\u672C\u5BF9 workload group \u7684\u4F7F\u7528\u673A\u5236\u8FDB\u884C\u4E86\u4F18\u5316\uFF1A\u7EDF\u4E00\u4E86 CPU \u4E0E\u5185\u5B58\u7684\u8F6F\u9650\u3001\u786C\u9650\u5B9A\u4E49\u65B9\u5F0F\uFF0C\u65E0\u9700\u518D\u901A\u8FC7\u5404\u7C7B\u914D\u7F6E\u9879\u5355\u72EC\u5F00\u542F\u8F6F\u9650\u6216\u786C\u9650\u529F\u80FD\uFF0C\u5E76\u4E14\u540C\u65F6\u652F\u6301\u5728\u540C\u4E00 workload group \u4E2D\u5E76\u5B58\u4F7F\u7528\u8F6F\u9650\u4E0E\u786C\u9650\u3002\u4F18\u5316\u540E\u4E0D\u4EC5\u7B80\u5316\u4E86\u53C2\u6570\u914D\u7F6E\u6D41\u7A0B\uFF0C\u8FD8\u589E\u5F3A\u4E86 workload group \u7684\u4F7F\u7528\u7075\u6D3B\u6027\uFF0C\u80FD\u66F4\u7CBE\u51C6\u5730\u6EE1\u8DB3\u591A\u6837\u5316\u7684\u8D44\u6E90\u7BA1\u63A7\u9700\u6C42\u3002"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"MIN_CPU_PERCENT \u548C MAX_CPU_PERCENT"})," \u5B9A\u4E49\u4E86\u5728\u51FA\u73B0 CPU \u4E89\u7528\u65F6\uFF0CWorkload Group \u4E2D\u6240\u6709\u8BF7\u6C42\u7684\u6700\u4F4E\u548C\u6700\u9AD8\u4FDD\u8BC1 CPU \u8D44\u6E90\u3002"]}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"MAX_CPU_PERCENT\uFF08\u6700\u5927 CPU \u767E\u5206\u6BD4\uFF09\u662F\u8BE5\u6C60\u4E2D CPU \u5E26\u5BBD\u7684\u6700\u5927\u9650\u5236\uFF0C\u4E0D\u8BBA\u5F53\u524DCPU \u4F7F\u7528\u7387\u662F\u591A\u5C11\uFF0C \u5F53\u524DWorkload Group \u7684 CPU \u4F7F\u7528\u7387\u8D85\u8FC7\u90FD\u4E0D\u4F1A\u8D85\u8FC7 MAX_CPU_PERCENT\u3002"}),"\n",(0,l.jsx)(e.li,{children:"MIN_CPU_PERCENT\uFF08\u6700\u5C0F CPU \u767E\u5206\u6BD4\uFF09\u662F\u4E3A\u8BE5Workload\u9884\u7559\u7684 CPU \u5E26\u5BBD\uFF0C\u5728\u5B58\u5728\u4E89\u7528\u65F6\uFF0C\u5176\u4ED6\u6C60\u65E0\u6CD5\u4F7F\u7528\u8FD9\u90E8\u5206\u5E26\u5BBD, \u4F46\u662F\u5F53\u8D44\u6E90\u7A7A\u95F2\u65F6\u53EF\u4EE5\u4F7F\u7528\u8D85\u8FC7 MIN_CPU_PERCENT \u7684\u5E26\u5BBD\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u4F8B\u5982\uFF0C\u5047\u8BBE\u67D0\u516C\u53F8\u7684\u9500\u552E\u90E8\u95E8\u548C\u5E02\u573A\u90E8\u95E8\u5171\u4EAB\u540C\u4E00\u4E2A Doris \u5B9E\u4F8B\u3002\u9500\u552E\u90E8\u95E8\u7684\u5DE5\u4F5C\u8D1F\u8F7D\u662F CPU \u5BC6\u96C6\u578B\u7684\uFF0C\u4E14\u5305\u542B\u9AD8\u4F18\u5148\u7EA7\u67E5\u8BE2\uFF1B\u5E02\u573A\u90E8\u95E8\u7684\u5DE5\u4F5C\u8D1F\u8F7D\u540C\u6837\u662F CPU \u5BC6\u96C6\u578B\uFF0C\u4F46\u67E5\u8BE2\u4F18\u5148\u7EA7\u8F83\u4F4E\u3002\u901A\u8FC7\u4E3A\u6BCF\u4E2A\u90E8\u95E8\u521B\u5EFA\u5355\u72EC\u7684Workload Group\uFF0C\u53EF\u4EE5\u4E3A\u9500\u552EWorkload Group\u5206\u914D 40% \u7684\u6700\u5C0F CPU \u767E\u5206\u6BD4\uFF0C\u4E3A\u5E02\u573AWorkload Group\u5206\u914D 30% \u7684\u6700\u5927 CPU \u767E\u5206\u6BD4\u3002\u8FD9\u79CD\u914D\u7F6E\u80FD\u786E\u4FDD\u9500\u552E\u5DE5\u4F5C\u8D1F\u8F7D\u83B7\u5F97\u6240\u9700\u7684 CPU \u8D44\u6E90\uFF0C\u540C\u65F6\u5E02\u573A\u5DE5\u4F5C\u8D1F\u8F7D\u4E0D\u4F1A\u5F71\u54CD\u9500\u552E\u5DE5\u4F5C\u8D1F\u8F7D\u5BF9 CPU \u7684\u9700\u6C42\u3002"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"MIN_MEMORY_PERCENT \u548C MAX_MEMORY_PERCENT"})," \u662FWorkload Group \u53EF\u4EE5\u4F7F\u7528\u7684\u6700\u5C0F\u548C\u6700\u5927\u5185\u5B58\u91CF\u3002"]}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"MAX_MEMORY_PERCENT\uFF0C\u610F\u5473\u7740\u5F53\u8BF7\u6C42\u5728\u8BE5\u6C60\u4E2D\u8FD0\u884C\u65F6\uFF0C\u5B83\u4EEC\u5360\u7528\u7684\u5185\u5B58\u7EDD\u4E0D\u4F1A\u8D85\u8FC7\u603B\u5185\u5B58\u7684\u8FD9\u4E00\u767E\u5206\u6BD4\uFF0C\u4E00\u65E6\u8D85\u8FC7\u90A3\u4E48Query \u5C06\u4F1A\u89E6\u53D1\u843D\u76D8\u6216\u8005\u88ABKill\u3002"}),"\n",(0,l.jsx)(e.li,{children:"MIN_MEMORY_PERCENT\uFF0C\u4E3A\u67D0\u4E2A\u6C60\u8BBE\u7F6E\u6700\u5C0F\u5185\u5B58\u503C\uFF0C\u5F53\u8D44\u6E90\u7A7A\u95F2\u65F6\uFF0C\u53EF\u4EE5\u4F7F\u7528\u8D85\u8FC7MIN_MEMORY_PERCENT\u7684\u5185\u5B58\uFF0C\u4F46\u662F\u5F53\u5185\u5B58\u4E0D\u8DB3\u65F6\uFF0C\u7CFB\u7EDF\u5C06\u6309\u7167MIN_MEMORY_PERCENT\uFF08\u6700\u5C0F\u5185\u5B58\u767E\u5206\u6BD4\uFF09\u5206\u914D\u5185\u5B58\uFF0C\u53EF\u80FD\u4F1A\u9009\u53D6\u4E00\u4E9BQuery Kill\uFF0C\u5C06Workload Group \u7684\u5185\u5B58\u4F7F\u7528\u91CF\u964D\u4F4E\u5230MIN_MEMORY_PERCENT\uFF0C\u4EE5\u786E\u4FDD\u5176\u4ED6Workload Group\u6709\u8DB3\u591F\u7684\u5185\u5B58\u53EF\u7528\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u4E0E\u843D\u76D8\u76F8\u7ED3\u5408"})}),"\n",(0,l.jsx)(e.p,{children:"\u5728\u8FD9\u4E2A\u7248\u672C\u4E2D\uFF0C\u6211\u4EEC\u5C06workload group\u7684\u5185\u5B58\u7BA1\u7406\u80FD\u529B\u4E0E\u843D\u76D8\u529F\u80FD\u8FDB\u884C\u878D\u5408\uFF0C\u7528\u6237\u4E0D\u4EC5\u53EF\u4EE5\u901A\u8FC7\u4E3A\u6BCF\u4E00\u4E2AQuery \u8BBE\u7F6E\u5185\u5B58\u5927\u5C0F\u6765\u63A7\u5236\u843D\u76D8\uFF0C\u8FD8\u53EF\u4EE5\u901A\u8FC7workload group \u7684slot \u673A\u5236\u6765\u5B9E\u73B0\u52A8\u6001\u843D\u76D8\uFF0C\u5728workload group \u4E4B\u4E0A\u6211\u4EEC\u5B9E\u73B0\u4E86\u4EE5\u4E0B\u7B56\u7565\uFF1A"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"none\uFF0C\u9ED8\u8BA4\u503C\uFF0C\u8868\u793A\u4E0D\u542F\u7528\uFF1B\u5728\u8FD9\u79CD\u65B9\u5F0F\u4E0B\uFF0CQuery \u5C31\u5C3D\u91CF\u7684\u4F7F\u7528\u5185\u5B58\uFF0C\u4F46\u662F\u4E00\u65E6\u8FBE\u5230Workload Group\u7684\u4E0A\u9650\uFF0C\u5C31\u4F1A\u89E6\u53D1\u843D\u76D8\uFF1B\u6B64\u65F6\u4E0D\u4F1A\u6839\u636E\u67E5\u8BE2\u7684\u5927\u5C0F\u9009\u62E9\u3002"}),"\n",(0,l.jsxs)(e.li,{children:["fixed\uFF0C\u6BCF\u4E2Aquery \u53EF\u4EE5\u4F7F\u7528\u7684\u7684\u5185\u5B58 = ",(0,l.jsx)(e.code,{children:"workload group\u7684mem_limit * query_slot_count/ max_concurrency"}),"\uFF1B\u8FD9\u79CD\u5185\u5B58\u5206\u914D\u7B56\u7565\u5B9E\u9645\u662F\u6309\u7167\u5E76\u53D1\uFF0C\u7ED9\u6BCF\u4E2AQuery \u5206\u914D\u4E86\u56FA\u5B9A\u7684\u5185\u5B58\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:["dynamic\uFF0C\u6BCF\u4E2Aquery \u53EF\u4EE5\u4F7F\u7528\u7684\u7684\u5185\u5B58 = ",(0,l.jsx)(e.code,{children:"workload group\u7684mem_limit * query_slot_count/ sum(running query slots)"}),"\uFF0C\u5B83\u4E3B\u8981\u662F\u514B\u670D\u4E86fixed \u6A21\u5F0F\u4E0B\uFF0C\u4F1A\u5B58\u5728\u6709\u4E00\u4E9Bslot \u6CA1\u6709\u4F7F\u7528\u7684\u60C5\u51B5\uFF1B\u5B9E\u9645\u5C31\u662F\u628A\u5927\u7684\u67E5\u8BE2\u5148\u843D\u76D8\u3002"]}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"fixed\u6216\u8005dynamic \u90FD\u662F\u8BBE\u7F6E\u7684query\u7684\u786C\u9650\uFF0C\u4E00\u65E6\u8D85\u8FC7\uFF0C\u5C31\u4F1A\u843D\u76D8\u6216\u8005kill\uFF1B\u800C\u4E14\u4F1A\u8986\u76D6\u7528\u6237\u8BBE\u7F6E\u7684\u9759\u6001\u5185\u5B58\u5206\u914D\u7684\u53C2\u6570\u3002 \u6240\u4EE5\u5F53\u8981\u8BBE\u7F6Eslot_memory_policy\u65F6\uFF0C\u4E00\u5B9A\u8981\u8BBE\u7F6E\u597Dworkload group\u7684max_concurrency\uFF0C\u5426\u5219\u4F1A\u51FA\u73B0\u5185\u5B58\u4E0D\u8DB3\u7684\u95EE\u9898\u3002"}),"\n",(0,l.jsx)(e.h2,{id:"\u603B\u7ED3",children:"\u603B\u7ED3"}),"\n",(0,l.jsx)(e.p,{children:"\u672C\u6B21 Apache Doris \u65B0\u7248\u672C\u901A\u8FC7 AI \u4E0E\u641C\u7D22\u80FD\u529B\u7684\u6DF1\u5EA6\u878D\u5408\u3001\u79BB\u7EBF\u8BA1\u7B97\u7684\u7A33\u5B9A\u6027\u63D0\u5347\u3001\u6027\u80FD\u4E0E\u6613\u7528\u6027\u7684\u53CC\u91CD\u4F18\u5316\uFF0C\u8FDB\u4E00\u6B65\u62D3\u5BBD\u4E86\u6570\u636E\u5E93\u7684\u5E94\u7528\u8FB9\u754C\uFF0C\u53EF\u66F4\u597D\u5730\u652F\u6491\u4F01\u4E1A\u4ECE\u4F20\u7EDF BI \u5206\u6790\u5230 AI \u667A\u80FD\u68C0\u7D22\u3001\u4ECE\u5B9E\u65F6\u67E5\u8BE2\u5230\u5927\u89C4\u6A21\u79BB\u7EBF\u6279\u5904\u7406\u7684\u5168\u573A\u666F\u6570\u636E\u5206\u6790\u9700\u6C42\u3002\u65E0\u8BBA\u662F\u4E92\u8054\u7F51\u3001\u91D1\u878D\u3001\u96F6\u552E\u7B49\u884C\u4E1A\u7684\u5B9E\u65F6\u62A5\u8868\u3001\u7528\u6237\u884C\u4E3A\u5206\u6790\uFF0C\u8FD8\u662F\u653F\u52A1\u3001\u533B\u7597\u9886\u57DF\u7684\u6587\u6863\u68C0\u7D22\u3001\u5927\u89C4\u6A21\u6570\u636E\u6279\u5904\u7406\uFF0C\u65B0\u7248\u672C Doris \u90FD\u5C06\u4E3A\u7528\u6237\u63D0\u4F9B\u66F4\u9AD8\u6548\u3001\u66F4\u53EF\u9760\u7684\u6570\u636E\u5206\u6790\u4F53\u9A8C\u3002"}),"\n",(0,l.jsxs)(e.p,{children:["\u76EE\u524D\uFF0CApache Doris \u65B0\u7248\u672C\u5DF2\u5F00\u653E\u4E0B\u8F7D\uFF0C\u8BE6\u7EC6\u7279\u6027\u6587\u6863\u4E0E\u5347\u7EA7\u6307\u5357\u53EF\u8BBF\u95EE\u5B98\u65B9\u7F51\u7AD9\uFF08 ",(0,l.jsx)(e.a,{href:"https://doris.apache.org/",children:"https://doris.apache.org/"})," \uFF09\u67E5\u770B\uFF0C\u6B22\u8FCE\u793E\u533A\u7528\u6237\u4F53\u9A8C\u4E0E\u53CD\u9988\uFF01"]}),"\n",(0,l.jsx)(e.h2,{id:"\u81F4\u8C22",children:"\u81F4\u8C22"}),"\n",(0,l.jsx)(e.p,{children:"\u5728\u6B64\uFF0C\u518D\u6B21\u5411\u6240\u6709\u53C2\u4E0E\u7248\u672C\u7814\u53D1\u3001\u6D4B\u8BD5\u548C\u9700\u6C42\u53CD\u9988\u7684\u8D21\u732E\u8005\u4EEC\u8868\u793A\u6700\u8877\u5FC3\u7684\u611F\u8C22\uFF1A"}),"\n",(0,l.jsx)(e.p,{children:"Pxl, walter, Gabriel, Mingyu Chen (Rayner), Mryange, morrySnow, zhangdong, lihangyu, zhangstar333, hui lai, Calvin Kirs, deardeng, Dongyang Li, Kaijie Chen, Xinyi Zou, minghong, meiyi, James / Jibing-Li, seawinde, abmdocrt, Yongqiang YANG, Sun Chenyang, wangbo, starocean999, Socrates / \u82CF\u5C0F\u521A\uFF0CGavin Chou, 924060929, HappenLee, yiguolei, daidai, Lei Zhang, zhengyu, zy-kkk, zclllyybb /zclllhhjj, bobhan1, amory, zhiqiang, Jerry Hu, Xin Liao, Siyang Tang, LiBinfeng, Tiewei Fang, Luwei, huanghaibin, Qi Chen, TengJianPing, \u8C22\u5065\uFF0CLightman, zhannngchen, koarz, xy720, kkop, HHoflittlefish777, xzj7019, Ashin Gau, lw112, plat1ko, shuke, yagagagaga, shee, zgxme, qiye, zfr95, slothever, Xujian Duan, Yulei-Yang, Jack, Kang, Lijia Liu, linrrarity, Petrichor, Thearas, Uniqueyou, dwdwqfwe, Refrain, catpineapple, smiletan, wudi, caiconghui, camby, zhangyuan, jakevin, Chester, Mingxi, Rijesh Kunhi Parambattu, admiring_xm, zxealous, XLPE, chunping, sparrow, xueweizhang, Adonis Ling, Jiwen liu, KassieZ, Liu Zhenlong, MoanasDaddyXu, Peyz, \u795E\u6280\u5708\u5B50\uFF0C133tosakarin, FreeOnePlus, Ryan19929, Yixuan Wang, htyoung, smallx, Butao Zhang, Ceng, GentleCold, GoGoWen, HonestManXin, Liqf, Luzhijing, Shuo Wang, Wen Zhenghu, Xr Ling, Zhiguo Wu, Zijie Lu, feifeifeimoon, heguanhui, toms, wudongliang, yangshijie, yongjinhou, yulihua, zhangm365, Amos Bird, AndersZ, Ganlin Zhao, Jeffrey, John Zhang, M1saka, SWEI, XueYuhai, Yao-MR, York Cao, caoliang-web, echo-dundun, huanghg1994, lide, lzy, nivane, nsivarajan, py023, vlt, wlong, zhaorongsheng, AlexYue, Arjun Anandkumar, Arnout Engelen, Benjaminwei, DayuanX, DogDu, DuRipeng, Emmanuel Ferdman, Fangyuan Deng, Guangdong Liu, HB, He xueyu, Hongkun Xu, Hu Yanjun, JinYang, KeeProMise, Muhammet Sakarya, Nya~, On-Work-Song, Shane, Stalary, StarryVerse, TsukiokaKogane, Udit Chaudhary, Xin Li, XnY-wei, Xu Chen, XuJianxu, XuPengfei, Yijia Su, ZhenchaoXu, cat-with-cat, elon-X, gnehil, hongyu guo, ivin, jw-sun, koi, liuzhenwei, msridhar78, noixcn, nsn_huang, peterylh, shouchengShen, spaces-x, wangchuang, wangjing, wangqt, wubiao, xuchenhao, xyf, yanmingfu, yi wang, z404289981, zjj, zzwwhh, \u0130smail Tosun, \u8D75\u7855"})]})}function h(n={}){let{wrapper:e}={...(0,r.a)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(o,{...n})}):o(n)}},60432:function(n,e,i){i.d(e,{Z:function(){return s}});let s=i.p+"assets/images/4.0.0-release-44c60ad6a76cdfedee289ba35c653a73.png"},250065:function(n,e,i){i.d(e,{Z:function(){return a},a:function(){return d}});var s=i(667294);let l={},r=s.createContext(l);function d(n){let e=s.useContext(r);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:d(n.components),s.createElement(r.Provider,{value:e},n.children)}}}]);