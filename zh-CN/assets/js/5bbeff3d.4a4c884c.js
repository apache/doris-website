"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["725317"],{895948:function(e,n,r){r.r(n),r.d(n,{default:()=>h,frontMatter:()=>o,metadata:()=>s,assets:()=>i,toc:()=>d,contentTitle:()=>c});var s=JSON.parse('{"id":"ecosystem/doris-kafka-connector","title":"Doris Kafka Connector","description":"Kafka Connect \u662F\u4E00\u6B3E\u53EF\u6269\u5C55\u3001\u53EF\u9760\u7684\u5728 Apache Kafka \u548C\u5176\u4ED6\u7CFB\u7EDF\u4E4B\u95F4\u8FDB\u884C\u6570\u636E\u4F20\u8F93\u7684\u5DE5\u5177\uFF0C\u53EF\u4EE5\u5B9A\u4E49 Connectors \u5C06\u5927\u91CF\u6570\u636E\u8FC1\u5165\u8FC1\u51FA Kafka\u3002","source":"@site/i18n/zh-CN/docusaurus-plugin-content-docs/version-4.x/ecosystem/doris-kafka-connector.md","sourceDirName":"ecosystem","slug":"/ecosystem/doris-kafka-connector","permalink":"/zh-CN/docs/4.x/ecosystem/doris-kafka-connector","draft":false,"unlisted":false,"tags":[],"version":"4.x","lastUpdatedAt":1770477659000,"frontMatter":{"title":"Doris Kafka Connector","language":"zh-CN","description":"Kafka Connect \u662F\u4E00\u6B3E\u53EF\u6269\u5C55\u3001\u53EF\u9760\u7684\u5728 Apache Kafka \u548C\u5176\u4ED6\u7CFB\u7EDF\u4E4B\u95F4\u8FDB\u884C\u6570\u636E\u4F20\u8F93\u7684\u5DE5\u5177\uFF0C\u53EF\u4EE5\u5B9A\u4E49 Connectors \u5C06\u5927\u91CF\u6570\u636E\u8FC1\u5165\u8FC1\u51FA Kafka\u3002"},"sidebar":"docs","previous":{"title":"Flink Doris Connector","permalink":"/zh-CN/docs/4.x/ecosystem/flink-doris-connector"},"next":{"title":"Doris Kubernetes Operator","permalink":"/zh-CN/docs/4.x/ecosystem/doris-operator/doris-operator-overview"}}'),t=r("785893"),a=r("250065");let o={title:"Doris Kafka Connector",language:"zh-CN",description:"Kafka Connect \u662F\u4E00\u6B3E\u53EF\u6269\u5C55\u3001\u53EF\u9760\u7684\u5728 Apache Kafka \u548C\u5176\u4ED6\u7CFB\u7EDF\u4E4B\u95F4\u8FDB\u884C\u6570\u636E\u4F20\u8F93\u7684\u5DE5\u5177\uFF0C\u53EF\u4EE5\u5B9A\u4E49 Connectors \u5C06\u5927\u91CF\u6570\u636E\u8FC1\u5165\u8FC1\u51FA Kafka\u3002"},c=void 0,i={},d=[{value:"\u7248\u672C\u8BF4\u660E",id:"\u7248\u672C\u8BF4\u660E",level:2},{value:"\u4F7F\u7528\u65B9\u5F0F",id:"\u4F7F\u7528\u65B9\u5F0F",level:2},{value:"\u4E0B\u8F7D",id:"\u4E0B\u8F7D",level:3},{value:"Standalone \u6A21\u5F0F\u542F\u52A8",id:"standalone-\u6A21\u5F0F\u542F\u52A8",level:3},{value:"Distributed \u6A21\u5F0F\u542F\u52A8",id:"distributed-\u6A21\u5F0F\u542F\u52A8",level:3},{value:"\u8BBF\u95EE SSL \u8BA4\u8BC1\u7684 Kafka \u96C6\u7FA4",id:"\u8BBF\u95EE-ssl-\u8BA4\u8BC1\u7684-kafka-\u96C6\u7FA4",level:3},{value:"\u6B7B\u4FE1\u961F\u5217",id:"\u6B7B\u4FE1\u961F\u5217",level:3},{value:"\u914D\u7F6E\u9879",id:"\u914D\u7F6E\u9879",level:2},{value:"\u7C7B\u578B\u6620\u5C04",id:"\u7C7B\u578B\u6620\u5C04",level:2},{value:"\u6700\u4F73\u5B9E\u8DF5",id:"\u6700\u4F73\u5B9E\u8DF5",level:2},{value:"\u540C\u6B65\u666E\u901A JSON \u6570\u636E",id:"\u540C\u6B65\u666E\u901A-json-\u6570\u636E",level:3},{value:"\u540C\u6B65 Debezium \u7EC4\u4EF6\u91C7\u96C6\u7684\u6570\u636E",id:"\u540C\u6B65-debezium-\u7EC4\u4EF6\u91C7\u96C6\u7684\u6570\u636E",level:3},{value:"\u540C\u6B65 Avro \u5E8F\u5217\u5316\u6570\u636E",id:"\u540C\u6B65-avro-\u5E8F\u5217\u5316\u6570\u636E",level:3},{value:"\u540C\u6B65 Protobuf \u5E8F\u5217\u5316\u6570\u636E",id:"\u540C\u6B65-protobuf-\u5E8F\u5217\u5316\u6570\u636E",level:3},{value:"\u4F7F\u7528 Kafka Connect SMT \u8F6C\u6362\u6570\u636E",id:"\u4F7F\u7528-kafka-connect-smt-\u8F6C\u6362\u6570\u636E",level:3},{value:"\u5E38\u89C1\u95EE\u9898",id:"\u5E38\u89C1\u95EE\u9898",level:2}];function l(e){let n={a:"a",admonition:"admonition",br:"br",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"https://docs.confluent.io/platform/current/connect/index.html",children:"Kafka Connect"})," \u662F\u4E00\u6B3E\u53EF\u6269\u5C55\u3001\u53EF\u9760\u7684\u5728 Apache Kafka \u548C\u5176\u4ED6\u7CFB\u7EDF\u4E4B\u95F4\u8FDB\u884C\u6570\u636E\u4F20\u8F93\u7684\u5DE5\u5177\uFF0C\u53EF\u4EE5\u5B9A\u4E49 Connectors \u5C06\u5927\u91CF\u6570\u636E\u8FC1\u5165\u8FC1\u51FA Kafka\u3002"]}),"\n",(0,t.jsxs)(n.p,{children:["Doris \u793E\u533A\u63D0\u4F9B\u4E86 ",(0,t.jsx)(n.a,{href:"https://github.com/apache/doris-kafka-connector",children:"doris-kafka-connector"})," \u63D2\u4EF6\uFF0C\u53EF\u4EE5\u5C06 Kafka topic \u4E2D\u7684\u6570\u636E\u5199\u5165\u5230 Doris \u4E2D\u3002"]}),"\n",(0,t.jsx)(n.h2,{id:"\u7248\u672C\u8BF4\u660E",children:"\u7248\u672C\u8BF4\u660E"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Connector Version"}),(0,t.jsx)(n.th,{children:"Kafka Version"}),(0,t.jsx)(n.th,{children:"Doris Version"}),(0,t.jsx)(n.th,{children:"Java Version"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"1.0.0"}),(0,t.jsx)(n.td,{children:"2.4+"}),(0,t.jsx)(n.td,{children:"2.0+"}),(0,t.jsx)(n.td,{children:"8"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"1.1.0"}),(0,t.jsx)(n.td,{children:"2.4+"}),(0,t.jsx)(n.td,{children:"2.0+"}),(0,t.jsx)(n.td,{children:"8"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"24.0.0"}),(0,t.jsx)(n.td,{children:"2.4+"}),(0,t.jsx)(n.td,{children:"2.0+"}),(0,t.jsx)(n.td,{children:"8"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"25.0.0"}),(0,t.jsx)(n.td,{children:"2.4+"}),(0,t.jsx)(n.td,{children:"2.0+"}),(0,t.jsx)(n.td,{children:"8"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"\u4F7F\u7528\u65B9\u5F0F",children:"\u4F7F\u7528\u65B9\u5F0F"}),"\n",(0,t.jsx)(n.h3,{id:"\u4E0B\u8F7D",children:"\u4E0B\u8F7D"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://doris.apache.org/zh-CN/download",children:"doris-kafka-connector"})}),"\n",(0,t.jsx)(n.p,{children:"maven \u4F9D\u8D56"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:"<dependency>\n  <groupId>org.apache.doris</groupId>\n  <artifactId>doris-kafka-connector</artifactId>\n  <version>25.0.0</version>\n</dependency>\n"})}),"\n",(0,t.jsx)(n.h3,{id:"standalone-\u6A21\u5F0F\u542F\u52A8",children:"Standalone \u6A21\u5F0F\u542F\u52A8"}),"\n",(0,t.jsx)(n.p,{children:"\u5728 $KAFKA_HOME \u4E0B\u521B\u5EFA plugins \u76EE\u5F55\uFF0C\u5C06\u4E0B\u8F7D\u597D\u7684 doris-kafka-connector jar \u5305\u653E\u5165\u5176\u4E2D"}),"\n",(0,t.jsx)(n.p,{children:"\u914D\u7F6E config/connect-standalone.properties"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-properties",children:"# \u4FEE\u6539 broker \u5730\u5740\nbootstrap.servers=127.0.0.1:9092\n\n# \u4FEE\u6539\u4E3A\u521B\u5EFA\u7684 plugins \u76EE\u5F55\n# \u6CE8\u610F\uFF1A\u6B64\u5904\u8BF7\u586B\u5199 Kafka \u7684\u76F4\u63A5\u8DEF\u5F84\u3002\u4F8B\u5982\uFF1Aplugin.path=/opt/kafka/plugins\nplugin.path=$KAFKA_HOME/plugins\n\n# \u5EFA\u8BAE\u5C06 Kafka \u7684 max.poll.interval.ms \u65F6\u95F4\u8C03\u5927\u5230 30 \u5206\u949F\u4EE5\u4E0A\uFF0C\u9ED8\u8BA4 5 \u5206\u949F\n# \u907F\u514D Stream Load \u5BFC\u5165\u6570\u636E\u6D88\u8D39\u8D85\u65F6\uFF0C\u6D88\u8D39\u8005\u88AB\u8E22\u51FA\u6D88\u8D39\u7FA4\u7EC4\nmax.poll.interval.ms=1800000\nconsumer.max.poll.interval.ms=1800000\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u914D\u7F6E doris-connector-sink.properties"}),"\n",(0,t.jsx)(n.p,{children:"\u5728 config \u76EE\u5F55\u4E0B\u521B\u5EFA doris-connector-sink.properties\uFF0C\u5E76\u914D\u7F6E\u5982\u4E0B\u5185\u5BB9\uFF1A"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-properties",children:"name=test-doris-sink\nconnector.class=org.apache.doris.kafka.connector.DorisSinkConnector\ntopics=topic_test\ndoris.topic2table.map=topic_test:test_kafka_tbl\ndoris.urls=10.10.10.1\ndoris.http.port=8030\ndoris.query.port=9030\ndoris.user=root\ndoris.password=\ndoris.database=test_db\nbuffer.count.records=10000\nbuffer.flush.time=120\nbuffer.size.bytes=5000000\nenable.combine.flush=true\nkey.converter=org.apache.kafka.connect.storage.StringConverter\nvalue.converter=org.apache.kafka.connect.json.JsonConverter\nvalue.converter.schemas.enable=false\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u542F\u52A8 Standalone"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"$KAFKA_HOME/bin/connect-standalone.sh -daemon $KAFKA_HOME/config/connect-standalone.properties $KAFKA_HOME/config/doris-connector-sink.properties\n"})}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsx)(n.p,{children:"\u6CE8\u610F\uFF1A\u4E00\u822C\u4E0D\u5EFA\u8BAE\u5728\u751F\u4EA7\u73AF\u5883\u4E2D\u4F7F\u7528 standalone \u6A21\u5F0F"})}),"\n",(0,t.jsx)(n.h3,{id:"distributed-\u6A21\u5F0F\u542F\u52A8",children:"Distributed \u6A21\u5F0F\u542F\u52A8"}),"\n",(0,t.jsx)(n.p,{children:"\u5728 $KAFKA_HOME \u4E0B\u521B\u5EFA plugins \u76EE\u5F55\uFF0C\u5C06\u4E0B\u8F7D\u597D\u7684 doris-kafka-connector jar \u5305\u653E\u5165\u5176\u4E2D"}),"\n",(0,t.jsx)(n.p,{children:"\u914D\u7F6E config/connect-distributed.properties"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-properties",children:"# \u4FEE\u6539 broker \u5730\u5740\nbootstrap.servers=127.0.0.1:9092\n\n# \u4FEE\u6539 group.id\uFF0C\u540C\u4E00\u96C6\u7FA4\u7684\u9700\u8981\u4E00\u81F4\ngroup.id=connect-cluster\n\n# \u4FEE\u6539\u4E3A\u521B\u5EFA\u7684 plugins \u76EE\u5F55\n# \u6CE8\u610F\uFF1A\u6B64\u5904\u8BF7\u586B\u5199 Kafka \u7684\u76F4\u63A5\u8DEF\u5F84\u3002\u4F8B\u5982\uFF1Aplugin.path=/opt/kafka/plugins\nplugin.path=$KAFKA_HOME/plugins\n\n# \u5EFA\u8BAE\u5C06 Kafka \u7684 max.poll.interval.ms \u65F6\u95F4\u8C03\u5927\u5230 30 \u5206\u949F\u4EE5\u4E0A\uFF0C\u9ED8\u8BA4 5 \u5206\u949F\n# \u907F\u514D Stream Load \u5BFC\u5165\u6570\u636E\u6D88\u8D39\u8D85\u65F6\uFF0C\u6D88\u8D39\u8005\u88AB\u8E22\u51FA\u6D88\u8D39\u7FA4\u7EC4\nmax.poll.interval.ms=1800000\nconsumer.max.poll.interval.ms=1800000\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u542F\u52A8 Distributed"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"$KAFKA_HOME/bin/connect-distributed.sh -daemon $KAFKA_HOME/config/connect-distributed.properties\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u589E\u52A0 Connector"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:'curl -i http://127.0.0.1:8083/connectors -H "Content-Type: application/json" -X POST -d \'{\n  "name":"test-doris-sink-cluster",\n  "config":{\n    "connector.class":"org.apache.doris.kafka.connector.DorisSinkConnector",\n    "topics":"topic_test",\n    "doris.topic2table.map": "topic_test:test_kafka_tbl",\n    "doris.urls":"10.10.10.1",\n    "doris.user":"root",\n    "doris.password":"",\n    "doris.http.port":"8030",\n    "doris.query.port":"9030",\n    "doris.database":"test_db",\n    "enable.combine.flush": "true",\n    "buffer.count.records":"10000",\n    "buffer.flush.time":"120",\n    "buffer.size.bytes":"5000000",\n    "key.converter":"org.apache.kafka.connect.storage.StringConverter",\n    "value.converter":"org.apache.kafka.connect.json.JsonConverter",\n    "value.converter.schemas.enable": "false"\n  }\n}\'\n'})}),"\n",(0,t.jsx)(n.p,{children:"\u64CD\u4F5C Connector"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"# \u67E5\u770B connector \u72B6\u6001\ncurl -i http://127.0.0.1:8083/connectors/test-doris-sink-cluster/status -X GET\n# \u5220\u9664\u5F53\u524D connector\ncurl -i http://127.0.0.1:8083/connectors/test-doris-sink-cluster -X DELETE\n# \u6682\u505C\u5F53\u524D connector\ncurl -i http://127.0.0.1:8083/connectors/test-doris-sink-cluster/pause -X PUT\n# \u91CD\u542F\u5F53\u524D connector\ncurl -i http://127.0.0.1:8083/connectors/test-doris-sink-cluster/resume -X PUT\n# \u91CD\u542F connector \u5185\u7684 tasks\ncurl -i http://127.0.0.1:8083/connectors/test-doris-sink-cluster/tasks/0/restart -X POST\n"})}),"\n",(0,t.jsxs)(n.p,{children:["\u53C2\u8003\uFF1A",(0,t.jsx)(n.a,{href:"https://docs.confluent.io/platform/current/connect/references/restapi.html#kconnect-rest-interface",children:"Connect REST Interface"})]}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsxs)(n.p,{children:["\u6CE8\u610F kafka-connect \u9996\u6B21\u542F\u52A8\u65F6\uFF0C\u4F1A\u5F80 kafka \u96C6\u7FA4\u4E2D\u521B\u5EFA ",(0,t.jsx)(n.code,{children:"config.storage.topic"})," ",(0,t.jsx)(n.code,{children:"offset.storage.topic"})," ",(0,t.jsx)(n.code,{children:"status.storage.topic"})," \u4E09\u4E2A topic \u7528\u4E8E\u8BB0\u5F55 kafka-connect \u7684\u5171\u4EAB\u8FDE\u63A5\u5668\u914D\u7F6E\u3001\u504F\u79FB\u6570\u636E\u548C\u72B6\u6001\u66F4\u65B0\u3002",(0,t.jsx)(n.a,{href:"https://docs.confluent.io/platform/current/connect/userguide.html",children:"How to Use Kafka Connect - Get Started"})]})}),"\n",(0,t.jsx)(n.h3,{id:"\u8BBF\u95EE-ssl-\u8BA4\u8BC1\u7684-kafka-\u96C6\u7FA4",children:"\u8BBF\u95EE SSL \u8BA4\u8BC1\u7684 Kafka \u96C6\u7FA4"}),"\n",(0,t.jsxs)(n.p,{children:["\u901A\u8FC7 kafka-connect \u8BBF\u95EE SSL \u8BA4\u8BC1\u7684 Kafka \u96C6\u7FA4\u9700\u8981\u7528\u6237\u63D0\u4F9B\u7528\u4E8E\u8BA4\u8BC1 Kafka Broker \u516C\u94A5\u7684\u8BC1\u4E66\u6587\u4EF6\uFF08client.truststore.jks\uFF09\u3002\u60A8\u53EF\u4EE5\u5728 ",(0,t.jsx)(n.code,{children:"connect-distributed.properties"})," \u6587\u4EF6\u4E2D\u589E\u52A0\u4EE5\u4E0B\u914D\u7F6E\uFF1A"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-properties",children:"# Connect worker\nsecurity.protocol=SSL\nssl.truststore.location=/var/ssl/private/client.truststore.jks\nssl.truststore.password=test1234\n\n# Embedded consumer for sink connectors\nconsumer.security.protocol=SSL\nconsumer.ssl.truststore.location=/var/ssl/private/client.truststore.jks\nconsumer.ssl.truststore.password=test1234\n"})}),"\n",(0,t.jsxs)(n.p,{children:["\u5173\u4E8E\u901A\u8FC7 Kafka-Connect \u8FDE\u63A5 SSL \u8BA4\u8BC1\u7684 Kafka \u96C6\u7FA4\u914D\u7F6E\u8BF4\u660E\u53EF\u4EE5\u53C2\u8003\uFF1A",(0,t.jsx)(n.a,{href:"https://docs.confluent.io/5.1.2/tutorials/security_tutorial.html#configure-kconnect-long",children:"Configure Kafka Connect"})]}),"\n",(0,t.jsx)(n.h3,{id:"\u6B7B\u4FE1\u961F\u5217",children:"\u6B7B\u4FE1\u961F\u5217"}),"\n",(0,t.jsx)(n.p,{children:"\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u8F6C\u6362\u8FC7\u7A0B\u4E2D\u6216\u8F6C\u6362\u8FC7\u7A0B\u4E2D\u9047\u5230\u7684\u4EFB\u4F55\u9519\u8BEF\u90FD\u4F1A\u5BFC\u81F4\u8FDE\u63A5\u5668\u5931\u8D25\u3002\u6BCF\u4E2A\u8FDE\u63A5\u5668\u914D\u7F6E\u8FD8\u53EF\u4EE5\u901A\u8FC7\u8DF3\u8FC7\u5B83\u4EEC\u6765\u5BB9\u5FCD\u6B64\u7C7B\u9519\u8BEF\uFF0C\u53EF\u9009\u62E9\u5C06\u6BCF\u4E2A\u9519\u8BEF\u548C\u5931\u8D25\u64CD\u4F5C\u7684\u8BE6\u7EC6\u4FE1\u606F\u4EE5\u53CA\u6709\u95EE\u9898\u7684\u8BB0\u5F55\uFF08\u5177\u6709\u4E0D\u540C\u7EA7\u522B\u7684\u8BE6\u7EC6\u4FE1\u606F\uFF09\u5199\u5165\u6B7B\u4FE1\u961F\u5217\u4EE5\u4FBF\u8BB0\u5F55\u3002"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-properties",children:"errors.tolerance=all\nerrors.deadletterqueue.topic.name=test_error_topic\nerrors.deadletterqueue.context.headers.enable=true\nerrors.deadletterqueue.topic.replication.factor=1\n"})}),"\n",(0,t.jsx)(n.h2,{id:"\u914D\u7F6E\u9879",children:"\u914D\u7F6E\u9879"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Key"}),(0,t.jsx)(n.th,{children:"Enum"}),(0,t.jsx)(n.th,{children:"Default Value"}),(0,t.jsx)(n.th,{children:(0,t.jsx)(n.strong,{children:"Required"})}),(0,t.jsx)(n.th,{children:(0,t.jsx)(n.strong,{children:"Description"})})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"name"}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"Y"}),(0,t.jsx)(n.td,{children:"Connect \u5E94\u7528\u540D\u79F0\uFF0C\u5FC5\u987B\u662F\u5728 Kafka Connect \u73AF\u5883\u4E2D\u552F\u4E00"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"connector.class"}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"Y"}),(0,t.jsx)(n.td,{children:"org.apache.doris.kafka.connector.DorisSinkConnector"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"topics"}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"Y"}),(0,t.jsx)(n.td,{children:"\u8BA2\u9605\u7684 topic \u5217\u8868\uFF0C\u9017\u53F7\u5206\u9694\uFF1Atopic1,topic2"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"doris.urls"}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"Y"}),(0,t.jsx)(n.td,{children:"Doris FE \u8FDE\u63A5\u5730\u5740\u3002\u5982\u679C\u6709\u591A\u4E2A\uFF0C\u4E2D\u95F4\u7528\u9017\u53F7\u5206\u5272\uFF1A10.20.30.1,10.20.30.2,10.20.30.3"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"doris.http.port"}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"Y"}),(0,t.jsx)(n.td,{children:"Doris HTTP \u534F\u8BAE\u7AEF\u53E3"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"doris.query.port"}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"Y"}),(0,t.jsx)(n.td,{children:"Doris MySQL \u534F\u8BAE\u7AEF\u53E3"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"doris.user"}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"Y"}),(0,t.jsx)(n.td,{children:"Doris \u7528\u6237\u540D"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"doris.password"}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"Y"}),(0,t.jsx)(n.td,{children:"Doris \u5BC6\u7801"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"doris.database"}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"Y"}),(0,t.jsx)(n.td,{children:"\u8981\u5199\u5165\u7684\u6570\u636E\u5E93\u3002\u591A\u4E2A\u5E93\u65F6\u53EF\u4EE5\u4E3A\u7A7A\uFF0C\u540C\u65F6\u5728 topic2table.map \u9700\u8981\u914D\u7F6E\u5177\u4F53\u7684\u5E93\u540D\u79F0"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"doris.topic2table.map"}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"Y"}),(0,t.jsxs)(n.td,{children:["topic \u548C table \u8868\u7684\u5BF9\u5E94\u5173\u7CFB\uFF0C\u4F8B\uFF1Atopic1:tb1,topic2:tb2",(0,t.jsx)(n.br,{}),"\u5982\u679C\u7559\u7A7A\uFF0C\u9ED8\u8BA4\u5C06 topic \u540D\u79F0\u4F5C\u4E3A\u5199\u5165\u7684 table\u3002 ",(0,t.jsx)(n.br,{}),"  \u591A\u4E2A\u5E93\u7684\u683C\u5F0F\u4E3A topic1:db1.tbl1,topic2:db2.tbl2"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"buffer.count.records"}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"50000"}),(0,t.jsx)(n.td,{children:"N"}),(0,t.jsx)(n.td,{children:"\u5355\u6B21 Stream Load \u5199\u5165\u7684\u6761\u6570\u3002"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"buffer.flush.time"}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"120"}),(0,t.jsx)(n.td,{children:"N"}),(0,t.jsx)(n.td,{children:"buffer \u5237\u65B0\u95F4\u9694\uFF0C\u5355\u4F4D\u79D2\uFF0C\u9ED8\u8BA4 120 \u79D2"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"buffer.size.bytes"}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"104857600(100MB)"}),(0,t.jsx)(n.td,{children:"N"}),(0,t.jsx)(n.td,{children:"\u5355\u6B21 Stream Load \u5199\u5165\u7684\u6570\u636E\u5927\u5C0F\u3002"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"enable.combine.flush"}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"true"}),",",(0,t.jsx)(n.br,{})," ",(0,t.jsx)(n.code,{children:"false"})]}),(0,t.jsx)(n.td,{children:"false"}),(0,t.jsx)(n.td,{children:"N"}),(0,t.jsx)(n.td,{children:"\u662F\u5426\u5C06\u6240\u6709\u5206\u533A\u7684\u6570\u636E\u5408\u5E76\u5728\u4E00\u8D77\u5199\u5165\u3002\u9ED8\u8BA4\u503C\u4E3A false\u3002\u5F00\u542F\u540E\u53EA\u80FD\u4FDD\u8BC1 at_least_once \u8BED\u4E49\u3002"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"jmx"}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"true"}),(0,t.jsx)(n.td,{children:"N"}),(0,t.jsxs)(n.td,{children:["\u901A\u8FC7 JMX \u83B7\u53D6 Connector \u5185\u90E8\u76D1\u63A7\u6307\u6807\uFF0C\u8BF7\u53C2\u8003\uFF1A",(0,t.jsx)(n.a,{href:"https://github.com/apache/doris-kafka-connector/blob/master/docs/zh-CN/Doris-Connector-JMX.md",children:"Doris-Connector-JMX"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"label.prefix"}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"${name}"}),(0,t.jsx)(n.td,{children:"N"}),(0,t.jsx)(n.td,{children:"Stream load \u5BFC\u5165\u6570\u636E\u65F6\u7684 label \u524D\u7F00\u3002\u9ED8\u8BA4\u4E3A Connector \u5E94\u7528\u540D\u79F0\u3002"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"auto.redirect"}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"true"}),(0,t.jsx)(n.td,{children:"N"}),(0,t.jsx)(n.td,{children:"\u662F\u5426\u91CD\u5B9A\u5411 StreamLoad \u8BF7\u6C42\u3002\u5F00\u542F\u540E StreamLoad \u5C06\u901A\u8FC7 FE \u91CD\u5B9A\u5411\u5230\u9700\u8981\u5199\u5165\u6570\u636E\u7684 BE\uFF0C\u5E76\u4E14\u4E0D\u518D\u663E\u793A\u83B7\u53D6 BE \u4FE1\u606F"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"sink.properties.*"}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"'sink.properties.format':'json'"}),", ",(0,t.jsx)(n.br,{}),(0,t.jsx)(n.code,{children:"'sink.properties.read_json_by_line':'true'"})]}),(0,t.jsx)(n.td,{children:"N"}),(0,t.jsxs)(n.td,{children:["Stream Load \u7684\u5BFC\u5165\u53C2\u6570\u3002",(0,t.jsx)(n.br,{}),"\u4F8B\u5982\uFF1A\u5B9A\u4E49\u5217\u5206\u9694\u7B26",(0,t.jsx)(n.code,{children:"'sink.properties.column_separator':','"}),"  ",(0,t.jsx)(n.br,{}),"\u8BE6\u7EC6\u53C2\u6570\u53C2\u8003",(0,t.jsx)(n.a,{href:"/zh-CN/docs/4.x/data-operate/import/import-way/stream-load-manual",children:"\u8FD9\u91CC"}),"\u3002  ",(0,t.jsx)(n.br,{}),(0,t.jsx)(n.br,{})," ",(0,t.jsx)(n.strong,{children:"\u5F00\u542F Group Commit"}),"\uFF0C\u4F8B\u5982\u5F00\u542F sync_mode \u6A21\u5F0F\u7684 group commit\uFF1A",(0,t.jsx)(n.code,{children:'"sink.properties.group_commit":"sync_mode"'}),"\u3002Group Commit \u53EF\u4EE5\u914D\u7F6E ",(0,t.jsx)(n.code,{children:"off_mode"}),"\u3001",(0,t.jsx)(n.code,{children:"sync_mode"}),"\u3001",(0,t.jsx)(n.code,{children:"async_mode"})," \u4E09\u79CD\u6A21\u5F0F\uFF0C\u5177\u4F53\u4F7F\u7528\u53C2\u8003\uFF1A",(0,t.jsx)(n.a,{href:"https://doris.apache.org/docs/data-operate/import/group-commit-manual/",children:"Group-Commit"})," ",(0,t.jsx)(n.br,{}),(0,t.jsx)(n.br,{}),"  ",(0,t.jsx)(n.strong,{children:"\u5F00\u542F\u90E8\u5206\u5217\u66F4\u65B0"}),"\uFF0C\u4F8B\u5982\u5F00\u542F\u66F4\u65B0\u6307\u5B9A col2 \u7684\u90E8\u5206\u5217\uFF1A",(0,t.jsx)(n.code,{children:'"sink.properties.partial_columns":"true"'}),", ",(0,t.jsx)(n.code,{children:'"sink.properties.columns": "col2",'})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"delivery.guarantee"}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"at_least_once"}),",",(0,t.jsx)(n.br,{})," ",(0,t.jsx)(n.code,{children:"exactly_once"})]}),(0,t.jsx)(n.td,{children:"at_least_once"}),(0,t.jsx)(n.td,{children:"N"}),(0,t.jsxs)(n.td,{children:["\u6D88\u8D39 Kafka \u6570\u636E\u5BFC\u5165\u81F3 doris \u65F6\uFF0C\u6570\u636E\u4E00\u81F4\u6027\u7684\u4FDD\u969C\u65B9\u5F0F\u3002\u652F\u6301 ",(0,t.jsx)(n.code,{children:"at_least_once"})," ",(0,t.jsx)(n.code,{children:"exactly_once"}),"\uFF0C\u9ED8\u8BA4\u4E3A ",(0,t.jsx)(n.code,{children:"at_least_once"})," \u3002Doris \u9700\u8981\u5347\u7EA7\u81F3 2.1.0 \u4EE5\u4E0A\uFF0C\u624D\u80FD\u4FDD\u969C\u6570\u636E\u7684 ",(0,t.jsx)(n.code,{children:"exactly_once"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"converter.mode"}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"normal"}),",",(0,t.jsx)(n.br,{})," ",(0,t.jsx)(n.code,{children:"debezium_ingestion"})]}),(0,t.jsx)(n.td,{children:"normal"}),(0,t.jsx)(n.td,{children:"N"}),(0,t.jsxs)(n.td,{children:["\u4F7F\u7528 Connector \u6D88\u8D39 Kafka \u6570\u636E\u65F6\uFF0C\u4E0A\u6E38\u6570\u636E\u7684\u7C7B\u578B\u8F6C\u6362\u6A21\u5F0F\u3002 ",(0,t.jsx)(n.br,{})," ",(0,t.jsx)(n.code,{children:"normal"}),"\u8868\u793A\u6B63\u5E38\u6D88\u8D39 Kafka \u4E2D\u7684\u6570\u636E\uFF0C\u4E0D\u7ECF\u8FC7\u4EFB\u4F55\u7C7B\u578B\u8F6C\u6362\u3002 ",(0,t.jsx)(n.br,{})," ",(0,t.jsx)(n.code,{children:"debezium_ingestion"}),"\u8868\u793A\u5F53 Kafka \u4E0A\u6E38\u7684\u6570\u636E\u901A\u8FC7 Debezium \u7B49 CDC\uFF08Changelog Data Capture\uFF0C\u53D8\u66F4\u6570\u636E\u6355\u83B7\uFF09\u5DE5\u5177\u91C7\u96C6\u65F6\uFF0C\u4E0A\u6E38\u6570\u636E\u9700\u8981\u7ECF\u8FC7\u7279\u6B8A\u7684\u7C7B\u578B\u8F6C\u6362\u624D\u80FD\u652F\u6301\u3002"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"debezium.schema.evolution"}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"none"}),",",(0,t.jsx)(n.br,{})," ",(0,t.jsx)(n.code,{children:"basic"})]}),(0,t.jsx)(n.td,{children:"none"}),(0,t.jsx)(n.td,{children:"N"}),(0,t.jsxs)(n.td,{children:["\u901A\u8FC7 Debezium \u91C7\u96C6\u4E0A\u6E38\u6570\u636E\u5E93\u7CFB\u7EDF\uFF08\u5982 MySQL\uFF09\uFF0C\u53D1\u751F\u7ED3\u6784\u53D8\u66F4\u65F6\uFF0C\u53EF\u4EE5\u5C06\u589E\u52A0\u7684\u5B57\u6BB5\u540C\u6B65\u5230 Doris \u4E2D\u3002",(0,t.jsx)(n.br,{}),(0,t.jsx)(n.code,{children:"none"}),"\u8868\u793A\u4E0A\u6E38\u6570\u636E\u5E93\u7CFB\u7EDF\u53D1\u751F\u7ED3\u6784\u53D8\u66F4\u65F6\uFF0C\u4E0D\u540C\u6B65\u53D8\u66F4\u540E\u7684\u7ED3\u6784\u5230 Doris \u4E2D\u3002 ",(0,t.jsx)(n.br,{}),"  ",(0,t.jsx)(n.code,{children:"basic"}),"\u8868\u793A\u540C\u6B65\u4E0A\u6E38\u6570\u636E\u5E93\u7684\u6570\u636E\u53D8\u66F4\u64CD\u4F5C\u3002\u7531\u4E8E\u5217\u7ED3\u6784\u53D8\u66F4\u662F\u4E00\u4E2A\u5371\u9669\u64CD\u4F5C\uFF08\u53EF\u80FD\u4F1A\u5BFC\u81F4\u8BEF\u5220 Doris \u8868\u7ED3\u6784\u7684\u5217\uFF09\uFF0C\u76EE\u524D\u4EC5\u652F\u6301\u540C\u6B65\u4E0A\u6E38\u589E\u52A0\u5217\u7684\u64CD\u4F5C\u3002\u5F53\u5217\u88AB\u91CD\u547D\u540D\u540E\uFF0C\u5219\u65E7\u5217\u4FDD\u6301\u539F\u6837\uFF0CConnector \u4F1A\u5728\u76EE\u6807\u8868\u4E2D\u65B0\u589E\u4E00\u5217\uFF0C\u5C06\u91CD\u547D\u540D\u540E\u7684\u65B0\u589E\u6570\u636E Sink \u5230\u65B0\u5217\u4E2D\u3002"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"enable.delete"}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"false"}),(0,t.jsx)(n.td,{children:"N"}),(0,t.jsx)(n.td,{children:"Debezium \u540C\u6B65\u4E0B\uFF0C\u662F\u5426\u540C\u6B65\u5220\u9664\u8BB0\u5F55\uFF0C\u9ED8\u8BA4 false\uFF0C\u975E Debezium \u540C\u6B65\u4E0B\uFF0C\u9700\u8981\u5728\u6D88\u606F\u4E2D\u62FC\u63A5\u5220\u9664\u6807\u8BB0"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"database.time_zone"}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"UTC"}),(0,t.jsx)(n.td,{children:"N"}),(0,t.jsxs)(n.td,{children:["\u5F53 ",(0,t.jsx)(n.code,{children:"converter.mode"})," \u4E3A\u975E ",(0,t.jsx)(n.code,{children:"normal"})," \u6A21\u5F0F\u65F6\uFF0C\u5BF9\u4E8E\u65E5\u671F\u6570\u636E\u7C7B\u578B\uFF08\u5982 datetime, date, timestamp \u7B49\u7B49\uFF09\u63D0\u4F9B\u6307\u5B9A\u65F6\u533A\u8F6C\u6362\u7684\u65B9\u5F0F\uFF0C\u9ED8\u8BA4\u4E3A UTC \u65F6\u533A\u3002"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"avro.topic2schema.filepath"}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"N"}),(0,t.jsxs)(n.td,{children:["\u901A\u8FC7\u8BFB\u53D6\u672C\u5730\u63D0\u4F9B\u7684 Avro Schema \u6587\u4EF6\uFF0C\u6765\u89E3\u6790 Topic \u4E2D\u7684 Avro \u6587\u4EF6\u5185\u5BB9\uFF0C\u5B9E\u73B0\u4E0E Confluent \u63D0\u4F9B Schema \u6CE8\u518C\u4E2D\u5FC3\u89E3\u8026\u3002",(0,t.jsx)(n.br,{})," \u6B64\u914D\u7F6E\u9700\u8981\u4E0E ",(0,t.jsx)(n.code,{children:"key.converter"})," \u6216 ",(0,t.jsx)(n.code,{children:"value.converter"})," \u524D\u7F00\u4E00\u8D77\u4F7F\u7528\uFF0C\u4F8B\u5982\u914D\u7F6E avro-user\u3001avro-product Topic \u7684\u672C\u5730 Avro Schema \u6587\u4EF6\u5982\u4E0B\uFF1A ",(0,t.jsx)(n.code,{children:'"value.converter.avro.topic2schema.filepath":"avro-user:file:///opt/avro_user.avsc, avro-product:file:///opt/avro_product.avsc"'})," ",(0,t.jsx)(n.br,{})," \u5177\u4F53\u4F7F\u7528\u53EF\u4EE5\u53C2\u8003\uFF1A",(0,t.jsx)(n.a,{href:"https://github.com/apache/doris-kafka-connector/pull/32",children:"#32"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"record.tablename.field"}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"N"}),(0,t.jsxs)(n.td,{children:["\u5F00\u542F\u8BE5\u53C2\u6570\u540E\uFF0C\u53EF\u5B9E\u73B0\u4E00\u4E2A Topic \u7684\u6570\u636E\u6D41\u5411\u591A\u4E2A Doris \u8868\u3002\u914D\u7F6E\u8BE6\u60C5\u53C2\u8003\uFF1A",(0,t.jsx)(n.a,{href:"https://github.com/apache/doris-kafka-connector/pull/58",children:"#58"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"max.retries"}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"10"}),(0,t.jsx)(n.td,{children:"N"}),(0,t.jsx)(n.td,{children:"\u4EFB\u52A1\u5931\u8D25\u524D\u91CD\u8BD5\u9519\u8BEF\u7684\u6700\u5927\u6B21\u6570\u3002"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"retry.interval.ms"}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"6000"}),(0,t.jsx)(n.td,{children:"N"}),(0,t.jsx)(n.td,{children:"\u53D1\u751F\u9519\u8BEF\u540E\uFF0C\u5C1D\u8BD5\u91CD\u8BD5\u4E4B\u524D\u7684\u7B49\u5F85\u65F6\u95F4\uFF0C\u5355\u4F4D\u4E3A\u6BEB\u79D2\uFF0C\u9ED8\u8BA4 6000 \u6BEB\u79D2\u3002"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"behavior.on.null.values"}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"ignore"}),",",(0,t.jsx)(n.br,{})," ",(0,t.jsx)(n.code,{children:"fail"})]}),(0,t.jsx)(n.td,{children:"ignore"}),(0,t.jsx)(n.td,{children:"N"}),(0,t.jsx)(n.td,{children:"\u5982\u4F55\u5904\u7406 null \u503C\u7684\u8BB0\u5F55\uFF0C\u9ED8\u8BA4\u8DF3\u8FC7\u4E0D\u5904\u7406\u3002"})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:["\u5176\u4ED6 Kafka Connect Sink \u901A\u7528\u914D\u7F6E\u9879\u53EF\u53C2\u8003\uFF1A",(0,t.jsx)(n.a,{href:"https://kafka.apache.org/documentation/#connect_configuring",children:"connect_configuring"})]}),"\n",(0,t.jsx)(n.h2,{id:"\u7C7B\u578B\u6620\u5C04",children:"\u7C7B\u578B\u6620\u5C04"}),"\n",(0,t.jsxs)(n.p,{children:["Doris-kafka-connector \u4F7F\u7528\u903B\u8F91\u6216\u539F\u59CB\u7C7B\u578B\u6620\u5C04\u6765\u89E3\u6790\u5217\u7684\u6570\u636E\u7C7B\u578B\u3002\n",(0,t.jsx)(n.br,{}),"\u539F\u59CB\u7C7B\u578B\u662F\u6307\u4F7F\u7528 Kafka connect \u7684 ",(0,t.jsx)(n.code,{children:"Schema"})," \u8868\u793A\u7684\u7B80\u5355\u6570\u636E\u7C7B\u578B\u3002\u903B\u8F91\u6570\u636E\u7C7B\u578B\u901A\u5E38\u662F\u91C7\u7528 ",(0,t.jsx)(n.code,{children:"Struct"})," \u7ED3\u6784\u8868\u793A\u590D\u6742\u7C7B\u578B\uFF0C\u6216\u8005\u65E5\u671F\u65F6\u95F4\u7C7B\u578B\u3002"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Kafka \u539F\u59CB\u7C7B\u578B"}),(0,t.jsx)(n.th,{children:"Doris \u7C7B\u578B"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"INT8"}),(0,t.jsx)(n.td,{children:"TINYINT"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"INT16"}),(0,t.jsx)(n.td,{children:"SMALLINT"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"INT32"}),(0,t.jsx)(n.td,{children:"INT"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"INT64"}),(0,t.jsx)(n.td,{children:"BIGINT"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"FLOAT32"}),(0,t.jsx)(n.td,{children:"FLOAT"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"FLOAT64"}),(0,t.jsx)(n.td,{children:"DOUBLE"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"BOOLEAN"}),(0,t.jsx)(n.td,{children:"BOOLEAN"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"STRING"}),(0,t.jsx)(n.td,{children:"STRING"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"BYTES"}),(0,t.jsx)(n.td,{children:"STRING"})]})]})]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Kafka \u903B\u8F91\u7C7B\u578B"}),(0,t.jsx)(n.th,{children:"Doris \u7C7B\u578B"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"org.apache.kafka.connect.data.Decimal"}),(0,t.jsx)(n.td,{children:"DECIMAL"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"org.apache.kafka.connect.data.Date"}),(0,t.jsx)(n.td,{children:"DATE"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"org.apache.kafka.connect.data.Time"}),(0,t.jsx)(n.td,{children:"STRING"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"org.apache.kafka.connect.data.Timestamp"}),(0,t.jsx)(n.td,{children:"DATETIME"})]})]})]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Debezium \u903B\u8F91\u7C7B\u578B"}),(0,t.jsx)(n.th,{children:"Doris \u7C7B\u578B"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"io.debezium.time.Date"}),(0,t.jsx)(n.td,{children:"DATE"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"io.debezium.time.Time"}),(0,t.jsx)(n.td,{children:"String"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"io.debezium.time.MicroTime"}),(0,t.jsx)(n.td,{children:"DATETIME"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"io.debezium.time.NanoTime"}),(0,t.jsx)(n.td,{children:"DATETIME"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"io.debezium.time.ZonedTime"}),(0,t.jsx)(n.td,{children:"DATETIME"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"io.debezium.time.Timestamp"}),(0,t.jsx)(n.td,{children:"DATETIME"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"io.debezium.time.MicroTimestamp"}),(0,t.jsx)(n.td,{children:"DATETIME"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"io.debezium.time.NanoTimestamp"}),(0,t.jsx)(n.td,{children:"DATETIME"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"io.debezium.time.ZonedTimestamp"}),(0,t.jsx)(n.td,{children:"DATETIME"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"io.debezium.data.VariableScaleDecimal"}),(0,t.jsx)(n.td,{children:"DOUBLE"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"\u6700\u4F73\u5B9E\u8DF5",children:"\u6700\u4F73\u5B9E\u8DF5"}),"\n",(0,t.jsx)(n.h3,{id:"\u540C\u6B65\u666E\u901A-json-\u6570\u636E",children:"\u540C\u6B65\u666E\u901A JSON \u6570\u636E"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["\u5BFC\u5165\u6570\u636E\u6837\u672C",(0,t.jsx)(n.br,{}),"\n\u5728 Kafka \u4E2D\uFF0C\u6709\u4EE5\u4E0B\u6837\u672C\u6570\u636E"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic test-data-topic --from-beginning\n{"user_id":1,"name":"Emily","age":25}\n{"user_id":2,"name":"Benjamin","age":35}\n{"user_id":3,"name":"Olivia","age":28}\n{"user_id":4,"name":"Alexander","age":60}\n{"user_id":5,"name":"Ava","age":17}\n{"user_id":6,"name":"William","age":69}\n{"user_id":7,"name":"Sophia","age":32}\n{"user_id":8,"name":"James","age":64}\n{"user_id":9,"name":"Emma","age":37}\n{"user_id":10,"name":"Liam","age":64}\n'})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["\u521B\u5EFA\u9700\u8981\u5BFC\u5165\u7684\u8868",(0,t.jsx)(n.br,{}),"\n\u5728 Doris \u4E2D\uFF0C\u521B\u5EFA\u88AB\u5BFC\u5165\u7684\u8868\uFF0C\u5177\u4F53\u8BED\u6CD5\u5982\u4E0B"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:'CREATE TABLE test_db.test_kafka_connector_tbl(\nuser_id            BIGINT       NOT NULL COMMENT "user id",\nname               VARCHAR(20)           COMMENT "name",\nage                INT                   COMMENT "age"\n)\nDUPLICATE KEY(user_id)\nDISTRIBUTED BY HASH(user_id) BUCKETS 12;\n'})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["\u521B\u5EFA\u5BFC\u5165\u4EFB\u52A1",(0,t.jsx)(n.br,{}),"\n\u5728\u90E8\u7F72 Kafka-connect \u7684\u673A\u5668\u4E0A\uFF0C\u901A\u8FC7 curl \u547D\u4EE4\u63D0\u4EA4\u5982\u4E0B\u5BFC\u5165\u4EFB\u52A1"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:'curl -i http://127.0.0.1:8083/connectors -H "Content-Type: application/json" -X POST -d \'{\n"name":"test-doris-sink-cluster",\n"config":{\n"connector.class":"org.apache.doris.kafka.connector.DorisSinkConnector",\n"tasks.max":"10",\n"topics":"test-data-topic",\n"doris.topic2table.map": "test-data-topic:test_kafka_connector_tbl",\n"doris.urls":"10.10.10.1",\n"doris.user":"root",\n"doris.password":"",\n"doris.http.port":"8030",\n"doris.query.port":"9030",\n"doris.database":"test_db",\n"buffer.count.records":"10000",\n"buffer.flush.time":"120",\n"buffer.size.bytes":"5000000",\n"enable.combine.flush": "true",\n"key.converter":"org.apache.kafka.connect.storage.StringConverter",\n"value.converter": "org.apache.kafka.connect.json.JsonConverter",\n"value.converter.schemas.enable": "false"\n}\n}\'\n'})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"\u540C\u6B65-debezium-\u7EC4\u4EF6\u91C7\u96C6\u7684\u6570\u636E",children:"\u540C\u6B65 Debezium \u7EC4\u4EF6\u91C7\u96C6\u7684\u6570\u636E"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"MySQL \u6570\u636E\u5E93\u4E2D\u6709\u5982\u4E0B\u8868"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"   CREATE TABLE test.test_user (\n   user_id int NOT NULL ,\n   name varchar(20),\n   age int,\n   PRIMARY KEY (user_id)\n   ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;\n\ninsert into test.test_user values(1,'zhangsan',20);\ninsert into test.test_user values(2,'lisi',21);\ninsert into test.test_user values(3,'wangwu',22);\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsx)(n.li,{children:"\u5728 Doris \u521B\u5EFA\u88AB\u5BFC\u5165\u7684\u8868"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:'   CREATE TABLE test_db.test_user(\n   user_id            BIGINT       NOT NULL COMMENT "user id",\n   name               VARCHAR(20)           COMMENT "name",\n   age                INT                   COMMENT "age"\n   )\n   UNIQUE KEY(user_id)\n   DISTRIBUTED BY HASH(user_id) BUCKETS 12;\n'})}),"\n",(0,t.jsxs)(n.ol,{start:"3",children:["\n",(0,t.jsxs)(n.li,{children:["\u90E8\u7F72 Debezium connector for MySQL \u7EC4\u4EF6\uFF0C\u53C2\u8003\uFF1A",(0,t.jsx)(n.a,{href:"https://debezium.io/documentation/reference/stable/connectors/mysql.html",children:"Debezium connector for MySQL"})]}),"\n",(0,t.jsxs)(n.li,{children:["\u521B\u5EFA doris-kafka-connector \u5BFC\u5165\u4EFB\u52A1",(0,t.jsx)(n.br,{}),"\n\u5047\u8BBE\u901A\u8FC7 Debezium \u91C7\u96C6\u5230\u7684 MySQL \u8868\u6570\u636E\u5728 ",(0,t.jsx)(n.code,{children:"mysql_debezium.test.test_user"})," Topic \u4E2D"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:'   curl -i http://127.0.0.1:8083/connectors -H "Content-Type: application/json" -X POST -d \'{\n   "name":"test-debezium-doris-sink",\n   "config":{\n   "connector.class":"org.apache.doris.kafka.connector.DorisSinkConnector",\n   "tasks.max":"10",\n   "topics":"mysql_debezium.test.test_user",\n   "doris.topic2table.map": "mysql_debezium.test.test_user:test_user",\n   "doris.urls":"10.10.10.1",\n   "doris.user":"root",\n   "doris.password":"",\n   "doris.http.port":"8030",\n   "doris.query.port":"9030",\n   "doris.database":"test_db",\n   "buffer.count.records":"10000",\n   "buffer.flush.time":"30",\n   "buffer.size.bytes":"5000000",\n   "enable.combine.flush": "true",\n   "converter.mode":"debezium_ingestion",\n   "enable.delete":"true",\n   "key.converter":"org.apache.kafka.connect.json.JsonConverter",\n   "value.converter":"org.apache.kafka.connect.json.JsonConverter"\n   }\n   }\'\n'})}),"\n",(0,t.jsx)(n.h3,{id:"\u540C\u6B65-avro-\u5E8F\u5217\u5316\u6570\u636E",children:"\u540C\u6B65 Avro \u5E8F\u5217\u5316\u6570\u636E"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:'curl -i http://127.0.0.1:8083/connectors -H "Content-Type: application/json" -X POST -d \'{ \n  "name":"doris-avro-test", \n  "config":{ \n    "connector.class":"org.apache.doris.kafka.connector.DorisSinkConnector", \n    "topics":"avro_topic", \n    "tasks.max":"10",\n    "doris.topic2table.map": "avro_topic:avro_tab", \n    "doris.urls":"127.0.0.1", \n    "doris.user":"root", \n    "doris.password":"", \n    "doris.http.port":"8030", \n    "doris.query.port":"9030", \n    "doris.database":"test", \n    "buffer.count.records":"100000", \n    "buffer.flush.time":"120", \n    "buffer.size.bytes":"10000000", \n    "enable.combine.flush": "true",\n    "key.converter":"io.confluent.connect.avro.AvroConverter",\n    "key.converter.schema.registry.url":"http://127.0.0.1:8081",\n    "value.converter":"io.confluent.connect.avro.AvroConverter",\n    "value.converter.schema.registry.url":"http://127.0.0.1:8081"\n  } \n}\'\n'})}),"\n",(0,t.jsx)(n.h3,{id:"\u540C\u6B65-protobuf-\u5E8F\u5217\u5316\u6570\u636E",children:"\u540C\u6B65 Protobuf \u5E8F\u5217\u5316\u6570\u636E"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:'curl -i http://127.0.0.1:8083/connectors -H "Content-Type: application/json" -X POST -d \'{ \n  "name":"doris-protobuf-test", \n  "config":{ \n    "connector.class":"org.apache.doris.kafka.connector.DorisSinkConnector", \n    "topics":"proto_topic", \n    "tasks.max":"10",\n    "doris.topic2table.map": "proto_topic:proto_tab", \n    "doris.urls":"127.0.0.1", \n    "doris.user":"root", \n    "doris.password":"", \n    "doris.http.port":"8030", \n    "doris.query.port":"9030", \n    "doris.database":"test", \n    "buffer.count.records":"100000", \n    "buffer.flush.time":"120", \n    "buffer.size.bytes":"10000000",\n    "enable.combine.flush": "true", \n    "key.converter":"io.confluent.connect.protobuf.ProtobufConverter",\n    "key.converter.schema.registry.url":"http://127.0.0.1:8081",\n    "value.converter":"io.confluent.connect.protobuf.ProtobufConverter",\n    "value.converter.schema.registry.url":"http://127.0.0.1:8081"\n  } \n}\'\n'})}),"\n",(0,t.jsx)(n.h3,{id:"\u4F7F\u7528-kafka-connect-smt-\u8F6C\u6362\u6570\u636E",children:"\u4F7F\u7528 Kafka Connect SMT \u8F6C\u6362\u6570\u636E"}),"\n",(0,t.jsx)(n.p,{children:"\u6570\u636E\u6837\u4F8B\u5982\u4E0B:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:'{\n  "registertime": 1513885135404,\n  "userid": "User_9",\n  "regionid": "Region_3",\n  "gender": "MALE"\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"\u5047\u8BBE\u9700\u8981\u5728 Kafka \u6D88\u606F\u4E2D\u786C\u7F16\u7801\u65B0\u589E\u4E00\u4E2A\u5217\uFF0C\u53EF\u4EE5\u4F7F\u7528 InsertField\u3002\u53E6\u5916\uFF0C\u4E5F\u53EF\u4EE5\u4F7F\u7528 TimestampConverter \u5C06 Bigint \u7C7B\u578B timestamp \u8F6C\u6362\u6210\u65F6\u95F4\u5B57\u7B26\u4E32\u3002"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:'curl -i http://127.0.0.1:8083/connectors -H "Content-Type: application/json" -X POST -d \'{\n  "name": "insert_field_tranform",\n  "config": {\n    "connector.class": "org.apache.doris.kafka.connector.DorisSinkConnector",\n    "tasks.max": "1",  \n    "topics": "users",  \n    "doris.topic2table.map": "users:kf_users",  \n    "buffer.count.records": "10000",    \n    "buffer.flush.time": "10",       \n    "buffer.size.bytes": "5000000",  \n    "doris.urls": "127.0.0.1:8030", \n    "doris.user": "root",                \n    "doris.password": "123456",           \n    "doris.http.port": "8030",           \n    "doris.query.port": "9030",          \n    "doris.database": "testdb",          \n    "key.converter": "org.apache.kafka.connect.storage.StringConverter",\n    "value.converter": "org.apache.kafka.connect.json.JsonConverter",\n    "value.converter.schemas.enable": "false",  \n    "transforms": "InsertField,TimestampConverter",  \n    // Insert Static Field\n    "transforms.InsertField.type": "org.apache.kafka.connect.transforms.InsertField$Value",\n    "transforms.InsertField.static.field": "repo",    \n    "transforms.InsertField.static.value": "Apache Doris",  \n    // Convert Timestamp Format\n    "transforms.TimestampConverter.type": "org.apache.kafka.connect.transforms.TimestampConverter$Value",\n    "transforms.TimestampConverter.field": "registertime",  \n    "transforms.TimestampConverter.format": "yyyy-MM-dd HH:mm:ss.SSS",\n    "transforms.TimestampConverter.target.type": "string"\n  }\n}\'\n'})}),"\n",(0,t.jsx)(n.p,{children:"\u6837\u4F8B\u6570\u636E\u7ECF\u8FC7 SMT \u7684\u5904\u7406\u4E4B\u540E\uFF0C\u53D8\u6210\u5982\u4E0B\u6240\u793A\uFF1A"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:'{\n  "userid": "User_9",\n  "regionid": "Region_3",\n  "gender": "MALE",\n  "repo": "Apache Doris",// Static field added   \n  "registertime": "2017-12-21 03:38:55.404"  // Unix timestamp converted to string\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["\u66F4\u591A\u5173\u4E8E Kafka Connect Single Message Transforms (SMT) \u4F7F\u7528\u6848\u4F8B, \u53EF\u4EE5\u53C2\u8003\u6587\u6863 ",(0,t.jsx)(n.a,{href:"https://docs.confluent.io/cloud/current/connectors/transforms/overview.html",children:"SMT documentation"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"\u5E38\u89C1\u95EE\u9898",children:"\u5E38\u89C1\u95EE\u9898"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"1. \u8BFB\u53D6 JSON \u7C7B\u578B\u7684\u6570\u636E\u62A5\u5982\u4E0B\u9519\u8BEF\uFF1A"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:'Caused by: org.apache.kafka.connect.errors.DataException: JsonConverter with schemas.enable requires "schema" and "payload" fields and may not contain additional fields. If you are trying to deserialize plain JSON data, set schemas.enable=false in your converter configuration.\n	at org.apache.kafka.connect.json.JsonConverter.toConnectData(JsonConverter.java:337)\n	at org.apache.kafka.connect.storage.Converter.toConnectData(Converter.java:91)\n	at org.apache.kafka.connect.runtime.WorkerSinkTask.lambda$convertAndTransformRecord$4(WorkerSinkTask.java:536)\n	at org.apache.kafka.connect.runtime.errors.RetryWithToleranceOperator.execAndRetry(RetryWithToleranceOperator.java:180)\n	at org.apache.kafka.connect.runtime.errors.RetryWithToleranceOperator.execAndHandleError(RetryWithToleranceOperator.java:214)\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u539F\u56E0\uFF1A"}),"\n\u662F\u56E0\u4E3A\u4F7F\u7528 ",(0,t.jsx)(n.code,{children:"org.apache.kafka.connect.json.JsonConverter"}),' \u8F6C\u6362\u5668\u9700\u8981\u5339\u914D "schema" \u548C "payload" \u5B57\u6BB5\u3002']}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u4E24\u79CD\u89E3\u51B3\u65B9\u6848\uFF0C\u4EFB\u9009\u5176\u4E00\uFF1A"})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\u5C06 ",(0,t.jsx)(n.code,{children:"org.apache.kafka.connect.json.JsonConverter"})," \u66F4\u6362\u4E3A ",(0,t.jsx)(n.code,{children:"org.apache.kafka.connect.storage.StringConverter"})]}),"\n",(0,t.jsxs)(n.li,{children:["\u542F\u52A8\u6A21\u5F0F\u4E3A ",(0,t.jsx)(n.strong,{children:"Standalone"})," \u6A21\u5F0F\uFF0C\u5219\u5C06 config/connect-standalone.properties \u4E2D ",(0,t.jsx)(n.code,{children:"value.converter.schemas.enable"})," \u6216 ",(0,t.jsx)(n.code,{children:"key.converter.schemas.enable"})," \u6539\u6210 false\uFF1B\n\u542F\u52A8\u6A21\u5F0F\u4E3A ",(0,t.jsx)(n.strong,{children:"Distributed"})," \u6A21\u5F0F\uFF0C\u5219\u5C06 config/connect-distributed.properties \u4E2D ",(0,t.jsx)(n.code,{children:"value.converter.schemas.enable"})," \u6216 ",(0,t.jsx)(n.code,{children:"key.converter.schemas.enable"})," \u6539\u6210 false"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"2. \u6D88\u8D39\u8D85\u65F6\uFF0C\u6D88\u8D39\u8005\u88AB\u8E22\u51FA\u6D88\u8D39\u7FA4\u7EC4\uFF1A"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"org.apache.kafka.clients.consumer.CommitFailedException: Offset commit cannot be completed since the consumer is not part of an active group for auto partition assignment; it is likely that the consumer was kicked out of the group.\n        at org.apache.kafka.clients.consumer.internals.ConsumerCoordinator.sendOffsetCommitRequest(ConsumerCoordinator.java:1318)\n        at org.apache.kafka.clients.consumer.internals.ConsumerCoordinator.doCommitOffsetsAsync(ConsumerCoordinator.java:1127)\n        at org.apache.kafka.clients.consumer.internals.ConsumerCoordinator.commitOffsetsAsync(ConsumerCoordinator.java:1093)\n        at org.apache.kafka.clients.consumer.KafkaConsumer.commitAsync(KafkaConsumer.java:1590)\n        at org.apache.kafka.connect.runtime.WorkerSinkTask.doCommitAsync(WorkerSinkTask.java:361)\n        at org.apache.kafka.connect.runtime.WorkerSinkTask.doCommit(WorkerSinkTask.java:376)\n        at org.apache.kafka.connect.runtime.WorkerSinkTask.commitOffsets(WorkerSinkTask.java:467)\n        at org.apache.kafka.connect.runtime.WorkerSinkTask.commitOffsets(WorkerSinkTask.java:381)\n        at org.apache.kafka.connect.runtime.WorkerSinkTask.iteration(WorkerSinkTask.java:221)\n        at org.apache.kafka.connect.runtime.WorkerSinkTask.execute(WorkerSinkTask.java:206)\n        at org.apache.kafka.connect.runtime.WorkerTask.doRun(WorkerTask.java:204)\n        at org.apache.kafka.connect.runtime.WorkerTask.run(WorkerTask.java:259)\n        at org.apache.kafka.connect.runtime.isolation.Plugins.lambda$withClassLoader$1(Plugins.java:181)\n        at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)\n        at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\n        at java.base/java.lang.Thread.run(Thread.java:833)\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u89E3\u51B3\u65B9\u6848\uFF1A"})}),"\n",(0,t.jsxs)(n.p,{children:["\u5C06 Kafka \u4E2D ",(0,t.jsx)(n.code,{children:"max.poll.interval.ms"})," \u6839\u636E\u573A\u666F\u8FDB\u884C\u8C03\u5927\uFF0C\u9ED8\u8BA4\u503C\u662F ",(0,t.jsx)(n.code,{children:"300000"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u5982\u679C\u662F Standalone \u6A21\u5F0F\u542F\u52A8\uFF0C\u5219\u5728 config/connect-standalone.properties \u7684\u914D\u7F6E\u6587\u4EF6\u4E2D\u589E\u52A0 ",(0,t.jsx)(n.code,{children:"max.poll.interval.ms"})," \u548C ",(0,t.jsx)(n.code,{children:"consumer.max.poll.interval.ms"})," \u53C2\u6570\uFF0C\u5E76\u914D\u7F6E\u53C2\u6570\u503C\u3002"]}),"\n",(0,t.jsxs)(n.li,{children:["\u5982\u679C\u662F Distributed \u6A21\u5F0F\u542F\u52A8\uFF0C\u5219\u5728  config/connect-distributed.properties  \u7684\u914D\u7F6E\u6587\u4EF6\u589E\u52A0 ",(0,t.jsx)(n.code,{children:"max.poll.interval.ms"})," \u548C ",(0,t.jsx)(n.code,{children:"consumer.max.poll.interval.ms"})," \u53C2\u6570\uFF0C\u5E76\u914D\u7F6E\u53C2\u6570\u503C\u3002"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"\u8C03\u6574\u53C2\u6570\u540E\uFF0C\u91CD\u542F kafka-connect"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"3. Doris-kafka-connector \u4ECE 1.0.0 \u6216 1.1.0 \u5347\u7EA7\u5230 24.0.0 \u7248\u672C\u62A5\u9519"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"org.apache.kafka.common.config.ConfigException: Topic 'connect-status' supplied via the 'status.storage.topic' property is required to have 'cleanup.policy=compact' to guarantee consistency and durability of connector and task statuses, but found the topic currently has 'cleanup.policy=delete'. Continuing would likely result in eventually losing connector and task statuses and problems restarting this Connect cluster in the future. Change the 'status.storage.topic' property in the Connect worker configurations to use a topic with 'cleanup.policy=compact'.\n	at org.apache.kafka.connect.util.TopicAdmin.verifyTopicCleanupPolicyOnlyCompact(TopicAdmin.java:581)\n	at org.apache.kafka.connect.storage.KafkaTopicBasedBackingStore.lambda$topicInitializer$0(KafkaTopicBasedBackingStore.java:47)\n	at org.apache.kafka.connect.util.KafkaBasedLog.start(KafkaBasedLog.java:247)\n	at org.apache.kafka.connect.util.KafkaBasedLog.start(KafkaBasedLog.java:231)\n	at org.apache.kafka.connect.storage.KafkaStatusBackingStore.start(KafkaStatusBackingStore.java:228)\n	at org.apache.kafka.connect.runtime.AbstractHerder.startServices(AbstractHerder.java:164)\n	at org.apache.kafka.connect.runtime.distributed.DistributedHerder.run\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u89E3\u51B3\u65B9\u6848\uFF1A"}),"\n\u8C03\u6574 ",(0,t.jsx)(n.code,{children:"connect-configs"})," ",(0,t.jsx)(n.code,{children:"connect-status"})," Topic \u7684\u6E05\u9664\u7B56\u7565\u4E3A compact"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"$KAFKA_HOME/bin/kafka-configs.sh --alter --entity-type topics --entity-name connect-configs --add-config cleanup.policy=compact --bootstrap-server 127.0.0.1:9092\n$KAFKA_HOME/bin/kafka-configs.sh --alter --entity-type topics --entity-name connect-status --add-config cleanup.policy=compact --bootstrap-server 127.0.0.1:9092\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsxs)(n.strong,{children:["4. ",(0,t.jsx)(n.code,{children:"debezium_ingestion"})," \u8F6C\u6362\u6A21\u5F0F\u4E0B\uFF0C\u8868\u7ED3\u6784\u53D8\u66F4\u5931\u8D25"]})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"[2025-01-07 14:26:20,474] WARN [doris-normal_test_sink-connector|task-0] Table 'test_sink' cannot be altered because schema evolution is disabled. (org.apache.doris.kafka.connector.converter.RecordService:183)\n[2025-01-07 14:26:20,475] ERROR [doris-normal_test_sink-connector|task-0] WorkerSinkTask{id=doris-normal_test_sink-connector-0} Task threw an uncaught and unrecoverable exception. Task is being killed and will not recover until manually restarted. Error: Cannot alter table org.apache.doris.kafka.connector.model.TableDescriptor@67cd8027 because schema evolution is disabled (org.apache.kafka.connect.runtime.WorkerSinkTask:612)\norg.apache.doris.kafka.connector.exception.SchemaChangeException: Cannot alter table org.apache.doris.kafka.connector.model.TableDescriptor@67cd8027 because schema evolution is disabled\n	at org.apache.doris.kafka.connector.converter.RecordService.alterTableIfNeeded(RecordService.java:186)\n	at org.apache.doris.kafka.connector.converter.RecordService.checkAndApplyTableChangesIfNeeded(RecordService.java:150)\n	at org.apache.doris.kafka.connector.converter.RecordService.processStructRecord(RecordService.java:100)\n	at org.apache.doris.kafka.connector.converter.RecordService.getProcessedRecord(RecordService.java:305)\n	at org.apache.doris.kafka.connector.writer.DorisWriter.putBuffer(DorisWriter.java:155)\n	at org.apache.doris.kafka.connector.writer.DorisWriter.insertRecord(DorisWriter.java:124)\n	at org.apache.doris.kafka.connector.writer.StreamLoadWriter.insert(StreamLoadWriter.java:151)\n	at org.apache.doris.kafka.connector.service.DorisDefaultSinkService.insert(DorisDefaultSinkService.java:154)\n	at org.apache.doris.kafka.connector.service.DorisDefaultSinkService.insert(DorisDefaultSinkService.java:135)\n	at org.apache.doris.kafka.connector.DorisSinkTask.put(DorisSinkTask.java:97)\n	at org.apache.kafka.connect.runtime.WorkerSinkTask.deliverMessages(WorkerSinkTask.java:583)\n	at org.apache.kafka.connect.runtime.WorkerSinkTask.poll(WorkerSinkTask.java:336)\n	at org.apache.kafka.connect.runtime.WorkerSinkTask.iteration(WorkerSinkTask.java:237)\n	at org.apache.kafka.connect.runtime.WorkerSinkTask.execute(WorkerSinkTask.java:206)\n	at org.apache.kafka.connect.runtime.WorkerTask.doRun(WorkerTask.java:202)\n	at org.apache.kafka.connect.runtime.WorkerTask.run(WorkerTask.java:257)\n	at org.apache.kafka.connect.runtime.isolation.Plugins.lambda$withClassLoader$1(Plugins.java:177)\n	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\n	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\n	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\n	at java.base/java.lang.Thread.run(Thread.java:829)\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u89E3\u51B3\u65B9\u6848\uFF1A"})}),"\n",(0,t.jsxs)(n.p,{children:["\u5728 ",(0,t.jsx)(n.code,{children:"debezium_ingestion"})," \u8F6C\u6362\u6A21\u5F0F\u4E0B\uFF0C\u9ED8\u8BA4\u8868\u7ED3\u6784\u53D8\u66F4\u662F\u5173\u95ED\u7684\uFF0C\u9700\u8981\u914D\u7F6E ",(0,t.jsx)(n.code,{children:"debezium.schema.evolution"})," \u4E3A ",(0,t.jsx)(n.code,{children:"basic"}),"	\u4EE5\u4FBF\u5F00\u542F\u8868\u7ED3\u6784\u53D8\u66F4\u3002",(0,t.jsx)(n.br,{}),"\n\u9700\u8981\u6CE8\u610F\u7684\u662F\uFF1A\u5F00\u542F\u8868\u7ED3\u6784\u53D8\u66F4\u5E76\u4E0D\u80FD\u51C6\u786E\u7684\u4FDD\u6301\u6B64\u53D8\u66F4\u5217\u4E3A Doris \u8868\u4E2D\u7684\u552F\u4E00\u5217\uFF08\u8BE6\u89C1 ",(0,t.jsx)(n.code,{children:"debezium.schema.evolution"})," \u53C2\u6570\u8BF4\u660E\uFF09\u3002\u5982\u9700\u8981\u4FDD\u6301\u4E0A\u4E0B\u6E38\u53EA\u5B58\u5728\u552F\u4E00\u5217\uFF0C\u6700\u597D\u662F\u624B\u52A8\u6DFB\u52A0\u53D8\u66F4\u5217\u5230 Doris \u8868\u4E2D\uFF0C\u518D\u91CD\u65B0\u542F\u52A8 Connector \u4EFB\u52A1\uFF0CConnector \u5C06\u4F1A\u63A5\u7740\u672A\u6D88\u8D39\u7684 ",(0,t.jsx)(n.code,{children:"offset"})," \u7EE7\u7EED\u6D88\u8D39\uFF0C\u4FDD\u6301\u6570\u636E\u7684\u4E00\u81F4\u6027\u3002"]})]})}function h(e={}){let{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},250065:function(e,n,r){r.d(n,{Z:function(){return c},a:function(){return o}});var s=r(667294);let t={},a=s.createContext(t);function o(e){let n=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);