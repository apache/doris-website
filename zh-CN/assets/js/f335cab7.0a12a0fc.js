"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["212763"],{18862:function(e,n,s){s.r(n),s.d(n,{default:()=>h,frontMatter:()=>i,metadata:()=>l,assets:()=>a,toc:()=>t,contentTitle:()=>r});var l=JSON.parse('{"id":"compute-storage-decoupled/compilation-and-deployment","title":"\u7F16\u8BD1\u90E8\u7F72","description":"1. \u6982\u8FF0","source":"@site/i18n/zh-CN/docusaurus-plugin-content-docs/current/compute-storage-decoupled/compilation-and-deployment.md","sourceDirName":"compute-storage-decoupled","slug":"/compute-storage-decoupled/compilation-and-deployment","permalink":"/zh-CN/docs/dev/compute-storage-decoupled/compilation-and-deployment","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"\u7F16\u8BD1\u90E8\u7F72","language":"zh-CN"},"sidebar":"docs","previous":{"title":"Doris \u5B58\u7B97\u5206\u79BB\u6A21\u5F0F\u90E8\u7F72\u51C6\u5907","permalink":"/zh-CN/docs/dev/compute-storage-decoupled/before-deployment"},"next":{"title":"\u7BA1\u7406 Storage Vault","permalink":"/zh-CN/docs/dev/compute-storage-decoupled/managing-storage-vault"}}'),c=s("785893"),d=s("250065");let i={title:"\u7F16\u8BD1\u90E8\u7F72",language:"zh-CN"},r=void 0,a={},t=[{value:"1. \u6982\u8FF0",id:"1-\u6982\u8FF0",level:2},{value:"2. \u83B7\u53D6\u4E8C\u8FDB\u5236",id:"2-\u83B7\u53D6\u4E8C\u8FDB\u5236",level:2},{value:"2.1 \u76F4\u63A5\u4E0B\u8F7D",id:"21-\u76F4\u63A5\u4E0B\u8F7D",level:3},{value:"2.2 \u7F16\u8BD1\u4EA7\u51FA\uFF08\u53EF\u9009\uFF09",id:"22-\u7F16\u8BD1\u4EA7\u51FA\u53EF\u9009",level:3},{value:"3. Meta Service \u90E8\u7F72",id:"3-meta-service-\u90E8\u7F72",level:2},{value:"3.1 \u914D\u7F6E",id:"31-\u914D\u7F6E",level:3},{value:"3.2 \u542F\u52A8\u4E0E\u505C\u6B62",id:"32-\u542F\u52A8\u4E0E\u505C\u6B62",level:3},{value:"4. \u6570\u636E\u56DE\u6536\u529F\u80FD\u72EC\u7ACB\u90E8\u7F72\uFF08\u53EF\u9009\uFF09",id:"4-\u6570\u636E\u56DE\u6536\u529F\u80FD\u72EC\u7ACB\u90E8\u7F72\u53EF\u9009",level:2},{value:"5. FE \u548C BE \u7684\u542F\u52A8\u6D41\u7A0B",id:"5-fe-\u548C-be-\u7684\u542F\u52A8\u6D41\u7A0B",level:2},{value:"5.1 \u542F\u52A8\u987A\u5E8F",id:"51-\u542F\u52A8\u987A\u5E8F",level:3},{value:"5.2 \u542F\u52A8 MASTER \u89D2\u8272\u7684 FE",id:"52-\u542F\u52A8-master-\u89D2\u8272\u7684-fe",level:3},{value:"5.2.1 \u914D\u7F6E fe.conf",id:"521-\u914D\u7F6E-feconf",level:4},{value:"5.2.2 \u542F\u52A8 FE",id:"522-\u542F\u52A8-fe",level:4},{value:"5.3 \u6DFB\u52A0\u5176\u4ED6 FE \u8282\u70B9",id:"53-\u6DFB\u52A0\u5176\u4ED6-fe-\u8282\u70B9",level:3},{value:"5.4 \u6DFB\u52A0 BE \u8282\u70B9",id:"54-\u6DFB\u52A0-be-\u8282\u70B9",level:3},{value:"5.4.1 \u914D\u7F6E be.conf",id:"541-\u914D\u7F6E-beconf",level:4},{value:"5.4.1 \u542F\u52A8\u548C\u6DFB\u52A0 BE",id:"541-\u542F\u52A8\u548C\u6DFB\u52A0-be",level:4},{value:"6. \u521B\u5EFA Storage Vault",id:"6-\u521B\u5EFA-storage-vault",level:2},{value:"6.1 \u521B\u5EFA HDFS  Storage Vault",id:"61-\u521B\u5EFA-hdfs--storage-vault",level:3},{value:"6.2 \u521B\u5EFA S3  Storage Vault",id:"62-\u521B\u5EFA-s3--storage-vault",level:3},{value:"6.3 \u8BBE\u7F6E\u9ED8\u8BA4 Storage Vault",id:"63-\u8BBE\u7F6E\u9ED8\u8BA4-storage-vault",level:3},{value:"7. \u6CE8\u610F\u4E8B\u9879",id:"7-\u6CE8\u610F\u4E8B\u9879",level:2}];function o(e){let n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,d.a)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.h2,{id:"1-\u6982\u8FF0",children:"1. \u6982\u8FF0"}),"\n",(0,c.jsx)(n.p,{children:"\u672C\u6587\u6863\u8BE6\u7EC6\u4ECB\u7ECD\u4E86 Doris \u5B58\u7B97\u5206\u79BB\u6A21\u5F0F\u4E0B\u7684\u7F16\u8BD1\u548C\u90E8\u7F72\u6D41\u7A0B\uFF0C\u91CD\u70B9\u8BF4\u660E\u4E86\u4E0E\u5B58\u7B97\u4E00\u4F53\u6A21\u5F0F\u7684\u533A\u522B\uFF0C\u7279\u522B\u662F\u65B0\u589E Meta Service (MS) \u6A21\u5757\u7684\u7F16\u8BD1\u3001\u914D\u7F6E\u548C\u7BA1\u7406\u3002"}),"\n",(0,c.jsx)(n.h2,{id:"2-\u83B7\u53D6\u4E8C\u8FDB\u5236",children:"2. \u83B7\u53D6\u4E8C\u8FDB\u5236"}),"\n",(0,c.jsx)(n.h3,{id:"21-\u76F4\u63A5\u4E0B\u8F7D",children:"2.1 \u76F4\u63A5\u4E0B\u8F7D"}),"\n",(0,c.jsxs)(n.p,{children:["\u5DF2\u7F16\u8BD1\u597D\u7684\u4E8C\u8FDB\u5236\u6587\u4EF6\uFF08\u5305\u542B\u6240\u6709 Doris \u6A21\u5757\uFF09\u53EF\u4ECE ",(0,c.jsx)(n.a,{href:"https://doris.apache.org/download/",children:"Doris \u4E0B\u8F7D\u9875\u9762"})," \u83B7\u53D6\uFF08\u9009\u62E9 3.0.2 \u6216\u66F4\u9AD8\u7248\u672C\uFF09\u3002"]}),"\n",(0,c.jsx)(n.h3,{id:"22-\u7F16\u8BD1\u4EA7\u51FA\u53EF\u9009",children:"2.2 \u7F16\u8BD1\u4EA7\u51FA\uFF08\u53EF\u9009\uFF09"}),"\n",(0,c.jsxs)(n.p,{children:["\u4F7F\u7528\u4EE3\u7801\u5E93\u81EA\u5E26\u7684 ",(0,c.jsx)(n.code,{children:"build.sh"})," \u811A\u672C\u8FDB\u884C\u7F16\u8BD1\u3002\u65B0\u589E\u7684 MS \u6A21\u5757\u901A\u8FC7 ",(0,c.jsx)(n.code,{children:"--cloud"})," \u53C2\u6570\u7F16\u8BD1\u3002"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-shell",children:"sh build.sh --fe --be --cloud \n"})}),"\n",(0,c.jsxs)(n.p,{children:["\u7F16\u8BD1\u5B8C\u6210\u540E\uFF0C\u5728 ",(0,c.jsx)(n.code,{children:"output"})," \u76EE\u5F55\u4E0B\u4F1A\u65B0\u589E ",(0,c.jsx)(n.code,{children:"ms"})," \u76EE\u5F55\uFF1A"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"output\n\u251C\u2500\u2500 be\n\u251C\u2500\u2500 fe\n\u2514\u2500\u2500 ms\n    \u251C\u2500\u2500 bin\n    \u251C\u2500\u2500 conf\n    \u2514\u2500\u2500 lib\n"})}),"\n",(0,c.jsx)(n.h2,{id:"3-meta-service-\u90E8\u7F72",children:"3. Meta Service \u90E8\u7F72"}),"\n",(0,c.jsx)(n.h3,{id:"31-\u914D\u7F6E",children:"3.1 \u914D\u7F6E"}),"\n",(0,c.jsxs)(n.p,{children:["\u5728 ",(0,c.jsx)(n.code,{children:"./conf/doris_cloud.conf"})," \u6587\u4EF6\u4E2D\uFF0C\u4E3B\u8981\u9700\u8981\u4FEE\u6539\u4EE5\u4E0B\u4E24\u4E2A\u53C2\u6570\uFF1A"]}),"\n",(0,c.jsxs)(n.ol,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"brpc_listen_port"}),"\uFF1AMeta Service \u7684\u76D1\u542C\u7AEF\u53E3\uFF0C\u9ED8\u8BA4\u4E3A 5000\u3002"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"fdb_cluster"}),"\uFF1AFoundationDB \u96C6\u7FA4\u7684\u8FDE\u63A5\u4FE1\u606F\uFF0C\u90E8\u7F72 FoundationDB \u65F6\u53EF\u4EE5\u83B7\u53D6\u3002(\u5982\u679C\u4F7F\u7528 Doris \u63D0\u4F9B\u7684 fdb_ctl.sh \u90E8\u7F72\u7684\u8BDD\uFF0C\u53EF\u5728 ",(0,c.jsx)(n.code,{children:"$FDB_HOME/conf/fdb.cluster"})," \u6587\u4EF6\u91CC\u83B7\u53D6\u8BE5\u503C)\u3002"]}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:"\u793A\u4F8B\u914D\u7F6E\uFF1A"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-Shell",children:"brpc_listen_port = 5000\nfdb_cluster = xxx:yyy@127.0.0.1:4500\n"})}),"\n",(0,c.jsxs)(n.p,{children:["\u6CE8\u610F\uFF1A",(0,c.jsx)(n.code,{children:"fdb_cluster"})," \u7684\u503C\u5E94\u4E0E FoundationDB \u90E8\u7F72\u673A\u5668\u4E0A\u7684 ",(0,c.jsx)(n.code,{children:"/etc/foundationdb/fdb.cluster"})," \u6587\u4EF6\u5185\u5BB9\u4E00\u81F4 (\u5982\u679C\u4F7F\u7528 Doris \u63D0\u4F9B\u7684 fdb_ctl.sh \u90E8\u7F72\u7684\u8BDD\uFF0C\u53EF\u5728 ",(0,c.jsx)(n.code,{children:"$FDB_HOME/conf/fdb.cluster"})," \u6587\u4EF6\u91CC\u83B7\u53D6\u8BE5\u503C)\u3002"]}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"\u793A\u4F8B\uFF0C\u6587\u4EF6\u7684\u6700\u540E\u4E00\u884C\u5C31\u662F\u8981\u586B\u5230 doris_cloud.conf \u91CC fdb_cluster \u5B57\u6BB5\u7684\u503C"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-shell",children:"cat /etc/foundationdb/fdb.cluster\n\n# DO NOT EDIT!\n# This file is auto-generated, it is not to be edited by hand.\ncloud_ssb:A83c8Y1S3ZbqHLL4P4HHNTTw0A83CuHj@127.0.0.1:4500\n"})}),"\n",(0,c.jsx)(n.h3,{id:"32-\u542F\u52A8\u4E0E\u505C\u6B62",children:"3.2 \u542F\u52A8\u4E0E\u505C\u6B62"}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.em,{children:"\u73AF\u5883\u8981\u6C42"})}),"\n",(0,c.jsxs)(n.p,{children:["\u786E\u4FDD\u5DF2\u6B63\u786E\u8BBE\u7F6E ",(0,c.jsx)(n.code,{children:"JAVA_HOME"})," \u73AF\u5883\u53D8\u91CF\uFF0C\u6307\u5411 OpenJDK 17\uFF0C\u8FDB\u5165 ",(0,c.jsx)(n.code,{children:"ms"})," \u76EE\u5F55\u3002"]}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.em,{children:"\u542F\u52A8\u547D\u4EE4"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-Shell",children:"export JAVA_HOME=${path_to_jdk_17}\nbin/start.sh --daemon\n"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-text",children:"LIBHDFS3_CONF=\nstarts doris_cloud with args: --meta-service\nwait and check doris_cloud start successfully\nsuccessfully started brpc listening on port=5000 time_elapsed_ms=11\ndoris_cloud start successfully\n"})}),"\n",(0,c.jsx)(n.p,{children:"\u542F\u52A8\u811A\u672C\u8FD4\u56DE\u503C\u4E3A 0 \u8868\u793A\u542F\u52A8\u6210\u529F\uFF0C\u5426\u5219\u542F\u52A8\u5931\u8D25\u3002"}),"\n",(0,c.jsxs)(n.admonition,{type:"info",children:[(0,c.jsx)(n.p,{children:"\u5728 3.0.4 \u4E2D\uFF0C\u542F\u52A8\u811A\u672C\u4F1A\u8F93\u51FA\u66F4\u591A\u4FE1\u606F\uFF1A"}),(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-text",children:'2024-12-26 15:31:53 start with args: --meta-service\nwait and check MetaService and Recycler start successfully\nprocess working directory: "/mnt/disk1/doris/ms"\npid=1666015 written to file=./bin/doris_cloud.pid\nversion:{doris-3.0.4-release} code_version:{commit=fd44740fadabebfedb5da201d7ce427a5dd47c44 time=2025-01-16 18:53:00 +0800} build_info: ...\n\nMetaService has been started successfully\nsuccessfully started service listening on port=5000 time_elapsed_ms=19\n'})})]}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.em,{children:"\u505C\u6B62\u547D\u4EE4"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-shell",children:"bin/stop.sh\n"})}),"\n",(0,c.jsx)(n.p,{children:"\u751F\u4EA7\u73AF\u5883\u4E2D\u8BF7\u786E\u4FDD\u81F3\u5C11\u6709 3 \u4E2A Meta Service \u8282\u70B9\u3002"}),"\n",(0,c.jsx)(n.h2,{id:"4-\u6570\u636E\u56DE\u6536\u529F\u80FD\u72EC\u7ACB\u90E8\u7F72\u53EF\u9009",children:"4. \u6570\u636E\u56DE\u6536\u529F\u80FD\u72EC\u7ACB\u90E8\u7F72\uFF08\u53EF\u9009\uFF09"}),"\n",(0,c.jsx)(n.admonition,{type:"info",children:(0,c.jsx)(n.p,{children:"Meta Service \u672C\u8EAB\u5177\u5907\u4E86\u5143\u6570\u636E\u7BA1\u7406\u548C\u56DE\u6536\u529F\u80FD\uFF0C\u8FD9\u4E24\u4E2A\u529F\u80FD\u53EF\u4EE5\u72EC\u7ACB\u90E8\u7F72\uFF0C\u5982\u679C\u4F60\u60F3\u72EC\u7ACB\u90E8\u7F72\uFF0C\u53EF\u4EE5\u53C2\u8003\u8FD9\u4E00\u8282\u3002"})}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.em,{children:"\u51C6\u5907\u5DE5\u4F5C"})}),"\n",(0,c.jsxs)(n.ol,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["\u521B\u5EFA\u65B0\u7684\u5DE5\u4F5C\u76EE\u5F55\uFF08\u5982 ",(0,c.jsx)(n.code,{children:"recycler"}),"\uFF09\u3002"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["\u590D\u5236 ",(0,c.jsx)(n.code,{children:"ms"})," \u76EE\u5F55\u5185\u5BB9\u5230\u65B0\u76EE\u5F55\uFF1A"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-shell",children:"cp -r ms recycler\n"})}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.em,{children:"\u914D\u7F6E"})}),"\n",(0,c.jsxs)(n.p,{children:["\u5728\u65B0\u76EE\u5F55\u7684\u914D\u7F6E\u6587\u4EF6\u4E2D\u4FEE\u6539 BRPC \u76D1\u542C\u7AEF\u53E3 ",(0,c.jsx)(n.code,{children:"brpc_listen_port"})," \u548C ",(0,c.jsx)(n.code,{children:"fdb_cluster"})," \u7684\u503C\u3002"]}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.em,{children:"\u542F\u52A8\u6570\u636E\u56DE\u6536\u529F\u80FD"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-Shell",children:"export JAVA_HOME=${path_to_jdk_17}\nbin/start.sh --recycler --daemon\n"})}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.em,{children:"\u542F\u52A8\u4EC5\u5143\u6570\u636E\u64CD\u4F5C\u529F\u80FD"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-Shell",children:"export JAVA_HOME=${path_to_jdk_17}\nbin/start.sh --meta-service --daemon\n"})}),"\n",(0,c.jsx)(n.h2,{id:"5-fe-\u548C-be-\u7684\u542F\u52A8\u6D41\u7A0B",children:"5. FE \u548C BE \u7684\u542F\u52A8\u6D41\u7A0B"}),"\n",(0,c.jsx)(n.p,{children:"\u672C\u8282\u8BE6\u7EC6\u8BF4\u660E\u4E86\u5728\u5B58\u7B97\u5206\u79BB\u67B6\u6784\u4E0B\u542F\u52A8 FE\uFF08Frontend\uFF09\u548C BE\uFF08Backend\uFF09\u7684\u6B65\u9AA4\u3002"}),"\n",(0,c.jsx)(n.h3,{id:"51-\u542F\u52A8\u987A\u5E8F",children:"5.1 \u542F\u52A8\u987A\u5E8F"}),"\n",(0,c.jsxs)(n.ol,{children:["\n",(0,c.jsx)(n.li,{children:"\u4EE5 MASTER \u89D2\u8272\u542F\u52A8\u5B9E\u4F8B\u7684\u7B2C\u4E00\u4E2A FE"}),"\n",(0,c.jsx)(n.li,{children:"\u5411\u5B9E\u4F8B\u4E2D\u6DFB\u52A0\u5176\u4ED6 FE \u548C BE"}),"\n",(0,c.jsx)(n.li,{children:"\u6DFB\u52A0\u7B2C\u4E00\u4E2A Storage Vault"}),"\n"]}),"\n",(0,c.jsx)(n.h3,{id:"52-\u542F\u52A8-master-\u89D2\u8272\u7684-fe",children:"5.2 \u542F\u52A8 MASTER \u89D2\u8272\u7684 FE"}),"\n",(0,c.jsx)(n.h4,{id:"521-\u914D\u7F6E-feconf",children:"5.2.1 \u914D\u7F6E fe.conf"}),"\n",(0,c.jsxs)(n.p,{children:["\u5728 ",(0,c.jsx)(n.code,{children:"fe.conf"})," \u6587\u4EF6\u4E2D\uFF0C\u9700\u8981\u914D\u7F6E\u4EE5\u4E0B\u5173\u952E\u53C2\u6570\uFF1A"]}),"\n",(0,c.jsxs)(n.ol,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.code,{children:"deploy_mode"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"\u63CF\u8FF0\uFF1A\u6307\u5B9A doris \u542F\u52A8\u6A21\u5F0F"}),"\n",(0,c.jsx)(n.li,{children:"\u683C\u5F0F\uFF1Acloud \u8868\u793A\u5B58\u7B97\u5206\u79BB\u6A21\u5F0F\uFF0C\u5176\u5B83\u5B58\u7B97\u4E00\u4F53\u6A21\u5F0F"}),"\n",(0,c.jsxs)(n.li,{children:["\u793A\u4F8B\uFF1A",(0,c.jsx)(n.code,{children:"cloud"})]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.code,{children:"cluster_id"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"\u63CF\u8FF0\uFF1A\u5B58\u7B97\u5206\u79BB\u67B6\u6784\u4E0B\u96C6\u7FA4\u7684\u552F\u4E00\u6807\u8BC6\u7B26\uFF0C\u4E0D\u540C\u7684\u96C6\u7FA4\u5FC5\u987B\u8BBE\u7F6E\u4E0D\u540C\u7684 cluster_id\u3002"}),"\n",(0,c.jsx)(n.li,{children:"\u683C\u5F0F\uFF1Aint \u7C7B\u578B"}),"\n",(0,c.jsxs)(n.li,{children:["\u793A\u4F8B\uFF1A\u53EF\u4EE5\u4F7F\u7528\u5982\u4E0B shell \u811A\u672C\u751F\u6210\u4E00\u4E2A\u968F\u673A id \u4F7F\u7528\u3002\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-shell",children:"echo $(($((RANDOM << 15)) | $RANDOM))\n"})}),"\n",(0,c.jsx)(n.admonition,{type:"caution",children:(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"\u4E0D\u540C\u7684\u96C6\u7FA4\u5FC5\u987B\u8BBE\u7F6E\u4E0D\u540C\u7684 cluster_id"})})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.code,{children:"meta_service_endpoint"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"\u63CF\u8FF0\uFF1AMeta Service \u7684\u5730\u5740\u548C\u7AEF\u53E3"}),"\n",(0,c.jsxs)(n.li,{children:["\u683C\u5F0F\uFF1A",(0,c.jsx)(n.code,{children:"IP\u5730\u5740:\u7AEF\u53E3\u53F7"})]}),"\n",(0,c.jsxs)(n.li,{children:["\u793A\u4F8B\uFF1A",(0,c.jsx)(n.code,{children:"127.0.0.1:5000"}),", \u53EF\u4EE5\u7528\u9017\u53F7\u5206\u5272\u914D\u7F6E\u591A\u4E2A meta service\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.h4,{id:"522-\u542F\u52A8-fe",children:"5.2.2 \u542F\u52A8 FE"}),"\n",(0,c.jsx)(n.p,{children:"\u542F\u52A8\u547D\u4EE4\u793A\u4F8B\uFF1A"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"bin/start_fe.sh --daemon\n"})}),"\n",(0,c.jsxs)(n.p,{children:["\u7B2C\u4E00\u4E2A FE \u8FDB\u7A0B\u521D\u59CB\u5316\u96C6\u7FA4\u5E76\u4EE5 FOLLOWER \u89D2\u8272\u5DE5\u4F5C\u3002\u4F7F\u7528 mysql \u5BA2\u6237\u7AEF\u8FDE\u63A5 FE \u4F7F\u7528 ",(0,c.jsx)(n.code,{children:"show frontends"})," \u786E\u8BA4\u521A\u624D\u542F\u52A8\u7684 FE \u662F master\u3002"]}),"\n",(0,c.jsx)(n.h3,{id:"53-\u6DFB\u52A0\u5176\u4ED6-fe-\u8282\u70B9",children:"5.3 \u6DFB\u52A0\u5176\u4ED6 FE \u8282\u70B9"}),"\n",(0,c.jsx)(n.p,{children:"\u5176\u4ED6\u8282\u70B9\u540C\u6837\u6839\u636E\u4E0A\u8FF0\u6B65\u9AA4\u4FEE\u6539\u914D\u7F6E\u6587\u4EF6\u5E76\u542F\u52A8\uFF0C\u4F7F\u7528 mysql \u5BA2\u6237\u7AEF\u8FDE\u63A5 Master \u89D2\u8272\u7684 FE\uFF0C\u5E76\u7528\u4EE5\u4E0B SQL \u547D\u4EE4\u6DFB\u52A0\u989D\u5916\u7684 FE \u8282\u70B9\uFF1A"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-sql",children:'ALTER SYSTEM ADD FOLLOWER "host:port";\n'})}),"\n",(0,c.jsxs)(n.p,{children:["\u5C06 ",(0,c.jsx)(n.code,{children:"host:port"})," \u66FF\u6362\u4E3A FE \u8282\u70B9\u7684\u5B9E\u9645\u5730\u5740\u548C\u7F16\u8F91\u65E5\u5FD7\u7AEF\u53E3\u3002\u66F4\u591A\u4FE1\u606F\u8BF7\u53C2\u89C1 ",(0,c.jsx)(n.a,{href:"../sql-manual/sql-statements/cluster-management/instance-management/ADD-FOLLOWER",children:"ADD FOLLOWER"})," \u548C ",(0,c.jsx)(n.a,{href:"../sql-manual/sql-statements/cluster-management/instance-management/ADD-OBSERVER",children:"ADD OBSERVER"}),"\u3002"]}),"\n",(0,c.jsx)(n.p,{children:"\u751F\u4EA7\u73AF\u5883\u4E2D\uFF0C\u8BF7\u786E\u4FDD\u5728 FOLLOWER \u89D2\u8272\u4E2D\u7684\u524D\u7AEF (FE) \u8282\u70B9\u603B\u6570\uFF0C\u5305\u62EC\u7B2C\u4E00\u4E2A FE\uFF0C\u4FDD\u6301\u4E3A\u5947\u6570\u3002\u4E00\u822C\u6765\u8BF4\uFF0C\u4E09\u4E2A FOLLOWER \u5C31\u8DB3\u591F\u4E86\u3002\u89C2\u5BDF\u8005\u89D2\u8272\u7684\u524D\u7AEF\u8282\u70B9\u53EF\u4EE5\u662F\u4EFB\u610F\u6570\u91CF\u3002"}),"\n",(0,c.jsx)(n.h3,{id:"54-\u6DFB\u52A0-be-\u8282\u70B9",children:"5.4 \u6DFB\u52A0 BE \u8282\u70B9"}),"\n",(0,c.jsx)(n.p,{children:"\u8981\u5411\u96C6\u7FA4\u6DFB\u52A0 Backend \u8282\u70B9\uFF0C\u8BF7\u5BF9\u6BCF\u4E2A Backend \u6267\u884C\u4EE5\u4E0B\u6B65\u9AA4\uFF1A"}),"\n",(0,c.jsx)(n.h4,{id:"541-\u914D\u7F6E-beconf",children:"5.4.1 \u914D\u7F6E be.conf"}),"\n",(0,c.jsxs)(n.p,{children:["\u5728 ",(0,c.jsx)(n.code,{children:"be.conf"})," \u6587\u4EF6\u4E2D\uFF0C\u9700\u8981\u914D\u7F6E\u4EE5\u4E0B\u5173\u952E\u53C2\u6570\uFF1A"]}),"\n",(0,c.jsxs)(n.ol,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.code,{children:"deploy_mode"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"\u63CF\u8FF0\uFF1A\u6307\u5B9A doris \u542F\u52A8\u6A21\u5F0F"}),"\n",(0,c.jsx)(n.li,{children:"\u683C\u5F0F\uFF1Acloud \u8868\u793A\u5B58\u7B97\u5206\u79BB\u6A21\u5F0F\uFF0C\u5176\u5B83\u5B58\u7B97\u4E00\u4F53\u6A21\u5F0F"}),"\n",(0,c.jsxs)(n.li,{children:["\u793A\u4F8B\uFF1A",(0,c.jsx)(n.code,{children:"cloud"})]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.code,{children:"file_cache_path"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\u63CF\u8FF0\uFF1A\u7528\u4E8E\u6587\u4EF6\u7F13\u5B58\u7684\u78C1\u76D8\u8DEF\u5F84\u548C\u5176\u4ED6\u53C2\u6570\uFF0C\u4EE5\u6570\u7EC4\u5F62\u5F0F\u8868\u793A\uFF0C\u6BCF\u4E2A\u78C1\u76D8\u4E00\u9879\u3002",(0,c.jsx)(n.code,{children:"path"})," \u6307\u5B9A\u78C1\u76D8\u8DEF\u5F84\uFF0C",(0,c.jsx)(n.code,{children:"total_size"})," \u9650\u5236\u7F13\u5B58\u7684\u5927\u5C0F\uFF1B-1 \u6216 0 \u5C06\u4F7F\u7528\u6574\u4E2A\u78C1\u76D8\u7A7A\u95F4\u3002"]}),"\n",(0,c.jsx)(n.li,{children:'\u683C\u5F0F\uFF1A[{"path":"/path/to/file_cache","total_size":21474836480},{"path":"/path/to/file_cache2","total_size":21474836480}]'}),"\n",(0,c.jsx)(n.li,{children:'\u793A\u4F8B\uFF1A[{"path":"/path/to/file_cache","total_size":21474836480},{"path":"/path/to/file_cache2","total_size":21474836480}]'}),"\n",(0,c.jsx)(n.li,{children:'\u9ED8\u8BA4\uFF1A[{"path":"${DORIS_HOME}/file_cache"}]'}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.h4,{id:"541-\u542F\u52A8\u548C\u6DFB\u52A0-be",children:"5.4.1 \u542F\u52A8\u548C\u6DFB\u52A0 BE"}),"\n",(0,c.jsxs)(n.ol,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:"\u542F\u52A8 Backend\uFF1A"}),"\n",(0,c.jsx)(n.p,{children:"\u4F7F\u7528\u4EE5\u4E0B\u547D\u4EE4\u542F\u52A8 Backend\uFF1A"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"bin/start_be.sh --daemon\n"})}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:"\u5C06 Backend \u6DFB\u52A0\u5230\u96C6\u7FA4\uFF1A"}),"\n",(0,c.jsx)(n.p,{children:"\u4F7F\u7528 MySQL \u5BA2\u6237\u7AEF\u8FDE\u63A5\u5230\u4EFB\u610F Frontend\uFF0C\u5E76\u6267\u884C\uFF1A"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-sql",children:'ALTER SYSTEM ADD BACKEND "<ip>:<heartbeat_service_port>" [PROTERTIES propertires];\n'})}),"\n",(0,c.jsxs)(n.p,{children:["\u5C06 ",(0,c.jsx)(n.code,{children:"<ip>"})," \u66FF\u6362\u4E3A\u65B0 Backend \u7684 IP \u5730\u5740\uFF0C\u5C06 ",(0,c.jsx)(n.code,{children:"<heartbeat_service_port>"})," \u66FF\u6362\u4E3A\u5176\u914D\u7F6E\u7684\u5FC3\u8DF3\u670D\u52A1\u7AEF\u53E3\uFF08\u9ED8\u8BA4\u4E3A 9050\uFF09\u3002"]}),"\n",(0,c.jsx)(n.p,{children:"\u53EF\u4EE5\u901A\u8FC7 PROPERTIES \u8BBE\u7F6E BE \u6240\u5728\u7684 \u8BA1\u7B97\u7EC4\u3002"}),"\n",(0,c.jsxs)(n.p,{children:["\u66F4\u8BE6\u7EC6\u7684\u7528\u6CD5\u8BF7\u53C2\u8003 ",(0,c.jsx)(n.a,{href:"../sql-manual/sql-statements/cluster-management/instance-management/ADD-BACKEND",children:"ADD BACKEND"})," \u548C ",(0,c.jsx)(n.a,{href:"../sql-manual/sql-statements/cluster-management/instance-management/DROP-BACKEND",children:"REMOVE BACKEND"}),"\u3002"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:"\u9A8C\u8BC1 Backend \u72B6\u6001\uFF1A"}),"\n",(0,c.jsxs)(n.p,{children:["\u68C0\u67E5 Backend \u65E5\u5FD7\u6587\u4EF6\uFF08",(0,c.jsx)(n.code,{children:"be.log"}),"\uFF09\u4EE5\u786E\u4FDD\u5B83\u5DF2\u6210\u529F\u542F\u52A8\u5E76\u52A0\u5165\u96C6\u7FA4\u3002"]}),"\n",(0,c.jsx)(n.p,{children:"\u60A8\u8FD8\u53EF\u4EE5\u4F7F\u7528\u4EE5\u4E0B SQL \u547D\u4EE4\u68C0\u67E5 Backend \u72B6\u6001\uFF1A"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-sql",children:"SHOW BACKENDS;\n"})}),"\n",(0,c.jsx)(n.p,{children:"\u8FD9\u5C06\u663E\u793A\u96C6\u7FA4\u4E2D\u6240\u6709 Backend \u53CA\u5176\u5F53\u524D\u72B6\u6001\u3002"}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"6-\u521B\u5EFA-storage-vault",children:"6. \u521B\u5EFA Storage Vault"}),"\n",(0,c.jsx)(n.p,{children:"Storage Vault \u662F Doris \u5B58\u7B97\u5206\u79BB\u67B6\u6784\u4E2D\u7684\u91CD\u8981\u7EC4\u4EF6\u3002\u5B83\u4EEC\u4EE3\u8868\u4E86\u5B58\u50A8\u6570\u636E\u7684\u5171\u4EAB\u5B58\u50A8\u5C42\u3002\u60A8\u53EF\u4EE5\u4F7F\u7528 HDFS \u6216\u517C\u5BB9 S3 \u7684\u5BF9\u8C61\u5B58\u50A8\u521B\u5EFA\u4E00\u4E2A\u6216\u591A\u4E2A Storage Vault\u3002\u53EF\u4EE5\u5C06 Storage Vault \u8BBE\u7F6E\u6210\u4E3A\u9ED8\u8BA4 Storage Vault\uFF0C\u7CFB\u7EDF\u8868\u548C\u672A\u6307\u5B9A Storage Vault \u7684\u8868\u90FD\u5C06\u5B58\u50A8\u5728\u8FD9\u4E2A\u9ED8\u8BA4 Storage Vault \u4E2D\u3002\u9ED8\u8BA4 Storage Vault \u4E0D\u80FD\u88AB\u5220\u9664\u3002\u4EE5\u4E0B\u662F\u4E3A\u60A8\u7684 Doris \u96C6\u7FA4\u521B\u5EFA Storage Vault \u7684\u65B9\u6CD5\uFF1A"}),"\n",(0,c.jsx)(n.h3,{id:"61-\u521B\u5EFA-hdfs--storage-vault",children:"6.1 \u521B\u5EFA HDFS  Storage Vault"}),"\n",(0,c.jsx)(n.p,{children:"\u8981\u4F7F\u7528 SQL \u521B\u5EFA Storage Vault\uFF0C\u8BF7\u4F7F\u7528 MySQL \u5BA2\u6237\u7AEF\u8FDE\u63A5\u5230\u60A8\u7684 Doris \u96C6\u7FA4"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-sql",children:'CREATE STORAGE VAULT IF NOT EXISTS hdfs_vault\n    PROPERTIES (\n    "type"="hdfs",\n    "fs.defaultFS"="hdfs://127.0.0.1:8020"\n    );\n'})}),"\n",(0,c.jsx)(n.h3,{id:"62-\u521B\u5EFA-s3--storage-vault",children:"6.2 \u521B\u5EFA S3  Storage Vault"}),"\n",(0,c.jsx)(n.p,{children:"\u8981\u4F7F\u7528\u517C\u5BB9 S3 \u7684\u5BF9\u8C61\u5B58\u50A8\u521B\u5EFA Storage Vault\uFF0C\u8BF7\u6309\u7167\u4EE5\u4E0B\u6B65\u9AA4\u64CD\u4F5C\uFF1A"}),"\n",(0,c.jsxs)(n.ol,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:"\u4F7F\u7528 MySQL \u5BA2\u6237\u7AEF\u8FDE\u63A5\u5230\u60A8\u7684 Doris \u96C6\u7FA4\u3002"}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:"\u6267\u884C\u4EE5\u4E0B SQL \u547D\u4EE4\u6765\u521B\u5EFA S3  Storage Vault\uFF1A"}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-sql",children:'CREATE STORAGE VAULT IF NOT EXISTS s3_vault\n    PROPERTIES (\n    "type"="S3",\n    "s3.endpoint"="s3.us-east-1.amazonaws.com",\n    "s3.access_key" = "ak",\n    "s3.secret_key" = "sk",\n    "s3.region" = "us-east-1",\n    "s3.root.path" = "ssb_sf1_p2_s3",\n    "s3.bucket" = "doris-build-1308700295",\n    "provider" = "S3"\n    );\n'})}),"\n",(0,c.jsxs)(n.p,{children:["\u8981\u5728\u5176\u4ED6\u5BF9\u8C61\u5B58\u50A8\u4E0A\u521B\u5EFA Storage Vault\uFF0C\u8BF7\u53C2\u8003 ",(0,c.jsx)(n.a,{href:"../sql-manual/sql-statements/cluster-management/storage-management/CREATE-STORAGE-VAULT",children:"\u521B\u5EFA Storage Vault "}),"\u3002"]}),"\n",(0,c.jsx)(n.h3,{id:"63-\u8BBE\u7F6E\u9ED8\u8BA4-storage-vault",children:"6.3 \u8BBE\u7F6E\u9ED8\u8BA4 Storage Vault"}),"\n",(0,c.jsx)(n.p,{children:"\u4F7F\u7528\u5982\u4E0B SQL \u8BED\u53E5\u8BBE\u7F6E\u4E00\u4E2A\u9ED8\u8BA4 Storage Vault\u3002"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-sql",children:"SET <storage_vault_name> AS DEFAULT STORAGE VAULT\n"})}),"\n",(0,c.jsx)(n.h2,{id:"7-\u6CE8\u610F\u4E8B\u9879",children:"7. \u6CE8\u610F\u4E8B\u9879"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\u4EC5\u5143\u6570\u636E\u64CD\u4F5C\u529F\u80FD\u7684 Meta Service \u8FDB\u7A0B\u5E94\u4F5C\u4E3A FE \u548C BE \u7684 ",(0,c.jsx)(n.code,{children:"meta_service_endpoint"})," \u914D\u7F6E\u76EE\u6807\u3002"]}),"\n",(0,c.jsxs)(n.li,{children:["\u6570\u636E\u56DE\u6536\u529F\u80FD\u8FDB\u7A0B\u4E0D\u5E94\u4F5C\u4E3A ",(0,c.jsx)(n.code,{children:"meta_service_endpoint"})," \u914D\u7F6E\u76EE\u6807\u3002"]}),"\n"]})]})}function h(e={}){let{wrapper:n}={...(0,d.a)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(o,{...e})}):o(e)}},250065:function(e,n,s){s.d(n,{Z:function(){return r},a:function(){return i}});var l=s(667294);let c={},d=l.createContext(c);function i(e){let n=l.useContext(d);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:i(e.components),l.createElement(d.Provider,{value:n},e.children)}}}]);