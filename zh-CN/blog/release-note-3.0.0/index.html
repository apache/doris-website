<!doctype html><html lang=zh-Hans-CN dir=ltr class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.6.3"><title data-rh=true>New milestone: Apache Doris 3.0 has been released - Apache Doris</title><meta data-rh=true name=viewport content="width=device-width,initial-scale=1.0"><meta data-rh=true name=twitter:card content=summary_large_image><meta data-rh=true property=og:url content=https://doris.apache.org/zh-CN/blog/release-note-3.0.0/><meta data-rh=true property=og:locale content=zh_Hans-CN><meta data-rh=true property=og:locale:alternate content=en_US><meta data-rh=true name=docusaurus_locale content=zh-CN><meta data-rh=true name=docusaurus_tag content=default><meta data-rh=true name=docsearch:language content=zh-CN><meta data-rh=true name=docsearch:docusaurus_tag content=default><meta data-rh=true property=og:title content="New milestone: Apache Doris 3.0 has been released - Apache Doris"><meta data-rh=true name=description content="Starting from version 3.X, Apache Doris supports a compute-storage decoupled mode inaddition to the compute-storage mode for cluster deployment. "><meta data-rh=true property=og:description content="Starting from version 3.X, Apache Doris supports a compute-storage decoupled mode inaddition to the compute-storage mode for cluster deployment. "><meta data-rh=true property=og:image content=https://doris.apache.org/zh-CN/images/3.0.0.jpeg><meta data-rh=true name=twitter:image content=https://doris.apache.org/zh-CN/images/3.0.0.jpeg><meta data-rh=true property=og:type content=article><meta data-rh=true property=article:published_time content=2024-10-15T00:00:00.000Z><meta data-rh=true property=article:tag content="Release Notes"><link data-rh=true rel=icon href=/zh-CN/images/favicon.ico><link data-rh=true rel=canonical href=https://doris.apache.org/zh-CN/blog/release-note-3.0.0/><link data-rh=true rel=alternate href=https://doris.apache.org/blog/release-note-3.0.0/ hreflang=en-US><link data-rh=true rel=alternate href=https://doris.apache.org/zh-CN/blog/release-note-3.0.0/ hreflang=zh-Hans-CN><link data-rh=true rel=alternate href=https://doris.apache.org/blog/release-note-3.0.0/ hreflang=x-default><script data-rh=true type=application/ld+json>{"@context":"https://schema.org","@id":"https://doris.apache.org/zh-CN/blog/release-note-3.0.0","@type":"BlogPosting","author":{"@type":"Person","name":"Apache Doris"},"datePublished":"2024-10-15T00:00:00.000Z","description":"Starting from version 3.X, Apache Doris supports a compute-storage decoupled mode inaddition to the compute-storage mode for cluster deployment. ","headline":"New milestone: Apache Doris 3.0 has been released","image":{"@id":"https://doris.apache.org/zh-CN/images/3.0.0.jpeg","@type":"ImageObject","caption":"title image for the blog post: New milestone: Apache Doris 3.0 has been released","contentUrl":"https://doris.apache.org/zh-CN/images/3.0.0.jpeg","url":"https://doris.apache.org/zh-CN/images/3.0.0.jpeg"},"isPartOf":{"@id":"https://doris.apache.org/zh-CN/blog","@type":"Blog","name":"Apache Doris - Blog | Latest news and events "},"keywords":[],"mainEntityOfPage":"https://doris.apache.org/zh-CN/blog/release-note-3.0.0","name":"New milestone: Apache Doris 3.0 has been released","url":"https://doris.apache.org/zh-CN/blog/release-note-3.0.0"}</script><link rel=alternate type=application/rss+xml href=/zh-CN/blog/rss.xml title="Apache Doris RSS Feed"><link rel=alternate type=application/atom+xml href=/zh-CN/blog/atom.xml title="Apache Doris Atom Feed"><link rel=preconnect href=https://analytics.apache.org/><script>var _paq=window._paq=window._paq||[];_paq.push(["setRequestMethod","POST"]),_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),_paq.push(["enableHeartBeatTimer"]),function(){var e="https://analytics.apache.org/";_paq.push(["setRequestMethod","POST"]),_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","43"]);var a=document,t=a.createElement("script"),p=a.getElementsByTagName("script")[0];t.type="text/javascript",t.async=!0,t.src=e+"matomo.js",p.parentNode.insertBefore(t,p)}()</script><link rel=stylesheet href=/css/katex.min.css><script src=/js/custom-script.js></script><script async src=https://widget.kapa.ai/kapa-widget.bundle.js data-website-id=a5fb90df-217a-4097-95c0-80490220314b data-modal-title="Apache Doris AI" data-project-name="Apache Doris Website" data-button-hide=true data-modal-override-open-selector=#navbar-ask-ai-btn data-project-logo=https://cdn.selectdb.com/static/doris_1_3c42247c63.png data-modal-image=https://cdn.selectdb.com/static/doris_logo_cc5a30d886.png data-project-color=#11A679 data-modal-disclaimer="This is a custom LLM with access to all [Doris documentation](https://doris.apache.org/docs/4.x/gettingStarted/what-is-apache-doris)." data-consent-required data-consent-screen-disclaimer="By clicking &amp;quot;I agree, let's chat&amp;quot;, you consent to the use of the AI assistant in accordance with kapa.ai's [Privacy Policy](https://www.kapa.ai/content/privacy-policy). This service uses reCAPTCHA, which requires your consent to Google's [Privacy Policy](https://policies.google.com/privacy) and [Terms of Service](https://policies.google.com/terms). By proceeding, you explicitly agree to both kapa.ai's and Google's privacy policies." data-bot-protection-mechanism=hcaptcha></script><link rel=stylesheet href=/zh-CN/assets/css/styles.927db6f2.css><script src=/zh-CN/assets/js/runtime~main.0e33774b.js defer></script><script src=/zh-CN/assets/js/main.d5f9a343.js defer></script><body class=navigation-with-keyboard><script>!function(){var t,e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t=null!==e?e:"light",document.documentElement.setAttribute("data-theme",t)}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id=__docusaurus><div role=region aria-label=跳到主要内容><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>跳到主要内容</a></div><nav aria-label=主导航 class="navbar navbar--fixed-top"><div class=navbar__inner><div class=navbar__items><div class=navbar-left><div class="navbar-logo-wrapper flex items-center"><a class=navbar__brand href=/zh-CN/><div class=navbar__logo><img src=/zh-CN/images/logo-doris.svg alt="Apache Doris" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src=/zh-CN/images/logo-doris.svg alt="Apache Doris" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a></div><div class=undefined><a href=/zh-CN/docs/4.x/gettingStarted/what-is-apache-doris/ class="navbar__item navbar__link" target=_blank>Docs</a><a aria-current=page class="navbar__item navbar__link navbar__link--active" href=/zh-CN/blog/>Blog</a><a class="navbar__item navbar__link" href=/zh-CN/users/>Users</a><a href=https://github.com/apache/doris/discussions target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">Discussions</a><a class="navbar__item navbar__link" href=/zh-CN/ecosystem/cluster-management/>Ecosystem</a><a class="navbar__item navbar__link" href=/zh-CN/events/>Events</a><a class="navbar__item navbar__link" href=/zh-CN/community/join-community/>Community</a><a class="navbar__item navbar__link" href=/zh-CN/vendors/>Vendors</a></div></div></div><div class="navbar__items navbar__items--right"><button class="rounded-full flex items-center gap-x-2 px-4 py-[5px] border border-primary bg-[#F0FFF7] text-[1rem]/[1.625rem] font-medium text-[#1D1D1D]" id=navbar-ask-ai-btn><svg width=18 height=18 viewBox="0 0 18 18" fill=none><path d="M7.35457 0.574461C7.42306 0.423027 7.5322 0.292956 7.67018 0.198317C7.80816 0.103677 7.96974 0.04807 8.13742 0.037509C8.30511 0.026948 8.47253 0.0618351 8.62158 0.138397C8.77063 0.21496 8.89564 0.330283 8.98308 0.471896L9.03778 0.574461L9.98672 2.68378C10.8161 4.52515 12.1952 6.07276 13.9397 7.11968L14.2337 7.28972L15.9197 8.2263C16.0536 8.30049 16.1666 8.40653 16.2484 8.53479C16.3302 8.66304 16.3783 8.80945 16.3882 8.96069C16.3981 9.11194 16.3696 9.26323 16.3052 9.40083C16.2408 9.53842 16.1426 9.65796 16.0195 9.74857L15.921 9.81064L14.2337 10.7472C12.454 11.7355 11.0224 13.2365 10.1303 15.0495L9.98672 15.3532L9.03641 17.4625C8.96778 17.6136 8.85866 17.7433 8.72081 17.8377C8.58296 17.9321 8.42162 17.9876 8.25418 17.9982C8.08674 18.0087 7.91956 17.9739 7.77066 17.8976C7.62177 17.8213 7.49681 17.7063 7.40926 17.565L7.35457 17.4625L6.40426 15.3532C5.57484 13.5118 4.19572 11.9643 2.45124 10.9173L2.15726 10.7472L0.471311 9.81064C0.337321 9.73674 0.224189 9.63093 0.142217 9.50285C0.0602439 9.37477 0.0120344 9.22849 0.00197753 9.07732C-0.00807937 8.92615 0.0203358 8.7749 0.0846359 8.63734C0.148936 8.49978 0.247078 8.38028 0.370127 8.28972L0.468577 8.22765L2.15589 7.29107C3.93569 6.30285 5.36732 4.80183 6.25932 2.98877L6.40289 2.68513L7.3532 0.57581L7.35457 0.574461ZM15.6899 0.130465C16.1425 1.14532 16.9145 1.98914 17.8914 2.53668C17.9244 2.55517 17.9518 2.58196 17.9709 2.61432C17.9899 2.64668 18 2.68345 18 2.72089C18 2.75833 17.9899 2.7951 17.9709 2.82745C17.9518 2.85981 17.9244 2.8866 17.8914 2.9051C16.9145 3.45264 16.1425 4.29645 15.6899 5.31131C15.6731 5.3501 15.645 5.38315 15.6093 5.40638C15.5736 5.4296 15.5317 5.44198 15.4889 5.44198C15.4462 5.44198 15.4043 5.4296 15.3686 5.40638C15.3329 5.38315 15.3048 5.3501 15.2879 5.31131C14.8352 4.29695 14.0632 3.45364 13.0865 2.90645C13.0532 2.88805 13.0255 2.86122 13.0062 2.82872C12.9869 2.79622 12.9767 2.75923 12.9767 2.72156C12.9767 2.68389 12.9869 2.6469 13.0062 2.6144C13.0255 2.58191 13.0532 2.55508 13.0865 2.53668C14.0636 1.98879 14.8357 1.14448 15.2879 0.129116C15.305 0.0907214 15.3331 0.0580664 15.3686 0.035138C15.4042 0.0122096 15.4458 0 15.4883 0C15.5308 0 15.5723 0.0122096 15.6079 0.035138C15.6435 0.0580664 15.6715 0.0907214 15.6886 0.129116V0.130465H15.6899Z" fill=#11A679 /></svg>Ask AI</button><a class="navbar__item navbar__link header-right-button-primary navbar-download-mobile" href=/zh-CN/download/>Download</a><a href=https://github.com/apache/doris target=_blank rel="noopener noreferrer" class="github-btn bg-[#F7FAFC] mr-1 group !no-underline ml-4 rounded-sm items-center justify-start desktop h-[2.25rem] w-[6.5rem]"><svg id=github-icon-new class="github-icon-new ml-[0.5rem]" width=22 height=22 viewBox="0 0 22 22" fill=none><path d="M11.0001 0.998095C5.47563 0.998095 1.00024 5.47348 1.00024 10.9979C1.00024 15.4224 3.86293 19.1606 7.83742 20.4851C8.33741 20.5723 8.52468 20.2733 8.52468 20.0105C8.52468 19.7724 8.51286 18.9851 8.51286 18.1478C6.00017 18.6106 5.35018 17.5351 5.15018 16.9733C5.03746 16.6851 4.55019 15.7979 4.12565 15.5606C3.77566 15.3724 3.27476 14.9106 4.11293 14.8979C4.90019 14.8852 5.4629 15.6224 5.65018 15.9233C6.55016 17.4351 7.98741 17.0106 8.56286 16.7479C8.65013 16.0979 8.91285 15.6606 9.20012 15.4106C6.9747 15.1606 4.65019 14.2979 4.65019 10.4725C4.65019 9.38524 5.03746 8.48526 5.67563 7.78527C5.57472 7.53527 5.22473 6.51074 5.77563 5.13531C5.77563 5.13531 6.61289 4.87349 8.52468 6.16074C9.33873 5.93489 10.1798 5.82141 11.0246 5.82348C11.8755 5.82348 12.7255 5.93529 13.5246 6.16074C15.4373 4.86076 16.2746 5.13531 16.2746 5.13531C16.8246 6.51074 16.4755 7.53527 16.3755 7.78527C17.0127 8.48526 17.4 9.37342 17.4 10.4725C17.4 14.3106 15.0628 15.1606 12.8373 15.4106C13.2001 15.7233 13.5128 16.3233 13.5128 17.2606C13.5128 18.5978 13.5001 19.6733 13.5001 20.0105C13.5001 20.2733 13.6873 20.5851 14.1873 20.4851C18.1373 19.1606 20.9999 15.4106 20.9999 10.9979C20.9999 5.47348 16.5255 0.998095 11.0001 0.998095Z" fill=#1D1D1D /></svg><span class="github-text ml-1 text-[1rem]/[137.5%] group-hover:text-primary text-[#252734] font-medium">Star Me</span></a><div class="gh-count text-[1rem]/[1rem]">15<!-- -->k</div><a href=https://doris.apache.org/slack target=_blank rel="noopener noreferrer" class="slack-btn desktop header-right-button-slack"></a><button aria-label=切换导航栏 aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class="header-right-button-primary navbar-download-desktop font-medium" href=/zh-CN/download/>Download</a></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="main-wrapper mainWrapper_eExm"><div class="mb-[4.875rem] container"><div class="lg:row lg:flex"><main class="col col--9 col--offset-1" itemscope itemtype=http://schema.org/Blog><article class=blog-article-content itemprop=blogPost itemscope itemtype=http://schema.org/BlogPosting><div id=__blog-post-container class=markdown itemprop=articleBody><header><div class="text-center mb-4"><a class="!text-[#8592A6] cursor-pointer hover:no-underline" href=/zh-CN/blog/>Blog</a><span class="px-2 text-[#8592A6]">/</span><span><span class=s-tags><span class=s-tag>Release Notes</span></span></span></div><h1 class="blog-post-title text-[2rem] leading-normal lg:!text-[2.5rem] text-center" itemprop=headline>New milestone: Apache Doris 3.0 has been released</h1><div class="blog-info text-center flex justify-center text-sm text-black"><span class=authors><span class="s-author text-black">Apache Doris</span></span><time datetime=2024-10-15T00:00:00.000Z itemprop=datePublished class="text-black ml-4">2024年10月15日</time></div></header><div id=__blog-post-container class=markdown itemprop=articleBody><p>We are excited to announce the release of Apache Doris 3.0!</p>
<p><strong>Starting from version 3.X, Apache Doris supports a compute-storage decoupled mode in addition to the compute-storage coupled mode for cluster deployment. With the cloud-native architecture that decouples the computation and storage layers, users can achieve physical isolation between query loads across multiple compute clusters, as well as isolation between read and write loads. Additionally, users can take advantage of low-cost shared storage systems such as object storage or HDFS to significantly reduce storage costs.</strong></p>
<p>Version 3.0 marks a milestone in the evolution of Apache Doris towards a unified data lake and data warehouse architecture. This version introduces the ability to write data back to data lakes, allowing users to perform data analysis, sharing, processing, and storage operations across multiple data sources within Apache Doris. With capabilities such as asynchronous materialized views, Apache Doris can serve as a unified data processing engine for enterprises, helping users better manage data across lakes, warehouses, and databases. Also, Apache Doris 3.0 introduces the Trino Connector. It allows users to quickly connect or adapt to more data sources, and leverage the high-performance compute engine of Doris to deliver faster query results than Trino.</p>
<p>Version 3.0 also enhances support for ETL batch processing scenarios, adding explicit transaction support for operations like <code>insert into select</code>, <code>delete</code> and <code>update</code>. The observability of query execution has also been improved.</p>
<p>In terms of performance, we have improved the framework capabilities, infrastructure, and rules of the query optimizer in version 3.0. This provides optimized performance, which has been proven by blind testing in more complex and diverse business scenarios.</p>
<p>The adaptive Runtime Filter computation method now accurately estimates filters based on data size during execution, delivering better performance under large data volumes and high loads. Additionally, asynchronous materialized view has been more stable and user-friendly in query acceleration and data modeling.</p>
<p><strong>During the development of version 3.0, over 200 contributors submitted nearly 5,000 optimizations</strong> and fixes to Apache Doris. Contributors from companies such as VeloDB, Baidu, Meituan, ByteDance, Tencent, Alibaba, Kwai, Huawei, and Tianyi Cloud actively collaborated with the community, contributing test cases from real-world use cases to help us improve Apache Doris. We extend our heartfelt thanks to all the contributors involved in the development, testing, and feedback process for this release.</p>
<ul>
<li>
<p><strong>GitHub</strong>: <a href=https://github.com/apache/doris/releases target=_blank rel="noopener noreferrer">https://github.com/apache/doris/releases</a></p>
</li>
<li>
<p><strong>Website</strong>: <a href=https://doris.apache.org/download target=_blank rel="noopener noreferrer">https://doris.apache.org/download</a></p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=1-compute-storage-decoupled-mode>1. Compute-storage decoupled mode<a href=#1-compute-storage-decoupled-mode class=hash-link aria-label="1. Compute-storage decoupled mode的直接链接" title="1. Compute-storage decoupled mode的直接链接">​</a></h2>
<p>Since V3.0, Apache Doris supports the compute-storage decoupled mode. Users can choose between it and the compute-storage coupled mode during cluster deployment.</p>
<p>In the compute-storage decoupled mode, the BE nodes no longer store the data, but instead, a shared storage layer (HDFS and object storage) is introduced as the shared data storage layer. The computing and storage resources can be scaled independently, bringing multiple benefits to users:</p>
<ul>
<li>
<p><strong>Workload isolation</strong>: Multiple compute clusters can share the same data, allowing users to isolate different business workloads or offline loads using separate compute clusters.</p>
</li>
<li>
<p><strong>Reduced storage costs</strong>: The full dataset is stored in the more cost-effective and highly reliable shared storage, with only hot data cached locally. Compared to the compute-storage coupled mode with three data replicas, the storage cost can be reduced by up to 90%.</p>
</li>
<li>
<p><strong>Elastic computing resources</strong>: Since no data is stored on the BE nodes, the computing resources can be scaled flexibly based on the load requirements. Users can scale in or out an individual compute cluster or increase/decrease the number of compute clusters. This also leads to cost savings.</p>
</li>
<li>
<p><strong>Improved system robustness</strong>: By storing the data in shared storage, Doris no longer needs to handle the complex logic of multi-replica consistency, thus simplifying distributed storage complexity and improving the overall system robustness.</p>
</li>
<li>
<p><strong>Flexible data sharing and cloning</strong>: The flexibility of the compute-storage decoupled mode extends beyond a single Doris cluster. Tables from one Doris cluster can be easily cloned to another Doris cluster, with just metadata replication.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=1-1-from-coupled-to-decoupled>1-1. From coupled to decoupled<a href=#1-1-from-coupled-to-decoupled class=hash-link aria-label="1-1. From coupled to decoupled的直接链接" title="1-1. From coupled to decoupled的直接链接">​</a></h3>
<p>In the compute-storage coupled mode, the Apache Doris architecture consists of two main process types: Frontend (FE) and Backend (BE). The FE is primarily responsible for user request access, query parsing and planning, metadata management, and node management. The BE is responsible for data storage and query plan execution.</p>
<p>The BE nodes employ an MPP (Massively Parallel Processing) distributed computing architecture, leveraging a multi-replica consistency protocol to ensure high service availability and high data reliability.</p>
<p><img decoding=async loading=lazy alt="From coupled to decoupled" src=/zh-CN/assets/images/storage-compute-decoupled-0c53e0b9a7c24a42e2dd2517680b0f5e.PNG width=1280 height=612 class=img_ev3q></p>
<p>The maturation of emerging cloud computing infrastructure, including public clouds, private clouds, and Kubernetes-based container platforms, has driven the need for cloud-native capabilities. Increasingly, users are seeking deeper integration between Apache Doris and cloud computing infrastructure to provide more elasticity.</p>
<p><strong>To address this need, the VeloDB team has designed and implemented a cloud-native version of Apache Doris that decouples compute and storage, known as VeloDB Cloud.  After extensive production testing and refinement across hundreds of enterprises over a long time, this cloud-native solution has now been contributed to the Apache Doris community, manifesting as the Apache Doris 3.0 in the compute-storage decoupled mode.</strong></p>
<p>In the compute-storage decoupled mode, the Apache Doris architecture consists of three layers:</p>
<ul>
<li><strong>Meta data layer</strong>: A new Meta Service module has been introduced to provide meta data services, such as processing database and table information, schemas, rowset meta, and transactions. The Meta Service is stateless and horizontally scalable. In V3.0, all of the BE's meta data and parts of the FE's meta data have been migrated to the Meta Service. We will finish the migration of the remains in future versions.</li>
<li><strong>Computation layer</strong>: The stateless BE nodes execute query plans and cache a portion of the data and tablet meta data locally to improve query performance. Multiple stateless BE nodes can be organized into a computing resource pool (i.e., compute cluster), and multiple compute clusters can share the same data and metadata service. The compute clusters can be elastically scaled by adding or removing nodes as needed.</li>
<li><strong>Shared storage layer</strong>: Data is persisted to the shared storage layer, which currently supports HDFS as well as various cloud-based object storage systems that are compatible with the S3 protocol, such as S3, OSS, GCS, Azure Blob, COS, BOS, and MinIO.</li>
</ul>
<p><img decoding=async loading=lazy alt="From coupled to decoupled-2" src=/zh-CN/assets/images/storage-compute-decoupled-2-82623382fce78f63315a2a07bb0e327a.JPEG width=1280 height=692 class=img_ev3q></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=1-2-design-highlight>1-2 Design highlight<a href=#1-2-design-highlight class=hash-link aria-label="1-2 Design highlight的直接链接" title="1-2 Design highlight的直接链接">​</a></h3>
<p>The design of the compute-storage decoupled mode of Apache Doris highlights the transformation of the FE's in-memory metadata model into a shared metadata service. This approach offers a globally consistent state view, allowing any node to directly submit writes without needing to go through the FE for publishing. During write operations, data is stored in shared storage, while metadata is managed by the metadata service. <strong>This effectively controls the number of small files in shared storage. Meanwhile, the real-time write performance for individual tables is nearly on par with that in the compute-storage coupled mode. The system's overall write capacity is no longer limited by the processing power of a single FE node.</strong></p>
<p><img decoding=async loading=lazy alt="Design highlight" src=/zh-CN/assets/images/design-hightlight-c14acd87500c4ada3740cb8fddfca025.PNG width=1280 height=545 class=img_ev3q></p>
<p>Based on the globally consistent state view, for data garbage collection, we have adopted a design approach for data deletion that is easier to prove correct and more efficient.</p>
<p>Specifically, data in the shared storage is incorporated into the globally consistent view offered by the shared meta data service. Whenever data is generated, we bind it to a separate, independent transaction. Similarly, for a meta data deletion operation, we also bind it to a separate, independent transaction. The purpose of this approach is to ensure that deletion and write operations cannot succeed together. The view records which data needs to be deleted, and the asynchronous deletion process can simply perform a forward deletion of the data based on the transaction records, without the need for reverse garbage collection.</p>
<p>As the tablet-related meta data in the FE is gradually migrated to the shared meta data service, the scalability of the Doris cluster will no longer be constrained by the memory capacity of a single FE node. Building upon the shared meta data service and the forward data deletion technique, we can conveniently expand functionality such as data sharing and lightweight cloning.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=1-3-comparison-with-alternative-solutions>1-3 Comparison with alternative solutions<a href=#1-3-comparison-with-alternative-solutions class=hash-link aria-label="1-3 Comparison with alternative solutions的直接链接" title="1-3 Comparison with alternative solutions的直接链接">​</a></h3>
<p>Another design of decoupling compute and storage in the industry is to store the data and BE node meta data in a shared object storage or HDFS. However, this approach brings the following problems:</p>
<ul>
<li>
<p><strong>Inability to support real-time writes</strong>: During data writes, the data is mapped to tablets based on the partitioning and bucketing rules, generating segment files and rowset meta data. During the write process, a two-phase commit (Publish) is performed through the FE. When a BE node receives the Publish request, it then sets the rowset as visible. The Publish operation must not fail. If the rowset meta data is stored in the shared storage, the total small file data during the real-time write process would triple the size of the actual data files - one replica of data files, one for rowset meta data, and another for rowset meta data changes during Publish. The Publish operation is driven by a single FE node, so the write capacity of a single table or even the entire system is limited by the FE node's capabilities.</p>
<p><img decoding=async loading=lazy alt="Comparison with alternative solutions" src=/zh-CN/assets/images/comparison-with-alternative-solutions-0b9bb94e642a30c74325b50b7e4a0856.png width=1280 height=491 class=img_ev3q></p>
<p>We compared the real-time data write performance of Apache Doris 3.0 with the above-described solution. We simulated 500 concurrent tasks writing 10,000 data files with 500 rows each, and 50 concurrent tasks writing 250 data files with 20,000 rows each, using the same computational resources.</p>
<p><strong>The results showed that at 50 concurrent tasks, the micro-batch write performances of Apache Doris in both compute-storage coupled and decoupled modes were almost identical, while the industry solution lagged behind Apache Doris by a factor of 100.</strong></p>
<p>At 500 concurrent tasks, the performance of Apache Doris in the compute-storage decoupled mode showed slight degradation, but it still maintained an 11X advantage over the industry solution. To ensure a fair test, Apache Doris did not enable the Group Commit feature (which the industry solution lacks). Enabling Group Commit would further enhance real-time write performance.</p>
<p><img decoding=async loading=lazy alt="Comparison with alternative solutions" src=/zh-CN/assets/images/real-time-write-performance.-e3ac58a309c1bb48d6e54669cbedb92c.png width=1280 height=734 class=img_ev3q></p>
<p>Additionally, the industry solution also faces stability and cost issues in terms of real-time data ingestion:</p>
<ul>
<li>
<p>Stability concerns: A large number of small files can put pressure on the shared storage, especially HDFS, and introduce stability risks.</p>
</li>
<li>
<p>High object storage request costs: Some public cloud object storage services charge 10 times more for Put and Delete operations compared to Get operations. A large number of small files can lead to a significant increase in object storage request costs, which can even exceed the storage costs.</p>
</li>
</ul>
</li>
<li>
<p><strong>Limited scalability</strong>: Use cases of the compute-storage decoupled model often handles larger data storage sizes, since the FE (Frontend) meta data is entirely in-memory, when the number of tablets reaches a certain high level (e.g. tens of millions), the FE's memory pressure can become a bottleneck that limits the overall write throughput of the system.</p>
</li>
<li>
<p><strong>Potential data deletion logic issues</strong>: In the compute-storage decoupled architecture, data is stored with one single replica. Therefore, the data deletion logic is critical for the system's reliability. The conventional approach of cross-system data deletion by comparing the differences can be challenging. During the write process, there is no way to completely avoid deletion and write from succeeding together, which can lead to data loss. Additionally, when the storage system experiences anomalies, the input used for difference calculation may be incorrect, which potentially leads to unintended data deletion.</p>
</li>
<li>
<p><strong>Data sharing and lightweight cloning</strong>: The flexibility of the decoupled storage-compute architecture can enable future data sharing and lightweight data cloning, reducing the burden of enterprise data management. However, if each cluster has a separate FE, after cloning data across clusters, it becomes difficult to accurately determine which data is no longer referenced and can be safely deleted, as calculating cross-cluster references can easily lead to unintended data deletion.</p>
</li>
</ul>
<p>By evolving the FE's full in-memory meta data model into a shared meta data service, Apache Doris 3.0 avoids all the aforementioned issues.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=1-4-query-performance-comparison>1-4 Query performance comparison<a href=#1-4-query-performance-comparison class=hash-link aria-label="1-4 Query performance comparison的直接链接" title="1-4 Query performance comparison的直接链接">​</a></h3>
<p>In the compute-storage decoupled mode, data needs to be read from the remote shared storage system, the main bottleneck has become the network bandwidth instead of the disk I/O in the compute-storage coupled mode.</p>
<p>To accelerate data access, Apache Doris has implemented a high-speed caching mechanism based on local disks, and provides two cache management policies: LRU (Least Recently Used) and TTL (Time-To-Live). The newly imported data is asynchronously written to the cache to accelerate the first-time access to the latest data. If the data required by a query is not in the cache, the system will read the data from the remote storage into memory and synchronously write it to the cache for subsequent queries.</p>
<p>In use cases involving multiple compute clusters, Apache Doris provides a cache preheating function. When a new compute cluster is established, users can choose to preheat specific data (such as tables or partitions) to further improve query efficiency.</p>
<p>In this context, we have conducted performance tests with different caching strategies in both the compute-storage coupled and decoupled modes, using the TPC-DS 1TB test dataset. The results are concluded as follows:</p>
<ul>
<li>
<p>When the cache is fully hit (i.e., all the data required for the query is loaded into the cache), <strong>the query performance of the compute-storage decoupled mode is on par with that of the compute-storage coupled mode</strong>.</p>
</li>
<li>
<p>When the cache is partially hit (i.e., the cache is cleared before the test, and data is gradually loaded into the cache during the test, with performance continuously improving), the query performance of the compute-storage decoupled mode is about 10% lower than that of the compute-storage coupled mode. This test scenario is the most similar to the real-life use cases.</p>
</li>
<li>
<p>When the cache is completely missed (i.e., the cache is cleared before every SQL execution, simulating an extreme case), the performance loss is around 35%. <strong>Even so, Apache Doris in the compute-storage decoupled mode delivers much higher performance than its alternative solutions.</strong></p>
</li>
</ul>
<p><img decoding=async loading=lazy alt="Query performance comparison" src=/zh-CN/assets/images/query-performance-comparison-796eaa4e76522d5b967b4117c8f71963.png width=1280 height=717 class=img_ev3q></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=1-5-write-speed-comparison>1-5 Write speed comparison<a href=#1-5-write-speed-comparison class=hash-link aria-label="1-5 Write speed comparison的直接链接" title="1-5 Write speed comparison的直接链接">​</a></h3>
<p>In terms of write performance, we have simulated two test cases under the same computing resources: batch import and high-concurrency real-time import. The comparison of write performance between the compute-storage coupled mode and the compute-storage decoupled mode is as follows:</p>
<ul>
<li>
<p><strong>Batch import</strong>: When importing the 1TB TPC-H and 1TB TPC-DS test datasets, <strong>the write performance of the compute-storage decoupled mode is 20.05% and 27.98% higher than the compute-storage coupled mode</strong>, respectively, under the single-replica configuration. During batch import, the segment file size is generally in the range of tens to hundreds of MB. In the compute-storage decoupled mode, the segment files are split into smaller files and concurrently uploaded to the object storage, which can result in higher throughput compared to writing to local disks. In real-life deployments, the compute-storage coupled mode typically uses three replicas, which means the write speed advantage of the compute-storage decoupled mode will be even more pronounced.</p>
</li>
<li>
<p><strong>High-concurrency real-time import</strong>: as described in the "Comparison with alternative solutions" section.</p>
</li>
</ul>
<p><img decoding=async loading=lazy alt="Write speed comparison" src=/zh-CN/assets/images/write-speed-comparison-e450974dbcba7200a9afc3c7b48b7329.png width=1280 height=772 class=img_ev3q></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=1-6-tips-for-production-environment>1-6 Tips for production environment<a href=#1-6-tips-for-production-environment class=hash-link aria-label="1-6 Tips for production environment的直接链接" title="1-6 Tips for production environment的直接链接">​</a></h3>
<ul>
<li>
<p><strong>Performance</strong>: For real-time data analysis, users can achieve query performance comparable to the compute-storage coupled mode by specifying a TTL (Time-To-Live) for the cache and writing newly ingested data into the cache. To prevent query jitter, users can cache the data generated by background tasks such as compaction and schema changes based on how frequently used the data is.</p>
</li>
<li>
<p><strong>Workload isolation</strong>: Users can achieve physical resource isolation for different business using multiple compute clusters. For workload isolation within a single compute cluster, users can utilize the Workload Group mechanism to limit and isolate resources for different queries.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=1-7-notes>1-7 Notes<a href=#1-7-notes class=hash-link aria-label="1-7 Notes的直接链接" title="1-7 Notes的直接链接">​</a></h3>
<ul>
<li>
<p>Apache Doris 3.0 does not support the co-existence of the compute-storage coupled mode and the compute-storage decoupled mode. Users need to specify one of them during cluster deployment.</p>
</li>
<li>
<p>If users need the compute-storage coupled mode, following the <a href=https://doris.apache.org/docs/3.0/install/source-install/compilation-with-docker/ target=_blank rel="noopener noreferrer">documentation</a> for its deployment and upgrade. We recommend using Doris Manager for quick deployment and cluster upgrades. However, the compute-storage decoupled mode does not yet support Doris Manager deployment and upgrade. We will continue iteration for better support in future versions.</p>
</li>
<li>
<p>Currently Apache Doris does not support in-place upgrade from V2.1 to the compute-storage decoupled mode of V3.0. For such purpose, users need to perform data migration after deploying the compute-storage decoupled clusters. In the future, we will support migration without service interruption through the CCR (Change Data Capture) capability.</p>
</li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_Gfwi alert alert--info"><div class=admonitionHeading_f1Ed>信息</div><div class=admonitionContent_UjKb><p>See doc:
<a href=https://doris.apache.org/docs/3.0/compute-storage-decoupled/overview/ target=_blank rel="noopener noreferrer">https://doris.apache.org/docs/3.0/compute-storage-decoupled/overview/</a></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=2-data-lakehouse>2. Data lakehouse<a href=#2-data-lakehouse class=hash-link aria-label="2. Data lakehouse的直接链接" title="2. Data lakehouse的直接链接">​</a></h2>
<p>Apache Doris is positioned as a real-time data warehouse, but it is much more than that. In previous versions, we have consistently pushed beyond the boundaries of traditional data warehouse capabilities, advancing towards a unified data lakehouse. Version 3.0 marks a milestone in this journey, with its capabilities in the lakehouse architecture becoming fully mature. We believe that a unified lakehouse is identified by <strong>boundaryless data</strong> and <strong>lakehouse fusion</strong>:</p>
<p><strong>Boundaryless data: Apache Doris serves as a unified query processing engine, breaking down data barriers across different systems. It provides a consistent and ultra-fast analysis experience across all data sources, including data warehouses, data lakes, data streams, and local data files.</strong></p>
<ul>
<li>
<p><strong>Lakehouse query acceleration</strong>: Without the need to migrate data to Apache Doris, users can leverage Doris’ efficient query engine to directly query data stored in data lakes such as Iceberg, Hudi, Paimon, and offline data warehouses like Hive, thereby accelerating query analysis.</p>
</li>
<li>
<p><strong>Federated analysis</strong>: By extending its catalog and storage plugins, Apache Doris enhances its federated analysis capabilities, allowing users to perform unified analysis across multiple heterogeneous data sources without physically centralizing the data in a single storage system. This enables external table queries and federated joins between internal and external tables, breaking down data silos and providing globally consistent data insights.</p>
</li>
<li>
<p><strong>Data lake construction</strong>: Apache Doris introduces write-back functionality for Hive and Iceberg, allowing users to directly create Hive and Iceberg tables through Doris and write data into them. This allows users to write internal table data back to the offline lakehouse or process offline lakehouse data using Doris and save the results back into the lakehouse, simplifying and streamlining the data lake construction process.</p>
</li>
</ul>
<p><strong>Lakehouse fusion: As data lake architectures become increasingly complex, the costs of technology selection and maintenance rise for users. Achieving consistent fine-grained access control across multiple systems also becomes challenging, and real-time performance suffers. To address this, Apache Doris integrates core features of the data lake, transforming itself into a lightweight, efficient, native real-time lakehouse.</strong></p>
<ul>
<li>
<p><strong>Real-time data updates</strong>: Starting with version 1.2, Apache Doris enhanced the primary key model by introducing Merge-on-Write, supporting real-time updates. This feature allows high-frequency, real-time data updates based on primary key changes from upstream data sources.</p>
</li>
<li>
<p><strong>Data science and</strong> <strong>AI</strong> <strong>computation support</strong>: From version 2.1, Apache Doris, using the efficient Arrow Flight protocol, increased the openness of its storage system and its support for various compute loads, enabling data science and AI computations.</p>
</li>
<li>
<p><strong>Enhancements for semi-structured and unstructured Data</strong>: Apache Doris has introduced support for data types like Array, Map, Struct, JSON, and Variant, with plans to support vector indexing in the future.</p>
</li>
<li>
<p><strong>Improved resource efficiency by decoupling storage and compute</strong>: With version 3.0, Apache Doris supports a decoupled storage and compute mode, further improving resource efficiency and scalability.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=2-1-faster-queries-in-the-data-lakehouse>2-1 Faster queries in the data lakehouse<a href=#2-1-faster-queries-in-the-data-lakehouse class=hash-link aria-label="2-1 Faster queries in the data lakehouse的直接链接" title="2-1 Faster queries in the data lakehouse的直接链接">​</a></h3>
<p>TPC-H and TPC-DS benchmarking proves that Apache Doris achieves average query performance that is 3 to 5 times faster than Trino/Presto.</p>
<p>In V3.0, we have focused on optimizing query performance for production environments, including:</p>
<ul>
<li>
<p><strong>More granular task splitting strategy</strong>: By adjusting the consistent hashing algorithm and introducing a task sharding weighting mechanism, we ensure balanced query loads across all nodes.</p>
</li>
<li>
<p><strong>Scheduling optimizations for use cases with numerous partitions and files</strong>: For cases with a large number of files (over 1 million), we have largely reduced query latency (from 100 seconds to 10 seconds) and alleviated memory pressure on the Frontend (FE) by asynchronously and batch-fetching file shards.</p>
</li>
</ul>
<p>We will continue to specifically enhance query acceleration performance in real-world business scenarios, improve the actual user experience, and build an industry-leading lakehouse query acceleration engine.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=2-2-federated-analysis-more-data-connectors>2-2 Federated analysis: more data connectors<a href=#2-2-federated-analysis-more-data-connectors class=hash-link aria-label="2-2 Federated analysis: more data connectors的直接链接" title="2-2 Federated analysis: more data connectors的直接链接">​</a></h3>
<p>Previous versions of Apache Doris support connectors for over 10 mainstream data lakehouses, warehouses, and relational databases. In V3.0, we have introduced the Trino Connector compatibility framework, which expands the range of data sources that Apache Doris can connect to. With this framework, users can easily adapt their existing setups to access corresponding data sources using Doris and leverage its high-speed computing engine for data analysis.</p>
<p>Currently, Doris has completed adaptations for Delta Lake, Kudu, BigQuery, Kafka, TPCH, and TPCDS. We also encourage contributions from developers to prolong this list.</p>
<div class="theme-admonition theme-admonition-info admonition_Gfwi alert alert--info"><div class=admonitionHeading_f1Ed>Note</div><div class=admonitionContent_UjKb><p>See doc:<ul>
<li>
<p>Trino Connector: <a href=https://doris.apache.org/community/how-to-contribute/trino-connector-developer-guide/ target=_blank rel="noopener noreferrer">https://doris.apache.org/community/how-to-contribute/trino-connector-developer-guide/</a></p>
</li>
<li>
<p>TPC-H: <a href=https://doris.apache.org/docs/3.0/lakehouse/datalake-analytics/tpch/ target=_blank rel="noopener noreferrer">https://doris.apache.org/docs/3.0/lakehouse/datalake-analytics/tpch/</a></p>
</li>
<li>
<p>TPC-DS: <a href=https://doris.apache.org/docs/3.0/lakehouse/datalake-analytics/tpcds/ target=_blank rel="noopener noreferrer">https://doris.apache.org/docs/3.0/lakehouse/datalake-analytics/tpcds/</a></p>
</li>
<li>
<p>Delta Lake: <a href=https://doris.apache.org/docs/3.0/lakehouse/datalake-analytics/deltalake/ target=_blank rel="noopener noreferrer">https://doris.apache.org/docs/3.0/lakehouse/datalake-analytics/deltalake/</a></p>
</li>
<li>
<p>Kudu: <a href=https://doris.apache.org/docs/3.0/lakehouse/datalake-analytics/kudu/ target=_blank rel="noopener noreferrer">https://doris.apache.org/docs/3.0/lakehouse/datalake-analytics/kudu/</a></p>
</li>
<li>
<p>BigQuery: <a href=https://doris.apache.org/docs/3.0/lakehouse/datalake-analytics/bigquery/ target=_blank rel="noopener noreferrer">https://doris.apache.org/docs/3.0/lakehouse/datalake-analytics/bigquery/</a></p>
</li>
</ul></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=2-3-data-lake-building>2-3 Data lake building<a href=#2-3-data-lake-building class=hash-link aria-label="2-3 Data lake building的直接链接" title="2-3 Data lake building的直接链接">​</a></h3>
<p>In V3.0, we have introduced data writeback functionality for Hive and Iceberg. This allows users to create Hive and Iceberg tables directly through Doris and write data into these tables, and enables users to perform data analysis, sharing, processing, and storage operations across multiple data sources within Doris.</p>
<p>In future iterations, Apache Doris will further enhance support for data lake table formats and improve the openness of storage APIs.</p>
<div class="theme-admonition theme-admonition-info admonition_Gfwi alert alert--info"><div class=admonitionHeading_f1Ed>Note</div><div class=admonitionContent_UjKb><p>See doc: <a href=https://doris.apache.org/docs/3.0/lakehouse/datalake-building/hive-build/ target=_blank rel="noopener noreferrer">https://doris.apache.org/docs/3.0/lakehouse/datalake-building/hive-build/</a></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=3-upgraded-semi-structured-data-analysis-capabilities>3. Upgraded semi-structured data analysis capabilities<a href=#3-upgraded-semi-structured-data-analysis-capabilities class=hash-link aria-label="3. Upgraded semi-structured data analysis capabilities的直接链接" title="3. Upgraded semi-structured data analysis capabilities的直接链接">​</a></h2>
<p>In versions 2.0 and 2.1, Apache Doris introduced some well-embraced features such as inverted index, NGram Bloom Filter, and Variant data type to support high-performance full-text search and multi-dimensional analysis. With them, the storage and processing of complex semi-structured data have been more flexible and efficient.</p>
<p>In V3.0, we have further enhanced the capabilities in this scenario.</p>
<p>After extensive testing in production environments, the Variant data type has gained sufficient stability and become the preferred choice for JSON data storage and analysis. In V3.0, we have made multiple optimizations to it:</p>
<ul>
<li>
<p>Support for indexing of the Variant data type to accelerate queries, including inverted index, Bloom Filter index, and the built-in ZoneMap index.</p>
</li>
<li>
<p>Support for flexible partial column updates for Unique Key tables containing the Variant data type.</p>
</li>
<li>
<p>Support for the use of the Variant data type in the compute-storage decoupled mode, with optimizations of its metadata storage.</p>
</li>
<li>
<p>Support for exporting the Variant data type to formats such as Parquet and CSV.</p>
</li>
</ul>
<p>The inverted index, introduced since V2.0, has reached a high level of maturity after more than a year of refinement and is now running in production environments of hundreds of enterprises. In V3.0, we have made multiple optimizations to the inverted index:</p>
<ul>
<li>
<p>After performance optimizations, including lock concurrency, Apache Doris outperforms Elasticsearch in key metrics such as query latency and concurrency in real-time reporting analysis.</p>
</li>
<li>
<p>Optimized index file in the compute-storage decoupled mode to reduce remote storage calls and decrease index query latency.</p>
</li>
<li>
<p>Support for the Array data type to accelerate the <code>array_contains</code> queries.</p>
</li>
<li>
<p>Enhanced the <code>match_phrase_*</code> functionality, including support for slop and phrase prefix matching <code>match_phrase_prefix</code>.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=4-enhanced-etl-capabilities>4. Enhanced ETL capabilities<a href=#4-enhanced-etl-capabilities class=hash-link aria-label="4. Enhanced ETL capabilities的直接链接" title="4. Enhanced ETL capabilities的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=4-1-transaction-improvements>4-1. Transaction improvements<a href=#4-1-transaction-improvements class=hash-link aria-label="4-1. Transaction improvements的直接链接" title="4-1. Transaction improvements的直接链接">​</a></h3>
<p>Data processing in data warehouses often involves multiple data changes that need to be handled as a single transaction. V3.0 provides explicit transaction support for <code>insert into select</code>, <code>delete</code>, and <code>update</code> operations. Example cases include:</p>
<ul>
<li>
<p><strong>Transactional requirements</strong>: For example, when updating data within a time range, the typical approach is to first delete the data in that time range, and then insert the new data. Considering that the data might already be in service, there is a need to ensure that queries visit either the old data or the new data. Thus, it can be achieved by executing the <code>delete</code> and <code>insert into select</code> operations in a transaction.</p>
<div class="language-Java language-java codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#F8F8F2;--prism-background-color:#282A36><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-java codeBlock_bY9V thin-scrollbar" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_e6Vv><span class=token-line style=color:#F8F8F2><span class="token constant" style="color:rgb(189, 147, 249)">BEGIN</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token constant" style="color:rgb(189, 147, 249)">DELETE</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">FROM</span><span class="token plain"> table </span><span class="token constant" style="color:rgb(189, 147, 249)">WHERE</span><span class="token plain"> date </span><span class="token operator">>=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"2024-07-01"</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">AND</span><span class="token plain"> date </span><span class="token operator">&lt;=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"2024-07-31"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token constant" style="color:rgb(189, 147, 249)">INSERT</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">INTO</span><span class="token plain"> table </span><span class="token constant" style="color:rgb(189, 147, 249)">SELECT</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><span class="token class-name">FROM</span><span class="token plain"> stage_table</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token constant" style="color:rgb(189, 147, 249)">COMMIT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Simplified the processing of failed tasks</strong>: For example, when two <code>insert into select</code> operations are executed within a single transaction, if any of the operations fail, it can be retried directly.</p>
<div class="language-Java language-java codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#F8F8F2;--prism-background-color:#282A36><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-java codeBlock_bY9V thin-scrollbar" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_e6Vv><span class=token-line style=color:#F8F8F2><span class="token constant" style="color:rgb(189, 147, 249)">BEGIN</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">WITH</span><span class="token plain"> </span><span class="token class-name">LABEL</span><span class="token plain"> label_etl_1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token constant" style="color:rgb(189, 147, 249)">INTO</span><span class="token plain"> table1 </span><span class="token constant" style="color:rgb(189, 147, 249)">SELECT</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><span class="token class-name">FROM</span><span class="token plain"> stage_table1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token constant" style="color:rgb(189, 147, 249)">INSERT</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">INTO</span><span class="token plain"> table </span><span class="token constant" style="color:rgb(189, 147, 249)">SELECT</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><span class="token class-name">FROM</span><span class="token plain"> stage_table</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token constant" style="color:rgb(189, 147, 249)">COMMIT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
</li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_Gfwi alert alert--info"><div class=admonitionHeading_f1Ed>Note</div><div class=admonitionContent_UjKb><p>See doc: <a href=https://doris.apache.org/docs/3.0/data-operate/transaction/ target=_blank rel="noopener noreferrer">https://doris.apache.org/docs/3.0/data-operate/transaction/</a>
Currently, explicit transaction synchronization is not supported in Cross-Cluster Replication (CCR).</div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=4-2-improved-observability>4-2. Improved observability<a href=#4-2-improved-observability class=hash-link aria-label="4-2. Improved observability的直接链接" title="4-2. Improved observability的直接链接">​</a></h3>
<ul>
<li>
<p><strong>Real-time profile retrieval</strong>: In previous versions, due to issues with the execution plan or the data, some complex queries might have high computational requirements, so developers can only access the query profile for performance analysis after the completion of the query. This makes it hard to promptly identify issues in query execution to guarantee stability of the production environment. Now, with the ability to retrieve real-time profiles, V3.0 allows users to monitor query execution as the query is running. It also allows them to better monitor the progress of each ETL job.</p>
</li>
<li>
<p><strong><code>backend_active_tasks</code> system table</strong>: The <code>backend_active_tasks</code> system table provides real-time resource consumption information for each query on each BE node. Users can analyze this system table using SQL to obtain the resource usage of each query, which helps identify large queries or abnormal workloads.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=5-asynchronous-materialized-view>5. Asynchronous materialized view<a href=#5-asynchronous-materialized-view class=hash-link aria-label="5. Asynchronous materialized view的直接链接" title="5. Asynchronous materialized view的直接链接">​</a></h2>
<p>In V3.0, asynchronous materialized view is faster and more stable. It is also more user-friendly for query acceleration and data modeling scenarios. We have restructured the logic for transparent rewrite and expanded its capabilities, making it 2X faster.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=5-1-refresh>5-1 Refresh<a href=#5-1-refresh class=hash-link aria-label="5-1 Refresh的直接链接" title="5-1 Refresh的直接链接">​</a></h3>
<ul>
<li>
<p>Support for incremental update of materialized views by partitions and partition roll-ups on materialized views to allow refreshes at different granularities.</p>
</li>
<li>
<p>Support for nested materialized views, which is useful in data modeling scenarios.</p>
</li>
<li>
<p>Support for index creation and sort key specification in asynchronous materialized views, which will improve query performance after the materialized view is hit.</p>
</li>
<li>
<p>Higher usability of materialized view DDL with support for atomically replacing materialized views, allowing modifications to the materialized view definition SQL while keeping the materialized view available.</p>
</li>
<li>
<p>Support for non-deterministic functions in materialized views to better serve daily materialized view creation.</p>
</li>
<li>
<p>Support for trigger-based materialized view refresh, which ensures data consistency in data modeling with nested materialized views.</p>
</li>
<li>
<p>Support for a broader range of SQL patterns for building partitioned materialized views, making the incremental update capability available to more use cases.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=5-2-refresh-stability>5-2 Refresh stability<a href=#5-2-refresh-stability class=hash-link aria-label="5-2 Refresh stability的直接链接" title="5-2 Refresh stability的直接链接">​</a></h3>
<ul>
<li>V3.0 supports specifying a Workload Group for building materialized views. This is to limit the resources used by the materialized view build process and ensure that sufficient resources remain available for ongoing queries.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=5-3-transparent-rewrite>5-3 Transparent rewrite<a href=#5-3-transparent-rewrite class=hash-link aria-label="5-3 Transparent rewrite的直接链接" title="5-3 Transparent rewrite的直接链接">​</a></h3>
<ul>
<li>
<p>Support for transparent rewrite of more Join types, including derived Joins. Even when there is a mismatch of Join types between the query and materialized view, transparent rewrite can still be performed by compensating with additional predicates, as long as the materialized view can provide all the data needed for the query.</p>
</li>
<li>
<p>Support for more aggregate functions for roll-up as well as rewrite of multi-dimensional aggregations like GROUPING SETS, ROLLUP, and CUBE; support rewriting queries with aggregations when the materialized view does not contain aggregations, simplifying Join operations and expression computation.</p>
</li>
<li>
<p>Support for transparent rewrite of nested materialized views, enabling higher performance for complex queries.</p>
</li>
<li>
<p>For partially invalid partitioned materialized views, V3.0 supports <code>Union All</code> the base tables for data completion, expanding the applicability of partitioned materialized views.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=5-4-transparent-rewrite-performance>5-4 Transparent rewrite performance<a href=#5-4-transparent-rewrite-performance class=hash-link aria-label="5-4 Transparent rewrite performance的直接链接" title="5-4 Transparent rewrite performance的直接链接">​</a></h3>
<ul>
<li>Continuous optimization has been done to improve the transparent rewrite performance, achieving 2X the speed compared to version 2.1.0.</li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_Gfwi alert alert--info"><div class=admonitionHeading_f1Ed>Note</div><div class=admonitionContent_UjKb><p>See doc:<p><a href=https://doris.apache.org/docs/3.0/query/view-materialized-view/query-async-materialized-view target=_blank rel="noopener noreferrer">https://doris.apache.org/docs/3.0/query/view-materialized-view/query-async-materialized-view</a><p><a href=https://doris.apache.org/docs/3.0/query/view-materialized-view/async-materialized-view/ target=_blank rel="noopener noreferrer">https://doris.apache.org/docs/3.0/query/view-materialized-view/async-materialized-view/</a></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=6-performance-improvement>6. Performance improvement<a href=#6-performance-improvement class=hash-link aria-label="6. Performance improvement的直接链接" title="6. Performance improvement的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=6-1-smarter-optimizer>6-1 Smarter optimizer<a href=#6-1-smarter-optimizer class=hash-link aria-label="6-1 Smarter optimizer的直接链接" title="6-1 Smarter optimizer的直接链接">​</a></h3>
<p>In V3.0, the query optimizer has been enhanced in terms of framework capabilities, distributed plan support, optimizer infrastructure, and rule expansion. It provides better optimization capabilities for more complex and diverse business scenarios, with higher blind test performance for complex SQL:</p>
<ul>
<li>
<p><strong>Improved plan enumeration capability</strong>: The key structure Memo for plan enumeration has been restructured and normalized. This improves the efficiency of the Cascades framework in plan enumeration and the possibility of producing better plans. Additionally, it fixes incomplete column pruning during the Join Reorder process in older versions, which led to unnecessary overhead of the Join operator, thus improving the execution performance in the relevant scenarios.</p>
</li>
<li>
<p><strong>Improved distributed plan support</strong>: The distributed query plan has been enhanced to allow aggregation, join, and window function operations to more intelligently identify the data characteristics of intermediate computation results, avoiding ineffective data redistribution operations. Meanwhile, we have optimized the execution under the multi-replica continuous execution mode, making it more data cache-friendly.</p>
</li>
<li>
<p><strong>Improved optimizer infrastructure</strong>: V3 has fixed several issues in cost model and statistics information estimation. The fixes to the cost model are more adaptable to the evolution of the execution engine, making the execution plan more stable compared to previous versions.</p>
</li>
<li>
<p><strong>Enhanced Runtime Filter plan support</strong>: On the basis of Join Runtime Filter, V3.0 has expanded the capability of the TopN Runtime Filter to achieve better performance in use cases that involve a TopN operator.</p>
</li>
<li>
<p><strong>Enriched optimization rule library</strong>: Based on user feedback and internal testing results, we have introduced optimization rules such as Intersect Reorder to enrich the rule set of the optimizer.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=6-2-self-adaptive-runtime-filter>6-2 Self-adaptive Runtime Filter<a href=#6-2-self-adaptive-runtime-filter class=hash-link aria-label="6-2 Self-adaptive Runtime Filter的直接链接" title="6-2 Self-adaptive Runtime Filter的直接链接">​</a></h3>
<p>In previous versions, the generation of Runtime Filter relies on manual setting by users based on statistical information. However, inaccurate settings in certain cases could lead to performance instability.</p>
<p>In V3.0, Doris implements a self-adaptive Runtime Filter calculation approach. It can estimate the Runtime Filter at runtime based on the data size with high accuracy, enabling better performance in use cases with large data volumes and high workloads.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=6-3-function-performance-optimization>6-3 Function performance optimization<a href=#6-3-function-performance-optimization class=hash-link aria-label="6-3 Function performance optimization的直接链接" title="6-3 Function performance optimization的直接链接">​</a></h3>
<ul>
<li>V3.0 has improved the vectorized implementation of dozens of functions, enabling a performance improvement of over 50% for some commonly used functions.</li>
<li>V3.0 has also made extensive optimizations to the aggregation of nullable data types, enabling a 30% performance improvement.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=6-4-blind-test-performance-improvement>6-4 Blind test performance improvement<a href=#6-4-blind-test-performance-improvement class=hash-link aria-label="6-4 Blind test performance improvement的直�接链接" title="6-4 Blind test performance improvement的直接链接">​</a></h3>
<p>Our blind tests on V3.0 and V2.1 show that the new version is 7.3% and 6.2% faster in TPC-DS and TPC-H benchmark tests, respectively.</p>
<p><img decoding=async loading=lazy alt="Blind test performance improvement" src=/zh-CN/assets/images/blind-test-performance-improvement-f09420ba8b50be53ab8eb1c410f3f3fd.png width=1280 height=823 class=img_ev3q></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=7-new-features>7. New features<a href=#7-new-features class=hash-link aria-label="7. New features的直接链接" title="7. New features的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=7-1-java-udtf>7-1 Java UDTF<a href=#7-1-java-udtf class=hash-link aria-label="7-1 Java UDTF的直接链接" title="7-1 Java UDTF的直接链接">​</a></h3>
<p>Version 3.0 has added support for Java UDTFs. The key operations are as follows:</p>
<ul>
<li>
<p>Implementing a UDTF: Similar to a UDF, a UDTF requires the user to implement an <code>evaluate</code> method. Note that the return value of a UDTF function must be of the <code>Array</code> data type.</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#F8F8F2;--prism-background-color:#282A36><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_e6Vv><span class=token-line style=color:#F8F8F2><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> class UDTFStringTest {</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> ArrayList</span><span class="token operator">&lt;</span><span class="token plain">String</span><span class="token operator">></span><span class="token plain"> evaluate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">String </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> String separator</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> {</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">value</span><span class="token plain"> </span><span class="token operator">=</span><span class="token operator">=</span><span class="token plain"> </span><span class="token boolean">null</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"> separator </span><span class="token operator">=</span><span class="token operator">=</span><span class="token plain"> </span><span class="token boolean">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> {</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">            </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token boolean">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">        } </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token plain"> {</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">            </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> new ArrayList</span><span class="token operator">&lt;></span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">Arrays</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">asList</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">split</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">separator</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">        }</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    }</span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">}</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
</li>
<li>
<p>Creating a UDTF: By default, two corresponding functions will be created - <code>java-utdf</code>and <code>java-utdf_outer</code>. The <code>_outer</code> suffix adds a single row of <code>NULL</code> data when the table function generates 0 rows of output.</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#F8F8F2;--prism-background-color:#282A36><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_e6Vv><span class=token-line style=color:#F8F8F2><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TABLES</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">FUNCTION</span><span class="token plain"> java</span><span class="token operator">-</span><span class="token plain">utdf</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">RETURNS</span><span class="token plain"> array</span><span class="token operator">&lt;</span><span class="token plain">string</span><span class="token operator">></span><span class="token plain"> PROPERTIES </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">"file"</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">"file:///pathTo/java-udaf.jar"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">"symbol"</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">"org.apache.doris.udf.demo.UDTFStringTest"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">"always_nullable"</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">"true"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">"type"</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">"JAVA_UDF"</span><span class="token plain"></span><br></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
</li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_Gfwi alert alert--info"><div class=admonitionHeading_f1Ed>信息</div><div class=admonitionContent_UjKb><p>See doc: <a href=https://doris.apache.org/docs/3.0/query/udf/java-user-defined-function/#udtf-1 target=_blank rel="noopener noreferrer">https://doris.apache.org/docs/3.0/query/udf/java-user-defined-function/#udtf-1</a></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=7-2-generated-column>7-2 Generated column<a href=#7-2-generated-column class=hash-link aria-label="7-2 Generated column的直接链接" title="7-2 Generated column的直接链接">​</a></h3>
<p>A generated column is a special column whose value is calculated from the values of other columns rather than directly inserted or updated by the user. It supports pre-computing the results of expressions and storing them in the database, which is suitable for scenarios that require frequent queries or complex calculations.</p>
<p>Results can be automatically calculated based on predefined expressions when data is imported or updated, and then stored persistently. In this way, during subsequent queries, the system can directly access these calculated results without performing complex calculations, thereby improving query performance.</p>
<p>Generated columns are supported since V3.0. When creating a table, you can specify a column as generated column. A generated column automatically calculates values based on the defined expression when data is written. Generated columns allow for more complex expressions to be defined, but the value cannot be explicitly written or set.</p>
<div class="theme-admonition theme-admonition-info admonition_Gfwi alert alert--info"><div class=admonitionHeading_f1Ed>信息</div><div class=admonitionContent_UjKb><p>See doc: <a href=https://doris.apache.org/docs/3.0/sql-manual/sql-statements/Data-Definition-Statements/Create/CREATE-TABLE-AND-GENERATED-COLUMN/ target=_blank rel="noopener noreferrer">https://doris.apache.org/docs/3.0/sql-manual/sql-statements/Data-Definition-Statements/Create/CREATE-TABLE-AND-GENERATED-COLUMN/</a></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=8-functional-improvements>8. Functional improvements<a href=#8-functional-improvements class=hash-link aria-label="8. Functional improvements的直接链接" title="8. Functional improvements的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=8-1-materialized-view>8-1. Materialized view<a href=#8-1-materialized-view class=hash-link aria-label="8-1. Materialized view的直接链接" title="8-1. Materialized view的直接链接">​</a></h3>
<p>We have refactored the selection logic for materialized views and migrated it from the rule-based optimizer (RBO) to the cost-based optimizer (CBO). This aligns the selection logic with that of asynchronous materialized views. This functionality is enabled by default. If any issues are encountered, you can revert to the RBO mode using <code>set global enable_sync_mv_cost_based_rewrite = false</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=8-2-routine-load>8-2. Routine Load<a href=#8-2-routine-load class=hash-link aria-label="8-2. Routine Load的直接链接" title="8-2. Routine Load的直接链接">​</a></h3>
<p>In previous versions, the Routine Load functionality faced some usability challenges, such as uneven task scheduling across BE nodes, untimely task scheduling, complex configuration requirements (the need to change multiple FE and BE settings for optimization), insufficient overall stability (where restarts or upgrades could frequently pause Routine Load jobs, requiring manual user intervention to resume).</p>
<p>To address these issues, we have made extensive optimizations to the Routine Load feature:</p>
<ul>
<li>
<p><strong>Resource scheduling</strong>: We have improved the scheduling balance to make sure that tasks are more evenly distributed across BE nodes. Jobs that encounter unrepairable errors will be promptly paused to avoid wasting resources on futile scheduling attempts. Additionally, we have improved the timeliness of the scheduling process, which has enhanced the import performance of Routine Load.</p>
</li>
<li>
<p><strong>Parameter configuration</strong>: Users in most environments no longer need to modify FE and BE configurations for optimization. An automatic adjustment mechanism with timeout parameter has been introduced to prevent tasks from constantly retrying when cluster pressure increases.</p>
</li>
<li>
<p><strong>Stability</strong>: We have enhanced the robustness of Doris in various exceptional scenarios, such as FE failovers, BE rolling upgrades, and Kafka cluster anomalies, ensuring continuous stable operation. We have also optimized the Auto Resume mechanism, allowing Routine Load to automatically resume operation after faults are repaired, reducing the need for manual user intervention.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=9-behavior-changed>9. Behavior changed<a href=#9-behavior-changed class=hash-link aria-label="9. Behavior changed的直接链接" title="9. Behavior changed的直接链接">​</a></h2>
<ul>
<li>
<p><code>cpu_resource_limit</code> will no longer be supported, and all types of resource isolation will be implemented through Workload Groups.</p>
</li>
<li>
<p>Please use JDK 17 for Apache Doris 3.0 and later versions. The recommended version being <code>jdk-17.0.10_linux-x64_bin.tar.gz</code>.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=try-apache-doris-30-now>Try Apache Doris 3.0 now!<a href=#try-apache-doris-30-now class=hash-link aria-label="Try Apache Doris 3.0 now!的直接链接" title="Try Apache Doris 3.0 now!的直接链接">​</a></h2>
<p>Before the official release of version 3.0, the compute-storage decoupled mode of Apache Doris has undergone nearly two years of extensive testing and optimization in the production environments of hundreds of enterprises. Contributors from many tech giants have collaborated with the community to provide a significant number of test cases based on their real-world business needs. This has rigorously validated the usability and stability of version 3.0.</p>
<p>We highly recommend users with compute-storage decoupling needs to download version 3.0 and experience it firsthand.</p>
<p>Going forward, we will accelerate our release iteration cycle to deliver a more stable version experience for all users. Feel free to join us in the <a href=https://doris.apache.org/slack target=_blank rel="noopener noreferrer">Apache Doris community</a> and engage directly with the core developers.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=credits>Credits<a href=#credits class=hash-link aria-label=Credits的直接链接 title=Credits的直接链接>​</a></h2>
<p>Special thanks to the following contributors who participated in the development, testing, and provided feedback for this version:</p>
<p>@133tosakarin、@390008457、@924060929、@AcKing-Sam、@AshinGau、@BePPPower、@BiteTheDDDDt、@ByteYue、@CSTGluigi、@CalvinKirs、@Ceng23333、@DarvenDuan、@DongLiang-0、@Doris-Extras、@Dragonliu2018、@Emor-nj、@FreeOnePlus、@Gabriel39、@GoGoWen、@HappenLee、@HowardQin、@Hyman-zhao、@INNOCENT-BOY、@JNSimba、@JackDrogon、@Jibing-Li、@KassieZ、@Lchangliang、@LemonLiTree、@LiBinfeng-01、@LompleZ、@M1saka2003、@Mryange、@Nitin-Kashyap、@On-Work-Song、@SWJTU-ZhangLei、@StarryVerse、@TangSiyang2001、@Tech-Circle-48、@Thearas、@Vallishp、@WinkerDu、@XieJiann、@XuJianxu、@XuPengfei-1020、@Yukang-Lian、@Yulei-Yang、@Z-SWEI、@ZhongJinHacker、@adonis0147、@airborne12、@allenhooo、@amorynan、@bingquanzhao、@biohazard4321、@bobhan1、@caiconghui、@cambyzju、@caoliang-web、@catpineapple、@cjj2010、@csun5285、@dataroaring、@deardeng、@dongsilun、@dutyu、@echo-hhj、@eldenmoon、@elvestar、@englefly、@feelshana、@feifeifeimoon、@feiniaofeiafei、@felixwluo、@freemandealer、@gavinchou、@ghkang98、@gnehil、@hechao-ustc、@hello-stephen、@httpshirley、@hubgeter、@hust-hhb、@iszhangpch、@iwanttobepowerful、@ixzc、@jacktengg、@jackwener、@jeffreys-cat、@kaijchen、@kaka11chen、@kindred77、@koarz、@kobe6th、@kylinmac、@larshelge、@liaoxin01、@lide-reed、@liugddx、@liujiwen-up、@liutang123、@lsy3993、@luwei16、@luzhijing、@lxliyou001、@mongo360、@morningman、@morrySnow、@mrhhsg、@my-vegetable-has-exploded、@mymeiyi、@nanfeng1999、@nextdreamblue、@pingchunzhang、@platoneko、@py023、@qidaye、@qzsee、@raboof、@rohitrs1983、@rotkang、@ryanzryu、@seawinde、@shoothzj、@shuke987、@sjyango、@smallhibiscus、@sollhui、@sollhui、@spaces-X、@stalary、@starocean999、@superdiaodiao、@suxiaogang223、@taptao、@vhwzx、@vinlee19、@w41ter、@wangbo、@wangshuo128、@whutpencil、@wsjz、@wuwenchi、@wyxxxcat、@xiaokang、@xiedeyantu、@xiedeyantu、@xingyingone、@xinyiZzz、@xy720、@xzj7019、@yagagagaga、@yiguolei、@yongjinhou、@ytwp、@yuanyuan8983、@yujun777、@yuxuan-luo、@zclllyybb、@zddr、@zfr9527、@zgxme、@zhangbutao、@zhangstar333、@zhannngchen、@zhiqiang-hhhh、@ziyanTOP、@zxealous、@zy-kkk、@zzzxl1993、@zzzzzzzs</div></div></article><div class="pl-4 mt-20 text-[#1D1D1D]"><div class="text-[2rem] leading-[3.25rem]">Recent posts</div><div class="mt-4 flex flex-col"><a href=https://www.velodb.io/blog/bytedance-solved-billion-scale-vector-search-problem-with-apache-doris-4-0 target=_blank rel="noopener noreferrer" class="text-lg leading-10 hover:no-underline hover:text-primary">How ByteDance Solved Billion-Scale Vector Search Problem with Apache Doris 4.0</a><a href=https://www.velodb.io/blog/apache-doris-34x-faster-clickhouse-realtime-updates target=_blank rel="noopener noreferrer" class="text-lg leading-10 hover:no-underline hover:text-primary">Apache Doris Up to 34x Faster Than ClickHouse in Real-Time Updates</a><a href=https://www.velodb.io/blog/fast-json-analytics-in-apache-doris-100x-faster-than-postgresql-and-mongodb target=_blank rel="noopener noreferrer" class="text-lg leading-10 hover:no-underline hover:text-primary">Fast JSON Analytics in Apache Doris: 100x Faster Than PostgreSQL and MongoDB</a><a href=https://www.velodb.io/blog/deploying-apache-doris-with-minio target=_blank rel="noopener noreferrer" class="text-lg leading-10 hover:no-underline hover:text-primary">Deploying Apache Doris with MinIO: Analytics with Storage-Compute Separation</a></div><a class="flex group text-primary items-center text-base cursor-pointer hover:no-underline mt-4" href=/zh-CN/blog/><span class=mr-2>View all blogs</span><span class=transition-slide><svg class=transition-slide width=1em height=1em viewBox="0 0 16 14" fill=none><path d="M9.37549 12.3542L14.8755 6.85419L9.37549 1.35419" stroke=currentColor stroke-width=1.65 stroke-linecap=round stroke-linejoin=round /><path d="M1.12549 6.85419L14.8755 6.85419" stroke=currentColor stroke-width=1.65 stroke-linecap=round stroke-linejoin=round /></svg></span></a></div></main><div class="col col--2"><div class="tableOfContents_jeP5 thin-scrollbar toc-container"><div><a href=/zh-CN/><div class="toc-icon-content group"><svg width=21 height=20 fill=currentColor viewBox="0 0 21 20" class=group-hover:text-primary><path fill-rule=evenodd d="M3.835 6.44a1 1 0 0 0-.445.832v8.939c0 .436.354.79.79.79H16.81a.79.79 0 0 0 .79-.79V7.272a1 1 0 0 0-.446-.832L11.05 2.37a1 1 0 0 0-1.11 0zm7.26 4.16a.6.6 0 1 0-1.2 0v3.3a.6.6 0 0 0 1.2 0z" clip-rule=evenodd /></svg><span class=group-hover:text-primary>Doris 首页</span></div></a><div class="cursor-pointer toc-icon-content group"><svg class=group-hover:text-primary width=21 height=20 fill=currentColor viewBox="0 0 21 20"><path d="M15.944 3H5.056C4.2 3 3.5 3.7 3.5 4.556v10.888C3.5 16.3 4.2 17 5.056 17h10.888c.856 0 1.556-.7 1.556-1.556V4.557C17.5 3.7 16.8 3 15.944 3m-5.791 5.998c-.179.575-.384 1.466-.686 2.197-.156.396-.149.327-.266.577l.101-.033c1.04-.29 1.767-.363 2.444-.487-.136-.107-.254-.19-.348-.276-.464-.515-.627-.611-1.245-1.978m5.1 3.297c-.133.147-.366.233-.708.233-.591 0-1.129-.163-1.906-.56-1.338.148-2.761.304-3.562.561q-.06.02-.14.055c-.965 1.648-1.68 2.347-2.31 2.32-.2-.01-.49-.125-.583-.18l-.116-.109-.04-.077a.7.7 0 0 1-.039-.42c.086-.412.529-1.065 1.462-1.649.148-.109.485-.281.796-.429.236-.374.345-.614.643-1.278a23 23 0 0 0 .84-2.443V8.31c-.288-.941-.459-1.58-.171-2.614.07-.296.327-.6.614-.6h.187c.179 0 .35.063.475.188.513.513.272 1.836.015 2.87q-.02.072-.031.109c.311.879.803 1.747 1.293 2.151.202.156.4.335.65.475a9 9 0 0 1 .982-.073c.964 0 1.547.17 1.773.536a.63.63 0 0 1 .093.428.75.75 0 0 1-.218.513m-.492-.65c-.078-.078-.301-.3-1.39-.3-.055 0-.188-.014-.258.064.568.249 1.111.438 1.469.438q.08-.002.148-.016h.03c.04-.015.063-.023.07-.1-.015-.024-.03-.055-.07-.086m-6.846 1.114a3 3 0 0 0-.374.242c-.552.505-.902 1.019-.94 1.314.35-.117.808-.63 1.314-1.556m2.22-5.266.04-.031c.054-.25.092-.517.139-.688l.023-.124c.078-.444.048-.703-.084-.89l-.117-.038q-.03.045-.054.093c-.133.327-.125.978.053 1.678"/></svg><span class="group-hover:text-primary mr-2">下载 PDF</span><div class="ant-spin ant-spin-sm css-1v613y0" aria-live=polite aria-busy=false><span class=ant-spin-dot-holder><span class="ant-spin-dot ant-spin-dot-spin"><i class=ant-spin-dot-item></i><i class=ant-spin-dot-item></i><i class=ant-spin-dot-item></i><i class=ant-spin-dot-item></i></span></span></div></div><a href=https://doris-forum.org.cn target=_blank rel="noopener noreferrer"><div class="toc-icon-content group"><svg width=20 height=20 fill=none viewBox="0 0 20 20" class=group-hover:text-primary><g clip-path=url(#a)><path fill=currentColor fill-rule=evenodd d="M3.75 3a.75.75 0 0 0-.75.75v9.519c0 .414.336.75.75.75h1.884v2.3a.4.4 0 0 0 .595.349l4.577-2.554a.75.75 0 0 1 .366-.095h5.078a.75.75 0 0 0 .75-.75V3.75a.75.75 0 0 0-.75-.75zM7.5 8.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0m3.5 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0m2.5 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2" clip-rule=evenodd /></g><defs><clipPath id=a><path fill=#fff d="M0 0h20v20H0z"/></clipPath></defs></svg> <span class=group-hover:text-primary>技术论坛</span></div></a></div><div><span class="ml-4 title-text">本页导航</span><ul class="table-of-contents table-of-contents__left-border"><li><a href=#1-compute-storage-decoupled-mode class="table-of-contents__link toc-highlight">1. Compute-storage decoupled mode</a><ul><li><a href=#1-1-from-coupled-to-decoupled class="table-of-contents__link toc-highlight">1-1. From coupled to decoupled</a><li><a href=#1-2-design-highlight class="table-of-contents__link toc-highlight">1-2 Design highlight</a><li><a href=#1-3-comparison-with-alternative-solutions class="table-of-contents__link toc-highlight">1-3 Comparison with alternative solutions</a><li><a href=#1-4-query-performance-comparison class="table-of-contents__link toc-highlight">1-4 Query performance comparison</a><li><a href=#1-5-write-speed-comparison class="table-of-contents__link toc-highlight">1-5 Write speed comparison</a><li><a href=#1-6-tips-for-production-environment class="table-of-contents__link toc-highlight">1-6 Tips for production environment</a><li><a href=#1-7-notes class="table-of-contents__link toc-highlight">1-7 Notes</a></ul><li><a href=#2-data-lakehouse class="table-of-contents__link toc-highlight">2. Data lakehouse</a><ul><li><a href=#2-1-faster-queries-in-the-data-lakehouse class="table-of-contents__link toc-highlight">2-1 Faster queries in the data lakehouse</a><li><a href=#2-2-federated-analysis-more-data-connectors class="table-of-contents__link toc-highlight">2-2 Federated analysis: more data connectors</a><li><a href=#2-3-data-lake-building class="table-of-contents__link toc-highlight">2-3 Data lake building</a></ul><li><a href=#3-upgraded-semi-structured-data-analysis-capabilities class="table-of-contents__link toc-highlight">3. Upgraded semi-structured data analysis capabilities</a><li><a href=#4-enhanced-etl-capabilities class="table-of-contents__link toc-highlight">4. Enhanced ETL capabilities</a><ul><li><a href=#4-1-transaction-improvements class="table-of-contents__link toc-highlight">4-1. Transaction improvements</a><li><a href=#4-2-improved-observability class="table-of-contents__link toc-highlight">4-2. Improved observability</a></ul><li><a href=#5-asynchronous-materialized-view class="table-of-contents__link toc-highlight">5. Asynchronous materialized view</a><ul><li><a href=#5-1-refresh class="table-of-contents__link toc-highlight">5-1 Refresh</a><li><a href=#5-2-refresh-stability class="table-of-contents__link toc-highlight">5-2 Refresh stability</a><li><a href=#5-3-transparent-rewrite class="table-of-contents__link toc-highlight">5-3 Transparent rewrite</a><li><a href=#5-4-transparent-rewrite-performance class="table-of-contents__link toc-highlight">5-4 Transparent rewrite performance</a></ul><li><a href=#6-performance-improvement class="table-of-contents__link toc-highlight">6. Performance improvement</a><ul><li><a href=#6-1-smarter-optimizer class="table-of-contents__link toc-highlight">6-1 Smarter optimizer</a><li><a href=#6-2-self-adaptive-runtime-filter class="table-of-contents__link toc-highlight">6-2 Self-adaptive Runtime Filter</a><li><a href=#6-3-function-performance-optimization class="table-of-contents__link toc-highlight">6-3 Function performance optimization</a><li><a href=#6-4-blind-test-performance-improvement class="table-of-contents__link toc-highlight">6-4 Blind test performance improvement</a></ul><li><a href=#7-new-features class="table-of-contents__link toc-highlight">7. New features</a><ul><li><a href=#7-1-java-udtf class="table-of-contents__link toc-highlight">7-1 Java UDTF</a><li><a href=#7-2-generated-column class="table-of-contents__link toc-highlight">7-2 Generated column</a></ul><li><a href=#8-functional-improvements class="table-of-contents__link toc-highlight">8. Functional improvements</a><ul><li><a href=#8-1-materialized-view class="table-of-contents__link toc-highlight">8-1. Materialized view</a><li><a href=#8-2-routine-load class="table-of-contents__link toc-highlight">8-2. Routine Load</a></ul><li><a href=#9-behavior-changed class="table-of-contents__link toc-highlight">9. Behavior changed</a><li><a href=#try-apache-doris-30-now class="table-of-contents__link toc-highlight">Try Apache Doris 3.0 now!</a><li><a href=#credits class="table-of-contents__link toc-highlight">Credits</a></ul></div></div></div></div></div></div><div class="footer pt-16 pb-10"><div class=container><div class=footer-box><div class=left><img src=/zh-CN/images/asf_logo_apache.svg alt="" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE"><img src=/zh-CN/images/asf_logo_apache.svg alt="" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU"><div class="row footer__links"><div class="col footer__col"><div class=footer__title>ASF</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://www.apache.org/ target=_blank rel="noopener noreferrer" class=footer__link-item>Foundation<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><li class=footer__item><a href=https://www.apache.org/licenses/ target=_blank rel="noopener noreferrer" class=footer__link-item>License<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><li class=footer__item><a href=https://www.apache.org/events/current-event target=_blank rel="noopener noreferrer" class=footer__link-item>Events<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><li class=footer__item><a href=https://www.apache.org/foundation/sponsorship.html target=_blank rel="noopener noreferrer" class=footer__link-item>Sponsorship<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><li class=footer__item><a href=https://privacy.apache.org/policies/privacy-policy-public.html target=_blank rel="noopener noreferrer" class=footer__link-item>Privacy<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><li class=footer__item><a href=https://www.apache.org/security/ target=_blank rel="noopener noreferrer" class=footer__link-item>Security<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><li class=footer__item><a href=https://www.apache.org/foundation/thanks.html target=_blank rel="noopener noreferrer" class=footer__link-item>Thanks<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a></ul></div><div class="col footer__col"><div class=footer__title>Resources</div><ul class="footer__items clean-list"><li class=footer__item><a class=footer__link-item href=/zh-CN/download/>Download</a><li class=footer__item><a class=footer__link-item href=/zh-CN/blog/>Blog</a><li class=footer__item><a class=footer__link-item href=/zh-CN/ecosystem/cluster-management/>Ecosystem</a><li class=footer__item><a class=footer__link-item href=/zh-CN/users/>Users</a><li class=footer__item><a href=https://github.com/apache/doris/discussions target=_blank rel="noopener noreferrer" class=footer__link-item>Discussions<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a></ul></div><div class="col footer__col"><div class=footer__title>Community</div><ul class="footer__items clean-list"><li class=footer__item><a class=footer__link-item href=/zh-CN/community/how-to-contribute/contribute-to-doris/>How to contribute</a><li class=footer__item><a href=https://github.com/apache/doris/ target=_blank rel="noopener noreferrer" class=footer__link-item>Source code<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><li class=footer__item><a class=footer__link-item href=/zh-CN/community/team/>Doris team</a><li class=footer__item><a href=https://github.com/apache/doris/issues/30669 target=_blank rel="noopener noreferrer" class=footer__link-item>Roadmap<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><li class=footer__item><a href=https://cwiki.apache.org/confluence/display/DORIS/Doris+Improvement+Proposals target=_blank rel="noopener noreferrer" class=footer__link-item>Improvement proposal<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a></ul></div></div></div><div class=right><div class=footer__title>Join the community</div><div class=social-list><div class=social><a href=mailto:dev@doris.apache.org target=_blank title=mail class=item><svg width=2em height=2em viewBox="0 0 32 32" fill=none><path d="M5.6003 6H26.3997C27.8186 6 28.982 7.10964 29 8.46946L16.0045 15.454L3.01202 8.47829C3.02405 7.11258 4.1784 6 5.6003 6ZM3.01202 11.1508L3 23.5011C3 24.8756 4.16938 26 5.6003 26H26.3997C27.8306 26 29 24.8756 29 23.5011V11.145L16.3111 17.8028C16.1157 17.9058 15.8813 17.9058 15.6889 17.8028L3.01202 11.1508Z" fill=currentColor /></svg></a><a href=https://github.com/apache/doris target=_blank title=github class=item><svg width=2em height=2em viewBox="0 0 32 32" fill=none><path d="M16.0001 2.66675C8.63342 2.66675 2.66675 8.63341 2.66675 16.0001C2.66524 18.7991 3.54517 21.5276 5.1817 23.7983C6.81824 26.0691 9.12828 27.7668 11.7841 28.6508C12.4508 28.7668 12.7001 28.3668 12.7001 28.0161C12.7001 27.7001 12.6828 26.6508 12.6828 25.5334C9.33342 26.1508 8.46675 24.7174 8.20008 23.9668C8.04942 23.5828 7.40008 22.4001 6.83342 22.0828C6.36675 21.8334 5.70008 21.2161 6.81608 21.2001C7.86675 21.1828 8.61608 22.1668 8.86675 22.5668C10.0668 24.5828 11.9841 24.0161 12.7494 23.6668C12.8668 22.8001 13.2161 22.2174 13.6001 21.8841C10.6334 21.5508 7.53342 20.4001 7.53342 15.3001C7.53342 13.8494 8.04942 12.6507 8.90008 11.7161C8.76675 11.3827 8.30008 10.0161 9.03342 8.18275C9.03342 8.18275 10.1494 7.83342 12.7001 9.55075C13.7855 9.2495 14.907 9.09787 16.0334 9.10008C17.1668 9.10008 18.3001 9.24942 19.3668 9.54942C21.9161 7.81608 23.0334 8.18408 23.0334 8.18408C23.7668 10.0174 23.3001 11.3841 23.1668 11.7174C24.0161 12.6507 24.5334 13.8334 24.5334 15.3001C24.5334 20.4174 21.4174 21.5508 18.4508 21.8841C18.9334 22.3001 19.3508 23.1001 19.3508 24.3508C19.3508 26.1334 19.3334 27.5668 19.3334 28.0174C19.3334 28.3668 19.5841 28.7828 20.2508 28.6494C22.8975 27.7558 25.1973 26.0547 26.8266 23.7856C28.4559 21.5165 29.3327 18.7936 29.3334 16.0001C29.3334 8.63341 23.3668 2.66675 16.0001 2.66675V2.66675Z" fill=currentColor /></svg></a><a href=https://twitter.com/doris_apache target=_blank title=twitter class=item><svg width=2em height=2em viewBox="0 0 32 32" fill=none><path d="M4.625 4.625H11.2809L27.375 27.375H20.7191L4.625 4.625ZM7.52549 6.10639L21.5236 25.8936H24.4746L10.4764 6.10639H7.52549Z" fill=currentColor /><path d="M14.4268 18.4803L6.53447 27.375H4.625L13.5581 17.2525L14.4268 18.4803ZM18.1299 14.3066L26.7203 4.625H24.7017L17.2525 13.0662L18.1299 14.3066Z" fill=currentColor /></svg></a><a href=https://doris.apache.org/slack title=slack target=_blank class=item><svg width=2em height=2em viewBox="0 0 32 32" fill=none><g clip-path=url(#clip0_125_278)><path d="M12.5875 16.6906C11.0844 16.6906 9.86562 17.9094 9.86562 19.4125V26.2375C9.86562 26.9594 10.1524 27.6517 10.6628 28.1622C11.1733 28.6726 11.8656 28.9594 12.5875 28.9594C13.3094 28.9594 14.0017 28.6726 14.5122 28.1622C15.0226 27.6517 15.3094 26.9594 15.3094 26.2375V19.4531C15.3094 17.9094 14.0906 16.6906 12.5875 16.6906ZM3 19.4531C3 20.175 3.28677 20.8673 3.79722 21.3778C4.30767 21.8882 4.99999 22.175 5.72187 22.175C6.44376 22.175 7.13608 21.8882 7.64653 21.3778C8.15698 20.8673 8.44375 20.175 8.44375 19.4531V16.7312H5.7625C4.25938 16.6906 3 17.9094 3 19.4531ZM12.5875 3C11.8656 3 11.1733 3.28677 10.6628 3.79722C10.1524 4.30767 9.86562 4.99999 9.86562 5.72187C9.86562 6.44376 10.1524 7.13608 10.6628 7.64653C11.1733 8.15698 11.8656 8.44375 12.5875 8.44375H15.3094V5.72187C15.3094 4.21875 14.0906 3 12.5875 3ZM5.72187 15.3094H12.5469C13.2688 15.3094 13.9611 15.0226 14.4715 14.5122C14.982 14.0017 15.2688 13.3094 15.2688 12.5875C15.2688 11.8656 14.982 11.1733 14.4715 10.6628C13.9611 10.1524 13.2688 9.86562 12.5469 9.86562H5.72187C4.99999 9.86562 4.30767 10.1524 3.79722 10.6628C3.28677 11.1733 3 11.8656 3 12.5875C3 13.3094 3.28677 14.0017 3.79722 14.5122C4.30767 15.0226 4.99999 15.3094 5.72187 15.3094ZM26.2375 9.86562C24.7344 9.86562 23.5156 11.0844 23.5156 12.5875V15.3094H26.2375C26.9594 15.3094 27.6517 15.0226 28.1622 14.5122C28.6726 14.0017 28.9594 13.3094 28.9594 12.5875C28.9594 11.8656 28.6726 11.1733 28.1622 10.6628C27.6517 10.1524 26.9594 9.86562 26.2375 9.86562ZM16.6906 5.72187V12.5875C16.6906 13.3094 16.9774 14.0017 17.4878 14.5122C17.9983 15.0226 18.6906 15.3094 19.4125 15.3094C20.1344 15.3094 20.8267 15.0226 21.3372 14.5122C21.8476 14.0017 22.1344 13.3094 22.1344 12.5875V5.72187C22.1344 4.99999 21.8476 4.30767 21.3372 3.79722C20.8267 3.28677 20.1344 3 19.4125 3C18.6906 3 17.9983 3.28677 17.4878 3.79722C16.9774 4.30767 16.6906 4.99999 16.6906 5.72187ZM22.1344 26.2781C22.1344 24.775 20.9156 23.5562 19.4125 23.5562H16.6906V26.2781C16.6906 27 16.9774 27.6923 17.4878 28.2028C17.9983 28.7132 18.6906 29 19.4125 29C20.1344 29 20.8267 28.7132 21.3372 28.2028C21.8476 27.6923 22.1344 27 22.1344 26.2781ZM26.2781 16.6906H19.4125C18.6906 16.6906 17.9983 16.9774 17.4878 17.4878C16.9774 17.9983 16.6906 18.6906 16.6906 19.4125C16.6906 20.1344 16.9774 20.8267 17.4878 21.3372C17.9983 21.8476 18.6906 22.1344 19.4125 22.1344H26.2375C27.7406 22.1344 28.9594 20.9156 28.9594 19.4125C29 17.9094 27.7812 16.6906 26.2781 16.6906Z" fill=currentColor /></g><defs><clipPath id=clip0_125_278><rect width=26 height=26 fill=currentColor transform="translate(3 3)"/></clipPath></defs></svg></a></div><div class=social><a href=https://www.youtube.com/hashtag/apachedoris title=youtube target=_blank class=item><svg width=2em height=2em viewBox="0 0 32 32" fill=none><path d="M28.5167 7.83429C28.9436 8.25423 29.2532 8.77539 29.4154 9.34742C29.8205 11.5462 30.0159 13.7775 29.999 16.0121C30.0144 18.2382 29.819 20.4609 29.4154 22.6515C29.2532 23.2235 28.9436 23.7446 28.5167 24.1645C28.0898 24.5845 27.5601 24.889 26.9785 25.0486C24.7728 25.625 16.0124 25.625 16.0124 25.625C16.0124 25.625 7.22652 25.625 5.04638 25.0486C4.46489 24.889 3.9351 24.5845 3.5082 24.1645C3.08132 23.7446 2.77176 23.2235 2.60948 22.6515C2.19736 20.4617 1.9934 18.239 2.00025 16.0121C1.9918 13.7767 2.19577 11.5455 2.60948 9.34742C2.77176 8.77539 3.08132 8.25423 3.5082 7.83429C3.9351 7.41436 4.46489 7.10985 5.04638 6.95021C7.25103 6.36354 16.0124 6.37502 16.0124 6.37502C16.0124 6.37502 24.796 6.37502 26.9785 6.95021C27.5601 7.10985 28.0898 7.41436 28.5167 7.83429ZM12.5 21.25L21.25 16.008L12.5 10.75V21.25Z" fill=currentColor /></svg></a><a href=https://www.linkedin.com/company/doris-apache/ title=linkedin target=_blank class=item><svg width=2rem height=2rem viewBox="0 0 32 32" fill=none><path d="M4.29925 26.9996H9.66738V11.6781H4.29925V26.9996ZM22.1628 11.1949C19.9409 11.1949 18.7157 11.9388 17.3054 13.7407V11.6777H11.9459V26.9996H17.305V18.6738C17.305 16.9168 18.145 15.1982 20.1535 15.1982C22.162 15.1982 22.6559 16.9164 22.6559 18.632V27H28V18.2902C28 12.2386 24.3854 11.1949 22.1628 11.1949ZM6.99325 4C5.3395 4 4 5.21047 4 6.7046C4 8.19759 5.3395 9.40617 6.99325 9.40617C8.6455 9.40617 9.985 8.19722 9.985 6.7046C9.985 5.21047 8.6455 4 6.99325 4Z" fill=white /></svg></a><a href=https://medium.com/@ApacheDoris title=medium target=_blank class=item><svg width=2em height=2em viewBox="0 0 32 32" fill=none><g id=Frame><path id=Vector d="M17.7967 16.5385C17.8029 18.53 16.9746 20.4425 15.4937 21.8559C14.0128 23.2693 12.0004 24.0681 9.89836 24.0769C7.79633 24.0681 5.78391 23.2693 4.30302 21.8559C2.82212 20.4425 1.99383 18.53 2.00003 16.5385C1.99383 14.5469 2.82212 12.6344 4.30302 11.221C5.78391 9.80759 7.79633 9.00878 9.89836 9C12.0004 9.00878 14.0128 9.80759 15.4937 11.221C16.9746 12.6344 17.8029 14.5469 17.7967 16.5385ZM26.4533 16.5385C26.4533 20.4514 24.6917 23.6348 22.51 23.6348C20.3283 23.6348 18.555 20.4514 18.555 16.5385C18.555 12.6255 20.3283 9.44214 22.51 9.44214C24.6917 9.44214 26.4533 12.6255 26.4533 16.5385ZM30 16.5385C30 20.0424 29.3817 22.8942 28.6117 22.8942C27.8417 22.8942 27.2233 20.0424 27.2233 16.5385C27.2233 13.0345 27.8417 10.1827 28.6117 10.1827C29.3817 10.1827 30 13.0345 30 16.5385Z" fill=currentColor /></g></svg></a></div></div></div></div><div class=footer__copyright>Copyright © 2026 The Apache Software Foundation,Licensed under the <a href=https://www.apache.org/licenses/LICENSE-2.0 target=_blank>Apache License, Version 2.0</a>. Apache, Doris, Apache Doris, the Apache feather logo and the Apache Doris logo are trademarks of The Apache Software Foundation.</div></div></div></div>