---
{
    "title": "Apache Doris vs Trino / Presto",
    "language": "zh-CN"
}

---

{/* Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License. */}

Apache Doris and Trino/Presto are both popular data lakehouse query engines, but Doris outperforms Trino/Presto in terms of performance. While Trino/Presto are primarily query engines, Doris can also function as a standalone data warehouse. This enables enterprises to unify their data warehouse and Lakehouse query engine into one with Doris, simplifying their data architecture

- **Unified**: Doris unifies data warehouse and Lakehouse query engine, simplifying the tech stack

- **10x Query Performance**: Doris native table boosts query performance by up to 10x compared to Presto/Trino

- **2-3x Faster**: Doris as a Lakehouse engine is 2-3x faster than Presto/Trino


## Featured Migration Cases

<div style={{ display:'flex', justifyContent:'space-between' }}>

    <div style={{paddingTop:'2rem', paddingBottom:'2rem',paddingLeft:'2rem',paddingRight:'2.5rem', boxSizing:'border-box', borderWidth:'0.5px', borderRadius:'0.75px', borderColor:'#e5e7eb'}}>
    
        <div style={{ display:'flex', justifyContent:'space-between', flexDirection:'column' }}>
            <div style={{marginBottom:'1.25rem'}}>
                <img alt='tencent-music' loading="lazy" width="200" height="40" decoding="async" data-nimg="1" style={{color:'transparent'}} src="/images/comparisons/cisco.png" />
            </div>
            <div style={{marginBbottom:'1.25rem'}}>
            “As the world-renowed internet giant, our early data platform used Trino, Pinot, Iceberg, and Kyuubi, but faced complexity, redundancy, and poor performance. By replacing them with Apache Doris, we unified its data lakehouse and query engine, **boosting performance and reducing costs by 30%.**”
            </div>
        </div>
    
    </div>

    <div style={{paddingTop:'2rem', paddingBottom:'2rem',paddingLeft:'2rem',paddingRight:'2.5rem', boxSizing:'border-box', borderWidth:'0.5px', borderRadius:'0.75px', borderColor:'#e5e7eb'}}>
    
        <div style={{ display:'flex', justifyContent:'space-between', flexDirection:'column' }}>
            <div style={{marginBottom:'1.25rem'}}>
                <img alt='tencent-music' loading="lazy" width="200" height="40" decoding="async" data-nimg="1" style={{color:'transparent'}} src="/images/comparisons/netease-games.png" />
            </div>
            <div style={{marginBbottom:'1.25rem'}}>
            “After switching from Presto to Doris, query performance significantly improved, **reducing query time from 20-40 seconds to 1-2 seconds.** By designing 2-3 materialized views based on common data dimensions, Doris can automatically match the optimal view for queries, further enhancing performance.”
            </div>
        </div>
    
    </div>

     <div style={{paddingTop:'2rem', paddingBottom:'2rem',paddingLeft:'2rem',paddingRight:'2.5rem', boxSizing:'border-box', borderWidth:'0.5px', borderRadius:'0.75px', borderColor:'#e5e7eb'}}>
    
        <div style={{ display:'flex', justifyContent:'space-between', flexDirection:'column' }}>
            <div style={{marginBottom:'1.25rem'}}>
                <img alt='tencent-music' loading="lazy" width="150" height="40" decoding="async" data-nimg="1" style={{color:'transparent'}} src="/images/comparisons/zto.png" />
            </div>
            <div style={{marginBbottom:'1.25rem'}}>
            “Using Trino and SparkSQL, query latency was at the minute level, and performance was low. **After switching to Doris, performance improved 2 times.** Doris also unified the tech stack, simplifying the management of real-time and interactive analytics tools.”
            </div>            
        </div>
    
    </div>

</div> 


## Apache Doris vs. ClickHouse


<table border="1">
    <thead>
        <tr>
            <th></th>
            <th>Apache Doris</th>
            <th>Trino / Presto</th>
        </tr>
    </thead>
    <tbody>
    <tr>
        <td><strong>Architecture</strong></td>
        <td>
        <ul>
            <li style={{fontSize:'14px'}}>**Unified Architecture:** Combines the capabilities of a data warehouse and a Lakehouse query engine</li>
        </ul>
        </td>
        <td>
        <ul>
            <li style={{fontSize:'14px'}}>**Federated Querying:** Excels in querying across multiple heterogeneous data sources without data movement, but lacks built-in storage</li>
        </ul>
        </td>
    </tr>
      <tr>
        <td><strong>Execution Engine</strong></td>
        <td>
         <ul>
            <li style={{fontSize:'14px'}}>Fully vectorized execution engine implemented in C++, for high-performance data processing</li>
        </ul>
        </td>
        <td>
        <ul>
            <li style={{fontSize:'14px'}}>Implemented primarily in Java, with vectorization currently in development as part of the Hummingbird project</li>
        </ul>
        </td>
    </tr>
    <tr>
        <td><strong>Query Optimizer</strong></td>
        <td>
        <ul>
            <li style={{fontSize:'14px'}}>Advanced query optimizer with cost-based optimization for complex SQL operations like joins, aggregations, and sorting</li>
        </ul>
        </td>
        <td>
        <ul>
            <li style={{fontSize:'14px'}}>Supports cost-based optimization but with less advanced statistics collection and manual full collection</li>
        </ul>
        </td>
    </tr>
    <tr>
        <td><strong>Caching Mechanisms</strong></td>
        <td>
         <ul>
            <li style={{fontSize:'14px'}}>**Metadata Caching:** In-memory metadata caching with TTL, auto-refresh, and incremental synchronization</li>
            <li style={{fontSize:'14px'}}>**Data Caching:** Hot data caching on local SSDs for reduced network I/O</li>
            <li style={{fontSize:'14px'}}>**Query Caching:** SQL Cache and Partition Cache for query result caching</li>
        </ul>
        </td>
        <td>
        <ul>
            <li style={{fontSize:'14px'}}>**Data Caching:** Relies on external caching solutions like Alluxio</li>
        </ul>
        </td>
    </tr>
    <tr>
        <td><strong>Materialized Views</strong></td>
        <td>
        <ul>
            <li style={{fontSize:'14px'}}>**Incremental Refresh:** Supports incremental refresh and multiple update strategies</li>
            <li style={{fontSize:'14px'}}>**Transparent Acceleration:** Query optimizer automatically routes queries to the most suitable materialized views</li>
        </ul>
        </td>
        <td>
          <ul>
            <li style={{fontSize:'14px'}}>**Manual Refresh:** Limited to manual, full refresh with less advanced features</li>
        </ul>
        </td>
    </tr>
    <tr>
        <td><strong>Use Cases</strong></td>
        <td>
        <ul>
            <li style={{fontSize:'14px'}}>High-concurrency real-time analytics</li>
            <li style={{fontSize:'14px'}}>Interactive analytics</li>
        </ul>
        </td>
        <td>
          <ul>
            <li style={{fontSize:'14px'}}>Only Interactive analytics</li>
        </ul>
        </td>
    </tr>
    </tbody>
</table>

## Performance Comparison

### TPC-DS 1TB Benchmark


<div style={{ display:'flex', justifyContent:'space-between', flexDirection:'column', paddingTop:'0.5rem',paddingBottom:'0.5rem'}}>
    <div style={{marginRight:'2rem'}}>
        <p>The TPC-DS 1TB Benchmark evaluates data warehouse performance using a 1TB dataset with 6.35 billion records across 24 tables. It includes 99 complex queries to test joins, aggregations, and subqueries. Based on a snowflake schema, it simulates real-world sales scenarios. The 1TB scale is challenging due to query complexity.</p>
        <p>The test environment consists of:</p>
        <ul>
            <li>1 FE/Coordinator node and 5 BE/Worker nodes.</li>
            <li>Each node has 64 cores, 1.5TB of memory, and SSD storage.</li>
            <li>HDFS is co-located on these nodes, and Hive tables are created.</li>
        </ul>
        <p>In this test, using the same dataset and equal computing service, the results shows that:</p>
        <ul>
            <li>**When data is imported into Doris' internal tables and queried using Doris, it achieves the shortest execution time.**</li>
            <li>**When Doris and Trino are used separately to query data directly from Hive tables, Doris demonstrates superior query acceleration performance in the data lake.**</li>
        </ul>
    </div>
    <div>
        <img alt="TPC-DS 1TB  Benchmark" loading="lazy" width="400" height="338" decoding="async" data-nimg="1" src="/images/comparisons/tpc-ds-1tb-trino.png" style={{color: 'transparent', marginTop:0}} />
    </div>
</div>

