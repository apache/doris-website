"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["315372"],{915956:function(e,n,r){r.r(n),r.d(n,{default:()=>h,frontMatter:()=>d,metadata:()=>i,assets:()=>l,toc:()=>o,contentTitle:()=>c});var i=JSON.parse('{"id":"install/preparation/env-checking","title":"Environment Checking","description":"When deploying Doris, the following checks need to be performed for the hardware and software environment:","source":"@site/docs/install/preparation/env-checking.md","sourceDirName":"install/preparation","slug":"/install/preparation/env-checking","permalink":"/docs/dev/install/preparation/env-checking","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Environment Checking","language":"en"},"sidebar":"docs","previous":{"title":"Apache Doris vs Trino / Presto","permalink":"/docs/dev/gettingStarted/alternatives/alternative-to-trino"},"next":{"title":"Cluster Planning","permalink":"/docs/dev/install/preparation/cluster-planning"}}'),s=r("785893"),t=r("250065");let d={title:"Environment Checking",language:"en"},c=void 0,l={},o=[{value:"Hardware Environment Check",id:"hardware-environment-check",level:2},{value:"CPU Check",id:"cpu-check",level:3},{value:"Memory Check",id:"memory-check",level:3},{value:"Storage Check",id:"storage-check",level:3},{value:"File System Check",id:"file-system-check",level:3},{value:"Network Card Check",id:"network-card-check",level:3},{value:"Server Configuration Recommendations",id:"server-configuration-recommendations",level:2},{value:"Disk Space Calculation",id:"disk-space-calculation",level:2},{value:"Java Environment Check",id:"java-environment-check",level:2}];function a(e){let n={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"When deploying Doris, the following checks need to be performed for the hardware and software environment:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Hardware Environment Check"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Recommended Server Configuration"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Disk Space Calculation"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Java Environment Check"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"hardware-environment-check",children:"Hardware Environment Check"}),"\n",(0,s.jsx)(n.p,{children:"During the hardware environment check, the following hardware conditions should be examined:"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Check Item"}),(0,s.jsx)(n.th,{children:"Expected Result"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"CPU"}),(0,s.jsx)(n.td,{children:"Should support AVX2 instruction set."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Memory"}),(0,s.jsx)(n.td,{children:"Recommended at least 4 times the CPU size."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Storage"}),(0,s.jsx)(n.td,{children:"SSD recommended."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"File System"}),(0,s.jsx)(n.td,{children:"ext4 or xfs file system."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Network Card"}),(0,s.jsx)(n.td,{children:"10 Gigabit network card."})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"cpu-check",children:"CPU Check"}),"\n",(0,s.jsx)(n.p,{children:"When installing Doris, it is recommended to choose a machine that supports the AVX2 instruction set to leverage the vectorization capabilities of AVX2 for query acceleration."}),"\n",(0,s.jsx)(n.p,{children:"Run the following command to check if the machine supports the AVX2 instruction set:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"cat /proc/cpuinfo | grep avx2\n"})}),"\n",(0,s.jsx)(n.p,{children:"If the machine does not support the AVX2 instruction set, you can use the no AVX2 Doris installation package for deployment."}),"\n",(0,s.jsx)(n.h3,{id:"memory-check",children:"Memory Check"}),"\n",(0,s.jsx)(n.p,{children:"Doris does not have strict memory limits. Generally, for production environments, you can choose the memory size based on the following recommendations:"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Component"}),(0,s.jsx)(n.th,{children:"Recommended Memory Configuration"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"FE"}),(0,s.jsx)(n.td,{children:"At least 16GB recommended."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"BE"}),(0,s.jsx)(n.td,{children:"Memory should be at least 4 times the number of CPU cores (for example, for a 16-core machine, at least 64GB memory is recommended). Better performance can be achieved with memory 8 times the number of CPU cores."})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"storage-check",children:"Storage Check"}),"\n",(0,s.jsx)(n.p,{children:"Doris allows data to be stored on SSD, HDD, or object storage during deployment."}),"\n",(0,s.jsx)(n.p,{children:"SSD is recommended for data storage in the following scenarios:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"High-concurrency point query scenarios with large-scale data"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"High-frequency data update scenarios with large-scale data"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"file-system-check",children:"File System Check"}),"\n",(0,s.jsx)(n.p,{children:"Doris recommends using EXT4 or XFS file systems:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"EXT4"}),": The EXT4 file system offers good stability, performance, and lower fragmentation issues."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"XFS"}),": The XFS file system performs excellently in handling large-scale data and high-concurrency write operations, making it suitable for high-throughput applications."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"network-card-check",children:"Network Card Check"}),"\n",(0,s.jsx)(n.p,{children:"Doris involves distributing data partitions across different instances for parallel processing, which results in some network resource overhead. To optimize Doris performance and reduce network resource overhead, it is strongly recommended to use a 10 Gigabit Ethernet (10GbE) or faster network during deployment. If multiple network cards are available, it is recommended to use link aggregation to combine multiple network cards into one virtual interface, which improves network bandwidth, redundancy, and complex balancing capabilities."}),"\n",(0,s.jsx)(n.h2,{id:"server-configuration-recommendations",children:"Server Configuration Recommendations"}),"\n",(0,s.jsx)(n.p,{children:"Doris can be deployed on x86-64 or ARM64 architecture server platforms."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Development and Testing Environments"})}),"\n",(0,s.jsx)(n.p,{children:"In development and testing environments, FE and BE instances can be deployed in a mixed manner, following these guidelines:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"In a validation testing environment, one FE and one BE can be deployed on a single server, but it is not recommended to deploy multiple FE and BE instances on the same machine."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"If 3 replicas of data are required, at least 3 servers are needed, with each server deploying one BE instance."}),"\n"]}),"\n"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Module"}),(0,s.jsx)(n.th,{children:"CPU"}),(0,s.jsx)(n.th,{children:"Memory"}),(0,s.jsx)(n.th,{children:"Disk"}),(0,s.jsx)(n.th,{children:"Network"}),(0,s.jsx)(n.th,{children:"Minimum Instance Count"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Frontend"}),(0,s.jsx)(n.td,{children:"8 cores +"}),(0,s.jsx)(n.td,{children:"8 GB+"}),(0,s.jsx)(n.td,{children:"SSD or SATA, 10 GB+"}),(0,s.jsx)(n.td,{children:"Gigabit/Ten-Gigabit"}),(0,s.jsx)(n.td,{children:"1"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Backend"}),(0,s.jsx)(n.td,{children:"8 cores +"}),(0,s.jsx)(n.td,{children:"16 GB+"}),(0,s.jsx)(n.td,{children:"SSD or SATA, 50 GB+"}),(0,s.jsx)(n.td,{children:"Gigabit/Ten-Gigabit"}),(0,s.jsx)(n.td,{children:"1"})]})]})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Production Environments"})}),"\n",(0,s.jsx)(n.p,{children:"In a production environment, it is recommended to deploy FE and BE instances independently, following these guidelines:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"If resources are limited and FE and BE need to be co-located on the same server, it is advised to store FE and BE data on separate hard drives."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"BE nodes can be configured with multiple hard drives, allowing a single BE instance to utilize multiple HDD or SSD disks."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Recommended server specifications are as follows:"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Module"}),(0,s.jsx)(n.th,{children:"CPU"}),(0,s.jsx)(n.th,{children:"Memory"}),(0,s.jsx)(n.th,{children:"Disk"}),(0,s.jsx)(n.th,{children:"Network"}),(0,s.jsx)(n.th,{children:"Minimum Instance Count"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Frontend"}),(0,s.jsx)(n.td,{children:"16 cores +"}),(0,s.jsx)(n.td,{children:"64 GB+"}),(0,s.jsx)(n.td,{children:"SSD or RAID card, 100 GB+"}),(0,s.jsx)(n.td,{children:"10-Gigabit"}),(0,s.jsx)(n.td,{children:"1"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Backend"}),(0,s.jsx)(n.td,{children:"16 cores +"}),(0,s.jsx)(n.td,{children:"64 GB+"}),(0,s.jsx)(n.td,{children:"SSD or SATA, 100 GB+"}),(0,s.jsx)(n.td,{children:"10-Gigabit"}),(0,s.jsx)(n.td,{children:"3"})]})]})]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"disk-space-calculation",children:"Disk Space Calculation"}),"\n",(0,s.jsx)(n.p,{children:"In the Doris cluster, FE (Frontend) is mainly used for metadata storage, including metadata edit logs and images. BE (Backend) disk space is primarily used for storing data, and it needs to be calculated based on business requirements."}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Component"}),(0,s.jsx)(n.th,{children:"Disk Space Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"FE"}),(0,s.jsx)(n.td,{children:"It is recommended to reserve more than 100 GB of storage space, using SSD disks."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"BE"}),(0,s.jsx)(n.td,{children:"Doris uses LZ4 compression by default. The compression ratio is around 0.3 - 0.5. Disk space should be calculated as total data volume * 3 (for 3 replicas), and 40% of the space should be reserved for backend compaction and temporary data storage."})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"java-environment-check",children:"Java Environment Check"}),"\n",(0,s.jsx)(n.p,{children:"All Doris processes depend on Java:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"For versions before 2.1 (inclusive)"}),": please use Java 8, recommended version: ",(0,s.jsx)(n.code,{children:"jdk-8u352"})," or later."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"For versions from 3.0 (inclusive) onwards"}),": please use Java 17, recommended version: ",(0,s.jsx)(n.code,{children:"jdk-17.0.10"})," or later."]}),"\n"]}),"\n"]})]})}function h(e={}){let{wrapper:n}={...(0,t.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},250065:function(e,n,r){r.d(n,{Z:function(){return c},a:function(){return d}});var i=r(667294);let s={},t=i.createContext(s);function d(e){let n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);