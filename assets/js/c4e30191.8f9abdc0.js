"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["955683"],{205197:function(e,n,i){i.r(n),i.d(n,{default:()=>h,frontMatter:()=>r,metadata:()=>s,assets:()=>l,toc:()=>c,contentTitle:()=>o});var s=JSON.parse('{"id":"releasenotes/v4.0/release-4.0.2","title":"Release 4.0.2","description":"Here\'s a professional translation of the Apache Doris release notes:","source":"@site/docs/releasenotes/v4.0/release-4.0.2.md","sourceDirName":"releasenotes/v4.0","slug":"/releasenotes/v4.0/release-4.0.2","permalink":"/docs/dev/releasenotes/v4.0/release-4.0.2","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1770477659000,"frontMatter":{"title":"Release 4.0.2","language":"en","description":"Here\'s a professional translation of the Apache Doris release notes:"},"sidebar":"docs","previous":{"title":"All Releases","permalink":"/docs/dev/releasenotes/all-release"},"next":{"title":"Release 4.0.1","permalink":"/docs/dev/releasenotes/v4.0/release-4.0.1"}}'),a=i("785893"),t=i("250065");let r={title:"Release 4.0.2",language:"en",description:"Here's a professional translation of the Apache Doris release notes:"},o=void 0,l={},c=[{value:"New Feature",id:"new-feature",level:2},{value:"AI &amp; Search",id:"ai--search",level:3},{value:"Function",id:"function",level:3},{value:"Materialized View (MTMV)",id:"materialized-view-mtmv",level:3},{value:"Data Lake",id:"data-lake",level:3},{value:"Optimizations",id:"optimizations",level:2},{value:"Bug Fixes",id:"bug-fixes",level:2},{value:"Query",id:"query",level:3},{value:"Materialized View and Schema Change",id:"materialized-view-and-schema-change",level:3},{value:"Storage-Compute Separation",id:"storage-compute-separation",level:3},{value:"Data Lake",id:"data-lake-1",level:3},{value:"Others",id:"others",level:3}];function d(e){let n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",ul:"ul",...(0,t.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h2,{id:"new-feature",children:"New Feature"}),"\n",(0,a.jsx)(n.h3,{id:"ai--search",children:"AI & Search"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Inverted index supports custom analyzers, including Pinyin tokenizer and Pinyin filter (#57097)"}),"\n",(0,a.jsx)(n.li,{children:"Added support for multi-position PhraseQuery in inverted index search functions (#57588)"}),"\n",(0,a.jsx)(n.li,{children:"Added Ann index only-scan capability (#57243)"}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"function",children:"Function"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Added the ",(0,a.jsx)(n.code,{children:"sem"})," aggregate function (#57545)"]}),"\n",(0,a.jsxs)(n.li,{children:["Supported the ",(0,a.jsx)(n.code,{children:"factorial"})," simple SQL function derived from Hive (#57144)"]}),"\n",(0,a.jsx)(n.li,{children:"Added support for zero-width assertions in some regular expression functions (#57643)"}),"\n",(0,a.jsx)(n.li,{children:"Enabled GROUP BY and DISTINCT operations for JSON type (#57679)"}),"\n",(0,a.jsxs)(n.li,{children:["Added the ",(0,a.jsx)(n.code,{children:"add_time"}),"/",(0,a.jsx)(n.code,{children:"sub_time"})," time functions (#56200)"]}),"\n",(0,a.jsxs)(n.li,{children:["Added the ",(0,a.jsx)(n.code,{children:"deduplicate_map"})," function (#58403)"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"materialized-view-mtmv",children:"Materialized View (MTMV)"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Materialized views can still participate in transparent query rewrite when data changes occur in their non-partitioned base tables (#56745)"}),"\n",(0,a.jsx)(n.li,{children:"Supported creating MTMV based on views (#56423)"}),"\n",(0,a.jsx)(n.li,{children:"MTMV refresh supports multiple PCT tables (#58140)"}),"\n",(0,a.jsx)(n.li,{children:"Supported window function rewrite when materialized views contain window functions (#55066)"}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"data-lake",children:"Data Lake"}),"\n",(0,a.jsx)(n.p,{children:"Here's a professional translation of the Apache Doris release notes:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Added Doris Catalog\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"This feature enables users to connect multiple independent Doris clusters through the Catalog capability and perform efficient federated data queries, addressing the inability to query data across Doris clusters."}),"\n",(0,a.jsxs)(n.li,{children:["Documentation: ",(0,a.jsx)(n.a,{href:"https://doris.apache.org/docs/4.x/lakehouse/catalogs/doris-catalog",children:"https://doris.apache.org/docs/4.x/lakehouse/catalogs/doris-catalog"})]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["Support for Iceberg table compaction via rewrite_data_files method\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"This operation allows users to merge small Iceberg files, thereby optimizing read performance."}),"\n",(0,a.jsxs)(n.li,{children:["Documentation: ",(0,a.jsx)(n.a,{href:"https://doris.apache.org/docs/4.x/lakehouse/catalogs/iceberg-catalog#rewrite_data_files",children:"https://doris.apache.org/docs/4.x/lakehouse/catalogs/iceberg-catalog#rewrite_data_files"})]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["Support for cache warmup of external tables (Hive, Iceberg, Paimon, etc.) using the WARM UP statement\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Documentation: ",(0,a.jsx)(n.a,{href:"https://doris.apache.org/docs/4.x/lakehouse/data-cache#cache-warmup",children:"https://doris.apache.org/docs/4.x/lakehouse/data-cache#cache-warmup"})]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["Support for Iceberg table Partition Evolution operations via ALTER statement\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Documentation: ",(0,a.jsx)(n.a,{href:"https://doris.apache.org/docs/4.x/lakehouse/catalogs/iceberg-catalog#partition-evolution",children:"https://doris.apache.org/docs/4.x/lakehouse/catalogs/iceberg-catalog#partition-evolution"})]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["Support for HTTP Table Valued Function\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Enables direct reading of HTTP resource files through Table Valued Functions."}),"\n",(0,a.jsxs)(n.li,{children:["Documentation: ",(0,a.jsx)(n.a,{href:"https://doris.apache.org/docs/4.x/sql-manual/sql-functions/table-valued-functions/http",children:"https://doris.apache.org/docs/4.x/sql-manual/sql-functions/table-valued-functions/http"})]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["Supports direct access to datasets on Hugging Face.\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Documentation: ",(0,a.jsx)(n.a,{href:"https://doris.apache.org/docs/4.x/lakehouse/huggingface",children:"https://doris.apache.org/docs/4.x/lakehouse/huggingface"})]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["Support for accessing Microsoft OneLake via Iceberg REST Catalog protocol\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Documentation: ",(0,a.jsx)(n.a,{href:"https://doris.apache.org/docs/4.x/lakehouse/best-practices/doris-onelake",children:"https://doris.apache.org/docs/4.x/lakehouse/best-practices/doris-onelake"})]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["Support for direct mapping of binary types from Hive, Iceberg, Paimon, and JDBC external tables to Doris varbinary type\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:'Please refer to the "Column Mapping" section in each Catalog\'s documentation.'}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"optimizations",children:"Optimizations"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Optimized performance of the ",(0,a.jsx)(n.code,{children:"FROM_UNIXTIME"})," function (#57423)"]}),"\n",(0,a.jsxs)(n.li,{children:["Removed ",(0,a.jsx)(n.code,{children:"castTo"})," conversion operations in PartitionKey comparisons to improve partition processing efficiency (#57518)"]}),"\n",(0,a.jsx)(n.li,{children:"Reduced memory footprint of the Column class in Catalog (#57401)"}),"\n",(0,a.jsx)(n.li,{children:"Ann index now accumulates multiple small batches of data before training to improve training efficiency (#57623)"}),"\n",(0,a.jsx)(n.li,{children:"Upgraded Hadoop dependency to version 3.4.2 (#58307)"}),"\n",(0,a.jsx)(n.li,{children:"Optimized graceful shutdown mechanism for FE and BE to minimize the impact of node exits on queries (#56601)"}),"\n",(0,a.jsx)(n.li,{children:"Improved write efficiency for Hive tables containing a large number of partitions (#58166)"}),"\n",(0,a.jsx)(n.li,{children:"Optimized the issue of excessive memory consumption by Paimon table Splits (#57950)"}),"\n",(0,a.jsx)(n.li,{children:"Improved read efficiency for Parquet RLE_DICTIONARY encoding (#57208)"}),"\n",(0,a.jsx)(n.li,{children:"Optimized graceful shutdown mechanism for FE and BE to minimize the impact of node exits on queries (#56601)"}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"bug-fixes",children:"Bug Fixes"}),"\n",(0,a.jsx)(n.h3,{id:"query",children:"Query"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Fixed the issue where the ",(0,a.jsx)(n.code,{children:"utc_time"})," function returned incorrect results when the input was null (#57716)"]}),"\n",(0,a.jsx)(n.li,{children:"Fixed the exception thrown when UNION ALL is combined with TVF (#57889)"}),"\n",(0,a.jsx)(n.li,{children:"Fixed the problem that the WHERE clause contained non-key columns when creating a materialized view on a unique key table (#57915)"}),"\n",(0,a.jsx)(n.li,{children:"Fixed window functions: enabled constant expression evaluation for the offset parameter of LAG/LEAD (#58200)"}),"\n",(0,a.jsx)(n.li,{children:"Fixed aggregate functions: abnormal push-down of aggregate operations before projection on nullable columns; count push-down aggregation issue on non-null columns (#58234)"}),"\n",(0,a.jsxs)(n.li,{children:["Fixed time functions: the ",(0,a.jsx)(n.code,{children:"second"}),"/",(0,a.jsx)(n.code,{children:"microsecond"})," functions did not handle time literals; ",(0,a.jsx)(n.code,{children:"time_to_sec"})," reported errors due to garbage values when processing null values (#56659, #58410)"]}),"\n",(0,a.jsxs)(n.li,{children:["Fixed AI functions: unknown error occurred when ",(0,a.jsx)(n.code,{children:"_exec_plan_fragment_impl"})," called AI functions (#58521)"]}),"\n",(0,a.jsx)(n.li,{children:"Fixed geo module: memory leak in the geo module (#58004)"}),"\n",(0,a.jsx)(n.li,{children:"Fixed information_schema: timezone format incompatibility when using offset timezone (#58412)"}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"materialized-view-and-schema-change",children:"Materialized View and Schema Change"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Fixed the failure of rewrite when materialized views contain group sets and filters above scan (#57343)"}),"\n",(0,a.jsx)(n.li,{children:"Fixed the coredump issue caused by reading non-overlapping segments from a single rowset during heavy schema change (#57191)"}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"storage-compute-separation",children:"Storage-Compute Separation"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Fixed the issue of broadcast remote read in TopN queries (#58044)"}),"\n",(0,a.jsx)(n.li,{children:"Fixed the accumulation of tablet deletion tasks in the cloud environment (#58131)"}),"\n",(0,a.jsx)(n.li,{children:"Fixed the problem of long service startup time during the first boot in the cloud environment (#58152)"}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"data-lake-1",children:"Data Lake"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Fixed an issue where Hive partition changes could cause metadata cache inconsistency in certain cases (#58707)"}),"\n",(0,a.jsx)(n.li,{children:"Fixed an error when writing to Iceberg tables with TIMESTAMP type partitions (#58603)"}),"\n",(0,a.jsx)(n.li,{children:"Fixed inconsistent Paimon table Incremental Read behavior compared to Spark (#58239)"}),"\n",(0,a.jsx)(n.li,{children:"Fixed a potential deadlock issue caused by external table metadata cache in certain cases (#57856)"}),"\n",(0,a.jsx)(n.li,{children:"Fixed low I/O throughput caused by unreasonable s3 client thread count on the BE side (#58511)"}),"\n",(0,a.jsx)(n.li,{children:"Fixed failures when writing to external tables stored on non-S3 object storage in certain cases (#58504)"}),"\n",(0,a.jsx)(n.li,{children:"Fixed SQL passthrough failures for JDBC Catalog using query() in certain cases (#57745)"}),"\n",(0,a.jsx)(n.li,{children:"Fixed performance degradation in read operations caused by JNI Reader time statistics (#58224)"}),"\n",(0,a.jsx)(n.li,{children:"Fixed an issue where jni.log could not be printed on the BE side (#58457)"}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"others",children:"Others"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Fixed an error when using UNSET GLOBAL variable during non-Master phase (#58285)"}),"\n",(0,a.jsx)(n.li,{children:"Fixed an issue where abnormal export tasks could not be canceled in certain cases (#57488)"}),"\n"]})]})}function h(e={}){let{wrapper:n}={...(0,t.a)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},250065:function(e,n,i){i.d(n,{Z:function(){return o},a:function(){return r}});var s=i(667294);let a={},t=s.createContext(a);function r(e){let n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);