"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["968579"],{294836:function(e,t,n){n.r(t),n.d(t,{default:()=>h,frontMatter:()=>o,metadata:()=>r,assets:()=>l,toc:()=>c,contentTitle:()=>a});var r=JSON.parse('{"id":"table-design/data-partitioning/common-issues","title":"Common Issues","description":"1. Incomplete syntax error prompts may occur in longer table creation statements. Here are some possible syntax errors for manual troubleshooting:","source":"@site/versioned_docs/version-2.0/table-design/data-partitioning/common-issues.md","sourceDirName":"table-design/data-partitioning","slug":"/table-design/data-partitioning/common-issues","permalink":"/docs/2.0/table-design/data-partitioning/common-issues","draft":false,"unlisted":false,"tags":[],"version":"2.0","frontMatter":{"title":"Common Issues","language":"en"},"sidebar":"docs","previous":{"title":"Auto bucket","permalink":"/docs/2.0/table-design/data-partitioning/auto-bucket"},"next":{"title":"Schema Change","permalink":"/docs/2.0/table-design/schema-change"}}'),s=n("785893"),i=n("250065");let o={title:"Common Issues",language:"en"},a=void 0,l={},c=[{value:"More Help",id:"more-help",level:2}];function d(e){let t={a:"a",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",ul:"ul",...(0,i.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"Incomplete syntax error prompts may occur in longer table creation statements. Here are some possible syntax errors for manual troubleshooting:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["Syntax structure errors. Please carefully read ",(0,s.jsx)(t.a,{href:"../../sql-manual/sql-reference/Data-Definition-Statements/Create/CREATE-TABLE",children:"HELP CREATE TABLE"}),"  and check the relevant syntax structure."]}),"\n",(0,s.jsx)(t.li,{children:"Reserved words. When user-defined names encounter reserved words, they need to be enclosed in backticks ``. It is recommended to use this symbol for all custom names."}),"\n",(0,s.jsx)(t.li,{children:"Chinese characters or full-width characters. Non-UTF8 encoded Chinese characters or hidden full-width characters (spaces, punctuation, etc.) can cause syntax errors. It is recommended to use a text editor that displays invisible characters for inspection."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"Failed to create partition [xxx]. Timeout"}),"\n",(0,s.jsxs)(t.p,{children:["Doris creates tables sequentially based on partition granularity. When a partition fails to create, this error may occur. Even if partitions are not used, when there is a problem with table creation, ",(0,s.jsx)(t.code,{children:"Failed to create partition"})," may still be reported because, as mentioned earlier, Doris creates an unmodifiable default partition for tables without specified partitions."]}),"\n",(0,s.jsx)(t.p,{children:"When encountering this error, it is usually because the BE encountered a problem when creating data tablets. You can troubleshoot by following these steps:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["In the fe.log, search for the ",(0,s.jsx)(t.code,{children:"Failed to create partition"})," log entry at the corresponding timestamp. In this log entry, you may find a series of number pairs similar to ",(0,s.jsx)(t.code,{children:"{10001-10010}"}),". The first number in the pair represents the Backend ID, and the second number represents the Tablet ID. For example, this number pair indicates that the creation of Tablet ID 10010 on Backend ID 10001 failed."]}),"\n",(0,s.jsx)(t.li,{children:"Go to the be.INFO log of the corresponding Backend and search for tablet ID-related logs within the corresponding time period to find error messages."}),"\n",(0,s.jsxs)(t.li,{children:["Here are some common tablet creation failure errors, including but not limited to:\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["The BE did not receive the relevant task. In this case, you cannot find tablet ID-related logs in be.INFO or the BE reports success but actually fails. For these issues, please refer to the ",(0,s.jsx)(t.a,{href:"../../install/cluster-deployment/standard-deployment",children:"Installation and Deployment"})," section to check the connectivity between FE and BE."]}),"\n",(0,s.jsx)(t.li,{children:"Pre-allocated memory failure. This may be because the byte length of a row in the table exceeds 100KB."}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"Too many open files"}),". The number of open file handles exceeds the Linux system limit. You need to modify the handle limit of the Linux system."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["If there is a timeout when creating data tablets, you can also extend the timeout by setting ",(0,s.jsx)(t.code,{children:"tablet_create_timeout_second=xxx"})," and ",(0,s.jsx)(t.code,{children:"max_create_table_timeout_second=xxx"})," in the fe.conf file. By default, ",(0,s.jsx)(t.code,{children:"tablet_create_timeout_second"})," is set to 1 second, and ",(0,s.jsx)(t.code,{children:"max_create_table_timeout_second"})," is set to 60 seconds. The overall timeout is calculated as ",(0,s.jsx)(t.code,{children:"min(tablet_create_timeout_second * replication_num, max_create_table_timeout_second)"}),". For specific parameter settings, please refer to the ",(0,s.jsx)(t.a,{href:"../../admin-manual/config/fe-config",children:"FE Configuration"})," section."]}),"\n"]}),"\n",(0,s.jsxs)(t.ol,{start:"3",children:["\n",(0,s.jsx)(t.li,{children:"The table creation command does not return results for a long time."}),"\n"]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Doris's table creation command is a synchronous command. The timeout for this command is currently set simply as (tablet num * replication num) seconds. If many data tablets are created and some of them fail to create, it may result in a long wait before returning an error."}),"\n",(0,s.jsx)(t.li,{children:"Under normal circumstances, the table creation statement should return within a few seconds or tens of seconds. If it exceeds one minute, it is recommended to cancel the operation directly and check the relevant errors in the FE or BE logs."}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"more-help",children:"More Help"}),"\n",(0,s.jsxs)(t.p,{children:["For more detailed information on data partitioning, you can refer to the ",(0,s.jsx)(t.a,{href:"../../sql-manual/sql-reference/Data-Definition-Statements/Create/CREATE-TABLE",children:"CREATE TABLE"})," command manual or enter ",(0,s.jsx)(t.code,{children:"HELP CREATE TABLE;"})," in the MySQL client to get more help information."]})]})}function h(e={}){let{wrapper:t}={...(0,i.a)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},250065:function(e,t,n){n.d(t,{Z:function(){return a},a:function(){return o}});var r=n(667294);let s={},i=r.createContext(s);function o(e){let t=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),r.createElement(i.Provider,{value:t},e.children)}}}]);