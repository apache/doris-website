"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["742195"],{173049:function(e,n,s){s.r(n),s.d(n,{default:()=>p,frontMatter:()=>o,metadata:()=>r,assets:()=>c,toc:()=>l,contentTitle:()=>i});var r=JSON.parse('{"id":"lakehouse/best-practices/doris-lakekeeper","title":"Integration with Lakekeeper","description":"Lakekeeper is an open-source Apache Iceberg REST Catalog implementation written in Rust. It provides a lightweight, high-performance metadata management service that supports multiple storage backends including AWS S3, Alibaba Cloud OSS, and MinIO.","source":"@site/versioned_docs/version-3.x/lakehouse/best-practices/doris-lakekeeper.md","sourceDirName":"lakehouse/best-practices","slug":"/lakehouse/best-practices/doris-lakekeeper","permalink":"/docs/3.x/lakehouse/best-practices/doris-lakekeeper","draft":false,"unlisted":false,"tags":[],"version":"3.x","lastUpdatedAt":1770477659000,"frontMatter":{"title":"Integration with Lakekeeper","language":"en"},"sidebar":"docs","previous":{"title":"Integration with Databricks Unity Catalog","permalink":"/docs/3.x/lakehouse/best-practices/doris-unity-catalog"},"next":{"title":"Integration with Nessie","permalink":"/docs/3.x/lakehouse/best-practices/doris-nessie"}}'),a=s("785893"),t=s("250065");let o={title:"Integration with Lakekeeper",language:"en"},i=void 0,c={},l=[{value:"1. AWS Environment Preparation",id:"1-aws-environment-preparation",level:2},{value:"1.1 Create S3 Storage Bucket",id:"11-create-s3-storage-bucket",level:3},{value:"1.2 Create IAM Role for Object Storage Access",id:"12-create-iam-role-for-object-storage-access",level:3},{value:"2. Lakekeeper Deployment and Warehouse Creation",id:"2-lakekeeper-deployment-and-warehouse-creation",level:2},{value:"2.1 Deploy Lakekeeper Using Docker Compose",id:"21-deploy-lakekeeper-using-docker-compose",level:3},{value:"2.2 Create Project and Warehouse",id:"22-create-project-and-warehouse",level:3},{value:"3. Doris Connection to Lakekeeper",id:"3-doris-connection-to-lakekeeper",level:2},{value:"Method 1: Temporary Storage Credentials (Credential Vending)",id:"method-1-temporary-storage-credentials-credential-vending",level:3},{value:"Method 2: Static Storage Credentials (AK/SK)",id:"method-2-static-storage-credentials-aksk",level:3},{value:"4. Verify Connection in Doris",id:"4-verify-connection-in-doris",level:2}];function d(e){let n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.a,{href:"https://lakekeeper.io/",children:"Lakekeeper"})," is an open-source Apache Iceberg REST Catalog implementation written in Rust. It provides a lightweight, high-performance metadata management service that supports multiple storage backends including AWS S3, Alibaba Cloud OSS, and MinIO."]}),"\n",(0,a.jsx)(n.p,{children:"This article will guide you through integrating Apache Doris with Lakekeeper to achieve efficient querying and management of Iceberg data. We will take you through the entire process from environment preparation to final querying step by step."}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Through this document, you will learn:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"AWS Environment Preparation"}),": How to create and configure S3 storage buckets in AWS, and prepare necessary IAM roles and policies for Lakekeeper, enabling Lakekeeper to access S3 and distribute access credentials to Doris."]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Lakekeeper Deployment and Configuration"}),": How to deploy Lakekeeper service using Docker Compose, and create Project and Warehouse in Lakekeeper to provide metadata access endpoints for Doris."]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Doris Connection to Lakekeeper"}),": How to use Doris to access Iceberg data through Lakekeeper for read and write operations."]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"1-aws-environment-preparation",children:"1. AWS Environment Preparation"}),"\n",(0,a.jsx)(n.p,{children:"Before we begin, we need to prepare S3 storage buckets and corresponding IAM roles on AWS, which forms the foundation for Lakekeeper to manage data and Doris to access data."}),"\n",(0,a.jsx)(n.h3,{id:"11-create-s3-storage-bucket",children:"1.1 Create S3 Storage Bucket"}),"\n",(0,a.jsxs)(n.p,{children:["First, we create an S3 Bucket named ",(0,a.jsx)(n.code,{children:"lakekeeper-doris-demo"})," to store Iceberg table data that will be created later."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# Create S3 storage bucket\naws s3 mb s3://lakekeeper-doris-demo --region us-east-1\n# Verify bucket creation success\naws s3 ls | grep lakekeeper-doris-demo\n"})}),"\n",(0,a.jsx)(n.h3,{id:"12-create-iam-role-for-object-storage-access",children:"1.2 Create IAM Role for Object Storage Access"}),"\n",(0,a.jsx)(n.p,{children:"To implement secure credential management, we need to create an IAM role for Lakekeeper to use through the STS AssumeRole mechanism. This design follows the security best practices of least privilege principle and separation of duties."}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Create trust policy file"}),"\n",(0,a.jsxs)(n.p,{children:["Create ",(0,a.jsx)(n.code,{children:"lakekeeper-trust-policy.json"})," file:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'cat > lakekeeper-trust-policy.json << \'EOF\'\n{\n    "Version": "2012-10-17",\n    "Statement": [\n    {\n        "Effect": "Allow",\n        "Principal": {\n            "AWS": "arn:aws:iam::YOUR_ACCOUNT_ID:user/YOUR_USER"\n        },\n        "Action": "sts:AssumeRole"\n    }\n    ]\n}\nEOF\n'})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsxs)(n.p,{children:["Note: Please replace YOUR_ACCOUNT_ID with your actual AWS Account ID, which can be obtained via ",(0,a.jsx)(n.code,{children:"aws sts get-caller-identity --query Account --output text"}),". Replace YOUR_USER with the actual IAM username."]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Create IAM Role"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'aws iam create-role \\\n    --role-name lakekeeper-sts-role \\\n    --assume-role-policy-document file://lakekeeper-trust-policy.json \\\n    --description "IAM Role for Lakekeeper to access S3 storage"\n'})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Attach S3 access permission policy"}),"\n",(0,a.jsxs)(n.p,{children:["Create ",(0,a.jsx)(n.code,{children:"lakekeeper-s3-policy.json"})," file:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'cat > lakekeeper-s3-policy.json << \'EOF\'\n{\n    "Version": "2012-10-17",\n    "Statement": [{\n        "Effect": "Allow",\n        "Action": [\n            "s3:ListBucket",\n            "s3:GetBucketLocation",\n            "s3:ListBucketMultipartUploads",\n            "s3:ListMultipartUploadParts",\n            "s3:AbortMultipartUpload",\n            "s3:GetObject",\n            "s3:PutObject",\n            "s3:DeleteObject"\n        ],\n        "Resource": [\n            "arn:aws:s3:::lakekeeper-doris-demo",\n            "arn:aws:s3:::lakekeeper-doris-demo/*"\n        ]\n    }]\n}\nEOF\n'})}),"\n",(0,a.jsx)(n.p,{children:"Attach the policy to the role:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"aws iam put-role-policy \\\n    --role-name lakekeeper-sts-role \\\n    --policy-name lakekeeper-s3-access \\\n    --policy-document file://lakekeeper-s3-policy.json\n"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Grant AssumeRole permission to the user"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'cat > user-assume-policy.json << \'EOF\'\n{\n    "Version": "2012-10-17",\n    "Statement": [{\n        "Effect": "Allow",\n        "Action": "sts:AssumeRole",\n        "Resource": "arn:aws:iam::YOUR_ACCOUNT_ID:role/lakekeeper-sts-role"\n    }]\n}\nEOF\n\naws iam put-user-policy \\\n    --user-name YOUR_USER \\\n    --policy-name allow-assume-lakekeeper-role \\\n    --policy-document file://user-assume-policy.json\n'})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Verify creation results"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"aws iam get-role --role-name lakekeeper-sts-role\naws iam list-role-policies --role-name lakekeeper-sts-role\n\n# Verify AssumeRole is available\naws sts assume-role \\\n    --role-arn arn:aws:iam::YOUR_ACCOUNT_ID:role/lakekeeper-sts-role \\\n    --role-session-name lakekeeper-test\n"})}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"2-lakekeeper-deployment-and-warehouse-creation",children:"2. Lakekeeper Deployment and Warehouse Creation"}),"\n",(0,a.jsx)(n.p,{children:"After environment preparation is complete, we begin deploying the Lakekeeper service and configuring the Warehouse."}),"\n",(0,a.jsx)(n.h3,{id:"21-deploy-lakekeeper-using-docker-compose",children:"2.1 Deploy Lakekeeper Using Docker Compose"}),"\n",(0,a.jsxs)(n.p,{children:["Create a ",(0,a.jsx)(n.code,{children:"docker-compose.yml"})," file:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'services:\n  db:\n    image: postgres:17\n    environment:\n      POSTGRES_PASSWORD: postgres\n    volumes:\n      - pgdata:/var/lib/postgresql/data\n    healthcheck:\n      test: ["CMD-SHELL", "pg_isready -U postgres -p 5432 -d postgres"]\n      interval: 2s\n      timeout: 10s\n      retries: 10\n\n  migrate:\n    image: quay.io/lakekeeper/catalog:latest-main\n    restart: "no"\n    environment:\n      - LAKEKEEPER__PG_DATABASE_URL_READ=postgresql://postgres:postgres@db:5432/postgres\n      - LAKEKEEPER__PG_DATABASE_URL_WRITE=postgresql://postgres:postgres@db:5432/postgres\n      - LAKEKEEPER__PG_ENCRYPTION_KEY=CHANGE_ME_TO_A_LONG_RANDOM_SECRET\n      - RUST_LOG=info\n    command: ["migrate"]\n    depends_on:\n      db:\n        condition: service_healthy\n\n  lakekeeper:\n    image: quay.io/lakekeeper/catalog:latest-main\n    environment:\n      - LAKEKEEPER__PG_DATABASE_URL_READ=postgresql://postgres:postgres@db:5432/postgres\n      - LAKEKEEPER__PG_DATABASE_URL_WRITE=postgresql://postgres:postgres@db:5432/postgres\n      - LAKEKEEPER__PG_ENCRYPTION_KEY=CHANGE_ME_TO_A_LONG_RANDOM_SECRET\n      - LAKEKEEPER__BASE_URI=http://YOUR_HOST_IP:8181\n      - LAKEKEEPER__ENABLE_DEFAULT_PROJECT=true\n      - RUST_LOG=info\n    command: ["serve"]\n    ports:\n      - "8181:8181"\n    depends_on:\n      migrate:\n        condition: service_completed_successfully\n      db:\n        condition: service_healthy\n\nvolumes:\n  pgdata:\n'})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Key Configuration Parameters:"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Parameter"}),(0,a.jsx)(n.th,{children:"Description"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"LAKEKEEPER__PG_ENCRYPTION_KEY"})}),(0,a.jsx)(n.td,{children:"Used to encrypt sensitive secrets stored in Postgres when using the default Postgres secret backend. Should be set to a sufficiently long random string."})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"LAKEKEEPER__BASE_URI"})}),(0,a.jsxs)(n.td,{children:["The base URI of the Lakekeeper service. Replace ",(0,a.jsx)(n.code,{children:"YOUR_HOST_IP"})," with your actual host IP address."]})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"LAKEKEEPER__ENABLE_DEFAULT_PROJECT"})}),(0,a.jsxs)(n.td,{children:["When set to ",(0,a.jsx)(n.code,{children:"true"}),", enables the default project feature."]})]})]})]}),"\n",(0,a.jsx)(n.p,{children:"Start Lakekeeper:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"docker compose up -d\n"})}),"\n",(0,a.jsx)(n.p,{children:"After starting, you can access the following endpoints:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Swagger UI: ",(0,a.jsx)(n.code,{children:"http://YOUR_HOST_IP:8181/swagger-ui/"})]}),"\n",(0,a.jsxs)(n.li,{children:["Web UI: ",(0,a.jsx)(n.code,{children:"http://YOUR_HOST_IP:8181/ui"})]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"22-create-project-and-warehouse",children:"2.2 Create Project and Warehouse"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Create Project"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'curl -i -X POST "http://localhost:8181/management/v1/project" \\\n  -H "Content-Type: application/json" \\\n  --data \'{"project-name":"default"}\'\n'})}),"\n",(0,a.jsx)(n.p,{children:"Verify:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'curl -s "http://localhost:8181/management/v1/project-list"\n'})}),"\n",(0,a.jsxs)(n.p,{children:["Note the ",(0,a.jsx)(n.code,{children:"project-id"})," from the response, which will be used as ",(0,a.jsx)(n.code,{children:"PROJECT_ID"})," in subsequent steps."]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Create Warehouse (Credential Vending Mode)"}),"\n",(0,a.jsxs)(n.p,{children:["If you need to use Credential Vending mode, create the warehouse configuration file ",(0,a.jsx)(n.code,{children:"create-warehouse-vc.json"}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'cat > create-warehouse-vc.json <<\'JSON\'\n{\n  "warehouse-name": "lakekeeper-vc-warehouse",\n  "storage-profile": {\n    "type": "s3",\n    "bucket": "lakekeeper-doris-demo",\n    "key-prefix": "warehouse-vc",\n    "region": "us-east-1",\n    "endpoint": "https://s3.us-east-1.amazonaws.com",\n    "sts-enabled": true,\n    "flavor": "aws",\n    "assume-role-arn": "arn:aws:iam::YOUR_ACCOUNT_ID:role/lakekeeper-sts-role"\n  },\n  "storage-credential": {\n    "type": "s3",\n    "credential-type": "access-key",\n    "aws-access-key-id": "YOUR_ACCESS_KEY",\n    "aws-secret-access-key": "YOUR_SECRET_KEY"\n  }\n}\nJSON\n'})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"sts-enabled"}),": Set to ",(0,a.jsx)(n.code,{children:"true"})," to enable Credential Vending."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"assume-role-arn"}),": The IAM Role ARN that Lakekeeper will assume to access S3."]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Create the warehouse:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'curl -i -X POST "http://localhost:8181/management/v1/warehouse" \\\n  -H "Content-Type: application/json" \\\n  -H "x-project-id: $PROJECT_ID" \\\n  --data @create-warehouse-vc.json\n'})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Create Warehouse (Static Credentials Mode)"}),"\n",(0,a.jsxs)(n.p,{children:["Create the warehouse configuration file ",(0,a.jsx)(n.code,{children:"create-warehouse-static.json"}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'cat > create-warehouse-static.json <<\'JSON\'\n{\n  "warehouse-name": "lakekeeper-warehouse",\n  "storage-profile": {\n    "type": "s3",\n    "bucket": "lakekeeper-doris-demo",\n    "key-prefix": "warehouse",\n    "region": "us-east-1",\n    "endpoint": "https://s3.us-east-1.amazonaws.com",\n    "sts-enabled": false,\n    "flavor": "aws"\n  },\n  "storage-credential": {\n    "type": "s3",\n    "credential-type": "access-key",\n    "aws-access-key-id": "YOUR_ACCESS_KEY",\n    "aws-secret-access-key": "YOUR_SECRET_KEY"\n  }\n}\nJSON\n'})}),"\n",(0,a.jsx)(n.p,{children:"Create the warehouse:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'curl -i -X POST "http://localhost:8181/management/v1/warehouse" \\\n  -H "Content-Type: application/json" \\\n  -H "x-project-id: $PROJECT_ID" \\\n  --data @create-warehouse-static.json\n'})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Verify Warehouse Creation"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'curl -s "http://localhost:8181/management/v1/warehouse" \\\n  -H "x-project-id: $PROJECT_ID"\n'})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Create Namespace"}),"\n",(0,a.jsxs)(n.p,{children:["Note the ",(0,a.jsx)(n.code,{children:"warehouse-id"})," from the previous step's response, which will be used to create the Namespace:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'curl -sS -X POST \\\n  -H "Content-Type: application/json" \\\n  -H "Accept: application/json" \\\n  "http://localhost:8181/catalog/v1/$WAREHOUSE_ID/namespaces" \\\n  -d \'{\n    "namespace": ["demo"],\n    "properties": {}\n  }\'\n'})}),"\n",(0,a.jsxs)(n.p,{children:["This creates a Namespace (database) named ",(0,a.jsx)(n.code,{children:"demo"})," under the Warehouse."]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"At this point, all Lakekeeper-side configuration is complete."}),"\n",(0,a.jsx)(n.h2,{id:"3-doris-connection-to-lakekeeper",children:"3. Doris Connection to Lakekeeper"}),"\n",(0,a.jsx)(n.p,{children:"Now, we will create an Iceberg Catalog in Doris that connects to the newly configured Lakekeeper service."}),"\n",(0,a.jsx)(n.h3,{id:"method-1-temporary-storage-credentials-credential-vending",children:"Method 1: Temporary Storage Credentials (Credential Vending)"}),"\n",(0,a.jsxs)(n.p,{children:["This is the ",(0,a.jsx)(n.strong,{children:"most recommended"})," approach. When needing to read/write data files on S3, Doris requests a temporary, minimally-privileged S3 access credential from Lakekeeper."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:"CREATE CATALOG lakekeeper_vc PROPERTIES (\n    'type' = 'iceberg',\n    'iceberg.catalog.type' = 'rest',\n    'iceberg.rest.uri' = 'http://YOUR_LAKEKEEPER_HOST:8181/catalog',\n    'warehouse' = 'lakekeeper-vc-warehouse',\n    -- Enable credential vending\n    'iceberg.rest.vended-credentials-enabled' = 'true'\n);\n"})}),"\n",(0,a.jsx)(n.h3,{id:"method-2-static-storage-credentials-aksk",children:"Method 2: Static Storage Credentials (AK/SK)"}),"\n",(0,a.jsx)(n.p,{children:"In this approach, Doris directly uses static AK/SK hardcoded in the configuration to access object storage. This method is simple to configure and suitable for quick testing, but has lower security."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:"CREATE CATALOG lakekeeper_static PROPERTIES (\n    'type' = 'iceberg',\n    'iceberg.catalog.type' = 'rest',\n    'iceberg.rest.uri' = 'http://YOUR_LAKEKEEPER_HOST:8181/catalog',\n    'warehouse' = 'lakekeeper-warehouse',\n    -- Directly provide S3 access keys\n    's3.access_key' = 'YOUR_ACCESS_KEY',\n    's3.secret_key' = 'YOUR_SECRET_KEY',\n    's3.endpoint' = 'https://s3.us-east-1.amazonaws.com',\n    's3.region' = 'us-east-1'\n);\n"})}),"\n",(0,a.jsx)(n.h2,{id:"4-verify-connection-in-doris",children:"4. Verify Connection in Doris"}),"\n",(0,a.jsx)(n.p,{children:"Regardless of which method you used to create the Catalog, you can verify end-to-end connectivity through the following SQL."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:"-- Switch to the Catalog and Namespace configured in Lakekeeper\nUSE lakekeeper_static.demo;\n\n-- Create an Iceberg table\nCREATE TABLE my_iceberg_table (\n  id INT,\n  name STRING\n)\nPROPERTIES (\n  'write-format'='parquet'\n);\n\n-- Insert data\nINSERT INTO my_iceberg_table VALUES (1, 'Doris'), (2, 'Lakekeeper');\n\n-- Query data\nSELECT * FROM my_iceberg_table;\n-- Expected result:\n-- +------+------------+\n-- | id   | name       |\n-- +------+------------+\n-- | 1    | Doris      |\n-- | 2    | Lakekeeper |\n-- +------+------------+\n"})}),"\n",(0,a.jsx)(n.p,{children:"If all the above operations complete successfully, congratulations! You have successfully established the complete data lake pipeline: Doris -> Lakekeeper -> S3."}),"\n",(0,a.jsx)(n.p,{children:"For more information on using Doris to manage Iceberg tables, please visit:"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"https://doris.apache.org/docs/lakehouse/catalogs/iceberg-catalog",children:"https://doris.apache.org/docs/lakehouse/catalogs/iceberg-catalog"})})]})}function p(e={}){let{wrapper:n}={...(0,t.a)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},250065:function(e,n,s){s.d(n,{Z:function(){return i},a:function(){return o}});var r=s(667294);let a={},t=r.createContext(a);function o(e){let n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);