"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["368014"],{356041:function(e,n,t){t.r(n),t.d(n,{default:()=>d,frontMatter:()=>r,metadata:()=>s,assets:()=>o,toc:()=>c,contentTitle:()=>l});var s=JSON.parse('{"id":"sql-manual/sql-functions/scalar-functions/quantile-functions/to-quantile-state","title":"TO_QUANTILE_STATE","description":"This function converts numeric types to QUANTILESTATE type. The compression parameter is optional and can be set in the range [2048, 10000].","source":"@site/versioned_docs/version-4.x/sql-manual/sql-functions/scalar-functions/quantile-functions/to-quantile-state.md","sourceDirName":"sql-manual/sql-functions/scalar-functions/quantile-functions","slug":"/sql-manual/sql-functions/scalar-functions/quantile-functions/to-quantile-state","permalink":"/docs/4.x/sql-manual/sql-functions/scalar-functions/quantile-functions/to-quantile-state","draft":false,"unlisted":false,"tags":[],"version":"4.x","lastUpdatedAt":1770477659000,"frontMatter":{"title":"TO_QUANTILE_STATE","language":"en","description":"This function converts numeric types to QUANTILESTATE type. The compression parameter is optional and can be set in the range [2048, 10000]."},"sidebar":"docs","previous":{"title":"QUANTILE_STATE_EMPTY","permalink":"/docs/4.x/sql-manual/sql-functions/scalar-functions/quantile-functions/quantile-state-empty"},"next":{"title":"COALESCE","permalink":"/docs/4.x/sql-manual/sql-functions/scalar-functions/conditional-functions/coalesce"}}'),a=t("785893"),i=t("250065");let r={title:"TO_QUANTILE_STATE",language:"en",description:"This function converts numeric types to QUANTILESTATE type. The compression parameter is optional and can be set in the range [2048, 10000]."},l=void 0,o={},c=[{value:"Description",id:"description",level:2},{value:"Syntax",id:"syntax",level:2},{value:"Parameters",id:"parameters",level:2},{value:"Return value",id:"return-value",level:2},{value:"Example",id:"example",level:2}];function u(e){let n={code:"code",h2:"h2",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h2,{id:"description",children:"Description"}),"\n",(0,a.jsxs)(n.p,{children:["This function converts numeric types to ",(0,a.jsx)(n.code,{children:"QUANTILE_STATE"})," type. The compression parameter is optional and can be set in the range [2048, 10000]. The larger the value, the higher the accuracy of subsequent quantile approximation calculations, the greater the memory consumption, and the longer the calculation time. If the compression parameter is not specified or the value is set outside the range [2048, 10000], it runs with the default value of 2048."]}),"\n",(0,a.jsx)(n.h2,{id:"syntax",children:"Syntax"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:"TO_QUANTILE_STATE(<raw_data> <compression>)\n"})}),"\n",(0,a.jsx)(n.h2,{id:"parameters",children:"Parameters"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Parameter"}),(0,a.jsx)(n.th,{children:"Description"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"<raw_data>"})}),(0,a.jsx)(n.td,{children:"The target column."})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"<compression>"})}),(0,a.jsx)(n.td,{children:"Compression threshold."})]})]})]}),"\n",(0,a.jsx)(n.h2,{id:"return-value",children:"Return value"}),"\n",(0,a.jsxs)(n.p,{children:["The converted column of ",(0,a.jsx)(n.code,{children:"QUANTILE_STATE"})," type."]}),"\n",(0,a.jsx)(n.h2,{id:"example",children:"Example"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:'CREATE TABLE IF NOT EXISTS quantile_state_agg_test (\n         `dt` int(11) NULL COMMENT "",\n         `id` int(11) NULL COMMENT "",\n         `price` quantile_state QUANTILE_UNION NOT NULL COMMENT ""\n        ) ENGINE=OLAP\n        AGGREGATE KEY(`dt`, `id`)\n        COMMENT "OLAP"\n        DISTRIBUTED BY HASH(`dt`) BUCKETS 1\n        PROPERTIES ("replication_num" = "1");\n\nINSERT INTO quantile_state_agg_test VALUES(20220201,0, to_quantile_state(1, 2048));\n\nINSERT INTO quantile_state_agg_test VALUES(20220201,1, to_quantile_state(-1, 2048)),\n            (20220201,1, to_quantile_state(0, 2048)),(20220201,1, to_quantile_state(1, 2048)),\n            (20220201,1, to_quantile_state(2, 2048)),(20220201,1, to_quantile_state(3, 2048));\n\nSELECT dt, id, quantile_percent(quantile_union(price), 0) FROM quantile_state_agg_test GROUP BY dt, id ORDER BY dt, id\n'})}),"\n",(0,a.jsx)(n.p,{children:"Result is"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-text",children:"+----------+------+--------------------------------------------+\n| dt       | id   | quantile_percent(quantile_union(price), 0) |\n+----------+------+--------------------------------------------+\n| 20220201 |    0 |                                          1 |\n| 20220201 |    1 |                                         -1 |\n+----------+------+--------------------------------------------+\n"})})]})}function d(e={}){let{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(u,{...e})}):u(e)}},250065:function(e,n,t){t.d(n,{Z:function(){return l},a:function(){return r}});var s=t(667294);let a={},i=s.createContext(a);function r(e){let n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);