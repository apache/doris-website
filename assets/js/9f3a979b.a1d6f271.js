"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["342510"],{48065:function(e,n,o){o.r(n),o.d(n,{default:()=>h,frontMatter:()=>l,metadata:()=>t,assets:()=>d,toc:()=>c,contentTitle:()=>a});var t=JSON.parse('{"id":"developer-guide/cpp-format-code","title":"C++ Format Code","description":"\x3c!--","source":"@site/community/developer-guide/cpp-format-code.md","sourceDirName":"developer-guide","slug":"/developer-guide/cpp-format-code","permalink":"/community/developer-guide/cpp-format-code","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"C++ Format Code","language":"en"},"sidebar":"community","previous":{"title":"Java Format Code","permalink":"/community/developer-guide/java-format-code"},"next":{"title":"C++ Code Diagnostic","permalink":"/community/developer-guide/cpp-diagnostic-code"}}'),i=o("785893"),r=o("250065");let l={title:"C++ Format Code",language:"en"},a="C++ code formatting",d={},c=[{value:"Code style customization",id:"code-style-customization",level:2},{value:"Environmental preparation",id:"environmental-preparation",level:2},{value:"Download and install clang-format",id:"download-and-install-clang-format",level:3},{value:"clang-format plugin",id:"clang-format-plugin",level:3},{value:"How to use",id:"how-to-use",level:2},{value:"Command line operation",id:"command-line-operation",level:3},{value:"Use clang-format in IDE or Editor",id:"use-clang-format-in-ide-or-editor",level:3},{value:"Clion",id:"clion",level:4},{value:"VS Code",id:"vs-code",level:4}];function s(e){let n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"c-code-formatting",children:"C++ code formatting"})}),"\n",(0,i.jsx)(n.p,{children:"Doris uses clang-format for code formatting, and provides a package script in the build-support directory:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"clang-format.sh"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["Format the C/C++ code in the ",(0,i.jsx)(n.code,{children:"be/src"})," and ",(0,i.jsx)(n.code,{children:"be/test"})," directories."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"check-format.sh"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["Check the C/C++ code format in the ",(0,i.jsx)(n.code,{children:"be/src"})," and ",(0,i.jsx)(n.code,{children:"be/test"})," directories, and output diff, but the content of the file will not be modified."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"code-style-customization",children:"Code style customization"}),"\n",(0,i.jsxs)(n.p,{children:["The code style of Doris is slightly modified on the basis of Google Style and is customized as a ",(0,i.jsx)(n.code,{children:".clang-format"})," file located in the root directory of Doris."]}),"\n",(0,i.jsxs)(n.p,{children:["Currently, the ",(0,i.jsx)(n.code,{children:".clang-format"})," configuration file is adapted to versions above clang-format-16.0.0."]}),"\n",(0,i.jsxs)(n.p,{children:["The code that you do not want to be formatted is recorded in the ",(0,i.jsx)(n.code,{children:".clang-format-ignore"})," file. These codes usually come from third-party code bases, and it is recommended to keep the original code style."]}),"\n",(0,i.jsx)(n.h2,{id:"environmental-preparation",children:"Environmental preparation"}),"\n",(0,i.jsx)(n.p,{children:"You need to download and install clang-format, or you can use the clang-format plug-in provided by IDE or Editor, as described below."}),"\n",(0,i.jsx)(n.h3,{id:"download-and-install-clang-format",children:"Download and install clang-format"}),"\n",(0,i.jsx)(n.p,{children:"The current doris uses clang-format 16 for code formatting (different versions of clang-format may produce different code formats)."}),"\n",(0,i.jsx)(n.p,{children:"Linux: You can use the LDB toolchain directly, which already comes with a corresponding version of clang-format. Or install or compile the binary by yourself in other ways."}),"\n",(0,i.jsxs)(n.p,{children:["Mac: ",(0,i.jsx)(n.code,{children:"brew install clang-format@16"})]}),"\n",(0,i.jsx)(n.p,{children:"LDB toolchain:"}),"\n",(0,i.jsxs)(n.p,{children:["If you are using ",(0,i.jsx)(n.a,{href:"/docs/install/source-install/compilation-with-ldb-toolchain",children:"LDB toolchain"}),",\nthe latest version (>= v0.18) of ",(0,i.jsx)(n.a,{href:"https://github.com/amosbird/ldb_toolchain_gen/releases",children:"LDB toolchain"})," has already included clang-format with 16.0.0 version."]}),"\n",(0,i.jsx)(n.h3,{id:"clang-format-plugin",children:"clang-format plugin"}),"\n",(0,i.jsxs)(n.p,{children:['Clion IDE can use the plug-in "ClangFormat", search and download in ',(0,i.jsx)(n.code,{children:"File->Setting->Plugins"}),". However, you need to confirm whether the clang-format version is 16."]}),"\n",(0,i.jsx)(n.h2,{id:"how-to-use",children:"How to use"}),"\n",(0,i.jsx)(n.h3,{id:"command-line-operation",children:"Command line operation"}),"\n",(0,i.jsx)(n.p,{children:"cd to the root directory of Doris, and then execute the following command:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"build-support/clang-format.sh"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Note: The ",(0,i.jsx)(n.code,{children:"clang-format.sh"})," script requires python 3 to be installed on your machine"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"use-clang-format-in-ide-or-editor",children:"Use clang-format in IDE or Editor"}),"\n",(0,i.jsx)(n.h4,{id:"clion",children:"Clion"}),"\n",(0,i.jsxs)(n.p,{children:["If Clion uses a plug-in, just click ",(0,i.jsx)(n.code,{children:"Reformat Code"}),"."]}),"\n",(0,i.jsx)(n.h4,{id:"vs-code",children:"VS Code"}),"\n",(0,i.jsx)(n.p,{children:"VS Code needs to install the extension Clang-Format, but you need to provide the location of the clang-format execution program."}),"\n",(0,i.jsx)(n.p,{children:'Open the VS Code configuration page, directly search for "clang_format", and fill in'}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'"clang_format_path": "$clang-format path$",\n"clang_format_style": "file"\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Then, right-click on ",(0,i.jsx)(n.code,{children:"Format Document"}),"."]})]})}function h(e={}){let{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(s,{...e})}):s(e)}},250065:function(e,n,o){o.d(n,{Z:function(){return a},a:function(){return l}});var t=o(667294);let i={},r=t.createContext(i);function l(e){let n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);