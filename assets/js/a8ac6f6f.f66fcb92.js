"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["725884"],{124996:function(e,n,t){t.r(n),t.d(n,{default:()=>h,frontMatter:()=>r,metadata:()=>s,assets:()=>o,toc:()=>c,contentTitle:()=>l});var s=JSON.parse('{"id":"sql-manual/sql-statements/system-info-and-help/SHOW-PROC","title":"SHOW PROC","description":"The Proc system is a unique feature of Doris. Students who have used Linux may understand this concept better. In Linux systems,","source":"@site/versioned_docs/version-2.1/sql-manual/sql-statements/system-info-and-help/SHOW-PROC.md","sourceDirName":"sql-manual/sql-statements/system-info-and-help","slug":"/sql-manual/sql-statements/system-info-and-help/SHOW-PROC","permalink":"/docs/2.1/sql-manual/sql-statements/system-info-and-help/SHOW-PROC","draft":false,"unlisted":false,"tags":[],"version":"2.1","lastUpdatedAt":1770477659000,"frontMatter":{"title":"SHOW PROC","language":"en","description":"The Proc system is a unique feature of Doris. Students who have used Linux may understand this concept better. In Linux systems,"},"sidebar":"docs","previous":{"title":"SHOW TYPECAST","permalink":"/docs/2.1/sql-manual/sql-statements/types/SHOW-TYPECAST"},"next":{"title":"All Releases","permalink":"/docs/2.1/releasenotes/all-release"}}'),a=t("785893"),i=t("250065");let r={title:"SHOW PROC",language:"en",description:"The Proc system is a unique feature of Doris. Students who have used Linux may understand this concept better. In Linux systems,"},l=void 0,o={},c=[{value:"Description",id:"description",level:2},{value:"Examples",id:"examples",level:2},{value:"Keywords",id:"keywords",level:2},{value:"Best Practice",id:"best-practice",level:2}];function d(e){let n={a:"a",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,i.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h2,{id:"description",children:"Description"}),"\n",(0,a.jsx)(n.p,{children:"The Proc system is a unique feature of Doris. Students who have used Linux may understand this concept better. In Linux systems, proc is a virtual file system, usually mounted in the /proc directory. Users can view the internal data structure of the system through this file system. For example, you can view the details of the specified pid process through /proc/pid."}),"\n",(0,a.jsx)(n.p,{children:'Similar to the proc system in Linux, the proc system in Doris is also organized into a directory-like structure to view different system information according to the "directory path (proc path)" specified by the user.'}),"\n",(0,a.jsx)(n.p,{children:"The proc system is designed mainly for system administrators, so that it is convenient for them to view some running states inside the system. Such as the tablet status of the table, the cluster balance status, the status of various jobs, and so on. is a very useful function"}),"\n",(0,a.jsx)(n.p,{children:"There are two ways to view the proc system in Doris."}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["View through the WEB UI interface provided by Doris, visit the address: ",(0,a.jsx)(n.code,{children:"http://FE_IP:FE_HTTP_PORT"})]}),"\n",(0,a.jsx)(n.li,{children:"Another way is by command"}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["All commands supported by Doris PROC can be seen through ",(0,a.jsx)(n.code,{children:' SHOW PROC "/";'})]}),"\n",(0,a.jsx)(n.p,{children:'After connecting to Doris through the MySQL client, you can execute the SHOW PROC statement to view the information of the specified proc directory. The proc directory is an absolute path starting with "/".'}),"\n",(0,a.jsx)(n.p,{children:"The results of the show proc statement are presented in a two-dimensional table. And usually the first column of the result table is the next subdirectory of proc."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-none",children:'mysql> show proc "/";\n+---------------------------+\n| name                      |\n+---------------------------+\n| auth                      |\n| backends                  |\n| bdbje                     |\n| brokers                   |\n| catalogs                  |\n| cluster_balance           |\n| cluster_health            |\n| colocation_group          |\n| current_backend_instances |\n| current_queries           |\n| current_query_stmts       |\n| dbs                       |\n| diagnose                  |\n| frontends                 |\n| jobs                      |\n| load_error_hub            |\n| monitor                   |\n| resources                 |\n| routine_loads             |\n| statistic                 |\n| stream_loads              |\n| tasks                     |\n| transactions              |\n| trash                     |\n+---------------------------+\n23 rows in set (0.00 sec)\n'})}),"\n",(0,a.jsx)(n.p,{children:"illustrate:"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"auth: User name and corresponding permission information"}),"\n",(0,a.jsxs)(n.li,{children:["backends: Displays the node list of BE in the cluster, equivalent to ",(0,a.jsx)(n.a,{href:"../cluster-management/instance-management/SHOW-BACKENDS",children:"SHOW BACKENDS"})]}),"\n",(0,a.jsxs)(n.li,{children:["bdbje: To view the bdbje database list, you need to modify the ",(0,a.jsx)(n.code,{children:"fe.conf"})," file to add ",(0,a.jsx)(n.code,{children:"enable_bdbje_debug_mode=true"}),", and then start ",(0,a.jsx)(n.code,{children:"FE"})," through ",(0,a.jsx)(n.code,{children:"sh start_fe.sh --daemon"})," to enter the ",(0,a.jsx)(n.code,{children:"debug"})," mode. After entering ",(0,a.jsx)(n.code,{children:"debug"})," mode, only ",(0,a.jsx)(n.code,{children:"http server"})," and ",(0,a.jsx)(n.code,{children:"MySQLServer"})," will be started and the ",(0,a.jsx)(n.code,{children:"BDBJE"})," instance will be opened, but no metadata loading and subsequent startup processes will be entered."]}),"\n",(0,a.jsxs)(n.li,{children:["brokers : View cluster broker node information, equivalent to ",(0,a.jsx)(n.a,{href:"../cluster-management/instance-management/SHOW-BROKER",children:"SHOW BROKER"})]}),"\n",(0,a.jsxs)(n.li,{children:["catalogs : View the data catalogs that have been created currently, equivalent to ",(0,a.jsx)(n.a,{href:"/docs/2.1/sql-manual/sql-statements/catalog/SHOW-CATALOG",children:"SHOW CATALOGS"})]}),"\n",(0,a.jsxs)(n.li,{children:["cluster_balance : To check the balance of the cluster, please refer to ",(0,a.jsx)(n.a,{href:"/docs/2.1/admin-manual/maint-monitor/tablet-repair-and-balance",children:"Data Copy Management"})]}),"\n",(0,a.jsxs)(n.li,{children:["cluster_health: Run ",(0,a.jsx)(n.code,{children:"SHOW PROC '/cluster_health/tablet_health';"})," statement to view the replica status of the entire cluster."]}),"\n",(0,a.jsxs)(n.li,{children:["colocation_group : This command can view the existing Group information in the cluster. For details, please refer to the ",(0,a.jsx)(n.a,{href:"../../../query-acceleration/colocation-join",children:"Colocation Join"})," chapter"]}),"\n",(0,a.jsx)(n.li,{children:"current_backend_instances : Displays a list of be nodes that are currently executing jobs"}),"\n",(0,a.jsx)(n.li,{children:"current_queries : View the list of queries being executed, the SQL statement currently running."}),"\n",(0,a.jsx)(n.li,{children:"current_query_stmts: Returns the currently executing query."}),"\n",(0,a.jsx)(n.li,{children:"dbs: Mainly used to view the metadata information of each database and the tables in the Doris cluster. This information includes table structure, partitions, materialized views, data shards and replicas, and more. Through this directory and its subdirectories, you can clearly display the table metadata in the cluster, and locate some problems such as data skew, replica failure, etc."}),"\n",(0,a.jsx)(n.li,{children:"diagnose: Report and diagnose common management and control issues in the cluster, including replica balance and migration, transaction exceptions, etc."}),"\n",(0,a.jsxs)(n.li,{children:["frontends: Display all FE node information in the cluster, including IP address, role, status, whether it is a master, etc., equivalent to ",(0,a.jsx)(n.a,{href:"../cluster-management/instance-management/SHOW-FRONTENDS",children:"SHOW FRONTENDS"})]}),"\n",(0,a.jsxs)(n.li,{children:["jobs: show statistics of all kind of jobs. If a specific ",(0,a.jsx)(n.code,{children:"dbId"})," is given, will return statistics data of the database. If ",(0,a.jsx)(n.code,{children:"dbId"})," is -1, will return total statistics data of all databases"]}),"\n",(0,a.jsxs)(n.li,{children:["load_error_hub: Doris supports centralized storage of error information generated by load jobs in an error hub. Then view the error message directly through the ",(0,a.jsx)(n.code,{children:"SHOW LOAD WARNINGS;"})," statement. Shown here is the configuration information of the error hub."]}),"\n",(0,a.jsx)(n.li,{children:"monitor : shows the resource usage of FE JVM"}),"\n",(0,a.jsxs)(n.li,{children:["resources : View system resources, ordinary accounts can only see resources that they have USAGE_PRIV permission to use. Only the root and admin accounts can see all resources. Equivalent to ",(0,a.jsx)(n.a,{href:"../cluster-management/compute-management/SHOW-RESOURCES",children:"SHOW RESOURCES"})]}),"\n",(0,a.jsx)(n.li,{children:"routine_loads: Display all routine load job information, including job name, status, etc."}),"\n",(0,a.jsx)(n.li,{children:"statistics: It is mainly used to summarize and view the number of databases, tables, partitions, shards, and replicas in the Doris cluster. and the number of unhealthy copies. This information helps us to control the size of the cluster meta-information in general. It helps us view the cluster sharding situation from an overall perspective, and can quickly check the health of the cluster sharding. This further locates problematic data shards."}),"\n",(0,a.jsx)(n.li,{children:"stream_loads: Returns the stream load task being executed."}),"\n",(0,a.jsx)(n.li,{children:"tasks : Displays the total number of tasks of various jobs and the number of failures."}),"\n",(0,a.jsxs)(n.li,{children:["transactions : used to view the transaction details of the specified transaction id, equivalent to ",(0,a.jsx)(n.a,{href:"../transaction/SHOW-TRANSACTION",children:"SHOW TRANSACTION"})]}),"\n",(0,a.jsxs)(n.li,{children:["trash: This statement is used to view the space occupied by garbage data in the backend. Equivalent to ",(0,a.jsx)(n.a,{href:"../table-and-view/data-and-status-management/SHOW-TRASH",children:"SHOW TRASH"})]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:'For example, "/dbs" displays all databases, and "/dbs/10002" displays all tables under the database with id 10002'}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:'mysql> show proc "/dbs/10002";\n+---------+----------------------+----------+---------------------+--------------+--------+------+--------------------------+--------------+\n| TableId | TableName            | IndexNum | PartitionColumnName | PartitionNum | State  | Type | LastConsistencyCheckTime | ReplicaCount |\n+---------+----------------------+----------+---------------------+--------------+--------+------+--------------------------+--------------+\n| 10065   | dwd_product_live     | 1        | dt                  | 9            | NORMAL | OLAP | NULL                     | 18           |\n| 10109   | ODS_MR_BILL_COSTS_DO | 1        | NULL                | 1            | NORMAL | OLAP | NULL                     | 1            |\n| 10119   | test                 | 1        | NULL                | 1            | NORMAL | OLAP | NULL                     | 1            |\n| 10124   | test_parquet_import  | 1        | NULL                | 1            | NORMAL | OLAP | NULL                     | 1            |\n+---------+----------------------+----------+---------------------+--------------+--------+------+--------------------------+--------------+\n4 rows in set (0.00 sec)\n'})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Display information about the number of all database tables in the cluster."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:"mysql> show proc '/statistic';\n+-------+----------------------+----------+--------------+----------+-----------+------------+\n| DbId  | DbName               | TableNum | PartitionNum | IndexNum | TabletNum | ReplicaNum |\n+-------+----------------------+----------+--------------+----------+-----------+------------+\n| 10002 | default_cluster:test | 4        | 12           | 12       | 21        | 21         |\n| Total | 1                    | 4        | 12           | 12       | 21        | 21         |\n+-------+----------------------+----------+--------------+----------+-----------+------------+\n2 rows in set (0.00 sec)\n"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"The following command can view the existing Group information in the cluster."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"SHOW PROC '/colocation_group';\n\n+-------------+--------------+--------------+------------+----------------+----------+----------+\n| GroupId     | GroupName    | TableIds     | BucketsNum | ReplicationNum | DistCols | IsStable |\n+-------------+--------------+--------------+------------+----------------+----------+----------+\n| 10005.10008 | 10005_group1 | 10007, 10040 | 10         | 3              | int(11)  | true     |\n+-------------+--------------+--------------+------------+----------------+----------+----------+\n"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"GroupId: The cluster-wide unique identifier of a group, the first half is the db id, and the second half is the group id."}),"\n",(0,a.jsx)(n.li,{children:"GroupName: The full name of the Group."}),"\n",(0,a.jsx)(n.li,{children:"TabletIds: The id list of Tables contained in this Group."}),"\n",(0,a.jsx)(n.li,{children:"BucketsNum: The number of buckets."}),"\n",(0,a.jsx)(n.li,{children:"ReplicationNum: The number of replicas."}),"\n",(0,a.jsx)(n.li,{children:"DistCols: Distribution columns, that is, the bucket column type."}),"\n",(0,a.jsxs)(n.li,{children:["IsStable: Whether the Group is stable (for the definition of stability, see the ",(0,a.jsx)(n.code,{children:"Colocation replica balance and repair"})," section)."]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Use the following commands to further view the data distribution of a Group:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:"SHOW PROC '/colocation_group/10005.10008';\n\n+-------------+---------------------+\n| BucketIndex | BackendIds          |\n+-------------+---------------------+\n| 0           | 10004, 10002, 10001 |\n| 1           | 10003, 10002, 10004 |\n| 2           | 10002, 10004, 10001 |\n| 3           | 10003, 10002, 10004 |\n| 4           | 10002, 10004, 10003 |\n| 5           | 10003, 10002, 10001 |\n| 6           | 10003, 10004, 10001 |\n| 7           | 10003, 10004, 10002 |\n+-------------+---------------------+\n"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"BucketIndex: The index of the bucket sequence."}),"\n",(0,a.jsx)(n.li,{children:"BackendIds: The list of BE node IDs where the data shards in the bucket are located."}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Display the total number of tasks of various jobs and the number of failures."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:"mysql> show proc '/tasks';\n+-------------------------+-----------+----------+\n| TaskType                | FailedNum | TotalNum |\n+-------------------------+-----------+----------+\n| CREATE                  | 0         | 0        |\n| DROP                    | 0         | 0        |\n| PUSH                    | 0         | 0        |\n| CLONE                   | 0         | 0        |\n| STORAGE_MEDIUM_MIGRATE  | 0         | 0        |\n| ROLLUP                  | 0         | 0        |\n| SCHEMA_CHANGE           | 0         | 0        |\n| CANCEL_DELETE           | 0         | 0        |\n| MAKE_SNAPSHOT           | 0         | 0        |\n| RELEASE_SNAPSHOT        | 0         | 0        |\n| CHECK_CONSISTENCY       | 0         | 0        |\n| UPLOAD                  | 0         | 0        |\n| DOWNLOAD                | 0         | 0        |\n| CLEAR_REMOTE_FILE       | 0         | 0        |\n| MOVE                    | 0         | 0        |\n| REALTIME_PUSH           | 0         | 0        |\n| PUBLISH_VERSION         | 0         | 0        |\n| CLEAR_ALTER_TASK        | 0         | 0        |\n| CLEAR_TRANSACTION_TASK  | 0         | 0        |\n| RECOVER_TABLET          | 0         | 0        |\n| STREAM_LOAD             | 0         | 0        |\n| UPDATE_TABLET_META_INFO | 0         | 0        |\n| ALTER                   | 0         | 0        |\n| INSTALL_PLUGIN          | 0         | 0        |\n| UNINSTALL_PLUGIN        | 0         | 0        |\n| Total                   | 0         | 0        |\n+-------------------------+-----------+----------+\n26 rows in set (0.01 sec)\n"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Display the replica status of the entire cluster."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:"mysql> show proc '/cluster_health/tablet_health';\n+----------+---------------------------+-----------+------------+-------------------+----------------------+----------------------+--------------+----------------------------+-------------------------+-------------------+---------------------+----------------------+----------------------+------------------+-----------------------------+-----------------+-------------+------------+\n| DbId     | DbName                    | TabletNum | HealthyNum | ReplicaMissingNum | VersionIncompleteNum | ReplicaRelocatingNum | RedundantNum | ReplicaMissingInClusterNum | ReplicaMissingForTagNum | ForceRedundantNum | ColocateMismatchNum | ColocateRedundantNum | NeedFurtherRepairNum | UnrecoverableNum | ReplicaCompactionTooSlowNum | InconsistentNum | OversizeNum | CloningNum |\n+----------+---------------------------+-----------+------------+-------------------+----------------------+----------------------+--------------+----------------------------+-------------------------+-------------------+---------------------+----------------------+----------------------+------------------+-----------------------------+-----------------+-------------+------------+\n| 25852112 | default_cluster:bowen     | 1920      | 1920       | 0                 | 0                    | 0                    | 0            | 0                          | 0                       | 0                 | 0                   | 0                    | 0                    | 0                | 0                           | 0               | 0           | 0          |\n| 25342914 | default_cluster:bw        | 128       | 128        | 0                 | 0                    | 0                    | 0            | 0                          | 0                       | 0                 | 0                   | 0                    | 0                    | 0                | 0                           | 0               | 0           | 0          |\n| 2575532  | default_cluster:cps       | 1440      | 1440       | 0                 | 0                    | 0                    | 0            | 0                          | 0                       | 0                 | 0                   | 0                    | 0                    | 0                | 0                           | 0               | 16          | 0          |\n| 26150325 | default_cluster:db        | 38374     | 38374      | 0                 | 0                    | 0                    | 0            | 0                          | 0                       | 0                 | 0                   | 0                    | 0                    | 0                | 0                           | 0               | 453         | 0          |\n+----------+---------------------------+-----------+------------+-------------------+----------------------+----------------------+--------------+----------------------------+-------------------------+-------------------+---------------------+----------------------+----------------------+------------------+-----------------------------+-----------------+-------------+------------+\n4 rows in set (0.01 sec)\n"})}),"\n",(0,a.jsx)(n.p,{children:"View the replica status under a database, such as a database with a DbId of 25852112."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:"mysql> show proc '/cluster_health/tablet_health/25852112';\n"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Report and diagnose cluster management issues"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:'MySQL > show proc "/diagnose";\n+-----------------+----------+------------+\n| Item            | ErrorNum | WarningNum |\n+-----------------+----------+------------+\n| cluster_balance | 2        | 0          |\n| Total           | 2        | 0          |\n+-----------------+----------+------------+\n\n2 rows in set\n'})}),"\n",(0,a.jsx)(n.p,{children:"View replica balance migration issues"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:'MySQL > show proc "/diagnose/cluster_balance";\n+-----------------------+--------+-------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------+------------+\n| Item                  | Status | Content                                                                                                     | Detail Cmd                                                          | Suggestion |\n+-----------------------+--------+-------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------+------------+\n| Tablet Health         | ERROR  | healthy tablet num 691 < total tablet num 1014                                                              | show 	proc "/cluster_health/tablet_health";                          | <null>     |\n| BeLoad Balance        | ERROR  | backend load not balance for tag {"location" : "default"}, low load backends [], high load backends 	[10009] | show proc "/cluster_balance/cluster_load_stat/location_default/HDD" | <null>     |\n| Disk Balance          | OK     | <null>                                                                                                      | <null>                                                              | <null>     |\n| Colocate Group Stable | OK     | <null>                                                                                                      | <null>                                                              | <null>     |\n| History Tablet Sched  | OK     | <null>                                                                                                      | <null>                                                              | <null>     |\n+-----------------------+--------+-------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------+------------+\n\n5 rows in set\n'})}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"keywords",children:"Keywords"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"SHOW, PROC\n"})}),"\n",(0,a.jsx)(n.h2,{id:"best-practice",children:"Best Practice"})]})}function h(e={}){let{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},250065:function(e,n,t){t.d(n,{Z:function(){return l},a:function(){return r}});var s=t(667294);let a={},i=s.createContext(a);function r(e){let n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);