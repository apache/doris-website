"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["700033"],{116533:function(n,e,r){r.r(e),r.d(e,{default:()=>p,frontMatter:()=>t,metadata:()=>s,assets:()=>o,toc:()=>c,contentTitle:()=>l});var s=JSON.parse('{"id":"sql-manual/sql-functions/scalar-functions/array-functions/array-position","title":"ARRAY_POSITION","description":"array_position","source":"@site/versioned_docs/version-4.x/sql-manual/sql-functions/scalar-functions/array-functions/array-position.md","sourceDirName":"sql-manual/sql-functions/scalar-functions/array-functions","slug":"/sql-manual/sql-functions/scalar-functions/array-functions/array-position","permalink":"/docs/4.x/sql-manual/sql-functions/scalar-functions/array-functions/array-position","draft":false,"unlisted":false,"tags":[],"version":"4.x","lastUpdatedAt":1770477659000,"frontMatter":{"title":"ARRAY_POSITION","language":"en"},"sidebar":"docs","previous":{"title":"ARRAY_POPFRONT","permalink":"/docs/4.x/sql-manual/sql-functions/scalar-functions/array-functions/array-popfront"},"next":{"title":"ARRAY_PRODUCT","permalink":"/docs/4.x/sql-manual/sql-functions/scalar-functions/array-functions/array-product"}}'),a=r("785893"),i=r("250065");let t={title:"ARRAY_POSITION",language:"en"},l=void 0,o={},c=[{value:"array_position",id:"array_position",level:2},{value:"Description",id:"description",level:2},{value:"Syntax",id:"syntax",level:2},{value:"Parameters",id:"parameters",level:3},{value:"Return Value",id:"return-value",level:3},{value:"Keywords",id:"keywords",level:3}];function d(n){let e={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",t:"t",ul:"ul",version:"version",...(0,i.a)(),...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.h2,{id:"array_position",children:"array_position"}),"\n",(0,a.jsx)(e.version,{since:"2.0.0",children:"\n"}),"\n",(0,a.jsx)(e.h2,{id:"description",children:"Description"}),"\n",(0,a.jsx)(e.p,{children:"Finds the position index (starting from 1) of the first occurrence of a specified element in the array. The function traverses the array from left to right, finds the first matching element and returns its position index."}),"\n",(0,a.jsx)(e.h2,{id:"syntax",children:"Syntax"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-sql",children:"array_position(ARRAY<T> arr, T element)\n"})}),"\n",(0,a.jsx)(e.h3,{id:"parameters",children:"Parameters"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"arr"}),"\uFF1AARRAY",(0,a.jsx)(e.t,{children:" type, the array to search"})]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"element"}),"\uFF1AT type, the element to find"]}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Supported types for T:"})}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"Numeric types: TINYINT, SMALLINT, INT, BIGINT, LARGEINT, FLOAT, DOUBLE, DECIMAL"}),"\n",(0,a.jsx)(e.li,{children:"String types: CHAR, VARCHAR, STRING"}),"\n",(0,a.jsx)(e.li,{children:"Date and time types: DATE, DATETIME, DATEV2, DATETIMEV2"}),"\n",(0,a.jsx)(e.li,{children:"Boolean type: BOOLEAN"}),"\n",(0,a.jsx)(e.li,{children:"IP types: IPV4, IPV6"}),"\n"]}),"\n",(0,a.jsx)(e.h3,{id:"return-value",children:"Return Value"}),"\n",(0,a.jsx)(e.p,{children:"Return type: BIGINT"}),"\n",(0,a.jsx)(e.p,{children:"Return value meaning:"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"Returns the position index of the first occurrence of the specified element in the array. The return value starts from 1, not 0. If the element to find is the first element in the array, this function returns 1, not 0"}),"\n",(0,a.jsx)(e.li,{children:"0: if no matching element is found, or if the input array is NULL"}),"\n",(0,a.jsx)(e.li,{children:"NULL: if the input array is NULL"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:"Usage notes:"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"The function traverses the array from left to right, finds the first matching element. If no matching element is found, returns 0"}),"\n",(0,a.jsx)(e.li,{children:"Empty arrays return 0"}),"\n",(0,a.jsx)(e.li,{children:"For null values in array elements: null elements can be matched normally"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Query Examples:"})}),"\n",(0,a.jsx)(e.p,{children:"Find the position of a string in an array:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-sql",children:"SELECT array_position(['apple', 'banana', 'cherry', 'apple'], 'apple');\n+-----------------------------------------------------------------+\n| array_position(['apple', 'banana', 'cherry', 'apple'], 'apple') |\n+-----------------------------------------------------------------+\n|                                                               1 |\n+-----------------------------------------------------------------+\n"})}),"\n",(0,a.jsx)(e.p,{children:"Find the position of a floating-point number in an array:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-sql",children:"SELECT array_position([1.1, 2.2, 3.3, 4.4, 5.5], 3.3);\n+------------------------------------------------+\n| array_position([1.1, 2.2, 3.3, 4.4, 5.5], 3.3) |\n+------------------------------------------------+\n|                                              3 |\n+------------------------------------------------+\n"})}),"\n",(0,a.jsx)(e.p,{children:"Find a non-existent element:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-sql",children:"SELECT array_position([1, 2, 3, 4, 5], 10);\n+-------------------------------------+\n| array_position([1, 2, 3, 4, 5], 10) |\n+-------------------------------------+\n|                                   0 |\n+-------------------------------------+\n"})}),"\n",(0,a.jsx)(e.p,{children:"Find a null element:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-sql",children:"SELECT array_position([1, null, 3, null, 5], null);\n+---------------------------------------------+\n| array_position([1, null, 3, null, 5], null) |\n+---------------------------------------------+\n|                                           2 |\n+---------------------------------------------+\n"})}),"\n",(0,a.jsx)(e.p,{children:"Empty array returns 0:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-sql",children:"SELECT array_position([], 1);\n+-----------------------+\n| array_position([], 1) |\n+-----------------------+\n|                     0 |\n+-----------------------+\n"})}),"\n",(0,a.jsx)(e.p,{children:"Input array is NULL, returns NULL:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-sql",children:"SELECT array_position(NULL, 1);\n+-------------------------+\n| array_position(NULL, 1) |\n+-------------------------+\n|                    NULL |\n+-------------------------+\n"})}),"\n",(0,a.jsx)(e.p,{children:"Date type search:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-sql",children:"SELECT array_position(cast(['2023-01-01', '2022-12-31', '2023-06-15'] as array<datetime>), '2023-01-01');\n+---------------------------------------------------------------------------------------------------+\n| array_position(cast(['2023-01-01', '2022-12-31', '2023-06-15'] as array<datetime>), '2023-01-01') |\n+---------------------------------------------------------------------------------------------------+\n|                                                                                                 1 |\n+---------------------------------------------------------------------------------------------------+\n"})}),"\n",(0,a.jsx)(e.p,{children:"IP address search:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-sql",children:"SELECT array_position(CAST(['192.168.1.1', '192.168.1.2', '192.168.1.3'] AS ARRAY<IPV4>), '192.168.1.2');\n+---------------------------------------------------------------------------------------------------+\n| array_position(CAST(['192.168.1.1', '192.168.1.2', '192.168.1.3'] AS ARRAY<IPV4>), '192.168.1.2') |\n+---------------------------------------------------------------------------------------------------+\n|                                                                                                 2 |\n+---------------------------------------------------------------------------------------------------+\n\nSELECT array_position(CAST(['2001:db8::1', '2001:db8::2', '2001:db8::0'] AS ARRAY<IPV6>), '2001:db8::0');\n+---------------------------------------------------------------------------------------------------+\n| array_position(CAST(['2001:db8::1', '2001:db8::2', '2001:db8::0'] AS ARRAY<IPV6>), '2001:db8::0') |\n+---------------------------------------------------------------------------------------------------+\n|                                                                                                 3 |\n+---------------------------------------------------------------------------------------------------+\n"})}),"\n",(0,a.jsx)(e.p,{children:"Complex type examples:"}),"\n",(0,a.jsx)(e.p,{children:"Nested array types are not supported, will error:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-sql",children:"SELECT array_position([[1,2], [3,4], [5,6]], [3,4]);\nERROR 1105 (HY000): errCode = 2, detailMessage = array_position does not support type ARRAY<ARRAY<TINYINT>>, expression is array_position([[1, 2], [3, 4], [5, 6]])\n"})}),"\n",(0,a.jsx)(e.p,{children:"Map type search:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-sql",children:"SELECT array_position([{'k':1}, {'k':2}, {'k':3}], {'k':2});\nERROR 1105 (HY000): errCode = 2, detailMessage = array_position does not support type ARRAY<MAP<VARCHAR(1),TINYINT>>, expression is array_position([map('k', 1), map('k', 2), map('k', 3)])\n"})}),"\n",(0,a.jsx)(e.p,{children:"Error when parameter count is wrong:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-sql",children:"SELECT array_position([1,2,3]);\nERROR 1105 (HY000): errCode = 2, detailMessage = Can not found function 'array_position' which has 1 arity. Candidate functions are: [array_position(Expression, Expression)]\n"})}),"\n",(0,a.jsx)(e.p,{children:"Error when passing non-array type:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-sql",children:"SELECT array_position('not_an_array', 1);\nERROR 1105 (HY000): errCode = 2, detailMessage = Can not find the compatibility function signature: array_position(VARCHAR(12), TINYINT)\n"})}),"\n",(0,a.jsx)(e.h3,{id:"keywords",children:"Keywords"}),"\n",(0,a.jsx)(e.p,{children:"ARRAY, POSITION, ARRAY_POSITION"})]})}function p(n={}){let{wrapper:e}={...(0,i.a)(),...n.components};return e?(0,a.jsx)(e,{...n,children:(0,a.jsx)(d,{...n})}):d(n)}},250065:function(n,e,r){r.d(e,{Z:function(){return l},a:function(){return t}});var s=r(667294);let a={},i=s.createContext(a);function t(n){let e=s.useContext(i);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(a):n.components||a:t(n.components),s.createElement(i.Provider,{value:e},n.children)}}}]);