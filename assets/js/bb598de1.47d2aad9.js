"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["36163"],{829512:function(e,n,i){i.r(n),i.d(n,{default:()=>g,frontMatter:()=>c,metadata:()=>o,assets:()=>l,toc:()=>r,contentTitle:()=>d});var o=JSON.parse('{"id":"developer-guide/cpp-diagnostic-code","title":"C++ Code Diagnostic","description":"\x3c!--","source":"@site/community/developer-guide/cpp-diagnostic-code.md","sourceDirName":"developer-guide","slug":"/developer-guide/cpp-diagnostic-code","permalink":"/community/developer-guide/cpp-diagnostic-code","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"C++ Code Diagnostic","language":"en"},"sidebar":"community","previous":{"title":"C++ Format Code","permalink":"/community/developer-guide/cpp-format-code"},"next":{"title":"Bitmap/HLL data format","permalink":"/community/developer-guide/bitmap-hll-file-format"}}'),t=i("785893"),a=i("250065");let c={title:"C++ Code Diagnostic",language:"en"},d="C++ Code Diagnostic",l={},r=[{value:"Clang-Tidy",id:"clang-tidy",level:3},{value:"Enable clangd on VSCODE",id:"enable-clangd-on-vscode",level:3}];function s(e){let n={a:"a",code:"code",h1:"h1",h3:"h3",header:"header",p:"p",pre:"pre",...(0,a.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"c-code-diagnostic",children:"C++ Code Diagnostic"})}),"\n",(0,t.jsxs)(n.p,{children:["Doris support to use ",(0,t.jsx)(n.a,{href:"https://clangd.llvm.org/",children:"Clangd"})," and ",(0,t.jsx)(n.a,{href:"https://clang.llvm.org/extra/clang-tidy/",children:"Clang-Tidy"}),"\nto diagnostic code. Clangd and Clang-Tidy already has in ",(0,t.jsx)(n.a,{href:"/docs/install/source-install/compilation-with-ldb-toolchain",children:"LDB-toolchain"}),"\uFF0Calso can install by self."]}),"\n",(0,t.jsx)(n.h3,{id:"clang-tidy",children:"Clang-Tidy"}),"\n",(0,t.jsxs)(n.p,{children:["Clang-Tidy can do some diagnostic config, config file ",(0,t.jsx)(n.code,{children:".clang-tidy"})," is in Doris root path. Compared with vscode-cpptools, clangd can provide more powerful and accurate code jumping for vscode, and integrates the analysis and quick-fix functions of clang-tidy."]}),"\n",(0,t.jsx)(n.h3,{id:"enable-clangd-on-vscode",children:"Enable clangd on VSCODE"}),"\n",(0,t.jsxs)(n.p,{children:["First we should install clangd plugin, then edit ",(0,t.jsx)(n.code,{children:"settings.json"})," or just change config on gui.\nBefore using, compile ",(0,t.jsx)(n.code,{children:"be(RELEASE)"})," and ",(0,t.jsx)(n.code,{children:"be-ut(ASAN)"})," once to generate the corresponding ",(0,t.jsx)(n.code,{children:"compile_commands.json"})," file."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'    "clangd.path": "ldb_toolchain/bin/clangd", //clangd path\n    "clangd.arguments": [\n        "--background-index",\n        "--clang-tidy", //enable clang-tidy\n        "--compile-commands-dir=doris/be/build_Release/",\n        "--completion-style=detailed",\n        "-j=5", //clangd diagnostic parallelism\n        "--all-scopes-completion",\n        "--pch-storage=memory",\n        "--pretty",\n        "--query-driver=ldb_toolchain/bin/*" //path of compiler\n    ],\n    "clangd.trace": "output/clangd-server.log"\n'})})]})}function g(e={}){let{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(s,{...e})}):s(e)}},250065:function(e,n,i){i.d(n,{Z:function(){return d},a:function(){return c}});var o=i(667294);let t={},a=o.createContext(t);function c(e){let n=o.useContext(a);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:c(e.components),o.createElement(a.Provider,{value:n},e.children)}}}]);