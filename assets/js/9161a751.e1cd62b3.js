"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["644856"],{912020:function(e,t,n){n.r(t),n.d(t,{default:()=>d,frontMatter:()=>s,metadata:()=>i,assets:()=>a,toc:()=>h,contentTitle:()=>c});var i=JSON.parse('{"id":"how-to-contribute/pull-request","title":"Code Submission Guide","description":"\x3c!--","source":"@site/community/how-to-contribute/pull-request.md","sourceDirName":"how-to-contribute","slug":"/how-to-contribute/pull-request","permalink":"/community/how-to-contribute/pull-request","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Code Submission Guide","language":"en"},"sidebar":"community","previous":{"title":"Docs Format Specification","permalink":"/community/how-to-contribute/docs-format-specification"},"next":{"title":"Docs Contribution","permalink":"/community/how-to-contribute/contribute-doc"}}'),o=n("785893"),r=n("250065");let s={title:"Code Submission Guide",language:"en"},c=void 0,a={},h=[{value:"1. Fork Repository",id:"1-fork-repository",level:2},{value:"2. Configuring GIT and submitting modifications",id:"2-configuring-git-and-submitting-modifications",level:2},{value:"(1) Clone the code locally:",id:"1-clone-the-code-locally",level:3},{value:"(2) Add apache/doris to the remote branch upstream of the local warehouse:",id:"2-add-apachedoris-to-the-remote-branch-upstream-of-the-local-warehouse",level:3},{value:"(3) Check remote warehouse settings:",id:"3-check-remote-warehouse-settings",level:3},{value:"(4) New branches to modify them:",id:"4-new-branches-to-modify-them",level:3},{value:"(5) Submit code to remote branch:",id:"5-submit-code-to-remote-branch",level:3},{value:"3. Create PR",id:"3-create-pr",level:2},{value:"(1) New PR",id:"1-new-pr",level:3},{value:"(2) preparation branch",id:"2-preparation-branch",level:3},{value:"(3) Fill Commit Message",id:"3-fill-commit-message",level:3},{value:"(4) Complete the creation",id:"4-complete-the-creation",level:3},{value:"4. Conflict Resolution",id:"4-conflict-resolution",level:2},{value:"(1) Switch to the main branch",id:"1-switch-to-the-main-branch",level:3},{value:"(2) Synchronize remote main branch to local",id:"2-synchronize-remote-main-branch-to-local",level:3},{value:"(3) Switch back to the previous branch (assuming the branch is named fix)",id:"3-switch-back-to-the-previous-branch-assuming-the-branch-is-named-fix",level:3},{value:"(4) rebase",id:"4-rebase",level:3},{value:"5. An example",id:"5-an-example",level:2},{value:"(1) fetch to the latest code for the local branch of upstream that has been configured",id:"1-fetch-to-the-latest-code-for-the-local-branch-of-upstream-that-has-been-configured",level:3},{value:"(2) rebase",id:"2-rebase",level:3},{value:"(3) Check to see if other submissions are not synchronized to their own repo submissions",id:"3-check-to-see-if-other-submissions-are-not-synchronized-to-their-own-repo-submissions",level:3},{value:"(4) Merge code submitted by others into their own repo",id:"4-merge-code-submitted-by-others-into-their-own-repo",level:3},{value:"(5) New branch, ready for development",id:"5-new-branch-ready-for-development",level:3},{value:"(6) Prepare to submit after code modification is completed",id:"6-prepare-to-submit-after-code-modification-is-completed",level:3},{value:"(7) Fill in the message and submit it it to the new local branch",id:"7-fill-in-the-message-and-submit-it-it-to-the-new-local-branch",level:3},{value:"(8) Push the branch into GitHub&#39;s own repo far away",id:"8-push-the-branch-into-githubs-own-repo-far-away",level:3}];function l(e){let t={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(t.p,{children:[(0,o.jsx)(t.a,{href:"https://help.github.com/articles/about-pull-requests/",children:"Pull Request (PR)"})," can be easily submitted on ",(0,o.jsx)(t.a,{href:"https://github.com/apache/doris",children:"Github"}),". The PR method of Doris project is described below."]}),"\n",(0,o.jsx)(t.h2,{id:"1-fork-repository",children:"1. Fork Repository"}),"\n",(0,o.jsxs)(t.p,{children:["Go to the ",(0,o.jsx)(t.a,{href:"https://github.com/apache/doris",children:"github page"})," of apache/doris , and click the button ",(0,o.jsx)(t.code,{children:"Fork"})," in the upper right corner for Fork."]}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{alt:"Fork",src:n(930715).Z+"",width:"3022",height:"1642"})}),"\n",(0,o.jsx)(t.h2,{id:"2-configuring-git-and-submitting-modifications",children:"2. Configuring GIT and submitting modifications"}),"\n",(0,o.jsx)(t.h3,{id:"1-clone-the-code-locally",children:"(1) Clone the code locally:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{children:"git clone https://github.com/<your_github_name>/doris.git\ncd doris\ngit submodule update --init --recursive\n"})}),"\n",(0,o.jsx)(t.p,{children:"Note: Please replace your GitHub name with your yourgithubname."}),"\n",(0,o.jsx)(t.p,{children:"When clone is completed, origin defaults to the remote fork address on github."}),"\n",(0,o.jsx)(t.h3,{id:"2-add-apachedoris-to-the-remote-branch-upstream-of-the-local-warehouse",children:"(2) Add apache/doris to the remote branch upstream of the local warehouse:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{children:"git remote add upstream https://github.com/apache/doris.git\n"})}),"\n",(0,o.jsx)(t.h3,{id:"3-check-remote-warehouse-settings",children:"(3) Check remote warehouse settings:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{children:"git remote -v\norigin https://github.com/<your_github_name>/doris.git (fetch)\norigin    https://github.com/<your_github_name>/doris.git (push)\nupstream  https://github.com/apache/doris.git (fetch)\nupstream  https://github.com/apache/doris.git (push)\n"})}),"\n",(0,o.jsx)(t.h3,{id:"4-new-branches-to-modify-them",children:"(4) New branches to modify them:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{children:"git checkout -b <your_branch_name>\n"})}),"\n",(0,o.jsx)(t.p,{children:"Note: <your_branch_name> name is customized for you."}),"\n",(0,o.jsx)(t.p,{children:"Code changes can be made after creation."}),"\n",(0,o.jsx)(t.h3,{id:"5-submit-code-to-remote-branch",children:"(5) Submit code to remote branch:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{children:'git commit -a -m "<you_commit_message>"\ngit push origin <your_branch_name>\n'})}),"\n",(0,o.jsxs)(t.p,{children:["For more git usage, please visit: ",(0,o.jsx)(t.a,{href:"https://docs.github.com/en/repositories/creating-and-managing-repositories/quickstart-for-repositories",children:"git usage"}),", not to mention here."]}),"\n",(0,o.jsx)(t.h2,{id:"3-create-pr",children:"3. Create PR"}),"\n",(0,o.jsx)(t.h3,{id:"1-new-pr",children:"(1) New PR"}),"\n",(0,o.jsxs)(t.p,{children:["Switch to your GitHub page in the browser, switch to the submitted branch yourbranchname\\ and click the ",(0,o.jsx)(t.code,{children:"Compare & pull request"})," button to create it, as shown in the following figure:"]}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{alt:"new PR",src:n(266009).Z+"",width:"3022",height:"1486"})}),"\n",(0,o.jsx)(t.h3,{id:"2-preparation-branch",children:"(2) preparation branch"}),"\n",(0,o.jsxs)(t.p,{children:["At this time, the ",(0,o.jsx)(t.code,{children:"Create pull request"})," button will appear. If not, please check whether the branch is selected correctly or click on `compare across forks' to re-select the repo and branch."]}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{alt:"create PR",src:n(357923).Z+"",width:"2968",height:"1488"})}),"\n",(0,o.jsx)(t.h3,{id:"3-fill-commit-message",children:"(3) Fill Commit Message"}),"\n",(0,o.jsxs)(t.p,{children:["Here, please fill in the summary and details of the comment, and then click ",(0,o.jsx)(t.code,{children:"Create pull request"})," to create it."]}),"\n",(0,o.jsx)(t.p,{children:"For how to write Commit Message, here are some Tips:"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:["\n",(0,o.jsx)(t.p,{children:"Please use the form of English verb + object. The verb does not use the past tense and the sentence uses imperative sentence."}),"\n"]}),"\n",(0,o.jsxs)(t.li,{children:["\n",(0,o.jsx)(t.p,{children:"Subject and body should be written, and they should be separated by blank lines (fill in separately on GitHub PR interface)."}),"\n"]}),"\n",(0,o.jsxs)(t.li,{children:["\n",(0,o.jsxs)(t.p,{children:["Message topic length should not exceed ",(0,o.jsx)(t.strong,{children:"50"})," characters;"]}),"\n"]}),"\n",(0,o.jsxs)(t.li,{children:["\n",(0,o.jsxs)(t.p,{children:["Message content should not exceed ",(0,o.jsx)(t.strong,{children:"72"})," characters per line, and the excess should be replaced manually."]}),"\n"]}),"\n",(0,o.jsxs)(t.li,{children:["\n",(0,o.jsx)(t.p,{children:"Message content is used to explain what has been done, why and how."}),"\n"]}),"\n",(0,o.jsxs)(t.li,{children:["\n",(0,o.jsxs)(t.p,{children:["The first letter of the message subject should be ",(0,o.jsx)(t.strong,{children:"capitalized"}),", and the end of the sentence ",(0,o.jsx)(t.strong,{children:"should not"})," have a full stop."]}),"\n"]}),"\n",(0,o.jsxs)(t.li,{children:["\n",(0,o.jsx)(t.p,{children:"The message content specifies the associated issue (if any), such as # 233;"}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(t.p,{children:["For more details, see ",(0,o.jsx)(t.a,{href:"https://chris.beams.io/posts/git-commit",children:"https://chris.beams.io/posts/git-commit"}),"."]}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{alt:"create PR",src:n(357923).Z+"",width:"2968",height:"1488"})}),"\n",(0,o.jsx)(t.h3,{id:"4-complete-the-creation",children:"(4) Complete the creation"}),"\n",(0,o.jsx)(t.p,{children:"After successful creation, you can see that Doris project needs review, you can wait for us to review and join, you can also contact us directly."}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{alt:"create PR",src:n(185268).Z+"",width:"2644",height:"1256"})}),"\n",(0,o.jsxs)(t.p,{children:["So far, your PR creation is complete. Read more about PR [collaborating-with-issues-and-pull-requests] (",(0,o.jsx)(t.a,{href:"https://help.github.com/categories/collaborating-with-issues-and-pull-requests/",children:"https://help.github.com/categories/collaborating-with-issues-and-pull-requests/"}),")."]}),"\n",(0,o.jsx)(t.h2,{id:"4-conflict-resolution",children:"4. Conflict Resolution"}),"\n",(0,o.jsx)(t.p,{children:"When submitting PR, code conflicts are usually caused by multiple people editing the same file. The main steps to resolve conflicts are as follows:"}),"\n",(0,o.jsx)(t.h3,{id:"1-switch-to-the-main-branch",children:"(1) Switch to the main branch"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{children:"git checkout master\n"})}),"\n",(0,o.jsx)(t.h3,{id:"2-synchronize-remote-main-branch-to-local",children:"(2) Synchronize remote main branch to local"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{children:"git pull upstream master\n"})}),"\n",(0,o.jsx)(t.h3,{id:"3-switch-back-to-the-previous-branch-assuming-the-branch-is-named-fix",children:"(3) Switch back to the previous branch (assuming the branch is named fix)"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{children:"git checkout fix\n"})}),"\n",(0,o.jsx)(t.h3,{id:"4-rebase",children:"(4) rebase"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{children:"git rebase -i master\n"})}),"\n",(0,o.jsx)(t.p,{children:"At this point, a file that modifies the record will pop up and can be saved directly. Then, we will prompt which files have conflicts. At this time, we can open the conflict file to modify the conflict part. After all the conflicts of the conflict files are resolved, we will execute them."}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{children:"git add .\ngit rebase --continue\n"})}),"\n",(0,o.jsx)(t.p,{children:"Then you can go back and forth until the screen appears something like * rebase successful * and then you can update the branch that submitted PR:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{children:"git push -f origin fix\n"})}),"\n",(0,o.jsx)(t.h2,{id:"5-an-example",children:"5. An example"}),"\n",(0,o.jsx)(t.h3,{id:"1-fetch-to-the-latest-code-for-the-local-branch-of-upstream-that-has-been-configured",children:"(1) fetch to the latest code for the local branch of upstream that has been configured"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{children:"$ git branch\n* master\n\n$ git fetch upstream          \nremote: Counting objects: 195, done.\nremote: Compressing objects: 100% (68/68), done.\nremote: Total 141 (delta 75), reused 108 (delta 48)\nReceiving objects: 100% (141/141), 58.28 KiB, done.\nResolving deltas: 100% (75/75), completed with 43 local objects.\nFrom https://github.com/apache/doris\n   9c36200..0c4edc2  master     -> upstream/master\n"})}),"\n",(0,o.jsx)(t.h3,{id:"2-rebase",children:"(2) rebase"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{children:"$ git rebase upstream/master\nFirst, rewinding head to replay your work on top of it...\nFast-forwarded master to upstream/master.\n"})}),"\n",(0,o.jsx)(t.h3,{id:"3-check-to-see-if-other-submissions-are-not-synchronized-to-their-own-repo-submissions",children:"(3) Check to see if other submissions are not synchronized to their own repo submissions"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{children:'$ git status\n# On branch master\n# Your branch is ahead of \'origin/master\' by 8 commits.\n#\n# Untracked files:\n#   (use "git add <file>..." to include in what will be committed)\n#\n#       custom_env.sh\nnothing added to commit but untracked files present (use "git add" to track)\n'})}),"\n",(0,o.jsx)(t.h3,{id:"4-merge-code-submitted-by-others-into-their-own-repo",children:"(4) Merge code submitted by others into their own repo"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{children:"$ git push origin master\nCounting objects: 195, done.\nDelta compression using up to 32 threads.\nCompressing objects: 100% (41/41), done.\nWriting objects: 100% (141/141), 56.66 KiB, done.\nTotal 141 (delta 76), reused 140 (delta 75)\nremote: Resolving deltas: 100% (76/76), completed with 44 local objects.\nTo https://lide-reed:xxxx@github.com/lide-reed/doris.git\n   9c36200..0c4edc2  master -> master\n"})}),"\n",(0,o.jsx)(t.h3,{id:"5-new-branch-ready-for-development",children:"(5) New branch, ready for development"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{children:"$ git checkout -b my_branch\nSwitched to a new branch 'my_branch'\n\n$ git branch\n  master\n* my_branch\n"})}),"\n",(0,o.jsx)(t.h3,{id:"6-prepare-to-submit-after-code-modification-is-completed",children:"(6) Prepare to submit after code modification is completed"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{children:"$ git add -u\n"})}),"\n",(0,o.jsx)(t.h3,{id:"7-fill-in-the-message-and-submit-it-it-to-the-new-local-branch",children:"(7) Fill in the message and submit it it to the new local branch"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{children:'$ git commit -m "Fix a typo"\n[my_branch 55e0ba2] Fix a typo\n1 files changed, 2 insertions(+), 2 deletions(-)\n'})}),"\n",(0,o.jsx)(t.h3,{id:"8-push-the-branch-into-githubs-own-repo-far-away",children:"(8) Push the branch into GitHub's own repo far away"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{children:"$ git push origin my_branch\nCounting objects: 11, done.\nDelta compression using up to 32 threads.\nCompressing objects: 100% (6/6), done.\nWriting objects: 100% (6/6), 534 bytes, done.\nTotal 6 (delta 4), reused 0 (delta 0)\nremote: Resolving deltas: 100% (4/4), completed with 4 local objects.\nremote: \nremote: Create a pull request for 'my_branch' on GitHub by visiting:\nremote:      https://github.com/lide-reed/doris/pull/new/my_branch\nremote: \nTo https://lide-reed:xxxx@github.com/lide-reed/doris.git\n * [new branch]      my_branch -> my_branch\n"})}),"\n",(0,o.jsx)(t.p,{children:"At this point, you can create PR according to the previous process."})]})}function d(e={}){let{wrapper:t}={...(0,r.a)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},357923:function(e,t,n){n.d(t,{Z:function(){return i}});let i=n.p+"assets/images/create-pr-750563ee46e41464eb5e11b2f05e284d.png"},185268:function(e,t,n){n.d(t,{Z:function(){return i}});let i=n.p+"assets/images/create-pr3-f81fd7a2a23de6e13024d39a270375b7.png"},930715:function(e,t,n){n.d(t,{Z:function(){return i}});let i=n.p+"assets/images/fork-repo-83773f6226f8bc5dfa7bab187157ca75.png"},266009:function(e,t,n){n.d(t,{Z:function(){return i}});let i=n.p+"assets/images/new-pr-29388f00a20b015cfa7bd4b6039b67af.png"},250065:function(e,t,n){n.d(t,{Z:function(){return c},a:function(){return s}});var i=n(667294);let o={},r=i.createContext(o);function s(e){let t=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),i.createElement(r.Provider,{value:t},e.children)}}}]);