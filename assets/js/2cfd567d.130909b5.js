"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["121369"],{195276:function(e,n,a){a.r(n),a.d(n,{default:()=>h,frontMatter:()=>r,metadata:()=>t,assets:()=>l,toc:()=>c,contentTitle:()=>o});var t=JSON.parse('{"id":"lakehouse/huggingface","title":"Analyzing Hugging Face Data","description":"Hugging Face is a popular centralized platform where users can store, share, and collaborate on building machine learning models, datasets,","source":"@site/docs/lakehouse/huggingface.md","sourceDirName":"lakehouse","slug":"/lakehouse/huggingface","permalink":"/docs/dev/lakehouse/huggingface","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1770477659000,"frontMatter":{"title":"Analyzing Hugging Face Data","language":"en","description":"Hugging Face is a popular centralized platform where users can store, share, and collaborate on building machine learning models, datasets,"},"sidebar":"docs","previous":{"title":"Analyze Files on S3/HDFS","permalink":"/docs/dev/lakehouse/file-analysis"},"next":{"title":"Hive Metastore","permalink":"/docs/dev/lakehouse/metastores/hive-metastore"}}'),s=a("785893"),i=a("250065");let r={title:"Analyzing Hugging Face Data",language:"en",description:"Hugging Face is a popular centralized platform where users can store, share, and collaborate on building machine learning models, datasets,"},o=void 0,l={},c=[{value:"Usage Instructions",id:"usage-instructions",level:2},{value:"Basic Examples",id:"basic-examples",level:2}];function d(e){let n={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",...(0,i.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://huggingface.co/",children:"Hugging Face"})," is a popular centralized platform where users can store, share, and collaborate on building machine learning models, datasets, and other resources."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://huggingface.co/datasets",children:"Hugging Face Dataset"})," may contain data files such as CSV, Parquet, JSONL, etc., depending on the repository type."]}),"\n",(0,s.jsxs)(n.p,{children:["Through the ",(0,s.jsx)(n.a,{href:"/docs/dev/sql-manual/sql-functions/table-valued-functions/http",children:"HTTP Table Value Function"})," feature, Doris can directly access data on Hugging Face datasets via SQL."]}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsx)(n.p,{children:"This feature is supported since version 4.0.2"})}),"\n",(0,s.jsx)(n.h2,{id:"usage-instructions",children:"Usage Instructions"}),"\n",(0,s.jsx)(n.p,{children:"Doris accesses data in Hugging Face Dataset through HTTP protocol."}),"\n",(0,s.jsxs)(n.p,{children:["Supports automatic type inference. Supports ",(0,s.jsx)(n.code,{children:"CREATE TABLE AS SELECT"})," and ",(0,s.jsx)(n.code,{children:"INSERT INTO ... SELECT"})," methods for data processing."]}),"\n",(0,s.jsx)(n.p,{children:"Supports CSV, Json, Parquet, ORC and other file types, with parameters same as File Table Valued Function."}),"\n",(0,s.jsx)(n.h2,{id:"basic-examples",children:"Basic Examples"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Access CSV data from the ",(0,s.jsx)(n.code,{children:"fka/awesome-chatgpt-prompts"})," repository"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:'SELECT COUNT(*) FROM\nHTTP(\n    "uri" = "hf://datasets/fka/awesome-chatgpt-prompts/blob/main/prompts.csv",\n    "format" = "csv"\n);\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Corresponding data file: ",(0,s.jsx)(n.a,{href:"https://huggingface.co/datasets/fka/awesome-chatgpt-prompts/blob/main/prompts.csv",children:"https://huggingface.co/datasets/fka/awesome-chatgpt-prompts/blob/main/prompts.csv"})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Create table, access JSON data from the ",(0,s.jsx)(n.code,{children:"stanfordnlp/imdb"})," repository with the ",(0,s.jsx)(n.code,{children:"script"})," branch specified. Then import data into the table."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:'CREATE TABLE hf_table AS\nSELECT * FROM\nHTTP(\n    "uri" = "hf://datasets/stanfordnlp/imdb@script/dataset_infos.json",\n    "format" = "json"\n);\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Corresponding data file: ",(0,s.jsx)(n.a,{href:"https://huggingface.co/datasets/stanfordnlp/imdb/blob/script/dataset_infos.json",children:"https://huggingface.co/datasets/stanfordnlp/imdb/blob/script/dataset_infos.json"})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Access Parquet files from the ",(0,s.jsx)(n.code,{children:"stanfordnlp/imdb"})," repository with the ",(0,s.jsx)(n.code,{children:"main"})," branch specified. Also, use wildcards to match multiple paths."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:'SELECT * FROM\nHTTP(\n    "uri" = "hf://datasets/stanfordnlp/imdb@main/*/*.parquet",\n    "format" = "parquet"\n) ORDER BY text LIMIT 1;\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Corresponding data file: ",(0,s.jsx)(n.a,{href:"https://huggingface.co/datasets/stanfordnlp/imdb/blob/main/plain_text/test-00000-of-00001.parquet",children:"https://huggingface.co/datasets/stanfordnlp/imdb/blob/main/plain_text/test-00000-of-00001.parquet"})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Access Parquet files from the ",(0,s.jsx)(n.code,{children:"stanfordnlp/imdb"})," repository with the ",(0,s.jsx)(n.code,{children:"main"})," branch specified. Also, use wildcards to match multiple recursive files. Then insert into the specified table."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:'INSERT INTO hf_table\nSELECT * FROM\nHTTP(\n    "uri" = "hf://datasets/stanfordnlp/imdb@main/**/test-00000-of-0000[1].parquet",\n    "format" = "parquet"\n) ORDER BY text LIMIT 1;\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Corresponding data file: ",(0,s.jsx)(n.a,{href:"https://huggingface.co/datasets/stanfordnlp/imdb/blob/main/plain_text/test-00000-of-00001.parquet",children:"https://huggingface.co/datasets/stanfordnlp/imdb/blob/main/plain_text/test-00000-of-00001.parquet"})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Analyze files that require authorization"}),"\n",(0,s.jsxs)(n.p,{children:["Get a Token from your Hugging Face account (starting with ",(0,s.jsx)(n.code,{children:"hf_"}),"), then add it to the ",(0,s.jsx)(n.code,{children:"http.header.Authorization"})," property."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:'SELECT * FROM\nHTTP(\n    "uri" = "hf://datasets/gaia-benchmark/GAIA/blob/main/2023/validation/metadata.level1.parquet",\n    "format" = "parquet",\n    "http.header.Authorization" = "Bearer hf_MWYzOJJoZEymb..."\n) LIMIT 1\\G\n'})}),"\n"]}),"\n"]})]})}function h(e={}){let{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},250065:function(e,n,a){a.d(n,{Z:function(){return o},a:function(){return r}});var t=a(667294);let s={},i=t.createContext(s);function r(e){let n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);