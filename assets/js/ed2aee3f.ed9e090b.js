"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["677066"],{888507:function(e,n,s){s.r(n),s.d(n,{default:()=>h,frontMatter:()=>i,metadata:()=>l,assets:()=>c,toc:()=>d,contentTitle:()=>t});var l=JSON.parse('{"id":"sql-manual/sql-functions/scalar-functions/json-functions/json-extract","title":"JSON_EXTRACT","description":"Extract the field specified by jsonpath from JSON type data.","source":"@site/versioned_docs/version-4.x/sql-manual/sql-functions/scalar-functions/json-functions/json-extract.md","sourceDirName":"sql-manual/sql-functions/scalar-functions/json-functions","slug":"/sql-manual/sql-functions/scalar-functions/json-functions/json-extract","permalink":"/docs/4.x/sql-manual/sql-functions/scalar-functions/json-functions/json-extract","draft":false,"unlisted":false,"tags":[],"version":"4.x","lastUpdatedAt":1770477659000,"frontMatter":{"title":"JSON_EXTRACT","language":"en","description":"Extract the field specified by jsonpath from JSON type data."},"sidebar":"docs","previous":{"title":"JSON_EXISTS_PATH","permalink":"/docs/4.x/sql-manual/sql-functions/scalar-functions/json-functions/json-exists-path"},"next":{"title":"JSON_EXTRACT_BIGINT","permalink":"/docs/4.x/sql-manual/sql-functions/scalar-functions/json-functions/json-extract-bigint"}}'),a=s("785893"),r=s("250065");let i={title:"JSON_EXTRACT",language:"en",description:"Extract the field specified by jsonpath from JSON type data."},t=void 0,c={},d=[{value:"Description",id:"description",level:2},{value:"Syntax",id:"syntax",level:2},{value:"Parameters",id:"parameters",level:2},{value:"Required Parameters:",id:"required-parameters",level:3},{value:"Optional/Variable Parameters",id:"optionalvariable-parameters",level:3},{value:"Return Value",id:"return-value",level:2},{value:"Usage Notes",id:"usage-notes",level:2},{value:"Examples",id:"examples",level:2}];function o(e){let n={a:"a",annotation:"annotation",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",math:"math",mo:"mo",mrow:"mrow",msup:"msup",ol:"ol",p:"p",pre:"pre",semantics:"semantics",span:"span",ul:"ul",...(0,r.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h2,{id:"description",children:"Description"}),"\n",(0,a.jsx)(n.p,{children:"Extract the field specified by json_path from JSON type data."}),"\n",(0,a.jsx)(n.h2,{id:"syntax",children:"Syntax"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:"JSON_EXTRACT (<json_object>, <path>[, <path2>, ...])\n"})}),"\n",(0,a.jsx)(n.h2,{id:"parameters",children:"Parameters"}),"\n",(0,a.jsx)(n.h3,{id:"required-parameters",children:"Required Parameters:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"<json_object>"}),": The JSON type expression to extract from."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"<path>"}),": The JSON path to extract the target element from the target JSON."]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"optionalvariable-parameters",children:"Optional/Variable Parameters"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"<path2>"})," Multiple path values can be extracted from the JSON object."]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"return-value",children:"Return Value"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"Nullable(JSON)"}),": Returns the JSON element pointed to by ",(0,a.jsx)(n.code,{children:"<path>"}),". If multiple results are matched, they will be returned as a JSON array."]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"usage-notes",children:"Usage Notes"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["If ",(0,a.jsx)(n.code,{children:"<json_object>"})," is NULL, or ",(0,a.jsx)(n.code,{children:"<path>"})," is NULL, returns NULL."]}),"\n",(0,a.jsxs)(n.li,{children:["For single ",(0,a.jsx)(n.code,{children:"<path>"})," parameter cases, if the ",(0,a.jsx)(n.code,{children:"<path>"})," does not exist, returns NULL."]}),"\n",(0,a.jsxs)(n.li,{children:["For multiple ",(0,a.jsx)(n.code,{children:"<path>"})," parameter cases, non-existent paths are ignored, and matched elements are returned as a JSON array. If no matches are found, returns NULL."]}),"\n",(0,a.jsxs)(n.li,{children:["If ",(0,a.jsx)(n.code,{children:"<path>"})," is not a valid path, an error is reported."]}),"\n",(0,a.jsxs)(n.li,{children:["If the value corresponding to ",(0,a.jsx)(n.code,{children:"<path>"})," is a string, the returned string will be surrounded by double quotes (",(0,a.jsx)(n.code,{children:'"'}),"). To get results without double quotes, please use the function ",(0,a.jsx)(n.a,{href:"/docs/4.x/sql-manual/sql-functions/scalar-functions/json-functions/json-unquote",children:(0,a.jsx)(n.code,{children:"JSON_UNQUOTE"})}),"."]}),"\n",(0,a.jsxs)(n.li,{children:["The syntax of ",(0,a.jsx)(n.code,{children:"<path>"})," is as follows:\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"$"})," represents the json root"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:".k1"})," represents the element with key ",(0,a.jsx)(n.code,{children:"k1"})," in the json object\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:['If the key value contains ".", ',(0,a.jsx)(n.code,{children:"<path>"})," needs to use double quotes, for example ",(0,a.jsx)(n.code,{children:'SELECT json_extract(\'{"k1.a":"abc","k2":300}\', \'$."k1.a"\')'}),";"]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"[i]"})," represents the element at index i in the json array\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["To get the last element of json_array, you can use ",(0,a.jsx)(n.code,{children:"$[last]"}),", the second to last element can use ",(0,a.jsx)(n.code,{children:"$[last-1]"}),", and so on."]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"*"})," represents a wildcard, where ",(0,a.jsx)(n.code,{children:"$.*"})," represents all members of the root object, and ",(0,a.jsx)(n.code,{children:"$[*]"})," represents all elements of the array."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"**"})," is used in combination with '",(0,a.jsxs)(n.span,{className:"katex",children:[(0,a.jsx)(n.span,{className:"katex-mathml",children:(0,a.jsx)(n.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(n.semantics,{children:[(0,a.jsxs)(n.mrow,{children:[(0,a.jsxs)(n.msup,{children:[(0,a.jsx)(n.mrow,{}),(0,a.jsx)(n.mo,{mathvariant:"normal",lspace:"0em",rspace:"0em",children:"\u2032"})]}),(0,a.jsxs)(n.msup,{children:[(0,a.jsx)(n.mo,{separator:"true",children:","}),(0,a.jsx)(n.mo,{mathvariant:"normal",lspace:"0em",rspace:"0em",children:"\u2032"})]})]}),(0,a.jsx)(n.annotation,{encoding:"application/x-tex",children:"', '"})]})})}),(0,a.jsx)(n.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(n.span,{className:"base",children:[(0,a.jsx)(n.span,{className:"strut",style:{height:"0.9463em",verticalAlign:"-0.1944em"}}),(0,a.jsxs)(n.span,{className:"mord",children:[(0,a.jsx)(n.span,{}),(0,a.jsx)(n.span,{className:"msupsub",children:(0,a.jsx)(n.span,{className:"vlist-t",children:(0,a.jsx)(n.span,{className:"vlist-r",children:(0,a.jsx)(n.span,{className:"vlist",style:{height:"0.7519em"},children:(0,a.jsxs)(n.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[(0,a.jsx)(n.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(n.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(n.span,{className:"mord mtight",children:(0,a.jsx)(n.span,{className:"mord mtight",children:"\u2032"})})})]})})})})})]}),(0,a.jsxs)(n.span,{className:"mpunct",children:[(0,a.jsx)(n.span,{className:"mpunct",children:","}),(0,a.jsx)(n.span,{className:"msupsub",children:(0,a.jsx)(n.span,{className:"vlist-t",children:(0,a.jsx)(n.span,{className:"vlist-r",children:(0,a.jsx)(n.span,{className:"vlist",style:{height:"0.7519em"},children:(0,a.jsxs)(n.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[(0,a.jsx)(n.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(n.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(n.span,{className:"mord mtight",children:(0,a.jsx)(n.span,{className:"mord mtight",children:"\u2032"})})})]})})})})})]})]})})]}),"**' represents all paths (including multi-level subpaths)."]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["If ",(0,a.jsx)(n.code,{children:"<path>"})," contains wildcards (",(0,a.jsx)(n.code,{children:"*"}),"), the matching results will be returned in array form."]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"General parameters"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:'SELECT JSON_EXTRACT(\'{"k1":"v31","k2":300}\', \'$.k1\');\n'})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:'+-----------------------------------------------+\n| JSON_EXTRACT(\'{"k1":"v31","k2":300}\', \'$.k1\') |\n+-----------------------------------------------+\n| "v31"                                         |\n+-----------------------------------------------+\n'})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsxs)(n.p,{children:["Note: The returned result is ",(0,a.jsx)(n.code,{children:'"v31"'})," not ",(0,a.jsx)(n.code,{children:"v31"}),"."]}),"\n"]}),"\n",(0,a.jsxs)(n.ol,{start:"2",children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"NULL parameters"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:"select JSON_EXTRACT(null, '$.k1');\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"+----------------------------+\n| JSON_EXTRACT(null, '$.k1') |\n+----------------------------+\n| NULL                       |\n+----------------------------+\n"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.code,{children:"<path>"})," is NULL"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:'SELECT JSON_EXTRACT(\'{"k1":"v31","k2":300}\', NULL);\n'})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:'+---------------------------------------------+\n| JSON_EXTRACT(\'{"k1":"v31","k2":300}\', NULL) |\n+---------------------------------------------+\n| NULL                                        |\n+---------------------------------------------+\n'})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Multi-level path"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:'SELECT JSON_EXTRACT(\'{"k1":"v31","k2":{"sub_key": 1234.56}}\', \'$.k2.sub_key\');\n'})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:'+------------------------------------------------------------------------+\n| JSON_EXTRACT(\'{"k1":"v31","k2":{"sub_key": 1234.56}}\', \'$.k2.sub_key\') |\n+------------------------------------------------------------------------+\n| 1234.56                                                                |\n+------------------------------------------------------------------------+\n'})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Array path"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:"SELECT JSON_EXTRACT(json_array(\"abc\", 123, cast(now() as string)), '$[2]');\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:'+----------------------------------------------------------------------+\n| JSON_EXTRACT(json_array("abc", 123, cast(now() as string)), \'$.[2]\') |\n+----------------------------------------------------------------------+\n| "2025-07-16 18:35:25"                                                |\n+----------------------------------------------------------------------+\n'})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Non-existent path"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:'SELECT JSON_EXTRACT(\'{"k1":"v31","k2":300}\', \'$.k3\');\n'})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:'+-----------------------------------------------+\n| JSON_EXTRACT(\'{"k1":"v31","k2":300}\', \'$.k3\') |\n+-----------------------------------------------+\n| NULL                                          |\n+-----------------------------------------------+\n'})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Multiple path parameters"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:"select JSON_EXTRACT('{\"id\": 123, \"name\": \"doris\"}', '$.name', '$.id', '$.not_exists');\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"+--------------------------------------------------------------------------------+\n| JSON_EXTRACT('{\"id\": 123, \"name\": \"doris\"}', '$.name', '$.id', '$.not_exists') |\n+--------------------------------------------------------------------------------+\n| [\"doris\",123]                                                                  |\n+--------------------------------------------------------------------------------+\n"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"Even if there is only one match, it will be returned in array form"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:"select JSON_EXTRACT('{\"id\": 123, \"name\": \"doris\"}', '$.name', '$.id2', '$.not_exists');\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"+---------------------------------------------------------------------------------+\n| JSON_EXTRACT('{\"id\": 123, \"name\": \"doris\"}', '$.name', '$.id2', '$.not_exists') |\n+---------------------------------------------------------------------------------+\n| [\"doris\"]                                                                       |\n+---------------------------------------------------------------------------------+\n"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"If all paths have no matches, return NULL"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:"select JSON_EXTRACT('{\"id\": 123, \"name\": \"doris\"}', '$.k1', '$.k2', '$.not_exists');\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"+------------------------------------------------------------------------------+\n| JSON_EXTRACT('{\"id\": 123, \"name\": \"doris\"}', '$.k1', '$.k2', '$.not_exists') |\n+------------------------------------------------------------------------------+\n| NULL                                                                         |\n+------------------------------------------------------------------------------+\n"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Wildcard path"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:"select json_extract('{\"k\": [1,2,3,4,5]}', '$.k[*]');\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"+----------------------------------------------+\n| json_extract('{\"k\": [1,2,3,4,5]}', '$.k[*]') |\n+----------------------------------------------+\n| [1,2,3,4,5]                                  |\n+----------------------------------------------+\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:'select json_extract(\'{"k": [1,2,3,4,5], "k2": "abc", "k3": {"k4": "v4"}}\', \'$.*\', \'$.k3.k4\');\n'})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:'+---------------------------------------------------------------------------------------+\n| json_extract(\'{"k": [1,2,3,4,5], "k2": "abc", "k3": {"k4": "v4"}}\', \'$.*\', \'$.k3.k4\') |\n+---------------------------------------------------------------------------------------+\n| [[1,2,3,4,5],"abc",{"k4":"v4"},"v4"]                                                  |\n+---------------------------------------------------------------------------------------+\n'})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"'**' in path"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:'select json_extract(\'{"k": 123, "b": {"k": ["ab", "cd"]}}\', \'$**.k\');\n'})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-text",children:'+---------------------------------------------------------------+\n| json_extract(\'{"k": 123, "b": {"k": ["ab", "cd"]}}\', \'$**.k\') |\n+---------------------------------------------------------------+\n| [123,["ab","cd"]]                                             |\n+---------------------------------------------------------------+\n'})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Value is NULL case"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:"select JSON_EXTRACT('{\"id\": 123, \"name\": null}', '$.name') v, JSON_EXTRACT('{\"id\": 123, \"name\": null}', '$.name') is null v2;\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"+------+------+\n| v    | v2   |\n+------+------+\n| null |    0 |\n+------+------+\n"})}),"\n"]}),"\n"]})]})}function h(e={}){let{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(o,{...e})}):o(e)}},250065:function(e,n,s){s.d(n,{Z:function(){return t},a:function(){return i}});var l=s(667294);let a={},r=l.createContext(a);function i(e){let n=l.useContext(r);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),l.createElement(r.Provider,{value:n},e.children)}}}]);