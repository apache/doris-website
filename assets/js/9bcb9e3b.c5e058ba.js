"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["369751"],{868700:function(e,s,n){n.r(s),n.d(s,{default:()=>h,frontMatter:()=>o,metadata:()=>i,assets:()=>c,toc:()=>l,contentTitle:()=>a});var i=JSON.parse('{"id":"lakehouse/best-practices/doris-nessie","title":"Integration with Nessie","description":"This article will guide you through integrating Apache Doris with Nessie to achieve efficient querying and management of Iceberg data. We will take you through the entire process from environment preparation to final querying step by step.","source":"@site/versioned_docs/version-4.x/lakehouse/best-practices/doris-nessie.md","sourceDirName":"lakehouse/best-practices","slug":"/lakehouse/best-practices/doris-nessie","permalink":"/docs/4.x/lakehouse/best-practices/doris-nessie","draft":false,"unlisted":false,"tags":[],"version":"4.x","lastUpdatedAt":1770477659000,"frontMatter":{"title":"Integration with Nessie","language":"en","description":"This article will guide you through integrating Apache Doris with Nessie to achieve efficient querying and management of Iceberg data. We will take you through the entire process from environment preparation to final querying step by step."},"sidebar":"docs","previous":{"title":"Integration with Lakekeeper","permalink":"/docs/4.x/lakehouse/best-practices/doris-lakekeeper"},"next":{"title":"Integration with Aliyun DLF Rest Catalog","permalink":"/docs/4.x/lakehouse/best-practices/doris-dlf-paimon"}}'),r=n("785893"),t=n("250065");let o={title:"Integration with Nessie",language:"en",description:"This article will guide you through integrating Apache Doris with Nessie to achieve efficient querying and management of Iceberg data. We will take you through the entire process from environment preparation to final querying step by step."},a=void 0,c={},l=[{value:"1. AWS Environment Preparation",id:"1-aws-environment-preparation",level:2},{value:"1.1 Create S3 Storage Bucket",id:"11-create-s3-storage-bucket",level:3},{value:"1.2 Create IAM Role for Object Storage Access (Optional)",id:"12-create-iam-role-for-object-storage-access-optional",level:3},{value:"2. Nessie Deployment and Warehouse Configuration",id:"2-nessie-deployment-and-warehouse-configuration",level:2},{value:"2.1 Deploy Nessie Using Docker Compose (Credential Vending Mode)",id:"21-deploy-nessie-using-docker-compose-credential-vending-mode",level:3},{value:"2.2 Deploy Nessie Using Docker Compose (Static Credentials Mode)",id:"22-deploy-nessie-using-docker-compose-static-credentials-mode",level:3},{value:"3. Doris Connection to Nessie",id:"3-doris-connection-to-nessie",level:2},{value:"Method 1: Temporary Storage Credentials (Credential Vending)",id:"method-1-temporary-storage-credentials-credential-vending",level:3},{value:"Method 2: Static Storage Credentials (AK/SK)",id:"method-2-static-storage-credentials-aksk",level:3},{value:"4. Verify Connection in Doris",id:"4-verify-connection-in-doris",level:2}];function d(e){let s={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.a,{href:"https://projectnessie.org/",children:"Nessie"})," is an open-source transactional catalog for data lakes, providing Git-like version control capabilities for your data. It implements the Iceberg REST Catalog specification and supports features like branching, tagging, and time travel across multiple table formats including Apache Iceberg."]}),"\n",(0,r.jsx)(s.p,{children:"This article will guide you through integrating Apache Doris with Nessie to achieve efficient querying and management of Iceberg data. We will take you through the entire process from environment preparation to final querying step by step."}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Through this document, you will learn:"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"AWS Environment Preparation"}),": How to create and configure S3 storage buckets in AWS, and prepare necessary IAM roles and policies for Nessie, enabling Nessie to access S3 and distribute access credentials to Doris."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Nessie Deployment and Configuration"}),": How to deploy Nessie service using Docker Compose, and configure Warehouse to provide metadata access endpoints for Doris."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Doris Connection to Nessie"}),": How to use Doris to access Iceberg data through Nessie for read and write operations."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"1-aws-environment-preparation",children:"1. AWS Environment Preparation"}),"\n",(0,r.jsx)(s.p,{children:"Before we begin, we need to prepare S3 storage buckets and corresponding IAM roles on AWS, which forms the foundation for Nessie to manage data and Doris to access data."}),"\n",(0,r.jsx)(s.h3,{id:"11-create-s3-storage-bucket",children:"1.1 Create S3 Storage Bucket"}),"\n",(0,r.jsxs)(s.p,{children:["First, we create an S3 Bucket named ",(0,r.jsx)(s.code,{children:"nessie-doris-demo"})," to store Iceberg table data that will be created later."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# Create S3 storage bucket\naws s3 mb s3://nessie-doris-demo --region us-east-1\n# Verify bucket creation success\naws s3 ls | grep nessie-doris-demo\n"})}),"\n",(0,r.jsx)(s.h3,{id:"12-create-iam-role-for-object-storage-access-optional",children:"1.2 Create IAM Role for Object Storage Access (Optional)"}),"\n",(0,r.jsx)(s.p,{children:"If you plan to use Credential Vending mode, you need to create an IAM role for Nessie to use through the STS AssumeRole mechanism. This design follows the security best practices of least privilege principle and separation of duties."}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"Create trust policy file"}),"\n",(0,r.jsxs)(s.p,{children:["Create ",(0,r.jsx)(s.code,{children:"nessie-trust-policy.json"})," file:"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:'cat > nessie-trust-policy.json << \'EOF\'\n{\n    "Version": "2012-10-17",\n    "Statement": [\n    {\n        "Effect": "Allow",\n        "Principal": {\n            "AWS": "arn:aws:iam::YOUR_ACCOUNT_ID:user/YOUR_USER"\n        },\n        "Action": "sts:AssumeRole"\n    }\n    ]\n}\nEOF\n'})}),"\n",(0,r.jsxs)(s.blockquote,{children:["\n",(0,r.jsxs)(s.p,{children:["Note: Please replace YOUR_ACCOUNT_ID with your actual AWS Account ID, which can be obtained via ",(0,r.jsx)(s.code,{children:"aws sts get-caller-identity --query Account --output text"}),". Replace YOUR_USER with the actual IAM username."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"Create IAM Role"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:'aws iam create-role \\\n    --role-name nessie-sts-role \\\n    --assume-role-policy-document file://nessie-trust-policy.json \\\n    --description "IAM Role for Nessie to access S3 storage"\n'})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"Attach S3 access permission policy"}),"\n",(0,r.jsxs)(s.p,{children:["Create ",(0,r.jsx)(s.code,{children:"nessie-s3-policy.json"})," file:"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:'cat > nessie-s3-policy.json << \'EOF\'\n{\n    "Version": "2012-10-17",\n    "Statement": [{\n        "Effect": "Allow",\n        "Action": [\n            "s3:ListBucket",\n            "s3:GetBucketLocation",\n            "s3:ListBucketMultipartUploads",\n            "s3:ListMultipartUploadParts",\n            "s3:AbortMultipartUpload",\n            "s3:GetObject",\n            "s3:PutObject",\n            "s3:DeleteObject"\n        ],\n        "Resource": [\n            "arn:aws:s3:::nessie-doris-demo",\n            "arn:aws:s3:::nessie-doris-demo/*"\n        ]\n    }]\n}\nEOF\n'})}),"\n",(0,r.jsx)(s.p,{children:"Attach the policy to the role:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"aws iam put-role-policy \\\n    --role-name nessie-sts-role \\\n    --policy-name nessie-s3-access \\\n    --policy-document file://nessie-s3-policy.json\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"Grant AssumeRole permission to the user"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:'cat > user-assume-policy.json << \'EOF\'\n{\n    "Version": "2012-10-17",\n    "Statement": [{\n        "Effect": "Allow",\n        "Action": "sts:AssumeRole",\n        "Resource": "arn:aws:iam::YOUR_ACCOUNT_ID:role/nessie-sts-role"\n    }]\n}\nEOF\n\naws iam put-user-policy \\\n    --user-name YOUR_USER \\\n    --policy-name allow-assume-nessie-role \\\n    --policy-document file://user-assume-policy.json\n'})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"Verify creation results"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"aws iam get-role --role-name nessie-sts-role\naws iam list-role-policies --role-name nessie-sts-role\n\n# Verify AssumeRole is available\naws sts assume-role \\\n    --role-arn arn:aws:iam::YOUR_ACCOUNT_ID:role/nessie-sts-role \\\n    --role-session-name nessie-test\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"2-nessie-deployment-and-warehouse-configuration",children:"2. Nessie Deployment and Warehouse Configuration"}),"\n",(0,r.jsx)(s.p,{children:"After environment preparation is complete, we begin deploying the Nessie service and configuring the Warehouse."}),"\n",(0,r.jsx)(s.h3,{id:"21-deploy-nessie-using-docker-compose-credential-vending-mode",children:"2.1 Deploy Nessie Using Docker Compose (Credential Vending Mode)"}),"\n",(0,r.jsxs)(s.p,{children:["This is the ",(0,r.jsx)(s.strong,{children:"most recommended"})," deployment approach, enhancing security through temporary credentials."]}),"\n",(0,r.jsxs)(s.p,{children:["Create a ",(0,r.jsx)(s.code,{children:".env"})," file to store AWS credentials:"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"AWS_ACCESS_KEY_ID=YOUR_ACCESS_KEY\nAWS_SECRET_ACCESS_KEY=YOUR_SECRET_KEY\n"})}),"\n",(0,r.jsxs)(s.p,{children:["Create a ",(0,r.jsx)(s.code,{children:"docker-compose.yml"})," file:"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-yaml",children:'version: "3.8"\n\nservices:\n  postgres:\n    image: postgres:16\n    environment:\n      POSTGRES_DB: nessie\n      POSTGRES_USER: nessie\n      POSTGRES_PASSWORD: nessie\n    ports:\n      - "5432:5432"\n    volumes:\n      - pgdata:/var/lib/postgresql/data\n\n  nessie:\n    image: ghcr.io/projectnessie/nessie:0.106.0-java\n    depends_on:\n      - postgres\n    ports:\n      - "19120:19120"\n    environment:\n      JAVA_OPTS_APPEND: >-\n        -Dnessie.version.store.type=JDBC2\n        -Dnessie.version.store.persist.jdbc.datasource=postgresql\n        -Dquarkus.datasource.postgresql.jdbc.url=jdbc:postgresql://postgres:5432/nessie\n        -Dquarkus.datasource.postgresql.username=nessie\n        -Dquarkus.datasource.postgresql.password=nessie\n        -Dnessie.catalog.default-warehouse=nessie-warehouse\n        -Dnessie.catalog.warehouses.nessie-warehouse.location=s3://nessie-doris-demo/warehouse\n        -Dnessie.catalog.service.s3.default-options.region=us-east-1\n        -Dnessie.catalog.service.s3.default-options.auth-type=APPLICATION_GLOBAL\n        -Dnessie.catalog.service.s3.default-options.server-iam.enabled=true\n        -Dnessie.catalog.service.s3.default-options.server-iam.assume-role=arn:aws:iam::YOUR_ACCOUNT_ID:role/nessie-sts-role\n        -Dnessie.catalog.service.s3.default-options.server-iam.role-session-name=nessie-doris\n      AWS_ACCESS_KEY_ID: ${AWS_ACCESS_KEY_ID}\n      AWS_SECRET_ACCESS_KEY: ${AWS_SECRET_ACCESS_KEY}\n\nvolumes:\n  pgdata:\n'})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Key Configuration Parameters for Credential Vending:"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Parameter"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"nessie.version.store.type"})}),(0,r.jsx)(s.td,{children:"Version store type, using JDBC2 for PostgreSQL backend."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"nessie.catalog.default-warehouse"})}),(0,r.jsx)(s.td,{children:"The default warehouse name."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"nessie.catalog.warehouses.<name>.location"})}),(0,r.jsx)(s.td,{children:"The S3 location for storing Iceberg table data."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"server-iam.enabled"})}),(0,r.jsxs)(s.td,{children:["Set to ",(0,r.jsx)(s.code,{children:"true"})," to enable Credential Vending."]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"server-iam.assume-role"})}),(0,r.jsx)(s.td,{children:"The IAM Role ARN that Nessie will assume to access S3."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"server-iam.role-session-name"})}),(0,r.jsx)(s.td,{children:"Session name for the assumed role."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"auth-type"})}),(0,r.jsxs)(s.td,{children:["Set to ",(0,r.jsx)(s.code,{children:"APPLICATION_GLOBAL"})," for using application-level credentials."]})]})]})]}),"\n",(0,r.jsx)(s.p,{children:"Start Nessie:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"docker compose up -d\n"})}),"\n",(0,r.jsxs)(s.p,{children:["After starting, you can access the Nessie API at ",(0,r.jsx)(s.code,{children:"http://YOUR_HOST_IP:19120"}),"."]}),"\n",(0,r.jsx)(s.h3,{id:"22-deploy-nessie-using-docker-compose-static-credentials-mode",children:"2.2 Deploy Nessie Using Docker Compose (Static Credentials Mode)"}),"\n",(0,r.jsx)(s.p,{children:"If you don't need Credential Vending, you can use static credentials mode for quick testing:"}),"\n",(0,r.jsxs)(s.p,{children:["Create a ",(0,r.jsx)(s.code,{children:".env"})," file to store AWS credentials:"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"AWS_ACCESS_KEY_ID=YOUR_ACCESS_KEY\nAWS_SECRET_ACCESS_KEY=YOUR_SECRET_KEY\n"})}),"\n",(0,r.jsxs)(s.p,{children:["Create a ",(0,r.jsx)(s.code,{children:"docker-compose.yml"})," file:"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-yaml",children:'version: "3.8"\n\nservices:\n  postgres:\n    image: postgres:16\n    environment:\n      POSTGRES_DB: nessie\n      POSTGRES_USER: nessie\n      POSTGRES_PASSWORD: nessie\n    ports:\n      - "5432:5432"\n    volumes:\n      - pgdata:/var/lib/postgresql/data\n\n  nessie:\n    image: ghcr.io/projectnessie/nessie:0.106.0-java\n    depends_on:\n      - postgres\n    ports:\n      - "19120:19120"\n    environment:\n      JAVA_OPTS_APPEND: >-\n        -Dnessie.version.store.type=JDBC2\n        -Dnessie.version.store.persist.jdbc.datasource=postgresql\n        -Dquarkus.datasource.postgresql.jdbc.url=jdbc:postgresql://postgres:5432/nessie\n        -Dquarkus.datasource.postgresql.username=nessie\n        -Dquarkus.datasource.postgresql.password=nessie\n\n        -Dnessie.catalog.default-warehouse=nessie-warehouse\n        -Dnessie.catalog.warehouses.nessie-warehouse.location=s3://nessie-doris-demo/warehouse\n\n        -Dnessie.catalog.service.s3.default-options.region=us-east-1\n        -Dnessie.catalog.service.s3.default-options.access-key=urn:nessie-secret:quarkus:my-secrets-default\n        -Dmy-secrets-default.name=${AWS_ACCESS_KEY_ID}\n        -Dmy-secrets-default.secret=${AWS_SECRET_ACCESS_KEY}\n\n    env_file:\n      - .env\n\nvolumes:\n  pgdata:\n'})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Key Configuration Parameters:"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Parameter"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"nessie.version.store.type"})}),(0,r.jsx)(s.td,{children:"Version store type, using JDBC2 for PostgreSQL backend."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"nessie.catalog.default-warehouse"})}),(0,r.jsx)(s.td,{children:"The default warehouse name."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"nessie.catalog.warehouses.<name>.location"})}),(0,r.jsx)(s.td,{children:"The S3 location for storing Iceberg table data."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"nessie.catalog.service.s3.default-options.region"})}),(0,r.jsx)(s.td,{children:"AWS region for S3 bucket."})]})]})]}),"\n",(0,r.jsx)(s.h2,{id:"3-doris-connection-to-nessie",children:"3. Doris Connection to Nessie"}),"\n",(0,r.jsx)(s.p,{children:"Now, we will create an Iceberg Catalog in Doris that connects to the Nessie service."}),"\n",(0,r.jsx)(s.h3,{id:"method-1-temporary-storage-credentials-credential-vending",children:"Method 1: Temporary Storage Credentials (Credential Vending)"}),"\n",(0,r.jsxs)(s.p,{children:["This is the ",(0,r.jsx)(s.strong,{children:"most recommended"})," approach. When needing to read/write data files on S3, Doris requests a temporary, minimally-privileged S3 access credential from Nessie."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"CREATE CATALOG nessie_vc PROPERTIES (\n    'type' = 'iceberg',\n    'iceberg.catalog.type' = 'rest',\n    'iceberg.rest.uri' = 'http://YOUR_NESSIE_HOST:19120/iceberg/main',\n    'warehouse' = 'nessie-warehouse',\n    's3.endpoint' = 'https://s3.us-east-1.amazonaws.com',\n    's3.region' = 'us-east-1',\n    -- Enable credential vending\n    'iceberg.rest.vended-credentials-enabled' = 'true'\n);\n"})}),"\n",(0,r.jsxs)(s.blockquote,{children:["\n",(0,r.jsxs)(s.p,{children:["Note: The Nessie REST Catalog URI format is ",(0,r.jsx)(s.code,{children:"http://HOST:PORT/iceberg/{branch}"}),", where ",(0,r.jsx)(s.code,{children:"main"})," is the default branch name."]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"method-2-static-storage-credentials-aksk",children:"Method 2: Static Storage Credentials (AK/SK)"}),"\n",(0,r.jsx)(s.p,{children:"In this approach, Doris directly uses static AK/SK hardcoded in the configuration to access object storage. This method is simple to configure and suitable for quick testing, but has lower security."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"CREATE CATALOG nessie_static PROPERTIES (\n    'type' = 'iceberg',\n    'iceberg.catalog.type' = 'rest',\n    'iceberg.rest.uri' = 'http://YOUR_NESSIE_HOST:19120/iceberg/main',\n    'warehouse' = 'nessie-warehouse',\n    -- Directly provide S3 access keys\n    's3.access_key' = 'YOUR_ACCESS_KEY',\n    's3.secret_key' = 'YOUR_SECRET_KEY',\n    's3.endpoint' = 'https://s3.us-east-1.amazonaws.com',\n    's3.region' = 'us-east-1'\n);\n"})}),"\n",(0,r.jsx)(s.h2,{id:"4-verify-connection-in-doris",children:"4. Verify Connection in Doris"}),"\n",(0,r.jsx)(s.p,{children:"Regardless of which method you used to create the Catalog, you can verify end-to-end connectivity through the following SQL."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- Switch to the Catalog\nUSE nessie_vc;\n\n-- Create a namespace (database)\nCREATE DATABASE demo;\nUSE demo;\n\n-- Create an Iceberg table\nCREATE TABLE my_iceberg_table (\n  id INT,\n  name STRING\n)\nPROPERTIES (\n  'write-format'='parquet'\n);\n\n-- Insert data\nINSERT INTO my_iceberg_table VALUES (1, 'alice'), (2, 'bob');\n\n-- Query data\nSELECT * FROM my_iceberg_table;\n-- Expected result:\n-- +------+-------+\n-- | id   | name  |\n-- +------+-------+\n-- | 1    | alice |\n-- | 2    | bob   |\n-- +------+-------+\n"})}),"\n",(0,r.jsx)(s.p,{children:"If all the above operations complete successfully, congratulations! You have successfully established the complete data lake pipeline: Doris -> Nessie -> S3."}),"\n",(0,r.jsx)(s.p,{children:"For more information on using Doris to manage Iceberg tables, please visit:"}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.a,{href:"https://doris.apache.org/docs/lakehouse/catalogs/iceberg-catalog",children:"https://doris.apache.org/docs/lakehouse/catalogs/iceberg-catalog"})})]})}function h(e={}){let{wrapper:s}={...(0,t.a)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},250065:function(e,s,n){n.d(s,{Z:function(){return a},a:function(){return o}});var i=n(667294);let r={},t=i.createContext(r);function o(e){let s=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(t.Provider,{value:s},e.children)}}}]);