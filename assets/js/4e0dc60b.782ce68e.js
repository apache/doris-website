"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["476507"],{807108:function(e,n,t){t.r(n),t.d(n,{default:()=>h,frontMatter:()=>d,metadata:()=>s,assets:()=>a,toc:()=>l,contentTitle:()=>o});var s=JSON.parse('{"id":"lakehouse/catalogs/jdbc-pg-catalog","title":"PostgreSQL JDBC Catalog","description":"Doris JDBC Catalog supports connecting to PostgreSQL databases via the standard JDBC interface. This document describes how to configure a PostgreSQL database connection.","source":"@site/docs/lakehouse/catalogs/jdbc-pg-catalog.md","sourceDirName":"lakehouse/catalogs","slug":"/lakehouse/catalogs/jdbc-pg-catalog","permalink":"/docs/dev/lakehouse/catalogs/jdbc-pg-catalog","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"PostgreSQL JDBC Catalog","language":"en"},"sidebar":"docs","previous":{"title":"MySQL JDBC Catalog","permalink":"/docs/dev/lakehouse/catalogs/jdbc-mysql-catalog"},"next":{"title":"Oracle JDBC Catalog","permalink":"/docs/dev/lakehouse/catalogs/jdbc-oracle-catalog"}}'),r=t("785893"),i=t("250065");let d={title:"PostgreSQL JDBC Catalog",language:"en"},o=void 0,a={},l=[{value:"Usage Notes",id:"usage-notes",level:2},{value:"Connecting to PostgreSQL",id:"connecting-to-postgresql",level:2},{value:"Connection Security",id:"connection-security",level:3},{value:"Hierarchical Mapping",id:"hierarchical-mapping",level:2},{value:"Column Type Mapping",id:"column-type-mapping",level:2},{value:"Appendix",id:"appendix",level:2},{value:"Time Zone Issues",id:"time-zone-issues",level:3}];function c(e){let n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"Doris JDBC Catalog supports connecting to PostgreSQL databases via the standard JDBC interface. This document describes how to configure a PostgreSQL database connection."}),"\n",(0,r.jsxs)(n.p,{children:["For an overview of JDBC Catalog, please refer to: ",(0,r.jsx)(n.a,{href:"/docs/dev/lakehouse/catalogs/jdbc-catalog-overview",children:"JDBC Catalog Overview"})]}),"\n",(0,r.jsx)(n.h2,{id:"usage-notes",children:"Usage Notes"}),"\n",(0,r.jsx)(n.p,{children:"To connect to a PostgreSQL database, you need"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"PostgreSQL 11.x or higher"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["JDBC driver for PostgreSQL database, which you can download the latest or specified version from ",(0,r.jsx)(n.a,{href:"https://mvnrepository.com/artifact/org.postgresql/postgresql",children:"Maven Repository"}),". It is recommended to use PostgreSQL JDBC Driver version 42.5.x or above."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Network connection between each FE and BE node of Doris and the PostgreSQL server, with the default port being 5432."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"connecting-to-postgresql",children:"Connecting to PostgreSQL"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"CREATE CATALOG postgresql_catalog PROPERTIES (\n    'type' = 'jdbc',\n    'user' = 'username',\n    'password' = 'pwd',\n    'jdbc_url' = 'jdbc:postgresql://host:5432/postgres',\n    'driver_url' = 'postgresql-42.5.6.jar',\n    'driver_class' = 'org.postgresql.Driver'\n);\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"jdbc_url"})," defines the connection information and parameters to be passed to the PostgreSQL JDBC driver. Supported URL parameters can be found in the ",(0,r.jsx)(n.a,{href:"https://jdbc.postgresql.org/documentation/use/#connecting-to-the-database",children:"PostgreSQL JDBC Driver Documentation"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"connection-security",children:"Connection Security"}),"\n",(0,r.jsx)(n.p,{children:"If you have configured TLS with a globally trusted certificate installed on the data source, you can enable TLS between the cluster and the data source by appending parameters to the JDBC connection string set in the jdbc_url property."}),"\n",(0,r.jsx)(n.p,{children:"For example, for version 42 of the PostgreSQL JDBC driver, enable TLS by adding the ssl=true parameter to the jdbc_url configuration property:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:'"jdbc_url"="jdbc:postgresql://example.net:5432/database?ssl=true"\n'})}),"\n",(0,r.jsxs)(n.p,{children:["For more information on TLS configuration options, please refer to the ",(0,r.jsx)(n.a,{href:"https://jdbc.postgresql.org/documentation/use/#connecting-to-the-database",children:"PostgreSQL JDBC Driver Documentation"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"hierarchical-mapping",children:"Hierarchical Mapping"}),"\n",(0,r.jsxs)(n.p,{children:["When mapping PostgreSQL, a Database in Doris corresponds to a Schema under a specified database in PostgreSQL (as in the example ",(0,r.jsx)(n.code,{children:"jdbc_url"})," parameter under ",(0,r.jsx)(n.code,{children:"postgres"}),"). A Table under a Database in Doris corresponds to Tables under that Schema in PostgreSQL. The mapping relationship is as follows:"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Doris"}),(0,r.jsx)(n.th,{children:"PostgreSQL"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Catalog"}),(0,r.jsx)(n.td,{children:"Database"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Database"}),(0,r.jsx)(n.td,{children:"Schema"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Table"}),(0,r.jsx)(n.td,{children:"Table"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"column-type-mapping",children:"Column Type Mapping"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"PostgreSQL Type"}),(0,r.jsx)(n.th,{children:"Doris Type"}),(0,r.jsx)(n.th,{})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"boolean"}),(0,r.jsx)(n.td,{children:"boolean"}),(0,r.jsx)(n.td,{})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"smallint/int2"}),(0,r.jsx)(n.td,{children:"smallint"}),(0,r.jsx)(n.td,{})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"integer/int4"}),(0,r.jsx)(n.td,{children:"int"}),(0,r.jsx)(n.td,{})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"bigint/int8"}),(0,r.jsx)(n.td,{children:"bigint"}),(0,r.jsx)(n.td,{})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"decimal/numeric"}),(0,r.jsx)(n.td,{children:"decimal(P, S) / string"}),(0,r.jsx)(n.td,{children:"Numeric without precision will be mapped to string type, and needs to be converted to decimal type for numerical calculations, and does not support write-back."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"real/float4"}),(0,r.jsx)(n.td,{children:"float"}),(0,r.jsx)(n.td,{})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"double"}),(0,r.jsx)(n.td,{children:"double"}),(0,r.jsx)(n.td,{})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"smallserial"}),(0,r.jsx)(n.td,{children:"smallint"}),(0,r.jsx)(n.td,{})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"serial"}),(0,r.jsx)(n.td,{children:"int"}),(0,r.jsx)(n.td,{})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"bigserial"}),(0,r.jsx)(n.td,{children:"bigint"}),(0,r.jsx)(n.td,{})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"char(N)"}),(0,r.jsx)(n.td,{children:"char(N)"}),(0,r.jsx)(n.td,{})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"varchar/text"}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"timestamp(S)/timestampz(S)"}),(0,r.jsx)(n.td,{children:"datetime(S)"}),(0,r.jsx)(n.td,{})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"date"}),(0,r.jsx)(n.td,{children:"date"}),(0,r.jsx)(n.td,{})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"json/jsonb"}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"For better reading and computing performance balance, Doris maps JSON type to STRING type."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"time"}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Doris does not support time type, time type will be mapped to string."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"interval"}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"point/line/lseg/box/path/polygon/circle"}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"cidr/inet/macaddr"}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"uuid"}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"bit"}),(0,r.jsx)(n.td,{children:"boolean / string"}),(0,r.jsx)(n.td,{children:"Doris does not support bit type, bit type will be mapped to boolean when bit(1), otherwise mapped to string."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"other"}),(0,r.jsx)(n.td,{children:"UNSUPPORTED"}),(0,r.jsx)(n.td,{})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"appendix",children:"Appendix"}),"\n",(0,r.jsx)(n.h3,{id:"time-zone-issues",children:"Time Zone Issues"}),"\n",(0,r.jsx)(n.p,{children:"Since Doris does not support timestamp types with time zones, when reading the timestampz type from PostgreSQL, Doris will map it to DATETIME type and convert it to local time zone time when reading."}),"\n",(0,r.jsx)(n.p,{children:"And because when reading data from JDBC type Catalog, the Java part of BE uses the JVM time zone. The JVM time zone defaults to the time zone of the BE deployment machine, which affects the time zone conversion when JDBC reads data."}),"\n",(0,r.jsxs)(n.p,{children:["To ensure time zone consistency, it is recommended to set the JVM time zone in ",(0,r.jsx)(n.code,{children:"JAVA_OPTS"})," of ",(0,r.jsx)(n.code,{children:"be.conf"})," to be consistent with the ",(0,r.jsx)(n.code,{children:"time_zone"})," of Doris session."]})]})}function h(e={}){let{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},250065:function(e,n,t){t.d(n,{Z:function(){return o},a:function(){return d}});var s=t(667294);let r={},i=s.createContext(r);function d(e){let n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);