"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["914196"],{435562:function(e,n,r){r.r(n),r.d(n,{default:()=>d,frontMatter:()=>i,metadata:()=>a,assets:()=>u,toc:()=>c,contentTitle:()=>l});var a=JSON.parse('{"id":"sql-manual/sql-functions/scalar-functions/array-functions/array-enumerate-uniq","title":"ARRAY_ENUMERATE_UNIQ","description":"arrayenumerateuniq","source":"@site/docs/sql-manual/sql-functions/scalar-functions/array-functions/array-enumerate-uniq.md","sourceDirName":"sql-manual/sql-functions/scalar-functions/array-functions","slug":"/sql-manual/sql-functions/scalar-functions/array-functions/array-enumerate-uniq","permalink":"/docs/dev/sql-manual/sql-functions/scalar-functions/array-functions/array-enumerate-uniq","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"ARRAY_ENUMERATE_UNIQ","language":"en"},"sidebar":"docs","previous":{"title":"ARRAY_ENUMERATE","permalink":"/docs/dev/sql-manual/sql-functions/scalar-functions/array-functions/array-enumerate"},"next":{"title":"ARRAY_EXCEPT","permalink":"/docs/dev/sql-manual/sql-functions/scalar-functions/array-functions/array-except"}}'),s=r("785893"),t=r("250065");let i={title:"ARRAY_ENUMERATE_UNIQ",language:"en"},l=void 0,u={},c=[{value:"array_enumerate_uniq",id:"array_enumerate_uniq",level:2},{value:"Description",id:"description",level:2},{value:"Syntax",id:"syntax",level:2},{value:"Parameters",id:"parameters",level:3},{value:"Return Value",id:"return-value",level:3},{value:"Keywords",id:"keywords",level:3}];function o(e){let n={bigint:"bigint",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",t:"t",ul:"ul",version:"version",...(0,t.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"array_enumerate_uniq",children:"array_enumerate_uniq"}),"\n",(0,s.jsx)(n.version,{since:"2.0.0",children:"\n"}),"\n",(0,s.jsx)(n.h2,{id:"description",children:"Description"}),"\n",(0,s.jsx)(n.p,{children:"Returns the unique occurrence count number for each element in the array. The function generates a number for each element in the array, indicating how many times that element has appeared in the array."}),"\n",(0,s.jsx)(n.h2,{id:"syntax",children:"Syntax"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"array_enumerate_uniq(ARRAY<T> arr1, [ARRAY<T> arr2, ...])\n"})}),"\n",(0,s.jsx)(n.h3,{id:"parameters",children:"Parameters"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"arr1, arr2, ..."}),"\uFF1AARRAY",(0,s.jsx)(n.t,{children:" type, arrays for which to generate unique numbers. Supports one or more array parameters."})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Supported types for T:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Numeric types: TINYINT, SMALLINT, INT, BIGINT, LARGEINT, FLOAT, DOUBLE, DECIMAL"}),"\n",(0,s.jsx)(n.li,{children:"String types: CHAR, VARCHAR, STRING"}),"\n",(0,s.jsx)(n.li,{children:"Date and time types: DATE, DATETIME, DATEV2, DATETIMEV2"}),"\n",(0,s.jsx)(n.li,{children:"Boolean type: BOOLEAN"}),"\n",(0,s.jsx)(n.li,{children:"IP types: IPV4, IPV6"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"return-value",children:"Return Value"}),"\n",(0,s.jsxs)(n.p,{children:["Return type: ARRAY",(0,s.jsx)(n.bigint,{})]}),"\n",(0,s.jsx)(n.p,{children:"Return value meaning:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Returns a new array with the same length as the input array, where each position contains the unique occurrence count number for the corresponding element in the array"}),"\n",(0,s.jsx)(n.li,{children:"NULL: if the input array is NULL"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Usage notes:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"The function generates unique numbers for each element in the array, starting from 1 and incrementing"}),"\n",(0,s.jsx)(n.li,{children:"For elements that appear multiple times, each occurrence gets an incremented number"}),"\n",(0,s.jsx)(n.li,{children:"When there are multiple array parameters, all arrays must have the same length, otherwise an error will occur. The corresponding positions of multiple arrays are combined to form element pairs, which are used to generate numbers"}),"\n",(0,s.jsx)(n.li,{children:"Empty arrays return empty arrays, NULL arrays return NULL"}),"\n",(0,s.jsx)(n.li,{children:"For null values in array elements: null elements also generate corresponding numbers"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Query Examples:"})}),"\n",(0,s.jsx)(n.p,{children:"Generate unique numbers for an array. For elements that appear multiple times, each occurrence gets an incremented number:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"SELECT array_enumerate_uniq([1, 2, 1, 3, 2, 1]);\n+------------------------------------------+\n| array_enumerate_uniq([1, 2, 1, 3, 2, 1]) |\n+------------------------------------------+\n| [1, 1, 2, 1, 2, 3]                       |\n+------------------------------------------+\n"})}),"\n",(0,s.jsx)(n.p,{children:"Empty array returns empty array:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"SELECT array_enumerate_uniq([]);\n+----------------------+\n| array_enumerate_uniq([]) |\n+----------------------+\n| []                   |\n+----------------------+\n"})}),"\n",(0,s.jsx)(n.p,{children:"NULL array returns NULL:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"SELECT array_enumerate_uniq(NULL), array_enumerate_uniq(NULL, NULL);\n+----------------------------+----------------------------------+\n| array_enumerate_uniq(NULL) | array_enumerate_uniq(NULL, NULL) |\n+----------------------------+----------------------------------+\n| NULL                       | NULL                             |\n+----------------------------+----------------------------------+\n"})}),"\n",(0,s.jsx)(n.p,{children:"Array containing null values, null elements also generate numbers:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"SELECT array_enumerate_uniq([1, null, 1, null, 1]);\n+--------------------------------------------+\n| array_enumerate_uniq([1, null, 1, null, 1]) |\n+--------------------------------------------+\n| [1, 1, 2, 2, 3]                            |\n+--------------------------------------------+\n"})}),"\n",(0,s.jsx)(n.p,{children:"Multiple array parameters example, generating numbers based on combinations of multiple arrays:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"SELECT array_enumerate_uniq([1, 2, 1], [10, 20, 10]);\n+----------------------------------------------+\n| array_enumerate_uniq([1, 2, 1], [10, 20, 10]) |\n+----------------------------------------------+\n| [1, 1, 2]                                    |\n+----------------------------------------------+\n"})}),"\n",(0,s.jsx)(n.p,{children:"Error when array lengths are inconsistent:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"SELECT array_enumerate_uniq([1,2,3], [4,5]);\nERROR 1105 (HY000): errCode = 2, detailMessage = lengths of all arrays of function array_enumerate_uniq must be equal.\n"})}),"\n",(0,s.jsx)(n.p,{children:"IP type support examples:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"SELECT array_enumerate_uniq(CAST(['192.168.1.1', '192.168.1.2', '192.168.1.1'] AS ARRAY<IPV4>));\n+------------------------------------------------------------------------------------------+\n| array_enumerate_uniq(CAST(['192.168.1.1', '192.168.1.2', '192.168.1.1'] AS ARRAY<IPV4>)) |\n+------------------------------------------------------------------------------------------+\n| [1, 1, 2]                                                                                |\n+------------------------------------------------------------------------------------------+\n\nmysql> SELECT array_enumerate_uniq(CAST(['2001:db8::1', '2001:db8::2', '2001:db8::1'] AS ARRAY<IPV6>));\n+------------------------------------------------------------------------------------------+\n| array_enumerate_uniq(CAST(['2001:db8::1', '2001:db8::2', '2001:db8::1'] AS ARRAY<IPV6>)) |\n+------------------------------------------------------------------------------------------+\n| [1, 1, 2]                                                                                |\n+------------------------------------------------------------------------------------------+\n"})}),"\n",(0,s.jsx)(n.p,{children:"Complex type examples:"}),"\n",(0,s.jsx)(n.p,{children:"Nested array types are not supported, will error:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"SELECT array_enumerate_uniq([[1,2],[3,4],[5,6]]);\nERROR 1105 (HY000): errCode = 2, detailMessage = array_enumerate_uniq does not support type ARRAY<ARRAY<TINYINT>>, expression is array_enumerate_uniq([[1, 2], [3, 4], [5, 6]])\n"})}),"\n",(0,s.jsx)(n.p,{children:"Map types are not supported, will error:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"SELECT array_enumerate_uniq([{'k':1},{'k':2},{'k':3}]);\nERROR 1105 (HY000): errCode = 2, detailMessage = array_enumerate_uniq does not support type ARRAY<MAP<VARCHAR(1),TINYINT>>, expression is array_enumerate_uniq([map('k', 1), map('k', 2), map('k', 3)])\n"})}),"\n",(0,s.jsx)(n.p,{children:"Error when parameter count is wrong:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"SELECT array_enumerate_uniq();\nERROR 1105 (HY000): errCode = 2, detailMessage = Can not found function 'array_enumerate_uniq' which has 0 arity. Candidate functions are: [array_enumerate_uniq(Expression, Expression...)]\n"})}),"\n",(0,s.jsx)(n.p,{children:"Error when passing non-array type:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"SELECT array_enumerate_uniq('not_an_array');\nERROR 1105 (HY000): errCode = 2, detailMessage = Can not find the compatibility function signature: array_enumerate_uniq(VARCHAR(12))\n"})}),"\n",(0,s.jsx)(n.h3,{id:"keywords",children:"Keywords"}),"\n",(0,s.jsx)(n.p,{children:"ARRAY, ENUMERATE, UNIQ, ARRAY_ENUMERATE_UNIQ"})]})}function d(e={}){let{wrapper:n}={...(0,t.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},250065:function(e,n,r){r.d(n,{Z:function(){return l},a:function(){return i}});var a=r(667294);let s={},t=a.createContext(s);function i(e){let n=a.useContext(t);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),a.createElement(t.Provider,{value:n},e.children)}}}]);