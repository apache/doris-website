"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["290825"],{239387:function(e,n,a){a.r(n),a.d(n,{default:()=>d,frontMatter:()=>c,metadata:()=>s,assets:()=>t,toc:()=>o,contentTitle:()=>i});var s=JSON.parse('{"id":"sql-manual/sql-functions/scalar-functions/json-functions/json-search","title":"JSON_SEARCH","description":"The JSONSEARCH function is used to search for specified values in a JSON document. If the value is found, it returns the path to the value.","source":"@site/versioned_docs/version-4.x/sql-manual/sql-functions/scalar-functions/json-functions/json-search.md","sourceDirName":"sql-manual/sql-functions/scalar-functions/json-functions","slug":"/sql-manual/sql-functions/scalar-functions/json-functions/json-search","permalink":"/docs/4.x/sql-manual/sql-functions/scalar-functions/json-functions/json-search","draft":false,"unlisted":false,"tags":[],"version":"4.x","lastUpdatedAt":1770477659000,"frontMatter":{"title":"JSON_SEARCH","language":"en","description":"The JSONSEARCH function is used to search for specified values in a JSON document. If the value is found, it returns the path to the value."},"sidebar":"docs","previous":{"title":"JSON_REMOVE","permalink":"/docs/4.x/sql-manual/sql-functions/scalar-functions/json-functions/json-remove"},"next":{"title":"JSON_SET","permalink":"/docs/4.x/sql-manual/sql-functions/scalar-functions/json-functions/json-set"}}'),l=a("785893"),r=a("250065");let c={title:"JSON_SEARCH",language:"en",description:"The JSONSEARCH function is used to search for specified values in a JSON document. If the value is found, it returns the path to the value."},i=void 0,t={},o=[{value:"Description",id:"description",level:2},{value:"Syntax",id:"syntax",level:2},{value:"Parameters",id:"parameters",level:2},{value:"Return Value",id:"return-value",level:2},{value:"Notes",id:"notes",level:2},{value:"Examples",id:"examples",level:2}];function h(e){let n={blockquote:"blockquote",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.a)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h2,{id:"description",children:"Description"}),"\n",(0,l.jsxs)(n.p,{children:["The ",(0,l.jsx)(n.code,{children:"JSON_SEARCH"})," function is used to search for specified values in a JSON document. If the value is found, it returns the path to the value. If the value is not found, it returns NULL. This function can recursively search within JSON data structures."]}),"\n",(0,l.jsx)(n.h2,{id:"syntax",children:"Syntax"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"JSON_SEARCH( <json_object>, <one_or_all>, <search_value> )\n"})}),"\n",(0,l.jsx)(n.h2,{id:"parameters",children:"Parameters"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"<json_object>"}),": JSON type, the JSON document to be searched."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"<one_or_all>"}),": String type, specifies whether to find all matching values. Can be 'one' or 'all'."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"<search_value>"}),": String type, the value to search for, the search target.\nSupports '%' (matches any number of any characters) and '_' (matches any single character) as wildcards."]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"return-value",children:"Return Value"}),"\n",(0,l.jsxs)(n.p,{children:["Nullable(JSON): Depending on the ",(0,l.jsx)(n.code,{children:"<one_or_all>"})," parameter, there are two cases:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"1. 'one': If a matching value is found, returns a JSON path pointing to the matching value. If no matching value is found, returns NULL.\n2. 'all': Returns paths to all matching values. If there are multiple values, returns them as a JSON array. If no matches are found, returns NULL.\n"})}),"\n",(0,l.jsx)(n.h2,{id:"notes",children:"Notes"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["The ",(0,l.jsx)(n.code,{children:"one_or_all"})," parameter determines whether to find all matching values. 'one' returns the first matching path, 'all' returns all matching paths. If it's any other value, an error will be reported."]}),"\n",(0,l.jsx)(n.li,{children:"If no matching value is found, the function returns NULL."}),"\n",(0,l.jsxs)(n.li,{children:["If any of ",(0,l.jsx)(n.code,{children:"<json_object>"}),", ",(0,l.jsx)(n.code,{children:"<one_or_all>"}),", ",(0,l.jsx)(n.code,{children:"<search_value>"})," is NULL, returns NULL."]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Search for a single value (one)"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"SELECT JSON_SEARCH('{\"name\": \"John\", \"age\": 30}', 'one', 'John');\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:'+-----------------------------------------------------------+\n| JSON_SEARCH(\'{"name": "John", "age": 30}\', \'one\', \'John\') |\n+-----------------------------------------------------------+\n| "$.name"                                                  |\n+-----------------------------------------------------------+\n\n'})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Search for a single value (one), returns only one path even if there are multiple matches"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:'SELECT JSON_SEARCH(\'{"name": "John", "age": 30, "alias": "John"}\', \'one\', \'John\');\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:'+----------------------------------------------------------------------------+\n| JSON_SEARCH(\'{"name": "John", "age": 30, "alias": "John"}\', \'one\', \'John\') |\n+----------------------------------------------------------------------------+\n| "$.name"                                                                   |\n+----------------------------------------------------------------------------+\n'})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Search for all matching values (all)"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:'SELECT JSON_SEARCH(\'{"name": "John", "age": 30, "alias": "John"}\', \'all\', \'John\');\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:'+----------------------------------------------------------------------------+\n| JSON_SEARCH(\'{"name": "John", "age": 30, "alias": "John"}\', \'all\', \'John\') |\n+----------------------------------------------------------------------------+\n| ["$.alias","$.name"]                                                       |\n+----------------------------------------------------------------------------+\n'})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"'%' as a wildcard"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:'SELECT JSON_SEARCH(\'{"name": "John", "age": 30, "alias": "John"}\', \'all\', \'%\');\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:'+-------------------------------------------------------------------------+\n| JSON_SEARCH(\'{"name": "John", "age": 30, "alias": "John"}\', \'all\', \'%\') |\n+-------------------------------------------------------------------------+\n| ["$.alias","$.name"]                                                    |\n+-------------------------------------------------------------------------+\n'})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"'_' as a wildcard"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:'SELECT JSON_SEARCH(\'{"name": "John", "age": 30, "alias": "Jihn"}\', \'all\', \'J_hn\');\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:'+----------------------------------------------------------------------------+\n| JSON_SEARCH(\'{"name": "John", "age": 30, "alias": "Jihn"}\', \'all\', \'J_hn\') |\n+----------------------------------------------------------------------------+\n| ["$.alias","$.name"]                                                       |\n+----------------------------------------------------------------------------+\n'})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Wildcard escape"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:'SELECT JSON_SEARCH(\'{"name": "John", "age": 30, "alias": "J_hn"}\', \'all\', \'J\\_hn\');\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:'+-----------------------------------------------------------------------------+\n| JSON_SEARCH(\'{"name": "John", "age": 30, "alias": "J_hn"}\', \'all\', \'J\\_hn\') |\n+-----------------------------------------------------------------------------+\n| "$.alias"                                                                   |\n+-----------------------------------------------------------------------------+\n'})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:'\'J_hn\' only matches "J_hn" and does not match "John".'}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"No matching value found"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"SELECT JSON_SEARCH('{\"name\": \"John\", \"age\": 30}', 'one', 'Alice');\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:"+------------------------------------------------------------+\n| JSON_SEARCH('{\"name\": \"John\", \"age\": 30}', 'one', 'Alice') |\n+------------------------------------------------------------+\n| NULL                                                       |\n+------------------------------------------------------------+\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"NULL parameters"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:'SELECT JSON_SEARCH(\'{"name": "John", "age": 30}\', NULL, \'Alice\');\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:'+-----------------------------------------------------------+\n| JSON_SEARCH(\'{"name": "John", "age": 30}\', NULL, \'Alice\') |\n+-----------------------------------------------------------+\n| NULL                                                      |\n+-----------------------------------------------------------+\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:'SELECT JSON_SEARCH(\'{"name": "John", "age": 30}\', \'one\', NULL);\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:'+---------------------------------------------------------+\n| JSON_SEARCH(\'{"name": "John", "age": 30}\', \'one\', NULL) |\n+---------------------------------------------------------+\n| NULL                                                    |\n+---------------------------------------------------------+\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"SELECT JSON_SEARCH(NULL, 'one', 'Alice');\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"+-----------------------------------+\n| JSON_SEARCH(NULL, 'one', 'Alice') |\n+-----------------------------------+\n| NULL                              |\n+-----------------------------------+\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["Invalid ",(0,l.jsx)(n.code,{children:"<one_or_all>"})," parameter"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"SELECT JSON_SEARCH('{\"name\": \"John\", \"age\": 30}', 'three', 'Alice');\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:"ERROR 1105 (HY000): errCode = 2, detailMessage = [INVALID_ARGUMENT]the one_or_all argument three is not 'one' not 'all'\n"})}),"\n"]}),"\n"]})]})}function d(e={}){let{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(h,{...e})}):h(e)}},250065:function(e,n,a){a.d(n,{Z:function(){return i},a:function(){return c}});var s=a(667294);let l={},r=s.createContext(l);function c(e){let n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:c(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);