"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["32428"],{718776:function(e,n,t){t.r(n),t.d(n,{default:()=>u,frontMatter:()=>a,metadata:()=>s,assets:()=>o,toc:()=>l,contentTitle:()=>c});var s=JSON.parse('{"id":"sql-manual/sql-functions/ai-functions/distance-functions/embed","title":"EMBED","description":"\x3c!--","source":"@site/docs/sql-manual/sql-functions/ai-functions/distance-functions/embed.md","sourceDirName":"sql-manual/sql-functions/ai-functions/distance-functions","slug":"/sql-manual/sql-functions/ai-functions/distance-functions/embed","permalink":"/docs/dev/sql-manual/sql-functions/ai-functions/distance-functions/embed","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"EMBED","language":"en"},"sidebar":"docs","previous":{"title":"L2_DISTANCE","permalink":"/docs/dev/sql-manual/sql-functions/ai-functions/distance-functions/l2-distance"},"next":{"title":"AI_CLASSIFY","permalink":"/docs/dev/sql-manual/sql-functions/ai-functions/ai-classify"}}'),i=t("785893"),r=t("250065");let a={title:"EMBED",language:"en"},c=void 0,o={},l=[{value:"Description",id:"description",level:2},{value:"Syntax",id:"syntax",level:2},{value:"Parameters",id:"parameters",level:2},{value:"Return Value",id:"return-value",level:2},{value:"Example",id:"example",level:2}];function d(e){let n={code:"code",float:"float",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"description",children:"Description"}),"\n",(0,i.jsx)(n.p,{children:"Generates a semantic embedding vector based on the input text, representing the semantic information of the text. It can be used for similarity calculation, retrieval, and other scenarios."}),"\n",(0,i.jsx)(n.h2,{id:"syntax",children:"Syntax"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"EMBED([<resource_name>], <text>)\n"})}),"\n",(0,i.jsx)(n.h2,{id:"parameters",children:"Parameters"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Parameter"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"<resource_name>"})}),(0,i.jsx)(n.td,{children:"The specified resource name"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"<text>"})}),(0,i.jsx)(n.td,{children:"The text to generate the embedding vector for"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"return-value",children:"Return Value"}),"\n",(0,i.jsxs)(n.p,{children:["The return type is ARRAY",(0,i.jsx)(n.float,{children:", representing the generated vector."})]}),"\n",(0,i.jsx)(n.p,{children:"Returns NULL if the input value is NULL."}),"\n",(0,i.jsx)(n.p,{children:"The result is generated by a large language model, so the returned content is not fixed."}),"\n",(0,i.jsx)(n.h2,{id:"example",children:"Example"}),"\n",(0,i.jsx)(n.p,{children:"The following table simulates a company's code of conduct."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:'CREATE TABLE knowledge_base (\n    id BIGINT,\n    title STRING,\n    content STRING,\n    embedding ARRAY<FLOAT> COMMENT \'Generated embedding vectors by the EMBED function\'\n)\nDUPLICATE KEY(id)\nDISTRIBUTED BY HASH(id) BUCKETS 4\nPROPERTIES (\n    "replication_num" = "1"\n);\n\nSET default_ai_resource = \'embed_resource_name\';\n\n-- `embedding` is the embedding vector generated by the function EMBED according to the corresponding tag of the content.\nINSERT INTO knowledge_base (id, title, content, embedding) VALUES\n(1, "Travel Reimbursement Policy",\n    "Employees must submit a reimbursement request within 7 days after the business trip, with invoices and travel approval attached.",\n    EMBED("travel reimbursement policy")),\n(2, "Leave Policy",\n    "Employees must apply for leave in the system in advance. If the leave is longer than three days, approval from the direct manager is required.",\n    EMBED("leave request policy")),\n(3, "VPN User Guide",\n    "To access the internal network, employees must use VPN. For the first login, download and install the client and configure the certificate.",\n    EMBED("VPN guide intranet access")),\n(4, "Meeting Room Reservation",\n    "Meeting rooms can be reserved in advance through the OA system, with time and number of participants specified.",\n    EMBED("meeting room booking reservation")),\n(5, "Procurement Request Process",\n    "Departments must fill out a procurement request form for purchasing items. If the amount exceeds $5000, financial approval is required.",\n    EMBED("procurement request process finance"));\n'})}),"\n",(0,i.jsx)(n.p,{children:"By vectorizing the text, you can perform operations such as:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Question answering retrieval (with ",(0,i.jsx)(n.code,{children:"COSINE_DISTANCE"}),")"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:'SELECT \n    id, title, content,\n    COSINE_DISTANCE(embedding, EMBED("How to apply for travel reimbursement?")) AS score\nFROM knowledge_base\nORDER BY score ASC\nLIMIT 2;\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-text",children:"+------+-----------------------------+-----------------------------------------------------------------------------------------------------------------------------------------+--------------------+\n| id   | title                       | content                                                                                                                                 | score              |\n+------+-----------------------------+-----------------------------------------------------------------------------------------------------------------------------------------+--------------------+\n|    1 | Travel Reimbursement Policy | Employees must submit a reimbursement request within 7 days after the business trip, with invoices and travel approval attached.        | 0.4463210454563673 |\n|    5 | Procurement Request Process | Departments must fill out a procurement request form for purchasing items. If the amount exceeds $5000, financial approval is required. | 0.5726841578491431 |\n+------+-----------------------------+-----------------------------------------------------------------------------------------------------------------------------------------+--------------------+\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsxs)(n.li,{children:["Problem analysis matching (with ",(0,i.jsx)(n.code,{children:"L2_DISTANCE"}),")"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:'SELECT \n    id, title, content,\n    L2_DISTANCE(embedding, EMBED("How to access the company intranet")) AS distance\nFROM knowledge_base\nORDER BY distance ASC\nLIMIT 2;\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-text",children:"+------+-----------------------------+---------------------------------------------------------------------------------------------------------------------------------------------+--------------------+\n| id   | title                       | content                                                                                                                                     | distance           |\n+------+-----------------------------+---------------------------------------------------------------------------------------------------------------------------------------------+--------------------+\n|    3 | VPN User Guide              | To access the internal network, employees must use VPN. For the first login, download and install the client and configure the certificate. | 0.5838271122253775 |\n|    1 | Travel Reimbursement Policy | Employees must submit a reimbursement request within 7 days after the business trip, with invoices and travel approval attached.            |  1.272394695975331 |\n+------+-----------------------------+---------------------------------------------------------------------------------------------------------------------------------------------+--------------------+\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsxs)(n.li,{children:["Text relevance matching and recommendation based on article content (with ",(0,i.jsx)(n.code,{children:"INNER PRODUCT"}),")"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:'SELECT \n    id, title, content,\n    INNER_PRODUCT(embedding, EMBED("Leave system request leader approval")) AS score\nFROM knowledge_base\nWHERE id != 2\nORDER BY score DESC\nLIMIT 2;\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-text",children:"+------+-----------------------------+-----------------------------------------------------------------------------------------------------------------------------------------+---------------------+\n| id   | title                       | content                                                                                                                                 | score               |\n+------+-----------------------------+-----------------------------------------------------------------------------------------------------------------------------------------+---------------------+\n|    5 | Procurement Request Process | Departments must fill out a procurement request form for purchasing items. If the amount exceeds $5000, financial approval is required. |    0.33268885332504 |\n|    4 | Meeting Room Reservation    | Meeting rooms can be reserved in advance through the OA system, with time and number of participants specified.                         | 0.29224032230852487 |\n+------+-----------------------------+-----------------------------------------------------------------------------------------------------------------------------------------+---------------------+\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"4",children:["\n",(0,i.jsxs)(n.li,{children:["Find content with minimal differences(with ",(0,i.jsx)(n.code,{children:"L1_DISTANCE"}),")"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:'SELECT \n    id, title, content,\n    L1_DISTANCE(embedding, EMBED("Procurement application process")) AS distance\nFROM knowledge_base\nORDER BY distance ASC\nLIMIT 3;\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-text",children:"+------+-----------------------------+------------------------------------------------------------------------------------------------------------------------------------------------+--------------------+\n| id   | title                       | content                                                                                                                                        | distance           |\n+------+-----------------------------+------------------------------------------------------------------------------------------------------------------------------------------------+--------------------+\n|    5 | Procurement Request Process | Departments must fill out a procurement request form for purchasing items. If the amount exceeds $5000, financial approval is required.        |  18.66882028897362 |\n|    4 | Meeting Room Reservation    | Meeting rooms can be reserved in advance through the OA system, with time and number of participants specified.                                |  30.90449328294426 |\n|    2 | Leave Policy                | Employees must apply for leave in the system in advance. If the leave is longer than three days, approval from the direct manager is required. | 31.060405636536416 |\n+------+-----------------------------+------------------------------------------------------------------------------------------------------------------------------------------------+--------------------+\n"})})]})}function u(e={}){let{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},250065:function(e,n,t){t.d(n,{Z:function(){return c},a:function(){return a}});var s=t(667294);let i={},r=s.createContext(i);function a(e){let n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);