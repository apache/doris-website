"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["185813"],{231053:function(e,n,r){r.r(n),r.d(n,{default:()=>d,frontMatter:()=>i,metadata:()=>t,assets:()=>c,toc:()=>o,contentTitle:()=>l});var t=JSON.parse('{"id":"sql-manual/sql-functions/scalar-functions/string-functions/regexp-replace-one","title":"REGEXP_REPLACE_ONE","description":"The REGEXPREPLACEONE function is a powerful tool designed to perform regular expression matching on a given string.","source":"@site/versioned_docs/version-3.x/sql-manual/sql-functions/scalar-functions/string-functions/regexp-replace-one.md","sourceDirName":"sql-manual/sql-functions/scalar-functions/string-functions","slug":"/sql-manual/sql-functions/scalar-functions/string-functions/regexp-replace-one","permalink":"/docs/3.x/sql-manual/sql-functions/scalar-functions/string-functions/regexp-replace-one","draft":false,"unlisted":false,"tags":[],"version":"3.x","lastUpdatedAt":1770477659000,"frontMatter":{"title":"REGEXP_REPLACE_ONE","language":"en","description":"The REGEXPREPLACEONE function is a powerful tool designed to perform regular expression matching on a given string."},"sidebar":"docs","previous":{"title":"REGEXP_REPLACE","permalink":"/docs/3.x/sql-manual/sql-functions/scalar-functions/string-functions/regexp-replace"},"next":{"title":"REPEAT","permalink":"/docs/3.x/sql-manual/sql-functions/scalar-functions/string-functions/repeat"}}'),s=r("785893"),a=r("250065");let i={title:"REGEXP_REPLACE_ONE",language:"en",description:"The REGEXPREPLACEONE function is a powerful tool designed to perform regular expression matching on a given string."},l=void 0,c={},o=[{value:"Description",id:"description",level:2},{value:"Syntax",id:"syntax",level:2},{value:"Parameters",id:"parameters",level:2},{value:"Return Value",id:"return-value",level:2},{value:"Example",id:"example",level:2}];function h(e){let n={a:"a",b:"b",code:"code",h2:"h2",p:"p",pattern:"pattern",pre:"pre",repl:"repl",str:"str",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,a.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"description",children:"Description"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"REGEXP_REPLACE_ONE"})," function is a powerful tool designed to perform regular expression matching on a given string. It allows you to find and replace the first occurrence of a specific pattern within the string."]}),"\n",(0,s.jsxs)(n.p,{children:["When working with text data, you often need to manipulate strings based on certain rules. Regular expressions provide a flexible and efficient way to define these rules. This function takes a string (",(0,s.jsx)(n.code,{children:"str"}),"), a regular expression pattern (",(0,s.jsx)(n.code,{children:"pattern"}),"), and a replacement string (",(0,s.jsx)(n.code,{children:"repl"}),"). It then searches for the first part of the ",(0,s.jsx)(n.code,{children:"str"})," that matches the ",(0,s.jsx)(n.code,{children:"pattern"})," and substitutes it with the ",(0,s.jsx)(n.code,{children:"repl"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"It should be noted that when handling character set matching, Utf-8 standard character classes should be used. This ensures that functions can correctly identify and process various characters from different languages."}),"\n",(0,s.jsxs)(n.p,{children:["If the ",(0,s.jsx)(n.code,{children:"pattern"})," is not allowed regexp regular,throw error;"]}),"\n",(0,s.jsxs)(n.p,{children:["Support character match classes : ",(0,s.jsx)(n.a,{href:"https://github.com/google/re2/wiki/Syntax",children:"https://github.com/google/re2/wiki/Syntax"})]}),"\n",(0,s.jsx)(n.h2,{id:"syntax",children:"Syntax"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"REGEXP_REPLACE_ONE(<str>, <pattern>, <repl>)\n"})}),"\n",(0,s.jsx)(n.h2,{id:"parameters",children:"Parameters"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Parameter"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"<str>"})}),(0,s.jsx)(n.td,{children:"This parameter is of type string. It represents the string on which the regular expression matching will be performed. This is the target string that you want to modify."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"<pattern>"})}),(0,s.jsxs)(n.td,{children:["This parameter is also of type string. It is a regular expression pattern. The function will search for the first occurrence of this pattern within the ",(0,s.jsx)(n.str,{children:" string."})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"<repl>"})}),(0,s.jsxs)(n.td,{children:["This is a string parameter as well. It contains the string that will replace the first part of ",(0,s.jsxs)(n.str,{children:[" that matches the ",(0,s.jsx)(n.pattern,{children:"."})]})]})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"return-value",children:"Return Value"}),"\n",(0,s.jsxs)(n.p,{children:["The function returns the result string after the replacement operation. The return type is Varchar. If no part of the ",(0,s.jsxs)(n.str,{children:[" matches the ",(0,s.jsxs)(n.pattern,{children:[", the original ",(0,s.jsx)(n.str,{children:" will be returned."})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"example",children:"Example"}),"\n",(0,s.jsxs)(n.p,{children:["Replace the first space with a hyphen\nExplanation: In this example, the input string ",(0,s.jsxs)(n.str,{children:[" is 'a b c', the regular expression pattern ",(0,s.jsxs)(n.pattern,{children:[" is a single space ' ', and the replacement string ",(0,s.jsx)(n.repl,{children:" is a hyphen '-'. The function searches for the first occurrence of a space in the string 'a b c' and replaces it with a hyphen. So the output is 'a-b c'."})]})]})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"mysql> SELECT regexp_replace_one('a b c', ' ', '-');\n\n+-----------------------------------+\n| regexp_replace_one('a b c', ' ', '-') |\n+-----------------------------------+\n| a-b c                             |\n+-----------------------------------+\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Replace the first matched group.Here, the input string ",(0,s.jsxs)(n.str,{children:[" is 'a b b', the regular expression pattern ",(0,s.jsxs)(n.pattern,{children:[" is '(b)', which is a capturing group that matches the character 'b'. The replacement string ",(0,s.jsxs)(n.repl,{children:[" is '<\\1>', where \\1 refers to the first capturing group (in this case, the matched 'b'). The function finds the first occurrence of 'b' in the string 'a b b' and replaces it with '",(0,s.jsxs)(n.b,{children:["'. Thus, the output is 'a ",(0,s.jsx)(n.b,{children:" b'."})]})]})]})]})]}),(0,s.jsx)(n.b,{children:(0,s.jsxs)(n.b,{children:["\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"mysql> SELECT regexp_replace_one('a b b', '(b)', '<\\\\1>');\n+----------------------------------------+\n| regexp_replace_one('a b b', '(b)', '<\\1>') |\n+----------------------------------------+\n| a <b> b                                |\n+----------------------------------------+\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Replace the first Chinese character.The input string ",(0,s.jsxs)(n.str,{children:[" is a long string containing Chinese characters and English text. The regular expression pattern ",(0,s.jsxs)(n.pattern,{children:[" is '\\p{Han}', which is a Unicode character class that matches any Chinese character. The replacement string ",(0,s.jsx)(n.repl,{children:" is '123'. The function searches for the first Chinese character in the string and replaces it with '123'. So the output is '123\u662F\u4E00\u6BB5\u4E2D\u6587This is a passage in English 1234567'."})]})]})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"mysql> select regexp_replace_one('\u8FD9\u662F\u4E00\u6BB5\u4E2D\u6587 This is a passage in English 1234567', '\\\\p{Han}', '123');\n+------------------------------------------------------------------------------------------------+\n| regexp_replace_one('\u8FD9\u662F\u4E00\u6BB5\u4E2D\u6587 This is a passage in English 1234567', '\\p{Han}', '123')       |\n+------------------------------------------------------------------------------------------------+\n| 123\u662F\u4E00\u6BB5\u4E2D\u6587This is a passage in English 1234567                                              |\n+------------------------------------------------------------------------------------------------+\n"})}),"\n",(0,s.jsx)(n.p,{children:"Insert data into a table and perform replacementFirst, a table named test_table_for_regexp_replace_one is created with four columns: id (an integer), text_data (a string where the replacement will be performed), pattern (the regular expression pattern for matching), and repl (the replacement string).Then, ten rows of data are inserted into the table, each containing different values for the four columns.Finally, a SELECT statement is used to query the table. For each row, the REGEXP_REPLACE_ONE function is applied to the text_data column using the corresponding pattern and repl values. The result of the replacement is aliased as replaced_result. The rows are ordered by the id column."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE test_table_for_regexp_replace_one (\n        id INT,\n        text_data VARCHAR(500),\n        pattern VARCHAR(100),\n        repl VARCHAR(100)\n    ) PROPERTIES (\"replication_num\"=\"1\");\n\nINSERT INTO test_table_for_regexp_replace_one VALUES\n    (1, 'Hello World', ' ', '-'),    \n    (2, 'apple123', '[0-9]', 'X'),    \n    (3, 'aabbcc', '(aa)', 'AA'),         \n    (4, '123-456-7890', '[0-9][0-9][0-9]', 'XXX'), \n    (5, 'test,data', ',', ';'),              \n    (6, 'a1b2c3', '[a-z][0-9]', 'X'),         \n    (7, 'book keeper', 'oo', 'OO'),        \n    (8, 'ababab', '(ab)', 'AB'),       \n    (9, 'aabbcc', '(bb)', 'BB'),         \n    (10, 'apple,banana', '[aeiou]', 'X');\n\nSELECT id, regexp_replace_one(text_data, pattern, repl) as replaced_result FROM test_table_for_regexp_replace_one ORDER BY id;\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",children:"+------+-----------------+\n| id   | replaced_result |\n+------+-----------------+\n|    1 | Hello-World     |\n|    2 | appleX23        |\n|    3 | AAbbcc          |\n|    4 | XXX-456-7890    |\n|    5 | test;data       |\n|    6 | Xb2c3           |\n|    7 | BOOk keeper     |\n|    8 | ABabab          |\n|    9 | aaBBcc          |\n|   10 | Xpple,banana    |\n+------+-----------------+\n"})}),"\n",(0,s.jsx)(n.p,{children:"Emoji one replace case"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"SELECT regexp_replace_one('\uD83D\uDE00\uD83D\uDE0A\uD83D\uDE00', '\uD83D\uDE00|\uD83D\uDE0A', '[SMILE]');\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",children:"+------------------------------------------------------------+\n| regexp_replace_one('\uD83D\uDE00\uD83D\uDE0A\uD83D\uDE00', '\uD83D\uDE00|\uD83D\uDE0A', '[SMILE]')                     |\n+------------------------------------------------------------+\n| [SMILE]\uD83D\uDE0A\uD83D\uDE00                                                    |\n+------------------------------------------------------------+\n"})}),"\n",(0,s.jsx)(n.p,{children:"'str' is NULL,return NULL"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"mysql> SELECT REGEXP_REPLACE_ONE(NULL, ' ', '-');\n+------------------------------------+\n| REGEXP_REPLACE_ONE(NULL, ' ', '-') |\n+------------------------------------+\n| NULL                               |\n+------------------------------------+\n"})}),"\n",(0,s.jsx)(n.p,{children:"'pattern' is NULL,return NULL"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"mysql> SELECT REGEXP_REPLACE_ONE('Hello World', NULL, '-');\n+----------------------------------------------+\n| REGEXP_REPLACE_ONE('Hello World', NULL, '-') |\n+----------------------------------------------+\n| NULL                                         |\n+----------------------------------------------+\n"})}),"\n",(0,s.jsx)(n.p,{children:"'repl' is NULL return NULL"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"mysql> SELECT REGEXP_REPLACE_ONE('Hello World', ' ', NULL);\n+----------------------------------------------+\n| REGEXP_REPLACE_ONE('Hello World', ' ', NULL) |\n+----------------------------------------------+\n| NULL                                         |\n+----------------------------------------------+\n"})}),"\n",(0,s.jsx)(n.p,{children:"All parameters are NULL,return NULL"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"mysql> SELECT REGEXP_REPLACE_ONE(NULL, NULL, NULL);\n+--------------------------------------+\n| REGEXP_REPLACE_ONE(NULL, NULL, NULL) |\n+--------------------------------------+\n| NULL                                 |\n+--------------------------------------+\n"})}),"\n",(0,s.jsxs)(n.p,{children:["If the ",(0,s.jsx)(n.code,{children:"pattern"})," is not allowed regexp regular,throw error"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"SELECT regexp_replace_one('a b b', '(b', '<\\\\1>');\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",children:"ERROR 1105 (HY000): errCode = 2, detailMessage = (10.16.10.2)[INVALID_ARGUMENT]Could not compile regexp pattern: (b\nError: missing ): (b\n\n"})}),"\n"]})})]})}function d(e={}){let{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},250065:function(e,n,r){r.d(n,{Z:function(){return l},a:function(){return i}});var t=r(667294);let s={},a=t.createContext(s);function i(e){let n=t.useContext(a);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);