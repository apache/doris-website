"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["151513"],{765128:function(e,i,n){n.r(i),n.d(i,{default:()=>h,frontMatter:()=>r,metadata:()=>s,assets:()=>l,toc:()=>c,contentTitle:()=>o});var s=JSON.parse('{"id":"gettingStarted/what-is-apache-doris","title":"Introduction to Apache Doris","description":"Apache Doris is an MPP-based real-time data warehouse known for its high query speed. For queries on large datasets,","source":"@site/versioned_docs/version-2.1/gettingStarted/what-is-apache-doris.md","sourceDirName":"gettingStarted","slug":"/gettingStarted/what-is-apache-doris","permalink":"/docs/2.1/gettingStarted/what-is-apache-doris","draft":false,"unlisted":false,"tags":[],"version":"2.1","lastUpdatedAt":1770477659000,"frontMatter":{"title":"Introduction to Apache Doris","language":"en","description":"Apache Doris is an MPP-based real-time data warehouse known for its high query speed. For queries on large datasets,"},"sidebar":"docs","next":{"title":"Quick Start","permalink":"/docs/2.1/gettingStarted/quick-start"}}'),a=n("785893"),t=n("250065");let r={title:"Introduction to Apache Doris",language:"en",description:"Apache Doris is an MPP-based real-time data warehouse known for its high query speed. For queries on large datasets,"},o=void 0,l={},c=[{value:"What&#39;s Apache Doris",id:"whats-apache-doris",level:2},{value:"Usage Scenarios",id:"usage-scenarios",level:2},{value:"Overall Architecture",id:"overall-architecture",level:2},{value:"Storage-Compute Integrated Architecture",id:"storage-compute-integrated-architecture",level:3},{value:"Core Features of Apache Doris",id:"core-features-of-apache-doris",level:2},{value:"Technical overview",id:"technical-overview",level:2},{value:"Interface",id:"interface",level:3},{value:"Storage engine",id:"storage-engine",level:3},{value:"Query engine",id:"query-engine",level:3}];function d(e){let i={h2:"h2",h3:"h3",img:"img",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.h2,{id:"whats-apache-doris",children:"What's Apache Doris"}),"\n",(0,a.jsx)(i.p,{children:"Apache Doris is an MPP-based real-time data warehouse known for its high query speed. For queries on large datasets, it returns results in sub-seconds. It supports both high-concurrency point queries and high-throughput complex analysis. It can be used for report analysis, ad-hoc queries, unified data warehouse, and data lake query acceleration. Based on Apache Doris, users can build applications for user behavior analysis, A/B testing platform, log analysis, user profile analysis, and e-commerce order analysis."}),"\n",(0,a.jsx)(i.p,{children:"Apache Doris, formerly known as Palo, was initially created to support Baidu's ad reporting business. It was officially open-sourced in 2017 and donated by Baidu to the Apache Software Foundation in July 2018, where it was operated by members of the incubator project management committee under the guidance of Apache mentors. In June 2022, Apache Doris graduated from the Apache incubator as a Top-Level Project. By 2024, the Apache Doris community has gathered more than 600 contributors from hundreds of companies in different industries, with over 120 monthly active contributors."}),"\n",(0,a.jsx)(i.p,{children:"Apache Doris has a wide user base. It has been used in production environments of over 5000 companies worldwide, including giants such as TikTok, Baidu, Tencent, and NetEase. It is also widely used across industries from finance, retailing, and telecommunications to energy, manufacturing, medical care, etc."}),"\n",(0,a.jsx)(i.h2,{id:"usage-scenarios",children:"Usage Scenarios"}),"\n",(0,a.jsx)(i.p,{children:"As shown in the figure below, after various data integrations and processing, data sources are typically ingested into the real-time data warehouse Doris and offline lakehouses (such as Hive, Iceberg, and Hudi). These are widely used in OLAP analysis scenarios."}),"\n",(0,a.jsx)(i.p,{children:(0,a.jsx)(i.img,{alt:"Apache Doris Usage Scenarios",src:n(633088).Z+"",width:"5120",height:"3104"})}),"\n",(0,a.jsx)(i.p,{children:"Apache Doris is widely used in the following scenarios:"}),"\n",(0,a.jsxs)(i.ul,{children:["\n",(0,a.jsxs)(i.li,{children:["\n",(0,a.jsxs)(i.p,{children:[(0,a.jsx)(i.strong,{children:"Real-time Data Analysis"}),":"]}),"\n",(0,a.jsxs)(i.ul,{children:["\n",(0,a.jsxs)(i.li,{children:["\n",(0,a.jsxs)(i.p,{children:[(0,a.jsx)(i.strong,{children:"Real-time Reporting and Decision-making"}),": Doris provides real-time updated reports and dashboards for both internal and external enterprise use, supporting real-time decision-making in automated processes."]}),"\n"]}),"\n",(0,a.jsxs)(i.li,{children:["\n",(0,a.jsxs)(i.p,{children:[(0,a.jsx)(i.strong,{children:"Ad Hoc Analysis"}),": Doris offers multidimensional data analysis capabilities, enabling rapid business intelligence analysis and ad hoc queries to help users quickly uncover insights from complex data."]}),"\n"]}),"\n",(0,a.jsxs)(i.li,{children:["\n",(0,a.jsxs)(i.p,{children:[(0,a.jsx)(i.strong,{children:"User Profiling and Behavior Analysis"}),": Doris can analyze user behaviors such as participation, retention, and conversion, while also supporting scenarios like population insights and crowd selection for behavior analysis."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(i.li,{children:["\n",(0,a.jsxs)(i.p,{children:[(0,a.jsx)(i.strong,{children:"Lakehouse Analytics"}),":"]}),"\n",(0,a.jsxs)(i.ul,{children:["\n",(0,a.jsxs)(i.li,{children:["\n",(0,a.jsxs)(i.p,{children:[(0,a.jsx)(i.strong,{children:"Lakehouse Query Acceleration"}),": Doris accelerates lakehouse data queries with its efficient query engine."]}),"\n"]}),"\n",(0,a.jsxs)(i.li,{children:["\n",(0,a.jsxs)(i.p,{children:[(0,a.jsx)(i.strong,{children:"Federated Analytics"}),": Doris supports federated queries across multiple data sources, simplifying architecture and eliminating data silos."]}),"\n"]}),"\n",(0,a.jsxs)(i.li,{children:["\n",(0,a.jsxs)(i.p,{children:[(0,a.jsx)(i.strong,{children:"Real-time Data Processing"}),": Doris combines real-time data streams and batch data processing capabilities to meet the needs of high concurrency and low-latency complex business requirements."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(i.li,{children:["\n",(0,a.jsxs)(i.p,{children:[(0,a.jsx)(i.strong,{children:"SQL-based Observability"}),":"]}),"\n",(0,a.jsxs)(i.ul,{children:["\n",(0,a.jsxs)(i.li,{children:[(0,a.jsx)(i.strong,{children:"Log and Event Analysis"}),": Doris enables real-time or batch analysis of logs and events in distributed systems, helping to identify issues and optimize performance."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(i.h2,{id:"overall-architecture",children:"Overall Architecture"}),"\n",(0,a.jsx)(i.p,{children:"Apache Doris uses the MySQL protocol, is highly compatible with MySQL syntax, and supports standard SQL. Users can access Apache Doris through various client tools, and it seamlessly integrates with BI tools."}),"\n",(0,a.jsx)(i.h3,{id:"storage-compute-integrated-architecture",children:"Storage-Compute Integrated Architecture"}),"\n",(0,a.jsx)(i.p,{children:"The storage-compute integrated architecture of Apache Doris is streamlined and easy to maintain. As shown in the figure below, it consists of only two types of processes:"}),"\n",(0,a.jsxs)(i.ul,{children:["\n",(0,a.jsxs)(i.li,{children:["\n",(0,a.jsxs)(i.p,{children:[(0,a.jsx)(i.strong,{children:"Frontend (FE):"})," Primarily responsible for handling user requests, query parsing and planning, metadata management, and node management tasks."]}),"\n"]}),"\n",(0,a.jsxs)(i.li,{children:["\n",(0,a.jsxs)(i.p,{children:[(0,a.jsx)(i.strong,{children:"Backend (BE):"})," Primarily responsible for data storage and query execution. Data is partitioned into shards and stored with multiple replicas across BE nodes."]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(i.p,{children:(0,a.jsx)(i.img,{alt:"MPP architecture",src:n(248937).Z+"",width:"2560",height:"1224"})}),"\n",(0,a.jsx)(i.p,{children:"In a production environment, multiple FE nodes can be deployed for disaster recovery. Each FE node maintains a full copy of the metadata. The FE nodes are divided into three roles:"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,a.jsxs)(i.table,{children:[(0,a.jsx)(i.thead,{children:(0,a.jsxs)(i.tr,{children:[(0,a.jsx)(i.th,{children:"Role"}),(0,a.jsx)(i.th,{children:"Function"})]})}),(0,a.jsxs)(i.tbody,{children:[(0,a.jsxs)(i.tr,{children:[(0,a.jsx)(i.td,{children:"Master"}),(0,a.jsx)(i.td,{children:"The FE Master node is responsible for metadata read and write operations. When metadata changes occur in the Master, they are synchronized to Follower or Observer nodes via the BDB JE protocol."})]}),(0,a.jsxs)(i.tr,{children:[(0,a.jsx)(i.td,{children:"Follower"}),(0,a.jsx)(i.td,{children:"The Follower node is responsible for reading metadata. If the Master node fails, a Follower node can be selected as the new Master."})]}),(0,a.jsxs)(i.tr,{children:[(0,a.jsx)(i.td,{children:"Observer"}),(0,a.jsx)(i.td,{children:"The Observer node is responsible for reading metadata and is mainly used to increase query concurrency. It does not participate in cluster leadership elections."})]})]})]}),"\n",(0,a.jsx)(i.p,{children:"Both FE and BE processes are horizontally scalable, enabling a single cluster to support hundreds of machines and tens of petabytes of storage capacity. The FE and BE processes use a consistency protocol to ensure high availability of services and high reliability of data. The storage-compute integrated architecture is highly integrated, significantly reducing the operational complexity of distributed systems."}),"\n",(0,a.jsx)(i.h2,{id:"core-features-of-apache-doris",children:"Core Features of Apache Doris"}),"\n",(0,a.jsxs)(i.ul,{children:["\n",(0,a.jsxs)(i.li,{children:["\n",(0,a.jsxs)(i.p,{children:[(0,a.jsx)(i.strong,{children:"High Availability"}),": In Apache Doris, both metadata and data are stored with multiple replicas, synchronizing data logs via the quorum protocol. Data write is considered successful once a majority of replicas have completed the write, ensuring that the cluster remains available even if a few nodes fail. Apache Doris supports both same-city and cross-region disaster recovery, enabling dual-cluster master-slave modes. When some nodes experience failures, the cluster can automatically isolate the faulty nodes, preventing the overall cluster availability from being affected."]}),"\n"]}),"\n",(0,a.jsxs)(i.li,{children:["\n",(0,a.jsxs)(i.p,{children:[(0,a.jsx)(i.strong,{children:"High Compatibility"}),": Apache Doris is highly compatible with the MySQL protocol and supports standard SQL syntax, covering most MySQL and Hive functions. This high compatibility allows users to seamlessly migrate and integrate existing applications and tools. Apache Doris supports the MySQL ecosystem, enabling users to connect Doris using MySQL Client tools for more convenient operations and maintenance. It also supports MySQL protocol compatibility for BI reporting tools and data transmission tools, ensuring efficiency and stability in data analysis and data transmission processes."]}),"\n"]}),"\n",(0,a.jsxs)(i.li,{children:["\n",(0,a.jsxs)(i.p,{children:[(0,a.jsx)(i.strong,{children:"Real-Time Data Warehouse"}),": Based on Apache Doris, a real-time data warehouse service can be built. Apache Doris offers second-level data ingestion capabilities, capturing incremental changes from upstream online transactional databases into Doris within seconds. Leveraging vectorized engines, MPP architecture, and Pipeline execution engines, Doris provides sub-second data query capabilities, thereby constructing a high-performance, low-latency real-time data warehouse platform."]}),"\n"]}),"\n",(0,a.jsxs)(i.li,{children:["\n",(0,a.jsxs)(i.p,{children:[(0,a.jsx)(i.strong,{children:"Unified Lakehouse"}),": Apache Doris can build a unified lakehouse architecture based on external data sources such as data lakes or relational databases. The Doris unified lakehouse solution enables seamless integration and free data flow between data lakes and data warehouses, helping users directly utilize data warehouse capabilities to solve data analysis problems in data lakes while fully leveraging data lake data management capabilities to enhance data value."]}),"\n"]}),"\n",(0,a.jsxs)(i.li,{children:["\n",(0,a.jsxs)(i.p,{children:[(0,a.jsx)(i.strong,{children:"Flexible Modeling"}),": Apache Doris offers various modeling approaches, such as wide table models, pre-aggregation models, star/snowflake schemas, etc. During data import, data can be flattened into wide tables and written into Doris through compute engines like Flink or Spark, or data can be directly imported into Doris, performing data modeling operations through views, materialized views, or real-time multi-table joins."]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(i.h2,{id:"technical-overview",children:"Technical overview"}),"\n",(0,a.jsx)(i.p,{children:"Doris provides an efficient SQL interface and is fully compatible with the MySQL protocol. Its query engine is based on an MPP (Massively Parallel Processing) architecture, capable of efficiently executing complex analytical queries and achieving low-latency real-time queries. Through columnar storage technology for data encoding and compression, it significantly optimizes query performance and storage compression ratio."}),"\n",(0,a.jsx)(i.h3,{id:"interface",children:"Interface"}),"\n",(0,a.jsx)(i.p,{children:"Apache Doris adopts the MySQL protocol, supports standard SQL, and is highly compatible with MySQL syntax. Users can access Apache Doris through various client tools and seamlessly integrate it with BI tools, including but not limited to Smartbi, DataEase, FineBI, Tableau, Power BI, and Apache Superset. Apache Doris can work as the data source for any BI tools that support the MySQL protocol."}),"\n",(0,a.jsx)(i.h3,{id:"storage-engine",children:"Storage engine"}),"\n",(0,a.jsx)(i.p,{children:"Apache Doris has a columnar storage engine, which encodes, compresses, and reads data by column. This enables a very high data compression ratio and largely reduces unnecessary data scanning, thus making more efficient use of IO and CPU resources."}),"\n",(0,a.jsx)(i.p,{children:"Apache Doris supports various index structures to minimize data scans:"}),"\n",(0,a.jsxs)(i.ul,{children:["\n",(0,a.jsxs)(i.li,{children:["\n",(0,a.jsxs)(i.p,{children:[(0,a.jsx)(i.strong,{children:"Sorted Compound Key Index"}),": Users can specify three columns at most to form a compound sort key. This can effectively prune data to better support highly concurrent reporting scenarios."]}),"\n"]}),"\n",(0,a.jsxs)(i.li,{children:["\n",(0,a.jsxs)(i.p,{children:[(0,a.jsx)(i.strong,{children:"Min/Max Index"}),": This enables effective data filtering in equivalence and range queries of numeric types."]}),"\n"]}),"\n",(0,a.jsxs)(i.li,{children:["\n",(0,a.jsxs)(i.p,{children:[(0,a.jsx)(i.strong,{children:"BloomFilter Index"}),": This is very effective in equivalence filtering and pruning of high-cardinality columns."]}),"\n"]}),"\n",(0,a.jsxs)(i.li,{children:["\n",(0,a.jsxs)(i.p,{children:[(0,a.jsx)(i.strong,{children:"Inverted Index"}),": This enables fast searching for any field."]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(i.p,{children:"Apache Doris supports a variety of data models and has optimized them for different scenarios:"}),"\n",(0,a.jsxs)(i.ul,{children:["\n",(0,a.jsxs)(i.li,{children:["\n",(0,a.jsxs)(i.p,{children:[(0,a.jsx)(i.strong,{children:"Detail Model (Duplicate Key Model):"})," A detail data model designed to meet the detailed storage requirements of fact tables."]}),"\n"]}),"\n",(0,a.jsxs)(i.li,{children:["\n",(0,a.jsxs)(i.p,{children:[(0,a.jsx)(i.strong,{children:"Primary Key Model (Unique Key Model):"})," Ensures unique keys; data with the same key is overwritten, enabling row-level data updates."]}),"\n"]}),"\n",(0,a.jsxs)(i.li,{children:["\n",(0,a.jsxs)(i.p,{children:[(0,a.jsx)(i.strong,{children:"Aggregate Model (Aggregate Key Model):"})," Merges value columns with the same key, significantly improving performance through pre-aggregation."]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(i.p,{children:"Apache Doris also supports strongly consistent single-table materialized views and asynchronously refreshed multi-table materialized views. Single-table materialized views are automatically refreshed and maintained by the system, requiring no manual intervention from users. Multi-table materialized views can be refreshed periodically using in-cluster scheduling or external scheduling tools, reducing the complexity of data modeling."}),"\n",(0,a.jsx)(i.h3,{id:"query-engine",children:"Query engine"}),"\n",(0,a.jsx)(i.p,{children:"Apache Doris has an MPP-based query engine for parallel execution between and within nodes. It supports distributed shuffle join for large tables to better handle complicated queries."}),"\n",(0,a.jsx)(i.p,{children:(0,a.jsx)(i.img,{alt:"MPP-based Query engine 1",src:n(328971).Z+"",width:"2560",height:"1492"})}),"\n",(0,a.jsx)(i.p,{children:"The query engine of Apache Doris is fully vectorized, with all memory structures laid out in a columnar format. This can largely reduce virtual function calls, increase cache hit rates, and make efficient use of SIMD instructions. Apache Doris delivers a 5~10 times higher performance in wide table aggregation scenarios than non-vectorized engines."}),"\n",(0,a.jsx)(i.p,{children:(0,a.jsx)(i.img,{alt:"MPP-based Query engine 2",src:n(296785).Z+"",width:"2560",height:"864"})}),"\n",(0,a.jsx)(i.p,{children:"Apache Doris uses adaptive query execution technology to dynamically adjust the execution plan based on runtime statistics. For example, it can generate a runtime filter and push it to the probe side. Specifically, it pushes the filters to the lowest-level scan node on the probe side, which largely reduces the data amount to be processed and increases join performance. The runtime filter of Apache Doris supports In/Min/Max/Bloom Filter."}),"\n",(0,a.jsx)(i.p,{children:(0,a.jsx)(i.img,{alt:"MPP-based pip_exec_3",src:n(167987).Z+"",width:"2480",height:"1374"})}),"\n",(0,a.jsx)(i.p,{children:"Apache Doris uses a Pipeline execution engine that breaks down queries into multiple sub-tasks for parallel execution, fully leveraging multi-core CPU capabilities. It simultaneously addresses the thread explosion problem by limiting the number of query threads. The Pipeline execution engine reduces data copying and sharing, optimizes sorting and aggregation operations, thereby significantly improving query efficiency and throughput."}),"\n",(0,a.jsx)(i.p,{children:"In terms of the optimizer, Apache Doris employs a combined optimization strategy of CBO (Cost-Based Optimizer), RBO (Rule-Based Optimizer), and HBO (History-Based Optimizer). RBO supports constant folding, subquery rewriting, predicate pushdown, and more. CBO supports join reordering and other optimizations. HBO recommends the optimal execution plan based on historical query information. These multiple optimization measures ensure that Doris can enumerate high-performance query plans across various types of queries."})]})}function h(e={}){let{wrapper:i}={...(0,t.a)(),...e.components};return i?(0,a.jsx)(i,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},328971:function(e,i,n){n.d(i,{Z:function(){return s}});let s=n.p+"assets/images/apache-doris-query-engine-1-9e2beb07704b905a1c44dae1c5b3bd04.png"},296785:function(e,i,n){n.d(i,{Z:function(){return s}});let s=n.p+"assets/images/apache-doris-query-engine-2-92a7d1bd709c09e437e90dfedf559803.png"},248937:function(e,i,n){n.d(i,{Z:function(){return s}});let s=n.p+"assets/images/apache-doris-technical-overview-b8c5cb11b57d2f6559fa397d9fd0a8a0.png"},633088:function(e,i,n){n.d(i,{Z:function(){return s}});let s=n.p+"assets/images/apache-doris-usage-scenarios-pipeline-415943571e96b5151d55522929fc8b52.jpeg"},167987:function(e,i,n){n.d(i,{Z:function(){return s}});let s=n.p+"assets/images/pip_exec_3-d0f58e16950b3caba35268d217c5fca8.png"},250065:function(e,i,n){n.d(i,{Z:function(){return o},a:function(){return r}});var s=n(667294);let a={},t=s.createContext(a);function r(e){let i=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function o(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),s.createElement(t.Provider,{value:i},e.children)}}}]);