"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["826364"],{480026:function(e,n,t){t.r(n),t.d(n,{default:()=>h,frontMatter:()=>d,metadata:()=>r,assets:()=>a,toc:()=>l,contentTitle:()=>s});var r=JSON.parse('{"id":"lakehouse/catalogs/kudu-catalog","title":"Kudu Catalog","description":"Apache Doris Kudu Catalog guide: Connect to Kudu database through Trino Connector framework to query and integrate Kudu table data. Supports Kerberos authentication, multiple data type mappings, and enables quick data integration between Kudu and Doris.","source":"@site/versioned_docs/version-3.x/lakehouse/catalogs/kudu-catalog.md","sourceDirName":"lakehouse/catalogs","slug":"/lakehouse/catalogs/kudu-catalog","permalink":"/docs/3.x/lakehouse/catalogs/kudu-catalog","draft":false,"unlisted":false,"tags":[],"version":"3.x","lastUpdatedAt":1770477659000,"frontMatter":{"title":"Kudu Catalog","language":"en","description":"Apache Doris Kudu Catalog guide: Connect to Kudu database through Trino Connector framework to query and integrate Kudu table data. Supports Kerberos authentication, multiple data type mappings, and enables quick data integration between Kudu and Doris."},"sidebar":"docs","previous":{"title":"BigQuery Catalog","permalink":"/docs/3.x/lakehouse/catalogs/bigquery-catalog"},"next":{"title":"Kafka Catalog","permalink":"/docs/3.x/lakehouse/catalogs/kafka-catalog"}}'),i=t("785893"),o=t("250065");let d={title:"Kudu Catalog",language:"en",description:"Apache Doris Kudu Catalog guide: Connect to Kudu database through Trino Connector framework to query and integrate Kudu table data. Supports Kerberos authentication, multiple data type mappings, and enables quick data integration between Kudu and Doris."},s=void 0,a={},l=[{value:"Overview",id:"overview",level:2},{value:"Use Cases",id:"use-cases",level:3},{value:"Version Compatibility",id:"version-compatibility",level:3},{value:"Quick Start",id:"quick-start",level:2},{value:"Step 1: Prepare Connector Plugin",id:"step-1-prepare-connector-plugin",level:3},{value:"Step 2: Deploy Plugin",id:"step-2-deploy-plugin",level:3},{value:"Step 3: Create Catalog",id:"step-3-create-catalog",level:3},{value:"Step 4: Query Data",id:"step-4-query-data",level:3},{value:"Configuration",id:"configuration",level:2},{value:"Catalog Configuration Parameters",id:"catalog-configuration-parameters",level:3},{value:"TrinoProperties Parameters",id:"trinoproperties-parameters",level:4},{value:"CommonProperties Parameters",id:"commonproperties-parameters",level:4},{value:"Data Type Mapping",id:"data-type-mapping",level:2}];function c(e){let n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsxs)(n.p,{children:["Kudu Catalog accesses Kudu tables through the ",(0,i.jsx)(n.a,{href:"https://doris.apache.org/community/how-to-contribute/trino-connector-developer-guide/",children:"Trino Connector"})," compatibility framework using Trino Kudu Connector."]}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"This is an experimental feature, supported since version 3.0.1."}),"\n",(0,i.jsx)(n.li,{children:"This feature does not depend on a Trino cluster environment and only uses the Trino compatibility plugin."}),"\n"]})}),"\n",(0,i.jsx)(n.h3,{id:"use-cases",children:"Use Cases"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Scenario"}),(0,i.jsx)(n.th,{children:"Support Status"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Data Integration"}),(0,i.jsx)(n.td,{children:"Read Kudu data and write to Doris internal tables"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Data Write-back"}),(0,i.jsx)(n.td,{children:"Not supported"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"version-compatibility",children:"Version Compatibility"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Doris Version"}),": 3.0.1 and above"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Trino Connector Version"}),": 435"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Kudu Version"}),": For supported versions, please refer to ",(0,i.jsx)(n.a,{href:"https://trino.io/docs/435/connector/kudu.html",children:"Trino Documentation"})]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,i.jsx)(n.h3,{id:"step-1-prepare-connector-plugin",children:"Step 1: Prepare Connector Plugin"}),"\n",(0,i.jsx)(n.p,{children:"You can choose one of the following methods to obtain the Kudu Connector plugin:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Method 1: Use Pre-compiled Package (Recommended)"})}),"\n",(0,i.jsxs)(n.p,{children:["Download and extract the pre-compiled plugin package from ",(0,i.jsx)(n.a,{href:"https://github.com/apache/doris-thirdparty/releases/tag/trino-435-20240724",children:"here"}),"."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Method 2: Manual Compilation"})}),"\n",(0,i.jsx)(n.p,{children:"If you need custom compilation, follow these steps (requires JDK 17):"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"git clone https://github.com/apache/doris-thirdparty.git\ncd doris-thirdparty\ngit checkout trino-435\ncd plugin/trino-kudu\nmvn clean package -Dmaven.test.skip=true\n"})}),"\n",(0,i.jsxs)(n.p,{children:["After compilation, you will get the ",(0,i.jsx)(n.code,{children:"trino-kudu-435/"})," directory in ",(0,i.jsx)(n.code,{children:"trino/plugin/trino-kudu/target/"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"step-2-deploy-plugin",children:"Step 2: Deploy Plugin"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Place the ",(0,i.jsx)(n.code,{children:"trino-kudu-435/"})," directory under the ",(0,i.jsx)(n.code,{children:"connectors/"})," directory of all FE and BE deployment paths (create the directory manually if it doesn't exist):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-text",children:"\u251C\u2500\u2500 bin\n\u251C\u2500\u2500 conf\n\u251C\u2500\u2500 plugins\n\u2502   \u251C\u2500\u2500 connectors\n\u2502       \u251C\u2500\u2500 trino-kudu-435\n...\n"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["You can also customize the plugin path by modifying the ",(0,i.jsx)(n.code,{children:"trino_connector_plugin_dir"})," configuration in ",(0,i.jsx)(n.code,{children:"fe.conf"}),". For example: ",(0,i.jsx)(n.code,{children:"trino_connector_plugin_dir=/path/to/connectors/"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Restart all FE and BE nodes to ensure the Connector is properly loaded."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"step-3-create-catalog",children:"Step 3: Create Catalog"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Basic Configuration (Without Authentication)"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"CREATE CATALOG kudu_catalog PROPERTIES (\n    'type' = 'trino-connector',\n    'trino.connector.name' = 'kudu',\n    'trino.kudu.client.master-addresses' = 'ip1:port1,ip2:port2,ip3:port3',\n    'trino.kudu.authentication.type' = 'NONE'\n);\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Kerberos Authentication Configuration"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"CREATE CATALOG kudu_catalog PROPERTIES (\n    'type' = 'trino-connector',\n    'trino.connector.name' = 'kudu',\n    'trino.kudu.client.master-addresses' = 'ip1:port1,ip2:port2,ip3:port3',\n    'trino.kudu.authentication.type' = 'KERBEROS',\n    'trino.kudu.authentication.client.principal' = 'user@DOMAIN.COM',\n    'trino.kudu.authentication.client.keytab' = '/path/to/kudu.keytab',\n    'trino.kudu.authentication.config' = '/etc/krb5.conf',\n    'trino.kudu.authentication.server.principal.primary' = 'kudu'\n);\n"})}),"\n",(0,i.jsx)(n.h3,{id:"step-4-query-data",children:"Step 4: Query Data"}),"\n",(0,i.jsx)(n.p,{children:"After creating the Catalog, you can query Kudu table data using one of the following three methods:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"-- Method 1: Query after switching to Catalog\nSWITCH kudu_catalog;\nUSE kudu_db;\nSELECT * FROM kudu_tbl LIMIT 10;\n\n-- Method 2: Use two-level path\nUSE kudu_catalog.kudu_db;\nSELECT * FROM kudu_tbl LIMIT 10;\n\n-- Method 3: Use fully qualified name\nSELECT * FROM kudu_catalog.kudu_db.kudu_tbl LIMIT 10;\n"})}),"\n",(0,i.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,i.jsx)(n.h3,{id:"catalog-configuration-parameters",children:"Catalog Configuration Parameters"}),"\n",(0,i.jsx)(n.p,{children:"The basic syntax for creating a Kudu Catalog is as follows:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"CREATE CATALOG [IF NOT EXISTS] catalog_name PROPERTIES (\n    'type' = 'trino-connector',          -- Required, fixed value\n    'trino.connector.name' = 'kudu',     -- Required, fixed value\n    {TrinoProperties},                   -- Trino Connector related properties\n    {CommonProperties}                   -- Common properties\n);\n"})}),"\n",(0,i.jsx)(n.h4,{id:"trinoproperties-parameters",children:"TrinoProperties Parameters"}),"\n",(0,i.jsxs)(n.p,{children:["TrinoProperties are used to configure Trino Kudu Connector specific properties, prefixed with ",(0,i.jsx)(n.code,{children:"trino."}),". Common parameters include:"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Parameter Name"}),(0,i.jsx)(n.th,{children:"Required"}),(0,i.jsx)(n.th,{children:"Default"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"trino.kudu.client.master-addresses"})}),(0,i.jsx)(n.td,{children:"Yes"}),(0,i.jsx)(n.td,{children:"-"}),(0,i.jsx)(n.td,{children:"List of Kudu Master node addresses"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"trino.kudu.authentication.type"})}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:"NONE"}),(0,i.jsx)(n.td,{children:"Authentication type: NONE or KERBEROS"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"trino.kudu.authentication.client.principal"})}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:"-"}),(0,i.jsx)(n.td,{children:"Kerberos client principal"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"trino.kudu.authentication.client.keytab"})}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:"-"}),(0,i.jsx)(n.td,{children:"Kerberos keytab file path"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"trino.kudu.authentication.config"})}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:"-"}),(0,i.jsx)(n.td,{children:"Kerberos configuration file path"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"trino.kudu.authentication.server.principal.primary"})}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:"-"}),(0,i.jsx)(n.td,{children:"Kudu server principal prefix"})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:["For more Kudu Connector configuration parameters, please refer to ",(0,i.jsx)(n.a,{href:"https://trino.io/docs/435/connector/kudu.html",children:"Trino Official Documentation"}),"."]}),"\n",(0,i.jsx)(n.h4,{id:"commonproperties-parameters",children:"CommonProperties Parameters"}),"\n",(0,i.jsxs)(n.p,{children:['CommonProperties are used to configure general Catalog properties, such as metadata refresh policies, access control, etc. For detailed information, please refer to the "Common Properties" section in ',(0,i.jsx)(n.a,{href:"/docs/3.x/lakehouse/catalog-overview",children:"Catalog Overview"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"data-type-mapping",children:"Data Type Mapping"}),"\n",(0,i.jsx)(n.p,{children:"When using Kudu Catalog, data types are mapped according to the following rules:"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Kudu Type"}),(0,i.jsx)(n.th,{children:"Trino Type"}),(0,i.jsx)(n.th,{children:"Doris Type"}),(0,i.jsx)(n.th,{children:"Notes"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"boolean"}),(0,i.jsx)(n.td,{children:"boolean"}),(0,i.jsx)(n.td,{children:"boolean"}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"int8"}),(0,i.jsx)(n.td,{children:"tinyint"}),(0,i.jsx)(n.td,{children:"tinyint"}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"int16"}),(0,i.jsx)(n.td,{children:"smallint"}),(0,i.jsx)(n.td,{children:"smallint"}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"int32"}),(0,i.jsx)(n.td,{children:"integer"}),(0,i.jsx)(n.td,{children:"int"}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"int64"}),(0,i.jsx)(n.td,{children:"bigint"}),(0,i.jsx)(n.td,{children:"bigint"}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"float"}),(0,i.jsx)(n.td,{children:"real"}),(0,i.jsx)(n.td,{children:"float"}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"double"}),(0,i.jsx)(n.td,{children:"double"}),(0,i.jsx)(n.td,{children:"double"}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"decimal(P, S)"}),(0,i.jsx)(n.td,{children:"decimal(P, S)"}),(0,i.jsx)(n.td,{children:"decimal(P, S)"}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"binary"}),(0,i.jsx)(n.td,{children:"varbinary"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsxs)(n.td,{children:["Use ",(0,i.jsx)(n.code,{children:"HEX(col)"})," function to query for display results consistent with Trino"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"varchar"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"date"}),(0,i.jsx)(n.td,{children:"date"}),(0,i.jsx)(n.td,{children:"date"}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"unixtime_micros"}),(0,i.jsx)(n.td,{children:"timestamp(3)"}),(0,i.jsx)(n.td,{children:"datetime(3)"}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"other"}),(0,i.jsx)(n.td,{children:"UNSUPPORTED"}),(0,i.jsx)(n.td,{children:"-"}),(0,i.jsx)(n.td,{children:"Unsupported type"})]})]})]}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsxs)(n.p,{children:["For ",(0,i.jsx)(n.code,{children:"binary"})," type, if you need to display in hexadecimal format, use the ",(0,i.jsx)(n.code,{children:"HEX()"})," function to wrap the column name, for example: ",(0,i.jsx)(n.code,{children:"SELECT HEX(binary_col) FROM table"}),"."]})})]})}function h(e={}){let{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},250065:function(e,n,t){t.d(n,{Z:function(){return s},a:function(){return d}});var r=t(667294);let i={},o=r.createContext(i);function d(e){let n=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);