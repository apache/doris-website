"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["223710"],{131244:function(e,t,a){a.r(t),a.d(t,{default:()=>h,frontMatter:()=>o,metadata:()=>n,assets:()=>l,toc:()=>d,contentTitle:()=>s});var n=JSON.parse('{"id":"data-operate/delete/delete-overview","title":"Delete Overview","description":"In Apache Doris, the delete operation is essential for managing and cleaning data to meet the flexible needs of users in large-scale data analysis scenarios.","source":"@site/docs/data-operate/delete/delete-overview.md","sourceDirName":"data-operate/delete","slug":"/data-operate/delete/delete-overview","permalink":"/docs/dev/data-operate/delete/delete-overview","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Delete Overview","language":"en"},"sidebar":"docs","previous":{"title":"Concurrency Control for Updates in the Primary Key Model","permalink":"/docs/dev/data-operate/update/unique-update-concurrent-control"},"next":{"title":"Deleting Data with DELETE Command","permalink":"/docs/dev/data-operate/delete/delete-manual"}}'),i=a("785893"),r=a("250065");let o={title:"Delete Overview",language:"en"},s=void 0,l={},d=[{value:"DELETE Statement",id:"delete-statement",level:3},{value:"Truncate Partition",id:"truncate-partition",level:3},{value:"Truncate Table",id:"truncate-table",level:3},{value:"Delete Sign",id:"delete-sign",level:3},{value:"Atomic Overwrite Using Temporary Partitions",id:"atomic-overwrite-using-temporary-partitions",level:3},{value:"Precautions",id:"precautions",level:2}];function c(e){let t={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",...(0,r.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.p,{children:"In Apache Doris, the delete operation is essential for managing and cleaning data to meet the flexible needs of users in large-scale data analysis scenarios."}),"\n",(0,i.jsx)(t.p,{children:"Doris offers a variety of delete functionalities, including DELETE statements, delete sign, partition deletion, full table deletion, and atomic overwrite using temporary partitions. The following sections will detail each feature:"}),"\n",(0,i.jsx)(t.h3,{id:"delete-statement",children:"DELETE Statement"}),"\n",(0,i.jsx)(t.p,{children:"The DELETE statement is the most commonly used method for deleting data and supports all table models. Users can use it to delete data that meets specific conditions."}),"\n",(0,i.jsx)(t.p,{children:"The syntax of the DELETE statement is as follows:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-sql",children:"DELETE FROM table_name WHERE condition;\n"})}),"\n",(0,i.jsx)(t.p,{children:"While the DELETE statement can handle most deletion needs, it may not be the most efficient in some scenarios. To address various deletion requirements flexibly and efficiently, Doris also provides the following methods."}),"\n",(0,i.jsx)(t.h3,{id:"truncate-partition",children:"Truncate Partition"}),"\n",(0,i.jsx)(t.p,{children:"In Doris, managing data through date partitions and other methods is common. Many users only need to retain data for a recent period (e.g., 7 days). For expired data partitions, the truncate partition feature can be used for efficient deletion."}),"\n",(0,i.jsx)(t.p,{children:"Compared to the DELETE statement, truncate partition only requires modifying some partition metadata to complete the deletion, making it the best method in this scenario."}),"\n",(0,i.jsx)(t.p,{children:"The syntax of partition deletion is as follows:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-sql",children:"TRUNCATE TABLE tbl PARTITION(p1, p2);\n"})}),"\n",(0,i.jsx)(t.h3,{id:"truncate-table",children:"Truncate Table"}),"\n",(0,i.jsx)(t.p,{children:"Truncate table is suitable for quickly clearing a table while retaining its structure, such as when redoing data in offline analysis scenarios."}),"\n",(0,i.jsx)(t.p,{children:"The syntax of full truncate table is as follows:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-sql",children:"TRUNCATE TABLE table_name;\n"})}),"\n",(0,i.jsx)(t.h3,{id:"delete-sign",children:"Delete Sign"}),"\n",(0,i.jsx)(t.p,{children:"Data deletion can be considered a type of data update. Therefore, on the primary key model (Unique Key) with update capabilities, users can use the delete sign feature to perform delete operations as data updates."}),"\n",(0,i.jsx)(t.p,{children:"For example, in CDC data synchronization scenarios, the CDC program can mark a DELETE operation binlog with a delete sign. When this data is written to Doris, the corresponding primary key will be deleted."}),"\n",(0,i.jsx)(t.p,{children:"This method can perform batch deletion of a large number of primary keys, which is more efficient than the DELETE statement."}),"\n",(0,i.jsxs)(t.p,{children:["The delete sign is an advanced feature and is more complex to use compared to the previous methods. For detailed usage, please refer to the document ",(0,i.jsx)(t.a,{href:"/docs/dev/data-operate/delete/batch-delete-manual",children:"Batch Deletion"}),"."]}),"\n",(0,i.jsx)(t.h3,{id:"atomic-overwrite-using-temporary-partitions",children:"Atomic Overwrite Using Temporary Partitions"}),"\n",(0,i.jsxs)(t.p,{children:["In some cases, users want to rewrite the data of a partition. However, if the data is deleted and then loaded, there will be a period when the data is unavailable. In this case, users can first create a corresponding temporary partition, load the new data into the temporary partition, and then replace the original partition atomically. For detailed usage, please refer to the document ",(0,i.jsx)(t.a,{href:"/docs/dev/data-operate/delete/atomicity-replace",children:"Atomic Table Replacement"}),"."]}),"\n",(0,i.jsx)(t.h2,{id:"precautions",children:"Precautions"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsx)(t.li,{children:"The delete operation will generate new data versions, so frequent deletions may increase the number of versions, thereby affecting query performance."}),"\n",(0,i.jsx)(t.li,{children:"Deleted data will still occupy storage until merge and compression are completed, so the delete operation itself will not immediately reduce storage usage."}),"\n"]})]})}function h(e={}){let{wrapper:t}={...(0,r.a)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},250065:function(e,t,a){a.d(t,{Z:function(){return s},a:function(){return o}});var n=a(667294);let i={},r=n.createContext(i);function o(e){let t=n.useContext(r);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),n.createElement(r.Provider,{value:t},e.children)}}}]);