"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["507695"],{319272:function(e,n,t){t.r(n),t.d(n,{default:()=>h,frontMatter:()=>a,metadata:()=>i,assets:()=>s,toc:()=>d,contentTitle:()=>l});var i=JSON.parse('{"id":"lakehouse/catalogs/bigquery-catalog","title":"BigQuery Catalog","description":"Learn how to configure and use BigQuery Catalog in Apache Doris to connect to Google BigQuery data warehouse. Implement BigQuery table data querying, data integration, and real-time analytics through the Trino Connector framework. Supports Google Cloud ADC authentication and various data type mappings (including complex types like ARRAY, MAP, STRUCT). Provides complete installation, deployment, configuration parameters, and usage examples to help users quickly achieve data interoperability between BigQuery and Doris.","source":"@site/versioned_docs/version-3.x/lakehouse/catalogs/bigquery-catalog.md","sourceDirName":"lakehouse/catalogs","slug":"/lakehouse/catalogs/bigquery-catalog","permalink":"/docs/3.x/lakehouse/catalogs/bigquery-catalog","draft":false,"unlisted":false,"tags":[],"version":"3.x","lastUpdatedAt":1770477659000,"frontMatter":{"title":"BigQuery Catalog","language":"en","description":"Learn how to configure and use BigQuery Catalog in Apache Doris to connect to Google BigQuery data warehouse. Implement BigQuery table data querying, data integration, and real-time analytics through the Trino Connector framework. Supports Google Cloud ADC authentication and various data type mappings (including complex types like ARRAY, MAP, STRUCT). Provides complete installation, deployment, configuration parameters, and usage examples to help users quickly achieve data interoperability between BigQuery and Doris."},"sidebar":"docs","previous":{"title":"Delta Lake Catalog","permalink":"/docs/3.x/lakehouse/catalogs/delta-lake-catalog"},"next":{"title":"Kudu Catalog","permalink":"/docs/3.x/lakehouse/catalogs/kudu-catalog"}}'),r=t("785893"),o=t("250065");let a={title:"BigQuery Catalog",language:"en",description:"Learn how to configure and use BigQuery Catalog in Apache Doris to connect to Google BigQuery data warehouse. Implement BigQuery table data querying, data integration, and real-time analytics through the Trino Connector framework. Supports Google Cloud ADC authentication and various data type mappings (including complex types like ARRAY, MAP, STRUCT). Provides complete installation, deployment, configuration parameters, and usage examples to help users quickly achieve data interoperability between BigQuery and Doris."},l=void 0,s={},d=[{value:"Overview",id:"overview",level:2},{value:"Use Cases",id:"use-cases",level:3},{value:"Version Compatibility",id:"version-compatibility",level:3},{value:"Quick Start",id:"quick-start",level:2},{value:"Step 1: Prepare Connector Plugin",id:"step-1-prepare-connector-plugin",level:3},{value:"Step 2: Deploy Plugin",id:"step-2-deploy-plugin",level:3},{value:"Step 3: Prepare Google Cloud Authentication",id:"step-3-prepare-google-cloud-authentication",level:3},{value:"Step 4: Create Catalog",id:"step-4-create-catalog",level:3},{value:"Step 5: Query Data",id:"step-5-query-data",level:3},{value:"Configuration",id:"configuration",level:2},{value:"Catalog Configuration Parameters",id:"catalog-configuration-parameters",level:3},{value:"TrinoProperties Parameters",id:"trinoproperties-parameters",level:4},{value:"CommonProperties Parameters",id:"commonproperties-parameters",level:4},{value:"Data Type Mapping",id:"data-type-mapping",level:2}];function c(e){let n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsxs)(n.p,{children:["BigQuery Catalog uses the Trino BigQuery Connector to access BigQuery tables through the ",(0,r.jsx)(n.a,{href:"https://doris.apache.org/community/how-to-contribute/trino-connector-developer-guide/",children:"Trino Connector"})," compatibility framework."]}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"This feature is experimental and supported since version 3.0.1."}),"\n",(0,r.jsx)(n.li,{children:"This feature does not depend on a Trino cluster environment and only uses the Trino compatibility plugin."}),"\n"]})}),"\n",(0,r.jsx)(n.h3,{id:"use-cases",children:"Use Cases"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Scenario"}),(0,r.jsx)(n.th,{children:"Support Status"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Data Integration"}),(0,r.jsx)(n.td,{children:"Read BigQuery data and write to Doris internal tables"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Data Write-back"}),(0,r.jsx)(n.td,{children:"Not supported"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"version-compatibility",children:"Version Compatibility"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Doris Version"}),": 3.0.1 and above"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Trino Connector Version"}),": 435"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"BigQuery Version"}),": For supported versions, please refer to ",(0,r.jsx)(n.a,{href:"https://trino.io/docs/435/connector/bigquery.html",children:"Trino Documentation"})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,r.jsx)(n.h3,{id:"step-1-prepare-connector-plugin",children:"Step 1: Prepare Connector Plugin"}),"\n",(0,r.jsx)(n.p,{children:"You can choose one of the following methods to obtain the BigQuery Connector plugin:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Method 1: Use Pre-compiled Package (Recommended)"})}),"\n",(0,r.jsxs)(n.p,{children:["Download and extract the pre-compiled plugin package directly from ",(0,r.jsx)(n.a,{href:"https://github.com/apache/doris-thirdparty/releases/tag/trino-435-20240724",children:"here"}),"."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Method 2: Manual Compilation"})}),"\n",(0,r.jsx)(n.p,{children:"If you need custom compilation, follow these steps (requires JDK 17):"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"git clone https://github.com/apache/doris-thirdparty.git\ncd doris-thirdparty\ngit checkout trino-435\ncd plugin/trino-bigquery\nmvn clean install -DskipTest\n"})}),"\n",(0,r.jsxs)(n.p,{children:["After compilation, you will get the ",(0,r.jsx)(n.code,{children:"trino-bigquery-435/"})," directory under ",(0,r.jsx)(n.code,{children:"trino/plugin/trino-bigquery/target/"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"step-2-deploy-plugin",children:"Step 2: Deploy Plugin"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Place the ",(0,r.jsx)(n.code,{children:"trino-bigquery-435/"})," directory in the ",(0,r.jsx)(n.code,{children:"connectors/"})," directory under the deployment path of all FE and BE nodes (create the directory manually if it doesn't exist):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:"\u251C\u2500\u2500 bin\n\u251C\u2500\u2500 conf\n\u251C\u2500\u2500 plugins\n\u2502   \u251C\u2500\u2500 connectors\n\u2502       \u251C\u2500\u2500 trino-bigquery-435\n...\n"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["You can also customize the plugin path by modifying the ",(0,r.jsx)(n.code,{children:"trino_connector_plugin_dir"})," configuration in ",(0,r.jsx)(n.code,{children:"fe.conf"}),". For example: ",(0,r.jsx)(n.code,{children:"trino_connector_plugin_dir=/path/to/connectors/"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Restart all FE and BE nodes to ensure the Connector is properly loaded."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"step-3-prepare-google-cloud-authentication",children:"Step 3: Prepare Google Cloud Authentication"}),"\n",(0,r.jsx)(n.p,{children:"Before creating the Catalog, you need to configure Google Cloud authentication. The recommended method is Application Default Credentials (ADC):"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Install gcloud CLI: ",(0,r.jsx)(n.a,{href:"https://cloud.google.com/sdk/docs/install",children:"https://cloud.google.com/sdk/docs/install"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Execute the following commands for initialization and authentication:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"gcloud init --console-only --skip-diagnostics\ngcloud auth login\ngcloud auth application-default login\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["After successful authentication, the ADC credential file will be generated at ",(0,r.jsx)(n.code,{children:"~/.config/gcloud/application_default_credentials.json"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"step-4-create-catalog",children:"Step 4: Create Catalog"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Basic Configuration Example"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"CREATE CATALOG bigquery_catalog PROPERTIES (\n    'type' = 'trino-connector',\n    'trino.connector.name' = 'bigquery',\n    'trino.bigquery.project-id' = 'your-bigquery-project-id',\n    'trino.bigquery.credentials-file' = '/path/to/application_default_credentials.json'\n);\n"})}),"\n",(0,r.jsx)(n.h3,{id:"step-5-query-data",children:"Step 5: Query Data"}),"\n",(0,r.jsx)(n.p,{children:"After creating the Catalog, you can query BigQuery table data in three ways:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"-- Method 1: Query after switching to Catalog\nSWITCH bigquery_catalog;\nUSE bigquery_db;\nSELECT * FROM bigquery_tbl LIMIT 10;\n\n-- Method 2: Use two-level path\nUSE bigquery_catalog.bigquery_db;\nSELECT * FROM bigquery_tbl LIMIT 10;\n\n-- Method 3: Use fully qualified name\nSELECT * FROM bigquery_catalog.bigquery_db.bigquery_tbl LIMIT 10;\n"})}),"\n",(0,r.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,r.jsx)(n.h3,{id:"catalog-configuration-parameters",children:"Catalog Configuration Parameters"}),"\n",(0,r.jsx)(n.p,{children:"The basic syntax for creating a BigQuery Catalog is as follows:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"CREATE CATALOG [IF NOT EXISTS] catalog_name PROPERTIES (\n    'type' = 'trino-connector',             -- Required, fixed value\n    'trino.connector.name' = 'bigquery',    -- Required, fixed value\n    {TrinoProperties},                      -- Trino Connector related properties\n    {CommonProperties}                      -- Common properties\n);\n"})}),"\n",(0,r.jsx)(n.h4,{id:"trinoproperties-parameters",children:"TrinoProperties Parameters"}),"\n",(0,r.jsxs)(n.p,{children:["TrinoProperties are used to configure Trino BigQuery Connector-specific properties, prefixed with ",(0,r.jsx)(n.code,{children:"trino."}),". Common parameters include:"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Parameter Name"}),(0,r.jsx)(n.th,{children:"Required"}),(0,r.jsx)(n.th,{children:"Default"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"trino.bigquery.project-id"})}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"-"}),(0,r.jsx)(n.td,{children:"BigQuery project ID"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"trino.bigquery.credentials-file"})}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"-"}),(0,r.jsx)(n.td,{children:"Google Cloud credentials file path"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"trino.bigquery.views-enabled"})}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"false"}),(0,r.jsx)(n.td,{children:"Whether to enable view support"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"trino.bigquery.arrow-serialization.enabled"})}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"true"}),(0,r.jsx)(n.td,{children:"Whether to enable Arrow serialization for performance"})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:["For more BigQuery Connector configuration parameters, please refer to the ",(0,r.jsx)(n.a,{href:"https://trino.io/docs/435/connector/bigquery.html",children:"Trino Official Documentation"}),"."]}),"\n",(0,r.jsx)(n.h4,{id:"commonproperties-parameters",children:"CommonProperties Parameters"}),"\n",(0,r.jsxs)(n.p,{children:['CommonProperties are used to configure common Catalog properties, such as metadata refresh policies and access control. For detailed information, please refer to the "Common Properties" section in ',(0,r.jsx)(n.a,{href:"/docs/3.x/lakehouse/catalog-overview",children:"Catalog Overview"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"data-type-mapping",children:"Data Type Mapping"}),"\n",(0,r.jsx)(n.p,{children:"When using BigQuery Catalog, data types are mapped according to the following rules:"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"BigQuery Type"}),(0,r.jsx)(n.th,{children:"Trino Type"}),(0,r.jsx)(n.th,{children:"Doris Type"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"boolean"}),(0,r.jsx)(n.td,{children:"boolean"}),(0,r.jsx)(n.td,{children:"boolean"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"int64"}),(0,r.jsx)(n.td,{children:"bigint"}),(0,r.jsx)(n.td,{children:"bigint"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"float64"}),(0,r.jsx)(n.td,{children:"double"}),(0,r.jsx)(n.td,{children:"double"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"numeric"}),(0,r.jsx)(n.td,{children:"decimal(P, S)"}),(0,r.jsx)(n.td,{children:"decimal(P, S)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"bignumeric"}),(0,r.jsx)(n.td,{children:"decimal(P, S)"}),(0,r.jsx)(n.td,{children:"decimal(P, S)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"varchar"}),(0,r.jsx)(n.td,{children:"string"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"bytes"}),(0,r.jsx)(n.td,{children:"varbinary"}),(0,r.jsx)(n.td,{children:"string"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"date"}),(0,r.jsx)(n.td,{children:"date"}),(0,r.jsx)(n.td,{children:"date"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"datetime"}),(0,r.jsx)(n.td,{children:"timestamp(6)"}),(0,r.jsx)(n.td,{children:"datetime(6)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"time"}),(0,r.jsx)(n.td,{children:"time(6)"}),(0,r.jsx)(n.td,{children:"string"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"timestamp"}),(0,r.jsx)(n.td,{children:"timestamp with time zone(6)"}),(0,r.jsx)(n.td,{children:"datetime(6)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"geography"}),(0,r.jsx)(n.td,{children:"varchar"}),(0,r.jsx)(n.td,{children:"string"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"array"}),(0,r.jsx)(n.td,{children:"array"}),(0,r.jsx)(n.td,{children:"array"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"map"}),(0,r.jsx)(n.td,{children:"map"}),(0,r.jsx)(n.td,{children:"map"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"struct"}),(0,r.jsx)(n.td,{children:"row"}),(0,r.jsx)(n.td,{children:"struct"})]})]})]})]})}function h(e={}){let{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},250065:function(e,n,t){t.d(n,{Z:function(){return l},a:function(){return a}});var i=t(667294);let r={},o=i.createContext(r);function a(e){let n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);