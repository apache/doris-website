"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["173452"],{450681:function(e,t,s){s.r(t),s.d(t,{default:()=>u,frontMatter:()=>a,metadata:()=>n,assets:()=>o,toc:()=>d,contentTitle:()=>l});var n=JSON.parse('{"id":"sql-manual/sql-statements/session/queries/PLAN-REPLAYER-DUMP","title":"PLAN REPLAYER DUMP","description":"PLAN REPLAYER DUMP is a tool for Doris users to generate execution plan diagnostic files. It captures the state and input data of the query optimizer,","source":"@site/docs/sql-manual/sql-statements/session/queries/PLAN-REPLAYER-DUMP.md","sourceDirName":"sql-manual/sql-statements/session/queries","slug":"/sql-manual/sql-statements/session/queries/PLAN-REPLAYER-DUMP","permalink":"/docs/dev/sql-manual/sql-statements/session/queries/PLAN-REPLAYER-DUMP","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1770477659000,"frontMatter":{"title":"PLAN REPLAYER DUMP","language":"en","description":"PLAN REPLAYER DUMP is a tool for Doris users to generate execution plan diagnostic files. It captures the state and input data of the query optimizer,"},"sidebar":"docs","previous":{"title":"CLEAN ALL QUERY STATS","permalink":"/docs/dev/sql-manual/sql-statements/session/queries/CLEAN-ALL-QUERY-STATS"},"next":{"title":"PLAN REPLAYER PLAY","permalink":"/docs/dev/sql-manual/sql-statements/session/queries/PLAN-REPLAYER-PLAY"}}'),i=s("785893"),r=s("250065");let a={title:"PLAN REPLAYER DUMP",language:"en",description:"PLAN REPLAYER DUMP is a tool for Doris users to generate execution plan diagnostic files. It captures the state and input data of the query optimizer,"},l=void 0,o={},d=[{value:"Description",id:"description",level:2},{value:"Syntax",id:"syntax",level:2},{value:"Required Parameters",id:"required-parameters",level:2},{value:"Permission Control",id:"permission-control",level:2},{value:"Examples",id:"examples",level:2},{value:"Basic Example",id:"basic-example",level:3}];function c(e){let t={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h2,{id:"description",children:"Description"}),"\n",(0,i.jsx)(t.p,{children:"PLAN REPLAYER DUMP is a tool for Doris users to generate execution plan diagnostic files. It captures the state and input data of the query optimizer, facilitating debugging and analysis of query optimization issues. The output is the http address of the corresponding diagnostic file."}),"\n",(0,i.jsx)(t.h2,{id:"syntax",children:"Syntax"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-sql",children:"PLAN REPLAYER DUMP <query>\n"})}),"\n",(0,i.jsx)(t.h2,{id:"required-parameters",children:"Required Parameters"}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.code,{children:"<query>"})}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Refers to the query statement inside the corresponding DML."}),"\n",(0,i.jsx)(t.li,{children:"If it is not a query statement, a parse error will be reported."}),"\n",(0,i.jsxs)(t.li,{children:["For more details, please refer to the ",(0,i.jsx)(t.a,{href:"https://doris.apache.org/docs/dev/sql-manual/sql-statements/data-query/SELECT",children:"SELECT"})," syntax."]}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"permission-control",children:"Permission Control"}),"\n",(0,i.jsx)(t.p,{children:"Users executing this SQL command must have at least the following permissions:"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{style:{textAlign:"center"},children:"Privilege"}),(0,i.jsx)(t.th,{style:{textAlign:"center"},children:"Object"}),(0,i.jsx)(t.th,{style:{textAlign:"center"},children:"Notes"})]})}),(0,i.jsx)(t.tbody,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"SELECT_PRIV"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"Table, View"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"When executing the <query_sql_statement>, the SELECT_PRIV permission for the queried table, view, or materialized view is required."})]})})]}),"\n",(0,i.jsx)(t.h2,{id:"examples",children:"Examples"}),"\n",(0,i.jsx)(t.h3,{id:"basic-example",children:"Basic Example"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-sql",children:"create database test_replayer;\nuse database test_replayer;\ncreate table t1 (c1 int, c11 int) distributed by hash(c1) buckets 3 properties('replication_num' = '1');\nplan replayer dump select * from t1;\n"})}),"\n",(0,i.jsx)(t.p,{children:"Execution result example:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-sql",children:"+-------------------------------------------------------------------------------+\n| Plan Replayer dump url                                                        |\n| Plan Replayer dump url |\n+-------------------------------------------------------------------------------+\n| http://127.0.0.1:8030/api/minidump?query_id=6e7441f741e94afd-ad3ba69429ad18ec |\n+-------------------------------------------------------------------------------+\n"})}),"\n",(0,i.jsx)(t.p,{children:"You can use curl or wget to obtain the corresponding file, for example:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-sql",children:"wget http://127.0.0.1:8030/api/minidump?query_id=6e7441f741e94afd-ad3ba69429ad18ec\n"})}),"\n",(0,i.jsx)(t.p,{children:"When permissions are required, you can include the username and password in:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-sql",children:"wget --header=\"Authorization: Basic $(echo -n 'root:' | base64)\" http://127.0.0.1:8030/api/minidump?query_id=6e7441f741e94afd-ad3ba69429ad18ec\n"})}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{})})]})}function u(e={}){let{wrapper:t}={...(0,r.a)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},250065:function(e,t,s){s.d(t,{Z:function(){return l},a:function(){return a}});var n=s(667294);let i={},r=n.createContext(i);function a(e){let t=n.useContext(r);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),n.createElement(r.Provider,{value:t},e.children)}}}]);