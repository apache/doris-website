"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["706715"],{117046:function(e,s,n){n.r(s),n.d(s,{default:()=>h,frontMatter:()=>a,metadata:()=>i,assets:()=>o,toc:()=>d,contentTitle:()=>l});var i=JSON.parse('{"id":"admin-manual/auth/authorization/internal","title":"Built-in Authorization","description":"Authorization refers to the mechanism by which user identities are restricted in accessing and operating Doris resources.","source":"@site/docs/admin-manual/auth/authorization/internal.md","sourceDirName":"admin-manual/auth/authorization","slug":"/admin-manual/auth/authorization/internal","permalink":"/docs/dev/admin-manual/auth/authorization/internal","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1770477659000,"frontMatter":{"title":"Built-in Authorization","language":"en","description":"Authorization refers to the mechanism by which user identities are restricted in accessing and operating Doris resources."},"sidebar":"docs","previous":{"title":"LDAP","permalink":"/docs/dev/admin-manual/auth/authentication/ldap"},"next":{"title":"Ranger Authorization","permalink":"/docs/dev/admin-manual/auth/authorization/ranger"}}'),r=n("785893"),t=n("250065");let a={title:"Built-in Authorization",language:"en",description:"Authorization refers to the mechanism by which user identities are restricted in accessing and operating Doris resources."},l=void 0,o={},d=[{value:"Key Concepts",id:"key-concepts",level:2},{value:"Permissions",id:"permissions",level:3},{value:"All Permissions",id:"all-permissions",level:4},{value:"Roles",id:"roles",level:3},{value:"Built-in Roles",id:"built-in-roles",level:4},{value:"Users",id:"users",level:3},{value:"Authorization Mechanism",id:"authorization-mechanism",level:2},{value:"Notes",id:"notes",level:3},{value:"Related Commands",id:"related-commands",level:2},{value:"Best Practices",id:"best-practices",level:2}];function c(e){let s={a:"a",br:"br",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.h2,{id:"key-concepts",children:"Key Concepts"}),"\n",(0,r.jsx)(s.p,{children:"Authorization refers to the mechanism by which user identities are restricted in accessing and operating Doris resources."}),"\n",(0,r.jsx)(s.p,{children:"Doris uses a Role-Based Access Control (RBAC) model for permission management."}),"\n",(0,r.jsx)(s.h3,{id:"permissions",children:"Permissions"}),"\n",(0,r.jsx)(s.p,{children:"Permissions apply to nodes, catalogs, databases, or tables. Different permissions represent different operation allowances."}),"\n",(0,r.jsx)(s.h4,{id:"all-permissions",children:"All Permissions"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Permission"}),(0,r.jsx)(s.th,{children:"Object Type"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"Admin_priv"}),(0,r.jsx)(s.td,{children:"Global"}),(0,r.jsx)(s.td,{children:"Super admin permissions."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"Node_priv"}),(0,r.jsx)(s.td,{children:"Global"}),(0,r.jsx)(s.td,{children:"Node change permissions. Includes adding, deleting, and decommissioning FE, BE, and BROKER nodes."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"Grant_priv"}),(0,r.jsx)(s.td,{children:"Global, Catalog, Db, Table, Resource, Workload Group"}),(0,r.jsxs)(s.td,{children:["Permission change permissions. Allows operations such as granting, revoking, adding/removing/changing users/roles. ",(0,r.jsx)(s.br,{}),"When granting permissions to other users/roles, prior to version 2.1.2, the current user only needs the corresponding level of Grant_priv permission. After version 2.1.2, the current user also needs the permissions of the resources they want to grant. ",(0,r.jsx)(s.br,{}),"To assign roles to other users, Global level Grant_priv permission is required."]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"Select_priv"}),(0,r.jsx)(s.td,{children:"Global, Catalog, Db, Table, Column"}),(0,r.jsx)(s.td,{children:"Select permission. Allows querying data."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"Load_priv"}),(0,r.jsx)(s.td,{children:"Global, Catalog, Db, Table"}),(0,r.jsx)(s.td,{children:"Load permission. Includes Load, Insert, Delete, etc."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"Alter_priv"}),(0,r.jsx)(s.td,{children:"Global, Catalog, Db, Table"}),(0,r.jsx)(s.td,{children:"Alter permission. Includes renaming databases/tables, adding/deleting/changing columns, adding/deleting partitions, etc."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"Create_priv"}),(0,r.jsx)(s.td,{children:"Global, Catalog, Db, Table"}),(0,r.jsx)(s.td,{children:"Create permission. Allows creating catalogs, databases, tables, and views."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"Drop_priv"}),(0,r.jsx)(s.td,{children:"Global, Catalog, Db, Table"}),(0,r.jsx)(s.td,{children:"Drop permission. Allows dropping catalogs, databases, tables, and views."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"Usage_priv"}),(0,r.jsx)(s.td,{children:"Resource, Workload Group"}),(0,r.jsx)(s.td,{children:"Usage permission for Resources and Workload Groups."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"Show_view_priv"}),(0,r.jsx)(s.td,{children:"Global, Catalog, Db, Table"}),(0,r.jsx)(s.td,{children:"Execute SHOW CREATE VIEW permission."})]})]})]}),"\n",(0,r.jsx)(s.h3,{id:"roles",children:"Roles"}),"\n",(0,r.jsx)(s.p,{children:"Doris allows creating custom-named roles. Roles can be seen as a collection of permissions. New users can be assigned a role, and they will automatically be granted the permissions of that role. Subsequent changes to the role's permissions will also affect the permissions of all users belonging to that role."}),"\n",(0,r.jsx)(s.h4,{id:"built-in-roles",children:"Built-in Roles"}),"\n",(0,r.jsx)(s.p,{children:"Built-in roles are default roles created by Doris, with default permissions, including operator and admin."}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"operator: Has Admin_priv and Node_priv"}),"\n",(0,r.jsx)(s.li,{children:"admin: Has Admin_priv"}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"users",children:"Users"}),"\n",(0,r.jsxs)(s.p,{children:["In Doris, a ",(0,r.jsx)(s.code,{children:"user_identity"})," uniquely identifies a user. ",(0,r.jsx)(s.code,{children:"user_identity"})," consists of two parts: ",(0,r.jsx)(s.code,{children:"user_name"})," and ",(0,r.jsx)(s.code,{children:"host"}),", where ",(0,r.jsx)(s.code,{children:"username"})," is the username. ",(0,r.jsx)(s.code,{children:"host"})," identifies the host address from which the user connects."]}),"\n",(0,r.jsx)(s.h2,{id:"authorization-mechanism",children:"Authorization Mechanism"}),"\n",(0,r.jsx)(s.p,{children:"Doris's permission design is based on the RBAC (Role-Based Access Control) model, associating users with roles, roles with permissions, and users indirectly with permissions through roles."}),"\n",(0,r.jsx)(s.p,{children:"When a role is deleted, users automatically lose all permissions of that role."}),"\n",(0,r.jsx)(s.p,{children:"When a user and role are unassociated, the user automatically loses all permissions of that role."}),"\n",(0,r.jsx)(s.p,{children:"When a role's permissions are added or deleted, the user's permissions also change."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"\u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510        \u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510         \u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  user1 \u251C\u2500\u2500\u2500\u2500\u252C\u2500\u2500\u2500\u25BA  role1 \u251C\u2500\u2500\u2500\u2500\u252C\u2500\u2500\u2500\u2500\u25BA  priv1 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2502    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n              \u2502                 \u2502\n              \u2502                 \u2502\n              \u2502   \u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u2502\n              \u2502   \u2502  role2 \u251C\u2500\u2500\u2500\u2500\u2524\n\u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2502    \u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  user2 \u251C\u2500\u2500\u2500\u2500\u2518                 \u2502  \u250C\u2500\u25BA  priv2 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                      \u2502  \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                  \u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u2502  \u2502\n           \u250C\u2500\u2500\u2500\u2500\u2500\u2500\u25BA  role3 \u251C\u2500\u2500\u2500\u2500\u2518  \u2502\n           \u2502      \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518       \u2502\n           \u2502                       \u2502\n           \u2502                       \u2502\n\u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502      \u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510       \u2502 \u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  userN \u251C\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u25BA  roleN \u251C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u25BA  privN \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518        \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518         \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,r.jsx)(s.p,{children:"As shown above:"}),"\n",(0,r.jsx)(s.p,{children:"user1 and user2 both have priv1 permission through role1."}),"\n",(0,r.jsx)(s.p,{children:"userN has priv1 permission through role3 and priv2 and privN permissions through roleN, so userN has priv1, priv2, and privN permissions."}),"\n",(0,r.jsx)(s.h3,{id:"notes",children:"Notes"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"For convenience, users can be directly granted permissions. Under the hood, a default role is created for each user, and granting permissions to the user is equivalent to granting permissions to the default role."}),"\n",(0,r.jsx)(s.li,{children:"Default roles cannot be deleted, cannot be assigned to other users, and are automatically deleted when the user is deleted."}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"related-commands",children:"Related Commands"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Grant/assign role: ",(0,r.jsx)(s.a,{href:"../../../sql-manual/sql-statements/account-management/GRANT-TO",children:"GRANT"})]}),"\n",(0,r.jsxs)(s.li,{children:["Revoke/revoke role: ",(0,r.jsx)(s.a,{href:"/docs/dev/sql-manual/sql-statements/account-management/REVOKE-FROM",children:"REVOKE"})]}),"\n",(0,r.jsxs)(s.li,{children:["Create role: ",(0,r.jsx)(s.a,{href:"../../../sql-manual/sql-statements/account-management/CREATE-ROLE",children:"CREATE ROLE"})]}),"\n",(0,r.jsxs)(s.li,{children:["Delete role: ",(0,r.jsx)(s.a,{href:"../../../sql-manual/sql-statements/account-management/DROP-ROLE",children:"DROP ROLE"})]}),"\n",(0,r.jsxs)(s.li,{children:["Modify role: ",(0,r.jsx)(s.a,{href:"../../../sql-manual/sql-statements/account-management/ALTER-ROLE",children:"ALTER ROLE"})]}),"\n",(0,r.jsxs)(s.li,{children:["View current user permissions and roles: ",(0,r.jsx)(s.a,{href:"../../../sql-manual/sql-statements/account-management/SHOW-GRANTS",children:"SHOW GRANTS"})]}),"\n",(0,r.jsxs)(s.li,{children:["View all user permissions and roles: ",(0,r.jsx)(s.a,{href:"../../../sql-manual/sql-statements/account-management/SHOW-GRANTS",children:"SHOW ALL GRANTS"})]}),"\n",(0,r.jsxs)(s.li,{children:["View created roles: ",(0,r.jsx)(s.a,{href:"../../../sql-manual/sql-statements/account-management/SHOW-ROLES",children:"SHOW ROLES"})]}),"\n",(0,r.jsxs)(s.li,{children:["View supported permissions: ",(0,r.jsx)(s.a,{href:"../../../sql-manual/sql-statements/account-management/SHOW-PRIVILEGES",children:"SHOW PRIVILEGES"})]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsx)(s.p,{children:"Here are some examples of using Doris's permission system."}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"Scenario 1"}),"\n",(0,r.jsx)(s.p,{children:"Doris cluster users are divided into administrators (Admin), development engineers (RD), and users (Client). Administrators have all permissions for the entire cluster, mainly responsible for cluster setup, node management, etc. Development engineers are responsible for business modeling, including database and table creation, data import and modification, etc. Users access different databases and tables to retrieve data."}),"\n",(0,r.jsx)(s.p,{children:"In this scenario, administrators can be granted ADMIN or GRANT permissions. RD can be granted CREATE, DROP, ALTER, LOAD, and SELECT permissions for any or specified databases and tables. Client can be granted SELECT permission for any or specified databases and tables. At the same time, different roles can be created to simplify permission management for multiple users."}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"Scenario 2"}),"\n",(0,r.jsx)(s.p,{children:"A cluster has multiple businesses, each business may use one or more datasets. Each business needs to manage its own users. In this scenario, the administrator can create a user with DATABASE-level GRANT permission for each database. This user can only grant permissions for the specified database."}),"\n"]}),"\n"]})]})}function h(e={}){let{wrapper:s}={...(0,t.a)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},250065:function(e,s,n){n.d(s,{Z:function(){return l},a:function(){return a}});var i=n(667294);let r={},t=i.createContext(r);function a(e){let s=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(t.Provider,{value:s},e.children)}}}]);