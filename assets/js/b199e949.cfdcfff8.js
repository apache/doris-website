"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["323756"],{835327:function(e,n,s){s.r(n),s.d(n,{default:()=>h,frontMatter:()=>i,metadata:()=>r,assets:()=>a,toc:()=>o,contentTitle:()=>d});var r=JSON.parse('{"id":"sql-manual/sql-functions/scalar-functions/array-functions/array-sortby","title":"ARRAY_SORTBY","description":"Sort the values array according to the order of a keys array.","source":"@site/versioned_docs/version-4.x/sql-manual/sql-functions/scalar-functions/array-functions/array-sortby.md","sourceDirName":"sql-manual/sql-functions/scalar-functions/array-functions","slug":"/sql-manual/sql-functions/scalar-functions/array-functions/array-sortby","permalink":"/docs/4.x/sql-manual/sql-functions/scalar-functions/array-functions/array-sortby","draft":false,"unlisted":false,"tags":[],"version":"4.x","lastUpdatedAt":1770477659000,"frontMatter":{"title":"ARRAY_SORTBY","language":"en-US","description":"Sort the values array according to the order of a keys array."},"sidebar":"docs","previous":{"title":"ARRAY_SORT","permalink":"/docs/4.x/sql-manual/sql-functions/scalar-functions/array-functions/array-sort"},"next":{"title":"ARRAY_SPLIT","permalink":"/docs/4.x/sql-manual/sql-functions/scalar-functions/array-functions/array-split"}}'),l=s("785893"),c=s("250065");let i={title:"ARRAY_SORTBY",language:"en-US",description:"Sort the values array according to the order of a keys array."},d=void 0,a={},o=[{value:"Function",id:"function",level:2},{value:"Syntax",id:"syntax",level:2},{value:"Parameters",id:"parameters",level:2},{value:"Return value",id:"return-value",level:2},{value:"Usage notes",id:"usage-notes",level:2},{value:"Examples",id:"examples",level:2}];function t(e){let n={code:"code",h2:"h2",li:"li",p:"p",ul:"ul",...(0,c.a)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h2,{id:"function",children:"Function"}),"\n",(0,l.jsxs)(n.p,{children:["Sort the ",(0,l.jsx)(n.code,{children:"values"})," array according to the order of a ",(0,l.jsx)(n.code,{children:"keys"})," array."]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["For example, if ",(0,l.jsx)(n.code,{children:"keys"})," is ",(0,l.jsx)(n.code,{children:"[3, 0, 2]"})," and ",(0,l.jsx)(n.code,{children:"values"})," is ",(0,l.jsx)(n.code,{children:"[5, 7, 8]"}),", after sorting the ",(0,l.jsx)(n.code,{children:"keys"})," become ",(0,l.jsx)(n.code,{children:"[0, 2, 3]"})," and the corresponding ",(0,l.jsx)(n.code,{children:"values"})," become ",(0,l.jsx)(n.code,{children:"[7, 8, 5]"}),"."]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"syntax",children:"Syntax"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"ARRAY_SORTBY(values, keys)"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"ARRAY_SORTBY(lambda, values)"})}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"ARRAY_SORTBY(lambda, values)"})," is equivalent to ",(0,l.jsx)(n.code,{children:"ARRAY_SORTBY(values, ARRAY_MAP(lambda, values))"})]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"parameters",children:"Parameters"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"values"}),": ",(0,l.jsx)(n.code,{children:"ARRAY<T>"}),", the value array to be sorted. ",(0,l.jsx)(n.code,{children:"T"})," supports numeric, boolean, string, datetime, IP, etc. Multi-dimensional arrays are supported, but all array elements (no matter how deeply nested) must be of the supported types."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"keys"}),": ",(0,l.jsx)(n.code,{children:"ARRAY<T>"}),", a key array of the same length as ",(0,l.jsx)(n.code,{children:"values"}),". ",(0,l.jsx)(n.code,{children:"T"})," supports numeric, boolean, string, datetime, IP, etc. Multi-dimensional arrays are supported, but all array elements (no matter how deeply nested) must be of the supported types."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"lambda"}),": a ",(0,l.jsx)(n.code,{children:"lambda"})," expression applied to ",(0,l.jsx)(n.code,{children:"values"})," to produce the ",(0,l.jsx)(n.code,{children:"keys"})," array used for sorting."]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"return-value",children:"Return value"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Returns ",(0,l.jsx)(n.code,{children:"ARRAY<T>"})," of the same type as ",(0,l.jsx)(n.code,{children:"values"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:["An error is thrown when, for any row, the element counts of ",(0,l.jsx)(n.code,{children:"values"})," and ",(0,l.jsx)(n.code,{children:"keys"})," are different."]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"usage-notes",children:"Usage notes"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Stability: ",(0,l.jsx)(n.code,{children:"values"})," are reordered by ascending ",(0,l.jsx)(n.code,{children:"keys"}),". The relative order among equal keys is undefined."]}),"\n",(0,l.jsxs)(n.li,{children:["In higher-order calls, ",(0,l.jsx)(n.code,{children:"keys"})," are computed first by ",(0,l.jsx)(n.code,{children:"ARRAY_MAP"}),", then ",(0,l.jsx)(n.code,{children:"values"})," are sorted by ",(0,l.jsx)(n.code,{children:"keys"}),"."]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["Basic: sort ",(0,l.jsx)(n.code,{children:"values"})," by the ascending order of ",(0,l.jsx)(n.code,{children:"keys"}),"."]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"ARRAY_SORTBY([10,20,30], [3,1,2])"})," -> ",(0,l.jsx)(n.code,{children:"[20,30,10]"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"ARRAY_SORTBY(['a','b','c'], [2,2,1])"})," -> ",(0,l.jsx)(n.code,{children:"['c','a','b']"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["Higher-order: compute ",(0,l.jsx)(n.code,{children:"keys"})," via ",(0,l.jsx)(n.code,{children:"lambda"}),", then sort."]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"ARRAY_SORTBY(x -> x + 1, [3,1,2])"})," -> ",(0,l.jsx)(n.code,{children:"[1,2,3]"})," (with ",(0,l.jsx)(n.code,{children:"keys"})," ",(0,l.jsx)(n.code,{children:"[4,2,3]"}),")"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"ARRAY_SORTBY(x -> x*2 <= 2, [1,2,3])"})," -> ",(0,l.jsx)(n.code,{children:"[1,2,3]"})," (with ",(0,l.jsx)(n.code,{children:"keys"})," ",(0,l.jsx)(n.code,{children:"[true,false,false]"}),")"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["When ",(0,l.jsx)(n.code,{children:"keys"})," or ",(0,l.jsx)(n.code,{children:"values"})," is ",(0,l.jsx)(n.code,{children:"NULL"}),", return ",(0,l.jsx)(n.code,{children:"values"})," unchanged."]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"array_sortby([10,20,30], NULL)"})," -> ",(0,l.jsx)(n.code,{children:"[10, 20, 30]"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"array_sortby(NULL, [2,3])"})," -> ",(0,l.jsx)(n.code,{children:"NULL"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Multi-dimensional array sort: the key sorting rules follow the type of the inner elements."}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"ARRAY_SORTBY(x -> x[1], [[1,2],[0,1]])"})," -> ",(0,l.jsx)(n.code,{children:"[[0, 1], [1, 2]]"})]}),"\n"]}),"\n"]}),"\n"]})]})}function h(e={}){let{wrapper:n}={...(0,c.a)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(t,{...e})}):t(e)}},250065:function(e,n,s){s.d(n,{Z:function(){return d},a:function(){return i}});var r=s(667294);let l={},c=r.createContext(l);function i(e){let n=r.useContext(c);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:i(e.components),r.createElement(c.Provider,{value:n},e.children)}}}]);