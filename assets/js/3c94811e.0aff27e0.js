"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["507695"],{319272:function(e,n,r){r.r(n),r.d(n,{default:()=>h,frontMatter:()=>s,metadata:()=>t,assets:()=>d,toc:()=>c,contentTitle:()=>l});var t=JSON.parse('{"id":"lakehouse/catalogs/bigquery-catalog","title":"BigQuery Catalog","description":"BigQuery Catalog uses the Trino Connector compatibility framework to access BigQuery tables through the BigQuery Connector.","source":"@site/versioned_docs/version-3.x/lakehouse/catalogs/bigquery-catalog.md","sourceDirName":"lakehouse/catalogs","slug":"/lakehouse/catalogs/bigquery-catalog","permalink":"/docs/3.x/lakehouse/catalogs/bigquery-catalog","draft":false,"unlisted":false,"tags":[],"version":"3.x","frontMatter":{"title":"BigQuery Catalog","language":"en"},"sidebar":"docs","previous":{"title":"Delta Lake Catalog","permalink":"/docs/3.x/lakehouse/catalogs/delta-lake-catalog"},"next":{"title":"Kudu Catalog","permalink":"/docs/3.x/lakehouse/catalogs/kudu-catalog"}}'),i=r("785893"),o=r("250065");let s={title:"BigQuery Catalog",language:"en"},l=void 0,d={},c=[{value:"Application Scenarios",id:"application-scenarios",level:2},{value:"Environment Preparation",id:"environment-preparation",level:2},{value:"Compile the BigQuery Connector Plugin",id:"compile-the-bigquery-connector-plugin",level:3},{value:"Deploy the BigQuery Connector",id:"deploy-the-bigquery-connector",level:3},{value:"Configuring Catalog",id:"configuring-catalog",level:2},{value:"Syntax",id:"syntax",level:3},{value:"Supported BigQuery Versions",id:"supported-bigquery-versions",level:3},{value:"Column Type Mapping",id:"column-type-mapping",level:2},{value:"Examples",id:"examples",level:2},{value:"Query Operations",id:"query-operations",level:2}];function a(e){let n={a:"a",blockquote:"blockquote",code:"code",div:"div",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["BigQuery Catalog uses the ",(0,i.jsx)(n.a,{href:"https://doris.apache.org/zh-CN/community/how-to-contribute/trino-connector-developer-guide/",children:"Trino Connector"})," compatibility framework to access BigQuery tables through the BigQuery Connector."]}),"\n",(0,i.jsx)(n.div,{children:(0,i.jsx)(n.p,{children:"This feature is experimental and has been supported since version 3.0.1."})}),"\n",(0,i.jsx)(n.h2,{id:"application-scenarios",children:"Application Scenarios"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Scenario"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Data Integration"}),(0,i.jsx)(n.td,{children:"Read BigQuery data and write it into Doris internal tables."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Data Writeback"}),(0,i.jsx)(n.td,{children:"Not supported."})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"environment-preparation",children:"Environment Preparation"}),"\n",(0,i.jsx)(n.h3,{id:"compile-the-bigquery-connector-plugin",children:"Compile the BigQuery Connector Plugin"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"JDK 17 is required."}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"$ git clone https://github.com/apache/doris-thirdparty.git\n$ cd doris-thirdparty\n$ git checkout trino-435\n$ cd plugin/trino-bigquery\n$ mvn clean install -DskipTest\n"})}),"\n",(0,i.jsxs)(n.p,{children:["After compilation, the ",(0,i.jsx)(n.code,{children:"trino/plugin/trino-bigquery/target/"})," directory will contain the ",(0,i.jsx)(n.code,{children:"trino-bigquery-435"})," folder."]}),"\n",(0,i.jsxs)(n.p,{children:["You can also directly download the precompiled ",(0,i.jsx)(n.a,{href:"https://github.com/apache/doris-thirdparty/releases/download/trino-435-20240724/trino-bigquery-435-20240724.tar.gz",children:"trino-bigquery-435-20240724.tar.gz"})," and extract it."]}),"\n",(0,i.jsx)(n.h3,{id:"deploy-the-bigquery-connector",children:"Deploy the BigQuery Connector"}),"\n",(0,i.jsxs)(n.p,{children:["Place the ",(0,i.jsx)(n.code,{children:"trino-bigquery-435/"})," directory into the ",(0,i.jsx)(n.code,{children:"connectors/"})," directory of the deployment paths for all FE and BE nodes. (If the directory does not exist, you can create it manually.)"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-text",children:"\u251C\u2500\u2500 bin\n\u251C\u2500\u2500 conf\n\u251C\u2500\u2500 connectors\n\u2502   \u251C\u2500\u2500 trino-bigquery-435\n...\n"})}),"\n",(0,i.jsx)(n.p,{children:"After deployment, it is recommended to restart the FE and BE nodes to ensure the Connector is loaded correctly."}),"\n",(0,i.jsx)(n.h2,{id:"configuring-catalog",children:"Configuring Catalog"}),"\n",(0,i.jsx)(n.h3,{id:"syntax",children:"Syntax"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"CREATE CATALOG [IF NOT EXISTS] catalog_name\nPROPERTIES (\n    'type' = 'trino-connector', -- required\n    'trino.connector.name' = 'bigquery', -- required\n    {TrinoProperties},\n    {CommonProperties}\n);\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"{TrinoProperties}"})}),"\n",(0,i.jsxs)(n.p,{children:["The TrinoProperties section is used to specify properties that will be passed to the Trino Connector. These properties use the ",(0,i.jsx)(n.code,{children:"trino."})," prefix. In theory, all properties supported by Trino are also supported here. For more information about BigQuery, refer to the ",(0,i.jsx)(n.a,{href:"https://trino.io/docs/435/connector/bigquery.html",children:"Trino documentation"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"[CommonProperties]"})}),"\n",(0,i.jsxs)(n.p,{children:["The CommonProperties section is used to specify general properties. Please refer to the ",(0,i.jsx)(n.a,{href:"/docs/3.x/lakehouse/catalog-overview",children:"Catalog Overview"}),' under the "Common Properties" section.']}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"supported-bigquery-versions",children:"Supported BigQuery Versions"}),"\n",(0,i.jsxs)(n.p,{children:["For more information about BigQuery properties, refer to the ",(0,i.jsx)(n.a,{href:"https://trino.io/docs/current/connector/bigquery.html",children:"Trino documentation"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"column-type-mapping",children:"Column Type Mapping"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"BigQuery Type"}),(0,i.jsx)(n.th,{children:"Trino Type"}),(0,i.jsx)(n.th,{children:"Doris Type"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"boolean"}),(0,i.jsx)(n.td,{children:"boolean"}),(0,i.jsx)(n.td,{children:"boolean"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"int64"}),(0,i.jsx)(n.td,{children:"bigint"}),(0,i.jsx)(n.td,{children:"bigint"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"float64"}),(0,i.jsx)(n.td,{children:"double"}),(0,i.jsx)(n.td,{children:"double"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"numeric"}),(0,i.jsx)(n.td,{children:"decimal(P, S)"}),(0,i.jsx)(n.td,{children:"decimal(P, S)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"bignumric"}),(0,i.jsx)(n.td,{children:"decimal(P, S)"}),(0,i.jsx)(n.td,{children:"decimal(P, S)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"varchar"}),(0,i.jsx)(n.td,{children:"string"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"bytes"}),(0,i.jsx)(n.td,{children:"varbinary"}),(0,i.jsx)(n.td,{children:"string"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"date"}),(0,i.jsx)(n.td,{children:"date"}),(0,i.jsx)(n.td,{children:"date"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"datetime"}),(0,i.jsx)(n.td,{children:"timestamp(6)"}),(0,i.jsx)(n.td,{children:"datetime(6)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"time"}),(0,i.jsx)(n.td,{children:"time(6)"}),(0,i.jsx)(n.td,{children:"string"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"timestamp"}),(0,i.jsx)(n.td,{children:"timestamp with time zone(6)"}),(0,i.jsx)(n.td,{children:"datetime(6)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"geography"}),(0,i.jsx)(n.td,{children:"varchar"}),(0,i.jsx)(n.td,{children:"string"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"array"}),(0,i.jsx)(n.td,{children:"array"}),(0,i.jsx)(n.td,{children:"array"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"map"}),(0,i.jsx)(n.td,{children:"map"}),(0,i.jsx)(n.td,{children:"map"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"struct"}),(0,i.jsx)(n.td,{children:"row"}),(0,i.jsx)(n.td,{children:"struct"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"CREATE CATALOG bigquery_catalog PROPERTIES (\n    'type' = 'trino-connector',\n    'trino.connector.name' = 'bigquery',\n    'trino.bigquery.project-id' = 'your-bigquery-project-id',\n    'trino.bigquery.credentials-file' = '/path/to/application_default_credentials.json',\n);\n"})}),"\n",(0,i.jsx)(n.h2,{id:"query-operations",children:"Query Operations"}),"\n",(0,i.jsx)(n.p,{children:"After configuring the Catalog, you can query the table data in the Catalog using the following methods:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"-- 1. switch to catalog, use database and query\nSWITCH bigquery_ctl;\nUSE bigquery_db;\nSELECT * FROM bigquery_tbl LIMIT 10;\n\n-- 2. use bigquery database directly\nUSE bigquery_ctl.bigquery_db;\nSELECT * FROM bigquery_tbl LIMIT 10;\n\n-- 3. use full qualified name to query\nSELECT * FROM bigquery_ctl.bigquery_db.bigquery_tbl LIMIT 10;\n"})})]})}function h(e={}){let{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},250065:function(e,n,r){r.d(n,{Z:function(){return l},a:function(){return s}});var t=r(667294);let i={},o=t.createContext(i);function s(e){let n=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);