"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["684159"],{868092:function(e,n,s){s.r(n),s.d(n,{default:()=>h,frontMatter:()=>i,metadata:()=>t,assets:()=>c,toc:()=>o,contentTitle:()=>r});var t=JSON.parse('{"id":"sql-manual/sql-functions/scalar-functions/json-functions/json-insert","title":"JSON_INSERT","description":"The JSONINSERT function is used to insert data into JSON and return the result.","source":"@site/versioned_docs/version-4.x/sql-manual/sql-functions/scalar-functions/json-functions/json-insert.md","sourceDirName":"sql-manual/sql-functions/scalar-functions/json-functions","slug":"/sql-manual/sql-functions/scalar-functions/json-functions/json-insert","permalink":"/docs/4.x/sql-manual/sql-functions/scalar-functions/json-functions/json-insert","draft":false,"unlisted":false,"tags":[],"version":"4.x","lastUpdatedAt":1770477659000,"frontMatter":{"title":"JSON_INSERT","language":"en","description":"The JSONINSERT function is used to insert data into JSON and return the result."},"sidebar":"docs","previous":{"title":"JSON_HASH","permalink":"/docs/4.x/sql-manual/sql-functions/scalar-functions/json-functions/json-hash"},"next":{"title":"JSON_KEYS","permalink":"/docs/4.x/sql-manual/sql-functions/scalar-functions/json-functions/json-keys"}}'),l=s("785893"),a=s("250065");let i={title:"JSON_INSERT",language:"en",description:"The JSONINSERT function is used to insert data into JSON and return the result."},r=void 0,c={},o=[{value:"Description",id:"description",level:2},{value:"Syntax",id:"syntax",level:2},{value:"Parameters",id:"parameters",level:2},{value:"Return Value",id:"return-value",level:2},{value:"Usage Notes",id:"usage-notes",level:2},{value:"Examples",id:"examples",level:2}];function d(e){let n={a:"a",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,a.a)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h2,{id:"description",children:"Description"}),"\n",(0,l.jsxs)(n.p,{children:["The ",(0,l.jsx)(n.code,{children:"JSON_INSERT"})," function is used to insert data into JSON and return the result."]}),"\n",(0,l.jsx)(n.h2,{id:"syntax",children:"Syntax"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"JSON_INSERT (<json_object>, <path>,  <value>[, <path>,  <value>, ...])\n"})}),"\n",(0,l.jsx)(n.h2,{id:"parameters",children:"Parameters"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"<json_object>"}),": JSON type expression, the target to be modified."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"<path>"}),": String type expression, specifies the path where the value is to be inserted"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"<value>"}),": JSON type or other types supported by ",(0,l.jsx)(n.a,{href:"/docs/4.x/sql-manual/sql-functions/scalar-functions/json-functions/to-json",children:(0,l.jsx)(n.code,{children:"TO_JSON"})}),", the value to be inserted."]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"return-value",children:"Return Value"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Nullable(JSON)"})," Returns the modified JSON object"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"usage-notes",children:"Usage Notes"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Note that path-value pairs are evaluated from left to right."}),"\n",(0,l.jsxs)(n.li,{children:["If the value pointed to by ",(0,l.jsx)(n.code,{children:"<path>"})," already exists in the JSON object, it will have no effect."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"<path>"})," cannot contain wildcards, if it contains wildcards an error will be reported."]}),"\n",(0,l.jsxs)(n.li,{children:["If ",(0,l.jsx)(n.code,{children:"<path>"})," contains multiple levels of paths, all paths except the last level must exist in the JSON object."]}),"\n",(0,l.jsxs)(n.li,{children:["If ",(0,l.jsx)(n.code,{children:"<path>"})," points to an array member element, but the object is not actually an array, then the object will be converted to the first member of the array, and then processed as a normal array."]}),"\n",(0,l.jsxs)(n.li,{children:["When ",(0,l.jsx)(n.code,{children:"<json_object>"})," or ",(0,l.jsx)(n.code,{children:"<path>"})," is NULL, NULL will be returned. If ",(0,l.jsx)(n.code,{children:"<value>"})," is NULL, a JSON null value will be inserted."]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Path-value pairs are evaluated from left to right\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"select json_insert('{}', '$.k', json_parse('{}'), '$.k.k2', 123);\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:"+-----------------------------------------------------------+\n| json_insert('{}', '$.k', json_parse('{}'), '$.k.k2', 123) |\n+-----------------------------------------------------------+\n| {\"k\":{\"k2\":123}}                                          |\n+-----------------------------------------------------------+\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["Value pointed to by ",(0,l.jsx)(n.code,{children:"<path>"})," already exists in the JSON object\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:'select json_insert(\'{"k": 1}\', "$.k", 2);\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:'+-----------------------------------+\n| json_insert(\'{"k": 1}\', "$.k", 2) |\n+-----------------------------------+\n| {"k":1}                           |\n+-----------------------------------+\n'})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"<path>"})," cannot contain wildcards\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:'select json_insert(\'{"k": 1}\', "$.*", 2);\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:"ERROR 1105 (HY000): errCode = 2, detailMessage = [INVALID_ARGUMENT] In this situation, path expressions may not contain the * and ** tokens or an array range, argument index: 1, row index: 0\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["Cannot create multi-level paths\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"select json_insert('{}', '$.k1.k2.k3', 123);\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:"+--------------------------------------+\n| json_insert('{}', '$.k1.k2.k3', 123) |\n+--------------------------------------+\n| {}                                   |\n+--------------------------------------+\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["Automatic conversion to array\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"select json_insert('{\"k\": \"v\"}', '$[1]', 123);\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:'+----------------------------------------+\n| json_insert(\'{"k": "v"}\', \'$[1]\', 123) |\n+----------------------------------------+\n| [{"k": "v"}, 123]                      |\n+----------------------------------------+\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"select json_insert('{\"k\": \"v\"}', '$.k[1]', 123);\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:'+------------------------------------------+\n| json_insert(\'{"k": "v"}\', \'$.k[1]\', 123) |\n+------------------------------------------+\n| {"k": ["v", 123]}                        |\n+------------------------------------------+\n'})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["NULL parameters\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"select json_insert(NULL, '$[1]', 123);\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:"+--------------------------------+\n| json_insert(NULL, '$[1]', 123) |\n+--------------------------------+\n| NULL                           |\n+--------------------------------+\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:'select json_insert(\'{"k": "v"}\', NULL, 123);\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:'+--------------------------------------+\n| json_insert(\'{"k": "v"}\', NULL, 123) |\n+--------------------------------------+\n| NULL                                 |\n+--------------------------------------+\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"select json_insert('{\"k\": \"v\"}', '$.k[1]', NULL);\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:'+-------------------------------------------+\n| json_insert(\'{"k": "v"}\', \'$.k[1]\', NULL) |\n+-------------------------------------------+\n| {"k": ["v", null]}                        |\n+-------------------------------------------+\n'})}),"\n"]}),"\n"]})]})}function h(e={}){let{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},250065:function(e,n,s){s.d(n,{Z:function(){return r},a:function(){return i}});var t=s(667294);let l={},a=t.createContext(l);function i(e){let n=t.useContext(a);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:i(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);