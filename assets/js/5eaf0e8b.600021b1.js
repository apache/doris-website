"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["244039"],{295457:function(e,n,r){r.r(n),r.d(n,{default:()=>u,frontMatter:()=>i,metadata:()=>a,assets:()=>c,toc:()=>d,contentTitle:()=>l});var a=JSON.parse('{"id":"sql-manual/sql-functions/scalar-functions/array-functions/array-first","title":"ARRAY_FIRST","description":"array_first","source":"@site/docs/sql-manual/sql-functions/scalar-functions/array-functions/array-first.md","sourceDirName":"sql-manual/sql-functions/scalar-functions/array-functions","slug":"/sql-manual/sql-functions/scalar-functions/array-functions/array-first","permalink":"/docs/dev/sql-manual/sql-functions/scalar-functions/array-functions/array-first","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"ARRAY_FIRST","language":"en"},"sidebar":"docs","previous":{"title":"ARRAY_FILTER","permalink":"/docs/dev/sql-manual/sql-functions/scalar-functions/array-functions/array-filter"},"next":{"title":"ARRAY_FIRST_INDEX","permalink":"/docs/dev/sql-manual/sql-functions/scalar-functions/array-functions/array-first-index"}}'),s=r("785893"),t=r("250065");let i={title:"ARRAY_FIRST",language:"en"},l=void 0,c={},d=[{value:"array_first",id:"array_first",level:2},{value:"Description",id:"description",level:3},{value:"Syntax",id:"syntax",level:3},{value:"Parameters",id:"parameters",level:3},{value:"Return Value",id:"return-value",level:3},{value:"Keywords",id:"keywords",level:3}];function o(e){let n={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",t:"t",ul:"ul",version:"version",...(0,t.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"array_first",children:"array_first"}),"\n",(0,s.jsx)(n.version,{since:"2.0.0",children:"\n"}),"\n",(0,s.jsx)(n.h3,{id:"description",children:"Description"}),"\n",(0,s.jsx)(n.p,{children:"Returns the first element in the array that satisfies the lambda expression condition. The function applies the lambda expression to elements in the array, finds the first element that satisfies the condition and returns it."}),"\n",(0,s.jsx)(n.h3,{id:"syntax",children:"Syntax"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"array_first(lambda, array1, ...)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"parameters",children:"Parameters"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"lambda"}),"\uFF1Alambda expression used to evaluate array elements, returns true/false or expressions that can be converted to boolean values"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"array1, ..."}),"\uFF1Aone or more ARRAY",(0,s.jsx)(n.t,{children:" type parameters"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Supported types for T:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Numeric types: TINYINT, SMALLINT, INT, BIGINT, LARGEINT, FLOAT, DOUBLE, DECIMAL"}),"\n",(0,s.jsx)(n.li,{children:"String types: CHAR, VARCHAR, STRING"}),"\n",(0,s.jsx)(n.li,{children:"Date and time types: DATE, DATETIME, DATEV2, DATETIMEV2"}),"\n",(0,s.jsx)(n.li,{children:"Boolean type: BOOLEAN"}),"\n",(0,s.jsx)(n.li,{children:"IP types: IPV4, IPV6"}),"\n",(0,s.jsx)(n.li,{children:"Complex data types: ARRAY, MAP, STRUCT"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"return-value",children:"Return Value"}),"\n",(0,s.jsx)(n.p,{children:"Return type: T"}),"\n",(0,s.jsx)(n.p,{children:"Return value meaning:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Returns the first element in the array that satisfies the lambda expression condition"}),"\n",(0,s.jsx)(n.li,{children:"NULL: if the array is empty or no element satisfies the condition"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Usage notes:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"The number of parameters in the lambda expression must match the number of array parameters"}),"\n",(0,s.jsx)(n.li,{children:"All input arrays must have the same length"}),"\n",(0,s.jsx)(n.li,{children:"Supports searching in multi-arrays and complex type arrays"}),"\n",(0,s.jsx)(n.li,{children:"Empty arrays return NULL"}),"\n",(0,s.jsx)(n.li,{children:"Does not support NULL input parameters"}),"\n",(0,s.jsx)(n.li,{children:"Lambda can use any scalar expression, but cannot use aggregate functions"}),"\n",(0,s.jsx)(n.li,{children:"Lambda expressions can call other higher-order functions, but the return types must be compatible"}),"\n",(0,s.jsx)(n.li,{children:"For null values in array elements: null elements will be passed to the lambda expression for processing, and lambda can check for null values"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Query Examples:"})}),"\n",(0,s.jsx)(n.p,{children:"Find the first element greater than or equal to 3 in a floating-point array:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"SELECT array_first(x -> x >= 3, [1.1, 2.2, 3.3, 4.4, 5.5]);\n+-----------------------------------------------------+\n| array_first(x -> x >= 3, [1.1, 2.2, 3.3, 4.4, 5.5]) |\n+-----------------------------------------------------+\n|                                                 3.3 |\n+-----------------------------------------------------+\n"})}),"\n",(0,s.jsx)(n.p,{children:"Find the first element with length greater than 2 in a string array:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"SELECT array_first(x -> length(x) > 2, ['a', 'bb', 'ccc', 'dddd', 'eeeee']);\n+----------------------------------------------------------------------+\n| array_first(x -> length(x) > 2, ['a', 'bb', 'ccc', 'dddd', 'eeeee']) |\n+----------------------------------------------------------------------+\n| ccc                                                                  |\n+----------------------------------------------------------------------+\n"})}),"\n",(0,s.jsx)(n.p,{children:"Empty array returns NULL:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"SELECT array_first(x -> x > 0, []);\n+-------------------------------------+\n| array_first(x -> x > 0, [])        |\n+-------------------------------------+\n| NULL                                |\n+-------------------------------------+\n"})}),"\n",(0,s.jsx)(n.p,{children:"NULL input parameter will error:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"SELECT array_first(x -> x > 2, NULL);\nERROR 1105 (HY000): errCode = 2, detailMessage = lambda argument must be array but is NULL\n\nSELECT array_first(NULL);\nERROR 1105 (HY000): errCode = 2, detailMessage = Can not build function: 'array_first', expression: array_first(NULL), The 1st arg of array_filter must be lambda but is NULL\n"})}),"\n",(0,s.jsx)(n.p,{children:"Array containing null values, lambda can check for null:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"SELECT array_first(x -> x is not null, [null, 1, null, 3, null, 5]);\n+--------------------------------------------------------------+\n| array_first(x -> x is not null, [null, 1, null, 3, null, 5]) |\n+--------------------------------------------------------------+\n|                                                            1 |\n+--------------------------------------------------------------+\n"})}),"\n",(0,s.jsx)(n.p,{children:"Multi-array search, find the first element where the first array is greater than the second array:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"SELECT array_first((x, y) -> x > y, [1, 2, 3, 4, 5], [1.1, 2.2, 3.3, 4.4, 5.5]);\n+--------------------------------------------------------------------------+\n| array_first((x, y) -> x > y, [1, 2, 3, 4, 5], [1.1, 2.2, 3.3, 4.4, 5.5]) |\n+--------------------------------------------------------------------------+\n|                                                                     NULL |\n+--------------------------------------------------------------------------+\n"})}),"\n",(0,s.jsx)(n.p,{children:"Complex type examples:"}),"\n",(0,s.jsx)(n.p,{children:"Nested array search, find the first sub-array with length greater than 2:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"SELECT array_first(x -> size(x) > 2, [[1,2],[3,4,5],[6],[7,8,9,10]]);\n+---------------------------------------------------------------+\n| array_first(x -> size(x) > 2, [[1,2],[3,4,5],[6],[7,8,9,10]]) |\n+---------------------------------------------------------------+\n| [3, 4, 5]                                                     |\n+---------------------------------------------------------------+\n"})}),"\n",(0,s.jsx)(n.p,{children:"Map type search, find the first element where the value with key 'a' is greater than 10:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"SELECT array_first(x -> x['a'] > 10, [{'a':5}, {'a':15}, {'a':20}]);\n+---------------------------------------------------------------+\n| array_first(x -> x['a'] > 10, [{'a':5}, {'a':15}, {'a':20}]) |\n+---------------------------------------------------------------+\n| {\"a\":15}                                                      |\n+---------------------------------------------------------------+\n"})}),"\n",(0,s.jsx)(n.p,{children:"Error when parameter count is wrong:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"SELECT array_first(x -> x > 0, [1,2,3], [4,5,6], [7,8,9]);\nERROR 1105 (HY000): errCode = 2, detailMessage = lambda x -> (x > 0) arguments' size is not equal parameters' size\n"})}),"\n",(0,s.jsx)(n.p,{children:"Error when the number of parameters in lambda expression doesn't match the number of array parameters:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"SELECT array_first((x, y) -> x > y, [1,2,3], [4,5]);\nERROR 1105 (HY000): errCode = 2, detailMessage = (10.16.10.6)[INVALID_ARGUMENT]in array map function, the input column size are not equal completely, nested column data rows 1st size is 3, 2th size is 2.\n"})}),"\n",(0,s.jsx)(n.p,{children:"Error when passing non-array type:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"SELECT array_first(x -> x > 0, 'not_an_array');\nERROR 1105 (HY000): errCode = 2, detailMessage = lambda argument must be array but is 'not_an_array'\n"})}),"\n",(0,s.jsx)(n.h3,{id:"keywords",children:"Keywords"}),"\n",(0,s.jsx)(n.p,{children:"ARRAY, FIRST, ARRAY_FIRST"})]})}function u(e={}){let{wrapper:n}={...(0,t.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},250065:function(e,n,r){r.d(n,{Z:function(){return l},a:function(){return i}});var a=r(667294);let s={},t=a.createContext(s);function i(e){let n=a.useContext(t);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),a.createElement(t.Provider,{value:n},e.children)}}}]);