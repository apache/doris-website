"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["434479"],{6798:function(e,n,r){r.r(n),r.d(n,{default:()=>h,frontMatter:()=>l,metadata:()=>t,assets:()=>c,toc:()=>o,contentTitle:()=>i});var t=JSON.parse('{"id":"sql-manual/sql-functions/scalar-functions/string-functions/regexp-extract-or-null","title":"REGEXP_EXTRACT_OR_NULL","description":"Description","source":"@site/docs/sql-manual/sql-functions/scalar-functions/string-functions/regexp-extract-or-null.md","sourceDirName":"sql-manual/sql-functions/scalar-functions/string-functions","slug":"/sql-manual/sql-functions/scalar-functions/string-functions/regexp-extract-or-null","permalink":"/docs/dev/sql-manual/sql-functions/scalar-functions/string-functions/regexp-extract-or-null","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"REGEXP_EXTRACT_OR_NULL","language":"en"},"sidebar":"docs","previous":{"title":"REGEXP_EXTRACT_ALL","permalink":"/docs/dev/sql-manual/sql-functions/scalar-functions/string-functions/regexp-extract-all"},"next":{"title":"REGEXP_REPLACE","permalink":"/docs/dev/sql-manual/sql-functions/scalar-functions/string-functions/regexp-replace"}}'),s=r("785893"),a=r("250065");let l={title:"REGEXP_EXTRACT_OR_NULL",language:"en"},i=void 0,c={},o=[{value:"Description",id:"description",level:2},{value:"Syntax",id:"syntax",level:2},{value:"Parameters",id:"parameters",level:2},{value:"Return Value",id:"return-value",level:2},{value:"Example",id:"example",level:2}];function d(e){let n={a:"a",admonition:"admonition",code:"code",h2:"h2",p:"p",pattern:"pattern",pos:"pos",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,a.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"description",children:"Description"}),"\n",(0,s.jsx)(n.p,{children:"Extract the first substring that matches the target regular expression pattern from the text string, and extract a specific group from it based on the expression group index."}),"\n",(0,s.jsx)(n.p,{children:"It should be noted that when handling character set matching, Utf-8 standard character classes should be used. This ensures that functions can correctly identify and process various characters from different languages."}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsx)(n.p,{children:"Support since Apache Doris 3.0.2"})}),"\n",(0,s.jsx)(n.p,{children:"If the 'pattern' is not allowed regexp regular,throw error"}),"\n",(0,s.jsxs)(n.p,{children:["Support character match classes : ",(0,s.jsx)(n.a,{href:"https://github.com/google/re2/wiki/Syntax",children:"https://github.com/google/re2/wiki/Syntax"})]}),"\n",(0,s.jsx)(n.h2,{id:"syntax",children:"Syntax"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"REGEXP_EXTRACT_OR_NULL(<str>, <pattern>, <pos>)\n"})}),"\n",(0,s.jsx)(n.h2,{id:"parameters",children:"Parameters"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Parameter"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"<str>"})}),(0,s.jsxs)(n.td,{children:["A string parameter. It represents the text string in which the regular expression matching will be performed. This string can contain any combination of characters, and the function will search within it for substrings that match the ",(0,s.jsx)(n.pattern,{children:"."})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"<pattern>"})}),(0,s.jsx)(n.td,{children:"A string parameter. It is the target regular expression pattern. This pattern can include various regular expression metacharacters and character classes, which precisely define the rules for the substring to be matched"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"<pos>"})}),(0,s.jsxs)(n.td,{children:["An integer parameter. It indicates the index of the expression group to be extracted. The indexing starts from 1. If ",(0,s.jsxs)(n.pos,{children:[" is set to 0, the entire first matching substring will be returned. If ",(0,s.jsx)(n.pos,{children:" is a negative number or exceeds the number of expression groups in the pattern, the function will return NULL."})]})]})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"return-value",children:"Return Value"}),"\n",(0,s.jsxs)(n.p,{children:["Return a string type, with the result being the part that matches ",(0,s.jsx)(n.code,{children:"<pattern>"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["If the input ",(0,s.jsx)(n.code,{children:"<pos>"})," is 0, return the entire first matching substring.\nIf the input ",(0,s.jsx)(n.code,{children:"<pos>"})," is invalid (negative or exceeds the number of expression groups), return NULL.\nIf the regular expression fails to match, return NULL.\nIf the ",(0,s.jsx)(n.code,{children:"<pos>"})," < 0,return NULL;\nIf the ",(0,s.jsx)(n.code,{children:"pos"})," > the length of ",(0,s.jsx)(n.code,{children:"<str>"}),",return NULL;"]}),"\n",(0,s.jsx)(n.h2,{id:"example",children:"Example"}),"\n",(0,s.jsx)(n.p,{children:"Extracting a specific group from a match. Explanation: The regular expression ([[:lower:]]+)C([[:lower:]]+) looks for sequences of one or more lowercase letters separated by 'C'. The group with index 1 corresponds to the first sequence of lowercase letters, so 'b' is returned."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"SELECT REGEXP_EXTRACT_OR_NULL('123AbCdExCx', '([[:lower:]]+)C([[:lower:]]+)', 1);\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",children:"+---------------------------------------------------------------------------+\n| REGEXP_EXTRACT_OR_NULL('123AbCdExCx', '([[:lower:]]+)C([[:lower:]]+)', 1) |\n+---------------------------------------------------------------------------+\n| b                                                                         |\n+---------------------------------------------------------------------------+\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Returning the entire matched substring.When ",(0,s.jsx)(n.pos,{children:" is 0, the whole first substring that matches the pattern is returned."})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"SELECT REGEXP_EXTRACT_OR_NULL('123AbCdExCx', '([[:lower:]]+)C([[:lower:]]+)', 0);\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",children:"+---------------------------------------------------------------------------+\n| REGEXP_EXTRACT_OR_NULL('123AbCdExCx', '([[:lower:]]+)C([[:lower:]]+)', 0) |\n+---------------------------------------------------------------------------+\n| bCd                                                                       |\n+---------------------------------------------------------------------------+\n"})}),"\n",(0,s.jsx)(n.p,{children:"An invalid group index.Since the pattern has only 2 groups, an index of 5 is out of range, so NULL is returned."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"SELECT REGEXP_EXTRACT_OR_NULL('123AbCdExCx', '([[:lower:]]+)C([[:lower:]]+)', 5);\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",children:"+---------------------------------------------------------------------------+\n| REGEXP_EXTRACT_OR_NULL('123AbCdExCx', '([[:lower:]]+)C([[:lower:]]+)', 5) |\n+---------------------------------------------------------------------------+\n| NULL                                                                      |\n+---------------------------------------------------------------------------+\n"})}),"\n",(0,s.jsx)(n.p,{children:"A non - matching regular expression.There is no part of the string 'AbCdE' that fully matches the pattern"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"SELECT REGEXP_EXTRACT_OR_NULL('AbCdE', '([[:lower:]]+)C([[:upper:]]+)', 1);\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",children:"+---------------------------------------------------------------------+\n| REGEXP_EXTRACT_OR_NULL('AbCdE', '([[:lower:]]+)C([[:upper:]]+)', 1) |\n+---------------------------------------------------------------------+\n| NULL                                                                |\n+---------------------------------------------------------------------+\n"})}),"\n",(0,s.jsx)(n.p,{children:"Chinese character matching.The pattern (\\p{Han}+)(.+) first matches one or more Chinese characters and then any remaining characters. The group with index 2 represents the non - Chinese part of the string after the Chinese characters."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"select REGEXP_EXTRACT_OR_NULL('\u8FD9\u662F\u4E00\u6BB5\u4E2D\u6587 This is a passage in English 1234567', '(\\\\p{Han}+)(.+)', 2);\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",children:"+---------------------------------------------------------------------------------------------------------+\n| REGEXP_EXTRACT_OR_NULL('\u8FD9\u662F\u4E00\u6BB5\u4E2D\u6587 This is a passage in English 1234567', '(\\\\p{Han}+)(.+)', 2)       |\n+---------------------------------------------------------------------------------------------------------+\n|  This is a passage in English 1234567                                                                   |\n+---------------------------------------------------------------------------------------------------------+\n"})}),"\n",(0,s.jsx)(n.p,{children:"Inserting data into a table and performing extraction"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"\nCREATE TABLE test_regexp_extract_or_null (\n    id INT,\n    text_column VARCHAR(255),\n    pattern_column VARCHAR(255),\n    position_column INT\n) PROPERTIES (\"replication_num\"=\"1\");\n\nINSERT INTO test_regexp_extract_or_null VALUES\n(1, 'abc123def', '([a-z]+)([0-9]+)([a-z]+)', 2),\n(2, 'Hello World', '([A-Z][a-z]+) ([A-Z][a-z]+)', 0),\n(3, '123-456-789', '([0-9]{3})-([0-9]{3})-([0-9]{3})', 3),\n(4, 'example@example.com', '([a-z]+)@([a-z]+)\\\\.([a-z]+)', 1),\n(5, '\u6D4B\u8BD5\u6587\u672C test text', '(\\\\p{Han}+) (.+)', 1);\n\nSELECT id, REGEXP_EXTRACT_OR_NULL(text_column, pattern_column, position_column) AS extracted_result\nFROM test_regexp_extract_or_null\nORDER BY id;\n\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",children:"+------+-----------------+\n| id   | extracted_result|\n+------+-----------------+\n|    1 | 123             |\n|    2 | Hello World     |\n|    3 | 789             |\n|    4 | example         |\n|    5 | \u6D4B\u8BD5\u6587\u672C          |\n+------+-----------------+\n"})}),"\n",(0,s.jsx)(n.p,{children:"Emoji  case"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"SELECT regexp_extract_or_null('\uD83D\uDE00\uD83D\uDE0A\uD83D\uDE0E', '\uD83D\uDE00|\uD83D\uDE0A|\uD83D\uDE0E',0);\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",children:"+------------------------------------------------------------+\n| regexp_extract_or_null('\uD83D\uDE00\uD83D\uDE0A\uD83D\uDE0E', '\uD83D\uDE00|\uD83D\uDE0A|\uD83D\uDE0E',0)           |\n+------------------------------------------------------------+\n| \uD83D\uDE00                                                          |\n+------------------------------------------------------------+\n"})}),"\n",(0,s.jsx)(n.p,{children:"'str' is NULL,return NULL"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"SELECT REGEXP_EXTRACT_OR_NULL(NULL, '([a-z]+)', 1);\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",children:"+---------------------------------------------+\n| REGEXP_EXTRACT_OR_NULL(NULL, '([a-z]+)', 1) |\n+---------------------------------------------+\n| NULL                                        |\n+---------------------------------------------+\n"})}),"\n",(0,s.jsx)(n.p,{children:"'pattern' is NULL,return NULL"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"SELECT REGEXP_EXTRACT_OR_NULL('Hello World', NULL, 1);\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",children:"+------------------------------------------------+\n| REGEXP_EXTRACT_OR_NULL('Hello World', NULL, 1) |\n+------------------------------------------------+\n| NULL                                           |\n+------------------------------------------------+\n"})}),"\n",(0,s.jsx)(n.p,{children:"'pos' is NULL ,return NULL"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"SELECT REGEXP_EXTRACT_OR_NULL('Hello World', '([a-z]+)', NULL);\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",children:"+---------------------------------------------------------+\n| REGEXP_EXTRACT_OR_NULL('Hello World', '([a-z]+)', NULL) |\n+---------------------------------------------------------+\n| NULL                                                    |\n+---------------------------------------------------------+\n"})}),"\n",(0,s.jsx)(n.p,{children:"ALL parameters are NULL,return NULL;"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"SELECT REGEXP_EXTRACT_OR_NULL(NULL,NULL,NULL);\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",children:"+----------------------------------------+\n| REGEXP_EXTRACT_OR_NULL(NULL,NULL,NULL) |\n+----------------------------------------+\n| NULL                                   |\n+----------------------------------------+\n"})}),"\n",(0,s.jsxs)(n.p,{children:["If the ",(0,s.jsx)(n.code,{children:"pattern"})," is not allowed regexp regular,throw error;"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"mysql> SELECT REGEXP_EXTRACT_OR_NULL('123AbCdExCx', '([[:lower:]]+)C([[]ower:]]+)', 1);\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",children:"ERROR 1105 (HY000): errCode = 2, detailMessage = (10.16.10.2)[INVALID_ARGUMENT]Could not compile regexp pattern: ([[:lower:]]+)C([[:lower:]+)\nError: missing ]: [[:lower:]+)\n"})})]})}function h(e={}){let{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},250065:function(e,n,r){r.d(n,{Z:function(){return i},a:function(){return l}});var t=r(667294);let s={},a=t.createContext(s);function l(e){let n=t.useContext(a);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);