"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["2342"],{164605:function(e,t,n){n.r(t),n.d(t,{default:()=>c,frontMatter:()=>i,metadata:()=>s,assets:()=>o,toc:()=>l,contentTitle:()=>u});var s=JSON.parse('{"id":"sql-manual/sql-functions/scalar-functions/date-time-functions/quarters-sub","title":"QUARTERS_SUB","description":"The QUARTERSSUB function is used to subtract or add a specified number of quarters (1 quarter = 3 months) to a specified datetime value and returns ","source":"@site/versioned_docs/version-4.x/sql-manual/sql-functions/scalar-functions/date-time-functions/quarters-sub.md","sourceDirName":"sql-manual/sql-functions/scalar-functions/date-time-functions","slug":"/sql-manual/sql-functions/scalar-functions/date-time-functions/quarters-sub","permalink":"/docs/4.x/sql-manual/sql-functions/scalar-functions/date-time-functions/quarters-sub","draft":false,"unlisted":false,"tags":[],"version":"4.x","lastUpdatedAt":1770477659000,"frontMatter":{"title":"QUARTERS_SUB","language":"en","description":"The QUARTERSSUB function is used to subtract or add a specified number of quarters (1 quarter = 3 months) to a specified datetime value and returns "},"sidebar":"docs","previous":{"title":"QUARTERS_ADD","permalink":"/docs/4.x/sql-manual/sql-functions/scalar-functions/date-time-functions/quarters-add"},"next":{"title":"SEC_TO_TIME","permalink":"/docs/4.x/sql-manual/sql-functions/scalar-functions/date-time-functions/sec-to-time"}}'),r=n("785893"),a=n("250065");let i={title:"QUARTERS_SUB",language:"en",description:"The QUARTERSSUB function is used to subtract or add a specified number of quarters (1 quarter = 3 months) to a specified datetime value and returns "},u=void 0,o={},l=[{value:"Description",id:"description",level:2},{value:"Syntax",id:"syntax",level:2},{value:"Parameters",id:"parameters",level:2},{value:"Return Value",id:"return-value",level:2},{value:"Examples",id:"examples",level:2}];function d(e){let t={a:"a",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h2,{id:"description",children:"Description"}),"\n",(0,r.jsx)(t.p,{children:"The QUARTERS_SUB function is used to subtract or add a specified number of quarters (1 quarter = 3 months) from a specified datetime value and returns the calculated datetime value. This function supports processing DATE and DATETIME types. If a negative number is input, it is equivalent to adding the corresponding number of quarters. This function supports DATE, DATETIME and TIMESTAMPTZ input types."}),"\n",(0,r.jsxs)(t.p,{children:["This function behaves consistently with the ",(0,r.jsx)(t.a,{href:"./date-sub",children:"date_sub function"})," when using QUARTER as the unit."]}),"\n",(0,r.jsx)(t.h2,{id:"syntax",children:"Syntax"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-sql",children:"QUARTERS_SUB(`<date_or_time_expr>`, `<quarters>`)\n"})}),"\n",(0,r.jsx)(t.h2,{id:"parameters",children:"Parameters"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Parameter"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"<date_or_time_expr>"})}),(0,r.jsxs)(t.td,{children:["The input date or datetime value. Supports date/datetime/timestamptz types. For specific formats, please refer to ",(0,r.jsx)(t.a,{href:"/docs/dev/sql-manual/basic-element/sql-data-types/conversion/timestamptz-conversion",children:"timestamptz conversion"}),", ",(0,r.jsx)(t.a,{href:"../../../../sql-manual/basic-element/sql-data-types/conversion/datetime-conversion",children:"datetime conversion"})," and ",(0,r.jsx)(t.a,{href:"../../../../sql-manual/basic-element/sql-data-types/conversion/date-conversion",children:"date conversion"}),"."]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"<quarters>"})}),(0,r.jsx)(t.td,{children:"The number of quarters to add or subtract. Positive integers indicate subtraction, negative integers indicate addition."})]})]})]}),"\n",(0,r.jsx)(t.h2,{id:"return-value",children:"Return Value"}),"\n",(0,r.jsx)(t.p,{children:"Returns a date value consistent with the input date type, the return value type is determined by the type of the first parameter:"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"If the input is of DATE type (only includes year, month, and day), the result is of DATE type; if the input is of DATETIME type, the result preserves the original time component (e.g., '2023-04-01 12:34:56' becomes '2023-01-01 12:34:56' after subtracting 1 quarter)."}),"\n",(0,r.jsx)(t.li,{children:"If input is TIMESTAMPTZ type, return value is TIMESTAMPTZ type (includes date, time and timezone offset)."}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:"Special cases:"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["If ",(0,r.jsx)(t.code,{children:"<quarters>"})," is negative, the function behaves the same as adding the corresponding number of quarters to the base time (i.e., QUARTERS_SUB(date, -n) is equivalent to QUARTERS_ADD(date, n))."]}),"\n",(0,r.jsx)(t.li,{children:"If the input date is the last day of the month and the target month has fewer days than that date, it automatically adjusts to the last day of the target month (e.g., April 30th minus 1 quarter (3 months) becomes January 31st)."}),"\n",(0,r.jsx)(t.li,{children:"If the calculation result exceeds the valid range of the date type (DATE type: 0000-01-01 to 9999-12-31; DATETIME type: 0000-01-01 00:00:00 to 9999-12-31 23:59:59), throws an exception."}),"\n",(0,r.jsx)(t.li,{children:"If any parameter is NULL, returns NULL."}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"examples",children:"Examples"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-sql",children:"--- Subtract quarters from DATE type\nSELECT QUARTERS_SUB('2020-01-31', 1) AS result;\n+------------+\n| result     |\n+------------+\n| 2019-10-31 |\n+------------+\n\n--- Subtract quarters from DATETIME type (preserves time component)\nSELECT QUARTERS_SUB('2020-01-31 02:02:02', 1) AS result;\n+---------------------+\n| result              |\n+---------------------+\n| 2019-10-31 02:02:02 |\n+---------------------+\n\n--- Negative quarters (equivalent to addition)\nSELECT QUARTERS_SUB('2019-10-31', -1) AS result;\n+------------+\n| result     |\n+------------+\n| 2020-01-31 |\n+------------+\n\n--- Non-end-of-month date subtracting quarters (direct decrement)\nSELECT QUARTERS_SUB('2023-07-13 22:28:18', 2) AS result;\n+---------------------+\n| result              |\n+---------------------+\n| 2023-01-13 22:28:18 |\n+---------------------+\n\n--- DATETIME with microseconds (preserves precision)\nSELECT QUARTERS_SUB('2023-10-13 22:28:18.456789', 1) AS result;\n+----------------------------+\n| result                     |\n+----------------------------+\n| 2023-07-13 22:28:18.456789 |\n+----------------------------+\n\n--- Subtracting quarters across years\nSELECT QUARTERS_SUB('2024-04-01', 2) AS result;\n+------------+\n| result     |\n+------------+\n| 2023-10-01 |\n+------------+\n\n--- Returns NULL when input is NULL\nSELECT QUARTERS_SUB(NULL, 1), QUARTERS_SUB('2023-07-13', NULL) AS result;\n+-------------------------+--------+\n| quarters_sub(NULL, 1)   | result |\n+-------------------------+--------+\n| NULL                    | NULL   |\n+-------------------------+--------+\n\n--- Example of TimeStampTz type, SET time_zone = '+08:00'\nSELECT QUARTERS_SUB('2025-10-10 11:22:33.123+07:00', 1);\n+--------------------------------------------------+\n| QUARTERS_SUB('2025-10-10 11:22:33.123+07:00', 1) |\n+--------------------------------------------------+\n| 2025-07-10 12:22:33.123+08:00                    |\n+--------------------------------------------------+\n\n--- Calculation result exceeds date range\nSELECT QUARTERS_SUB('0000-04-30', 1) AS result;\nERROR 1105 (HY000): errCode = 2, detailMessage = (10.16.10.3)[E-218]Operation quarters_sub of 0000-04-30, 1 out of range\n\nSELECT QUARTERS_SUB('9999-12-31', -1) AS result;\nERROR 1105 (HY000): errCode = 2, detailMessage = (10.16.10.3)[E-218]Operation quarters_sub of 9999-12-31, -1 out of range\n"})})]})}function c(e={}){let{wrapper:t}={...(0,a.a)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},250065:function(e,t,n){n.d(t,{Z:function(){return u},a:function(){return i}});var s=n(667294);let r={},a=s.createContext(r);function i(e){let t=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function u(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),s.createElement(a.Provider,{value:t},e.children)}}}]);