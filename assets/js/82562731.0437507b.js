"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["887896"],{242269:function(e,n,o){o.r(n),o.d(n,{default:()=>h,frontMatter:()=>s,metadata:()=>i,assets:()=>l,toc:()=>c,contentTitle:()=>d});var i=JSON.parse('{"id":"developer-guide/be-clion-dev","title":"Development and Debugging of Apache Doris BE -- Clion","description":"\x3c!--","source":"@site/community/developer-guide/be-clion-dev.md","sourceDirName":"developer-guide","slug":"/developer-guide/be-clion-dev","permalink":"/community/developer-guide/be-clion-dev","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Development and Debugging of Apache Doris BE -- Clion","language":"en"},"sidebar":"community","previous":{"title":"BE development and debugging environment under Linux","permalink":"/community/developer-guide/be-vscode-dev"},"next":{"title":"Dev & Debug prepare on Mac","permalink":"/community/developer-guide/mac-dev/dev-prepare"}}'),t=o("785893"),r=o("250065");let s={title:"Development and Debugging of Apache Doris BE -- Clion",language:"en"},d="Using Clion for Remote Development and Debugging of Apache Doris BE",l={},c=[{value:"Downloading and Compiling Code on Remote Server",id:"downloading-and-compiling-code-on-remote-server",level:2},{value:"Clion Installation and Configuration for Remote Development Environment",id:"clion-installation-and-configuration-for-remote-development-environment",level:2},{value:"Running and debugging Doris BE remotely in Clion",id:"running-and-debugging-doris-be-remotely-in-clion",level:2}];function a(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,r.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"using-clion-for-remote-development-and-debugging-of-apache-doris-be",children:"Using Clion for Remote Development and Debugging of Apache Doris BE"})}),"\n",(0,t.jsx)(n.h2,{id:"downloading-and-compiling-code-on-remote-server",children:"Downloading and Compiling Code on Remote Server"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Download Doris source code on the remote server, such as in the directory ",(0,t.jsx)(n.code,{children:"/mnt/datadisk0/chenqi/doris"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"git clone https://github.com/apache/doris.git\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Modify the ",(0,t.jsx)(n.code,{children:"env.sh"})," file located in the root directory of the Doris code on the remote server.\nAdd the configuration for ",(0,t.jsx)(n.code,{children:"DORIS_HOME"})," at the beginning, for example, ",(0,t.jsx)(n.code,{children:"DORIS_HOME=/mnt/datadisk0/chenqi/doris."})]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Execute commands to compile the code. The detailed compilation process ",(0,t.jsx)(n.a,{href:"https://doris.apache.org/zh-CN/docs/dev/install/source-install/compilation-with-ldb-toolchain",children:"compilation-with-ldb-toolchain"}),"."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"cd /mnt/datadisk0/chenqi/doris\n./build.sh\n"})}),"\n",(0,t.jsx)(n.h2,{id:"clion-installation-and-configuration-for-remote-development-environment",children:"Clion Installation and Configuration for Remote Development Environment"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Download and install Clion on your local env, then import the Doris BE source code."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Set up a remote development environment on your local env by navigating to ",(0,t.jsx)(n.strong,{children:"Preferences -> Build, Execution, Deployment -> Deployment"})," in Clion.\nAdd the connection and login information for the remote development server using ",(0,t.jsx)(n.strong,{children:"SFTP"})," and set the ",(0,t.jsx)(n.strong,{children:"Mappings"})," paths.\nFor example, where Local Path is the local path ",(0,t.jsx)(n.code,{children:"/User/kaka/Programs/doris/be"})," and Deployment Path is the remote server path ",(0,t.jsx)(n.code,{children:"/mnt/datadisk0/chenqi/clion/doris/be"}),"."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Deployment1",src:o(813113).Z+"",width:"2220",height:"1428"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Deployment2",src:o(881981).Z+"",width:"2216",height:"1426"})}),"\n",(0,t.jsxs)(n.ol,{start:"3",children:["\n",(0,t.jsxs)(n.li,{children:["Copy the ",(0,t.jsx)(n.code,{children:"gensrc"})," path on the remote server, for example ",(0,t.jsx)(n.code,{children:"/mnt/datadisk0/chenqi/doris/gensrc"}),", to the parent directory of the ",(0,t.jsx)(n.strong,{children:"Deployment Path"}),".\nFor example, the final directory path on the remote server should be ",(0,t.jsx)(n.code,{children:"/mnt/datadisk0/chenqi/clion/doris/gensrc"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"cp -R /mnt/datadisk0/chenqi/doris/gensrc /mnt/datadisk0/chenqi/clion/doris/gensrc\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"4",children:["\n",(0,t.jsxs)(n.li,{children:["In Clion, navigate to ",(0,t.jsx)(n.strong,{children:"Preferences -> Build, Execution, Deployment -> Toolchains"})," and add the necessary remote environment toolchains such as cmake, gcc, g++, gdb, etc.\n",(0,t.jsxs)(n.strong,{children:["The most important step is to add the path of ",(0,t.jsx)(n.strong,{children:"env.sh"})," on the remote server to ",(0,t.jsx)(n.strong,{children:"Environment file"}),"."]})]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Toolchains",src:o(916568).Z+"",width:"2226",height:"1416"})}),"\n",(0,t.jsxs)(n.ol,{start:"5",children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["In Clion, navigate to ",(0,t.jsx)(n.strong,{children:"Preferences -> Build, Execution, Deployment -> CMake"})," and add the compilation option -DDORIS_JAVA_HOME=/path/to/remote/JAVA_HOME in CMake options, set DORIS_JAVA_HOME to the JAVA_HOME path of the remote server, otherwise jni.h will not be found."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Right-click on ",(0,t.jsx)(n.strong,{children:"Load Cmake Project"})," in Clion. This will synchronize the code to the remote server and generate the Cmake build files."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"running-and-debugging-doris-be-remotely-in-clion",children:"Running and debugging Doris BE remotely in Clion"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Configure CMake in ",(0,t.jsx)(n.strong,{children:"Preferences -> Build, Execution, Deployment -> CMake"}),". Different targets such as Debug / Release can be configured, and the ",(0,t.jsx)(n.strong,{children:"ToolChain"})," should be set to the previously configured.\nIf you want to run and debug Unit Tests, you need to add \xb7-DMAKE_TEST=ON\xb7 to CMake Options (this option is disabled by default, and needs to be enabled to compile the Test code)\nCopy the output directory in Doris source code to a separate path on the remote server, such as /mnt/datadisk0/chenqi/clion/doris/doris_be/."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Copy the output directory in Doris source code to a separate path on the remote server, such as ",(0,t.jsx)(n.code,{children:"/mnt/datadisk0/chenqi/clion/doris/doris_be/"}),"."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"cp -R /mnt/datadisk0/chenqi/doris/output /mnt/datadisk0/chenqi/clion/doris/doris_be\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Output Tree",src:o(960885).Z+"",width:"814",height:"310"})}),"\n",(0,t.jsxs)(n.ol,{start:"3",children:["\n",(0,t.jsx)(n.li,{children:"Select the relevant Target for doris_be in Clion, such as Debug or Release, and configure the run."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Run Debug Conf1",src:o(546633).Z+"",width:"2074",height:"1356"})}),"\n",(0,t.jsxs)(n.p,{children:["Refer to the environment variables exported in ",(0,t.jsx)(n.code,{children:"be/bin/start_be.sh"})," in the Doris root directory for environment variable configuration. The value of each environment variable should point to the corresponding path on the remote server.**\nEnvironment variables reference:"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Run Debug Conf2",src:o(242400).Z+"",width:"3118",height:"796"})}),"\n",(0,t.jsxs)(n.ol,{start:"4",children:["\n",(0,t.jsxs)(n.li,{children:["Click ",(0,t.jsx)(n.strong,{children:"Run"})," to compile and run the BE, or click ",(0,t.jsx)(n.strong,{children:"Debug"})," to compile and debug the BE."]}),"\n"]})]})}function h(e={}){let{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},813113:function(e,n,o){o.d(n,{Z:function(){return i}});let i=o.p+"assets/images/clion-deployment1-a36f51febb0818fed20a02a71b697a5a.png"},881981:function(e,n,o){o.d(n,{Z:function(){return i}});let i=o.p+"assets/images/clion-deployment2-5887d4af6d031a8b484cc0dcb6399837.png"},546633:function(e,n,o){o.d(n,{Z:function(){return i}});let i=o.p+"assets/images/clion-run-debug-conf1-e57278a1580b0b96f3a9016924613981.png"},242400:function(e,n,o){o.d(n,{Z:function(){return i}});let i=o.p+"assets/images/clion-run-debug-conf2-abdc543704be6a69328c6985b0c7a36f.png"},916568:function(e,n,o){o.d(n,{Z:function(){return i}});let i=o.p+"assets/images/clion-toolchains-6160ba355a369c4a39be6dae1bede1fb.png"},960885:function(e,n,o){o.d(n,{Z:function(){return i}});let i=o.p+"assets/images/doris-dist-output-tree-e5e484ba7fe826861a853756e9cb3cdc.png"},250065:function(e,n,o){o.d(n,{Z:function(){return d},a:function(){return s}});var i=o(667294);let t={},r=i.createContext(t);function s(e){let n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);