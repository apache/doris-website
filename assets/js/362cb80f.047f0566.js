"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["609621"],{815538:function(e,n,t){t.r(n),t.d(n,{default:()=>c,frontMatter:()=>i,metadata:()=>a,assets:()=>o,toc:()=>d,contentTitle:()=>l});var a=JSON.parse('{"id":"sql-manual/sql-reference/Data-Definition-Statements/Create/CREATE-EXTERNAL-TABLE","title":"CREATE-EXTERNAL-TABLE","description":"CREATE-EXTERNAL-TABLE","source":"@site/versioned_docs/version-2.0/sql-manual/sql-reference/Data-Definition-Statements/Create/CREATE-EXTERNAL-TABLE.md","sourceDirName":"sql-manual/sql-reference/Data-Definition-Statements/Create","slug":"/sql-manual/sql-reference/Data-Definition-Statements/Create/CREATE-EXTERNAL-TABLE","permalink":"/docs/2.0/sql-manual/sql-reference/Data-Definition-Statements/Create/CREATE-EXTERNAL-TABLE","draft":false,"unlisted":false,"tags":[],"version":"2.0","frontMatter":{"title":"CREATE-EXTERNAL-TABLE","language":"en"},"sidebar":"docs","previous":{"title":"CREATE-TABLE-AS-SELECT","permalink":"/docs/2.0/sql-manual/sql-reference/Data-Definition-Statements/Create/CREATE-TABLE-AS-SELECT"},"next":{"title":"CREATE-INDEX","permalink":"/docs/2.0/sql-manual/sql-reference/Data-Definition-Statements/Create/CREATE-INDEX"}}'),s=t("785893"),r=t("250065");let i={title:"CREATE-EXTERNAL-TABLE",language:"en"},l=void 0,o={},d=[{value:"CREATE-EXTERNAL-TABLE",id:"create-external-table",level:2},{value:"Name",id:"name",level:3},{value:"Description",id:"description",level:3},{value:"Example",id:"example",level:3},{value:"Keywords",id:"keywords",level:3},{value:"Best Practice",id:"best-practice",level:3}];function h(e){let n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"create-external-table",children:"CREATE-EXTERNAL-TABLE"}),"\n",(0,s.jsx)(n.h3,{id:"name",children:"Name"}),"\n",(0,s.jsx)(n.p,{children:"CREATE EXTERNAL TABLE"}),"\n",(0,s.jsx)(n.h3,{id:"description",children:"Description"}),"\n",(0,s.jsxs)(n.p,{children:["This statement is used to create an external table, see ",(0,s.jsx)(n.a,{href:"/docs/2.0/sql-manual/sql-reference/Data-Definition-Statements/Create/CREATE-TABLE",children:"CREATE TABLE"})," for the specific syntax."]}),"\n",(0,s.jsx)(n.p,{children:"Which type of external table is mainly identified by the ENGINE type, currently MYSQL, BROKER, HIVE, ICEBERG, HUDI are optional"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"If it is mysql, you need to provide the following information in properties:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:'PROPERTIES (\n"host" = "mysql_server_host",\n"port" = "mysql_server_port",\n"user" = "your_user_name",\n"password" = "your_password",\n"database" = "database_name",\n"table" = "table_name"\n)\n'})}),"\n",(0,s.jsx)(n.p,{children:'and there is an optional propertiy "charset" which can set character fom mysql connection, default value is "utf8". You can set another value "utf8mb4" instead of "utf8" when you need.'}),"\n",(0,s.jsx)(n.p,{children:"Notice:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:'"table_name" in "table" entry is the real table name in mysql. The table_name in the CREATE TABLE statement is the name of the mysql table in Doris, which can be different.'}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"The purpose of creating a mysql table in Doris is to access the mysql database through Doris. Doris itself does not maintain or store any mysql data."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"If it is a broker, it means that the access to the table needs to pass through the specified broker, and the following information needs to be provided in properties:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:'PROPERTIES (\n"broker_name" = "broker_name",\n"path" = "file_path1[,file_path2]",\n"column_separator" = "value_separator"\n"line_delimiter" = "value_delimiter"\n)\n'})}),"\n",(0,s.jsx)(n.p,{children:"In addition, you need to provide the Property information required by the Broker, and pass it through the BROKER PROPERTIES, for example, HDFS needs to pass in"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:'BROKER PROPERTIES(\n  "username" = "name",\n  "password" = "password"\n)\n'})}),"\n",(0,s.jsx)(n.p,{children:"According to different Broker types, the content that needs to be passed in is also different."}),"\n",(0,s.jsx)(n.p,{children:"Notice:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:'If there are multiple files in "path", separate them with comma [,]. If the filename contains a comma, use %2c instead. If the filename contains %, use %25 instead'}),"\n",(0,s.jsx)(n.li,{children:"Now the file content format supports CSV, and supports GZ, BZ2, LZ4, LZO (LZOP) compression formats."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"If it is hive, you need to provide the following information in properties:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:'PROPERTIES (\n"database" = "hive_db_name",\n"table" = "hive_table_name",\n"hive.metastore.uris" = "thrift://127.0.0.1:9083"\n)\n'})}),"\n",(0,s.jsx)(n.p,{children:"Where database is the name of the library corresponding to the hive table, table is the name of the hive table, and hive.metastore.uris is the address of the hive metastore service."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"In case of iceberg, you need to provide the following information in properties:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:'PROPERTIES (\n"iceberg.database" = "iceberg_db_name",\n"iceberg.table" = "iceberg_table_name",\n"iceberg.hive.metastore.uris" = "thrift://127.0.0.1:9083",\n"iceberg.catalog.type" = "HIVE_CATALOG"\n)\n'})}),"\n",(0,s.jsx)(n.p,{children:"Where database is the library name corresponding to Iceberg;\ntable is the corresponding table name in Iceberg;\nhive.metastore.uris is the hive metastore service address;\ncatalog.type defaults to HIVE_CATALOG. Currently only HIVE_CATALOG is supported, more Iceberg catalog types will be supported in the future."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"In case of hudi, you need to provide the following information in properties:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:'PROPERTIES (\n"hudi.database" = "hudi_db_in_hive_metastore",\n"hudi.table" = "hudi_table_in_hive_metastore",\n"hudi.hive.metastore.uris" = "thrift://127.0.0.1:9083"\n)\n'})}),"\n",(0,s.jsx)(n.p,{children:"Where hudi.database is the corresponding database name in HiveMetaStore;\nhudi.table is the corresponding table name in HiveMetaStore;\nhive.metastore.uris is the hive metastore service address;"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"example",children:"Example"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Create a MYSQL external table"}),"\n",(0,s.jsx)(n.p,{children:"Create mysql table directly from outer table information"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:'CREATE EXTERNAL TABLE example_db.table_mysql\n(\nk1 DATE,\nk2 INT,\nk3 SMALLINT,\nk4 VARCHAR(2048),\nk5 DATETIME\n)\nENGINE=mysql\nPROPERTIES\n(\n"host" = "127.0.0.1",\n"port" = "8239",\n"user" = "mysql_user",\n"password" = "mysql_passwd",\n"database" = "mysql_db_test",\n"table" = "mysql_table_test",\n"charset" = "utf8mb4"\n)\n'})}),"\n",(0,s.jsx)(n.p,{children:"Create mysql table through External Catalog Resource"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:'# Create Resource first\nCREATE EXTERNAL RESOURCE "mysql_resource"\nPROPERTIES\n(\n  "type" = "odbc_catalog",\n  "user" = "mysql_user",\n  "password" = "mysql_passwd",\n  "host" = "127.0.0.1",\n   "port" = "8239"\n);\n\n# Then create mysql external table through Resource\nCREATE EXTERNAL TABLE example_db.table_mysql\n(\nk1 DATE,\nk2 INT,\nk3 SMALLINT,\nk4 VARCHAR(2048),\nk5 DATETIME\n)\nENGINE=mysql\nPROPERTIES\n(\n"odbc_catalog_resource" = "mysql_resource",\n"database" = "mysql_db_test",\n"table" = "mysql_table_test"\n)\n'})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:'Create a broker external table with data files stored on HDFS, the data is split with "|", and "\\n" is newline'}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:'CREATE EXTERNAL TABLE example_db.table_broker (\nk1 DATE,\nk2 INT,\nk3 SMALLINT,\nk4 VARCHAR(2048),\nk5 DATETIME\n)\nENGINE=broker\nPROPERTIES (\n"broker_name" = "hdfs",\n"path" = "hdfs://hdfs_host:hdfs_port/data1,hdfs://hdfs_host:hdfs_port/data2,hdfs://hdfs_host:hdfs_port/data3%2c4",\n"column_separator" = "|",\n"line_delimiter" = "\\n"\n)\nBROKER PROPERTIES (\n"username" = "hdfs_user",\n"password" = "hdfs_password"\n)\n'})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Create a hive external table"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:'CREATE TABLE example_db.table_hive\n(\n  k1 TINYINT,\n  k2 VARCHAR(50),\n  v INT\n)\nENGINE=hive\nPROPERTIES\n(\n  "database" = "hive_db_name",\n  "table" = "hive_table_name",\n  "hive.metastore.uris" = "thrift://127.0.0.1:9083"\n);\n'})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Create an Iceberg skin"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:'CREATE TABLE example_db.t_iceberg\nENGINE=ICEBERG\nPROPERTIES (\n"iceberg.database" = "iceberg_db",\n"iceberg.table" = "iceberg_table",\n"iceberg.hive.metastore.uris" = "thrift://127.0.0.1:9083",\n"iceberg.catalog.type" = "HIVE_CATALOG"\n);\n'})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Create an Hudi external table"}),"\n",(0,s.jsx)(n.p,{children:"create hudi table without schema(recommend)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:'CREATE TABLE example_db.t_hudi\nENGINE=HUDI\nPROPERTIES (\n"hudi.database" = "hudi_db_in_hive_metastore",\n"hudi.table" = "hudi_table_in_hive_metastore",\n"hudi.hive.metastore.uris" = "thrift://127.0.0.1:9083"\n);\n'})}),"\n",(0,s.jsx)(n.p,{children:"create hudi table with schema"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:'CREATE TABLE example_db.t_hudi (\n   `id` int NOT NULL COMMENT "id number",\n   `name` varchar(10) NOT NULL COMMENT "user name"\n)\nENGINE=HUDI\nPROPERTIES (\n"hudi.database" = "hudi_db_in_hive_metastore",\n"hudi.table" = "hudi_table_in_hive_metastore",\n"hudi.hive.metastore.uris" = "thrift://127.0.0.1:9083"\n);\n'})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"keywords",children:"Keywords"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"CREATE, EXTERNAL, TABLE\n"})}),"\n",(0,s.jsx)(n.h3,{id:"best-practice",children:"Best Practice"})]})}function c(e={}){let{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},250065:function(e,n,t){t.d(n,{Z:function(){return l},a:function(){return i}});var a=t(667294);let s={},r=a.createContext(s);function i(e){let n=a.useContext(r);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),a.createElement(r.Provider,{value:n},e.children)}}}]);