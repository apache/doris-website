"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["196426"],{24580:function(e,n,a){a.r(n),a.d(n,{default:()=>x,frontMatter:()=>t,metadata:()=>r,assets:()=>c,toc:()=>o,contentTitle:()=>i});var r=JSON.parse('{"id":"sql-manual/sql-functions/scalar-functions/array-functions/array-exists","title":"ARRAY_EXISTS","description":"array_exists","source":"@site/versioned_docs/version-4.x/sql-manual/sql-functions/scalar-functions/array-functions/array-exists.md","sourceDirName":"sql-manual/sql-functions/scalar-functions/array-functions","slug":"/sql-manual/sql-functions/scalar-functions/array-functions/array-exists","permalink":"/docs/4.x/sql-manual/sql-functions/scalar-functions/array-functions/array-exists","draft":false,"unlisted":false,"tags":[],"version":"4.x","lastUpdatedAt":1770477659000,"frontMatter":{"title":"ARRAY_EXISTS","language":"en"},"sidebar":"docs","previous":{"title":"ARRAY_EXCEPT","permalink":"/docs/4.x/sql-manual/sql-functions/scalar-functions/array-functions/array-except"},"next":{"title":"ARRAY_FILTER","permalink":"/docs/4.x/sql-manual/sql-functions/scalar-functions/array-functions/array-filter"}}'),s=a("785893"),l=a("250065");let t={title:"ARRAY_EXISTS",language:"en"},i=void 0,c={},o=[{value:"array_exists",id:"array_exists",level:2},{value:"Description",id:"description",level:2},{value:"Syntax",id:"syntax",level:2},{value:"Parameters",id:"parameters",level:3},{value:"Return Value",id:"return-value",level:3},{value:"Keywords",id:"keywords",level:3}];function d(e){let n={boolean:"boolean",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",t:"t",ul:"ul",version:"version",...(0,l.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"array_exists",children:"array_exists"}),"\n",(0,s.jsx)(n.version,{since:"2.0.0",children:"\n"}),"\n",(0,s.jsx)(n.h2,{id:"description",children:"Description"}),"\n",(0,s.jsx)(n.p,{children:"Applies a lambda expression to elements in an array and returns a boolean array indicating whether each element satisfies the condition. The function applies the lambda expression to each element in the array and returns the corresponding boolean value."}),"\n",(0,s.jsx)(n.h2,{id:"syntax",children:"Syntax"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"array_exists(lambda, array1, ...)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"parameters",children:"Parameters"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"lambda"}),"\uFF1Alambda expression used to evaluate array elements, returns true/false or expressions that can be converted to boolean values"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"array1, ..."}),"\uFF1Aone or more ARRAY",(0,s.jsx)(n.t,{children:" type parameters"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Supported types for T:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Numeric types: TINYINT, SMALLINT, INT, BIGINT, LARGEINT, FLOAT, DOUBLE, DECIMAL"}),"\n",(0,s.jsx)(n.li,{children:"String types: CHAR, VARCHAR, STRING"}),"\n",(0,s.jsx)(n.li,{children:"Date and time types: DATE, DATETIME, DATEV2, DATETIMEV2"}),"\n",(0,s.jsx)(n.li,{children:"Boolean type: BOOLEAN"}),"\n",(0,s.jsx)(n.li,{children:"IP types: IPV4, IPV6"}),"\n",(0,s.jsx)(n.li,{children:"Complex data types: ARRAY, MAP, STRUCT"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"return-value",children:"Return Value"}),"\n",(0,s.jsxs)(n.p,{children:["Return type: ARRAY",(0,s.jsx)(n.boolean,{})]}),"\n",(0,s.jsx)(n.p,{children:"Return value meaning:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Returns a boolean array with the same length as the input array, where each position contains the result of applying the lambda expression to the corresponding element"}),"\n",(0,s.jsx)(n.li,{children:"NULL: when only the array parameter is NULL and there is no lambda expression"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Usage notes:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"The number of parameters in the lambda expression must match the number of array parameters"}),"\n",(0,s.jsx)(n.li,{children:"All input arrays must have the same length"}),"\n",(0,s.jsx)(n.li,{children:"Supports evaluation of multi-arrays and complex type arrays"}),"\n",(0,s.jsx)(n.li,{children:"Empty arrays return empty arrays. When only the array parameter is NULL and there is no lambda expression, returns NULL. When there is a lambda expression and the array is NULL, it will error"}),"\n",(0,s.jsx)(n.li,{children:"Lambda can use any scalar expression, but cannot use aggregate functions"}),"\n",(0,s.jsx)(n.li,{children:"Lambda expressions can call other higher-order functions, but the return types must be compatible"}),"\n",(0,s.jsx)(n.li,{children:"For null values in array elements: null elements will be passed to the lambda expression for processing, and lambda can check for null values"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Query Examples:"})}),"\n",(0,s.jsx)(n.p,{children:"Check if each element in a floating-point array is greater than or equal to 3:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"SELECT array_exists(x -> x >= 3, [1.1, 2.2, 3.3, 4.4, 5.5]);\n+--------------------------------------------------+\n| array_exists(x -> x >= 3, [1.1, 2.2, 3.3, 4.4, 5.5]) |\n+--------------------------------------------------+\n| [0, 0, 1, 1, 1]                                 |\n+--------------------------------------------------+\n"})}),"\n",(0,s.jsx)(n.p,{children:"Check if the length of each element in a string array is greater than 2:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"SELECT array_exists(x -> length(x) > 2, ['a', 'bb', 'ccc', 'dddd', 'eeeee']);\n+--------------------------------------------------+\n| array_exists(x -> length(x) > 2, ['a', 'bb', 'ccc', 'dddd', 'eeeee']) |\n+--------------------------------------------------+\n| [0, 0, 1, 1, 1]                                 |\n+--------------------------------------------------+\n"})}),"\n",(0,s.jsx)(n.p,{children:"Empty array returns empty array:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"SELECT array_exists(x -> x > 0, []);\n+-------------------------------------+\n| array_exists(x -> x > 0, [])       |\n+-------------------------------------+\n| []                                  |\n+-------------------------------------+\n"})}),"\n",(0,s.jsx)(n.p,{children:"NULL array and lambda expression combination. When there is a lambda expression with NULL, it will error. When there is no lambda expression, it returns NULL:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"SELECT array_exists(NULL);\n+--------------------+\n| array_exists(NULL) |\n+--------------------+\n| NULL               |\n+--------------------+\n\nSELECT array_exists(x -> x > 2, NULL);\nERROR 1105 (HY000): errCode = 2, detailMessage = lambda argument must be array but is NULL\n"})}),"\n",(0,s.jsx)(n.p,{children:"Array containing null values, lambda can check for null:\nAny comparison operation with null (such as >, <, =, >=, <=) will return null (except for special IS NULL or IS NOT NULL), because it's impossible to determine whether an unknown value (NULL) is greater than 2. This behavior is consistent with MYSQL, POSTGRESSQL, etc."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"SELECT array_exists(x -> x is not null, [1, null, 3, null, 5]);\n+------------------------------------------+\n| array_exists(x -> x is not null, [1, null, 3, null, 5]) |\n+------------------------------------------+\n| [1, 0, 1, 0, 1]                          |\n+------------------------------------------+\n\nSELECT array_exists(x -> x > 2, [1, null, 3, null, 5]);\n+-------------------------------------------------+\n| array_exists(x -> x > 2, [1, null, 3, null, 5]) |\n+-------------------------------------------------+\n| [0, null, 1, null, 1]                           |\n+-------------------------------------------------+\n"})}),"\n",(0,s.jsx)(n.p,{children:"Multi-array evaluation, check if the first array is greater than the second array:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"SELECT array_exists((x, y) -> x > y, [1, 2, 3, 4, 5], [1.1, 2.2, 3.3, 4.4, 5.5]);\n+--------------------------------------------------------+\n| array_exists((x, y) -> x > y, [1, 2, 3, 4, 5], [1.1, 2.2, 3.3, 4.4, 5.5]) |\n+--------------------------------------------------------+\n| [0, 0, 0, 0, 0]                                       |\n+--------------------------------------------------------+\n"})}),"\n",(0,s.jsx)(n.p,{children:"Complex type examples:"}),"\n",(0,s.jsx)(n.p,{children:"Nested array evaluation, check if each sub-array length is greater than 2:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"SELECT array_exists(x -> size(x) > 2, [[1,2],[3,4,5],[6],[7,8,9,10]]);\n+----------------------------------------------------------------+\n| array_exists(x -> size(x) > 2, [[1,2],[3,4,5],[6],[7,8,9,10]]) |\n+----------------------------------------------------------------+\n| [0, 1, 0, 1]                                                   |\n+----------------------------------------------------------------+\n"})}),"\n",(0,s.jsx)(n.p,{children:"Map type evaluation, check if the value with key 'a' is greater than 10:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"SELECT array_exists(x -> x['a'] > 10, [{'a':5}, {'a':15}, {'a':20}]);\n+---------------------------------------------------------------+\n| array_exists(x -> x['a'] > 10, [{'a':5}, {'a':15}, {'a':20}]) |\n+---------------------------------------------------------------+\n| [0, 1, 1]                                                     |\n+---------------------------------------------------------------+\n"})}),"\n",(0,s.jsx)(n.p,{children:"Error when the number of parameters in lambda expression doesn't match the number of array parameters:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"SELECT array_exists(x -> x > 0, [1,2,3], [4,5,6], [7,8,9]);\nERROR 1105 (HY000): errCode = 2, detailMessage = lambda x -> (x > 0) arguments' size is not equal parameters' size\n"})}),"\n",(0,s.jsx)(n.p,{children:"Error when array lengths are inconsistent:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"SELECT array_exists((x, y) -> x > y, [1,2,3], [4,5]);\nERROR 1105 (HY000): errCode = 2, detailMessage = (10.16.10.6)[INVALID_ARGUMENT]in array map function, the input column size are not equal completely, nested column data rows 1st size is 3, 2th size is 2.\n"})}),"\n",(0,s.jsx)(n.p,{children:"Error when passing non-array type:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"SELECT array_exists(x -> x > 0, 'not_an_array');\nERROR 1105 (HY000): errCode = 2, detailMessage = lambda argument must be array but is 'not_an_array'\n"})}),"\n",(0,s.jsx)(n.h3,{id:"keywords",children:"Keywords"}),"\n",(0,s.jsx)(n.p,{children:"ARRAY, EXISTS, ARRAY_EXISTS"})]})}function x(e={}){let{wrapper:n}={...(0,l.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},250065:function(e,n,a){a.d(n,{Z:function(){return i},a:function(){return t}});var r=a(667294);let s={},l=r.createContext(s);function t(e){let n=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);