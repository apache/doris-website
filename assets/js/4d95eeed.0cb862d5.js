"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["605595"],{679114:function(e,n,s){s.r(n),s.d(n,{default:()=>o,frontMatter:()=>c,metadata:()=>d,assets:()=>t,toc:()=>a,contentTitle:()=>l});var d=JSON.parse('{"id":"sql-manual/basic-element/file-path-pattern","title":"File Path Pattern","description":"File path patterns and wildcards supported by Doris for accessing files in remote storage systems like S3, HDFS, and other object storage.","source":"@site/versioned_docs/version-4.x/sql-manual/basic-element/file-path-pattern.md","sourceDirName":"sql-manual/basic-element","slug":"/sql-manual/basic-element/file-path-pattern","permalink":"/docs/4.x/sql-manual/basic-element/file-path-pattern","draft":false,"unlisted":false,"tags":[],"version":"4.x","lastUpdatedAt":1770477659000,"frontMatter":{"title":"File Path Pattern","language":"en","description":"File path patterns and wildcards supported by Doris for accessing files in remote storage systems like S3, HDFS, and other object storage."},"sidebar":"docs","previous":{"title":"Comments","permalink":"/docs/4.x/sql-manual/basic-element/comments"},"next":{"title":"Arithmetic Operators","permalink":"/docs/4.x/sql-manual/basic-element/operators/arithmetic-operators"}}'),r=s("785893"),i=s("250065");let c={title:"File Path Pattern",language:"en",description:"File path patterns and wildcards supported by Doris for accessing files in remote storage systems like S3, HDFS, and other object storage."},l=void 0,t={},a=[{value:"Description",id:"description",level:2},{value:"Supported URI Formats",id:"supported-uri-formats",level:2},{value:"S3-Style URIs",id:"s3-style-uris",level:3},{value:"Other Cloud Storage URIs",id:"other-cloud-storage-uris",level:3},{value:"HDFS URIs",id:"hdfs-uris",level:3},{value:"Wildcard Patterns",id:"wildcard-patterns",level:2},{value:"Basic Wildcards",id:"basic-wildcards",level:3},{value:"Range Expansion (Brace Patterns)",id:"range-expansion-brace-patterns",level:3},{value:"Combining Patterns",id:"combining-patterns",level:3},{value:"Examples",id:"examples",level:2},{value:"S3 TVF Examples",id:"s3-tvf-examples",level:3},{value:"Broker Load Examples",id:"broker-load-examples",level:3},{value:"INSERT INTO SELECT Examples",id:"insert-into-select-examples",level:3},{value:"Performance Considerations",id:"performance-considerations",level:2},{value:"Use Specific Prefixes",id:"use-specific-prefixes",level:3},{value:"Prefer Range Patterns for Known Sequences",id:"prefer-range-patterns-for-known-sequences",level:3},{value:"Avoid Deep Recursive Wildcards",id:"avoid-deep-recursive-wildcards",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Testing Path Patterns",id:"testing-path-patterns",level:3}];function h(e){let n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"description",children:"Description"}),"\n",(0,r.jsx)(n.p,{children:"When accessing files from remote storage systems (S3, HDFS, and other S3-compatible object storage), Doris supports flexible file path patterns including wildcards and range expressions. This document describes the supported path formats and pattern matching syntax."}),"\n",(0,r.jsx)(n.p,{children:"These path patterns are supported by:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"../sql-functions/table-valued-functions/s3",children:"S3 TVF"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"../sql-functions/table-valued-functions/hdfs",children:"HDFS TVF"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"../../data-operate/import/import-way/broker-load-manual",children:"Broker Load"})}),"\n",(0,r.jsx)(n.li,{children:"INSERT INTO SELECT from TVF"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"supported-uri-formats",children:"Supported URI Formats"}),"\n",(0,r.jsx)(n.h3,{id:"s3-style-uris",children:"S3-Style URIs"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Style"}),(0,r.jsx)(n.th,{children:"Format"}),(0,r.jsx)(n.th,{children:"Example"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"AWS Client Style (Hadoop S3)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"s3://bucket/path/to/file"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"s3://my-bucket/data/file.csv"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"S3A Style"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"s3a://bucket/path/to/file"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"s3a://my-bucket/data/file.csv"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"S3N Style"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"s3n://bucket/path/to/file"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"s3n://my-bucket/data/file.csv"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Virtual Host Style"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"https://bucket.endpoint/path/to/file"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"https://my-bucket.s3.us-west-1.amazonaws.com/data/file.csv"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Path Style"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"https://endpoint/bucket/path/to/file"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"https://s3.us-west-1.amazonaws.com/my-bucket/data/file.csv"})})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"other-cloud-storage-uris",children:"Other Cloud Storage URIs"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Provider"}),(0,r.jsx)(n.th,{children:"Scheme"}),(0,r.jsx)(n.th,{children:"Example"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Alibaba Cloud OSS"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"oss://"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"oss://my-bucket/data/file.csv"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Tencent Cloud COS"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"cos://"}),", ",(0,r.jsx)(n.code,{children:"cosn://"})]}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"cos://my-bucket/data/file.csv"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Baidu Cloud BOS"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"bos://"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"bos://my-bucket/data/file.csv"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Huawei Cloud OBS"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"obs://"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"obs://my-bucket/data/file.csv"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Google Cloud Storage"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"gs://"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"gs://my-bucket/data/file.csv"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Azure Blob Storage"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"azure://"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"azure://container/data/file.csv"})})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"hdfs-uris",children:"HDFS URIs"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Style"}),(0,r.jsx)(n.th,{children:"Format"}),(0,r.jsx)(n.th,{children:"Example"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Standard"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"hdfs://namenode:port/path/to/file"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"hdfs://namenode:8020/user/data/file.csv"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"HA Mode"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"hdfs://nameservice/path/to/file"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"hdfs://my-ha-cluster/user/data/file.csv"})})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"wildcard-patterns",children:"Wildcard Patterns"}),"\n",(0,r.jsx)(n.p,{children:"Doris uses glob-style pattern matching for file paths. The following wildcards are supported:"}),"\n",(0,r.jsx)(n.h3,{id:"basic-wildcards",children:"Basic Wildcards"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Pattern"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Example"}),(0,r.jsx)(n.th,{children:"Matches"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"*"})}),(0,r.jsx)(n.td,{children:"Matches zero or more characters within a path segment"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"*.csv"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"file.csv"}),", ",(0,r.jsx)(n.code,{children:"data.csv"}),", ",(0,r.jsx)(n.code,{children:"a.csv"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"?"})}),(0,r.jsx)(n.td,{children:"Matches exactly one character"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"file?.csv"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"file1.csv"}),", ",(0,r.jsx)(n.code,{children:"fileA.csv"}),", but not ",(0,r.jsx)(n.code,{children:"file10.csv"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"[abc]"})}),(0,r.jsx)(n.td,{children:"Matches any single character in brackets"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"file[123].csv"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"file1.csv"}),", ",(0,r.jsx)(n.code,{children:"file2.csv"}),", ",(0,r.jsx)(n.code,{children:"file3.csv"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"[a-z]"})}),(0,r.jsx)(n.td,{children:"Matches any single character in the range"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"file[a-c].csv"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"filea.csv"}),", ",(0,r.jsx)(n.code,{children:"fileb.csv"}),", ",(0,r.jsx)(n.code,{children:"filec.csv"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"[!abc]"})}),(0,r.jsx)(n.td,{children:"Matches any single character NOT in brackets"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"file[!0-9].csv"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"filea.csv"}),", ",(0,r.jsx)(n.code,{children:"fileb.csv"}),", but not ",(0,r.jsx)(n.code,{children:"file1.csv"})]})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"range-expansion-brace-patterns",children:"Range Expansion (Brace Patterns)"}),"\n",(0,r.jsxs)(n.p,{children:["Doris supports numeric range expansion using brace patterns ",(0,r.jsx)(n.code,{children:"{start..end}"}),":"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Pattern"}),(0,r.jsx)(n.th,{children:"Expansion"}),(0,r.jsx)(n.th,{children:"Matches"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"{1..3}"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"{1,2,3}"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"1"}),", ",(0,r.jsx)(n.code,{children:"2"}),", ",(0,r.jsx)(n.code,{children:"3"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"{01..05}"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"{1,2,3,4,5}"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"1"}),", ",(0,r.jsx)(n.code,{children:"2"}),", ",(0,r.jsx)(n.code,{children:"3"}),", ",(0,r.jsx)(n.code,{children:"4"}),", ",(0,r.jsx)(n.code,{children:"5"})," (leading zeros are NOT preserved)"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"{3..1}"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"{1,2,3}"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"1"}),", ",(0,r.jsx)(n.code,{children:"2"}),", ",(0,r.jsx)(n.code,{children:"3"})," (reverse ranges supported)"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"{a,b,c}"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"{a,b,c}"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"a"}),", ",(0,r.jsx)(n.code,{children:"b"}),", ",(0,r.jsx)(n.code,{children:"c"})," (enumeration)"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"{1..3,5,7..9}"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"{1,2,3,5,7,8,9}"})}),(0,r.jsx)(n.td,{children:"Mixed ranges and values"})]})]})]}),"\n",(0,r.jsx)(n.admonition,{title:"Note",type:"caution",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Doris tries to match as many files as possible. Invalid parts in brace expressions are silently skipped, and valid parts are still expanded. For example, ",(0,r.jsx)(n.code,{children:"file_{a..b,-1..3,4..5}"})," will match ",(0,r.jsx)(n.code,{children:"file_4"})," and ",(0,r.jsx)(n.code,{children:"file_5"})," (the invalid ",(0,r.jsx)(n.code,{children:"a..b"})," and negative range ",(0,r.jsx)(n.code,{children:"-1..3"})," are skipped, but ",(0,r.jsx)(n.code,{children:"4..5"})," is expanded normally)."]}),"\n",(0,r.jsxs)(n.li,{children:["If the entire range is negative (e.g., ",(0,r.jsx)(n.code,{children:"{-1..2}"}),"), the range is skipped. If mixed with valid ranges (e.g., ",(0,r.jsx)(n.code,{children:"{-1..2,1..3}"}),"), only the valid range ",(0,r.jsx)(n.code,{children:"1..3"})," is expanded."]}),"\n",(0,r.jsxs)(n.li,{children:["When using comma-separated values with ranges, only numbers are allowed. For example, in ",(0,r.jsx)(n.code,{children:"{1..4,a}"}),", the non-numeric ",(0,r.jsx)(n.code,{children:"a"})," will be ignored, resulting in ",(0,r.jsx)(n.code,{children:"{1,2,3,4}"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Pure enumeration patterns like ",(0,r.jsx)(n.code,{children:"{a,b,c}"})," (without ",(0,r.jsx)(n.code,{children:".."})," ranges) are passed directly to glob matching and work as expected."]}),"\n"]})}),"\n",(0,r.jsx)(n.h3,{id:"combining-patterns",children:"Combining Patterns"}),"\n",(0,r.jsx)(n.p,{children:"Multiple patterns can be combined in a single path:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"s3://bucket/data_{1..3}/file_*.csv\n"})}),"\n",(0,r.jsx)(n.p,{children:"This matches:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"s3://bucket/data_1/file_a.csv"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"s3://bucket/data_1/file_b.csv"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"s3://bucket/data_2/file_a.csv"})}),"\n",(0,r.jsx)(n.li,{children:"... and so on"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,r.jsx)(n.h3,{id:"s3-tvf-examples",children:"S3 TVF Examples"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Match all CSV files in a directory:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:'SELECT * FROM S3(\n    "uri" = "s3://my-bucket/data/*.csv",\n    "s3.access_key" = "xxx",\n    "s3.secret_key" = "xxx",\n    "s3.region" = "us-east-1",\n    "format" = "csv"\n);\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Match files with numeric range:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:'SELECT * FROM S3(\n    "uri" = "s3://my-bucket/logs/data_{1..10}.csv",\n    "s3.access_key" = "xxx",\n    "s3.secret_key" = "xxx",\n    "s3.region" = "us-east-1",\n    "format" = "csv"\n);\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Match files in date-partitioned directories:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:'SELECT * FROM S3(\n    "uri" = "s3://my-bucket/logs/year=2024/month=*/day=*/data.parquet",\n    "s3.access_key" = "xxx",\n    "s3.secret_key" = "xxx",\n    "s3.region" = "us-east-1",\n    "format" = "parquet"\n);\n'})}),"\n",(0,r.jsx)(n.admonition,{title:"Zero-Padded Directories",type:"caution",children:(0,r.jsxs)(n.p,{children:["For zero-padded directory names like ",(0,r.jsx)(n.code,{children:"month=01"}),", ",(0,r.jsx)(n.code,{children:"month=02"}),", use wildcards (",(0,r.jsx)(n.code,{children:"*"}),") instead of range patterns. The pattern ",(0,r.jsx)(n.code,{children:"{01..12}"})," expands to ",(0,r.jsx)(n.code,{children:"{1,2,...,12}"})," which won't match ",(0,r.jsx)(n.code,{children:"month=01"}),"."]})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Match numbered file splits (e.g., Spark output):"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:'SELECT * FROM S3(\n    "uri" = "s3://my-bucket/output/part-{00000..00099}.csv",\n    "s3.access_key" = "xxx",\n    "s3.secret_key" = "xxx",\n    "s3.region" = "us-east-1",\n    "format" = "csv"\n);\n'})}),"\n",(0,r.jsx)(n.h3,{id:"broker-load-examples",children:"Broker Load Examples"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Load all CSV files matching a pattern:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:'LOAD LABEL db.label_wildcard\n(\n    DATA INFILE("s3://my-bucket/data/file_*.csv")\n    INTO TABLE my_table\n    COLUMNS TERMINATED BY ","\n    FORMAT AS "CSV"\n    (col1, col2, col3)\n)\nWITH S3 (\n    "provider" = "S3",\n    "AWS_ENDPOINT" = "s3.us-west-2.amazonaws.com",\n    "AWS_ACCESS_KEY" = "xxx",\n    "AWS_SECRET_KEY" = "xxx",\n    "AWS_REGION" = "us-west-2"\n);\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Load files using numeric range expansion:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:'LOAD LABEL db.label_range\n(\n    DATA INFILE("s3://my-bucket/exports/data_{1..5}.csv")\n    INTO TABLE my_table\n    COLUMNS TERMINATED BY ","\n    FORMAT AS "CSV"\n    (col1, col2, col3)\n)\nWITH S3 (\n    "provider" = "S3",\n    "AWS_ENDPOINT" = "s3.us-west-2.amazonaws.com",\n    "AWS_ACCESS_KEY" = "xxx",\n    "AWS_SECRET_KEY" = "xxx",\n    "AWS_REGION" = "us-west-2"\n);\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Load from HDFS with wildcards:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:'LOAD LABEL db.label_hdfs_wildcard\n(\n    DATA INFILE("hdfs://namenode:8020/user/data/2024-*/*.csv")\n    INTO TABLE my_table\n    COLUMNS TERMINATED BY ","\n    FORMAT AS "CSV"\n    (col1, col2, col3)\n)\nWITH HDFS (\n    "fs.defaultFS" = "hdfs://namenode:8020",\n    "hadoop.username" = "user"\n);\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Load from HDFS with numeric range:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:'LOAD LABEL db.label_hdfs_range\n(\n    DATA INFILE("hdfs://namenode:8020/data/file_{1..3,5,7..9}.csv")\n    INTO TABLE my_table\n    COLUMNS TERMINATED BY ","\n    FORMAT AS "CSV"\n    (col1, col2, col3)\n)\nWITH HDFS (\n    "fs.defaultFS" = "hdfs://namenode:8020",\n    "hadoop.username" = "user"\n);\n'})}),"\n",(0,r.jsx)(n.h3,{id:"insert-into-select-examples",children:"INSERT INTO SELECT Examples"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Insert from S3 with wildcards:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:'INSERT INTO my_table (col1, col2, col3)\nSELECT * FROM S3(\n    "uri" = "s3://my-bucket/data/part-*.parquet",\n    "s3.access_key" = "xxx",\n    "s3.secret_key" = "xxx",\n    "s3.region" = "us-east-1",\n    "format" = "parquet"\n);\n'})}),"\n",(0,r.jsx)(n.h2,{id:"performance-considerations",children:"Performance Considerations"}),"\n",(0,r.jsx)(n.h3,{id:"use-specific-prefixes",children:"Use Specific Prefixes"}),"\n",(0,r.jsx)(n.p,{children:"Doris extracts the longest non-wildcard prefix from your path pattern to optimize S3/HDFS listing operations. More specific prefixes result in faster file discovery."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:'-- Good: specific prefix reduces listing scope\n"uri" = "s3://bucket/data/2024/01/15/*.csv"\n\n-- Less optimal: broad wildcard at early path segment\n"uri" = "s3://bucket/data/**/file.csv"\n'})}),"\n",(0,r.jsx)(n.h3,{id:"prefer-range-patterns-for-known-sequences",children:"Prefer Range Patterns for Known Sequences"}),"\n",(0,r.jsx)(n.p,{children:"When you know the exact file numbering, use range patterns instead of wildcards:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:'-- Better: explicit range\n"uri" = "s3://bucket/data/part-{0001..0100}.csv"\n\n-- Less optimal: wildcard matches unknown files\n"uri" = "s3://bucket/data/part-*.csv"\n'})}),"\n",(0,r.jsx)(n.h3,{id:"avoid-deep-recursive-wildcards",children:"Avoid Deep Recursive Wildcards"}),"\n",(0,r.jsxs)(n.p,{children:["Deep recursive patterns like ",(0,r.jsx)(n.code,{children:"**"})," can cause slow file listing on large buckets:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:'-- Avoid when possible\n"uri" = "s3://bucket/**/*.csv"\n\n-- Prefer explicit path structure\n"uri" = "s3://bucket/data/year=*/month=*/day=*/*.csv"\n'})}),"\n",(0,r.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Issue"}),(0,r.jsx)(n.th,{children:"Cause"}),(0,r.jsx)(n.th,{children:"Solution"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"No files found"}),(0,r.jsx)(n.td,{children:"Pattern doesn't match any files"}),(0,r.jsx)(n.td,{children:"Verify the path and pattern syntax; test with a single file first"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Slow file listing"}),(0,r.jsx)(n.td,{children:"Wildcard too broad or too many files"}),(0,r.jsx)(n.td,{children:"Use more specific prefix; limit wildcard scope"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Invalid URI error"}),(0,r.jsx)(n.td,{children:"Malformed path syntax"}),(0,r.jsx)(n.td,{children:"Check URI scheme and bucket name format"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Access denied"}),(0,r.jsx)(n.td,{children:"Credentials or permissions issue"}),(0,r.jsx)(n.td,{children:"Verify S3/HDFS credentials and bucket policies"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"testing-path-patterns",children:"Testing Path Patterns"}),"\n",(0,r.jsx)(n.p,{children:"Before running a large load job, test your pattern with a limited query:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:'-- Test if files exist and match pattern\nSELECT * FROM S3(\n    "uri" = "s3://bucket/your/pattern/*.csv",\n    ...\n) LIMIT 1;\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Use ",(0,r.jsx)(n.code,{children:"DESC FUNCTION"})," to verify the schema of matched files:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:'DESC FUNCTION S3(\n    "uri" = "s3://bucket/your/pattern/*.csv",\n    ...\n);\n'})})]})}function o(e={}){let{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},250065:function(e,n,s){s.d(n,{Z:function(){return l},a:function(){return c}});var d=s(667294);let r={},i=d.createContext(r);function c(e){let n=d.useContext(i);return d.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),d.createElement(i.Provider,{value:n},e.children)}}}]);