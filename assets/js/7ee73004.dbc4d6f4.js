"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["156135"],{815597:function(e,n,s){s.r(n),s.d(n,{default:()=>h,frontMatter:()=>r,metadata:()=>i,assets:()=>d,toc:()=>o,contentTitle:()=>l});var i=JSON.parse('{"id":"ecosystem/bi/metabase","title":"Metabase","description":"Metabase is an open-source business intelligence tool that provides simple and easy-to-use data analysis and visualization capabilities, supports rich data source connections, and enables the rapid construction of interactive dashboards.","source":"@site/versioned_docs/version-4.x/ecosystem/bi/metabase.md","sourceDirName":"ecosystem/bi","slug":"/ecosystem/bi/metabase","permalink":"/docs/4.x/ecosystem/bi/metabase","draft":false,"unlisted":false,"tags":[],"version":"4.x","lastUpdatedAt":1770477659000,"frontMatter":{"title":"Metabase","language":"en","description":"Metabase is an open-source business intelligence tool that provides simple and easy-to-use data analysis and visualization capabilities, supports rich data source connections, and enables the rapid construction of interactive dashboards."},"sidebar":"docs","previous":{"title":"FineBI","permalink":"/docs/4.x/ecosystem/bi/finebi"},"next":{"title":"Power BI","permalink":"/docs/4.x/ecosystem/bi/powerbi"}}'),t=s("785893"),a=s("250065");let r={title:"Metabase",language:"en",description:"Metabase is an open-source business intelligence tool that provides simple and easy-to-use data analysis and visualization capabilities, supports rich data source connections, and enables the rapid construction of interactive dashboards."},l=void 0,d={},o=[{value:"Installing Metabase and the Doris Driver",id:"installing-metabase-and-the-doris-driver",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Install the Doris Driver",id:"install-the-doris-driver",level:3},{value:"Metabase Standard Deployment",id:"metabase-standard-deployment",level:4},{value:"Metabase Docker Deployment",id:"metabase-docker-deployment",level:4},{value:"Configuring a Doris Data Source in Metabase",id:"configuring-a-doris-data-source-in-metabase",level:2},{value:"Connection Parameter Description",id:"connection-parameter-description",level:3},{value:"Configuration Steps",id:"configuration-steps",level:3},{value:"Building Visualizations in Metabase",id:"building-visualizations-in-metabase",level:2},{value:"Creating a Question",id:"creating-a-question",level:3},{value:"Building Custom Metrics Using SQL",id:"building-custom-metrics-using-sql",level:3},{value:"Configure Visualization Charts",id:"configure-visualization-charts",level:3},{value:"Creating a Dashboard",id:"creating-a-dashboard",level:3},{value:"Advanced Features",id:"advanced-features",level:2},{value:"Accessing External Data Using Catalogs",id:"accessing-external-data-using-catalogs",level:3},{value:"Using Parameterized Queries",id:"using-parameterized-queries",level:3},{value:"Performance Optimization Recommendations",id:"performance-optimization-recommendations",level:3},{value:"Connection and Usage Tips",id:"connection-and-usage-tips",level:3},{value:"Data Type Display Anomalies",id:"data-type-display-anomalies",level:3}];function c(e){let n={a:"a",br:"br",code:"code",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"Metabase is an open-source business intelligence tool that provides simple and easy-to-use data analysis and visualization capabilities, supports rich data source connections, and enables the rapid construction of interactive dashboards. Its key features include a user-friendly interface, ease of use, support for self-service analysis, visualization dashboard creation, data drill-down exploration, and an integrated SQL query editor for SQL queries and data export."}),"\n",(0,t.jsx)(n.p,{children:"The Metabase Apache Doris Driver allows Metabase to connect to Apache Doris databases, enabling querying and visualization of both internal and external Doris data."}),"\n",(0,t.jsx)(n.p,{children:"This driver allows Metabase to integrate Apache Doris databases and tables as data sources. To enable this feature, follow the setup guide below:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Installing and configuring the driver"}),"\n",(0,t.jsx)(n.li,{children:"Configuring the Apache Doris data source in Metabase"}),"\n",(0,t.jsx)(n.li,{children:"Building visualizations in Metabase"}),"\n",(0,t.jsx)(n.li,{children:"Connection and usage tips"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"installing-metabase-and-the-doris-driver",children:"Installing Metabase and the Doris Driver"}),"\n",(0,t.jsx)(n.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Download and install Metabase version 0.48.0 or later. See the ",(0,t.jsx)(n.a,{href:"https://www.metabase.com/docs/latest/installation-and-operation/installing-metabase",children:"Metabase Installation Documentation"})," for details."]}),"\n",(0,t.jsx)(n.li,{children:"Prepare the Apache Doris cluster."}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"install-the-doris-driver",children:"Install the Doris Driver"}),"\n",(0,t.jsxs)(n.p,{children:["First, you need to download the latest ",(0,t.jsx)(n.a,{href:"https://velodb-bi-connector-1316291683.cos.ap-hongkong.myqcloud.com/Metabase/latest/doris.metabase-driver.jar",children:"metabase-doris-driver"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"Then install the driver. The installation method depends on your Metabase deployment method:"}),"\n",(0,t.jsx)(n.h4,{id:"metabase-standard-deployment",children:"Metabase Standard Deployment"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Download the Driver"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Create the Metabase plugin directory (if it doesn't exist):"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"mkdir -p $path_metabase/plugins\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"3",children:["\n",(0,t.jsx)(n.li,{children:"Copy the JAR file to the plugin directory:"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cp doris.metabase-driver.jar $path_metabase/plugins\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"4",children:["\n",(0,t.jsx)(n.li,{children:"Restart the Metabase service"}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"metabase-docker-deployment",children:"Metabase Docker Deployment"}),"\n",(0,t.jsxs)(n.p,{children:["If Metabase is started using Docker, it is recommended to start it by mounting ",(0,t.jsx)(n.code,{children:"doris.metabase-driver.jar"}),". The plugin path inside the Docker container is ",(0,t.jsx)(n.code,{children:"/plugins/"}),"."]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Download the Driver"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Start Metabase using the following command:"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"docker run -d -p 3000:3000 --name metabase  -v $host_path/doris.metabase-driver.jar:/plugins/doris.metabase-driver.jar  metabase/metabase\n"})}),"\n",(0,t.jsx)(n.h2,{id:"configuring-a-doris-data-source-in-metabase",children:"Configuring a Doris Data Source in Metabase"}),"\n",(0,t.jsxs)(n.p,{children:["Now that you have ",(0,t.jsx)(n.strong,{children:"Metabase"})," and ",(0,t.jsx)(n.strong,{children:"metabase-doris-driver"})," installed, let's see how to define a data source in Metabase that connects to the tpch database in Doris."]}),"\n",(0,t.jsx)(n.h3,{id:"connection-parameter-description",children:"Connection Parameter Description"}),"\n",(0,t.jsx)(n.p,{children:"The following parameters need to be configured when connecting to Apache Doris:"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Parameters"}),(0,t.jsx)(n.th,{children:"Meaning"}),(0,t.jsx)(n.th,{children:"Example"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Display Name"})}),(0,t.jsx)(n.td,{children:"Data source display name"}),(0,t.jsx)(n.td,{children:"Doris-TPCH"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Host"})}),(0,t.jsx)(n.td,{children:"Doris FE node address"}),(0,t.jsx)(n.td,{children:"127.0.0.1"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Port"})}),(0,t.jsx)(n.td,{children:"Doris Query Port (MySQL protocol port)"}),(0,t.jsx)(n.td,{children:"9030"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Catalog name"})}),(0,t.jsx)(n.td,{children:"Catalog name (optional, defaults to internal)"}),(0,t.jsx)(n.td,{children:"internal"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Database name"})}),(0,t.jsx)(n.td,{children:"Database name (required)"}),(0,t.jsx)(n.td,{children:"tpch"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Username"})}),(0,t.jsx)(n.td,{children:"Username"}),(0,t.jsx)(n.td,{children:"root"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Password"})}),(0,t.jsx)(n.td,{children:"Password"}),(0,t.jsx)(n.td,{children:"your_password"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Database Name Format Explanation:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Internal Tables"}),": Enter the database name directly, such as ",(0,t.jsx)(n.code,{children:"tpch"}),". The system will automatically use the ",(0,t.jsx)(n.code,{children:"internal"})," catalog."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"External Tables/Data Lake"}),": Enter the Catalog configuration. If only linking internal tables, this item is not required."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"configuration-steps",children:"Configuration Steps"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Start Metabase and log in."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Click the gear icon in the upper right corner and select ",(0,t.jsx)(n.strong,{children:"Admin Settings"}),"."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Metabase Admin Settings",src:s(241498).Z+"",width:"1440",height:"754"})}),"\n",(0,t.jsxs)(n.ol,{start:"3",children:["\n",(0,t.jsxs)(n.li,{children:["In the left-hand menu, select ",(0,t.jsx)(n.strong,{children:"Databases"}),", and click the ",(0,t.jsx)(n.strong,{children:"Add database"})," button in the upper right corner."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Add database",src:s(129662).Z+"",width:"1433",height:"593"})}),"\n",(0,t.jsxs)(n.ol,{start:"4",children:["\n",(0,t.jsxs)(n.li,{children:["In the ",(0,t.jsx)(n.strong,{children:"Database type"})," dropdown menu, select ",(0,t.jsx)(n.strong,{children:"Apache Doris"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Select Apache Doris",src:s(251092).Z+"",width:"905",height:"473"})}),"\n",(0,t.jsxs)(n.ol,{start:"5",children:["\n",(0,t.jsx)(n.li,{children:"Fill in the connection information:"}),"\n"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Display name"}),": Doris-TPCH"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Host"}),": 127.0.0.1"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Port"}),": 9030"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Database name"}),": tpch"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Username"}),": admin"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Password"}),": ******"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Fill in connection information",src:s(218362).Z+"",width:"813",height:"669"})}),"\n",(0,t.jsxs)(n.ol,{start:"6",children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Click ",(0,t.jsx)(n.strong,{children:"Save"})," to save the configuration."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Metabase will automatically test the connection and synchronize database metadata. If the connection is successful, a success message will be displayed."}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Connection successful",src:s(920951).Z+"",width:"1429",height:"738"})}),"\n",(0,t.jsx)(n.p,{children:"At this point, the data source configuration is complete! Next, we can build visualizations in Metabase."}),"\n",(0,t.jsx)(n.h2,{id:"building-visualizations-in-metabase",children:"Building Visualizations in Metabase"}),"\n",(0,t.jsxs)(n.p,{children:["We choose TPC-H data as the data source. Refer to ",(0,t.jsx)(n.a,{href:"../../benchmark/tpch",children:"this document"})," for instructions on building the Doris TPC-H data source."]}),"\n",(0,t.jsx)(n.p,{children:"Now that we have configured the Doris data source in Metabase, let's visualize the data..."}),"\n",(0,t.jsx)(n.p,{children:"Suppose we need to analyze the order amount growth curve over time for different freight methods for cost analysis."}),"\n",(0,t.jsx)(n.h3,{id:"creating-a-question",children:"Creating a Question"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Click the ",(0,t.jsx)(n.strong,{children:"New +"})," button in the upper right corner of the homepage and select ",(0,t.jsx)(n.strong,{children:"Question"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Create a new question",src:s(519016).Z+"",width:"1428",height:"650"})}),"\n",(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsxs)(n.li,{children:["Select the data source:\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Database"}),": Doris TPCH"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Table"}),": lineitem"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Select the table",src:s(106717).Z+"",width:"1440",height:"754"})}),"\n",(0,t.jsx)(n.h3,{id:"building-custom-metrics-using-sql",children:"Building Custom Metrics Using SQL"}),"\n",(0,t.jsx)(n.p,{children:"To calculate revenue, we need to use a custom SQL expression:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Click the ",(0,t.jsx)(n.strong,{children:"view sql"})," switch in the upper right corner, then click ",(0,t.jsx)(n.strong,{children:"convert this question to SQL"})," to edit the SQL."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Switch to SQL mode",src:s(424706).Z+"",width:"1440",height:"754"})}),"\n",(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsx)(n.li,{children:"Enter the following SQL query:"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"SELECT \n  DATE_FORMAT(l_shipdate, '%Y-%m') AS ship_month,\n  l_shipmode,\n  SUM(l_extendedprice * (1 - l_discount)) AS revenue\nFROM lineitem\nWHERE l_shipdate >= '1995-01-01' \n  AND l_shipdate < '1997-01-01'\nGROUP BY \n  DATE_FORMAT(l_shipdate, '%Y-%m'),\n  l_shipmode\nORDER BY ship_month, l_shipmode\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"3",children:["\n",(0,t.jsxs)(n.li,{children:["Click the ",(0,t.jsx)(n.strong,{children:"Visualize"})," button in the lower right corner to view the results."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"View Results",src:s(655042).Z+"",width:"1440",height:"754"})}),"\n",(0,t.jsx)(n.h3,{id:"configure-visualization-charts",children:"Configure Visualization Charts"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["The default display is a table. Click the ",(0,t.jsx)(n.strong,{children:"Visualization"})," button in the lower left corner and select the ",(0,t.jsx)(n.strong,{children:"Line"})," chart type."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Select Line Chart",src:s(792990).Z+"",width:"1440",height:"754"})}),"\n",(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Configure chart parameters as needed (metabase automatically configures as follows):"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"X-axis"}),": ship_month (shipping month)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Y-axis"}),": revenue (revenue)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Series"}),": l_shipmode (shipping mode)"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Customize chart style:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Click the ",(0,t.jsx)(n.strong,{children:"Settings"})," icon to adjust colors, labels, legend position, etc."]}),"\n",(0,t.jsxs)(n.li,{children:["In the ",(0,t.jsx)(n.strong,{children:"Display"})," tab, you can set axis titles, value formats, etc."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["After configuring the chart, click ",(0,t.jsx)(n.strong,{children:"Save"})," in the upper right corner."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Enter the issue name: ",(0,t.jsx)(n.strong,{children:"my-tpch"}),", and select the collection to save to."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Naming the issue",src:s(203892).Z+"",width:"1440",height:"754"})}),"\n",(0,t.jsx)(n.h3,{id:"creating-a-dashboard",children:"Creating a Dashboard"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Click ",(0,t.jsx)(n.strong,{children:"+ New"})," \u2192 ",(0,t.jsx)(n.strong,{children:"Dashboard"})," to create a new dashboard. Enter the dashboard name: ",(0,t.jsx)(n.strong,{children:"my-tpch"})]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Creating a Dashboard",src:s(746780).Z+"",width:"1440",height:"754"})}),"\n",(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsxs)(n.li,{children:["Click ",(0,t.jsx)(n.strong,{children:"Add a chart"})," to add the saved question to the dashboard."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Adding a Question",src:s(157323).Z+"",width:"1440",height:"754"})}),"\n",(0,t.jsxs)(n.ol,{start:"3",children:["\n",(0,t.jsxs)(n.li,{children:["Adjust the chart position and size, and click ",(0,t.jsx)(n.strong,{children:"Save"})," in the upper right corner to save the dashboard."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Saving the Dashboard",src:s(352481).Z+"",width:"1440",height:"754"})}),"\n",(0,t.jsx)(n.p,{children:"At this point, Metabase has been successfully connected to Apache Doris, and data analysis and visualization dashboard creation have been implemented!"}),"\n",(0,t.jsx)(n.h2,{id:"advanced-features",children:"Advanced Features"}),"\n",(0,t.jsx)(n.h3,{id:"accessing-external-data-using-catalogs",children:"Accessing External Data Using Catalogs"}),"\n",(0,t.jsx)(n.p,{children:"Doris supports multi-catalog functionality, allowing queries to external data sources and cross-data source queries. When using it in Metabase:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Configure ",(0,t.jsx)(n.code,{children:"Catalog"})," in the Links configuration interface, and configure the external database under that catalog in ",(0,t.jsx)(n.code,{children:"Database"}),", for example:",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.code,{children:"catalog: hive_catalog"}),", ",(0,t.jsx)(n.code,{children:"database: warehouse"})," - Access the warehouse database named hive_catalog"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Configuring catalog",src:s(438348).Z+"",width:"801",height:"651"})}),"\n",(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsx)(n.li,{children:"Or explicitly specify the Catalog in an SQL query:"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"SELECT * FROM hive.warehouse.orders LIMIT 100;\n"})}),"\n",(0,t.jsx)(n.h3,{id:"using-parameterized-queries",children:"Using Parameterized Queries"}),"\n",(0,t.jsx)(n.p,{children:"Metabase supports using variables in SQL queries, making it easy to create interactive dashboards:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"SELECT \n  l_shipmode,\n  SUM(l_extendedprice * (1 - l_discount)) AS revenue\nFROM lineitem\nWHERE l_shipdate BETWEEN {{start_date}} AND {{end_date}}\n  AND l_shipmode = {{ship_mode}}\nGROUP BY l_shipmode\n"})}),"\n",(0,t.jsx)(n.p,{children:"After saving, data can be dynamically filtered in the dashboard using dropdown menus or date pickers."}),"\n",(0,t.jsx)(n.h3,{id:"performance-optimization-recommendations",children:"Performance Optimization Recommendations"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Use Partition Clipping"}),": Add a partition column filter condition to the WHERE clause."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"WHERE date >= '2024-01-01' AND date < '2024-02-01'\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Utilize Materialized Views:"})," For complex aggregation queries, creating materialized views in Doris can accelerate the query process."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Control Result Set Size:"})," Use LIMIT to limit the number of rows returned, avoiding loading too much data at once."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Query Caching:"})," Metabase automatically caches query results; setting appropriate cache times can improve performance."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"connection-and-usage-tips",children:"Connection and Usage Tips"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Driver Installation:"})," Ensure ",(0,t.jsx)(n.code,{children:"doris.metabase-driver.jar"})," is placed in the Metabase ",(0,t.jsx)(n.code,{children:"plugins"})," directory and restart Metabase."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Time Zone Settings:"})," If you encounter time zone issues, add ",(0,t.jsx)(n.code,{children:"serverTimezone=Asia/Shanghai"})," to the JDBC connection string."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Partitioned Table Optimization:"})," Creating appropriate Doris partitioned tables, dividing them by time and bucketing them, can effectively reduce the amount of data scanned in queries."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Network Connection:"})," It is recommended to use a VPC private connection to avoid security risks introduced by public network access."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Access Control:"})," Fine-tune Doris user account roles and access permissions, following the principle of least privilege."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Metadata Synchronization:"}),' When Doris... When the table structure changes, manually synchronize it by clicking "Sync database schema now" on the Metabase management page.']}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Performance Monitoring"}),": For slow queries, you can use ",(0,t.jsx)(n.code,{children:"SHOW QUERY PROFILE"})," in Doris to analyze performance bottlenecks."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"data-type-display-anomalies",children:"Data Type Display Anomalies"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Ensure you are using the latest version of the Doris Driver."}),"\n",(0,t.jsxs)(n.li,{children:["Doris largeint types need to be explicitly converted in SQL.\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"SELECT CAST(large_int_col AS STRING) FROM table\n"})}),"\n"]}),"\n"]})]})}function h(e={}){let{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},241498:function(e,n,s){s.d(n,{Z:function(){return i}});let i=s.p+"assets/images/metabase-01-6be6635aac3f5fe5ee55641bc7f8f371.png"},129662:function(e,n,s){s.d(n,{Z:function(){return i}});let i=s.p+"assets/images/metabase-02-d172e5f5098b13e7154dd9cf7f7f1c81.png"},251092:function(e,n,s){s.d(n,{Z:function(){return i}});let i=s.p+"assets/images/metabase-03-d7b750c0373c5d281bc087c04ff358ce.png"},218362:function(e,n,s){s.d(n,{Z:function(){return i}});let i=s.p+"assets/images/metabase-04-329aeefa905a888aab99314c2142b909.png"},920951:function(e,n,s){s.d(n,{Z:function(){return i}});let i=s.p+"assets/images/metabase-05-e0e00603650714c2cb2651c932e555f0.png"},519016:function(e,n,s){s.d(n,{Z:function(){return i}});let i=s.p+"assets/images/metabase-06-1bad7f9fa6385a503ad80e1576d64980.png"},106717:function(e,n,s){s.d(n,{Z:function(){return i}});let i=s.p+"assets/images/metabase-07-614e056a99101d7d1095fdad609ddaa6.png"},424706:function(e,n,s){s.d(n,{Z:function(){return i}});let i=s.p+"assets/images/metabase-08-01ad9794d12b20f8e7ff559ea047c282.png"},655042:function(e,n,s){s.d(n,{Z:function(){return i}});let i=s.p+"assets/images/metabase-09-204067610042f9fcb65f0305261d1cd1.png"},792990:function(e,n,s){s.d(n,{Z:function(){return i}});let i=s.p+"assets/images/metabase-10-0e7113aadb2c6f1e0fcb4582dc5df3ad.png"},203892:function(e,n,s){s.d(n,{Z:function(){return i}});let i=s.p+"assets/images/metabase-11-aeba2d0aec14dca5ac3997ee1016b3d9.png"},746780:function(e,n,s){s.d(n,{Z:function(){return i}});let i=s.p+"assets/images/metabase-12-c1118d133a5a560759aacdced108ba09.png"},157323:function(e,n,s){s.d(n,{Z:function(){return i}});let i=s.p+"assets/images/metabase-13-4ad8333aa0a74f3e1cbcf649e78538a1.png"},352481:function(e,n,s){s.d(n,{Z:function(){return i}});let i=s.p+"assets/images/metabase-14-97e319bef0e007fbe7b16262b6ec1e5a.png"},438348:function(e,n,s){s.d(n,{Z:function(){return i}});let i=s.p+"assets/images/metabase-15-38e095ef2274e1d17dbde44d104f168b.png"},250065:function(e,n,s){s.d(n,{Z:function(){return l},a:function(){return r}});var i=s(667294);let t={},a=i.createContext(t);function r(e){let n=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);