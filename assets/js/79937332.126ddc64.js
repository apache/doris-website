"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["423620"],{285595:function(e,n,s){s.r(n),s.d(n,{default:()=>h,frontMatter:()=>r,metadata:()=>i,assets:()=>d,toc:()=>c,contentTitle:()=>t});var i=JSON.parse('{"id":"sql-manual/basic-element/variables","title":"Variables","description":"Description","source":"@site/docs/sql-manual/basic-element/variables.md","sourceDirName":"sql-manual/basic-element","slug":"/sql-manual/basic-element/variables","permalink":"/docs/dev/sql-manual/basic-element/variables","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Variables","language":"en"},"sidebar":"docs","previous":{"title":"Reserved Keywords","permalink":"/docs/dev/sql-manual/basic-element/reserved-keywords"},"next":{"title":"Comments","permalink":"/docs/dev/sql-manual/basic-element/comments"}}'),l=s("785893"),a=s("250065");let r={title:"Variables",language:"en"},t=void 0,d={},c=[{value:"Description",id:"description",level:2},{value:"System Variables",id:"system-variables",level:2},{value:"User-Defined Variables",id:"user-defined-variables",level:2},{value:"System Variable Definitions and Query Statements",id:"system-variable-definitions-and-query-statements",level:2},{value:"User Variable Definition and Query Statements",id:"user-variable-definition-and-query-statements",level:2}];function o(e){let n={code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.a)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h2,{id:"description",children:"Description"}),"\n",(0,l.jsx)(n.p,{children:"In Doris, variables are divided into system variables and user variables. Both are case-insensitive."}),"\n",(0,l.jsx)(n.p,{children:"System variables affect the behavior of Doris. Both system variables and user variables can be used in user queries."}),"\n",(0,l.jsx)(n.h2,{id:"system-variables",children:"System Variables"}),"\n",(0,l.jsx)(n.p,{children:"System variables are a set of variables predefined by Doris to control database behavior and performance. The main features are as follows:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Variable Types:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["Read-only variables: These variables are set by the system and cannot be modified by users, such as ",(0,l.jsx)(n.code,{children:"version"}),", ",(0,l.jsx)(n.code,{children:"current_timestamp"}),", etc."]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["Modifiable variables: Users can modify the values of these variables at runtime, such as ",(0,l.jsx)(n.code,{children:"exec_mem_limit"}),", ",(0,l.jsx)(n.code,{children:"time_zone"}),", etc."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Scope:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["Global variables (Global): Affect all sessions and set with ",(0,l.jsx)(n.code,{children:"SET GLOBAL"}),"."]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["Session variables (Session): Only affect the current session and set with ",(0,l.jsx)(n.code,{children:"SET"}),"."]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Some variables have both global and session scopes."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Access Methods:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["Use ",(0,l.jsx)(n.code,{children:"SHOW VARIABLES"})," to view all system variables."]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["Use ",(0,l.jsx)(n.code,{children:"SHOW VARIABLES LIKE 'pattern'"})," to view specific variables by pattern matching."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Persistence:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Modifications to global variables are reset to default values after a system restart; session restarts do not reset to default values."}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Changes to session variables are lost after the session ends."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"user-defined-variables",children:"User-Defined Variables"}),"\n",(0,l.jsx)(n.p,{children:"User-defined variables are a mechanism for temporarily storing data within a session. The main features are as follows:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Naming Rules:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["Must be prefixed with ",(0,l.jsx)(n.code,{children:"@"}),"."]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Variable names can include letters, numbers, and underscores."}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Case-insensitive."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Scope:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Only valid within the current session."}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Automatically destroyed after the session ends."}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Variables with the same name in different sessions are independent of each other."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Assignment Methods:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["Use ",(0,l.jsx)(n.code,{children:"SET @var_name = value"})," syntax for assignment."]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Supports assigning values using expression results."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Data Types:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Can store numbers (integers, floating-point numbers)."}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Can store strings."}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Can store date-time values."}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Can store NULL values."}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"The type is automatically determined at assignment."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"system-variable-definitions-and-query-statements",children:"System Variable Definitions and Query Statements"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"SHOW VARIABLES"}),"\n",(0,l.jsxs)(n.p,{children:["You can view variables with ",(0,l.jsx)(n.code,{children:"SHOW VARIABLES LIKE 'variable_name'"}),"."]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"SHOW VARIABLES LIKE '%time_zone%';\n+------------------+----------------+----------------+---------+\n| Variable_name    | Value          | Default_Value  | Changed |\n+------------------+----------------+----------------+---------+\n| system_time_zone | Asia/Hong_Kong | Asia/Hong_Kong | 0       |\n| time_zone        | Asia/Hong_Kong | Asia/Hong_Kong | 0       |\n+------------------+----------------+----------------+---------+\n"})}),"\n",(0,l.jsxs)(n.p,{children:["Or view all variables with ",(0,l.jsx)(n.code,{children:"SHOW VARIABLES"}),"."]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"SHOW VARIABLES\n+------------------------------------------------------------------+---------------------------------------+---------------------------------------+---------+\n| Variable_name                                                    | Value                                 | Default_Value                         | Changed |\n+------------------------------------------------------------------+---------------------------------------+---------------------------------------+---------+\n| DML_PLAN_RETRY_TIMES                                             | 3                                     | 3                                     | 0       |\n| adaptive_pipeline_task_serial_read_on_limit                      | 10000                                 | 10000                                 | 0       |\n| allow_modify_materialized_view                              | false                                 | false                                 | 0       |\n| allow_partition_column_nullable                            | true                                  | true                                  | 0       |\n| analyze_timeout                                           | 43200                                 | 43200                                 | 0       |\n| version                                                      | 5.7.99                                | 5.7.99                                | 0       |\n| version_comment                                                | Doris version doris0.0.0--de61c5823 | Doris version doris-0.0--de61c5823 | 0       |\n| wait_full_block_schedule_times                                 | 2                                     | 2                                     | 0       |\n| wait_timeout                                               | 28800                                 | 28800                                 | 0       |\n| workload_group                                                 |                                       |                                       | 0       |\n+------------------------------------------------------------------+---------------------------------------+---------------------------------------+---------+\n360 rows in set (0.01 sec)\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"SET"}),"\n",(0,l.jsx)(n.p,{children:"Some variables can be set to take effect globally or only in the current session."}),"\n",(0,l.jsxs)(n.p,{children:["Set to take effect only in the current session with ",(0,l.jsx)(n.code,{children:"SET"}),". For example:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"SET exec_mem_limit = 137438953472;\nSHOW VARIABLES LIKE '%exec_mem_limit%';\n+----------------+--------------+---------------+---------+\n| Variable_name  | Value        | Default_Value | Changed |\n+----------------+--------------+---------------+---------+\n| exec_mem_limit | 137438953472 | 2147483648    | 1       |\n+----------------+--------------+---------------+---------+\n1 row in set (0.01 sec)\nSET forward_to_master = true;\nSHOW VARIABLES LIKE '%forward_to_master%';\n+-------------------+-------+---------------+---------+\n| Variable_name     | Value | Default_Value | Changed |\n+-------------------+-------+---------------+---------+\n| forward_to_master | true  | true          | 0       |\n+-------------------+-------+---------------+---------+\n1 row in set (0.00 sec)\nSET time_zone = \"Asia/Shanghai\";\nSHOW VARIABLES LIKE '%time_zone%';\n+------------------+----------------+----------------+---------+\n| Variable_name    | Value          | Default_Value  | Changed |\n+------------------+----------------+----------------+---------+\n| time_zone        | Asia/Shanghai  | Asia/Hong_Kong | 1       |\n| system_time_zone | Asia/Hong_Kong | Asia/Hong_Kong | 0       |\n+------------------+----------------+----------------+---------+\n2 rows in set (0.00 sec)\n"})}),"\n",(0,l.jsx)(n.p,{children:"Set globally"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"SET GLOBAL exec_mem_limit = 137438953472;\nSHOW VARIABLES LIKE '%exec_mem_limit%';\n+----------------+--------------+---------------+---------+\n| Variable_name  | Value        | Default_Value | Changed |\n+----------------+--------------+---------------+---------+\n| exec_mem_limit | 137438953472 | 2147483648    | 1       |\n+----------------+--------------+---------------+---------+\n1 row in set (0.01 sec)\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"UNSET"}),"\n",(0,l.jsx)(n.p,{children:"Syntax:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"UNSET (GLOBAL | SESSION | LOCAL)? VARIABLE (ALL | identifier)\nunset global variable exec_mem_limit;\nSHOW VARIABLES LIKE '%exec_mem_limit%';\n+----------------+------------+---------------+---------+\n| Variable_name  | Value      | Default_Value | Changed |\n+----------------+------------+---------------+---------+\n| exec_mem_limit | 2147483648 | 2147483648    | 0       |\n+----------------+------------+---------------+---------+\n1 row in set (0.00 sec)\n"})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"user-variable-definition-and-query-statements",children:"User Variable Definition and Query Statements"}),"\n",(0,l.jsx)(n.p,{children:"User-defined variables can be defined with the following statement:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"SET @var_name = constant_value|constant_expr;\n"})}),"\n",(0,l.jsx)(n.p,{children:"Setting examples:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:'SET @v1 = "A";\nSET @v2 = 32+33;\nSET @v3 = str_to_date("2024-12-29 10:11:12", \'%Y-%m-%d %H:%i:%s\');\n'})}),"\n",(0,l.jsx)(n.p,{children:"Can be used in queries"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"SELECT @v1, @v2, @v3;\n+------+------+--------------------+\n| @v1  | @v2  | @v3                 |\n+------+------+--------------------+\n| A    |   65 | 2024-12-29 10:11:12 |\n+------+------+--------------------+\n1 row in set (0.01 sec)\n"})})]})}function h(e={}){let{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(o,{...e})}):o(e)}},250065:function(e,n,s){s.d(n,{Z:function(){return t},a:function(){return r}});var i=s(667294);let l={},a=i.createContext(l);function r(e){let n=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);