"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["499886"],{200028:function(e,i,n){n.r(i),n.d(i,{default:()=>d,frontMatter:()=>s,metadata:()=>t,assets:()=>l,toc:()=>c,contentTitle:()=>o});var t=JSON.parse('{"id":"query-acceleration/hints/hints-overview","title":"Overview of Hints","description":"Database Hints are query optimization techniques used to guide the database query optimizer on how to generate a specific plan. By providing Hints,","source":"@site/versioned_docs/version-4.x/query-acceleration/hints/hints-overview.md","sourceDirName":"query-acceleration/hints","slug":"/query-acceleration/hints/hints-overview","permalink":"/docs/4.x/query-acceleration/hints/hints-overview","draft":false,"unlisted":false,"tags":[],"version":"4.x","lastUpdatedAt":1770477659000,"frontMatter":{"title":"Overview of Hints","language":"en","description":"Database Hints are query optimization techniques used to guide the database query optimizer on how to generate a specific plan. By providing Hints,"},"sidebar":"docs","previous":{"title":"Colocation Join","permalink":"/docs/4.x/query-acceleration/colocation-join"},"next":{"title":"Leading Hint","permalink":"/docs/4.x/query-acceleration/hints/leading-hint"}}'),r=n("785893"),a=n("250065");let s={title:"Overview of Hints",language:"en",description:"Database Hints are query optimization techniques used to guide the database query optimizer on how to generate a specific plan. By providing Hints,"},o=void 0,l={},c=[{value:"Hint Classification",id:"hint-classification",level:2},{value:"Hint Example",id:"hint-example",level:2},{value:"Hint Log",id:"hint-log",level:2},{value:"Summary",id:"summary",level:2}];function h(e){let i={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.p,{children:"Database Hints are query optimization techniques used to guide the database query optimizer on how to generate a specific plan. By providing Hints, users can fine-tune the default behavior of the query optimizer in hopes of achieving better performance or meeting specific requirements."}),"\n",(0,r.jsx)(i.admonition,{title:"Note",type:"caution",children:(0,r.jsx)(i.p,{children:"Currently, Doris possesses excellent out-of-the-box capabilities. In most scenarios, Doris adaptively optimizes performance across various situations without requiring users to manually control hints for business tuning. The content presented in this chapter is primarily intended for professional tuning personnel. Business users can have a brief understanding of it."})}),"\n",(0,r.jsx)(i.h2,{id:"hint-classification",children:"Hint Classification"}),"\n",(0,r.jsx)(i.p,{children:"Doris currently supports several types of hints, including leading hint, ordered hint, and distribute hint:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.a,{href:"/docs/4.x/query-acceleration/hints/leading-hint",children:"Leading Hint"}),"\uFF1ASpecifies the join order according to the order provided in the leading hint."]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.a,{href:"/docs/4.x/query-acceleration/hints/leading-hint",children:"Ordered Hint"}),"\uFF1AA specific type of leading hint that specifies the join order as the original text sequence."]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.a,{href:"/docs/4.x/query-acceleration/hints/distribute-hint",children:"Distribute Hint"}),"\uFF1ASpecifies the data distribution method for joins as either shuffle or broadcast."]}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"hint-example",children:"Hint Example"}),"\n",(0,r.jsx)(i.p,{children:"Imagine a table with a large amount of data. In certain specific cases, you may know that the join order of the tables can affect query performance. In such situations, the Leading Hint allows you to specify the table join order you want the optimizer to follow."}),"\n",(0,r.jsx)(i.p,{children:"Take the following SQL query as an example. If the execution efficiency is not ideal, you may want to adjust the join order without changing the original SQL to avoid impacting the user's original scenario and achieve tuning goals."}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-sql",children:"mysql> explain shape plan select * from t1 join t2 on t1.c1 = c2;\r\n+-------------------------------------------+\r\n| Explain String                            |\r\n+-------------------------------------------+\r\n| PhysicalResultSink                        |\r\n| --PhysicalDistribute                      |\r\n| ----PhysicalProject                       |\r\n| ------hashJoin[INNER_JOIN](t1.c1 = t2.c2) |\r\n| --------PhysicalOlapScan[t2]              |\r\n| --------PhysicalDistribute                |\r\n| ----------PhysicalOlapScan[t1]            |\r\n+-------------------------------------------+\n"})}),"\n",(0,r.jsx)(i.p,{children:"In this case, we can use the Leading Hint to arbitrarily change the join order of t1 and t2. For example:"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-sql",children:"mysql> explain shape plan select  /*+ leading(t2 t1) */ * from t1 join t2 on t1.c1 = c2;\r\n+-----------------------------------------------------------------------------------------------------+\r\n| Explain String(Nereids Planner)                                                                     |\r\n+-----------------------------------------------------------------------------------------------------+\r\n| PhysicalResultSink                                                                                  |\r\n| --PhysicalDistribute                                                                                |\r\n| ----PhysicalProject                                                                                 |\r\n| ------hashJoin[INNER_JOIN] hashCondition=((t1.c1 = t2.c2)) otherCondition=() build RFs:RF0 c1->[c2] |\r\n| --------PhysicalOlapScan[t2] apply RFs: RF0                                                         |\r\n| --------PhysicalDistribute                                                                          |\r\n| ----------PhysicalOlapScan[t1]                                                                      |\r\n|                                                                                                     |\r\n| Hint log:                                                                                           |\r\n| Used: leading(t2 t1)                                                                                |\r\n| UnUsed:                                                                                             |\r\n| SyntaxError:                                                                                        |\r\n+-----------------------------------------------------------------------------------------------------+\n"})}),"\n",(0,r.jsxs)(i.p,{children:["In this example, the Leading Hint ",(0,r.jsx)(i.code,{children:"/*+ leading(t2 t1) */"})," is used. The Leading Hint informs the optimizer to use the specified table (t2) as the driving table and place it before (t1) in the execution plan."]}),"\n",(0,r.jsx)(i.h2,{id:"hint-log",children:"Hint Log"}),"\n",(0,r.jsxs)(i.p,{children:["The Hint Log is primarily used to display whether the hint is effective when executing ",(0,r.jsx)(i.code,{children:"EXPLAIN"}),". It is usually located at the bottom of the ",(0,r.jsx)(i.code,{children:"EXPLAIN"})," output."]}),"\n",(0,r.jsx)(i.p,{children:"Hint Log has three statuses:"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-sql",children:"+---------------------------------+\r\n| Hint log:                       |\r\n| Used:                           |\r\n| UnUsed:                         |\r\n| SyntaxError:                    |\r\n+---------------------------------+\n"})}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"Used"}),"\uFF1AIndicates that the hint is effective."]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"UnUsed"})," \u548C ",(0,r.jsx)(i.code,{children:"SyntaxError"}),"\uFF1ABoth indicate that the hint is not effective. SyntaxError indicates that there is a syntax error in using the hint or the syntax is not supported, and additional information about the unsupported reason will be provided."]}),"\n"]}),"\n",(0,r.jsx)(i.p,{children:"Users can view the effectiveness and reasons for non-effectiveness through the Hint log, facilitating adjustments and verification."}),"\n",(0,r.jsx)(i.h2,{id:"summary",children:"Summary"}),"\n",(0,r.jsx)(i.p,{children:"Hints are powerful tools for manually managing execution plans. Currently, Doris supports leading hint, ordered hint, distribute hint, etc., enabling users to manually manage join order, shuffle methods, and other variable configurations, providing users with more convenient and effective operational capabilities."})]})}function d(e={}){let{wrapper:i}={...(0,a.a)(),...e.components};return i?(0,r.jsx)(i,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},250065:function(e,i,n){n.d(i,{Z:function(){return o},a:function(){return s}});var t=n(667294);let r={},a=t.createContext(r);function s(e){let i=t.useContext(a);return t.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function o(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),t.createElement(a.Provider,{value:i},e.children)}}}]);