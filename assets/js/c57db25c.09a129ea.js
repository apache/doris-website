"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["249386"],{188599:function(e,n,r){r.r(n),r.d(n,{default:()=>d,frontMatter:()=>l,metadata:()=>t,assets:()=>c,toc:()=>o,contentTitle:()=>i});var t=JSON.parse('{"id":"sql-manual/sql-functions/scalar-functions/string-functions/regexp-replace","title":"REGEXP_REPLACE","description":"Regular matching of STR strings, replacing the part hitting pattern with a new string.","source":"@site/versioned_docs/version-2.1/sql-manual/sql-functions/scalar-functions/string-functions/regexp-replace.md","sourceDirName":"sql-manual/sql-functions/scalar-functions/string-functions","slug":"/sql-manual/sql-functions/scalar-functions/string-functions/regexp-replace","permalink":"/docs/2.1/sql-manual/sql-functions/scalar-functions/string-functions/regexp-replace","draft":false,"unlisted":false,"tags":[],"version":"2.1","lastUpdatedAt":1770477659000,"frontMatter":{"title":"REGEXP_REPLACE","language":"en","description":"Regular matching of STR strings, replacing the part hitting pattern with a new string."},"sidebar":"docs","previous":{"title":"REGEXP_EXTRACT_OR_NULL","permalink":"/docs/2.1/sql-manual/sql-functions/scalar-functions/string-functions/regexp-extract-or-null"},"next":{"title":"REGEXP_REPLACE_ONE","permalink":"/docs/2.1/sql-manual/sql-functions/scalar-functions/string-functions/regexp-replace-one"}}'),a=r("785893"),s=r("250065");let l={title:"REGEXP_REPLACE",language:"en",description:"Regular matching of STR strings, replacing the part hitting pattern with a new string."},i=void 0,c={},o=[{value:"Description",id:"description",level:2},{value:"Syntax",id:"syntax",level:2},{value:"Parameters",id:"parameters",level:2},{value:"Return Value",id:"return-value",level:2},{value:"Example",id:"example",level:2}];function p(e){let n={a:"a",b:"b",code:"code",h2:"h2",p:"p",pattern:"pattern",pre:"pre",str:"str",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h2,{id:"description",children:"Description"}),"\n",(0,a.jsx)(n.p,{children:"Regular matching of STR strings, replacing the part hitting pattern with a new string."}),"\n",(0,a.jsx)(n.p,{children:"It should be noted that when handling character set matching, Utf-8 standard character classes should be used. This ensures that functions can correctly identify and process various characters from different languages."}),"\n",(0,a.jsxs)(n.p,{children:["If the ",(0,a.jsx)(n.code,{children:"pattern"})," is not allowed regexp regular,throw error;"]}),"\n",(0,a.jsxs)(n.p,{children:["Support character match classes : ",(0,a.jsx)(n.a,{href:"https://github.com/google/re2/wiki/Syntax",children:"https://github.com/google/re2/wiki/Syntax"})]}),"\n",(0,a.jsx)(n.h2,{id:"syntax",children:"Syntax"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:"REGEXP_REPLACE(<str>, <pattern>, <repl>)\n"})}),"\n",(0,a.jsx)(n.h2,{id:"parameters",children:"Parameters"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Parameter"}),(0,a.jsx)(n.th,{children:"Description"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"<str>"})}),(0,a.jsx)(n.td,{children:"This parameter is of Varchar type. It represents the string on which the regular expression matching will be performed. It can be a literal string or a column from a table containing string values."})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"<pattern>"})}),(0,a.jsx)(n.td,{children:"This parameter is of Varchar type. It is the regular expression pattern used to match the string. The pattern can include various regular expression metacharacters and constructs to define complex matching rules."})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"<repl>"})}),(0,a.jsxs)(n.td,{children:["This parameter is of Varchar type. It is the string that will replace the parts of the ",(0,a.jsxs)(n.str,{children:[" that match the ",(0,a.jsx)(n.pattern,{children:". If you want to reference captured groups in the pattern, you can use backreferences like \\1, \\2, etc., where \\1 refers to the first captured group, \\2 refers to the second captured group, and so on."})]})]})]})]})]}),"\n",(0,a.jsx)(n.h2,{id:"return-value",children:"Return Value"}),"\n",(0,a.jsxs)(n.p,{children:["The function returns the result string after the replacement operation. The return value is of Varchar type. If no part of the ",(0,a.jsxs)(n.str,{children:[" matches the ",(0,a.jsxs)(n.pattern,{children:[", the original ",(0,a.jsx)(n.str,{children:" will be returned."})]})]})]}),"\n",(0,a.jsx)(n.h2,{id:"example",children:"Example"}),"\n",(0,a.jsx)(n.p,{children:"Basic replacement example.In this example, all spaces in the string 'a b c' are replaced with hyphens."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:"mysql> SELECT regexp_replace('a b c', ' ', '-');\n+-----------------------------------+\n| regexp_replace('a b c', ' ', '-') |\n+-----------------------------------+\n| a-b-c                             |\n+-----------------------------------+\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Using captured groups.Here, the character 'b' is captured by the group (b) in the pattern, and then it is replaced with ",(0,a.jsx)(n.b,{children:" using the backreference \\1 in the replacement string."})]}),(0,a.jsxs)(n.b,{children:["\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:"mysql> SELECT regexp_replace('a b c', '(b)', '<\\\\1>');\n+----------------------------------------+\n| regexp_replace('a b c', '(b)', '<\\1>') |\n+----------------------------------------+\n| a <b> c                                |\n+----------------------------------------+\n"})}),"\n",(0,a.jsx)(n.p,{children:"Matching Chinese characters.This example replaces all consecutive Chinese characters in the string with '123'."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:"mysql> select regexp_replace('\u8FD9\u662F\u4E00\u6BB5\u4E2D\u6587 This is a passage in English 1234567', '\\\\p{Han}+', '123');\n+---------------------------------------------------------------------------------------------+\n| regexp_replace('\u8FD9\u662F\u4E00\u6BB5\u4E2D\u6587 This is a passage in English 1234567', '\\p{Han}+', '123')       |\n+---------------------------------------------------------------------------------------------+\n| 123This is a passage in English 1234567                                                     |\n+---------------------------------------------------------------------------------------------+\n"})}),"\n",(0,a.jsx)(n.p,{children:"Insert and test cases.In this set of test cases, we create a table to store original strings, patterns, and replacement strings. Then we insert various test data and perform REGEXP_REPLACE operations on the original strings using the corresponding patterns and replacement strings. Finally, we retrieve and display the replaced strings."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:"-- Create a table to store test data\nCREATE TABLE test_table_for_regexp_replace (\n        id INT,\n        original_text VARCHAR(500),\n        pattern VARCHAR(100),\n        replacement VARCHAR(100)\n    ) PROPERTIES (\"replication_num\"=\"1\");\n\n-- Insert test data\nINSERT INTO test_table_for_regexp_replace VALUES\n    (1, 'Hello, World!', ',', '-'),    \n    (2, 'apple123', '[0-9]', '*'),    \n    (3, 'aabbcc', '(aa|bb|cc)', 'XX'),         \n    (4, '123-456-7890', '-', ' '), \n    (5, 'test,data', ',', ';'),              \n    (6, 'a1b2c3', '[0-9]', '#'),         \n    (7, 'book keeper', 'oo|ee', '**'),        \n    (8, 'ababab', '(ab)', 'XY'),       \n    (9, 'aabbcc', '(aa|bb|cc)', 'ZZ'),         \n    (10, 'apple,banana', ',', ' - ');\n\n-- Perform replacement operations on the inserted data\nSELECT id, regexp_replace(original_text, pattern, replacement) as replaced_text FROM test_table_for_regexp_replace ORDER BY id;\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-text",children:"+------+------------------+\n| id   | replaced_text    |\n+------+------------------+\n|    1 | Hello- World!    |\n|    2 | apple***         |\n|    3 | XXXXYY           |\n|    4 | 123 456 7890     |\n|    5 | test;data        |\n|    6 | a#b#c#           |\n|    7 | b**k k**per      |\n|    8 | XYXYXY           |\n|    9 | ZZZZYY           |\n|   10 | apple - banana   |\n+------+------------------+\n"})}),"\n",(0,a.jsx)(n.p,{children:"Emoji replace"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:"SELECT regexp_replace('\uD83C\uDF0D Earth \uD83C\uDF54 Food', '\uD83C\uDF0D|\uD83C\uDF54', '*');\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-text",children:"+----------------------------------------------------------+\n| regexp_replace('\uD83C\uDF0D Earth \uD83C\uDF54 Food', '\uD83C\uDF0D|\uD83C\uDF54', '*')                 |\n+----------------------------------------------------------+\n| * Earth * Food                                           |\n+----------------------------------------------------------+\n"})}),"\n",(0,a.jsx)(n.p,{children:"'str' is NULL,return NULL"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:"mysql> SELECT REGEXP_REPLACE(NULL, ' ', '-');\n+--------------------------------+\n| REGEXP_REPLACE(NULL, ' ', '-') |\n+--------------------------------+\n| NULL                           |\n+--------------------------------+\n"})}),"\n",(0,a.jsx)(n.p,{children:"'pattern' is NULL,return NULL"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:"mysql> SELECT REGEXP_REPLACE('Hello World', NULL, '-');\n+------------------------------------------+\n| REGEXP_REPLACE('Hello World', NULL, '-') |\n+------------------------------------------+\n| NULL                                     |\n+------------------------------------------+\n"})}),"\n",(0,a.jsx)(n.p,{children:"'repl' is NULL,return NULL"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:"mysql> SELECT REGEXP_REPLACE('Hello World', ' ', NULL);\n+------------------------------------------+\n| REGEXP_REPLACE('Hello World', ' ', NULL) |\n+------------------------------------------+\n| NULL                                     |\n+------------------------------------------+\n"})}),"\n",(0,a.jsx)(n.p,{children:"All parameters are NULL,return NULL"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:"mysql> SELECT REGEXP_REPLACE(NULL, NULL, NULL);\n+----------------------------------+\n| REGEXP_REPLACE(NULL, NULL, NULL) |\n+----------------------------------+\n| NULL                             |\n+----------------------------------+\n"})}),"\n",(0,a.jsxs)(n.p,{children:["If the ",(0,a.jsx)(n.code,{children:"pattern"})," is not allowed regexp regular,throw error;"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:"SELECT regexp_replace('a b c', '(b', '<\\\\1>');\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-text",children:"ERROR 1105 (HY000): errCode = 2, detailMessage = (10.16.10.2)[INVALID_ARGUMENT]Could not compile regexp pattern: (b\nError: missing ): (b\n\n"})}),"\n"]})]})}function d(e={}){let{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(p,{...e})}):p(e)}},250065:function(e,n,r){r.d(n,{Z:function(){return i},a:function(){return l}});var t=r(667294);let a={},s=t.createContext(a);function l(e){let n=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:l(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);