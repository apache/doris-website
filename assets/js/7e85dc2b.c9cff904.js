"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["316386"],{32752:function(e,t,n){n.r(t),n.d(t,{default:()=>d,frontMatter:()=>i,metadata:()=>s,assets:()=>l,toc:()=>c,contentTitle:()=>a});var s=JSON.parse('{"id":"compute-storage-decoupled/managing-compute-cluster","title":"Managing Compute Groups","description":"In a compute-storage decoupled architecture, one or more compute nodes (BE) can be grouped into a Compute Group.","source":"@site/docs/compute-storage-decoupled/managing-compute-cluster.md","sourceDirName":"compute-storage-decoupled","slug":"/compute-storage-decoupled/managing-compute-cluster","permalink":"/docs/dev/compute-storage-decoupled/managing-compute-cluster","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1770477659000,"frontMatter":{"title":"Managing Compute Groups","language":"en","description":"In a compute-storage decoupled architecture, one or more compute nodes (BE) can be grouped into a Compute Group."},"sidebar":"docs","previous":{"title":"Managing Storage Vault","permalink":"/docs/dev/compute-storage-decoupled/managing-storage-vault"},"next":{"title":"File Cache","permalink":"/docs/dev/compute-storage-decoupled/file-cache/"}}'),r=n("785893"),o=n("250065");let i={title:"Managing Compute Groups",language:"en",description:"In a compute-storage decoupled architecture, one or more compute nodes (BE) can be grouped into a Compute Group."},a=void 0,l={},c=[{value:"Compute Group Usage Scenarios",id:"compute-group-usage-scenarios",level:2},{value:"Default Compute Group Selection Mechanism",id:"default-compute-group-selection-mechanism",level:2},{value:"Viewing All Compute Groups",id:"viewing-all-compute-groups",level:2},{value:"Adding Compute Groups",id:"adding-compute-groups",level:2},{value:"Granting Compute Group Access",id:"granting-compute-group-access",level:2},{value:"Revoking Compute Group Access",id:"revoking-compute-group-access",level:2},{value:"Setting Default Compute Group",id:"setting-default-compute-group",level:2},{value:"Switching Compute Groups",id:"switching-compute-groups",level:2},{value:"Scaling Compute Groups",id:"scaling-compute-groups",level:2},{value:"Load Rebalancing After Scaling",id:"load-rebalancing-after-scaling",level:3},{value:"Balance Strategy Types",id:"balance-strategy-types",level:4},{value:"User Interface",id:"user-interface",level:4},{value:"Global Default Balance Type",id:"global-default-balance-type",level:5},{value:"Compute Group-Level Configuration",id:"compute-group-level-configuration",level:5},{value:"Configuration Rules",id:"configuration-rules",level:5},{value:"FAQ",id:"faq",level:4},{value:"How to View and Modify Global Rebalance Type?",id:"how-to-view-and-modify-global-rebalance-type",level:5},{value:"How to Query Compute Group Balance Type?",id:"how-to-query-compute-group-balance-type",level:5},{value:"How to Determine if the Cluster is in a Stable Tablet State?",id:"how-to-determine-if-the-cluster-is-in-a-stable-tablet-state",level:5},{value:"Renaming Compute Group",id:"renaming-compute-group",level:2}];function u(e){let t={a:"a",admonition:"admonition",br:"br",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",h5:"h5",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.p,{children:"In a compute-storage decoupled architecture, one or more compute nodes (BE) can be grouped into a Compute Group. This document describes how to use compute groups, including operations such as:"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"Viewing all compute groups"}),"\n",(0,r.jsx)(t.li,{children:"Granting compute group access"}),"\n",(0,r.jsxs)(t.li,{children:["Binding compute groups at the user level (",(0,r.jsx)(t.code,{children:"default_compute_group"}),") for user-level isolation"]}),"\n"]}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.em,{children:"Note"}),"\nIn versions prior to 3.0.2, this was referred to as a Compute Cluster."]}),"\n",(0,r.jsx)(t.h2,{id:"compute-group-usage-scenarios",children:"Compute Group Usage Scenarios"}),"\n",(0,r.jsx)(t.p,{children:"In a multi-compute group architecture, you can group one or more stateless BE nodes into compute clusters. By using compute cluster specification statements (use @<compute_group_name>), you can allocate specific workloads to specific compute clusters, achieving physical isolation of multiple import and query workloads."}),"\n",(0,r.jsx)(t.p,{children:"Assume there are two compute clusters: C1 and C2."}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.strong,{children:"Read-Read Isolation"}),": Before initiating two large queries, use ",(0,r.jsx)(t.code,{children:"use @c1"})," and ",(0,r.jsx)(t.code,{children:"use @c2"})," respectively to ensure that the queries run on different compute nodes. This prevents resource contention (CPU, memory, etc.) when accessing the same dataset."]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.strong,{children:"Read-Write Isolation"}),": Doris data imports consume substantial resources, especially in scenarios with large data volumes and high-frequency imports. To avoid resource contention between queries and imports, you can use ",(0,r.jsx)(t.code,{children:"use @c1"})," and ",(0,r.jsx)(t.code,{children:"use @c2"})," to specify that queries execute on C1 and imports on C2. Additionally, the C1 compute cluster can access newly imported data in the C2 compute cluster."]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.strong,{children:"Write-Write Isolation"}),": Similar to read-write isolation, imports can also be isolated from each other. For example, when the system has both high-frequency small imports and large batch imports, batch imports typically take longer and have higher retry costs, while high-frequency small imports are quick with lower retry costs. To prevent small imports from interfering with batch imports, you can use ",(0,r.jsx)(t.code,{children:"use @c1"})," and ",(0,r.jsx)(t.code,{children:"use @c2"})," to specify small imports to execute on C1 and batch imports on C2."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"default-compute-group-selection-mechanism",children:"Default Compute Group Selection Mechanism"}),"\n",(0,r.jsxs)(t.p,{children:["When a user has not explicitly ",(0,r.jsx)(t.a,{href:"#setting-default-compute-group",children:"set a default compute group"}),", the system will automatically select a compute group with Active BE that the user has usage permissions for. Once the default compute group is determined in a specific session, it will remain unchanged during that session unless the user explicitly changes the default setting."]}),"\n",(0,r.jsx)(t.p,{children:"In different sessions, if the following situations occur, the system may automatically change the user's default compute group:"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"The user has lost usage permissions for the default compute group selected in the last session"}),"\n",(0,r.jsx)(t.li,{children:"A compute group has been added or removed"}),"\n",(0,r.jsx)(t.li,{children:"The previously selected default compute group no longer has Alive BE"}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:"Situations one and two will definitely lead to a change in the automatically selected default compute group, while situation three may lead to a change."}),"\n",(0,r.jsx)(t.h2,{id:"viewing-all-compute-groups",children:"Viewing All Compute Groups"}),"\n",(0,r.jsxs)(t.p,{children:["Use the ",(0,r.jsx)(t.code,{children:"SHOW COMPUTE GROUPS"})," command to view all compute groups in the current repository. The returned results will display different content based on the user's permission level:"]}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["Users with ",(0,r.jsx)(t.code,{children:"ADMIN"})," privileges can view all compute groups"]}),"\n",(0,r.jsx)(t.li,{children:"Regular users can only view compute groups for which they have usage permissions (USAGE_PRIV)"}),"\n",(0,r.jsx)(t.li,{children:"If a user doesn't have usage permissions for any compute groups, an empty result will be returned"}),"\n"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-sql",children:"SHOW COMPUTE GROUPS;\n"})}),"\n",(0,r.jsx)(t.h2,{id:"adding-compute-groups",children:"Adding Compute Groups"}),"\n",(0,r.jsxs)(t.p,{children:["Managing compute groups requires ",(0,r.jsx)(t.code,{children:"OPERATOR"})," privilege, which controls node management permissions. For more details, please refer to ",(0,r.jsx)(t.a,{href:"../sql-manual/sql-statements/account-management/GRANT-TO",children:"Privilege Management"}),". By default, only the root account has the ",(0,r.jsx)(t.code,{children:"OPERATOR"})," privilege, but it can be granted to other accounts using the ",(0,r.jsx)(t.code,{children:"GRANT"})," command.\nTo add a BE and assign it to a compute group, use the ",(0,r.jsx)(t.a,{href:"../sql-manual/sql-statements/cluster-management/instance-management/ADD-BACKEND",children:"Add BE"})," command. For example:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-sql",children:'ALTER SYSTEM ADD BACKEND \'host:9050\' PROPERTIES ("tag.compute_group_name" = "new_group");\n'})}),"\n",(0,r.jsxs)(t.p,{children:["The above sql will add ",(0,r.jsx)(t.code,{children:"host:9050"})," to compute group ",(0,r.jsx)(t.code,{children:"new_group"}),". The BE will be added to compute group ",(0,r.jsx)(t.code,{children:"default_compute_group"})," if you omit PROPERTIES statement, for example:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-sql",children:"ALTER SYSTEM ADD BACKEND 'host:9050';\n"})}),"\n",(0,r.jsx)(t.h2,{id:"granting-compute-group-access",children:"Granting Compute Group Access"}),"\n",(0,r.jsx)(t.p,{children:"Prerequisite: The current operating user has' ADMIN 'permission, or the current user belongs to the admin role."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-sql",children:"GRANT USAGE_PRIV ON COMPUTE GROUP {compute_group_name} TO {user}\n"})}),"\n",(0,r.jsx)(t.h2,{id:"revoking-compute-group-access",children:"Revoking Compute Group Access"}),"\n",(0,r.jsx)(t.p,{children:"Prerequisite: The current operating user has' ADMIN 'permission, or the current user belongs to the admin role."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-sql",children:"REVOKE USAGE_PRIV ON COMPUTE GROUP {compute_group_name} FROM {user}\n"})}),"\n",(0,r.jsx)(t.h2,{id:"setting-default-compute-group",children:"Setting Default Compute Group"}),"\n",(0,r.jsx)(t.p,{children:"To set the default compute group for the current user(This operation requires the current user to already have permission to use the computing group):"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-sql",children:"SET PROPERTY 'default_compute_group' = '{clusterName}';\n"})}),"\n",(0,r.jsx)(t.p,{children:"To set the default compute group for other users (this operation requires Admin privileges):"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-sql",children:"SET PROPERTY FOR {user} 'default_compute_group' = '{clusterName}';\n"})}),"\n",(0,r.jsxs)(t.p,{children:["To view the current user's default compute group, the value of ",(0,r.jsx)(t.code,{children:"default_compute_group"})," in the returned result is the default compute group:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-sql",children:"SHOW PROPERTY;\n"})}),"\n",(0,r.jsxs)(t.p,{children:["To view the default compute group of other users, This operation requires the current user to have admin privileges, and the value of ",(0,r.jsx)(t.code,{children:"default_compute_group"})," in the returned result is the default compute group:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-sql",children:"SHOW PROPERTY FOR {user};\n"})}),"\n",(0,r.jsx)(t.p,{children:"To view all available compute groups in the current repository:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-sql",children:"SHOW COMPUTE GROUPS;\n"})}),"\n",(0,r.jsx)(t.admonition,{title:"Note",type:"info",children:(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["If the current user has an Admin role, for example: ",(0,r.jsx)(t.code,{children:"CREATE USER jack IDENTIFIED BY '123456' DEFAULT ROLE \"admin\""}),", then:\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"They can set the default compute group for themselves and other users;"}),"\n",(0,r.jsxs)(t.li,{children:["They can view their own and other users' ",(0,r.jsx)(t.code,{children:"PROPERTY"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["If the current user does not have an Admin role, for example: ",(0,r.jsx)(t.code,{children:"CREATE USER jack1 IDENTIFIED BY '123456'"}),", then:\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"They can set the default compute group for themselves;"}),"\n",(0,r.jsxs)(t.li,{children:["They can view their own ",(0,r.jsx)(t.code,{children:"PROPERTY"}),";"]}),"\n",(0,r.jsxs)(t.li,{children:["They cannot view all compute groups, as this operation requires ",(0,r.jsx)(t.code,{children:"GRANT ADMIN"})," privileges."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["If the current user has not configured a default compute group, the existing system will trigger an error when performing data read/write operations. To resolve this issue, the user can execute the ",(0,r.jsx)(t.code,{children:"use @cluster"})," command to specify the compute group used by the current context, or use the ",(0,r.jsx)(t.code,{children:"SET PROPERTY"})," statement to set the default compute group."]}),"\n",(0,r.jsxs)(t.li,{children:["If the current user has configured a default compute group, but that cluster is subsequently deleted, an error will also be triggered during data read/write operations. The user can execute the ",(0,r.jsx)(t.code,{children:"use @cluster"})," command to re-specify the compute group used by the current context, or use the ",(0,r.jsx)(t.code,{children:"SET PROPERTY"})," statement to update the default cluster settings."]}),"\n"]})}),"\n",(0,r.jsx)(t.h2,{id:"switching-compute-groups",children:"Switching Compute Groups"}),"\n",(0,r.jsx)(t.p,{children:"Users can specify the database and compute group to use in a compute-storage decoupled architecture."}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Syntax"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-sql",children:"USE { [catalog_name.]database_name[@compute_group_name] | @compute_group_name }\n"})}),"\n",(0,r.jsx)(t.p,{children:"If the database or compute group name contains reserved keywords, the corresponding name must be enclosed in backticks ```."}),"\n",(0,r.jsx)(t.h2,{id:"scaling-compute-groups",children:"Scaling Compute Groups"}),"\n",(0,r.jsxs)(t.p,{children:["You can scale compute groups by adding or removing BE using ",(0,r.jsx)(t.code,{children:"ALTER SYSTEM ADD BACKEND"})," and ",(0,r.jsx)(t.code,{children:"ALTER SYSTEM DECOMMISION BACKEND"}),"."]}),"\n",(0,r.jsx)(t.h3,{id:"load-rebalancing-after-scaling",children:"Load Rebalancing After Scaling"}),"\n",(0,r.jsx)(t.p,{children:"Cloud rebalance is a load balancing operation in Doris's compute-storage decoupled architecture. It is used to rebalance read and write traffic across the compute group after scaling (adding or removing) backend nodes in different Compute Groups. A node that has been offline for an extended period is considered as removed."}),"\n",(0,r.jsx)(t.h4,{id:"balance-strategy-types",children:"Balance Strategy Types"}),"\n",(0,r.jsx)(t.admonition,{type:"caution",children:(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.code,{children:"balance_type"})," feature is supported starting from Doris 3.1.3 and Doris 4.0.2.",(0,r.jsx)(t.br,{}),"\nPrior to these versions, only the FE global configuration ",(0,r.jsx)(t.code,{children:"enable_cloud_warm_up_for_rebalance"})," was available to control whether warm up tasks are executed during rebalance."]})}),"\n",(0,r.jsx)(t.p,{children:"The following table describes three strategy types, using the example of adding nodes to a Compute Group:"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Type"}),(0,r.jsx)(t.th,{style:{textAlign:"center"},children:"Time to Service"}),(0,r.jsx)(t.th,{style:{textAlign:"center"},children:"Performance Fluctuation"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Technical Principle"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Use Cases"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"without_warmup"})}),(0,r.jsx)(t.td,{style:{textAlign:"center"},children:"Fastest"}),(0,r.jsx)(t.td,{style:{textAlign:"center"},children:"Highest fluctuation"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"FE directly modifies shard mapping; first read/write has no file cache and needs to fetch from S3"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Scenarios requiring quick node deployment with low sensitivity to performance jitter"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"async_warmup"})}),(0,r.jsx)(t.td,{style:{textAlign:"center"},children:"Faster"}),(0,r.jsx)(t.td,{style:{textAlign:"center"},children:"Possible cache miss"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Issues warm up tasks, modifies mapping after success or timeout; attempts to pull file cache to new BE during mapping switch, some scenarios may still miss on first read"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"General scenarios with acceptable performance"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"sync_warmup"})}),(0,r.jsx)(t.td,{style:{textAlign:"center"},children:"Slower"}),(0,r.jsx)(t.td,{style:{textAlign:"center"},children:"Minimal cache miss"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Issues warm up tasks, FE modifies mapping only after task completion, ensuring cache migration"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Scenarios with extremely high performance requirements after scaling, requiring file cache to exist on new nodes"})]})]})]}),"\n",(0,r.jsx)(t.h4,{id:"user-interface",children:"User Interface"}),"\n",(0,r.jsx)(t.h5,{id:"global-default-balance-type",children:"Global Default Balance Type"}),"\n",(0,r.jsx)(t.p,{children:"Set the global default value through FE configuration (fe.conf):"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:'cloud_default_rebalance_type = "async_warmup"\n'})}),"\n",(0,r.jsx)(t.h5,{id:"compute-group-level-configuration",children:"Compute Group-Level Configuration"}),"\n",(0,r.jsx)(t.p,{children:"You can configure balance type for each Compute Group separately:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-sql",children:'ALTER COMPUTE GROUP cg1 PROPERTIES("balance_type"="async_warmup");\n'})}),"\n",(0,r.jsx)(t.h5,{id:"configuration-rules",children:"Configuration Rules"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["If a Compute Group does not have ",(0,r.jsx)(t.code,{children:"balance_type"})," configured, it uses the global default value ",(0,r.jsx)(t.code,{children:"async_warmup"}),"."]}),"\n",(0,r.jsxs)(t.li,{children:["If a Compute Group has ",(0,r.jsx)(t.code,{children:"balance_type"})," configured, that configuration takes priority during rebalance."]}),"\n"]}),"\n",(0,r.jsx)(t.h4,{id:"faq",children:"FAQ"}),"\n",(0,r.jsx)(t.h5,{id:"how-to-view-and-modify-global-rebalance-type",children:"How to View and Modify Global Rebalance Type?"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"View"}),": Execute ",(0,r.jsx)(t.code,{children:'ADMIN SHOW FRONTEND CONFIG LIKE "cloud_default_rebalance_type";'})]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Modify"}),": Execute ",(0,r.jsx)(t.code,{children:'ADMIN SET FRONTEND CONFIG ("cloud_warm_up_for_rebalance_type" = "without_warmup");'})," (takes effect without restarting FE)"]}),"\n"]}),"\n",(0,r.jsx)(t.h5,{id:"how-to-query-compute-group-balance-type",children:"How to Query Compute Group Balance Type?"}),"\n",(0,r.jsxs)(t.p,{children:["Execute ",(0,r.jsx)(t.code,{children:"SHOW COMPUTE GROUPS;"}),". The ",(0,r.jsx)(t.code,{children:"properties"})," column in the result contains Compute Group attribute information, including the ",(0,r.jsx)(t.code,{children:"balance_type"})," configuration."]}),"\n",(0,r.jsx)(t.h5,{id:"how-to-determine-if-the-cluster-is-in-a-stable-tablet-state",children:"How to Determine if the Cluster is in a Stable Tablet State?"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:[(0,r.jsxs)(t.strong,{children:["Check via ",(0,r.jsx)(t.code,{children:"SHOW BACKENDS"})]}),": Check if the tablet counts across BEs are close. Reference calculation range:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"(Total tablets in cluster / Compute Group BE count) * 0.95 \n~ \n(Total tablets in cluster / Compute Group BE count) * 1.05\n"})}),"\n",(0,r.jsxs)(t.p,{children:["The value 0.05 is the default value of the FE configuration ",(0,r.jsx)(t.code,{children:"cloud_rebalance_percent_threshold"}),". To make tablet distribution more uniform across BEs in the Compute Group, you can reduce this configuration value."]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.strong,{children:"Observe via FE Metrics"}),": Check the ",(0,r.jsx)(t.code,{children:"doris_fe_cloud_.*_balance_num"})," series of metrics in FE metrics. If there is no change for an extended period, it indicates the Compute Group has reached a balanced state. It is recommended to configure these metrics on a monitoring dashboard for continuous observation and judgment."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"curl \"http://feip:fe_http_port/metrics\" | grep '_balance_num'\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"renaming-compute-group",children:"Renaming Compute Group"}),"\n",(0,r.jsxs)(t.p,{children:["You can use the ",(0,r.jsx)(t.code,{children:"ALTER SYSTEM RENAME COMPUTE GROUP <old_name> <new_name>"})," command to rename an existing compute group. Please refer to the SQL Manual on ",(0,r.jsx)(t.a,{href:"../sql-manual/sql-statements/cluster-management/instance-management/ALTER-SYSTEM-RENAME-COMPUTE-GROUP",children:"Renaming Compute Groups"}),"."]}),"\n",(0,r.jsx)(t.p,{children:"Note\nAfter renaming a compute group, users who had permissions for the old name (old_name) or had set the old name as the default compute group (default_compute_group) will not have their permissions automatically updated to the new name (new_name). Permissions need to be reset by an account with administrative privileges. This is consistent with the permission system of MySQL databases."})]})}function d(e={}){let{wrapper:t}={...(0,o.a)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}},250065:function(e,t,n){n.d(t,{Z:function(){return a},a:function(){return i}});var s=n(667294);let r={},o=s.createContext(r);function i(e){let t=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),s.createElement(o.Provider,{value:t},e.children)}}}]);