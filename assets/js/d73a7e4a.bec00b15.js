"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["437410"],{649939:function(e,n,r){r.r(n),r.d(n,{default:()=>u,frontMatter:()=>a,metadata:()=>i,assets:()=>c,toc:()=>l,contentTitle:()=>d});var i=JSON.parse('{"id":"admin-manual/open-api/fe-http/query-profile-action","title":"Query Profile Action | Fe Http","description":"Doris FE Query Profile REST API \u6587\u6863\uFF0C\u652F\u6301\u901A\u8FC7 HTTP \u63A5\u53E3\u83B7\u53D6\u67E5\u8BE2\u4FE1\u606F\u3001\u6267\u884C Profile\u3001\u5B9E\u65F6\u7EDF\u8BA1\u6570\u636E\uFF0C\u5E76\u5BF9\u6B63\u5728\u8FD0\u884C\u7684\u67E5\u8BE2\u8FDB\u884C\u76D1\u63A7\u4E0E\u63A7\u5236\u3002","source":"@site/docs/admin-manual/open-api/fe-http/query-profile-action.md","sourceDirName":"admin-manual/open-api/fe-http","slug":"/admin-manual/open-api/fe-http/query-profile-action","permalink":"/docs/dev/admin-manual/open-api/fe-http/query-profile-action","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1770477659000,"frontMatter":{"title":"Query Profile Action | Fe Http","language":"en","description":"Doris FE Query Profile REST API \u6587\u6863\uFF0C\u652F\u6301\u901A\u8FC7 HTTP \u63A5\u53E3\u83B7\u53D6\u67E5\u8BE2\u4FE1\u606F\u3001\u6267\u884C Profile\u3001\u5B9E\u65F6\u7EDF\u8BA1\u6570\u636E\uFF0C\u5E76\u5BF9\u6B63\u5728\u8FD0\u884C\u7684\u67E5\u8BE2\u8FDB\u884C\u76D1\u63A7\u4E0E\u63A7\u5236\u3002","sidebar_label":"Query Profile Action"},"sidebar":"docs","previous":{"title":"Node Operations","permalink":"/docs/dev/admin-manual/open-api/fe-http/node-action"},"next":{"title":"Backends Action","permalink":"/docs/dev/admin-manual/open-api/fe-http/backends-action"}}'),s=r("785893"),t=r("250065");let a={title:"Query Profile Action | Fe Http",language:"en",description:"Doris FE Query Profile REST API \u6587\u6863\uFF0C\u652F\u6301\u901A\u8FC7 HTTP \u63A5\u53E3\u83B7\u53D6\u67E5\u8BE2\u4FE1\u606F\u3001\u6267\u884C Profile\u3001\u5B9E\u65F6\u7EDF\u8BA1\u6570\u636E\uFF0C\u5E76\u5BF9\u6B63\u5728\u8FD0\u884C\u7684\u67E5\u8BE2\u8FDB\u884C\u76D1\u63A7\u4E0E\u63A7\u5236\u3002",sidebar_label:"Query Profile Action"},d="Query Profile Action",c={},l=[{value:"Request",id:"request",level:2},{value:"Get the query information",id:"get-the-query-information",level:2},{value:"Description",id:"description",level:3},{value:"Query parameters",id:"query-parameters",level:3},{value:"Response",id:"response",level:3},{value:"Examples",id:"examples",level:3},{value:"Get Query Id By Trace Id",id:"get-query-id-by-trace-id",level:2},{value:"Description",id:"description-1",level:3},{value:"Path parameters",id:"path-parameters",level:3},{value:"Query parameters",id:"query-parameters-1",level:3},{value:"Response",id:"response-1",level:3},{value:"Get the sql and text profile for the specified query",id:"get-the-sql-and-text-profile-for-the-specified-query",level:2},{value:"Description",id:"description-2",level:3},{value:"Path parameters",id:"path-parameters-1",level:3},{value:"Query parameters",id:"query-parameters-2",level:3},{value:"Response",id:"response-2",level:3},{value:"Examples",id:"examples-1",level:3},{value:"Get the specified query fragment and instance information",id:"get-the-specified-query-fragment-and-instance-information",level:2},{value:"Description",id:"description-3",level:3},{value:"Path parameters",id:"path-parameters-2",level:3},{value:"Query parameters",id:"query-parameters-3",level:3},{value:"Response",id:"response-3",level:3},{value:"Examples",id:"examples-2",level:3},{value:"Get the specified query id tree profile information",id:"get-the-specified-query-id-tree-profile-information",level:2},{value:"Description",id:"description-4",level:3},{value:"Path parameters",id:"path-parameters-3",level:3},{value:"Query parameters",id:"query-parameters-4",level:3},{value:"Response",id:"response-4",level:3},{value:"Current running queries",id:"current-running-queries",level:2},{value:"Description",id:"description-5",level:3},{value:"Path parameters",id:"path-parameters-4",level:3},{value:"Query parameters",id:"query-parameters-5",level:3},{value:"Response",id:"response-5",level:3},{value:"Cancel query",id:"cancel-query",level:2},{value:"Description",id:"description-6",level:3},{value:"Path parameters",id:"path-parameters-5",level:3},{value:"Query parameters",id:"query-parameters-6",level:3},{value:"Response",id:"response-6",level:3},{value:"Get Query Progress by Trace ID",id:"get-query-progress-by-trace-id",level:2},{value:"Description",id:"description-7",level:3},{value:"Path parameters",id:"path-parameters-6",level:3},{value:"Response",id:"response-7",level:3}];function o(e){let n={admonition:"admonition",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,t.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"query-profile-action",children:"Query Profile Action"})}),"\n",(0,s.jsx)(n.h2,{id:"request",children:"Request"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"GET /rest/v2/manager/query/query_info"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"GET /rest/v2/manager/query/trace/{trace_id}"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"GET /rest/v2/manager/query/sql/{query_id}"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"GET /rest/v2/manager/query/profile/text/{query_id}"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"GET /rest/v2/manager/query/profile/graph/{query_id}"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"GET /rest/v2/manager/query/profile/json/{query_id}"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"GET /rest/v2/manager/query/profile/fragments/{query_id}"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"GET /rest/v2/manager/query/current_queries"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"GET /rest/v2/manager/query/kill/{query_id}"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"GET /rest/v2/manager/query/statistics/{trace_id}"})," (4.0.0+)"]}),"\n",(0,s.jsx)(n.h2,{id:"get-the-query-information",children:"Get the query information"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"GET /rest/v2/manager/query/query_info"})}),"\n",(0,s.jsx)(n.h3,{id:"description",children:"Description"}),"\n",(0,s.jsx)(n.p,{children:"Gets information about select queries for all fe nodes in the cluster."}),"\n",(0,s.jsx)(n.h3,{id:"query-parameters",children:"Query parameters"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"query_id"})}),"\n",(0,s.jsx)(n.p,{children:"Optional, specifies the query ID of the query to be returned, default returns information for all queries."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"search"})}),"\n",(0,s.jsx)(n.p,{children:"Optional, specifies that query information containing strings is returned, currently only string matches are performed."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"is_all_node"})}),"\n",(0,s.jsx)(n.p,{children:"Optional, if true, returns query information for all fe nodes, if false, returns query information for the current fe node. The default is true."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"response",children:"Response"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n   "msg": "success",  \n    "code": 0,  \n    "data": {  \n        "column_names": [  \n            "Query ID",  \n            "FE Node",  \n            "Query User",  \n            "Execution Database",  \n            "Sql",  \n            "Query Type",  \n            "Start Time",  \n            "End Time",  \n            "Execution Duration",  \n            "Status"  \n        ],  \n        "rows": [  \n            [  \n                ...  \n            ]  \n        ]  \n    },  \n    "count": 0  \n}\n'})}),"\n",(0,s.jsx)(n.admonition,{title:"Note",type:"info",children:(0,s.jsx)(n.p,{children:"Since Doris Version 1.2, Admin and Root users can view all queries. Regular users can only view their own submitted queries."})}),"\n",(0,s.jsx)(n.h3,{id:"examples",children:"Examples"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'GET /rest/v2/manager/query/query_info\n\n{\n    "msg": "success",  \n    "code": 0,  \n    "data": {  \n        "column_names": [  \n            "Query ID",  \n            "FE Node",  \n            "Query User",  \n            "Execution Database",  \n            "Sql",  \n            "Query Type",  \n            "Start Time",  \n            "End Time",  \n            "Execution Duration",  \n            "Status"  \n        ],  \n        "rows": [  \n            [  \n                "d7c93d9275334c35-9e6ac5f295a7134b",  \n                "127.0.0.1:8030",  \n                "root",  \n                "default_cluster:testdb",  \n                "select c.id, c.name, p.age, p.phone, c.date, c.cost from cost c join people p on c.id = p.id where p.age > 20 order by c.id",  \n                "Query",  \n                "2021-07-29 16:59:12",  \n                "2021-07-29 16:59:12",  \n                "109ms",  \n                "EOF"  \n            ]  \n        ]  \n    },  \n    "count": 0  \n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"get-query-id-by-trace-id",children:"Get Query Id By Trace Id"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"GET /rest/v2/manager/query/trace_id/{trace_id}"})}),"\n",(0,s.jsx)(n.h3,{id:"description-1",children:"Description"}),"\n",(0,s.jsx)(n.p,{children:"Get query id by trance id."}),"\n",(0,s.jsx)(n.p,{children:"Before executing a Query, set a unique trace id:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:'set session_context="trace_id:your_trace_id";'})}),"\n",(0,s.jsx)(n.p,{children:"After executing the Query within the same Session, the query id can be obtained through the trace id."}),"\n",(0,s.jsx)(n.h3,{id:"path-parameters",children:"Path parameters"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"{trace_id}"})}),"\n",(0,s.jsx)(n.p,{children:"User specific trace id."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"query-parameters-1",children:"Query parameters"}),"\n",(0,s.jsx)(n.h3,{id:"response-1",children:"Response"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n    "msg": "success", \n    "code": 0, \n    "data": "fb1d9737de914af1-a498d5c5dec638d3", \n    "count": 0\n}\n'})}),"\n",(0,s.jsxs)(n.admonition,{title:"Info",type:"note",children:[(0,s.jsx)(n.p,{children:"Since Doris version 1.2, admin and root user can view all queries. Ordinary users can only view the Query sent by themselves. If the specified trace id does not exist or has no permission, it will return Bad Request:"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n    "msg": "Bad Request", \n    "code": 403, \n    "data": "error messages",\n    "count": 0\n}\n'})})]}),"\n",(0,s.jsx)(n.h2,{id:"get-the-sql-and-text-profile-for-the-specified-query",children:"Get the sql and text profile for the specified query"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"GET /rest/v2/manager/query/sql/{query_id}"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"GET /rest/v2/manager/query/profile/text/{query_id}"})}),"\n",(0,s.jsx)(n.h3,{id:"description-2",children:"Description"}),"\n",(0,s.jsx)(n.p,{children:"Get the sql and profile text for the specified query id."}),"\n",(0,s.jsx)(n.h3,{id:"path-parameters-1",children:"Path parameters"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"query_id"})}),"\n",(0,s.jsx)(n.p,{children:"The query id."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"query-parameters-2",children:"Query parameters"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"is_all_node"})}),"\n",(0,s.jsx)(n.p,{children:"Optional, if true then query for the specified query id in all fe nodes, if false then query for the specified query id in the currently connected fe nodes. The default is true."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"response-2",children:"Response"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n    "msg": "success",\n    "code": 0,\n    "data": {\n        "sql": ""\n    },\n    "count": 0\n}\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n    "msg": "success",\n    "code": 0,\n    "data": {\n        "profile": ""\n    },\n    "count": 0\n}\n'})}),"\n",(0,s.jsxs)(n.admonition,{title:"Info",type:"note",children:[(0,s.jsx)(n.p,{children:"Since Doris version 1.2, admin and root user can view all queries. Ordinary users can only view the Query sent by themselves. If the specified trace id does not exist or has no permission, it will return Bad Request:"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n    "msg": "Bad Request", \n    "code": 403, \n    "data": "error messages",\n    "count": 0\n}\n'})})]}),"\n",(0,s.jsx)(n.h3,{id:"examples-1",children:"Examples"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"get sql."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'GET /rest/v2/manager/query/sql/d7c93d9275334c35-9e6ac5f295a7134b\n\nResponse:\n{\n    "msg": "success",\n    "code": 0,\n    "data": {\n        "sql": "select c.id, c.name, p.age, p.phone, c.date, c.cost from cost c join people p on c.id = p.id where p.age > 20 order by c.id"\n    },\n    "count": 0\n}\n'})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"get-the-specified-query-fragment-and-instance-information",children:"Get the specified query fragment and instance information"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"GET /rest/v2/manager/query/profile/fragments/{query_id}"})}),"\n",(0,s.jsx)(n.admonition,{type:"caution",children:(0,s.jsx)(n.p,{children:"Since 2.1.1, this API is deprecated. You can still download profile from http://<fe_ip>:<fe_http_port>/QueryProfile"})}),"\n",(0,s.jsx)(n.h3,{id:"description-3",children:"Description"}),"\n",(0,s.jsx)(n.p,{children:"Get the fragment name, instance id, host ip/port and execution time for the specified query id."}),"\n",(0,s.jsx)(n.h3,{id:"path-parameters-2",children:"Path parameters"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"query_id"})}),"\n",(0,s.jsx)(n.p,{children:"The query id."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"query-parameters-3",children:"Query parameters"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"is_all_node"})}),"\n",(0,s.jsx)(n.p,{children:"Optional, if true then query for the specified query id in all fe nodes, if false then query for the specified query id in the currently connected fe nodes. The default is true."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"response-3",children:"Response"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n    "msg": "success",\n    "code": 0,\n    "data": [\n        {\n            "fragment_id": "",\n            "time": "",\n            "instance_id": {\n                "": {\n                  "host": "",\n                  "active_time": ""\n                }\n            }\n        }\n    ],\n    "count": 0\n}\n'})}),"\n",(0,s.jsxs)(n.admonition,{title:"Info",type:"note",children:[(0,s.jsx)(n.p,{children:"Since Doris version 1.2, admin and root user can view all queries. Ordinary users can only view the Query sent by themselves. If the specified trace id does not exist or has no permission, it will return Bad Request:"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n    "msg": "Bad Request", \n    "code": 403, \n    "data": "error messages",\n    "count": 0\n}\n'})})]}),"\n",(0,s.jsx)(n.h3,{id:"examples-2",children:"Examples"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'GET /rest/v2/manager/query/profile/fragments/d7c93d9275334c35-9e6ac5f295a7134b\n\nResponse:\n{\n    "msg": "success",\n    "code": 0,\n    "data": [\n        {\n            "fragment_id": "0",\n            "time": "36.169ms",\n            "instance_id": {\n                "d7c93d9275334c35-9e6ac5f295a7134e": {\n                    "host": "172.19.0.4:9060",\n                    "active_time": "36.169ms"\n                }\n            }\n        },\n        {\n            "fragment_id": "1",\n            "time": "20.710ms",\n            "instance_id": {\n                "d7c93d9275334c35-9e6ac5f295a7134c": {\n                    "host": "172.19.0.5:9060",\n                    "active_time": "20.710ms"\n                }\n            }\n        },\n        {\n            "fragment_id": "2",\n            "time": "7.83ms",\n            "instance_id": {\n                "d7c93d9275334c35-9e6ac5f295a7134d": {\n                    "host": "172.19.0.6:9060",\n                    "active_time": "7.83ms"\n                },\n                "d7c93d9275334c35-9e6ac5f295a7134f": {\n                    "host": "172.19.0.7:9060",\n                    "active_time": "10.873ms"\n                }\n            }\n        }\n    ],\n    "count": 0\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"get-the-specified-query-id-tree-profile-information",children:"Get the specified query id tree profile information"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"GET /rest/v2/manager/query/profile/graph/{query_id}"})}),"\n",(0,s.jsx)(n.h3,{id:"description-4",children:"Description"}),"\n",(0,s.jsxs)(n.p,{children:["Get the tree profile information of the specified query id, same as ",(0,s.jsx)(n.code,{children:"show query profile"})," command."]}),"\n",(0,s.jsx)(n.h3,{id:"path-parameters-3",children:"Path parameters"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"query_id"})}),"\n",(0,s.jsx)(n.p,{children:"The query id."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"query-parameters-4",children:"Query parameters"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"fragment_id"})," and ",(0,s.jsx)(n.code,{children:"instance_id"})]}),"\n",(0,s.jsxs)(n.p,{children:["Optional, both parameters must be specified or not.",(0,s.jsx)(n.br,{}),"\nIf both are not specified, a simple tree of profiles is returned, equivalent to ",(0,s.jsx)(n.code,{children:"show query profile '/query_id'"}),";",(0,s.jsx)(n.br,{}),"\nIf both are specified, a detailed profile tree is returned, which is equivalent to ",(0,s.jsx)(n.code,{children:"show query profile '/query_id/fragment_id/instance_id'"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"is_all_node"})}),"\n",(0,s.jsx)(n.p,{children:"Optional, if true then query information about the specified query id in all fe nodes, if false then query information about the specified query id in the currently connected fe nodes. The default is true."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"response-4",children:"Response"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n    "msg": "success",\n    "code": 0,\n    "data": {\n        "graph":""\n    },\n    "count": 0\n}\n'})}),"\n",(0,s.jsxs)(n.admonition,{title:"Info",type:"note",children:[(0,s.jsx)(n.p,{children:"Since Doris version 1.2, admin and root user can view all queries. Ordinary users can only view the Query sent by themselves. If the specified trace id does not exist or has no permission, it will return Bad Request:"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n    "msg": "Bad Request", \n    "code": 403, \n    "data": "error messages",\n    "count": 0\n}\n'})})]}),"\n",(0,s.jsx)(n.h2,{id:"current-running-queries",children:"Current running queries"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"GET /rest/v2/manager/query/current_queries"})}),"\n",(0,s.jsx)(n.h3,{id:"description-5",children:"Description"}),"\n",(0,s.jsxs)(n.p,{children:["Same as ",(0,s.jsx)(n.code,{children:'show proc "/current_query_stmts"'}),", return current running queries."]}),"\n",(0,s.jsx)(n.h3,{id:"path-parameters-4",children:"Path parameters"}),"\n",(0,s.jsx)(n.h3,{id:"query-parameters-5",children:"Query parameters"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"is_all_node"})}),"\n",(0,s.jsx)(n.p,{children:"Optional. Return current running queries from all FE if set to true. Default is true."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"response-5",children:"Response"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n	"msg": "success",\n	"code": 0,\n	"data": {\n		"columnNames": ["Frontend", "QueryId", "ConnectionId", "Database", "User", "ExecTime", "SqlHash", "Statement"],\n		"rows": [\n			["172.19.0.3", "108e47ab438a4560-ab1651d16c036491", "2", "", "root", "6074", "1a35f62f4b14b9d7961b057b77c3102f", "select sleep(60)"],\n			["172.19.0.11", "3606cad4e34b49c6-867bf6862cacc645", "3", "", "root", "9306", "1a35f62f4b14b9d7961b057b77c3102f", "select sleep(60)"]\n		]\n	},\n	"count": 0\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"cancel-query",children:"Cancel query"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"POST /rest/v2/manager/query/kill/{query_id}"})}),"\n",(0,s.jsx)(n.h3,{id:"description-6",children:"Description"}),"\n",(0,s.jsx)(n.p,{children:"Cancel query of specified connection."}),"\n",(0,s.jsx)(n.h3,{id:"path-parameters-5",children:"Path parameters"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"{query_id}"})}),"\n",(0,s.jsxs)(n.p,{children:["query id. You can get query id by ",(0,s.jsx)(n.code,{children:"trance_id"})," api."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"query-parameters-6",children:"Query parameters"}),"\n",(0,s.jsx)(n.h3,{id:"response-6",children:"Response"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n    "msg": "success",\n    "code": 0,\n    "data": null,\n    "count": 0\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"get-query-progress-by-trace-id",children:"Get Query Progress by Trace ID"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"GET /rest/v2/manager/query/statistics/{trace_id}"})," (4.0.0+)"]}),"\n",(0,s.jsx)(n.h3,{id:"description-7",children:"Description"}),"\n",(0,s.jsx)(n.p,{children:"Retrieve the statistics of a currently running query by Trace ID. You can call this API periodically to obtain the progress of the query."}),"\n",(0,s.jsx)(n.h3,{id:"path-parameters-6",children:"Path parameters"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"{trace_id}"})}),"\n",(0,s.jsxs)(n.p,{children:["Trace ID. The user-defined Trace ID set via ",(0,s.jsx)(n.code,{children:'SET session_context="trace_id:xxxx"'}),"."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"response-7",children:"Response"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n    "msg": "success",\n    "code": 0,\n    "data": {\n        "scanRows": 1234567,\n        "scanBytes": 987654321,\n        "returnedRows": 12345,\n        "cpuMs": 15600,\n        "maxPeakMemoryBytes": 536870912,\n        "currentUsedMemoryBytes": 268435456,\n        "shuffleSendBytes": 104857600,\n        "shuffleSendRows": 50000,\n        "scanBytesFromLocalStorage": 734003200,\n        "scanBytesFromRemoteStorage": 253651121,\n        "spillWriteBytesToLocalStorage": 0,\n        "spillReadBytesFromLocalStorage": 0\n    },\n    "count": 0\n}\n'})})]})}function u(e={}){let{wrapper:n}={...(0,t.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},250065:function(e,n,r){r.d(n,{Z:function(){return d},a:function(){return a}});var i=r(667294);let s={},t=i.createContext(s);function a(e){let n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);