"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["464408"],{870953:function(e,n,t){t.r(n),t.d(n,{default:()=>o,frontMatter:()=>r,metadata:()=>s,assets:()=>d,toc:()=>c,contentTitle:()=>l});var s=JSON.parse('{"id":"sql-manual/sql-functions/scalar-functions/date-time-functions/date-sub","title":"DATE_SUB","description":"Description","source":"@site/docs/sql-manual/sql-functions/scalar-functions/date-time-functions/date-sub.md","sourceDirName":"sql-manual/sql-functions/scalar-functions/date-time-functions","slug":"/sql-manual/sql-functions/scalar-functions/date-time-functions/date-sub","permalink":"/docs/dev/sql-manual/sql-functions/scalar-functions/date-time-functions/date-sub","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"DATE_SUB","language":"en"},"sidebar":"docs","previous":{"title":"DATE_FORMAT","permalink":"/docs/dev/sql-manual/sql-functions/scalar-functions/date-time-functions/date-format"},"next":{"title":"DATE_TRUNC","permalink":"/docs/dev/sql-manual/sql-functions/scalar-functions/date-time-functions/date-trunc"}}'),a=t("785893"),i=t("250065");let r={title:"DATE_SUB",language:"en"},l=void 0,d={},c=[{value:"Description",id:"description",level:2},{value:"Aliases",id:"aliases",level:2},{value:"Syntax",id:"syntax",level:2},{value:"Parameters",id:"parameters",level:2},{value:"Return Value",id:"return-value",level:2},{value:"Examples",id:"examples",level:2}];function u(e){let n={a:"a",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h2,{id:"description",children:"Description"}),"\n",(0,a.jsx)(n.p,{children:"The DATE_SUB function is used to subtract a specified time interval from a given date or time value and return the calculated date or time result. It supports operations on DATE (date only) and DATETIME (date and time) types, where the time interval is defined by both a numerical value and a unit."}),"\n",(0,a.jsxs)(n.p,{children:["This function behaves generally consistently with the ",(0,a.jsx)(n.a,{href:"https://dev.mysql.com/doc/refman/8.4/en/date-and-time-functions.html#function_date-sub",children:"date_sub function"})," in MySQL, but the difference is that MySQL supports compound unit additions and subtractions, such as:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:"SELECT DATE_SUB('2025-01-01 00:00:00',INTERVAL '1 1:1:1' DAY_SECOND);\n        -> '2024-12-30 22:58:59'\n"})}),"\n",(0,a.jsx)(n.p,{children:"Doris does not support this type of input."}),"\n",(0,a.jsx)(n.h2,{id:"aliases",children:"Aliases"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"days_sub"}),"\n",(0,a.jsx)(n.li,{children:"subdate"}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"syntax",children:"Syntax"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:"DATE_SUB(<date_or_time_part>, <expr> <time_unit>)\n"})}),"\n",(0,a.jsx)(n.h2,{id:"parameters",children:"Parameters"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Parameter"}),(0,a.jsx)(n.th,{children:"Description"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"<date_or_time_part>"})}),(0,a.jsxs)(n.td,{children:["A valid date value, supporting datetime or date type. For specific datetime and date formats, please refer to ",(0,a.jsx)(n.a,{href:"../../../../../docs/sql-manual/basic-element/sql-data-types/conversion/datetime-conversion",children:"datetime conversion"})," and ",(0,a.jsx)(n.a,{href:"../../../../../docs/sql-manual/basic-element/sql-data-types/conversion/date-conversion",children:"date conversion"})]})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"<expr>"})}),(0,a.jsxs)(n.td,{children:["The time interval to be subtracted, of type ",(0,a.jsx)(n.code,{children:"INT"})]})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"<time_unit>"})}),(0,a.jsx)(n.td,{children:"Enumerated values: YEAR, QUARTER, MONTH, WEEK, DAY, HOUR, MINUTE, SECOND"})]})]})]}),"\n",(0,a.jsx)(n.h2,{id:"return-value",children:"Return Value"}),"\n",(0,a.jsx)(n.p,{children:"Returns a calculated result with the same type as date:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"When input is DATE, returns DATE (date part only);"}),"\n",(0,a.jsx)(n.li,{children:"When input is DATETIME, returns DATETIME (including date and time)."}),"\n",(0,a.jsx)(n.li,{children:"For datetime types with scale, the scale will be preserved and returned."}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Special cases:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Returns NULL if any parameter is NULL;"}),"\n",(0,a.jsx)(n.li,{children:"Returns NULL for illegal expr (negative values) or time_unit;"}),"\n",(0,a.jsx)(n.li,{children:"Returns an error if the calculated result is earlier than the minimum value supported by the date type (e.g., before '0000-01-01')."}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:"-- Subtract two days\nmysql> select date_sub(cast('2010-11-30 23:59:59' as datetime), INTERVAL 2 DAY);\n\n+-------------------------------------------------------------------+\n| date_sub(cast('2010-11-30 23:59:59' as datetime), INTERVAL 2 DAY) |\n+-------------------------------------------------------------------+\n| 2010-11-28 23:59:59                                               |\n+-------------------------------------------------------------------+\n\n-- Parameter with scale, return preserves scale\nmysql> select date_sub('2010-11-30 23:59:59.6', INTERVAL 4 SECOND);\n+------------------------------------------------------+\n| date_sub('2010-11-30 23:59:59.6', INTERVAL 4 SECOND) |\n+------------------------------------------------------+\n| 2010-11-30 23:59:55.6                                |\n+------------------------------------------------------+\n\n-- Subtract two months across years\nmysql> select date_sub(cast('2023-01-15' as date), INTERVAL 2 MONTH);\n+--------------------------------------------------------+\n| date_sub(cast('2023-01-15' as date), INTERVAL 2 MONTH) |\n+--------------------------------------------------------+\n| 2022-11-15                                             |\n+--------------------------------------------------------+\n\n-- February 2023 has only 28 days, so subtracting one month from 2023-03-31 results in 2023-02-28\nmysql> select date_sub('2023-03-31', INTERVAL 1 MONTH);\n+------------------------------------------+\n| date_sub('2023-03-31', INTERVAL 1 MONTH) |\n+------------------------------------------+\n| 2023-02-28                               |\n+------------------------------------------+\n\n-- Subtract 61 seconds\nmysql> select date_sub('2023-12-31 23:59:59', INTERVAL 61 SECOND);\n+-----------------------------------------------------+\n| date_sub('2023-12-31 23:59:59', INTERVAL 61 SECOND) |\n+-----------------------------------------------------+\n| 2023-12-31 23:58:58                                 |\n+-----------------------------------------------------+\n\n-- Subtract quarters\nmysql> select date_sub('2023-12-31 23:59:59', INTERVAL 61 QUARTER);\n+------------------------------------------------------+\n| date_sub('2023-12-31 23:59:59', INTERVAL 61 QUARTER) |\n+------------------------------------------------------+\n| 2008-09-30 23:59:59                                  |\n+------------------------------------------------------+\n\n-- Any parameter is NULL\nmysql> select date_sub('2023-01-01', INTERVAL NULL DAY);\n+-------------------------------------------+\n| date_sub('2023-01-01', INTERVAL NULL DAY) |\n+-------------------------------------------+\n| NULL                                      |\n+-------------------------------------------+\n\n-- Exceeds minimum date\nmysql> select date_sub('0000-01-01', INTERVAL 1 DAY);\nERROR 1105 (HY000): errCode = 2, detailMessage = (10.16.10.3)[E-218]Operation day_add of 0000-01-01, -1 out of range\n\nselect date_sub('9999-01-01', INTERVAL -1 YEAR);\nERROR 1105 (HY000): errCode = 2, detailMessage = (10.16.10.3)[E-218]Operation year_add of 9999-01-01, 1 out of range\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{})})]})}function o(e={}){let{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(u,{...e})}):u(e)}},250065:function(e,n,t){t.d(n,{Z:function(){return l},a:function(){return r}});var s=t(667294);let a={},i=s.createContext(a);function r(e){let n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);