"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["896160"],{618665:function(e,i,n){n.r(i),n.d(i,{default:()=>h,frontMatter:()=>o,metadata:()=>t,assets:()=>a,toc:()=>d,contentTitle:()=>l});var t=JSON.parse('{"id":"lakehouse/file-formats/orc","title":"ORC | File Formats","description":"This document introduces the support for reading and writing ORC file formats in Doris. It applies to the following functionalities:","source":"@site/docs/lakehouse/file-formats/orc.md","sourceDirName":"lakehouse/file-formats","slug":"/lakehouse/file-formats/orc","permalink":"/docs/dev/lakehouse/file-formats/orc","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1770477659000,"frontMatter":{"title":"ORC | File Formats","language":"en","description":"This document introduces the support for reading and writing ORC file formats in Doris. It applies to the following functionalities:","sidebar_label":"ORC"},"sidebar":"docs","previous":{"title":"Parquet","permalink":"/docs/dev/lakehouse/file-formats/parquet"},"next":{"title":"Text/CSV/JSON","permalink":"/docs/dev/lakehouse/file-formats/text"}}'),s=n("785893"),r=n("250065");let o={title:"ORC | File Formats",language:"en",description:"This document introduces the support for reading and writing ORC file formats in Doris. It applies to the following functionalities:",sidebar_label:"ORC"},l="ORC",a={},d=[{value:"Supported Compression Formats",id:"supported-compression-formats",level:2},{value:"Parameters",id:"parameters",level:2},{value:"Session Variables",id:"session-variables",level:3},{value:"BE Configuration",id:"be-configuration",level:3}];function c(e){let i={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",ul:"ul",...(0,r.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.header,{children:(0,s.jsx)(i.h1,{id:"orc",children:"ORC"})}),"\n",(0,s.jsx)(i.p,{children:"This document introduces the support for reading and writing ORC file formats in Doris. It applies to the following functionalities:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Reading and writing data in the Catalog."}),"\n",(0,s.jsx)(i.li,{children:"Reading data using Table Valued Functions."}),"\n",(0,s.jsx)(i.li,{children:"Reading data with Broker Load."}),"\n",(0,s.jsx)(i.li,{children:"Writing data during Export."}),"\n",(0,s.jsx)(i.li,{children:"Writing data with Outfile."}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"supported-compression-formats",children:"Supported Compression Formats"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"uncompressed"}),"\n",(0,s.jsx)(i.li,{children:"snappy"}),"\n",(0,s.jsx)(i.li,{children:"lz4"}),"\n",(0,s.jsx)(i.li,{children:"zstd"}),"\n",(0,s.jsx)(i.li,{children:"lzo"}),"\n",(0,s.jsx)(i.li,{children:"zlib"}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"parameters",children:"Parameters"}),"\n",(0,s.jsx)(i.h3,{id:"session-variables",children:"Session Variables"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.code,{children:"enable_orc_lazy_mat"})," (2.1+, 3.0+)"]}),"\n",(0,s.jsx)(i.p,{children:"Controls whether the ORC Reader enables lazy materialization. Default is true."}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.code,{children:"hive_orc_use_column_names"})," (2.1.6+, 3.0.3+)"]}),"\n",(0,s.jsxs)(i.p,{children:["When reading ORC data types from Hive tables, Doris will, by default, read data from columns in the ORC file that have the same name as the columns in the Hive table. When this variable is set to ",(0,s.jsx)(i.code,{children:"false"}),", Doris will read data from the ORC file based on the column order in the Hive table, regardless of column names. This is similar to the ",(0,s.jsx)(i.code,{children:"orc.force.positional.evolution"})," variable in Hive. This parameter only applies to top-level column names and is ineffective for columns inside Structs."]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.code,{children:"orc_tiny_stripe_threshold_bytes"})," (2.1.8+, 3.0.3+)"]}),"\n",(0,s.jsxs)(i.p,{children:["In ORC files, if the byte size of a Stripe is less than ",(0,s.jsx)(i.code,{children:"orc_tiny_stripe_threshold"}),", it is considered a Tiny Stripe. For multiple consecutive Tiny Stripes, read optimization will be performed, i.e., multiple Tiny Stripes will be read at once to reduce the number of IO operations. If you do not want to use this optimization, you can set this value to 0. Default is 8M."]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.code,{children:"orc_once_max_read_bytes"})," (2.1.8+, 3.0.3+)"]}),"\n",(0,s.jsxs)(i.p,{children:["When using Tiny Stripe read optimization, multiple Tiny Stripes will be merged into a single IO operation. This parameter controls the maximum number of bytes for each IO request. You should not set this value smaller than ",(0,s.jsx)(i.code,{children:"orc_tiny_stripe_threshold"}),". Default is 8M."]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.code,{children:"orc_max_merge_distance_bytes"})," (2.1.8+, 3.0.3+)"]}),"\n",(0,s.jsx)(i.p,{children:"When using Tiny Stripe read optimization, since two Tiny Stripes to be read may not be consecutive, if the distance between two Tiny Stripes is greater than this parameter, they will not be merged into a single IO operation. Default is 1M."}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.code,{children:"orc_tiny_stripe_amplification_factor"})," (3.1.0+)"]}),"\n",(0,s.jsx)(i.p,{children:"In Tiny Stripe optimization, if there are many columns in the ORC file but only a few are used in the query, Tiny Stripe optimization may cause severe read amplification. When the proportion of actually read bytes to the entire Stripe exceeds this parameter, Tiny Stripe read optimization will be used. The default value is 0.4, and the minimum value is 0."}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.code,{children:"check_orc_init_sargs_success"})," (3.1.0+)"]}),"\n",(0,s.jsx)(i.p,{children:"Checks whether ORC predicate pushdown is successful, used for debugging. Default is false."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"be-configuration",children:"BE Configuration"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.code,{children:"orc_natural_read_size_mb"})," (2.1+, 3.0+)"]}),"\n",(0,s.jsx)(i.p,{children:"The maximum number of bytes that the ORC Reader reads at one time. Default is 8 MB."}),"\n"]}),"\n"]})]})}function h(e={}){let{wrapper:i}={...(0,r.a)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},250065:function(e,i,n){n.d(i,{Z:function(){return l},a:function(){return o}});var t=n(667294);let s={},r=t.createContext(s);function o(e){let i=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function l(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),t.createElement(r.Provider,{value:i},e.children)}}}]);