"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["495537"],{61777:function(e,t,n){n.r(t),n.d(t,{default:()=>x,frontMatter:()=>s,metadata:()=>o,assets:()=>l,toc:()=>d,contentTitle:()=>a});var o=JSON.parse('{"id":"data-operate/export/export-manual","title":"EXPORT | Export","description":"This document will introduce how to use the EXPORT command to export the data stored in Doris.","source":"@site/docs/data-operate/export/export-manual.md","sourceDirName":"data-operate/export","slug":"/data-operate/export/export-manual","permalink":"/docs/dev/data-operate/export/export-manual","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1770477659000,"frontMatter":{"title":"EXPORT | Export","language":"en","description":"This document will introduce how to use the EXPORT command to export the data stored in Doris.","sidebar_label":"EXPORT"},"sidebar":"docs","previous":{"title":"Export Overview","permalink":"/docs/dev/data-operate/export/export-overview"},"next":{"title":"SELECT INTO OUTFILE","permalink":"/docs/dev/data-operate/export/outfile"}}'),i=n("785893"),r=n("250065");let s={title:"EXPORT | Export",language:"en",description:"This document will introduce how to use the EXPORT command to export the data stored in Doris.",sidebar_label:"EXPORT"},a="EXPORT",l={},d=[{value:"Applicable Scenarios",id:"applicable-scenarios",level:2},{value:"Quick Start",id:"quick-start",level:2},{value:"Table Creation and Data Import",id:"table-creation-and-data-import",level:3},{value:"Create an Export Job",id:"create-an-export-job",level:3},{value:"Export to HDFS",id:"export-to-hdfs",level:4},{value:"Export to Object Storage",id:"export-to-object-storage",level:4},{value:"View Export Jobs",id:"view-export-jobs",level:3},{value:"Cancel Export Jobs",id:"cancel-export-jobs",level:3},{value:"Export Instructions",id:"export-instructions",level:2},{value:"Export Data Sources",id:"export-data-sources",level:3},{value:"Export Data Storage Locations",id:"export-data-storage-locations",level:3},{value:"Export File Types",id:"export-file-types",level:3},{value:"Examples",id:"examples",level:2},{value:"Export to an HDFS Cluster with High Availability Enabled",id:"export-to-an-hdfs-cluster-with-high-availability-enabled",level:3},{value:"Export to an HDFS Cluster with High Availability and Kerberos Authentication Enabled",id:"export-to-an-hdfs-cluster-with-high-availability-and-kerberos-authentication-enabled",level:3},{value:"Specify Partition for Export",id:"specify-partition-for-export",level:3},{value:"Filter Data During Export",id:"filter-data-during-export",level:3},{value:"Export External Table Data",id:"export-external-table-data",level:3},{value:"Clearing the Export Directory Before Exporting",id:"clearing-the-export-directory-before-exporting",level:3},{value:"Setting the Size of Exported Files",id:"setting-the-size-of-exported-files",level:3},{value:"Notice",id:"notice",level:2},{value:"Appendix",id:"appendix",level:2},{value:"Basic Principle",id:"basic-principle",level:3},{value:"Exporting to the Local File System",id:"exporting-to-the-local-file-system",level:3}];function c(e){let t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"export",children:"EXPORT"})}),"\n",(0,i.jsxs)(t.p,{children:["This document will introduce how to use the ",(0,i.jsx)(t.code,{children:"EXPORT"})," command to export the data stored in Doris."]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.code,{children:"Export"})," is a function provided by Doris for asynchronously exporting data. This function can export the data of the tables or partitions specified by users in the specified file format to the target storage systems, including object storage, HDFS or local file system."]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.code,{children:"Export"})," is an asynchronously executed command. Once the command is executed successfully, it will return the result immediately. Users can view the detailed information of the Export task through the ",(0,i.jsx)(t.code,{children:"Show Export"})," command."]}),"\n",(0,i.jsxs)(t.p,{children:["For the detailed introduction of the ",(0,i.jsx)(t.code,{children:"EXPORT"})," command, please refer to: ",(0,i.jsx)(t.a,{href:"../../sql-manual/sql-statements/data-modification/load-and-export/EXPORT",children:"EXPORT"})]}),"\n",(0,i.jsxs)(t.p,{children:["Regarding how to choose between ",(0,i.jsx)(t.code,{children:"SELECT INTO OUTFILE"})," and ",(0,i.jsx)(t.code,{children:"EXPORT"}),", please refer to ",(0,i.jsx)(t.a,{href:"/docs/dev/data-operate/export/export-overview",children:"Export Overview"}),"."]}),"\n",(0,i.jsx)(t.h2,{id:"applicable-scenarios",children:"Applicable Scenarios"}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.code,{children:"Export"})," is applicable to the following scenarios:"]}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Exporting a single table with a large amount of data, only requiring simple filtering conditions."}),"\n",(0,i.jsx)(t.li,{children:"Scenarios where tasks need to be submitted asynchronously."}),"\n"]}),"\n",(0,i.jsxs)(t.p,{children:["The following limitations should be noted when using ",(0,i.jsx)(t.code,{children:"Export"}),":"]}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Currently, exporting in compressed text file formats is not supported."}),"\n",(0,i.jsxs)(t.li,{children:["Exporting the result set of ",(0,i.jsx)(t.code,{children:"Select"})," is not supported. If you need to export the ",(0,i.jsx)(t.code,{children:"Select"})," result set, please use ",(0,i.jsx)(t.a,{href:"/docs/dev/data-operate/export/outfile",children:"OUTFILE Export"}),"."]}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,i.jsx)(t.h3,{id:"table-creation-and-data-import",children:"Table Creation and Data Import"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-sql",children:"CREATE TABLE IF NOT EXISTS tbl (\n    `c1` int(11) NULL,\n    `c2` string NULL,\n    `c3` bigint NULL\n)\nDISTRIBUTED BY HASH(c1) BUCKETS 20\nPROPERTIES(\"replication_num\" = \"1\");\n\n\ninsert into tbl values\n    (1, 'doris', 18),\n    (2, 'nereids', 20),\n    (3, 'pipelibe', 99999),\n    (4, 'Apache', 122123455),\n    (5, null, null);\n"})}),"\n",(0,i.jsx)(t.h3,{id:"create-an-export-job",children:"Create an Export Job"}),"\n",(0,i.jsx)(t.h4,{id:"export-to-hdfs",children:"Export to HDFS"}),"\n",(0,i.jsxs)(t.p,{children:["Export all data from the ",(0,i.jsx)(t.code,{children:"tbl"})," table to HDFS. Set the file format of the export job to csv (the default format) and set the column delimiter to ",(0,i.jsx)(t.code,{children:","}),"."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-sql",children:'EXPORT TABLE tbl\nTO "hdfs://host/path/to/export/" \nPROPERTIES\n(\n    "line_delimiter" = ","\n)\nwith HDFS (\n    "fs.defaultFS"="hdfs://hdfs_host:port",\n    "hadoop.username" = "hadoop"\n);\n'})}),"\n",(0,i.jsx)(t.h4,{id:"export-to-object-storage",children:"Export to Object Storage"}),"\n",(0,i.jsxs)(t.p,{children:["Export all the data in the ",(0,i.jsx)(t.code,{children:"tbl"})," table to the object storage, set the file format of the export job to csv (the default format), and set the column delimiter to ",(0,i.jsx)(t.code,{children:","}),"."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-sql",children:'EXPORT TABLE tbl TO "s3://bucket/export/export_" \nPROPERTIES (\n    "line_delimiter" = ","\n) WITH s3 (\n    "s3.endpoint" = "xxxxx",\n    "s3.region" = "xxxxx",\n    "s3.secret_key"="xxxx",\n    "s3.access_key" = "xxxxx"\n);\n'})}),"\n",(0,i.jsx)(t.h3,{id:"view-export-jobs",children:"View Export Jobs"}),"\n",(0,i.jsxs)(t.p,{children:["After submitting a job, you can query the status of the export job via the ",(0,i.jsx)(t.a,{href:"../../sql-manual/sql-statements/data-modification/load-and-export/SHOW-EXPORT",children:"SHOW EXPORT"})," command. An example of the result is as follows:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-sql",children:'mysql> show export\\G\n*************************** 1. row ***************************\n      JobId: 143265\n      Label: export_0aa6c944-5a09-4d0b-80e1-cb09ea223f65\n      State: FINISHED\n   Progress: 100%\n   TaskInfo: {"partitions":[],"parallelism":5,"data_consistency":"partition","format":"csv","broker":"S3","column_separator":"\\t","line_delimiter":"\\n","max_file_size":"2048MB","delete_existing_files":"","with_bom":"false","db":"tpch1","tbl":"lineitem"}\n       Path: s3://bucket/export/export_\n CreateTime: 2024-06-11 18:01:18\n  StartTime: 2024-06-11 18:01:18\n FinishTime: 2024-06-11 18:01:31\n    Timeout: 7200\n   ErrorMsg: NULL\nOutfileInfo: [\n  [\n    {\n      "fileNumber": "1",\n      "totalRows": "6001215",\n      "fileSize": "747503989",\n      "url": "s3://bucket/export/export_6555cd33e7447c1-baa9568b5c4eb0ac_*"\n    }\n  ]\n]\n1 row in set (0.00 sec)\n'})}),"\n",(0,i.jsxs)(t.p,{children:["For the detailed usage of the ",(0,i.jsx)(t.code,{children:"show export"})," command and the meaning of each column in the returned results, please refer to ",(0,i.jsx)(t.a,{href:"../../sql-manual/sql-statements/data-modification/load-and-export/SHOW-EXPORT",children:"SHOW EXPORT"}),"."]}),"\n",(0,i.jsx)(t.h3,{id:"cancel-export-jobs",children:"Cancel Export Jobs"}),"\n",(0,i.jsxs)(t.p,{children:["After submitting an Export job, the export job can be cancelled via the ",(0,i.jsx)(t.a,{href:"../../sql-manual/sql-statements/data-modification/load-and-export/CANCEL-EXPORT",children:"CANCEL EXPORT"})," command before the Export task succeeds or fails. An example of the cancellation command is as follows:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-sql",children:'CANCEL EXPORT FROM dbName WHERE LABEL like "%export_%";\n'})}),"\n",(0,i.jsx)(t.h2,{id:"export-instructions",children:"Export Instructions"}),"\n",(0,i.jsx)(t.h3,{id:"export-data-sources",children:"Export Data Sources"}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.code,{children:"EXPORT"})," currently supports exporting the following types of tables or views:"]}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Internal tables in Doris"}),"\n",(0,i.jsx)(t.li,{children:"Logical views in Doris"}),"\n",(0,i.jsx)(t.li,{children:"Tables in External Catalog"}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"export-data-storage-locations",children:"Export Data Storage Locations"}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.code,{children:"Export"})," currently supports exporting to the following storage locations:"]}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Object storage: Amazon S3, COS, OSS, OBS, Google GCS"}),"\n",(0,i.jsx)(t.li,{children:"HDFS"}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"export-file-types",children:"Export File Types"}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.code,{children:"EXPORT"})," currently supports exporting to the following file formats:"]}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Parquet"}),"\n",(0,i.jsx)(t.li,{children:"ORC"}),"\n",(0,i.jsx)(t.li,{children:"csv"}),"\n",(0,i.jsx)(t.li,{children:"csv_with_names"}),"\n",(0,i.jsx)(t.li,{children:"csv_with_names_and_types"}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"examples",children:"Examples"}),"\n",(0,i.jsx)(t.h3,{id:"export-to-an-hdfs-cluster-with-high-availability-enabled",children:"Export to an HDFS Cluster with High Availability Enabled"}),"\n",(0,i.jsx)(t.p,{children:"If the HDFS has high availability enabled, HA information needs to be provided. For example:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-sql",children:'EXPORT TABLE tbl \nTO "hdfs://HDFS8000871/path/to/export_" \nPROPERTIES\n(\n    "line_delimiter" = ","\n)\nwith HDFS (\n    "fs.defaultFS" = "hdfs://HDFS8000871",\n    "hadoop.username" = "hadoop",\n    "dfs.nameservices" = "your-nameservices",\n    "dfs.ha.namenodes.your-nameservices" = "nn1,nn2",\n    "dfs.namenode.rpc-address.HDFS8000871.nn1" = "ip:port",\n    "dfs.namenode.rpc-address.HDFS8000871.nn2" = "ip:port",\n    "dfs.client.failover.proxy.provider.HDFS8000871" = "org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider"\n);\n'})}),"\n",(0,i.jsx)(t.h3,{id:"export-to-an-hdfs-cluster-with-high-availability-and-kerberos-authentication-enabled",children:"Export to an HDFS Cluster with High Availability and Kerberos Authentication Enabled"}),"\n",(0,i.jsx)(t.p,{children:"If the HDFS cluster has both high availability enabled and Kerberos authentication enabled, you can refer to the following SQL statements:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-sql",children:'EXPORT TABLE tbl \nTO "hdfs://HDFS8000871/path/to/export_" \nPROPERTIES\n(\n    "line_delimiter" = ","\n)\nwith HDFS (\n    "fs.defaultFS"="hdfs://hacluster/",\n    "hadoop.username" = "hadoop",\n    "dfs.nameservices"="hacluster",\n    "dfs.ha.namenodes.hacluster"="n1,n2",\n    "dfs.namenode.rpc-address.hacluster.n1"="192.168.0.1:8020",\n    "dfs.namenode.rpc-address.hacluster.n2"="192.168.0.2:8020",\n    "dfs.client.failover.proxy.provider.hacluster"="org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider",\n    "dfs.namenode.kerberos.principal"="hadoop/_HOST@REALM.COM"\n    "hadoop.security.authentication"="kerberos",\n    "hadoop.kerberos.principal"="doris_test@REALM.COM",\n    "hadoop.kerberos.keytab"="/path/to/doris_test.keytab"\n);\n'})}),"\n",(0,i.jsx)(t.h3,{id:"specify-partition-for-export",children:"Specify Partition for Export"}),"\n",(0,i.jsxs)(t.p,{children:["The export job supports exporting only some partitions of the internal tables in Doris. For example, only export partitions p1 and p2 of the ",(0,i.jsx)(t.code,{children:"test"})," table."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-sql",children:'EXPORT TABLE test\nPARTITION (p1,p2)\nTO "s3://bucket/export/export_" \nPROPERTIES (\n    "columns" = "k1,k2"\n) WITH s3 (\n    "s3.endpoint" = "xxxxx",\n    "s3.region" = "xxxxx",\n    "s3.secret_key"="xxxx",\n    "s3.access_key" = "xxxxx"\n);\n'})}),"\n",(0,i.jsx)(t.h3,{id:"filter-data-during-export",children:"Filter Data During Export"}),"\n",(0,i.jsxs)(t.p,{children:["The export job supports filtering data according to predicate conditions during the export process, exporting only the data that meets the conditions. For example, only export the data that satisfies the condition ",(0,i.jsx)(t.code,{children:"k1 < 50"}),"."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-sql",children:'EXPORT TABLE test\nWHERE k1 < 50\nTO "s3://bucket/export/export_"\nPROPERTIES (\n    "columns" = "k1,k2",\n    "column_separator"=","\n) WITH s3 (\n    "s3.endpoint" = "xxxxx",\n    "s3.region" = "xxxxx",\n    "s3.secret_key"="xxxx",\n    "s3.access_key" = "xxxxx"\n);\n'})}),"\n",(0,i.jsx)(t.h3,{id:"export-external-table-data",children:"Export External Table Data"}),"\n",(0,i.jsx)(t.p,{children:"The export job supports the data of tables in External Catalog."}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-sql",children:'-- Create a hive catalog\nCREATE CATALOG hive_catalog PROPERTIES (\n    \'type\' = \'hms\',\n    \'hive.metastore.uris\' = \'thrift://172.0.0.1:9083\'\n);\n\n-- Export hive table\nEXPORT TABLE hive_catalog.sf1.lineitem TO "s3://bucket/export/export_"\nPROPERTIES(\n    "format" = "csv",\n    "max_file_size" = "1024MB"\n) WITH s3 (\n    "s3.endpoint" = "xxxxx",\n    "s3.region" = "xxxxx",\n    "s3.secret_key"="xxxx",\n    "s3.access_key" = "xxxxx"\n);\n'})}),"\n",(0,i.jsx)(t.h3,{id:"clearing-the-export-directory-before-exporting",children:"Clearing the Export Directory Before Exporting"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-sql",children:'EXPORT TABLE test TO "s3://bucket/export/export_"\nPROPERTIES (\n    "format" = "parquet",\n    "max_file_size" = "512MB",\n    "delete_existing_files" = "true"\n) WITH s3 (\n    "s3.endpoint" = "xxxxx",\n    "s3.region" = "xxxxx",\n    "s3.secret_key"="xxxx",\n    "s3.access_key" = "xxxxx"\n);\n'})}),"\n",(0,i.jsxs)(t.p,{children:["If ",(0,i.jsx)(t.code,{children:'"delete_existing_files" = "true"'})," is set, the export job will first delete all files and directories under the ",(0,i.jsx)(t.code,{children:"s3://bucket/export/"})," directory, and then export the data to this directory."]}),"\n",(0,i.jsxs)(t.p,{children:["If you want to use the ",(0,i.jsx)(t.code,{children:"delete_existing_files"})," parameter, you also need to add the configuration ",(0,i.jsx)(t.code,{children:"enable_delete_existing_files = true"})," in the ",(0,i.jsx)(t.code,{children:"fe.conf"})," and restart the FE. Only then will the ",(0,i.jsx)(t.code,{children:"delete_existing_files"})," take effect. This operation will delete the data of the external system and is a high-risk operation. Please ensure the permissions and data security of the external system on your own."]}),"\n",(0,i.jsx)(t.h3,{id:"setting-the-size-of-exported-files",children:"Setting the Size of Exported Files"}),"\n",(0,i.jsx)(t.p,{children:"The export job supports setting the size of the export file. If the size of a single file exceeds the set value, it will be divided into multiple files for export according to the specified size."}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-sql",children:'EXPORT TABLE test TO "s3://bucket/export/export_"\nPROPERTIES (\n    "format" = "parquet",\n    "max_file_size" = "512MB"\n) WITH s3 (\n    "s3.endpoint" = "xxxxx",\n    "s3.region" = "xxxxx",\n    "s3.secret_key"="xxxx",\n    "s3.access_key" = "xxxxx"\n);\n'})}),"\n",(0,i.jsxs)(t.p,{children:["By setting ",(0,i.jsx)(t.code,{children:'"max_file_size" = "512MB"'}),", the maximum size of a single exported file is 512MB."]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.code,{children:"max_file_size"})," cannot be less than 5MB and cannot be greater than 2GB."]}),"\n",(0,i.jsx)(t.p,{children:"In versions 2.1.11 and 3.0.7, the maximum limit of 2GB was removed, leaving only the minimum limit of 5MB."}),"\n",(0,i.jsx)(t.h2,{id:"notice",children:"Notice"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsx)(t.p,{children:"Export Data Volume"}),"\n",(0,i.jsx)(t.p,{children:"It is not recommended to export a large amount of data at one time. The recommended maximum export data volume for an Export job is several tens of gigabytes. Excessive exports will lead to more junk files and higher retry costs. If the table data volume is too large, it is recommended to export by partitions."}),"\n",(0,i.jsx)(t.p,{children:"In addition, the Export job will scan data and occupy IO resources, which may affect the query latency of the system."}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsx)(t.p,{children:"Export File Management"}),"\n",(0,i.jsx)(t.p,{children:"If the Export job fails, the files that have already been generated will not be deleted, and users need to delete them manually."}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsx)(t.p,{children:"Export Timeout"}),"\n",(0,i.jsxs)(t.p,{children:["If the amount of exported data is very large and exceeds the export timeout period, the Export task will fail. At this time, you can specify the ",(0,i.jsx)(t.code,{children:"timeout"})," parameter in the Export command to increase the timeout period and retry the Export command."]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsx)(t.p,{children:"Export Failure"}),"\n",(0,i.jsxs)(t.p,{children:["During the operation of the Export job, if the FE restarts or switches the master, the Export job will fail, and the user needs to resubmit it. You can check the status of the Export task through the ",(0,i.jsx)(t.code,{children:"show export"})," command."]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsx)(t.p,{children:"Number of Exported Partitions"}),"\n",(0,i.jsxs)(t.p,{children:["The maximum number of partitions allowed to be exported by an Export Job is 2000. You can add the parameter ",(0,i.jsx)(t.code,{children:"maximum_number_of_export_partitions"})," in fe.conf and restart the FE to modify this setting."]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsx)(t.p,{children:"Data Integrity"}),"\n",(0,i.jsx)(t.p,{children:"After the export operation is completed, it is recommended to verify whether the exported data is complete and correct to ensure the quality and integrity of the data."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"appendix",children:"Appendix"}),"\n",(0,i.jsx)(t.h3,{id:"basic-principle",children:"Basic Principle"}),"\n",(0,i.jsxs)(t.p,{children:["The underlying layer of the Export task is to execute the ",(0,i.jsx)(t.code,{children:"SELECT INTO OUTFILE"})," SQL statement. After a user initiates an Export task, Doris will construct one or more ",(0,i.jsx)(t.code,{children:"SELECT INTO OUTFILE"})," execution plans according to the table to be exported by Export, and then submit these ",(0,i.jsx)(t.code,{children:"SELECT INTO OUTFILE"})," execution plans to the Job Schedule task scheduler of Doris. The Job Schedule task scheduler will automatically schedule and execute these tasks."]}),"\n",(0,i.jsx)(t.h3,{id:"exporting-to-the-local-file-system",children:"Exporting to the Local File System"}),"\n",(0,i.jsx)(t.p,{children:"The function of exporting to the local file system is disabled by default. This function is only used for local debugging and development, and should not be used in the production environment."}),"\n",(0,i.jsxs)(t.p,{children:["If you want to enable this function, please add ",(0,i.jsx)(t.code,{children:"enable_outfile_to_local=true"})," in the ",(0,i.jsx)(t.code,{children:"fe.conf"})," and restart the FE."]}),"\n",(0,i.jsxs)(t.p,{children:["Example: Export all the data in the ",(0,i.jsx)(t.code,{children:"tbl"})," table to the local file system, set the file format of the export job to csv (the default format), and set the column delimiter to ",(0,i.jsx)(t.code,{children:","}),"."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-sql",children:'EXPORT TABLE tbl TO "file:///path/to/result_"\nPROPERTIES (\n  "format" = "csv",\n  "line_delimiter" = ","\n);\n'})}),"\n",(0,i.jsx)(t.p,{children:"This function will export and write data to the disk of the node where the BE is located. If there are multiple BE nodes, the data will be scattered on different BE nodes according to the concurrency of the export task, and each node will have a part of the data."}),"\n",(0,i.jsxs)(t.p,{children:["As in this example, a set of files similar to ",(0,i.jsx)(t.code,{children:"result_7052bac522d840f5-972079771289e392_0.csv"})," will eventually be produced under ",(0,i.jsx)(t.code,{children:"/path/to/"})," of the BE node."]}),"\n",(0,i.jsxs)(t.p,{children:["The specific BE node IP can be viewed in the ",(0,i.jsx)(t.code,{children:"OutfileInfo"})," column in the ",(0,i.jsx)(t.code,{children:"SHOW EXPORT"})," result, such as:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:'[\n    [\n        {\n            "fileNumber": "1", \n            "totalRows": "0", \n            "fileSize": "8388608", \n            "url": "file:///172.20.32.136/path/to/result_7052bac522d840f5-972079771289e392_*"\n        }\n    ], \n    [\n        {\n            "fileNumber": "1", \n            "totalRows": "0", \n            "fileSize": "8388608", \n            "url": "file:///172.20.32.137/path/to/result_22aba7ec933b4922-ba81e5eca12bf0c2_*"\n        }\n    ]\n]\n'})}),"\n",(0,i.jsx)(t.admonition,{type:"caution",children:(0,i.jsx)(t.p,{children:"This function is not applicable to the production environment, and please ensure the permissions of the export directory and data security on your own."})})]})}function x(e={}){let{wrapper:t}={...(0,r.a)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},250065:function(e,t,n){n.d(t,{Z:function(){return a},a:function(){return s}});var o=n(667294);let i={},r=o.createContext(i);function s(e){let t=o.useContext(r);return o.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),o.createElement(r.Provider,{value:t},e.children)}}}]);