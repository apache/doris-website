"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["14980"],{718797:function(e,n,i){i.r(n),i.d(n,{default:()=>h,frontMatter:()=>r,metadata:()=>t,assets:()=>o,toc:()=>c,contentTitle:()=>a});var t=JSON.parse('{"id":"sql-manual/basic-element/sql-data-types/semi-structured/GEO","title":"GEO","description":"Geospatial types are special data types in databases used to store and manipulate geospatial data,","source":"@site/versioned_docs/version-4.x/sql-manual/basic-element/sql-data-types/semi-structured/GEO.md","sourceDirName":"sql-manual/basic-element/sql-data-types/semi-structured","slug":"/sql-manual/basic-element/sql-data-types/semi-structured/GEO","permalink":"/docs/4.x/sql-manual/basic-element/sql-data-types/semi-structured/GEO","draft":false,"unlisted":false,"tags":[],"version":"4.x","lastUpdatedAt":1770477659000,"frontMatter":{"title":"GEO","language":"en","description":"Geospatial types are special data types in databases used to store and manipulate geospatial data,"},"sidebar":"docs","previous":{"title":"ARRAY","permalink":"/docs/4.x/sql-manual/basic-element/sql-data-types/semi-structured/ARRAY"},"next":{"title":"MAP","permalink":"/docs/4.x/sql-manual/basic-element/sql-data-types/semi-structured/MAP"}}'),s=i("785893"),l=i("250065");let r={title:"GEO",language:"en",description:"Geospatial types are special data types in databases used to store and manipulate geospatial data,"},a=void 0,o={},c=[{value:"Core Encoding Technologies",id:"core-encoding-technologies",level:2},{value:"S2 Geometry Library",id:"s2-geometry-library",level:3},{value:"Core Principles",id:"core-principles",level:4},{value:"Advantages",id:"advantages",level:4},{value:"GeoHash Encoding",id:"geohash-encoding",level:3},{value:"Core Principles",id:"core-principles-1",level:4},{value:"Features",id:"features",level:4},{value:"Comprehensive Comparison and Selection",id:"comprehensive-comparison-and-selection",level:3},{value:"Introduction to WKT",id:"introduction-to-wkt",level:2},{value:"Definition",id:"definition",level:3},{value:"Syntax Structure",id:"syntax-structure",level:3},{value:"Introduction to WKB",id:"introduction-to-wkb",level:2},{value:"Definition",id:"definition-1",level:3},{value:"Encoding Structure",id:"encoding-structure",level:3},{value:"Example",id:"example",level:4},{value:"GeoPoint Type",id:"geopoint-type",level:2},{value:"GeoLine type",id:"geoline-type",level:2},{value:"GeoPolygon type",id:"geopolygon-type",level:2},{value:"GeoMultiPolygon type",id:"geomultipolygon-type",level:2},{value:"GeoCircle type",id:"geocircle-type",level:2},{value:"Constraints",id:"constraints",level:2},{value:"Index",id:"index",level:3},{value:"Common Uses and Methods of Geo Types in Doris",id:"common-uses-and-methods-of-geo-types-in-doris",level:2},{value:"Calculating Distance Between Two Points on Earth",id:"calculating-distance-between-two-points-on-earth",level:3},{value:"Calculating Area of a Region on the Earth&#39;s Sphere",id:"calculating-area-of-a-region-on-the-earths-sphere",level:3}];function d(e){let n={admonition:"admonition",br:"br",code:"code",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,l.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsx)(n.p,{children:"The GEO type described in this document is not an actual data type in Doris, but rather a specific format of data stored based on String/Varchar type, along with the usage of related functions."})}),"\n",(0,s.jsx)(n.p,{children:"Geospatial types are special data types in databases used to store and manipulate geospatial data, which can represent geometric objects such as points, lines, and polygons,Core purposes are as follows:."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Store geographic location information (e.g., longitude and latitude)."}),"\n",(0,s.jsx)(n.li,{children:"Support spatial queries (e.g., distance calculation, area inclusion, intersection judgment)."}),"\n",(0,s.jsx)(n.li,{children:"Process geospatial analysis (e.g., buffer analysis, path planning).\nGeographic Information Systems are widely used in map services, logistics scheduling, location-based social networking, meteorological monitoring, etc. The core requirement is to efficiently store massive spatial data and support low-latency spatial computing."}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"core-encoding-technologies",children:"Core Encoding Technologies"}),"\n",(0,s.jsx)(n.h3,{id:"s2-geometry-library",children:"S2 Geometry Library"}),"\n",(0,s.jsx)(n.p,{children:"S2 Geometry is a spherical geometry encoding system developed by Google. Its core idea is to achieve efficient indexing of global geospatial data through projection from a sphere to a plane."}),"\n",(0,s.jsx)(n.h4,{id:"core-principles",children:"Core Principles"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Spherical projection: Project the Earth's sphere onto the 6 faces of a regular hexahedron, converting 3D spherical data into 2D planar data."}),"\n",(0,s.jsx)(n.li,{children:"Hierarchical grid division: Each face is recursively divided into quadrilateral grids (cells), and each cell can be further subdivided into 4 smaller sub-cells, forming a hierarchical structure with 30 levels of precision (the higher the level, the smaller the cell area and the higher the precision)."}),"\n",(0,s.jsx)(n.li,{children:"64-bit encoding: Each cell is assigned a unique 64-bit ID, through which spatial positions can be quickly located and spatial relationships can be judged."}),"\n",(0,s.jsx)(n.li,{children:"Hilbert curve ordering: Hilbert space-filling curves are used to encode cells, making spatially adjacent cells have continuous IDs and optimizing range query performance."}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"advantages",children:"Advantages"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"High precision and smooth transition: 30 levels of hierarchy, with precision ranging from global (level 0) to centimeter-level (level 30), ensuring smooth transition to meet the needs of different scenarios."}),"\n",(0,s.jsx)(n.li,{children:"Efficiency in global range queries: Suitable for large-scale spatial queries (e.g., cross-continental, cross-country regional analysis) with no significant performance degradation."}),"\n",(0,s.jsx)(n.li,{children:"Efficient spatial relationship calculation: Inclusion, intersection, and other relationships can be quickly judged through cell IDs, avoiding complex geometric operations."}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"geohash-encoding",children:"GeoHash Encoding"}),"\n",(0,s.jsx)(n.p,{children:"GeoHash is a geocoding method based on equirectangular projection, which realizes spatial indexing by converting longitude and latitude into strings."}),"\n",(0,s.jsx)(n.h4,{id:"core-principles-1",children:"Core Principles"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Planar projection: Approximate the Earth's sphere as a plane, and recursively divide the area through binary division of longitude and latitude."}),"\n",(0,s.jsx)(n.li,{children:"Rectangular grid division: Divide the Earth's surface into rectangular cells with different precisions. The length of the string determines the precision (up to 12 characters), and each additional character increases the precision by approximately 10 times."}),"\n",(0,s.jsx)(n.li,{children:"Z-order curve encoding: Form a Z-order curve by alternately truncating the binary bits of longitude and latitude, converting 2D coordinates into 1D strings."}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"features",children:"Features"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Indexing convenience: Adjacent areas can be quickly queried through string prefix matching (e.g., GeoHash codes with the same prefix correspond to spatially adjacent areas)."}),"\n",(0,s.jsxs)(n.li,{children:["Limitations:\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Limited precision levels: Up to 12 levels, with steep transitions between levels, making it difficult to meet the needs of high-precision smooth division."}),"\n",(0,s.jsx)(n.li,{children:"Mutability of Z-order curves: Spatially adjacent areas may have discontinuous codes due to curve jumps, affecting the accuracy of range queries."}),"\n",(0,s.jsx)(n.li,{children:"Low efficiency in large-scale queries: When querying global ranges, a large number of discrete cells need to be scanned, resulting in poor performance."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"comprehensive-comparison-and-selection",children:"Comprehensive Comparison and Selection"}),"\n",(0,s.jsx)(n.p,{children:"Comprehensively comparing the characteristics of S2 Geometry Library and GeoHash, we choose S2 Geometry Library as the third-party dependency for geospatial processing, mainly for the following reasons:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Adaptability to global range queries: S2's hierarchical grid design is more suitable for large-scale spatial analysis, while GeoHash has performance bottlenecks in cross-region queries."}),"\n",(0,s.jsx)(n.li,{children:"Precision and smoothness: S2's 30-level hierarchy can achieve smooth transition from global to centimeter-level, meeting multi-scenario precision requirements, which is better than GeoHash's 12-level division."}),"\n",(0,s.jsx)(n.li,{children:"Spatial continuity: Hilbert curves have better spatial continuity than Z-order curves, which can reduce redundant calculations in range queries."}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"introduction-to-wkt",children:"Introduction to WKT"}),"\n",(0,s.jsx)(n.p,{children:"WKT (Well-Known Text) is a standard text format for representing geospatial data."}),"\n",(0,s.jsx)(n.h3,{id:"definition",children:"Definition"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Text format: Describe the structure and coordinates of geometric objects with text strings."}),"\n",(0,s.jsx)(n.li,{children:"Features: Human-readable, easy to edit, suitable for manual input or simple data exchange."}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"syntax-structure",children:"Syntax Structure"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Basic format: GeometryType(CoordinateValues)"}),"\n",(0,s.jsxs)(n.li,{children:["Common geometric types:\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Point: POINT(longitude, latitude)",(0,s.jsx)(n.br,{}),"\nExample: POINT(112.46, 45.23) represents the longitude and latitude of a point."]}),"\n",(0,s.jsxs)(n.li,{children:["LineString: LINESTRING(point1, point2)",(0,s.jsx)(n.br,{}),"\nExample: LINESTRING(0 0, 1 1) represents a line segment connecting two points."]}),"\n",(0,s.jsx)(n.li,{children:"Polygon: POLYGON ((0 0, 10 0, 10 10, 0 10, 0 0))"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"introduction-to-wkb",children:"Introduction to WKB"}),"\n",(0,s.jsx)(n.p,{children:"WKB (Well-Known Binary) is a standard binary data format for representing geospatial data."}),"\n",(0,s.jsx)(n.h3,{id:"definition-1",children:"Definition"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Binary format: Represent geometric objects with binary encoding, which is more compact and efficient than WKT."}),"\n",(0,s.jsx)(n.li,{children:"Features: Optimized for internal storage and transmission by computers, saving space and enabling fast parsing."}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"encoding-structure",children:"Encoding Structure"}),"\n",(0,s.jsx)(n.p,{children:"WKB consists of the following parts:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Byte order (1 byte):\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"0x00: Big Endian (network byte order)"}),"\n",(0,s.jsx)(n.li,{children:"0x01: Little Endian (common in Intel/AMD architectures)"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Geometry type (4-byte integer):\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"1: Point"}),"\n",(0,s.jsx)(n.li,{children:"2: LineString"}),"\n",(0,s.jsx)(n.li,{children:"3: Polygon"}),"\n",(0,s.jsx)(n.li,{children:"... (other types)"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Coordinate values:\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Point: x, y (or x, y, z)"}),"\n",(0,s.jsx)(n.li,{children:"LineString: coordinates of point1, coordinates of point2"}),"\n",(0,s.jsx)(n.li,{children:"Polygon: coordinates of point1, coordinates of point2..."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"example",children:"Example"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"    01 01 00 00 00 00 00 00 00 00 F0 3F 00 00 00 00 00 00 00 40\n    \u2514\u2500\u2518 \u2514\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n    \u2502   \u2502         \u2502               \u2502\n    Little Endian Point type     x=1.0           y=2.0\n"})}),"\n",(0,s.jsx)(n.h2,{id:"geopoint-type",children:"GeoPoint Type"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Storing WKT Format Using String or Varchar"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE simple_point (  id INT,  wkt STRING) ;\nINSERT INTO simple_point VALUES(1,'POINT(121.4737 31.2304)');\n\ncreate table simple_point(id int, wkt VARCHAR(255);\nINSERT INTO simple_point VALUES(1,'POINT(121.4737 31.2304)');\n"})}),"\n",(0,s.jsx)(n.p,{children:"Querying WKT Format"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"select st_astext(st_geometryfromtext(wkt)) from simple_point;\n+-------------------------------------+\n| st_astext(st_geometryfromtext(wkt)) |\n+-------------------------------------+\n| POINT (121.4737 31.2304)            |\n+-------------------------------------+\n"})}),"\n",(0,s.jsxs)(n.ol,{start:"2",children:["\n",(0,s.jsx)(n.li,{children:"Storing Using WKB Format"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE simple_point (  id INT,  wkb STRING) ;\nINSERT INTO simple_point VALUES(1,'\\x01010000005f07ce19515e5e4097ff907efb3a3f40');\n\ncreate table simple_point(id int, wkb VARCHAR(255);\nINSERT INTO simple_point VALUES(1,'\\x01010000005f07ce19515e5e4097ff907efb3a3f40');\n\n"})}),"\n",(0,s.jsx)(n.p,{children:"Querying WKB Format"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"select st_astext(st_geometryfromwkb(wkb)) from simple_point;\n+------------------------------------+\n| st_astext(st_geometryfromwkb(wkb)) |\n+------------------------------------+\n| POINT (121.4737 31.2304)           |\n+------------------------------------+\n"})}),"\n",(0,s.jsxs)(n.ol,{start:"3",children:["\n",(0,s.jsx)(n.li,{children:"Storing Coordinates Using Floating-Point Numbers (x for latitude, y for longitude)"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE simple_point_double (id INT,x DOUBLE,y DOUBLE) \nINSERT INTO simple_point_double VALUES(0,1,2);\n"})}),"\n",(0,s.jsx)(n.p,{children:"Querying Floating-Point Format"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"select st_astext(st_point(x,y)) from simple_point_double;\n+--------------------------+\n| st_astext(st_point(x,y)) |\n+--------------------------+\n| POINT (1 2)              |\n+--------------------------+\n"})}),"\n",(0,s.jsx)(n.h2,{id:"geoline-type",children:"GeoLine type"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Storing WKT Format Using String or Varchar"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE simple_line (  id INT,  wkt STRING\uFF09\nINSERT INTO simple_line VALUES(1,'LINESTRING(116.4074 39.9042, 121.4737 31.2304)');\n\nCREATE TABLE simple_line (  id INT,  wkt VARCHAR(255)\uFF09\nINSERT INTO simple_line VALUES(1,'LINESTRING(116.4074 39.9042, 121.4737 31.2304)');\n"})}),"\n",(0,s.jsx)(n.p,{children:"Querying WKT Format"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"select st_astext(st_linefromtext(wkt)) from simple_line;\n+-------------------------------------------------+\n| st_astext(st_linefromtext(wkt))                 |\n+-------------------------------------------------+\n| LINESTRING (116.4074 39.9042, 121.4737 31.2304) |\n+-------------------------------------------------+\n"})}),"\n",(0,s.jsxs)(n.ol,{start:"2",children:["\n",(0,s.jsx)(n.li,{children:"Storing Using WKB Format"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE simple_line (  id INT,  wkb STRING\uFF09\nINSERT INTO simple_line VALUES(1,'\\x010200000002000000fc1873d7121a5d4088855ad3bcf343405f07ce19515e5e4097ff907efb3a3f40');\n\nCREATE TABLE simple_line (  id INT,  wkb VARCHAR(255)\uFF09\nINSERT INTO simple_line VALUES(1,'\\x010200000002000000fc1873d7121a5d4088855ad3bcf343405f07ce19515e5e4097ff907efb3a3f40');\n"})}),"\n",(0,s.jsx)(n.p,{children:"Querying WKB Format"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"select st_astext(st_geometryfromwkb(wkb)) from simple_line;\n+-------------------------------------------------+\n| st_astext(st_geometryfromwkb(wkb))              |\n+-------------------------------------------------+\n| LINESTRING (116.4074 39.9042, 121.4737 31.2304) |\n+-------------------------------------------------+\n"})}),"\n",(0,s.jsx)(n.h2,{id:"geopolygon-type",children:"GeoPolygon type"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Storing WKT Format Using String or Varchar"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE simple_polygon (  id INT,  wkt STRING\uFF09\nINSERT INTO simple_polygon VALUES(1,'POLYGON((0 0, 0 10, 10 10, 10 0, 0 0))');\n\nCREATE TABLE simple_polygon (  id INT,  wkt VARCHAR(255)\uFF09\nINSERT INTO simple_polygon VALUES(1,'POLYGON((0 0, 0 10, 10 10, 10 0, 0 0))');\n"})}),"\n",(0,s.jsx)(n.p,{children:"Querying WKT Format"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"select st_astext(st_polygon(wkt)) from simple_polygon;\n+------------------------------------------+\n| st_astext(st_polygon(wkt))               |\n+------------------------------------------+\n| POLYGON ((10 0, 10 10, 0 10, 0 0, 10 0)) |\n+------------------------------------------+\n"})}),"\n",(0,s.jsxs)(n.ol,{start:"2",children:["\n",(0,s.jsx)(n.li,{children:"Storing Using WKB Format"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE simple_polygon_wkb (  id INT,  wkb STRING\uFF09\nINSERT INTO simple_polygon_wkb VALUES(1,'\\x010300000001000000050000000000000000002440000000000000000000000000000024400000000000002440000000000000000000000000000024400000000000000000000000000000000000000000000024400000000000000000');\n\nCREATE TABLE simple_polygon_wkb (  id INT,  wkb VARCHAR(255)\uFF09\nINSERT INTO simple_polygon_wkb VALUES(1,'\\x010300000001000000050000000000000000002440000000000000000000000000000024400000000000002440000000000000000000000000000024400000000000000000000000000000000000000000000024400000000000000000');\n"})}),"\n",(0,s.jsx)(n.p,{children:"Querying WKB Format"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"select st_astext(st_geometryfromwkb(wkb)) from simple_polygon_wkb;\n+------------------------------------------+\n| st_astext(st_geometryfromwkb(wkb))       |\n+------------------------------------------+\n| POLYGON ((10 0, 10 10, 0 10, 0 0, 10 0)) |\n+------------------------------------------+\n"})}),"\n",(0,s.jsx)(n.h2,{id:"geomultipolygon-type",children:"GeoMultiPolygon type"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Storing WKT Format Using String or Varchar"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE simple_multipolygon (  id INT,  wkt STRING\uFF09\nINSERT INTO simple_multipolygon VALUES(1,'MULTIPOLYGON(((0 0, 0 10, 10 10, 10 0, 0 0)),((20 20, 20 30, 30 30, 30 20, 20 20)))');\n\nCREATE TABLE simple_multipolygon (  id INT,  wkt VARCHAR(255)\uFF09\nINSERT INTO simple_multipolygon VALUES(1,'MULTIPOLYGON(((0 0, 0 10, 10 10, 10 0, 0 0)),  -- \u7B2C\u4E00\u4E2A\u591A\u8FB9\u5F62((20 20, 20 30, 30 30, 30 20, 20 20))  -- \u7B2C\u4E8C\u4E2A\u591A\u8FB9\u5F62)');\n\n"})}),"\n",(0,s.jsx)(n.p,{children:"Querying WKT Format"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"select st_astext(st_geometryfromtext(wkt)) from simple_multipolygon;\n+----------------------------------------------------------------------------------------+\n| st_astext(st_geometryfromtext(wkt))                                                    |\n+----------------------------------------------------------------------------------------+\n| MULTIPOLYGON (((10 0, 10 10, 0 10, 0 0, 10 0)), ((30 20, 30 30, 20 30, 20 20, 30 20))) |\n+----------------------------------------------------------------------------------------+\n"})}),"\n",(0,s.jsx)(n.p,{children:"Note: WKB format conversion for GeoMultiPolygon is not yet supported"}),"\n",(0,s.jsx)(n.h2,{id:"geocircle-type",children:"GeoCircle type"}),"\n",(0,s.jsx)(n.p,{children:"Storage Method (Storing Center Coordinates and Radius Using Floating-Point Numbers)\nSince circles do not conform to WKB and WKT formats, three floating-point numbers are needed to store the center coordinates (x, y) and radius (R) respectively:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"create table simple_circle(id int, X double,Y double, R double)\nINSERT INTO simple_circle VALUES(1,1.0,1.0,2);\n"})}),"\n",(0,s.jsx)(n.p,{children:"Query circle"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"select st_astext(st_circle(X,Y,R)) from simple_circle;\n+-----------------------------+\n| st_astext(st_circle(X,Y,R)) |\n+-----------------------------+\n| CIRCLE ((1 1), 2)           |\n+-----------------------------+\n"})}),"\n",(0,s.jsx)(n.h2,{id:"constraints",children:"Constraints"}),"\n",(0,s.jsx)(n.h3,{id:"index",children:"Index"}),"\n",(0,s.jsx)(n.p,{children:"Since Doris does not directly implement the Geo type but stores and converts it using WKT and WKB, query acceleration for GEO type queries through indexing technology is not possible."}),"\n",(0,s.jsx)(n.p,{children:"Only 13-digit precision can be guaranteed when converting WKT to GEO output:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:'mysql> SELECT ST_AsText(ST_GeometryFromText("POINT (1 3.1415926535897223)"));\n+----------------------------------------------------------------+\n| ST_AsText(ST_GeometryFromText("POINT (1 3.1415926535897223)")) |\n+----------------------------------------------------------------+\n| POINT (1 3.14159265358972)                                     |\n+----------------------------------------------------------------+\n'})}),"\n",(0,s.jsx)(n.p,{children:"Only 13-digit precision can be guaranteed when converting binary to GEO output:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"mysql> select ST_AsText(ST_GeomFromWKB(ST_AsBinary(ST_Point(24.7,3.141592653589793))));\n+--------------------------------------------------------------------------+\n| ST_AsText(ST_GeomFromWKB(ST_AsBinary(ST_Point(24.7,3.141592653589793)))) |\n+--------------------------------------------------------------------------+\n| POINT (24.7 3.1415926535898)                                             |\n+--------------------------------------------------------------------------+\n"})}),"\n",(0,s.jsx)(n.h2,{id:"common-uses-and-methods-of-geo-types-in-doris",children:"Common Uses and Methods of Geo Types in Doris"}),"\n",(0,s.jsx)(n.h3,{id:"calculating-distance-between-two-points-on-earth",children:"Calculating Distance Between Two Points on Earth"}),"\n",(0,s.jsx)(n.p,{children:"The distance of  Beijing to Shanghai\nCoordinates of Beijing (116.4074, 39.9042) and Shanghai (121.4737, 31.2304):"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"select ST_DISTANCE_SPHERE(116.4074, 39.9042, 121.4737, 31.2304);\n+----------------------------------------------------------+\n| ST_DISTANCE_SPHERE(116.4074, 39.9042, 121.4737, 31.2304) |\n+----------------------------------------------------------+\n|                                       1067311.8461903075 |\n+----------------------------------------------------------+\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"alt text",src:i(772858).Z+"",width:"560",height:"714"})}),"\n",(0,s.jsx)(n.p,{children:"Distance of Beijing to New York\nCoordinates of Beijing (116.4074, 39.9042) and New York (-74.0060, 40.7128):"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"select ST_DISTANCE_SPHERE(116.4074, 39.9042, -74.0060, 40.7128);\n+----------------------------------------------------------+\n| ST_DISTANCE_SPHERE(116.4074, 39.9042, -74.0060, 40.7128) |\n+----------------------------------------------------------+\n|                                       10989107.361809434 |\n+----------------------------------------------------------+\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"alt text",src:i(887150).Z+"",width:"843",height:"695"})}),"\n",(0,s.jsx)(n.h3,{id:"calculating-area-of-a-region-on-the-earths-sphere",children:"Calculating Area of a Region on the Earth's Sphere"}),"\n",(0,s.jsx)(n.p,{children:"Estimating New York's Area\nOutline the New York area roughly with a polygon and calculate the area:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"SELECT ST_AREA_SQUARE_KM(\n  ST_GeomFromText('POLYGON((\n      -74.2591 40.9155, \n      -73.8726 40.9147, \n      -73.7004 40.7506, \n      -73.9442 40.5840, \n      -74.0817 40.6437, \n      -74.1502 40.6110, \n      -74.0984 40.6550, \n      -74.0431 40.7290, \n      -74.0136 40.7903, \n      -73.9352 40.8448, \n      -74.2591 40.9155\n    ))'));\n    \n+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| ST_AREA_SQUARE_KM(  ST_GeomFromText('POLYGON((-74.2591 40.9155, -73.8726 40.9147, -73.7004 40.7506, -73.9442 40.5840, -74.0817 40.6437,-74.1502 40.6110,-74.0984 40.6550,-74.0431 40.7290,-74.0136 40.7903,  -73.9352 40.8448, -74.2591 40.9155))'  )) |\n+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n|                                                                                                                                                                                                                                      744.3806189617659 |\n+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"alt text",src:i(694453).Z+"",width:"760",height:"562"})})]})}function h(e={}){let{wrapper:n}={...(0,l.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},887150:function(e,n,i){i.d(n,{Z:function(){return t}});let t=i.p+"assets/images/BeijingToNewyork-813581f71589b59b6fbe032b6e688ff5.png"},772858:function(e,n,i){i.d(n,{Z:function(){return t}});let t=i.p+"assets/images/BeijingToShanghai-d50d3aa04c9eacb8136b7fd883d3f47e.png"},694453:function(e,n,i){i.d(n,{Z:function(){return t}});let t=i.p+"assets/images/Newyork-a898dd5363eaf460df251f826f360f40.png"},250065:function(e,n,i){i.d(n,{Z:function(){return a},a:function(){return r}});var t=i(667294);let s={},l=t.createContext(s);function r(e){let n=t.useContext(l);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),t.createElement(l.Provider,{value:n},e.children)}}}]);